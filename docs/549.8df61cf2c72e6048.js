"use strict";(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[549],{3549:(ut,Q,s)=>{s.r(Q),s.d(Q,{UnitsModule:()=>F,routes:()=>lt});var c=s(6895);class u{}var N=s(2340),x=s(5783),A=s(3705),d=s(4459),t=s(4650),v=s(1182),g=s(9132),L=s(7465),q=s(5298),U=s(3081),O=s(7009),r=s(4006),b=s(4333),p=s(1576),_=s(4859),V=s(811),E=s(3546),B=s(7392),I=s(4144),T=s(9549),P=s(4850),$=s(8255),K=s(1572),w=s(266),nt=s(1419);function ct(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"mat-button-toggle",21),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.gotoNewBuild())}),t.TgZ(1,"mat-icon"),t._uU(2,"add_circle_outline"),t.qZA()()}}const pt=function(a){return["/units/building-add/",a]};function mt(a,e){if(1&a&&(t.TgZ(0,"a",34),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&a){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,pt,i.id))}}function dt(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().$implicit,l=t.oxw();return t.KtG(l.removeBuild(n.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&a&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function gt(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().$implicit,l=t.oxw();return t.KtG(l.customerDebt(n.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"request_quote"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&a&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"MENU.CUSTOMERDEBT")))}function ht(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",22),t.NdJ("click",function(){const l=t.CHM(i).$implicit,m=t.oxw();return t.KtG(m.clickedRows.add(l))}),t.TgZ(1,"div",23),t._uU(2),t.qZA(),t.TgZ(3,"div",23),t._uU(4),t.qZA(),t.TgZ(5,"div",23),t._uU(6),t.qZA(),t.TgZ(7,"div",23),t._uU(8),t.qZA(),t.TgZ(9,"div",23),t._uU(10),t.qZA(),t.TgZ(11,"div",23)(12,"mat-icon",24),t._uU(13),t.qZA()(),t.TgZ(14,"div",23)(15,"div",25),t.YNc(16,mt,4,6,"a",26),t.YNc(17,dt,4,3,"button",27),t.TgZ(18,"button",28,29)(20,"mat-icon"),t._uU(21,"more_vert"),t.qZA()()(),t.TgZ(22,"mat-menu",30,31)(24,"span",32),t.NdJ("mouseleave",function(){t.CHM(i);const n=t.MAs(19);return t.KtG(n.closeMenu())}),t.YNc(25,gt,6,3,"button",33),t.qZA()()()()}if(2&a){const i=e.$implicit,o=t.MAs(23),n=t.oxw();t.ekj("row-is-clicked",n.clickedRows.has(i)),t.xp6(2),t.Oqu(i.BUIName),t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.owner_FullName),t.xp6(2),t.hij(" ",i.BUIPropertyTypeDisplay," "),t.xp6(2),t.hij(" ",i.BUIPropertyUsageTypeDisplay," "),t.xp6(3),t.Oqu("T"==i.BUIActive?"check_box":"check_box_outline_blank"),t.xp6(3),t.Q6J("ngIf",n.can("view_onebuilding")),t.xp6(1),t.Q6J("ngIf",n.can("delete_building")),t.xp6(1),t.Q6J("matMenuTriggerFor",o),t.xp6(7),t.Q6J("ngIf",n.can("view_buildCustomerDept"))}}function Tt(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",37)(1,"div",38)(2,"mat-card",39)(3,"pagination-controls",40),t.NdJ("pageChange",function(n){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(n))}),t.qZA()()()()}}function Ut(a,e){1&a&&(t.TgZ(0,"div",41),t._UZ(1,"mat-spinner",42),t.qZA())}const ft=function(a,e){return{itemsPerPage:a,currentPage:e}};class R{constructor(e,i,o,n,l,m,f){this.appSettings=e,this.unitsService=i,this.router=o,this.global=n,this.localStore=l,this.translateService=m,this.snackBar=f,this.clickedRows=new Set,this.curBuild=new u,this.curCOMId=N.N.comid,this.account=new x.n,this.count=8,this.userPerm=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.securityForApp=(new d.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getBuildings()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getBuildings(){this.buildings=null,this.curUserData.is_superuser?this.unitsService.getAllBuilding(this.curCOMId,this.account.periorty).subscribe(e=>this.buildings=e):1==this.curUserData.periorty&&(this.curBranchID=this.curUserData.branch_KeyField??0,"N"==this.securityForApp&&this.unitsService.getBuildingsPerBranch(this.curCOMId,this.account.periorty,this.curBranchID).subscribe(e=>this.buildings=e),"D"==this.securityForApp&&this.unitsService.getBuildingsPerEmployee(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(e=>this.buildings=e))}removeBuild(e){confirm(this.askToDeletedMsg)&&this.unitsService.deleteBuilding(e).subscribe(i=>this.getBuildings(),i=>{console.log("-YaSayed--Delete Error is:: "+i),this.snackBar.open(this.notDeletedMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3}),"API"==i.type&&console.log("---Error from API:: ")})}featuresBuild(e){}onPageChanged(e){this.page=e,this.getBuildings(),window.scrollTo(0,0)}gotoNewBuild(){this.router.navigate(["/units/building-add/"])}customerDebt(e){this.router.navigate(["/units/customerdebt-rpt/"+e+"/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.NOTDELETED").subscribe(e=>{this.notDeletedMsg=e})}}R.\u0275fac=function(e){return new(e||R)(t.Y36(v.d),t.Y36(A.X),t.Y36(g.F0),t.Y36(L.U),t.Y36(q.C),t.Y36(U.sK),t.Y36(O.ux))},R.\u0275cmp=t.Xpm({type:R,selectors:[["app-building-list"]],features:[t._Bn([A.X])],decls:60,vars:40,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",3,"row-is-clicked","click",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],[1,"mat-mdc-row",3,"click"],[1,"mat-mdc-cell"],[1,"text-muted"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["xPosition","before","overlapTrigger","true"],["menu","matMenu"],[3,"mouseleave"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["mat-menu-item","",3,"click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),t.YNc(4,ct,3,0,"mat-button-toggle",4),t.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),t._uU(7,"search"),t.qZA()()()(),t.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),t.NdJ("ngModelChange",function(n){return i.searchText=n}),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),t._uU(17,"view_list"),t.qZA()(),t.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),t._uU(20,"view_module"),t.qZA()()()()(),t._UZ(21,"mat-divider"),t.TgZ(22,"mat-card")(23,"div",14)(24,"h2"),t._uU(25),t.ALo(26,"translate"),t.qZA()(),t._UZ(27,"mat-divider"),t.TgZ(28,"div",15)(29,"div",16)(30,"div",17)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",17)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",17)(39,"h2"),t._uU(40),t.ALo(41,"translate"),t.qZA()(),t.TgZ(42,"div",17)(43,"h2"),t._uU(44),t.ALo(45,"translate"),t.qZA()(),t.TgZ(46,"div",17)(47,"h2"),t._uU(48),t.ALo(49,"translate"),t.qZA()(),t.TgZ(50,"div",17)(51,"h2"),t._uU(52),t.ALo(53,"translate"),t.qZA()(),t._UZ(54,"div",17),t.qZA(),t.YNc(55,ht,26,12,"div",18),t.ALo(56,"paginate"),t.ALo(57,"BuildingSearchPipe"),t.qZA()(),t.YNc(58,Tt,4,0,"div",19),t.YNc(59,Ut,2,0,"div",20)),2&e){const o=t.MAs(3);t.xp6(4),t.Q6J("ngIf",i.can("add_building")),t.xp6(4),t.ekj("show","search"==o.value),t.xp6(2),t.s9C("placeholder",t.lcZ(11,15,"HTML.SEARCH_BUILDING")),t.Q6J("ngModel",i.searchText),t.xp6(15),t.Oqu(t.lcZ(26,17,"HTML.BUILDING_LIST")),t.xp6(7),t.hij(" ",t.lcZ(33,19,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(37,21,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(41,23,"HTML.OWNER")," "),t.xp6(4),t.hij(" ",t.lcZ(45,25,"HTML.PROPERTY_TYPE")," "),t.xp6(4),t.hij(" ",t.lcZ(49,27,"HTML.PROPERTY_USAGE_TYPE")," "),t.xp6(4),t.hij(" ",t.lcZ(53,29,"HTML.ACTIVATED")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(56,31,t.xi3(57,34,i.buildings,i.searchText),t.WLB(37,ft,i.count,i.page))),t.xp6(3),t.Q6J("ngIf",i.buildings),t.xp6(1),t.Q6J("ngIf",!i.buildings)}},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.On,r.F,b.LS,c.sg,c.O5,g.rH,p.xw,p.Wh,p.yH,_.RK,_.Tq,_.nh,V.A9,V.Yi,E.a8,B.Hw,I.Nt,T.KE,P.d,$.VK,$.OP,$.p6,K.Ou,w.gM,b._s,nt.G2,U.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}.demo-table{width:100%}.mat-mdc-row .mat-mdc-cell{border-bottom:1px solid transparent;cursor:pointer}.mat-mdc-row:hover .mat-mdc-cell{border-color:currentColor}.row-is-clicked{font-weight:700}\n"],encapsulation:2});var W=s(5521),Zt=s(4870),_t=s(7288),j=s(6838),z=s(8959),tt=s(6002),et=s(3238),rt=s(6709),C=s(9602),h=s(5412),it=s(4385),X=s(3848);function Nt(a,e){1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function At(a,e){1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function vt(a,e){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Code is required"),t.qZA())}function bt(a,e){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function xt(a,e){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Building name is required"),t.qZA())}function Ct(a,e){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Property description is required"),t.qZA())}function yt(a,e){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.OWNName," ")}}function Lt(a,e){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Ot(a,e){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function qt(a,e){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function It(a,e){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Mt(a,e){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function St(a,e){1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function Dt(a,e){1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Ft(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",7)(1,"button",76),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.saveUpdate(n.buildForDisplay.id))}),t.YNc(2,St,3,3,"span",1),t.YNc(3,Dt,3,3,"span",1),t.qZA()()}if(2&a){const i=t.oxw();t.xp6(1),t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.buildForDisplay.id),t.xp6(1),t.Q6J("ngIf",i.buildForDisplay.id)}}class S{constructor(e,i,o,n,l,m,f,Z,y,M,ot){this.activatedRoute=e,this.codesService=i,this.unitsService=o,this.contractService=n,this.fb=l,this.localStore=m,this.router=f,this.global=Z,this.translateService=y,this.atlasService=M,this.snackBar=ot,this.curCOMId=N.N.comid,this.account=new x.n,this.docType_const=(new d.I).OwnershipDocTypes,this.country_const=(new d.I).Countries,this.governorate_const=(new d.I).Governorates,this.city_const=(new d.I).City,this.region_const=(new d.I).Regions,this.buildingFeatures_const=(new d.I).BuildingFeatures,this.passwordHide=!0,this.tenant=new u,this.userPerm=[],this.defaultCusImage=(new W.P).noImage,this.CusImageToUpload=null,this.DocTypes=[],this.Countries=[],this.Governorates=[],this.Cities=[],this.Areas=[],this.AllBranches=[],this.AllOwners=[]}ngOnInit(){if(this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.form=this.fb.group({id:null,code:[null,r.kI.required],branchKey:null,name:[null,r.kI.compose([r.kI.required,r.kI.minLength(2)])],description:[null,r.kI.compose([r.kI.required,r.kI.minLength(3)])],image:null,owner:this.fb.group({recievedate:null,docType:null,ownerKey:null,docNumber:null}),build_address:this.fb.group({streetName:null,buildNumber:null,zibCode:null,address:null,addressDescription:null,countryKey:null,governorateKey:null,cityKey:null,areaKey:null,langtitude:null,altitude:null,shortAddress:null,buildingSubNumber:null}),build_desc:this.fb.group({housingStatus:"E",constructionStatus:"E",propertyType:"B",propertyUsageType:"F",floorsNumber:null,flatsNumber:null,shopsNumber:null,storesNumber:null,numberOfElevators:null,numberOfParkingLots:null,enteringGate:null,buildingArea:null,measuringUnit:"M",BUIElectricityCountersNumber:1,BUIElectricityCountersWrittenCode:null,BUIWaterCountersNumber:1,BUIWaterCountersWrittenCode:null,BUIGasCountersNumber:1,BUIGasCountersWrittenCode:null}),settings:this.fb.group({isActive:null,isDeleted:null})}),this.getCountries(this.curCOMId,this.account.periorty),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0),this.getAllOwnerss(this.curCOMId,this.account.periorty),this.getOwnershipDocType(this.curCOMId,this.account.periorty),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=+e.id,this.getBuildById(this.id)):this.buildForDisplay=new u})}else this.router.navigate(["/sign-in"]);this.Builds=new Zt.x,this.EmpBuilds=new _t.j}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=o=>{this.defaultCusImage=o.target.result},i.readAsDataURL(this.CusImageToUpload)}mapFormvalue_to_BuildingClass(){const e=new c.uU("en-GB").transform(this.form.value.owner.recievedate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,this.buildForDisplay.id=this.form.value.id,this.buildForDisplay.branch_KeyField=this.form.value.branchKey,this.buildForDisplay.BUICode=this.form.value.code,this.buildForDisplay.BUIName=this.form.value.name,this.buildForDisplay.BUIDescription=this.form.value.description,this.buildForDisplay.BUIPic=this.form.value.image,null!=this.form.value.owner.recievedate&&(this.buildForDisplay.BUIRecieveDate=e),this.buildForDisplay.owner_KeyField=this.form.value.owner.ownerKey,this.buildForDisplay.ownershipDocType_CTTKeyField=this.form.value.owner.docType,this.buildForDisplay.ownershipDocNumber=this.form.value.owner.docNumber,this.buildForDisplay.Country_CTTKeyField=this.form.value.build_address.countryKey,this.buildForDisplay.Governorate_CTTKeyField=this.form.value.build_address.governorateKey,this.buildForDisplay.City_CTTKeyField=this.form.value.build_address.cityKey,this.buildForDisplay.Area_CTTKeyField=this.form.value.build_address.areaKey,this.buildForDisplay.BUIStreetName=this.form.value.build_address.streetName,this.buildForDisplay.BUIBuildingNumber=this.form.value.build_address.buildNumber,this.buildForDisplay.BUIZibCode=this.form.value.build_address.zibCode,this.buildForDisplay.BUIAddress=this.form.value.build_address.address,this.buildForDisplay.BUIAddressDescription=this.form.value.build_address.addressDescription,this.buildForDisplay.BUILangtitude=this.form.value.build_address.langtitude,this.buildForDisplay.BUIAltitude=this.form.value.build_address.altitude,this.buildForDisplay.BUIShortAddress=this.form.value.build_address.shortAddress,this.buildForDisplay.BUIBuildingSubNumber=this.form.value.build_address.buildingSubNumber,this.buildForDisplay.BUIHousingStatus=this.form.value.build_desc.housingStatus,this.buildForDisplay.BUIConstructionStatus=this.form.value.build_desc.constructionStatus,this.buildForDisplay.BUIPropertyType=this.form.value.build_desc.propertyType,this.buildForDisplay.BUIPropertyUsageType=this.form.value.build_desc.propertyUsageType,this.buildForDisplay.BUIFloorsNumber=this.form.value.build_desc.floorsNumber,this.buildForDisplay.BUIFlatsNumber=this.form.value.build_desc.flatsNumber,this.buildForDisplay.BUIShopsNumber=this.form.value.build_desc.shopsNumber,this.buildForDisplay.BUIStoresNumber=this.form.value.build_desc.storesNumber,this.buildForDisplay.BUINumberOfElevators=this.form.value.build_desc.numberOfElevators,this.buildForDisplay.BUINumberOfParkingLots=this.form.value.build_desc.numberOfParkingLots,this.buildForDisplay.BUIBuildingArea=this.form.value.build_desc.buildingArea,this.buildForDisplay.BUIMeasuringUnit=this.form.value.build_desc.measuringUnit,this.buildForDisplay.BUIEnteringGate=this.form.value.build_desc.enteringGate,this.buildForDisplay.BUIElectricityCountersNumber=this.form.value.build_desc.BUIElectricityCountersNumber,this.buildForDisplay.BUIElectricityCountersWrittenCode=this.form.value.build_desc.BUIElectricityCountersWrittenCode,this.buildForDisplay.BUIWaterCountersNumber=this.form.value.build_desc.BUIWaterCountersNumber,this.buildForDisplay.BUIWaterCountersWrittenCode=this.form.value.build_desc.BUIWaterCountersWrittenCode,this.buildForDisplay.BUIGasCountersNumber=this.form.value.build_desc.BUIGasCountersNumber,this.buildForDisplay.BUIGasCountersWrittenCode=this.form.value.build_desc.BUIGasCountersWrittenCode,this.buildForDisplay.BUIActive=this.tenActive,this.buildForDisplay.RowDelete=this.tenDeleted}getBuildById(e){this.unitsService.getOneBuilding(e).subscribe(i=>{this.fillForm(i),this.buildForDisplay=i})}fillForm(e){this.is_active="T"==e.BUIActive,null!=e.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,e.Country_CTTKeyField),this.defaultCusImage=null!=e.BUIPic?e.BUIPic:(new W.P).noImage,this.is_delete=1==e.RowDelete,console.log("==****tent.BUIRecieveDate****=="+e.BUIRecieveDate),this.form.patchValue({id:e.id,code:e.BUICode,branchKey:e.branch_KeyField,name:e.BUIName,description:e.BUIDescription,image:e.BUIPic,owner:{recievedate:e.BUIRecieveDate,ownerKey:e.owner_KeyField,docType:e.ownershipDocType_CTTKeyField,docNumber:e.ownershipDocNumber},build_address:{streetName:e.BUIStreetName,buildNumber:e.BUIBuildingNumber,zibCode:e.BUIZibCode,address:e.BUIAddress,addressDescription:e.BUIAddressDescription,countryKey:e.Country_CTTKeyField,governorateKey:e.Governorate_CTTKeyField,cityKey:e.City_CTTKeyField,areaKey:e.Area_CTTKeyField,langtitude:e.BUILangtitude,altitude:e.BUIAltitude,shortAddress:e.BUIShortAddress,buildingSubNumber:e.BUIBuildingSubNumber},build_desc:{housingStatus:e.BUIHousingStatus,constructionStatus:e.BUIConstructionStatus,propertyType:e.BUIPropertyType,propertyUsageType:e.BUIPropertyUsageType,floorsNumber:e.BUIFloorsNumber,flatsNumber:e.BUIFlatsNumber,shopsNumber:e.BUIShopsNumber,storesNumber:e.BUIStoresNumber,numberOfElevators:e.BUINumberOfElevators,numberOfParkingLots:e.BUINumberOfParkingLots,buildingArea:e.BUIBuildingArea,measuringUnit:e.BUIMeasuringUnit,enteringGate:e.BUIEnteringGate,BUIElectricityCountersNumber:e.BUIElectricityCountersNumber,BUIElectricityCountersWrittenCode:e.BUIElectricityCountersWrittenCode,BUIWaterCountersNumber:e.BUIWaterCountersNumber,BUIWaterCountersWrittenCode:e.BUIWaterCountersWrittenCode,BUIGasCountersNumber:e.BUIGasCountersNumber,BUIGasCountersWrittenCode:e.BUIGasCountersWrittenCode},settings:{isActive:this.is_active,isDeleted:this.is_delete}})}saveUpdate(e){console.log("=============saveUpdate()==============="),this.mapFormvalue_to_BuildingClass(),e?this.unitsService.editBuild(this.buildForDisplay,this.CusImageToUpload).subscribe(i=>{console.log("yes updated",i),this.unitsService.getOriginalOwnerForBuilding(i.COMId,0,i.id).subscribe(o=>{this.unitsService.deleteBuildingForOwner(o[0].id).subscribe(()=>{this.mapValues_toTable(i),this.unitsService.addBuildForOwner(this.Builds).subscribe(()=>{})})}),this.unitsService.getEmpBuildingForBuilding(i.COMId,0,i.id).subscribe(o=>{this.mapValues_toEmpBuild(i,o[0].id),this.unitsService.editOneEmpBuilding(this.EmpBuilds).subscribe(()=>{})}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["units/building"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):(console.log(this.buildForDisplay),this.unitsService.addBuild(this.buildForDisplay,this.CusImageToUpload).subscribe(i=>{console.log("yes Added",i),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["units/building"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))}mapValues_toTable(e){this.Builds.owner_KeyField=e.owner_KeyField,this.Builds.build_KeyField=e.id,this.Builds.branch_KeyField=e.branch_KeyField,this.Builds.BUOPortion=100,this.Builds.BUOOwnerOriginal="T"}mapValues_toEmpBuild(e,i){this.EmpBuilds.id=i,this.EmpBuilds.owner_KeyField=e.owner_KeyField}close(){}compareFunction(e,i){return e.username==i.username&&e.code==i.code}getOwnershipDocType(e,i){this.codesService.getSubForParent(e,i,this.docType_const).subscribe(o=>{this.DocTypes=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0646\u0648\u0627\u0639 \u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0644\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(o=>{this.Countries=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(e){this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,e.value)}getGovernoratePerCountry(e,i,o){this.codesService.getSubForParentAndRelated(e,i,this.governorate_const,o).subscribe(n=>{this.Governorates=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(e){this.getCityPerGoverno(this.curCOMId,this.account.periorty,e.value)}getCityPerGoverno(e,i,o){this.codesService.getSubForParentAndRelated(e,i,this.city_const,o).subscribe(n=>{this.Cities=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(e){this.getAreaPerCity(this.curCOMId,this.account.periorty,e.value)}getAreaPerCity(e,i,o){this.codesService.getSubForParentAndRelated(e,i,this.region_const,o).subscribe(n=>{this.Areas=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(o=>{this.AllBranches=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(e,i,o,n){console.log("----is Emp"),this.atlasService.getBranchPerEmp(e,i,o).subscribe(l=>{this.AllBranches=l,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+n),this.atlasService.getOneBranch(n).subscribe(m=>{this.AllBranches=m},m=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllOwnerss(e,i){this.contractService.getAllOwners(e,i).subscribe(o=>{this.AllOwners=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0644\u0627\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e})}}S.\u0275fac=function(e){return new(e||S)(t.Y36(g.gz),t.Y36(j.d),t.Y36(A.X),t.Y36(z.W),t.Y36(r.QS),t.Y36(q.C),t.Y36(g.F0),t.Y36(L.U),t.Y36(U.sK),t.Y36(tt.Z),t.Y36(O.ux))},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-building-dialog"]],decls:380,vars:293,consts:[["mat-dialog-title",""],[4,"ngIf"],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["appearance","outline",1,"w-15"],["matInput","","formControlName","code","required",""],["appearance","outline",1,"w-24"],["formControlName","branchKey","id","branchOpSel",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"w-60"],["matInput","","formControlName","name","required",""],["appearance","outline",1,"w-100"],["matInput","","formControlName","description","required",""],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","image","name","image","id","upload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","owner",3,"label"],[1,"w-50"],["matInput","","formControlName","recievedate",3,"matDatepicker"],["matSuffix","",3,"for"],["recievedate",""],["formControlName","ownerKey","id","ownerOpSel",3,"placeholder"],["appearance","outline",1,"w-50"],["formControlName","docType","id","doctypeOpSel",3,"placeholder"],[1,"w-49"],["matInput","","formControlName","docNumber"],["formGroupName","build_address",3,"label"],["appearance","outline",1,"w-80"],["matInput","","formControlName","address"],["appearance","outline",1,"w-19"],["matInput","","formControlName","shortAddress"],["appearance","outline",1,"w-25"],["formControlName","countryKey","id","countrOpSel",3,"placeholder","selectionChange"],["formControlName","governorateKey","id","governoOpSel",3,"placeholder","selectionChange"],["formControlName","cityKey","id","cityOpSel",3,"placeholder","selectionChange"],["formControlName","areaKey","id","areaOpSel",3,"placeholder"],["appearance","outline",1,"w-40"],["matInput","","formControlName","streetName"],["appearance","outline",1,"w-20"],["matInput","","formControlName","buildNumber"],["matInput","","formControlName","zibCode"],["matInput","","formControlName","buildingSubNumber"],["matInput","","formControlName","addressDescription"],["formGroupName","build_desc",3,"label"],["formControlName","housingStatus","id","housingstatOpSel",3,"placeholder"],["appearance","outline",1,"w-45"],["formControlName","constructionStatus","id","constructstatOpSel",3,"placeholder"],["formControlName","propertyType","id","propertyTypeOpSel",3,"placeholder"],["formControlName","propertyUsageType","id","usagetypeOpSel",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["matInput","","formControlName","floorsNumber"],["matInput","","formControlName","flatsNumber"],["matInput","","formControlName","shopsNumber"],["matInput","","formControlName","storesNumber"],["matInput","","formControlName","numberOfElevators"],["matInput","","formControlName","numberOfParkingLots"],["matInput","","formControlName","enteringGate"],["matInput","","formControlName","buildingArea"],["formControlName","measuringUnit","id","measureUnitOpSel",3,"placeholder"],["matInput","","formControlName","BUIElectricityCountersNumber"],["fxFlex","100","fxFlex.gt-sm","66.6",1,"px-1"],["matInput","","formControlName","BUIElectricityCountersWrittenCode"],["matInput","","formControlName","BUIWaterCountersNumber"],["matInput","","formControlName","BUIWaterCountersWrittenCode"],["matInput","","formControlName","BUIGasCountersNumber"],["matInput","","formControlName","BUIGasCountersWrittenCode"],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center","class","w-100",4,"ngIf"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1",0),t.YNc(1,Nt,3,3,"span",1),t.YNc(2,At,3,3,"span",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"form",2)(6,"mat-tab-group",3)(7,"mat-tab",4),t.ALo(8,"translate"),t.TgZ(9,"div",5)(10,"div",6),t._UZ(11,"mat-label"),t.TgZ(12,"div",7)(13,"mat-form-field",8)(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",9),t.YNc(18,vt,2,0,"mat-error",1),t.qZA(),t.TgZ(19,"mat-form-field",10)(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"mat-select",11),t.ALo(24,"translate"),t.TgZ(25,"mat-option",12),t._uU(26,"-"),t.qZA(),t.YNc(27,bt,2,2,"mat-option",13),t.qZA()(),t.TgZ(28,"mat-form-field",14)(29,"mat-label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"input",15),t.YNc(33,xt,2,0,"mat-error",1),t.qZA()()(),t.TgZ(34,"mat-form-field",16)(35,"mat-label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",17),t.YNc(39,Ct,2,0,"mat-error",1),t.qZA(),t.TgZ(40,"div",18),t._UZ(41,"img",19),t.TgZ(42,"input",20),t.NdJ("change",function(n){return i.handelCUSImgInput(n.target.files)}),t.qZA()()()(),t.TgZ(43,"mat-tab",21),t.ALo(44,"translate"),t.TgZ(45,"div",5)(46,"mat-form-field",22)(47,"mat-label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._UZ(50,"input",23)(51,"mat-datepicker-toggle",24)(52,"mat-datepicker",null,25),t.qZA(),t.TgZ(54,"mat-form-field",16)(55,"mat-label"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"mat-select",26),t.ALo(59,"translate"),t.TgZ(60,"mat-option",12),t._uU(61,"-"),t.qZA(),t.YNc(62,yt,2,2,"mat-option",13),t.qZA()(),t.TgZ(63,"div",7)(64,"mat-form-field",27)(65,"mat-label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"mat-select",28),t.ALo(69,"translate"),t.TgZ(70,"mat-option",12),t._uU(71,"-"),t.qZA(),t.YNc(72,Lt,2,2,"mat-option",13),t.qZA()(),t.TgZ(73,"mat-form-field",29)(74,"mat-label"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t._UZ(77,"input",30),t.qZA()()()(),t.TgZ(78,"mat-tab",31),t.ALo(79,"translate"),t.TgZ(80,"div",5)(81,"div",7)(82,"mat-form-field",32)(83,"mat-label"),t._uU(84),t.ALo(85,"translate"),t.qZA(),t._UZ(86,"input",33),t.qZA(),t.TgZ(87,"mat-form-field",34)(88,"mat-label"),t._uU(89),t.ALo(90,"translate"),t.qZA(),t._UZ(91,"input",35),t.qZA()(),t.TgZ(92,"div",7)(93,"mat-form-field",36)(94,"mat-label"),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"mat-select",37),t.NdJ("selectionChange",function(n){return i.getGovernorate(n)}),t.ALo(98,"translate"),t.TgZ(99,"mat-option",12),t._uU(100,"-"),t.qZA(),t.YNc(101,Ot,2,2,"mat-option",13),t.qZA()(),t.TgZ(102,"mat-form-field",36)(103,"mat-label"),t._uU(104),t.ALo(105,"translate"),t.qZA(),t.TgZ(106,"mat-select",38),t.NdJ("selectionChange",function(n){return i.getCity(n)}),t.ALo(107,"translate"),t.TgZ(108,"mat-option",12),t._uU(109,"-"),t.qZA(),t.YNc(110,qt,2,2,"mat-option",13),t.qZA()(),t.TgZ(111,"mat-form-field",10)(112,"mat-label"),t._uU(113),t.ALo(114,"translate"),t.qZA(),t.TgZ(115,"mat-select",39),t.NdJ("selectionChange",function(n){return i.getAria(n)}),t.ALo(116,"translate"),t.TgZ(117,"mat-option",12),t._uU(118,"-"),t.qZA(),t.YNc(119,It,2,2,"mat-option",13),t.qZA()(),t.TgZ(120,"mat-form-field",36)(121,"mat-label"),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"mat-select",40),t.ALo(125,"translate"),t.TgZ(126,"mat-option",12),t._uU(127,"-"),t.qZA(),t.YNc(128,Mt,2,2,"mat-option",13),t.qZA()()(),t.TgZ(129,"div",7)(130,"mat-form-field",41)(131,"mat-label"),t._uU(132),t.ALo(133,"translate"),t.qZA(),t._UZ(134,"input",42),t.qZA(),t.TgZ(135,"mat-form-field",43)(136,"mat-label"),t._uU(137),t.ALo(138,"translate"),t.qZA(),t._UZ(139,"input",44),t.qZA(),t.TgZ(140,"mat-form-field",34)(141,"mat-label"),t._uU(142),t.ALo(143,"translate"),t.qZA(),t._UZ(144,"input",45),t.qZA(),t.TgZ(145,"mat-form-field",43)(146,"mat-label"),t._uU(147),t.ALo(148,"translate"),t.qZA(),t._UZ(149,"input",46),t.qZA()(),t.TgZ(150,"mat-form-field",16)(151,"mat-label"),t._uU(152),t.ALo(153,"translate"),t.qZA(),t._UZ(154,"input",47),t.qZA()()(),t.TgZ(155,"mat-tab",48),t.ALo(156,"translate"),t.TgZ(157,"div",5)(158,"div",6),t._UZ(159,"mat-label"),t.TgZ(160,"div",7)(161,"mat-form-field",27)(162,"mat-label"),t._uU(163),t.ALo(164,"translate"),t.qZA(),t.TgZ(165,"mat-select",49),t.ALo(166,"translate"),t.TgZ(167,"mat-option",12),t._uU(168,"-"),t.qZA(),t.TgZ(169,"mat-option",12),t._uU(170),t.ALo(171,"translate"),t.qZA(),t.TgZ(172,"mat-option",12),t._uU(173),t.ALo(174,"translate"),t.qZA(),t.TgZ(175,"mat-option",12),t._uU(176),t.ALo(177,"translate"),t.qZA(),t.TgZ(178,"mat-option",12),t._uU(179),t.ALo(180,"translate"),t.qZA(),t.TgZ(181,"mat-option",12),t._uU(182),t.ALo(183,"translate"),t.qZA()()(),t.TgZ(184,"mat-form-field",50)(185,"mat-label"),t._uU(186),t.ALo(187,"translate"),t.qZA(),t.TgZ(188,"mat-select",51),t.ALo(189,"translate"),t.TgZ(190,"mat-option",12),t._uU(191,"-"),t.qZA(),t.TgZ(192,"mat-option",12),t._uU(193),t.ALo(194,"translate"),t.qZA(),t.TgZ(195,"mat-option",12),t._uU(196),t.ALo(197,"translate"),t.qZA(),t.TgZ(198,"mat-option",12),t._uU(199),t.ALo(200,"translate"),t.qZA(),t.TgZ(201,"mat-option",12),t._uU(202),t.ALo(203,"translate"),t.qZA(),t.TgZ(204,"mat-option",12),t._uU(205),t.ALo(206,"translate"),t.qZA()()()()(),t.TgZ(207,"div",7)(208,"mat-form-field",27)(209,"mat-label"),t._uU(210),t.ALo(211,"translate"),t.qZA(),t.TgZ(212,"mat-select",52),t.ALo(213,"translate"),t.TgZ(214,"mat-option",12),t._uU(215,"-"),t.qZA(),t.TgZ(216,"mat-option",12),t._uU(217),t.ALo(218,"translate"),t.qZA(),t.TgZ(219,"mat-option",12),t._uU(220),t.ALo(221,"translate"),t.qZA(),t.TgZ(222,"mat-option",12),t._uU(223),t.ALo(224,"translate"),t.qZA(),t.TgZ(225,"mat-option",12),t._uU(226),t.ALo(227,"translate"),t.qZA(),t.TgZ(228,"mat-option",12),t._uU(229),t.ALo(230,"translate"),t.qZA()()(),t.TgZ(231,"mat-form-field",50)(232,"mat-label"),t._uU(233),t.ALo(234,"translate"),t.qZA(),t.TgZ(235,"mat-select",53),t.ALo(236,"translate"),t.TgZ(237,"mat-option",12),t._uU(238,"-"),t.qZA(),t.TgZ(239,"mat-option",12),t._uU(240),t.ALo(241,"translate"),t.qZA(),t.TgZ(242,"mat-option",12),t._uU(243),t.ALo(244,"translate"),t.qZA(),t.TgZ(245,"mat-option",12),t._uU(246),t.ALo(247,"translate"),t.qZA(),t.TgZ(248,"mat-option",12),t._uU(249),t.ALo(250,"translate"),t.qZA(),t.TgZ(251,"mat-option",12),t._uU(252),t.ALo(253,"translate"),t.qZA()()()(),t.TgZ(254,"div",7)(255,"div",54)(256,"mat-form-field",16)(257,"mat-label"),t._uU(258),t.ALo(259,"translate"),t.qZA(),t._UZ(260,"input",55),t.qZA()(),t.TgZ(261,"div",54)(262,"mat-form-field",16)(263,"mat-label"),t._uU(264),t.ALo(265,"translate"),t.qZA(),t._UZ(266,"input",56),t.qZA()(),t.TgZ(267,"div",54)(268,"mat-form-field",16)(269,"mat-label"),t._uU(270),t.ALo(271,"translate"),t.qZA(),t._UZ(272,"input",57),t.qZA()()(),t.TgZ(273,"div",7)(274,"div",54)(275,"mat-form-field",16)(276,"mat-label"),t._uU(277),t.ALo(278,"translate"),t.qZA(),t._UZ(279,"input",58),t.qZA()(),t.TgZ(280,"div",54)(281,"mat-form-field",16)(282,"mat-label"),t._uU(283),t.ALo(284,"translate"),t.qZA(),t._UZ(285,"input",59),t.qZA()(),t.TgZ(286,"div",54)(287,"mat-form-field",16)(288,"mat-label"),t._uU(289),t.ALo(290,"translate"),t.qZA(),t._UZ(291,"input",60),t.qZA()()(),t.TgZ(292,"div",7)(293,"div",54)(294,"mat-form-field",16)(295,"mat-label"),t._uU(296),t.ALo(297,"translate"),t.qZA(),t._UZ(298,"input",61),t.qZA()(),t.TgZ(299,"div",54)(300,"mat-form-field",16)(301,"mat-label"),t._uU(302),t.ALo(303,"translate"),t.qZA(),t._UZ(304,"input",62),t.qZA()(),t.TgZ(305,"div",54)(306,"mat-form-field",16)(307,"mat-label"),t._uU(308),t.ALo(309,"translate"),t.qZA(),t.TgZ(310,"mat-select",63),t.ALo(311,"translate"),t.TgZ(312,"mat-option",12),t._uU(313,"-"),t.qZA(),t.TgZ(314,"mat-option",12),t._uU(315),t.ALo(316,"translate"),t.qZA(),t.TgZ(317,"mat-option",12),t._uU(318),t.ALo(319,"translate"),t.qZA(),t.TgZ(320,"mat-option",12),t._uU(321),t.ALo(322,"translate"),t.qZA(),t.TgZ(323,"mat-option",12),t._uU(324),t.ALo(325,"translate"),t.qZA(),t.TgZ(326,"mat-option",12),t._uU(327),t.ALo(328,"translate"),t.qZA()()()()(),t.TgZ(329,"div",7)(330,"div",54)(331,"mat-form-field",16)(332,"mat-label"),t._uU(333),t.ALo(334,"translate"),t.qZA(),t._UZ(335,"input",64),t.qZA()(),t.TgZ(336,"div",65)(337,"mat-form-field",16)(338,"mat-label"),t._uU(339),t.ALo(340,"translate"),t.qZA(),t._UZ(341,"input",66),t.qZA()()(),t.TgZ(342,"div",7)(343,"div",54)(344,"mat-form-field",16)(345,"mat-label"),t._uU(346),t.ALo(347,"translate"),t.qZA(),t._UZ(348,"input",67),t.qZA()(),t.TgZ(349,"div",65)(350,"mat-form-field",16)(351,"mat-label"),t._uU(352),t.ALo(353,"translate"),t.qZA(),t._UZ(354,"input",68),t.qZA()()(),t.TgZ(355,"div",7)(356,"div",54)(357,"mat-form-field",16)(358,"mat-label"),t._uU(359),t.ALo(360,"translate"),t.qZA(),t._UZ(361,"input",69),t.qZA()(),t.TgZ(362,"div",65)(363,"mat-form-field",16)(364,"mat-label"),t._uU(365),t.ALo(366,"translate"),t.qZA(),t._UZ(367,"input",70),t.qZA()()()()(),t.TgZ(368,"mat-tab",71),t.ALo(369,"translate"),t.TgZ(370,"div",5)(371,"mat-checkbox",72),t._uU(372),t.ALo(373,"translate"),t.qZA(),t.TgZ(374,"mat-checkbox",73),t._uU(375),t.ALo(376,"translate"),t.qZA()()()()(),t._UZ(377,"br"),t.TgZ(378,"div",74),t.YNc(379,Ft,4,4,"div",75),t.qZA()),2&e){const o=t.MAs(53);t.xp6(1),t.Q6J("ngIf",!i.buildForDisplay.id),t.xp6(1),t.Q6J("ngIf",i.buildForDisplay.id),t.xp6(1),t.hij(" ",t.lcZ(4,127,"HTML.BUILDING"),""),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(8,129,"HTML.TAB_BASIC")),t.xp6(8),t.hij(" ",t.lcZ(16,131,"HTML.CODE"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.code.errors?null:i.form.controls.code.errors.required),t.xp6(3),t.hij(" ",t.lcZ(22,133,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(24,135,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(3),t.hij(" ",t.lcZ(31,137,"FIELD.NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.name.errors?null:i.form.controls.name.errors.required),t.xp6(3),t.hij(" ",t.lcZ(37,139,"HTML.PROPERTY_DESC"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.description.errors?null:i.form.controls.description.errors.required),t.xp6(2),t.Q6J("src",i.defaultCusImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(44,141,"HTML.TAB_OWNER")),t.xp6(5),t.Oqu(t.lcZ(49,143,"HTML.RECIEVE_DATE")),t.xp6(2),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(5),t.Oqu(t.lcZ(57,145,"HTML.OWNER")),t.xp6(2),t.s9C("placeholder",t.lcZ(59,147,"HTML.OWNER")),t.xp6(4),t.Q6J("ngForOf",i.AllOwners),t.xp6(4),t.Oqu(t.lcZ(67,149,"HTML.OWNERSHIP_DOC_TYPE")),t.xp6(2),t.s9C("placeholder",t.lcZ(69,151,"HTML.OWNERSHIP_DOC_TYPE")),t.xp6(4),t.Q6J("ngForOf",i.DocTypes),t.xp6(3),t.hij(" ",t.lcZ(76,153,"HTML.DOC_NUMBER"),""),t.xp6(3),t.s9C("label",t.lcZ(79,155,"HTML.TAB_ADDRESS")),t.xp6(6),t.Oqu(t.lcZ(85,157,"HTML.ADDRESS")),t.xp6(5),t.Oqu(t.lcZ(90,159,"HTML.ShortAddress")),t.xp6(6),t.Oqu(t.lcZ(96,161,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(98,163,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(3),t.Oqu(t.lcZ(105,165,"HTML.GOVERN")),t.xp6(2),t.s9C("placeholder",t.lcZ(107,167,"HTML.GOVERN")),t.xp6(4),t.Q6J("ngForOf",i.Governorates),t.xp6(3),t.Oqu(t.lcZ(114,169,"HTML.CITY")),t.xp6(2),t.s9C("placeholder",t.lcZ(116,171,"HTML.CITY")),t.xp6(4),t.Q6J("ngForOf",i.Cities),t.xp6(3),t.Oqu(t.lcZ(123,173,"HTML.REGION")),t.xp6(2),t.s9C("placeholder",t.lcZ(125,175,"HTML.REGION")),t.xp6(4),t.Q6J("ngForOf",i.Areas),t.xp6(4),t.Oqu(t.lcZ(133,177,"HTML.STREET_NAME")),t.xp6(5),t.Oqu(t.lcZ(138,179,"HTML.BUILDING_NUMBER")),t.xp6(5),t.Oqu(t.lcZ(143,181,"HTML.ZIP")),t.xp6(5),t.Oqu(t.lcZ(148,183,"HTML.BUILDING_SubNUMBER")),t.xp6(5),t.Oqu(t.lcZ(153,185,"HTML.ADDRESS_DESC")),t.xp6(3),t.s9C("label",t.lcZ(156,187,"HTML.TAB_BUILDING_DESCRIPTION")),t.xp6(8),t.Oqu(t.lcZ(164,189,"HTML.HOUSING_STATUS")),t.xp6(2),t.s9C("placeholder",t.lcZ(166,191,"HTML.HOUSING_STATUS")),t.xp6(4),t.Q6J("value","E"),t.xp6(1),t.Oqu(t.lcZ(171,193,"OPTIONS.EMPTY")),t.xp6(2),t.Q6J("value","R"),t.xp6(1),t.Oqu(t.lcZ(174,195,"OPTIONS.RENTED")),t.xp6(2),t.Q6J("value","S"),t.xp6(1),t.Oqu(t.lcZ(177,197,"OPTIONS.SOLD")),t.xp6(2),t.Q6J("value","V"),t.xp6(1),t.Oqu(t.lcZ(180,199,"OPTIONS.VACANT_UNITS")),t.xp6(2),t.Q6J("value","M"),t.xp6(1),t.Oqu(t.lcZ(183,201,"OPTIONS.UNDER_MAINTENANCE")),t.xp6(4),t.Oqu(t.lcZ(187,203,"HTML.CONSTRUCTION_STATUS")),t.xp6(2),t.s9C("placeholder",t.lcZ(189,205,"HTML.CONSTRUCTION_STATUS")),t.xp6(4),t.Q6J("value","E"),t.xp6(1),t.Oqu(t.lcZ(194,207,"OPTIONS.EXCELLENT")),t.xp6(2),t.Q6J("value","V"),t.xp6(1),t.Oqu(t.lcZ(197,209,"OPTIONS.VERY_GOOD")),t.xp6(2),t.Q6J("value","G"),t.xp6(1),t.Oqu(t.lcZ(200,211,"OPTIONS.GOOD")),t.xp6(2),t.Q6J("value","A"),t.xp6(1),t.Oqu(t.lcZ(203,213,"OPTIONS.ACCEPTED")),t.xp6(2),t.Q6J("value","B"),t.xp6(1),t.Oqu(t.lcZ(206,215,"OPTIONS.BAD")),t.xp6(5),t.Oqu(t.lcZ(211,217,"HTML.PROPERTY_TYPE")),t.xp6(2),t.s9C("placeholder",t.lcZ(213,219,"HTML.PROPERTY_TYPE")),t.xp6(4),t.Q6J("value","B"),t.xp6(1),t.Oqu(t.lcZ(218,221,"OPTIONS.BUILDING")),t.xp6(2),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(221,223,"OPTIONS.PLAZA")),t.xp6(2),t.Q6J("value","V"),t.xp6(1),t.Oqu(t.lcZ(224,225,"OPTIONS.Villa")),t.xp6(2),t.Q6J("value","W"),t.xp6(1),t.Oqu(t.lcZ(227,227,"OPTIONS.Warehouse")),t.xp6(2),t.Q6J("value","H"),t.xp6(1),t.Oqu(t.lcZ(230,229,"OPTIONS.House")),t.xp6(4),t.Oqu(t.lcZ(234,231,"HTML.PROPERTY_USAGE_TYPE")),t.xp6(2),t.s9C("placeholder",t.lcZ(236,233,"HTML.PROPERTY_USAGE_TYPE")),t.xp6(4),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(241,235,"OPTIONS.Family_Residential")),t.xp6(2),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(244,237,"OPTIONS.Personel_Residential")),t.xp6(2),t.Q6J("value","A"),t.xp6(1),t.Oqu(t.lcZ(247,239,"OPTIONS.Administrative")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(250,241,"OPTIONS.Commercial")),t.xp6(2),t.Q6J("value","M"),t.xp6(1),t.Oqu(t.lcZ(253,243,"OPTIONS.Mix")),t.xp6(6),t.Oqu(t.lcZ(259,245,"HTML.FLOORS_NUMBER")),t.xp6(6),t.Oqu(t.lcZ(265,247,"HTML.FLATS_NUMBER")),t.xp6(6),t.Oqu(t.lcZ(271,249,"HTML.SHOPS_NUMBER")),t.xp6(7),t.Oqu(t.lcZ(278,251,"HTML.STORES_NUMBER")),t.xp6(6),t.Oqu(t.lcZ(284,253,"HTML.ELEVATORS_NUMBER")),t.xp6(6),t.Oqu(t.lcZ(290,255,"HTML.PARKINGLOTS_NUMBER")),t.xp6(7),t.Oqu(t.lcZ(297,257,"HTML.ENTERINGGATE_NUMBER")),t.xp6(6),t.Oqu(t.lcZ(303,259,"HTML.PROPERTY_AREA")),t.xp6(6),t.Oqu(t.lcZ(309,261,"HTML.MEASURING_UNIT")),t.xp6(2),t.s9C("placeholder",t.lcZ(311,263,"HTML.MEASURING_UNIT")),t.xp6(4),t.Q6J("value","M"),t.xp6(1),t.Oqu(t.lcZ(316,265,"OPTIONS.Meter")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(319,267,"OPTIONS.Carat")),t.xp6(2),t.Q6J("value","A"),t.xp6(1),t.Oqu(t.lcZ(322,269,"OPTIONS.Acre")),t.xp6(2),t.Q6J("value","K"),t.xp6(1),t.Oqu(t.lcZ(325,271,"OPTIONS.KiloMeter")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(328,273,"OPTIONS.Foot")),t.xp6(6),t.Oqu(t.lcZ(334,275,"HTML.ElectricityCountersNumber")),t.xp6(6),t.Oqu(t.lcZ(340,277,"HTML.ElectricityCountersCodes")),t.xp6(7),t.Oqu(t.lcZ(347,279,"HTML.WaterCountersNumber")),t.xp6(6),t.Oqu(t.lcZ(353,281,"HTML.WaterCountersCodes")),t.xp6(7),t.Oqu(t.lcZ(360,283,"HTML.GasCountersNumber")),t.xp6(6),t.Oqu(t.lcZ(366,285,"HTML.GasCountersCodes")),t.xp6(3),t.s9C("label",t.lcZ(369,287,"HTML.TAB_SETTINGS")),t.xp6(4),t.Oqu(t.lcZ(373,289,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(376,291,"HTML.BLOCKED")),t.xp6(4),t.Q6J("ngIf",i.buildForDisplay.id&&i.can("change_building")||!i.buildForDisplay.id&&i.can("add_building"))}},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.Q7,c.sg,c.O5,r.sg,r.u,r.x0,p.xw,p.SQ,p.Wh,p.yH,et.ey,_.lW,rt.oG,C.Mq,C.hl,C.nW,h.ZT,h.uh,h.H8,I.Nt,T.KE,T.hX,T.TO,T.R9,it.gD,X.uX,X.SP,U.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}\n"],encapsulation:2});var at=s(2887);class Et{}function Bt(a,e){if(1&a&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&a){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Pt(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&a){const i=t.oxw();t.Q6J("disabled",!i.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function wt(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",30)(1,"button",31),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().$implicit,l=t.oxw();return t.KtG(l.remove(n.id))}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4,"delete"),t.qZA()()()}2&a&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"BTN.REMOVE")))}function Rt(a,e){if(1&a&&(t.TgZ(0,"div",27)(1,"div",28),t._uU(2),t.qZA(),t.TgZ(3,"div",28),t._uU(4),t.qZA(),t.TgZ(5,"div",28),t._uU(6),t.qZA(),t.TgZ(7,"div",28),t._uU(8),t.qZA(),t.TgZ(9,"div",28),t.YNc(10,wt,5,3,"div",29),t.qZA()()),2&a){const i=e.$implicit,o=t.oxw();t.xp6(2),t.Oqu(i.expense_Name),t.xp6(2),t.Oqu(i.UEXExpenseValue),t.xp6(2),t.hij("",i.UEXDate," "),t.xp6(2),t.hij("",i.UEXNotes," "),t.xp6(2),t.Q6J("ngIf",o.can("view_deleteunitexpenses"))}}class H{constructor(e,i,o,n,l,m,f,Z,y,M){this.dialogRef=e,this.unitInjected=i,this.atlasService=o,this.unitsService=n,this.translateService=l,this._codesService=m,this.localStore=f,this.dialog=Z,this.snackBar=y,this.fb=M,this.passwordHide=!0,this.curCOMId=N.N.comid,this.userPerm=[],this.AllExpences=[]}ngOnInit(){this.parentExpenseCTT=(new d.I).Expenses,this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({unit_KeyField:[null,r.kI.required],expense_CTTKeyField:[null,r.kI.required],UEXDate:null,UEXExpenseValue:0,UEXNotes:null}),this.dataForm.patchValue({unit_KeyField:this.unitInjected.unitRow.id}),this.Expenses=new Et,this.curPeriority=this.unitInjected.periorty,this.action="Patch",this.getAllExpenses(this.curCOMId,this.curPeriority),this.getUnitExpense(),this.prepareMsgLanguage()}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getUnitExpense(){this.unitsExpenses=null,this.unitsService.getAllExpensesForUnit(this.curCOMId,this.curPeriority,this.unitInjected.unitRow.id).subscribe(e=>this.unitsExpenses=e)}getAllExpenses(e,i){this._codesService.getSubForParent(e,i,this.parentExpenseCTT).subscribe(o=>{this.AllExpences=o,console.log("---this.AllExpences:: "+this.AllExpences)},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0635\u0627\u0631\u064a\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapFormValue_toTable(){const e=new c.uU("en-GB").transform(this.dataForm.value.UEXDate,"dd/MM/yyyy");this.Expenses.unit_KeyField=this.unitInjected.unitRow.id,this.Expenses.expense_CTTKeyField=this.dataForm.value.expense_CTTKeyField,this.Expenses.UEXDate=this.dataForm.value.UEXDate,this.Expenses.UEXNotes=this.dataForm.value.UEXNotes,this.Expenses.UEXExpenseValue=this.dataForm.value.UEXExpenseValue,null!=this.dataForm.value.UEXDate&&(this.Expenses.UEXDate=e)}onSave(){this.mapFormValue_toTable(),this.unitsService.addExpensesForUnits(this.Expenses).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getUnitExpense()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(e){this.dialog.open(at.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(o=>{o&&this.unitsService.deleteExpensesForUnit(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getUnitExpense()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}function Ht(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"mat-button-toggle",21),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.gotoNewUnit())}),t.TgZ(1,"mat-icon"),t._uU(2,"add_circle_outline"),t.qZA()()}}H.\u0275fac=function(e){return new(e||H)(t.Y36(h.so),t.Y36(h.WI),t.Y36(tt.Z),t.Y36(A.X),t.Y36(U.sK),t.Y36(j.d),t.Y36(q.C),t.Y36(h.uw),t.Y36(O.ux),t.Y36(r.QS))},H.\u0275cmp=t.Xpm({type:H,selectors:[["app-unit-expenses"]],decls:70,vars:39,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","35.0",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","expense_CTTKeyField","id","expenseContOpSel",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","34.6",1,"px-1"],["matInput","","formControlName","UEXExpenseValue"],["fxFlex","100","fxFlex.gt-sm","30.0",1,"px-1"],["matInput","","formControlName","UEXDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["UEXDate",""],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","UEXNotes","rows","3"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],["class","p-2 actions",4,"ngIf"],[1,"p-2","actions"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",6),t.ALo(10,"translate"),t.TgZ(11,"mat-option",7),t._uU(12,"-"),t.qZA(),t.YNc(13,Bt,2,2,"mat-option",8),t.qZA()()(),t.TgZ(14,"div",9)(15,"mat-form-field",5)(16,"mat-label"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",10),t.qZA()(),t.TgZ(20,"div",11)(21,"mat-form-field",5)(22,"mat-label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"input",12)(26,"mat-datepicker-toggle",13)(27,"mat-datepicker",null,14),t.qZA()()(),t.TgZ(29,"div",3)(30,"div",15)(31,"mat-form-field",5)(32,"mat-label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"textarea",16),t.qZA()()()()(),t.TgZ(36,"div",17)(37,"div",3),t.YNc(38,Pt,4,4,"button",18),t.TgZ(39,"button",19),t.NdJ("click",function(){return i.close()}),t._uU(40),t.ALo(41,"translate"),t.qZA()()(),t._UZ(42,"mat-divider"),t.TgZ(43,"div",20)(44,"mat-card")(45,"div",21)(46,"h2"),t._uU(47),t.ALo(48,"translate"),t.qZA()(),t._UZ(49,"mat-divider"),t.TgZ(50,"div",22)(51,"div",23)(52,"div",24)(53,"h2"),t._uU(54),t.ALo(55,"translate"),t.qZA()(),t.TgZ(56,"div",24)(57,"h2"),t._uU(58),t.ALo(59,"translate"),t.qZA()(),t.TgZ(60,"div",24)(61,"h2"),t._uU(62),t.ALo(63,"translate"),t.qZA()(),t.TgZ(64,"div",24)(65,"h2"),t._uU(66),t.ALo(67,"translate"),t.qZA()(),t._UZ(68,"div",24),t.qZA(),t.YNc(69,Rt,11,5,"div",25),t.qZA()()()()),2&e){const o=t.MAs(28);t.Q6J("formGroup",i.dataForm),t.xp6(7),t.hij(" ",t.lcZ(8,17,"HTML.Expenses"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(10,19,"HTML.Expenses")),t.xp6(4),t.Q6J("ngForOf",i.AllExpences),t.xp6(4),t.Oqu(t.lcZ(18,21,"HTML.ExpenseValue")),t.xp6(6),t.Oqu(t.lcZ(24,23,"HTML.Date")),t.xp6(2),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Oqu(t.lcZ(34,25,"HTML.Notes")),t.xp6(5),t.Q6J("ngIf",i.can("view_addunitexpenses")),t.xp6(2),t.Oqu(t.lcZ(41,27,"BTN.CANCEL")),t.xp6(7),t.Oqu(t.lcZ(48,29,"HTML.UnitExpenses")),t.xp6(7),t.hij(" ",t.lcZ(55,31,"HTML.Expenses")," "),t.xp6(4),t.hij(" ",t.lcZ(59,33,"HTML.ExpenseValue")," "),t.xp6(4),t.hij(" ",t.lcZ(63,35,"HTML.Date")," "),t.xp6(4),t.hij(" ",t.lcZ(67,37,"HTML.Notes")," "),t.xp6(3),t.Q6J("ngForOf",i.unitsExpenses)}},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.Q7,c.sg,c.O5,r.sg,r.u,p.xw,p.Wh,p.yH,et.ey,_.lW,_.nh,E.a8,C.Mq,C.hl,C.nW,h.xY,h.H8,B.Hw,I.Nt,T.KE,T.hX,T.R9,P.d,it.gD,w.gM,U.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});const Jt=function(a){return["/units/unit-add/",a]};function kt(a,e){if(1&a&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&a){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,Jt,i.id))}}function Gt(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().$implicit,l=t.oxw();return t.KtG(l.removeUnit(n.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&a&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function Yt(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().$implicit,l=t.oxw();return t.KtG(l.openExpensesDialog(n))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"build"),t.qZA()()}2&a&&t.s9C("matTooltip",t.lcZ(1,1,"ADMIN_NAV.Expenses"))}function Qt(a,e){if(1&a&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t.qZA(),t.TgZ(3,"div",23),t._uU(4),t.qZA(),t.TgZ(5,"div",23),t._uU(6),t.qZA(),t.TgZ(7,"div",23),t._uU(8),t.qZA(),t.TgZ(9,"div",23),t._uU(10),t.qZA(),t.TgZ(11,"div",23),t._uU(12),t.qZA(),t.TgZ(13,"div",23)(14,"mat-icon",24),t._uU(15),t.qZA()(),t.TgZ(16,"div",23)(17,"div",25),t.YNc(18,kt,4,6,"a",26),t.YNc(19,Gt,4,3,"button",27),t.YNc(20,Yt,4,3,"button",28),t.qZA()()()),2&a){const i=e.$implicit,o=t.oxw();t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.hij(" ",i.UNTFloorNumber," "),t.xp6(2),t.hij(" ",i.UNTUnitNumber," "),t.xp6(2),t.hij(" ",i.UNTHousingStatusDisplay," "),t.xp6(2),t.hij(" ",i.UNTUnitTypeDisplay," "),t.xp6(3),t.Oqu("T"==i.UNTActive?"check_box":"check_box_outline_blank"),t.xp6(3),t.Q6J("ngIf",o.can("view_oneunit")),t.xp6(1),t.Q6J("ngIf",o.can("delete_units")),t.xp6(1),t.Q6J("ngIf",o.can("view_unititemexpenses"))}}function Vt(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",32)(1,"div",33)(2,"mat-card",34)(3,"pagination-controls",35),t.NdJ("pageChange",function(n){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(n))}),t.qZA()()()()}}function Kt(a,e){1&a&&(t.TgZ(0,"div",36),t._UZ(1,"mat-spinner",37),t.qZA())}const Wt=function(a,e){return{itemsPerPage:a,currentPage:e}};class J{constructor(e,i,o,n,l,m,f,Z){this.appSettings=e,this.dialog=i,this.unitsService=o,this.router=n,this.global=l,this.localStore=m,this.translateService=f,this.snackBar=Z,this.curCOMId=N.N.comid,this.account=new x.n,this.count=6,this.userPerm=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.securityForApp=(new d.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getUnits()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getUnits(){this.unitsAll=null,this.curUserData.is_superuser?this.unitsService.getAllUnits(this.curCOMId,this.account.periorty).subscribe(e=>this.unitsAll=e):1==this.curUserData.periorty&&(this.curBranchID=this.curUserData.branch_KeyField??0,"N"==this.securityForApp&&this.unitsService.getUnitsPerBranch(this.curCOMId,this.account.periorty,this.curBranchID).subscribe(e=>this.unitsAll=e),"D"==this.securityForApp&&this.unitsService.getUnitsPerEmployee(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(e=>this.unitsAll=e))}openExpensesDialog(e){this.dialog.open(H,{data:{unitRow:e,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(o=>{})}removeUnit(e){confirm(this.askToDeletedMsg)&&this.unitsService.deleteUnit(e).subscribe(i=>this.getUnits())}onPageChanged(e){this.page=e,this.getUnits(),window.scrollTo(0,0)}gotoNewUnit(){this.router.navigate(["/units/unit-add/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e})}}J.\u0275fac=function(e){return new(e||J)(t.Y36(v.d),t.Y36(h.uw),t.Y36(A.X),t.Y36(g.F0),t.Y36(L.U),t.Y36(q.C),t.Y36(U.sK),t.Y36(O.ux))},J.\u0275cmp=t.Xpm({type:J,selectors:[["app-unit-list"]],features:[t._Bn([A.X])],decls:64,vars:43,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"text-muted"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["mat-mini-fab","","color","primary",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),t.YNc(4,Ht,3,0,"mat-button-toggle",4),t.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),t._uU(7,"search"),t.qZA()()()(),t.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),t.NdJ("ngModelChange",function(n){return i.searchText=n}),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),t._uU(17,"view_list"),t.qZA()(),t.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),t._uU(20,"view_module"),t.qZA()()()()(),t._UZ(21,"mat-divider"),t.TgZ(22,"mat-card")(23,"div",14)(24,"h2"),t._uU(25),t.ALo(26,"translate"),t.qZA()(),t._UZ(27,"mat-divider"),t.TgZ(28,"div",15)(29,"div",16)(30,"div",17)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",17)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",17)(39,"h2"),t._uU(40),t.ALo(41,"translate"),t.qZA()(),t.TgZ(42,"div",17)(43,"h2"),t._uU(44),t.ALo(45,"translate"),t.qZA()(),t.TgZ(46,"div",17)(47,"h2"),t._uU(48),t.ALo(49,"translate"),t.qZA()(),t.TgZ(50,"div",17)(51,"h2"),t._uU(52),t.ALo(53,"translate"),t.qZA()(),t.TgZ(54,"div",17)(55,"h2"),t._uU(56),t.ALo(57,"translate"),t.qZA()(),t._UZ(58,"div",17),t.qZA(),t.YNc(59,Qt,21,10,"div",18),t.ALo(60,"paginate"),t.ALo(61,"UnitsSearchPipe"),t.qZA()(),t.YNc(62,Vt,4,0,"div",19),t.YNc(63,Kt,2,0,"div",20)),2&e){const o=t.MAs(3);t.xp6(4),t.Q6J("ngIf",i.can("add_units")),t.xp6(4),t.ekj("show","search"==o.value),t.xp6(2),t.s9C("placeholder",t.lcZ(11,16,"HTML.SEARCH_UNITS")),t.Q6J("ngModel",i.searchText),t.xp6(15),t.Oqu(t.lcZ(26,18,"HTML.UNIT_LIST")),t.xp6(7),t.hij(" ",t.lcZ(33,20,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(37,22,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(41,24,"HTML.FloorNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(45,26,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(49,28,"HTML.HOUSING_STATUS")," "),t.xp6(4),t.hij(" ",t.lcZ(53,30,"HTML.UnitType")," "),t.xp6(4),t.hij(" ",t.lcZ(57,32,"HTML.ACTIVATED")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(60,34,t.xi3(61,37,i.unitsAll,i.searchText),t.WLB(40,Wt,i.count,i.page))),t.xp6(3),t.Q6J("ngIf",i.unitsAll),t.xp6(1),t.Q6J("ngIf",!i.unitsAll)}},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.On,r.F,b.LS,c.sg,c.O5,g.rH,p.xw,p.Wh,p.yH,_.Tq,_.nh,V.A9,V.Yi,E.a8,B.Hw,I.Nt,T.KE,P.d,K.Ou,w.gM,b._s,nt.pL,U.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});class st{}function jt(a,e){1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function Xt(a,e){1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function $t(a,e){if(1&a&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&a){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function zt(a,e){if(1&a&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&a){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function te(a,e){if(1&a&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&a){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.OWNName," ")}}function ee(a,e){1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function ie(a,e){1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function ae(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"button",86),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.saveUpdate(n.unitForDisplay.id))}),t.YNc(1,ee,3,3,"span",1),t.YNc(2,ie,3,3,"span",1),t.qZA()}if(2&a){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.unitForDisplay.id),t.xp6(1),t.Q6J("ngIf",i.unitForDisplay.id)}}class D{constructor(e,i,o,n,l,m,f,Z,y,M,ot){this.activatedRoute=e,this.codesService=i,this.unitsService=o,this.contractService=n,this.fb=l,this.localStore=m,this.router=f,this.global=Z,this.translateService=y,this.atlasService=M,this.snackBar=ot,this.curCOMId=N.N.comid,this.account=new x.n,this.docType_const=(new d.I).OwnershipDocTypes,this.country_const=(new d.I).Countries,this.governorate_const=(new d.I).Governorates,this.city_const=(new d.I).City,this.region_const=(new d.I).Regions,this.buildingFeatures_const=(new d.I).BuildingFeatures,this.passwordHide=!0,this.tenant=new st,this.userPerm=[],this.defaultCusImage=(new W.P).noImage,this.CusImageToUpload=null,this.DocTypes=[],this.Countries=[],this.Governorates=[],this.AllBuilding=[],this.AllBranches=[],this.AllOwners=[]}readContractValue(e){let i=e.target.value;i>0&&this.form.patchValue({rentValues:{UNTMonthlyRentValue:parseFloat((+i/12).toString()).toFixed(2)}})}readMonthes(e){let i=e.target.value;if(i>0){switch(+i){case 1:default:this.rentCycleChar="M";break;case 3:this.rentCycleChar="Q";break;case 6:this.rentCycleChar="H";break;case 12:this.rentCycleChar="Y"}console.log("----contMonths:: "+i),console.log("----this.rentCycleChar:: "+this.rentCycleChar),this.form.patchValue({rentValues:{UNTNumberOfInstallments:12/i,UNTRentalCycle:this.rentCycleChar}})}}readElectricity(e){console.log(e.target.value)}readWater(e){console.log(e.target.value)}readGas(e){console.log(e.target.value)}ngOnInit(){if(this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.form=this.fb.group({id:null,UNTCode:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,UNTUnitFileNumber:null,UNTDescription:null,UNTPic:null,UNTFloorNumber:null,UNTUnitNumber:null,UNTUnitArea:null,UNTIsHasMezanin:!1,UNTUnitGroundFloorArea:null,UNTUnitMezaninArea:null,UNTMeasuringUnit:"M",UNTUnitType:"F",UNTUnitForSale:!1,UNTUnitForRent:!0,generalDescription:this.fb.group({uNTCreationDate:null,UNTHousingStatus:"E",UNTConstructionStatus:"E",UNTPropertyUsageType:"F",UNTPropertyType:"B",UNTUnitFacing:"F",UNTUnitDirection:"N"}),rentValues:this.fb.group({UNTRentalCycle:"M",UNTMonthlyRentValue:null,UNTWeeklyRentValue:null,UNTDailyRentValue:null,UNTPayInstallmentEveryMonths:1,UNTNumberOfInstallments:[{value:12,disabled:!0}],UNTMonthlyElectricityFee:0,UNTMonthlyWaterFee:0,UNTMonthlyGasFee:0,UNTNumberOfParkingLots:0,UNTMonthlyParkingFee:0,UNTLastElectricityReading:0,UNTLastWaterReading:0,UNTLastGasReading:0,UNTElectricityNumber:null,UNTWaterNumber:null,UNTGasNumber:null,UNTUnitNoFees:"F",UNTUnitHotOffer:"F",UNTUnitSold:"F",UNTSoldValue:null,UNTContractValue:0,UNTInsuranceValue:0,UNTSeekingValue:0,UNTMonthlyExpense:0,UNTOtherValue:0,UNTExpenseDesc:null}),unitDescription:this.fb.group({UNTIsFurnitured:!1,UNTFurnitureStatus:"F",UNTKitchenCabinets:!1,UNTNumberOfBedRooms:null,UNTNumberOfBathRooms:null,UNTUnitKitchen:null,UNTUnitHall:null,UNTUnitBalacona:null,UNTUnitElevator:!1,UNTUnitAirCondition:!1,UNTUnitMainRoad:!1}),settings:this.fb.group({isActive:null,isDeleted:null})}),this.getCountries(this.curCOMId,this.account.periorty),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0),this.getAllOwnerss(this.curCOMId,this.account.periorty),this.getOwnershipDocType(this.curCOMId,this.account.periorty),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=+e.id,this.getUnitById(this.id)):this.unitForDisplay=new st})}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=o=>{this.defaultCusImage=o.target.result},i.readAsDataURL(this.CusImageToUpload)}mapFormvalue_to_UnitClass(){this.form.enable();const e=new c.uU("en-GB").transform(this.form.value.generalDescription.uNTCreationDate,"dd/MM/yyyy");this.unitForSale=this.form.value.UNTUnitForSale?"T":"F",this.unitForRent=this.form.value.UNTUnitForRent?"T":"F",this.unitHasMezanin=this.form.value.UNTIsHasMezanin?"T":"F",this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,this.unitFurniture=this.form.value.unitDescription.UNTIsFurnitured?"T":"F",this.unitKitchenCabinets=this.form.value.unitDescription.UNTKitchenCabinets?"T":"F",this.unitElevator=this.form.value.unitDescription.UNTUnitElevator?"T":"F",this.unitAirCodition=this.form.value.unitDescription.UNTUnitAirCondition?"T":"F",this.unitMainRoad=this.form.value.unitDescription.UNTUnitMainRoad?"T":"F",this.unitForDisplay.id=this.form.value.id,this.unitForDisplay.branch_KeyField=this.form.value.branch_KeyField,this.unitForDisplay.owner_KeyField=this.form.value.owner_KeyField,this.unitForDisplay.build_KeyField=this.form.value.build_KeyField,this.unitForDisplay.UNTCode=this.form.value.UNTCode,this.unitForDisplay.UNTPic=this.form.value.UNTPic,this.unitForDisplay.UNTUnitFileNumber=this.form.value.UNTUnitFileNumber,this.unitForDisplay.UNTDescription=this.form.value.UNTDescription,this.unitForDisplay.UNTFloorNumber=this.form.value.UNTFloorNumber,this.unitForDisplay.UNTUnitNumber=this.form.value.UNTUnitNumber,this.unitForDisplay.UNTUnitArea=this.form.value.UNTUnitArea,this.unitForDisplay.UNTIsHasMezanin=this.unitHasMezanin,this.unitForDisplay.UNTUnitGroundFloorArea=this.form.value.UNTUnitGroundFloorArea,this.unitForDisplay.UNTUnitMezaninArea=this.form.value.UNTUnitMezaninArea,this.unitForDisplay.UNTMeasuringUnit=this.form.value.UNTMeasuringUnit,this.unitForDisplay.UNTUnitType=this.form.value.UNTUnitType,this.unitForDisplay.UNTUnitForSale=this.unitForSale,this.unitForDisplay.UNTUnitForRent=this.unitForRent,null!=this.form.value.generalDescription.uNTCreationDate&&(this.unitForDisplay.UNTCreationDate=e),this.unitForDisplay.UNTHousingStatus=this.form.value.generalDescription.UNTHousingStatus,this.unitForDisplay.UNTConstructionStatus=this.form.value.generalDescription.UNTConstructionStatus,this.unitForDisplay.UNTPropertyUsageType=this.form.value.generalDescription.UNTPropertyUsageType,this.unitForDisplay.UNTPropertyType=this.form.value.generalDescription.UNTPropertyType,this.unitForDisplay.UNTUnitFacing=this.form.value.generalDescription.UNTUnitFacing,this.unitForDisplay.UNTUnitDirection=this.form.value.generalDescription.UNTUnitDirection,this.unitForDisplay.UNTRentalCycle=this.form.value.rentValues.UNTRentalCycle,this.unitForDisplay.UNTMonthlyRentValue=this.form.value.rentValues.UNTMonthlyRentValue,this.unitForDisplay.UNTWeeklyRentValue=this.form.value.rentValues.UNTWeeklyRentValue,this.unitForDisplay.UNTDailyRentValue=this.form.value.rentValues.UNTDailyRentValue,this.unitForDisplay.UNTPayInstallmentEveryMonths=this.form.value.rentValues.UNTPayInstallmentEveryMonths,this.unitForDisplay.UNTNumberOfInstallments=this.form.value.rentValues.UNTNumberOfInstallments,this.unitForDisplay.UNTMonthlyElectricityFee=this.form.value.rentValues.UNTMonthlyElectricityFee,this.unitForDisplay.UNTMonthlyWaterFee=this.form.value.rentValues.UNTMonthlyWaterFee,this.unitForDisplay.UNTMonthlyGasFee=this.form.value.rentValues.UNTMonthlyGasFee,this.unitForDisplay.UNTNumberOfParkingLots=this.form.value.rentValues.UNTNumberOfParkingLots,this.unitForDisplay.UNTMonthlyParkingFee=this.form.value.rentValues.UNTMonthlyParkingFee,this.unitForDisplay.UNTLastElectricityReading=this.form.value.rentValues.UNTLastElectricityReading,this.unitForDisplay.UNTLastWaterReading=this.form.value.rentValues.UNTLastWaterReading,this.unitForDisplay.UNTLastGasReading=this.form.value.rentValues.UNTLastGasReading,this.unitForDisplay.UNTElectricityNumber=this.form.value.rentValues.UNTElectricityNumber,this.unitForDisplay.UNTWaterNumber=this.form.value.rentValues.UNTWaterNumber,this.unitForDisplay.UNTGasNumber=this.form.value.rentValues.UNTGasNumber,this.unitForDisplay.UNTUnitNoFees=this.form.value.rentValues.UNTUnitNoFees,this.unitForDisplay.UNTUnitHotOffer=this.form.value.rentValues.UNTUnitHotOffer,this.unitForDisplay.UNTUnitSold=this.form.value.rentValues.UNTUnitSold,this.unitForDisplay.UNTSoldValue=this.form.value.rentValues.UNTSoldValue,this.unitForDisplay.UNTContractValue=this.form.value.rentValues.UNTContractValue,this.unitForDisplay.UNTInsuranceValue=this.form.value.rentValues.UNTInsuranceValue,this.unitForDisplay.UNTSeekingValue=this.form.value.rentValues.UNTSeekingValue,this.unitForDisplay.UNTMonthlyExpense=this.form.value.rentValues.UNTMonthlyExpense,this.unitForDisplay.UNTOtherValue=this.form.value.rentValues.UNTOtherValue,this.unitForDisplay.UNTExpenseDesc=this.form.value.rentValues.UNTExpenseDesc,this.unitForDisplay.UNTIsFurnitured=this.unitFurniture,this.unitForDisplay.UNTFurnitureStatus=this.form.value.unitDescription.UNTFurnitureStatus,this.unitForDisplay.UNTKitchenCabinets=this.unitKitchenCabinets,this.unitForDisplay.UNTNumberOfBedRooms=this.form.value.unitDescription.UNTNumberOfBedRooms,this.unitForDisplay.UNTNumberOfBathRooms=this.form.value.unitDescription.UNTNumberOfBathRooms,this.unitForDisplay.UNTUnitKitchen=this.form.value.unitDescription.UNTUnitKitchen,this.unitForDisplay.UNTUnitHall=this.form.value.unitDescription.UNTUnitHall,this.unitForDisplay.UNTUnitBalacona=this.form.value.unitDescription.UNTUnitBalacona,this.unitForDisplay.UNTUnitElevator=this.unitElevator,this.unitForDisplay.UNTUnitAirCondition=this.unitAirCodition,this.unitForDisplay.UNTUnitMainRoad=this.unitMainRoad,this.unitForDisplay.UNTActive=this.tenActive,this.unitForDisplay.RowDelete=this.tenDeleted,this.form.disable()}getUnitById(e){this.unitsService.getOneUnit(e).subscribe(i=>{this.fillForm(i),this.unitForDisplay=i})}fillForm(e){this.is_active="T"==e.UNTActive,this.is_Furniture="T"==e.UNTIsFurnitured,this.is_KitchenCabinet="T"==e.UNTKitchenCabinets,this.is_Elevator="T"==e.UNTUnitElevator,this.is_AirCondition="T"==e.UNTUnitAirCondition,this.is_MainRoad="T"==e.UNTUnitMainRoad,null!=e.branch_KeyField&&this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.branch_KeyField),this.defaultCusImage=null!=e.UNTPic?e.UNTPic:(new W.P).noImage,this.is_delete=1==e.RowDelete,this.is_ForRent="T"==e.UNTUnitForRent,this.is_ForSale="T"==e.UNTUnitForSale,this.is_Mezanin="T"==e.UNTIsHasMezanin,this.form.patchValue({id:e.id,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,UNTCode:e.UNTCode,UNTPic:e.UNTPic,UNTUnitFileNumber:e.UNTUnitFileNumber,UNTDescription:e.UNTDescription,UNTFloorNumber:e.UNTFloorNumber,UNTUnitNumber:e.UNTUnitNumber,UNTUnitArea:e.UNTUnitArea,UNTIsHasMezanin:this.is_Mezanin,UNTUnitGroundFloorArea:e.UNTUnitGroundFloorArea,UNTUnitMezaninArea:e.UNTUnitMezaninArea,UNTMeasuringUnit:e.UNTMeasuringUnit,UNTUnitType:e.UNTUnitType,UNTUnitForSale:this.is_ForSale,UNTUnitForRent:this.is_ForRent,generalDescription:{uNTCreationDate:e.UNTCreationDate,UNTHousingStatus:e.UNTHousingStatus,UNTConstructionStatus:e.UNTConstructionStatus,UNTPropertyUsageType:e.UNTPropertyUsageType,UNTPropertyType:e.UNTPropertyType,UNTUnitFacing:e.UNTUnitFacing,UNTUnitDirection:e.UNTUnitDirection},rentValues:{UNTRentalCycle:e.UNTRentalCycle,UNTMonthlyRentValue:e.UNTMonthlyRentValue,UNTWeeklyRentValue:e.UNTWeeklyRentValue,UNTDailyRentValue:e.UNTDailyRentValue,UNTPayInstallmentEveryMonths:e.UNTPayInstallmentEveryMonths,UNTNumberOfInstallments:e.UNTNumberOfInstallments,UNTMonthlyElectricityFee:e.UNTMonthlyElectricityFee,UNTMonthlyWaterFee:e.UNTMonthlyWaterFee,UNTMonthlyGasFee:e.UNTMonthlyGasFee,UNTNumberOfParkingLots:e.UNTNumberOfParkingLots,UNTMonthlyParkingFee:e.UNTMonthlyParkingFee,UNTLastElectricityReading:e.UNTLastElectricityReading,UNTLastWaterReading:e.UNTLastWaterReading,UNTLastGasReading:e.UNTLastGasReading,UNTElectricityNumber:e.UNTElectricityNumber,UNTWaterNumber:e.UNTWaterNumber,UNTGasNumber:e.UNTGasNumber,UNTUnitNoFees:e.UNTUnitNoFees,UNTUnitHotOffer:e.UNTUnitHotOffer,UNTUnitSold:e.UNTUnitSold,UNTSoldValue:e.UNTSoldValue,UNTContractValue:e.UNTContractValue,UNTInsuranceValue:e.UNTInsuranceValue,UNTSeekingValue:e.UNTSeekingValue,UNTMonthlyExpense:e.UNTMonthlyExpense,UNTOtherValue:e.UNTOtherValue,UNTExpenseDesc:e.UNTExpenseDesc},unitDescription:{UNTIsFurnitured:this.is_Furniture,UNTFurnitureStatus:e.UNTFurnitureStatus,UNTKitchenCabinets:this.is_KitchenCabinet,UNTNumberOfBedRooms:e.UNTNumberOfBedRooms,UNTNumberOfBathRooms:e.UNTNumberOfBathRooms,UNTUnitKitchen:e.UNTUnitKitchen,UNTUnitHall:e.UNTUnitHall,UNTUnitBalacona:e.UNTUnitBalacona,UNTUnitElevator:this.is_Elevator,UNTUnitAirCondition:this.is_AirCondition,UNTUnitMainRoad:this.is_MainRoad},settings:{isActive:this.is_active,isDeleted:this.is_delete}})}saveUpdate(e){console.log("=============saveUpdate()==============="),this.mapFormvalue_to_UnitClass(),e?this.unitsService.editUnit(this.unitForDisplay,this.CusImageToUpload).subscribe(i=>{this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["units/unit"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):this.unitsService.addUnit(this.unitForDisplay,this.CusImageToUpload).subscribe(i=>{this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["units/unit"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}close(){}compareFunction(e,i){return e.username==i.username&&e.code==i.code}getOwnershipDocType(e,i){this.codesService.getSubForParent(e,i,this.docType_const).subscribe(o=>{this.DocTypes=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0646\u0648\u0627\u0639 \u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0644\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(o=>{this.Countries=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getRentalCycle(e){switch(console.log("---event.value:: "+e.value),e.value){case"M":default:this.noOfMonthes=1;break;case"Q":this.noOfMonthes=3;break;case"H":this.noOfMonthes=6;break;case"Y":this.noOfMonthes=12}console.log("---this.noOfMonthes:: "+this.noOfMonthes),this.form.patchValue({rentValues:{UNTNumberOfInstallments:12/this.noOfMonthes,UNTPayInstallmentEveryMonths:this.noOfMonthes}})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.value)}getBuildingPerBranch(e,i,o){this.unitsService.getBuildingsPerBranch(e,i,o).subscribe(n=>{this.AllBuilding=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(e){console.log("====Selected Build:: "+e.value),this.unitsService.getOneBuilding(e.value).subscribe(i=>{this.curOwnerId=i.owner_KeyField,console.log("====Cur Owner:: "+this.curOwnerId+"  "+i.owner_FullName),this.form.controls.owner_KeyField.setValue(this.curOwnerId)},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(o=>{this.AllBranches=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(e,i,o,n){console.log("----is Emp"),this.atlasService.getBranchPerEmp(e,i,o).subscribe(l=>{this.AllBranches=l,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+n),this.atlasService.getOneBranch(n).subscribe(m=>{this.AllBranches=m},m=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllOwnerss(e,i){this.contractService.getAllOwners(e,i).subscribe(o=>{this.AllOwners=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0644\u0627\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e})}}D.\u0275fac=function(e){return new(e||D)(t.Y36(g.gz),t.Y36(j.d),t.Y36(A.X),t.Y36(z.W),t.Y36(r.QS),t.Y36(q.C),t.Y36(g.F0),t.Y36(L.U),t.Y36(U.sK),t.Y36(tt.Z),t.Y36(O.ux))},D.\u0275cmp=t.Xpm({type:D,selectors:[["app-unit-dialog"]],decls:563,vars:429,consts:[["mat-dialog-title",""],[4,"ngIf"],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","branch_KeyField","id","branchOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","UNTUnitType","id","unitTypeOpSel",3,"placeholder"],["formControlName","build_KeyField","id","buildOneOpSel",3,"placeholder","selectionChange"],["formControlName","owner_KeyField","id","oneOwnerOpSel",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["matInput","","formControlName","UNTFloorNumber"],["matInput","","formControlName","UNTUnitNumber"],["matInput","","formControlName","UNTUnitFileNumber"],["matInput","","formControlName","UNTDescription"],["fxFlex","100","fxFlex.gt-sm","19.98",1,"px-1"],["matInput","","formControlName","UNTUnitArea"],["formControlName","UNTMeasuringUnit","id","untmeasureUnitOpSel",3,"placeholder"],["formControlName","UNTIsHasMezanin"],["matInput","","formControlName","UNTUnitGroundFloorArea"],["matInput","","formControlName","UNTUnitMezaninArea"],["fxFlex","100","fxFlex.gt-sm","24.8",1,"px-1"],["formControlName","UNTUnitForSale"],["formControlName","UNTUnitForRent"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","UNTPic","name","UNTPic","id","uploadunit","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","generalDescription",3,"label"],["matInput","","formControlName","uNTCreationDate",3,"matDatepicker"],["matSuffix","",3,"for"],["uNTCreationDate",""],["formControlName","UNTHousingStatus","id","untHousStatOpSel",3,"placeholder"],["formControlName","UNTUnitFacing","id","untFaceOpSel",3,"placeholder"],["formControlName","UNTConstructionStatus","id","untConstrucStatOpSel",3,"placeholder"],["formControlName","UNTPropertyUsageType","id","untPropUsageOpSel",3,"placeholder"],["formControlName","UNTPropertyType","id","PropTypOpSel",3,"placeholder"],["formGroupName","rentValues",3,"label"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-1"],["formControlName","UNTRentalCycle","id","rentCyclOpSel",3,"placeholder","selectionChange"],["matInput","","formControlName","UNTContractValue",3,"change"],["matInput","","formControlName","UNTInsuranceValue"],["matInput","","formControlName","UNTSeekingValue"],["matInput","","formControlName","UNTMonthlyRentValue"],["matInput","","formControlName","UNTWeeklyRentValue"],["matInput","","formControlName","UNTDailyRentValue"],["matInput","","formControlName","UNTPayInstallmentEveryMonths",3,"change"],["matInput","","formControlName","UNTNumberOfInstallments"],["matInput","","formControlName","UNTMonthlyExpense"],["matInput","","formControlName","UNTOtherValue"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","UNTExpenseDesc"],["matInput","","formControlName","UNTMonthlyElectricityFee"],["matInput","","formControlName","UNTMonthlyWaterFee"],["matInput","","formControlName","UNTMonthlyGasFee"],["matInput","","formControlName","UNTNumberOfParkingLots"],["matInput","","formControlName","UNTMonthlyParkingFee"],["matInput","","formControlName","UNTLastElectricityReading"],["matInput","","formControlName","UNTLastWaterReading"],["matInput","","formControlName","UNTLastGasReading"],["matInput","","formControlName","UNTElectricityNumber",3,"change"],["matInput","","formControlName","UNTWaterNumber",3,"change"],["matInput","","formControlName","UNTGasNumber",3,"change"],["formGroupName","unitDescription",3,"label"],["matInput","","formControlName","UNTNumberOfBedRooms"],["matInput","","formControlName","UNTNumberOfBathRooms"],["matInput","","formControlName","UNTUnitKitchen"],["matInput","","formControlName","UNTUnitHall"],["matInput","","formControlName","UNTUnitBalacona"],["formControlName","UNTKitchenCabinets"],["formControlName","UNTIsFurnitured"],["formControlName","UNTFurnitureStatus","id","furnStOpSel",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","39.8",1,"px-1"],["formControlName","UNTUnitElevator"],["formControlName","UNTUnitAirCondition"],["formControlName","UNTUnitMainRoad"],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1",0),t.YNc(1,jt,3,3,"span",1),t.YNc(2,Xt,3,3,"span",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"form",2)(6,"mat-tab-group",3)(7,"mat-tab",4),t.ALo(8,"translate"),t.TgZ(9,"div",5)(10,"div",6),t._UZ(11,"mat-label"),t.TgZ(12,"div",7)(13,"div",8)(14,"mat-form-field",9)(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"mat-select",10),t.NdJ("selectionChange",function(n){return i.getBuildings(n)}),t.ALo(19,"translate"),t.TgZ(20,"mat-option",11),t._uU(21,"-"),t.qZA(),t.YNc(22,$t,2,2,"mat-option",12),t.qZA()()(),t.TgZ(23,"div",8)(24,"mat-form-field",9)(25,"mat-label"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"mat-select",13),t.ALo(29,"translate"),t.TgZ(30,"mat-option",11),t._uU(31,"-"),t.qZA(),t.TgZ(32,"mat-option",11),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"mat-option",11),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"mat-option",11),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"mat-option",11),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"mat-option",11),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"mat-option",11),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"mat-option",11),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"mat-option",11),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"mat-option",11),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.TgZ(59,"mat-option",11),t._uU(60),t.ALo(61,"translate"),t.qZA()()()()()(),t.TgZ(62,"div",7)(63,"div",8)(64,"mat-form-field",9)(65,"mat-label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"mat-select",14),t.NdJ("selectionChange",function(n){return i.readBuilding(n)}),t.ALo(69,"translate"),t.TgZ(70,"mat-option",11),t._uU(71,"-"),t.qZA(),t.YNc(72,zt,2,2,"mat-option",12),t.qZA()()(),t.TgZ(73,"div",8)(74,"mat-form-field",9)(75,"mat-label"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"mat-select",15),t.ALo(79,"translate"),t.TgZ(80,"mat-option",11),t._uU(81,"-"),t.qZA(),t.YNc(82,te,2,2,"mat-option",12),t.qZA()()()(),t.TgZ(83,"div",7)(84,"div",16)(85,"mat-form-field",9)(86,"mat-label"),t._uU(87),t.ALo(88,"translate"),t.qZA(),t._UZ(89,"input",17),t.qZA()(),t.TgZ(90,"div",16)(91,"mat-form-field",9)(92,"mat-label"),t._uU(93),t.ALo(94,"translate"),t.qZA(),t._UZ(95,"input",18),t.qZA()(),t.TgZ(96,"div",16)(97,"mat-form-field",9)(98,"mat-label"),t._uU(99),t.ALo(100,"translate"),t.qZA(),t._UZ(101,"input",19),t.qZA()()(),t.TgZ(102,"mat-form-field",9)(103,"mat-label"),t._uU(104),t.ALo(105,"translate"),t.qZA(),t._UZ(106,"input",20),t.qZA(),t.TgZ(107,"div",7)(108,"div",21)(109,"mat-form-field",9)(110,"mat-label"),t._uU(111),t.ALo(112,"translate"),t.qZA(),t._UZ(113,"input",22),t.qZA()(),t.TgZ(114,"div",21)(115,"mat-form-field",9)(116,"mat-label"),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.TgZ(119,"mat-select",23),t.ALo(120,"translate"),t.TgZ(121,"mat-option",11),t._uU(122,"-"),t.qZA(),t.TgZ(123,"mat-option",11),t._uU(124),t.ALo(125,"translate"),t.qZA(),t.TgZ(126,"mat-option",11),t._uU(127),t.ALo(128,"translate"),t.qZA(),t.TgZ(129,"mat-option",11),t._uU(130),t.ALo(131,"translate"),t.qZA(),t.TgZ(132,"mat-option",11),t._uU(133),t.ALo(134,"translate"),t.qZA(),t.TgZ(135,"mat-option",11),t._uU(136),t.ALo(137,"translate"),t.qZA()()()(),t.TgZ(138,"div",21)(139,"mat-checkbox",24),t._uU(140),t.ALo(141,"translate"),t.qZA()(),t.TgZ(142,"div",21)(143,"mat-form-field",9)(144,"mat-label"),t._uU(145),t.ALo(146,"translate"),t.qZA(),t._UZ(147,"input",25),t.qZA()(),t.TgZ(148,"div",21)(149,"mat-form-field",9)(150,"mat-label"),t._uU(151),t.ALo(152,"translate"),t.qZA(),t._UZ(153,"input",26),t.qZA()()(),t.TgZ(154,"div",7)(155,"div",27)(156,"mat-checkbox",28),t._uU(157),t.ALo(158,"translate"),t.qZA()(),t.TgZ(159,"div",27)(160,"mat-checkbox",29),t._uU(161),t.ALo(162,"translate"),t.qZA()()(),t.TgZ(163,"div",30),t._UZ(164,"img",31),t.TgZ(165,"input",32),t.NdJ("change",function(n){return i.handelCUSImgInput(n.target.files)}),t.qZA()()()(),t.TgZ(166,"mat-tab",33),t.ALo(167,"translate"),t.TgZ(168,"div",5)(169,"div",6),t._UZ(170,"mat-label"),t.TgZ(171,"div",7)(172,"div",16)(173,"mat-form-field",9)(174,"mat-label"),t._uU(175),t.ALo(176,"translate"),t.qZA(),t._UZ(177,"input",34)(178,"mat-datepicker-toggle",35)(179,"mat-datepicker",null,36),t.qZA()(),t.TgZ(181,"div",16)(182,"mat-form-field",9)(183,"mat-label"),t._uU(184),t.ALo(185,"translate"),t.qZA(),t.TgZ(186,"mat-select",37),t.ALo(187,"translate"),t.TgZ(188,"mat-option",11),t._uU(189,"-"),t.qZA(),t.TgZ(190,"mat-option",11),t._uU(191),t.ALo(192,"translate"),t.qZA(),t.TgZ(193,"mat-option",11),t._uU(194),t.ALo(195,"translate"),t.qZA(),t.TgZ(196,"mat-option",11),t._uU(197),t.ALo(198,"translate"),t.qZA(),t.TgZ(199,"mat-option",11),t._uU(200),t.ALo(201,"translate"),t.qZA(),t.TgZ(202,"mat-option",11),t._uU(203),t.ALo(204,"translate"),t.qZA(),t.TgZ(205,"mat-option",11),t._uU(206),t.ALo(207,"translate"),t.qZA()()()(),t.TgZ(208,"div",16)(209,"mat-form-field",9)(210,"mat-label"),t._uU(211),t.ALo(212,"translate"),t.qZA(),t.TgZ(213,"mat-select",38),t.ALo(214,"translate"),t.TgZ(215,"mat-option",11),t._uU(216,"-"),t.qZA(),t.TgZ(217,"mat-option",11),t._uU(218),t.ALo(219,"translate"),t.qZA(),t.TgZ(220,"mat-option",11),t._uU(221),t.ALo(222,"translate"),t.qZA(),t.TgZ(223,"mat-option",11),t._uU(224),t.ALo(225,"translate"),t.qZA(),t.TgZ(226,"mat-option",11),t._uU(227),t.ALo(228,"translate"),t.qZA(),t.TgZ(229,"mat-option",11),t._uU(230),t.ALo(231,"translate"),t.qZA()()()()(),t.TgZ(232,"div",7)(233,"div",16)(234,"mat-form-field",9)(235,"mat-label"),t._uU(236),t.ALo(237,"translate"),t.qZA(),t.TgZ(238,"mat-select",39),t.ALo(239,"translate"),t.TgZ(240,"mat-option",11),t._uU(241,"-"),t.qZA(),t.TgZ(242,"mat-option",11),t._uU(243),t.ALo(244,"translate"),t.qZA(),t.TgZ(245,"mat-option",11),t._uU(246),t.ALo(247,"translate"),t.qZA(),t.TgZ(248,"mat-option",11),t._uU(249),t.ALo(250,"translate"),t.qZA(),t.TgZ(251,"mat-option",11),t._uU(252),t.ALo(253,"translate"),t.qZA(),t.TgZ(254,"mat-option",11),t._uU(255),t.ALo(256,"translate"),t.qZA()()()(),t.TgZ(257,"div",16)(258,"mat-form-field",9)(259,"mat-label"),t._uU(260),t.ALo(261,"translate"),t.qZA(),t.TgZ(262,"mat-select",40),t.ALo(263,"translate"),t.TgZ(264,"mat-option",11),t._uU(265,"-"),t.qZA(),t.TgZ(266,"mat-option",11),t._uU(267),t.ALo(268,"translate"),t.qZA(),t.TgZ(269,"mat-option",11),t._uU(270),t.ALo(271,"translate"),t.qZA(),t.TgZ(272,"mat-option",11),t._uU(273),t.ALo(274,"translate"),t.qZA(),t.TgZ(275,"mat-option",11),t._uU(276),t.ALo(277,"translate"),t.qZA(),t.TgZ(278,"mat-option",11),t._uU(279),t.ALo(280,"translate"),t.qZA()()()(),t.TgZ(281,"div",16)(282,"mat-form-field",9)(283,"mat-label"),t._uU(284),t.ALo(285,"translate"),t.qZA(),t.TgZ(286,"mat-select",41),t.ALo(287,"translate"),t.TgZ(288,"mat-option",11),t._uU(289,"-"),t.qZA(),t.TgZ(290,"mat-option",11),t._uU(291),t.ALo(292,"translate"),t.qZA(),t.TgZ(293,"mat-option",11),t._uU(294),t.ALo(295,"translate"),t.qZA(),t.TgZ(296,"mat-option",11),t._uU(297),t.ALo(298,"translate"),t.qZA(),t.TgZ(299,"mat-option",11),t._uU(300),t.ALo(301,"translate"),t.qZA(),t.TgZ(302,"mat-option",11),t._uU(303),t.ALo(304,"translate"),t.qZA()()()()()()()(),t.TgZ(305,"mat-tab",42),t.ALo(306,"translate"),t.TgZ(307,"div",5)(308,"div",6),t._UZ(309,"mat-label"),t.TgZ(310,"div",7)(311,"div",43)(312,"mat-form-field",9)(313,"mat-label"),t._uU(314),t.ALo(315,"translate"),t.qZA(),t.TgZ(316,"mat-select",44),t.NdJ("selectionChange",function(n){return i.getRentalCycle(n)}),t.ALo(317,"translate"),t.TgZ(318,"mat-option",11),t._uU(319,"-"),t.qZA(),t.TgZ(320,"mat-option",11),t._uU(321),t.ALo(322,"translate"),t.qZA(),t.TgZ(323,"mat-option",11),t._uU(324),t.ALo(325,"translate"),t.qZA(),t.TgZ(326,"mat-option",11),t._uU(327),t.ALo(328,"translate"),t.qZA(),t.TgZ(329,"mat-option",11),t._uU(330),t.ALo(331,"translate"),t.qZA()()()()()(),t.TgZ(332,"div",7)(333,"div",16)(334,"mat-form-field",9)(335,"mat-label"),t._uU(336),t.ALo(337,"translate"),t.qZA(),t.TgZ(338,"input",45),t.NdJ("change",function(n){return i.readContractValue(n)}),t.qZA()()(),t.TgZ(339,"div",16)(340,"mat-form-field",9)(341,"mat-label"),t._uU(342),t.ALo(343,"translate"),t.qZA(),t._UZ(344,"input",46),t.qZA()(),t.TgZ(345,"div",16)(346,"mat-form-field",9)(347,"mat-label"),t._uU(348),t.ALo(349,"translate"),t.qZA(),t._UZ(350,"input",47),t.qZA()()(),t.TgZ(351,"div",7)(352,"div",16)(353,"mat-form-field",9)(354,"mat-label"),t._uU(355),t.ALo(356,"translate"),t.qZA(),t._UZ(357,"input",48),t.qZA()(),t.TgZ(358,"div",16)(359,"mat-form-field",9)(360,"mat-label"),t._uU(361),t.ALo(362,"translate"),t.qZA(),t._UZ(363,"input",49),t.qZA()(),t.TgZ(364,"div",16)(365,"mat-form-field",9)(366,"mat-label"),t._uU(367),t.ALo(368,"translate"),t.qZA(),t._UZ(369,"input",50),t.qZA()()(),t.TgZ(370,"div",7)(371,"div",8)(372,"mat-form-field",9)(373,"mat-label"),t._uU(374),t.ALo(375,"translate"),t.qZA(),t.TgZ(376,"input",51),t.NdJ("change",function(n){return i.readMonthes(n)}),t.qZA()()(),t.TgZ(377,"div",8)(378,"mat-form-field",9)(379,"mat-label"),t._uU(380),t.ALo(381,"translate"),t.qZA(),t._UZ(382,"input",52),t.qZA()()(),t.TgZ(383,"div",7)(384,"div",8)(385,"mat-form-field",9)(386,"mat-label"),t._uU(387),t.ALo(388,"translate"),t.qZA(),t._UZ(389,"input",53),t.qZA()(),t.TgZ(390,"div",8)(391,"mat-form-field",9)(392,"mat-label"),t._uU(393),t.ALo(394,"translate"),t.qZA(),t._UZ(395,"input",54),t.qZA()()(),t.TgZ(396,"div",7)(397,"div",55)(398,"mat-form-field",9)(399,"mat-label"),t._uU(400),t.ALo(401,"translate"),t.qZA(),t._UZ(402,"input",56),t.qZA()()(),t.TgZ(403,"div",7)(404,"div",16)(405,"mat-form-field",9)(406,"mat-label"),t._uU(407),t.ALo(408,"translate"),t.qZA(),t._UZ(409,"input",57),t.qZA()(),t.TgZ(410,"div",16)(411,"mat-form-field",9)(412,"mat-label"),t._uU(413),t.ALo(414,"translate"),t.qZA(),t._UZ(415,"input",58),t.qZA()(),t.TgZ(416,"div",16)(417,"mat-form-field",9)(418,"mat-label"),t._uU(419),t.ALo(420,"translate"),t.qZA(),t._UZ(421,"input",59),t.qZA()()(),t.TgZ(422,"div",7)(423,"div",8)(424,"mat-form-field",9)(425,"mat-label"),t._uU(426),t.ALo(427,"translate"),t.qZA(),t._UZ(428,"input",60),t.qZA()(),t.TgZ(429,"div",8)(430,"mat-form-field",9)(431,"mat-label"),t._uU(432),t.ALo(433,"translate"),t.qZA(),t._UZ(434,"input",61),t.qZA()()(),t.TgZ(435,"div",7)(436,"div",16)(437,"mat-form-field",9)(438,"mat-label"),t._uU(439),t.ALo(440,"translate"),t.qZA(),t._UZ(441,"input",62),t.qZA()(),t.TgZ(442,"div",16)(443,"mat-form-field",9)(444,"mat-label"),t._uU(445),t.ALo(446,"translate"),t.qZA(),t._UZ(447,"input",63),t.qZA()(),t.TgZ(448,"div",16)(449,"mat-form-field",9)(450,"mat-label"),t._uU(451),t.ALo(452,"translate"),t.qZA(),t._UZ(453,"input",64),t.qZA()()(),t.TgZ(454,"div",7)(455,"div",16)(456,"mat-form-field",9)(457,"mat-label"),t._uU(458),t.ALo(459,"translate"),t.qZA(),t.TgZ(460,"input",65),t.NdJ("change",function(n){return i.readElectricity(n)}),t.qZA()()(),t.TgZ(461,"div",16)(462,"mat-form-field",9)(463,"mat-label"),t._uU(464),t.ALo(465,"translate"),t.qZA(),t.TgZ(466,"input",66),t.NdJ("change",function(n){return i.readWater(n)}),t.qZA()()(),t.TgZ(467,"div",16)(468,"mat-form-field",9)(469,"mat-label"),t._uU(470),t.ALo(471,"translate"),t.qZA(),t.TgZ(472,"input",67),t.NdJ("change",function(n){return i.readGas(n)}),t.qZA()()()()()(),t.TgZ(473,"mat-tab",68),t.ALo(474,"translate"),t.TgZ(475,"div",5)(476,"div",6),t._UZ(477,"mat-label"),t.TgZ(478,"div",7)(479,"div",8)(480,"mat-form-field",9)(481,"mat-label"),t._uU(482),t.ALo(483,"translate"),t.qZA(),t._UZ(484,"input",69),t.qZA()(),t.TgZ(485,"div",8)(486,"mat-form-field",9)(487,"mat-label"),t._uU(488),t.ALo(489,"translate"),t.qZA(),t._UZ(490,"input",70),t.qZA()()()(),t.TgZ(491,"div",7)(492,"div",16)(493,"mat-form-field",9)(494,"mat-label"),t._uU(495),t.ALo(496,"translate"),t.qZA(),t._UZ(497,"input",71),t.qZA()(),t.TgZ(498,"div",16)(499,"mat-form-field",9)(500,"mat-label"),t._uU(501),t.ALo(502,"translate"),t.qZA(),t._UZ(503,"input",72),t.qZA()(),t.TgZ(504,"div",16)(505,"mat-form-field",9)(506,"mat-label"),t._uU(507),t.ALo(508,"translate"),t.qZA(),t._UZ(509,"input",73),t.qZA()()(),t.TgZ(510,"div",7)(511,"div",16)(512,"mat-checkbox",74),t._uU(513),t.ALo(514,"translate"),t.qZA()(),t.TgZ(515,"div",16)(516,"mat-checkbox",75),t._uU(517),t.ALo(518,"translate"),t.qZA()(),t.TgZ(519,"div",16)(520,"mat-form-field",9)(521,"mat-label"),t._uU(522),t.ALo(523,"translate"),t.qZA(),t.TgZ(524,"mat-select",76),t.ALo(525,"translate"),t.TgZ(526,"mat-option",11),t._uU(527,"-"),t.qZA(),t.TgZ(528,"mat-option",11),t._uU(529),t.ALo(530,"translate"),t.qZA(),t.TgZ(531,"mat-option",11),t._uU(532),t.ALo(533,"translate"),t.qZA(),t.TgZ(534,"mat-option",11),t._uU(535),t.ALo(536,"translate"),t.qZA()()()()(),t.TgZ(537,"div",7)(538,"div",77)(539,"mat-checkbox",78),t._uU(540),t.ALo(541,"translate"),t.qZA()(),t.TgZ(542,"div",77)(543,"mat-checkbox",79),t._uU(544),t.ALo(545,"translate"),t.qZA()(),t.TgZ(546,"div",77)(547,"mat-checkbox",80),t._uU(548),t.ALo(549,"translate"),t.qZA()()()()(),t.TgZ(550,"mat-tab",81),t.ALo(551,"translate"),t.TgZ(552,"div",5)(553,"mat-checkbox",82),t._uU(554),t.ALo(555,"translate"),t.qZA(),t.TgZ(556,"mat-checkbox",83),t._uU(557),t.ALo(558,"translate"),t.qZA()()()()(),t._UZ(559,"br"),t.TgZ(560,"div",84)(561,"div",7),t.YNc(562,ae,3,4,"button",85),t.qZA()()),2&e){const o=t.MAs(180);t.xp6(1),t.Q6J("ngIf",!i.unitForDisplay.id),t.xp6(1),t.Q6J("ngIf",i.unitForDisplay.id),t.xp6(1),t.hij(" ",t.lcZ(4,183,"HTML.UNIT"),""),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(8,185,"HTML.TAB_BASIC")),t.xp6(9),t.hij(" ",t.lcZ(17,187,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(19,189,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.Oqu(t.lcZ(27,191,"HTML.UnitType")),t.xp6(2),t.s9C("placeholder",t.lcZ(29,193,"HTML.UnitType")),t.xp6(4),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(34,195,"OPTIONS.Flat")),t.xp6(2),t.Q6J("value","D"),t.xp6(1),t.Oqu(t.lcZ(37,197,"OPTIONS.Duplex")),t.xp6(2),t.Q6J("value","T"),t.xp6(1),t.Oqu(t.lcZ(40,199,"OPTIONS.Studio")),t.xp6(2),t.Q6J("value","R"),t.xp6(1),t.Oqu(t.lcZ(43,201,"OPTIONS.RelativeFlat")),t.xp6(2),t.Q6J("value","V"),t.xp6(1),t.Oqu(t.lcZ(46,203,"OPTIONS.Villa")),t.xp6(2),t.Q6J("value","W"),t.xp6(1),t.Oqu(t.lcZ(49,205,"OPTIONS.Warehouse")),t.xp6(2),t.Q6J("value","S"),t.xp6(1),t.Oqu(t.lcZ(52,207,"OPTIONS.Shop")),t.xp6(2),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(55,209,"OPTIONS.Palace")),t.xp6(2),t.Q6J("value","O"),t.xp6(1),t.Oqu(t.lcZ(58,211,"OPTIONS.Office")),t.xp6(2),t.Q6J("value","H"),t.xp6(1),t.Oqu(t.lcZ(61,213,"OPTIONS.House")),t.xp6(6),t.hij(" ",t.lcZ(67,215,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(69,217,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuilding),t.xp6(4),t.hij(" ",t.lcZ(77,219,"HTML.OWNER"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(79,221,"HTML.OWNER")),t.xp6(4),t.Q6J("ngForOf",i.AllOwners),t.xp6(5),t.Oqu(t.lcZ(88,223,"HTML.FloorNumber")),t.xp6(6),t.Oqu(t.lcZ(94,225,"HTML.UnitNumber")),t.xp6(6),t.Oqu(t.lcZ(100,227,"HTML.FileNumber")),t.xp6(5),t.hij(" ",t.lcZ(105,229,"HTML.UnitDescription"),""),t.xp6(7),t.Oqu(t.lcZ(112,231,"HTML.UnitArea")),t.xp6(6),t.Oqu(t.lcZ(118,233,"HTML.MEASURING_UNIT")),t.xp6(2),t.s9C("placeholder",t.lcZ(120,235,"HTML.MEASURING_UNIT")),t.xp6(4),t.Q6J("value","M"),t.xp6(1),t.Oqu(t.lcZ(125,237,"OPTIONS.Meter")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(128,239,"OPTIONS.Carat")),t.xp6(2),t.Q6J("value","A"),t.xp6(1),t.Oqu(t.lcZ(131,241,"OPTIONS.Acre")),t.xp6(2),t.Q6J("value","K"),t.xp6(1),t.Oqu(t.lcZ(134,243,"OPTIONS.KiloMeter")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(137,245,"OPTIONS.Foot")),t.xp6(4),t.Oqu(t.lcZ(141,247,"HTML.UnitHasMezanin")),t.xp6(5),t.Oqu(t.lcZ(146,249,"HTML.UnitGroundFloorArea")),t.xp6(6),t.Oqu(t.lcZ(152,251,"HTML.UnitMezaninArea")),t.xp6(6),t.Oqu(t.lcZ(158,253,"HTML.UnitForSale")),t.xp6(4),t.Oqu(t.lcZ(162,255,"HTML.UnitForRent")),t.xp6(3),t.Q6J("src",i.defaultCusImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(167,257,"HTML.TAB_GeneralDescription")),t.xp6(9),t.Oqu(t.lcZ(176,259,"HTML.RECIEVE_DATE")),t.xp6(2),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(6),t.Oqu(t.lcZ(185,261,"HTML.HOUSING_STATUS")),t.xp6(2),t.s9C("placeholder",t.lcZ(187,263,"HTML.HOUSING_STATUS")),t.xp6(4),t.Q6J("value","E"),t.xp6(1),t.Oqu(t.lcZ(192,265,"OPTIONS.EMPTY")),t.xp6(2),t.Q6J("value","R"),t.xp6(1),t.Oqu(t.lcZ(195,267,"OPTIONS.RENTED")),t.xp6(2),t.Q6J("value","S"),t.xp6(1),t.Oqu(t.lcZ(198,269,"OPTIONS.SOLD")),t.xp6(2),t.Q6J("value","M"),t.xp6(1),t.Oqu(t.lcZ(201,271,"OPTIONS.UNDER_MAINTENANCE")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(204,273,"OPTIONS.Closed")),t.xp6(2),t.Q6J("value","B"),t.xp6(1),t.Oqu(t.lcZ(207,275,"OPTIONS.BookedUp")),t.xp6(5),t.Oqu(t.lcZ(212,277,"HTML.UnitFacing")),t.xp6(2),t.s9C("placeholder",t.lcZ(214,279,"HTML.UnitFacing")),t.xp6(4),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(219,281,"OPTIONS.Corner")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(222,283,"OPTIONS.Front")),t.xp6(2),t.Q6J("value","I"),t.xp6(1),t.Oqu(t.lcZ(225,285,"OPTIONS.Internal")),t.xp6(2),t.Q6J("value","T"),t.xp6(1),t.Oqu(t.lcZ(228,287,"OPTIONS.ThreeStreets")),t.xp6(2),t.Q6J("value","D"),t.xp6(1),t.Oqu(t.lcZ(231,289,"OPTIONS.FourStreets")),t.xp6(6),t.Oqu(t.lcZ(237,291,"HTML.CONSTRUCTION_STATUS")),t.xp6(2),t.s9C("placeholder",t.lcZ(239,293,"HTML.CONSTRUCTION_STATUS")),t.xp6(4),t.Q6J("value","E"),t.xp6(1),t.Oqu(t.lcZ(244,295,"OPTIONS.EXCELLENT")),t.xp6(2),t.Q6J("value","V"),t.xp6(1),t.Oqu(t.lcZ(247,297,"OPTIONS.VERY_GOOD")),t.xp6(2),t.Q6J("value","G"),t.xp6(1),t.Oqu(t.lcZ(250,299,"OPTIONS.GOOD")),t.xp6(2),t.Q6J("value","A"),t.xp6(1),t.Oqu(t.lcZ(253,301,"OPTIONS.ACCEPTED")),t.xp6(2),t.Q6J("value","B"),t.xp6(1),t.Oqu(t.lcZ(256,303,"OPTIONS.BAD")),t.xp6(5),t.Oqu(t.lcZ(261,305,"HTML.PROPERTY_USAGE_TYPE")),t.xp6(2),t.s9C("placeholder",t.lcZ(263,307,"HTML.PROPERTY_USAGE_TYPE")),t.xp6(4),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(268,309,"OPTIONS.Family_Residential")),t.xp6(2),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(271,311,"OPTIONS.Personel_Residential")),t.xp6(2),t.Q6J("value","A"),t.xp6(1),t.Oqu(t.lcZ(274,313,"OPTIONS.Administrative")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(277,315,"OPTIONS.Commercial")),t.xp6(2),t.Q6J("value","M"),t.xp6(1),t.Oqu(t.lcZ(280,317,"OPTIONS.Mix")),t.xp6(5),t.Oqu(t.lcZ(285,319,"HTML.PROPERTY_TYPE")),t.xp6(2),t.s9C("placeholder",t.lcZ(287,321,"HTML.PROPERTY_TYPE")),t.xp6(4),t.Q6J("value","B"),t.xp6(1),t.Oqu(t.lcZ(292,323,"OPTIONS.BUILDING")),t.xp6(2),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(295,325,"OPTIONS.PLAZA")),t.xp6(2),t.Q6J("value","V"),t.xp6(1),t.Oqu(t.lcZ(298,327,"OPTIONS.Villa")),t.xp6(2),t.Q6J("value","W"),t.xp6(1),t.Oqu(t.lcZ(301,329,"OPTIONS.Warehouse")),t.xp6(2),t.Q6J("value","H"),t.xp6(1),t.Oqu(t.lcZ(304,331,"OPTIONS.House")),t.xp6(2),t.s9C("label",t.lcZ(306,333,"HTML.TAB_RentValues")),t.xp6(9),t.Oqu(t.lcZ(315,335,"HTML.RentalCycle")),t.xp6(2),t.s9C("placeholder",t.lcZ(317,337,"HTML.RentalCycle")),t.xp6(4),t.Q6J("value","M"),t.xp6(1),t.Oqu(t.lcZ(322,339,"OPTIONS.Monthly")),t.xp6(2),t.Q6J("value","Q"),t.xp6(1),t.Oqu(t.lcZ(325,341,"OPTIONS.Every3Monthes")),t.xp6(2),t.Q6J("value","H"),t.xp6(1),t.Oqu(t.lcZ(328,343,"OPTIONS.Every6Monthes")),t.xp6(2),t.Q6J("value","Y"),t.xp6(1),t.Oqu(t.lcZ(331,345,"OPTIONS.Yearly")),t.xp6(6),t.Oqu(t.lcZ(337,347,"HTML.ContractValue")),t.xp6(6),t.Oqu(t.lcZ(343,349,"HTML.InsuranceValue")),t.xp6(6),t.Oqu(t.lcZ(349,351,"HTML.SeekingValue")),t.xp6(7),t.Oqu(t.lcZ(356,353,"HTML.MonthlyRentValue")),t.xp6(6),t.Oqu(t.lcZ(362,355,"HTML.WeeklyRentValue")),t.xp6(6),t.Oqu(t.lcZ(368,357,"HTML.DailyRentValue")),t.xp6(7),t.Oqu(t.lcZ(375,359,"HTML.PayInstallmentEveryMonths")),t.xp6(6),t.Oqu(t.lcZ(381,361,"HTML.NumberOfInstallments")),t.xp6(7),t.Oqu(t.lcZ(388,363,"HTML.MonthlyExpense")),t.xp6(6),t.Oqu(t.lcZ(394,365,"HTML.OtherValue")),t.xp6(7),t.Oqu(t.lcZ(401,367,"HTML.ExpenseDesc")),t.xp6(7),t.Oqu(t.lcZ(408,369,"HTML.MonthlyElectricityFee")),t.xp6(6),t.Oqu(t.lcZ(414,371,"HTML.MonthlyWaterFee")),t.xp6(6),t.Oqu(t.lcZ(420,373,"HTML.MonthlyGasFee")),t.xp6(7),t.Oqu(t.lcZ(427,375,"HTML.NumberOfParkingLots")),t.xp6(6),t.Oqu(t.lcZ(433,377,"HTML.MonthlyParkingFee")),t.xp6(7),t.Oqu(t.lcZ(440,379,"HTML.LastElectricityReading")),t.xp6(6),t.Oqu(t.lcZ(446,381,"HTML.LastWaterReading")),t.xp6(6),t.Oqu(t.lcZ(452,383,"HTML.LastGasReading")),t.xp6(7),t.Oqu(t.lcZ(459,385,"HTML.ElectricityCounterNumber")),t.xp6(6),t.Oqu(t.lcZ(465,387,"HTML.WaterCounterNumber")),t.xp6(6),t.Oqu(t.lcZ(471,389,"HTML.GasCounterNumber")),t.xp6(3),t.s9C("label",t.lcZ(474,391,"HTML.TAB_UnitDescription")),t.xp6(9),t.Oqu(t.lcZ(483,393,"HTML.NumberOfBedRooms")),t.xp6(6),t.Oqu(t.lcZ(489,395,"HTML.NumberOfBathRooms")),t.xp6(7),t.Oqu(t.lcZ(496,397,"HTML.UnitKitchen")),t.xp6(6),t.Oqu(t.lcZ(502,399,"HTML.UnitHall")),t.xp6(6),t.Oqu(t.lcZ(508,401,"HTML.UnitBalacona")),t.xp6(6),t.Oqu(t.lcZ(514,403,"HTML.IsKitchenCabinets")),t.xp6(4),t.Oqu(t.lcZ(518,405,"HTML.IsFurnitured")),t.xp6(5),t.Oqu(t.lcZ(523,407,"HTML.FurnitureStatus")),t.xp6(2),t.s9C("placeholder",t.lcZ(525,409,"HTML.FurnitureStatus")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(530,411,"OPTIONS.NEW")),t.xp6(2),t.Q6J("value","U"),t.xp6(1),t.Oqu(t.lcZ(533,413,"OPTIONS.USED")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(536,415,"OPTIONS.NotFound")),t.xp6(5),t.Oqu(t.lcZ(541,417,"HTML.UNTUnitElevator")),t.xp6(4),t.Oqu(t.lcZ(545,419,"HTML.UNTUnitAirCondition")),t.xp6(4),t.Oqu(t.lcZ(549,421,"HTML.UNTUnitMainRoad")),t.xp6(2),t.s9C("label",t.lcZ(551,423,"HTML.TAB_SETTINGS")),t.xp6(4),t.Oqu(t.lcZ(555,425,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(558,427,"HTML.BLOCKED")),t.xp6(5),t.Q6J("ngIf",i.unitForDisplay.id&&i.can("change_units")||!i.unitForDisplay.id&&i.can("add_units"))}},dependencies:[r._Y,r.Fj,r.JJ,r.JL,c.sg,c.O5,r.sg,r.u,r.x0,p.xw,p.SQ,p.Wh,p.yH,et.ey,_.lW,rt.oG,C.Mq,C.hl,C.nW,h.ZT,h.uh,h.H8,I.Nt,T.KE,T.hX,T.R9,it.gD,X.uX,X.SP,U.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}\n"],encapsulation:2});var oe=s(529),ne=s(8865),re=s(9045),se=s(3609),le=s(1596);const ue=function(a){return["/contracts/tenant-add/",a]};function ce(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"a",11),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.closeForCallingTenant())}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"person"),t.qZA()()}if(2&a){const i=t.oxw();t.s9C("matTooltip",t.lcZ(1,2,"ADMIN_NAV.TENANT")),t.Q6J("routerLink",t.VKq(4,ue,i.data.customerId))}}class k{constructor(e,i,o,n,l){this.dialogRef=e,this.codesService=i,this.snackBar=o,this.data=n,this.fb=l,this.curCOMId=N.N.comid,this.account=new x.n,this.currency_const=(new d.I).Currency}ngOnInit(){this.form=this.fb.group({id:null,UNOTitle:null,UNOText:null,UNOActive:null,RowConfirm:0,RowDelete:0,RowStatus:0,UNOCode:null}),this.data.dataRow?(this.action="Patch",this.form.patchValue(this.data.dataRow)):this.action="Post"}onSave(){this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value})}close(){this.action="Cancel",this.dialogRef.close({event:this.action})}closeForCallingTenant(){this.action="CallTenant",this.dialogRef.close({event:this.action})}}function pe(a,e){if(1&a&&(t.TgZ(0,"div",13),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.Oqu(i.branch_ArbName)}}function me(a,e){if(1&a&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.Oqu(i.branch_ArbName)}}function de(a,e){if(1&a&&(t.TgZ(0,"div",13),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.Oqu(i.build_Name)}}function ge(a,e){if(1&a&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.Oqu(i.build_Name)}}function he(a,e){if(1&a&&(t.TgZ(0,"div",13),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.Oqu(i.unitNumber)}}function Te(a,e){if(1&a&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.Oqu(i.unitNumber)}}function Ue(a,e){if(1&a&&(t.TgZ(0,"div",13),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.customer_Name," ")}}function fe(a,e){if(1&a&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.customer_Name," ")}}function Ze(a,e){if(1&a&&(t.TgZ(0,"div",13),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.UNODate," ")}}function _e(a,e){if(1&a&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.UNODate," ")}}function Ne(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",7),t.YNc(1,pe,2,1,"div",8),t.YNc(2,me,2,1,"div",9),t.YNc(3,de,2,1,"div",8),t.YNc(4,ge,2,1,"div",9),t.YNc(5,he,2,1,"div",8),t.YNc(6,Te,2,1,"div",9),t.YNc(7,Ue,2,1,"div",8),t.YNc(8,fe,2,1,"div",9),t.YNc(9,Ze,2,1,"div",8),t.YNc(10,_e,2,1,"div",9),t.TgZ(11,"div",10)(12,"div",11)(13,"button",12),t.NdJ("click",function(){const l=t.CHM(i).$implicit,m=t.oxw();return t.KtG(m.openNotificationDialog(l))}),t.ALo(14,"translate"),t.TgZ(15,"mat-icon"),t._uU(16,"remove_red_eye"),t.qZA()()()()()}if(2&a){const i=e.$implicit;t.xp6(1),t.Q6J("ngIf","T"==i.UNOActive),t.xp6(1),t.Q6J("ngIf","T"!=i.UNOActive),t.xp6(1),t.Q6J("ngIf","T"==i.UNOActive),t.xp6(1),t.Q6J("ngIf","T"!=i.UNOActive),t.xp6(1),t.Q6J("ngIf","T"==i.UNOActive),t.xp6(1),t.Q6J("ngIf","T"!=i.UNOActive),t.xp6(1),t.Q6J("ngIf","T"==i.UNOActive),t.xp6(1),t.Q6J("ngIf","T"!=i.UNOActive),t.xp6(1),t.Q6J("ngIf","T"==i.UNOActive),t.xp6(1),t.Q6J("ngIf","T"!=i.UNOActive),t.xp6(3),t.s9C("matTooltip",t.lcZ(14,11,"BTN.View"))}}function Ae(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",14)(1,"div",15)(2,"mat-card",16)(3,"pagination-controls",17),t.NdJ("pageChange",function(n){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(n))}),t.qZA()()()()}}function ve(a,e){1&a&&(t.TgZ(0,"div",18),t._UZ(1,"mat-spinner",19),t.qZA())}k.\u0275fac=function(e){return new(e||k)(t.Y36(h.so),t.Y36(j.d),t.Y36(O.ux),t.Y36(h.WI),t.Y36(r.QS))},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-notification-dialog"]],decls:18,vars:9,consts:[["mat-dialog-title",""],[1,"user-form",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","UNOText","rows","5"],["mat-dialog-actions",""],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"form",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t._UZ(11,"textarea",7),t.qZA()()()()(),t.TgZ(12,"div",8)(13,"div",4),t.YNc(14,ce,4,6,"a",9),t.TgZ(15,"button",10),t.NdJ("click",function(){return i.close()}),t._uU(16),t.ALo(17,"translate"),t.qZA()()()()),2&e&&(t.xp6(1),t.Oqu(i.data.dataRow.UNOTitle),t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(7),t.Oqu(t.lcZ(10,5,"HTML.Subject")),t.xp6(5),t.Q6J("ngIf",i.data.periorty>0),t.xp6(2),t.Oqu(t.lcZ(17,7,"BTN.CANCEL")))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,c.O5,g.rH,r.sg,r.u,p.xw,p.Wh,p.yH,_.lW,_.Tq,h.uh,h.xY,h.H8,B.Hw,I.Nt,T.KE,T.hX,w.gM,U.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});const be=function(a,e){return{itemsPerPage:a,currentPage:e}};class G{constructor(e,i,o,n,l,m,f,Z){this.appSettings=e,this.dialog=i,this.unitService=o,this.router=n,this.global=l,this.localStore=m,this.translateService=f,this.snackBar=Z,this.notificationsAll=[],this.curCOMId=N.N.comid,this.account=new x.n,this.count=10,this.settings=this.appSettings.settings}ngOnInit(){this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")?(this.global.me=JSON.parse(this.localStore.getItem("account")),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.prepareMsgLanguage(),this.getNotifications()):this.router.navigate(["/sign-in"])}getNotifications(){this.curUserData.is_superuser?this.unitService.getAllNewNotification(this.curCOMId,this.account.periorty).subscribe(e=>this.notificationsAll=e):"T"==this.curUserData.is_employee?this.unitService.getNotificationPerEmployee(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(e=>this.notificationsAll=e):"F"==this.curUserData.is_employee&&this.unitService.getNotificationForTenant(this.curCOMId,this.account.periorty,this.account.customer_KeyField).subscribe(e=>this.notificationsAll=e)}openNotificationDialog(e){console.log("openNotificationDialog"),this.unitService.editNotificationActive(e,"F",this.curUserData.id).subscribe(o=>{console.log("----response--::"+o)}),console.log("-----Data:: "+e),this.dialog.open(k,{data:{dataRow:e,periorty:this.account.periorty,customerId:e.customer_KeyField},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(o=>{"Cancel"==o.event&&(console.log("=====Close Dialog for notification------"),this.router.navigate(["/units/notifications"]).then(()=>{window.location.reload()}))})}removeNotifiation(e){this.dialog.open(at.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(o=>{})}onPageChanged(e){this.page=e,this.getNotifications(),window.scrollTo(0,0)}gotoNewNotification(){}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}G.\u0275fac=function(e){return new(e||G)(t.Y36(v.d),t.Y36(h.uw),t.Y36(A.X),t.Y36(g.F0),t.Y36(L.U),t.Y36(q.C),t.Y36(U.sK),t.Y36(O.ux))},G.\u0275cmp=t.Xpm({type:G,selectors:[["app-notification-list"]],features:[t._Bn([A.X])],decls:33,vars:27,consts:[["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],[1,"mat-mdc-row"],["class","mat-mdc-cell primary-text notifbold",4,"ngIf"],["class","mat-mdc-cell",4,"ngIf"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],[1,"mat-mdc-cell","primary-text","notifbold"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t._UZ(5,"mat-divider"),t.TgZ(6,"div",1)(7,"div",2)(8,"div",3)(9,"h2"),t._uU(10),t.ALo(11,"translate"),t.qZA()(),t.TgZ(12,"div",3)(13,"h2"),t._uU(14),t.ALo(15,"translate"),t.qZA()(),t.TgZ(16,"div",3)(17,"h2"),t._uU(18),t.ALo(19,"translate"),t.qZA()(),t.TgZ(20,"div",3)(21,"h2"),t._uU(22),t.ALo(23,"translate"),t.qZA()(),t.TgZ(24,"div",3)(25,"h2"),t._uU(26),t.ALo(27,"translate"),t.qZA()(),t._UZ(28,"div",3),t.qZA(),t.YNc(29,Ne,17,13,"div",4),t.ALo(30,"paginate"),t.qZA()(),t.YNc(31,Ae,4,0,"div",5),t.YNc(32,ve,2,0,"div",6)),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,9,"HTML.Notifications")),t.xp6(7),t.hij(" ",t.lcZ(11,11,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(15,13,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(19,15,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(23,17,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(27,19,"HTML.Date")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(30,21,i.notificationsAll,t.WLB(24,be,i.count,i.page))),t.xp6(2),t.Q6J("ngIf",i.notificationsAll),t.xp6(1),t.Q6J("ngIf",!i.notificationsAll))},dependencies:[b.LS,c.sg,c.O5,p.xw,p.Wh,p.yH,_.nh,E.a8,B.Hw,P.d,K.Ou,w.gM,b._s,U.X$],styles:[".notifbold{font-weight:700}\n"],encapsulation:2});var xe=s(6166),Ce=s(4159),ye=s.n(Ce);function Le(a,e){if(1&a&&(t.TgZ(0,"div",17)(1,"div",18),t._uU(2),t.qZA(),t.TgZ(3,"div",18),t._uU(4),t.qZA(),t.TgZ(5,"div",18),t._uU(6),t.qZA(),t.TgZ(7,"div",18),t._uU(8),t.qZA(),t.TgZ(9,"div",18),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"div",18),t._uU(13),t.qZA(),t.TgZ(14,"div",18),t._uU(15),t.qZA(),t.TgZ(16,"div",18),t._uU(17),t.qZA(),t._UZ(18,"div",18),t.qZA()),2&a){const i=e.$implicit;t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.Oqu(i.UnitCode),t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",t.xi3(11,8,i.INSDueDate,"yyyy-MM-dd"),""),t.xp6(3),t.hij(" ",i.INSValue," "),t.xp6(2),t.hij(" ",i.INSPayedValue," "),t.xp6(2),t.hij(" ",i.INSValue-i.INSPayedValue," ")}}function Oe(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"mat-card",9)(3,"pagination-controls",21),t.NdJ("pageChange",function(n){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(n))}),t.qZA()()()()}}function qe(a,e){1&a&&(t.TgZ(0,"div",22),t._UZ(1,"mat-spinner",23),t.qZA())}const Ie=function(a,e){return{itemsPerPage:a,currentPage:e}};class Y{constructor(e,i,o,n,l,m,f,Z,y,M){this.appSettings=e,this.activatedRoute=i,this.dialog=o,this.contractService=n,this.router=l,this.global=m,this.localStore=f,this.translateService=Z,this.snackBar=y,this.fb=M,this.installmentAll=[],this.curCOMId=N.N.comid,this.account=new x.n,this.count=6,this.settings=this.appSettings.settings}ngOnInit(){this.todayDate=this.formatDate(),this.dataForm=this.fb.group({noOfDays:1}),this.noOfDays=1,this.securityForApp=(new d.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")?(this.global.me=JSON.parse(this.localStore.getItem("account")),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.prepareMsgLanguage(),this.sub=this.activatedRoute.params.subscribe(e=>{e.id&&(this.buildingID=+e.id,console.log("=====this.buildingID:: "+this.buildingID),this.getInstallments())})):this.router.navigate(["/sign-in"])}formatDate(){const e=new Date;let i=""+(e.getMonth()+1),o=""+e.getDate();const n=e.getFullYear();return i.length<2&&(i="0"+i),o.length<2&&(o="0"+o),console.log([n,i,o].join("-")),[n,i,o].join("-")}getInstallments(){this.installmentAll=null,this.curUserData.periorty>0&&this.contractService.getInstallmentsForCustomerDebt(this.curCOMId,this.account.periorty,this.buildingID,this.noOfDays,this.formatDate()).subscribe(e=>this.installmentAll=e)}removeContract(e){this.dialog.open(at.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(o=>{o&&this.contractService.deleteContract(e).subscribe(n=>this.getInstallments())})}onPrint(){}onRetrieve(){this.noOfDays=this.dataForm.value.noOfDays,this.getInstallments()}downloadPDF(){var e=document.getElementById("contentToPDF");ye()(e).then(i=>{var l=208*i.height/i.width;const f=i.toDataURL("image/png");let Z=new xe.ZP("p","mm","a4");Z.addImage(f,"PNG",0,0,208,l),Z.save("CustomerDebt_Pdf.pdf")})}contractInstallments(e){}onPageChanged(e){this.page=e,this.getInstallments(),window.scrollTo(0,0)}gotoNewContract(){this.router.navigate(["/contracts/contract-add/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}Y.\u0275fac=function(e){return new(e||Y)(t.Y36(v.d),t.Y36(g.gz),t.Y36(h.uw),t.Y36(z.W),t.Y36(g.F0),t.Y36(L.U),t.Y36(q.C),t.Y36(U.sK),t.Y36(O.ux),t.Y36(r.QS))},Y.\u0275cmp=t.Xpm({type:Y,selectors:[["app-customerdebt-list"]],decls:70,vars:52,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row","fxLayoutAlign","space-between center"],["autocomplete","off",3,"formGroup"],["matInput","","formControlName","noOfDays"],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-raised-button","","color","primary",3,"click"],["id","contentToPDF"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"text-center"],["alt","",1,"logotipo",3,"src"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"mat-form-field")(4,"mat-label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"input",3),t.qZA()()()(),t.TgZ(8,"div",4)(9,"div",5)(10,"button",6),t.NdJ("click",function(){return i.onRetrieve()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"button",6),t.NdJ("click",function(){return i.downloadPDF()}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"button",6),t.NdJ("click",function(){return i.onPrint()}),t.TgZ(17,"span"),t._uU(18),t.ALo(19,"translate"),t.qZA()()()(),t._UZ(20,"mat-divider"),t.TgZ(21,"mat-card",7)(22,"div",8)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"h4"),t._uU(27),t.qZA()(),t.TgZ(28,"div",9),t._UZ(29,"img",10),t.qZA(),t._UZ(30,"mat-divider"),t.TgZ(31,"div",11)(32,"div",12)(33,"div",13)(34,"h3"),t._uU(35),t.ALo(36,"translate"),t.qZA()(),t.TgZ(37,"div",13)(38,"h3"),t._uU(39),t.ALo(40,"translate"),t.qZA()(),t.TgZ(41,"div",13)(42,"h3"),t._uU(43),t.ALo(44,"translate"),t.qZA()(),t.TgZ(45,"div",13)(46,"h3"),t._uU(47),t.ALo(48,"translate"),t.qZA()(),t.TgZ(49,"div",13)(50,"h3"),t._uU(51),t.ALo(52,"translate"),t.qZA()(),t.TgZ(53,"div",13)(54,"h3"),t._uU(55),t.ALo(56,"translate"),t.qZA()(),t.TgZ(57,"div",13)(58,"h3"),t._uU(59),t.ALo(60,"translate"),t.qZA()(),t.TgZ(61,"div",13)(62,"h3"),t._uU(63),t.ALo(64,"translate"),t.qZA()(),t._UZ(65,"div",13),t.qZA(),t.YNc(66,Le,19,11,"div",14),t.ALo(67,"paginate"),t.qZA()(),t.YNc(68,Oe,4,0,"div",15),t.YNc(69,qe,2,0,"div",16)),2&e&&(t.xp6(2),t.Q6J("formGroup",i.dataForm),t.xp6(3),t.Oqu(t.lcZ(6,20,"HTML.CustomerDebt_NoOfDays")),t.xp6(6),t.Oqu(t.lcZ(12,22,"BTN.Retrieve")),t.xp6(3),t.Oqu(t.lcZ(15,24,"BTN.DownloadPDF")),t.xp6(4),t.Oqu(t.lcZ(19,26,"BTN.Print")),t.xp6(6),t.Oqu(t.lcZ(25,28,"HTML.CUSTOMERDEBT")),t.xp6(3),t.AsE(" \u0644\u0645\u062f\u0629 ",i.noOfDays," \u064a\u0648\u0645 \u0645\u0646 \u062a\u0627\u0631\u064a\u062e ",i.todayDate," "),t.xp6(2),t.Q6J("src","assets/images/logo/logo.png",t.LSH),t.xp6(6),t.hij(" ",t.lcZ(36,30,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(40,32,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(44,34,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(48,36,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(52,38,"HTML.DueDate")," "),t.xp6(4),t.hij(" ",t.lcZ(56,40,"HTML.Value")," "),t.xp6(4),t.hij(" ",t.lcZ(60,42,"HTML.ValuePayed")," "),t.xp6(4),t.hij(" ",t.lcZ(64,44,"HTML.Remainder")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(67,46,i.installmentAll,t.WLB(49,Ie,i.count,i.page))),t.xp6(2),t.Q6J("ngIf",i.installmentAll),t.xp6(1),t.Q6J("ngIf",!i.installmentAll))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,b.LS,c.sg,c.O5,r.sg,r.u,p.xw,p.Wh,p.yH,_.lW,E.a8,h.H8,I.Nt,T.KE,T.hX,P.d,K.Ou,b._s,c.uU,U.X$],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{margin:0}h1[_ngcontent-%COMP%]{font-size:18pt;font-weight:500;margin-bottom:.5cm}h2[_ngcontent-%COMP%]{font-size:16pt;font-weight:500}p[_ngcontent-%COMP%]{font-size:12pt}.items-group[_ngcontent-%COMP%]{border-style:solid;border-color:#000;border-width:1pt 1pt 1pt 1pt;border-radius:5pt;padding:3pt;margin:9pt 0}.logotipo[_ngcontent-%COMP%]{width:5cm;height:3cm}.label[_ngcontent-%COMP%]{font-weight:500}.disclaimer[_ngcontent-%COMP%], .address[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10pt}.signature-field[_ngcontent-%COMP%]{padding-bottom:24pt;border-bottom:solid black 1pt}"]});const lt=[{path:"",redirectTo:"building",pathMatch:"full"},{path:"building",component:R,pathMatch:"full",data:{breadcrumb:"Building"}},{path:"building-add/:id",component:S,data:{breadcrumb:"EditBuilding"}},{path:"building-add",component:S,data:{breadcrumb:"AddBuilding"}},{path:"unit",component:J,pathMatch:"full",data:{breadcrumb:"Units"}},{path:"unit-add/:id",component:D,data:{breadcrumb:"EditUnit"}},{path:"unit-add",component:D,data:{breadcrumb:"AddUnit"}},{path:"notifications",component:G,pathMatch:"full",data:{breadcrumb:"Notification"}},{path:"customerdebt-rpt/:id",component:Y,data:{breadcrumb:"CustomerDebtRPT"}}];class F{}F.\u0275fac=function(e){return new(e||F)},F.\u0275mod=t.oAB({type:F}),F.\u0275inj=t.cJS({imports:[oe.JF,r.u5,b.JX,re.D,c.ez,g.Bz.forChild(lt),r.UX,ne.m,b.JX,se.kz,le.Y$]})},2887:(ut,Q,s)=>{s.d(Q,{$:()=>d});var c=s(5412),u=s(4650),N=s(1576),x=s(4859),A=s(3081);class d{constructor(v,g){this.dialogRef=v,this.data=g}ngOnInit(){}onConfirm(){this.dialogRef.close(!0)}onDismiss(){this.dialogRef.close(!1)}}d.\u0275fac=function(v){return new(v||d)(u.Y36(c.so),u.Y36(c.WI))},d.\u0275cmp=u.Xpm({type:d,selectors:[["app-confirm-dialog"]],decls:13,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(v,g){1&v&&(u.TgZ(0,"h1",0),u._uU(1),u.qZA(),u.TgZ(2,"div",1)(3,"p"),u._uU(4),u.qZA()(),u.TgZ(5,"div",2)(6,"div",3)(7,"button",4),u.NdJ("click",function(){return g.onDismiss()}),u._uU(8),u.ALo(9,"translate"),u.qZA(),u.TgZ(10,"button",5),u.NdJ("click",function(){return g.onConfirm()}),u._uU(11),u.ALo(12,"translate"),u.qZA()()()),2&v&&(u.xp6(1),u.Oqu(null==g.data?null:g.data.title),u.xp6(3),u.Oqu(null==g.data?null:g.data.message),u.xp6(4),u.Oqu(u.lcZ(9,4,"BTN.NO")),u.xp6(3),u.Oqu(u.lcZ(12,6,"BTN.YES")))},dependencies:[N.xw,N.Wh,x.lW,c.uh,c.xY,c.H8,A.X$]})}}]);