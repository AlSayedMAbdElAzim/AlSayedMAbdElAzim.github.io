"use strict";(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[915],{5915:(be,Y,r)=>{r.r(Y),r.d(Y,{DashboardModule:()=>w,routes:()=>G});var c=r(6895),u=r(9132),$=r(7781),K=r(8027),t=r(4650),R=r(5346),T=r(5298),d=r(1576),v=r(3546),Z=r(7392),p=r(3081);function W(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",3),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onClickCustomerDebt())}),t.TgZ(2,"mat-icon"),t._uU(3,"monetization_on"),t.qZA(),t.TgZ(4,"h2"),t._uU(5,"$"),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"translate"),t.qZA()()()}2&a&&(t.xp6(7),t.Oqu(t.lcZ(8,1,"HTML.CUSTOMERDEBT")))}function X(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",4),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onClickContracts())}),t.TgZ(2,"mat-icon"),t._uU(3,"hourglass_bottom"),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()}2&a&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"HTML.Contract_List")),t.xp6(3),t.Oqu(t.lcZ(9,4,"HTML.ContractEndLT30")))}function z(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onClickContractsLT60())}),t.TgZ(2,"mat-icon"),t._uU(3,"offline_bolt"),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()}2&a&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"HTML.Contract_List")),t.xp6(3),t.Oqu(t.lcZ(9,4,"HTML.ContractEndLT60")))}function tt(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",6),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onClickContractsGT60())}),t.TgZ(2,"mat-icon"),t._uU(3,"local_fire_department"),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()}2&a&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"HTML.Contract_List")),t.xp6(3),t.Oqu(t.lcZ(9,4,"HTML.ContractEndGT60")))}function et(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",7),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onClickAlarm())}),t.TgZ(2,"mat-icon"),t._uU(3,"notifications_active"),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()}2&a&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"HTML.Contract_List")),t.xp6(3),t.Oqu(t.lcZ(9,4,"HTML.ContractInAlarmTime")))}function it(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",8),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onClickDailyWork())}),t.TgZ(2,"mat-icon"),t._uU(3,"work"),t.qZA(),t.TgZ(4,"h2"),t._uU(5,"$"),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"translate"),t.qZA()()()}2&a&&(t.xp6(7),t.Oqu(t.lcZ(8,1,"HTML.DailyWork")))}function at(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onClickDocAccount())}),t.TgZ(2,"mat-icon"),t._uU(3,"work"),t.qZA(),t.TgZ(4,"h2"),t._uU(5,"$"),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"translate"),t.qZA()()()}2&a&&(t.xp6(7),t.Oqu(t.lcZ(8,1,"HTML.DocNotInAccount")))}class I{constructor(i,e,s){this.dataService=i,this.localStore=e,this.router=s,this.userPerm=[]}ngOnInit(){if(this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;this.displayCustomerDebt=this.can("view_dash_CustomerDebt")}}can(i){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(i))}onClickCustomerDebt(){this.info={page:"CustomerDebt"},this.dataService.setInfo(this.info)}onClickContracts(){this.info={page:"Contracts",daysFrom:1,daysTo:30},this.dataService.setInfo(this.info)}onClickContractsLT60(){this.info={page:"ContractsLT60",daysFrom:31,daysTo:60},this.dataService.setInfo(this.info)}onClickContractsGT60(){this.info={page:"ContractsGT60",daysFrom:61,daysTo:365},this.dataService.setInfo(this.info)}onClickAlarm(){this.info={page:"ContractsAlarm"},this.dataService.setInfo(this.info)}onClickDailyWork(){this.info={page:"DailyWork"},this.dataService.setInfo(this.info)}onClickDocAccount(){this.info={page:"DocValueInAccount"},this.dataService.setInfo(this.info)}}I.\u0275fac=function(i){return new(i||I)(t.Y36(R.n),t.Y36(T.C),t.Y36(u.F0))},I.\u0275cmp=t.Xpm({type:I,selectors:[["app-tiles"]],decls:8,vars:7,consts:[["fxLayout","row wrap"],["fxFlex","50","fxFlex.xl","16.6","fxFlex.lg","16.6","fxFlex.md","33.3","fxFlex.sm","33.3","class","p-2",4,"ngIf"],["fxFlex","50","fxFlex.xl","16.6","fxFlex.lg","16.6","fxFlex.md","33.3","fxFlex.sm","33.3",1,"p-2"],[1,"gradient-green","tile","p-2",3,"click"],[1,"gradient-red","tile","p-2",3,"click"],[1,"gradient-orange","tile","p-2",3,"click"],[1,"gradient-pink","tile","p-2",3,"click"],[1,"gradient-gray","tile","p-2",3,"click"],[1,"gradient-brown","tile","p-2",3,"click"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t.YNc(1,W,9,3,"div",1),t.YNc(2,X,10,6,"div",1),t.YNc(3,z,10,6,"div",1),t.YNc(4,tt,10,6,"div",1),t.YNc(5,et,10,6,"div",1),t.YNc(6,it,9,3,"div",1),t.YNc(7,at,9,3,"div",1),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",e.can("view_dash_CustomerDebt")),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_Contracts")),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_ContractsLT60")),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_ContractsGT60")),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_ContractsAlarm")),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_DailyWork")),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_DocNotInAccount")))},dependencies:[c.O5,d.xw,d.yH,v.a8,Z.Hw,p.X$],styles:[".tile[_ngcontent-%COMP%]{text-align:right;cursor:pointer}.tile[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;left:4px;top:8px;line-height:54px;font-size:54px;width:54px;height:54px;opacity:.3}.tile[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:500}.tile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-transform:uppercase}"]});var st=r(2340),A=r(5783),x=r(4459),g=r(8959),nt=r(6166),ot=r(4159),rt=r.n(ot),C=r(1182),_=r(4006),y=r(7465),ct=r(6002),lt=r(4926),ut=r(4613),dt=r(3238),f=r(4859),Q=r(811),k=r(9602),ht=r(4144),J=r(9549),b=r(4850),mt=r(4385),D=r(266),pt=r(1419);function gt(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.downloadPDF())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.PrintTablePDF")))}function _t(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",24)(1,"mat-form-field",25)(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"input",26),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.selectedDateFrom=n)}),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-datepicker-toggle",27)(8,"mat-datepicker",null,28),t.qZA(),t.TgZ(10,"mat-form-field",25)(11,"mat-label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"input",26),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.selectedDateTo=n)}),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"mat-datepicker-toggle",27)(17,"mat-datepicker",null,29),t.qZA(),t.TgZ(19,"button",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.searchData())}),t.TgZ(20,"mat-icon"),t._uU(21,"search"),t.qZA()()()}if(2&a){const e=t.MAs(9),s=t.MAs(18),n=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,10,"HTML.FromDate")),t.xp6(2),t.s9C("placeholder",t.lcZ(6,12,"HTML.FromDate")),t.Q6J("ngModel",n.selectedDateFrom)("matDatepicker",e),t.xp6(2),t.Q6J("for",e),t.xp6(5),t.Oqu(t.lcZ(13,14,"HTML.ToDate")),t.xp6(2),t.s9C("placeholder",t.lcZ(15,16,"HTML.ToDate")),t.Q6J("ngModel",n.selectedDateTo)("matDatepicker",s),t.xp6(2),t.Q6J("for",s)}}function ft(a,i){if(1&a&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.SMTName," ")}}function Tt(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",31)(1,"div")(2,"mat-form-field",32)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-select",33),t.NdJ("valueChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.selectedSmsType=n)}),t.YNc(7,ft,2,2,"mat-option",34),t.qZA()()(),t.TgZ(8,"div",35)(9,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sendSMSForSelectedRows())}),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sendWhatsForSelectedRows())}),t._uU(13),t.ALo(14,"translate"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,7,"HTML.SelectSMSTemplate")),t.xp6(2),t.Q6J("value",e.selectedSmsType),t.xp6(1),t.Q6J("ngForOf",e.smsTypes),t.xp6(2),t.Q6J("disabled",!e.selectedSmsType),t.xp6(1),t.hij(" ",t.lcZ(11,9,"HTML.SendSMS")," "),t.xp6(2),t.Q6J("disabled",!e.selectedSmsType),t.xp6(1),t.hij(" ",t.lcZ(14,11,"HTML.SendWhats")," ")}}function vt(a,i){1&a&&(t.TgZ(0,"div")(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&a&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"HTML.CUSTOMERDEBT")))}function Zt(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",21)(1,"input",38),t.NdJ("change",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleSelectAll(n))}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("checked",e.isAllSelected())}}function At(a,i){1&a&&(t.TgZ(0,"div")(1,"h3"),t._uU(2," ( ) "),t.qZA()())}function xt(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",41)(1,"input",42),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.selected=n)})("change",function(){t.CHM(e);const n=t.oxw().$implicit,o=t.oxw();return t.KtG(o.updateSelection(n))}),t.qZA()()}if(2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",e.selected)}}const Ct=function(a){return["/contracts/tenant-add/",a]};function yt(a,i){if(1&a&&(t.TgZ(0,"a",46),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"person"),t.qZA()()),2&a){const e=t.oxw(2).$implicit;t.s9C("matTooltip",t.lcZ(1,2,"HTML.TENANT")),t.Q6J("routerLink",t.VKq(4,Ct,e.customer_KeyField))}}function bt(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onClickAddReceivable(n))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()}2&a&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.ViewReceivable"))}function Dt(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.onClickAddInvoice(n))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"assignment"),t.qZA()()}2&a&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.ViewInvoice"))}function St(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.printRow(n))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"print"),t.qZA()()}2&a&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.Print"))}function Ut(a,i){if(1&a&&(t.TgZ(0,"div")(1,"div",1),t.YNc(2,yt,4,6,"a",43),t.YNc(3,bt,4,3,"button",44),t.YNc(4,Dt,4,3,"button",44),t.YNc(5,St,4,3,"button",45),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.can("view_dash_CustomerDebtTenant")),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_CustomerDebtRecievable")&&"T"==e.recievableVoucherWithoutInvoice),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_CustomerDebtRentalInvoice")&&"F"==e.recievableVoucherWithoutInvoice),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_CustomerDebtPrintRequest"))}}function Mt(a,i){if(1&a&&(t.TgZ(0,"div",39),t.YNc(1,xt,2,1,"div",40),t.TgZ(2,"div",41),t._uU(3),t._UZ(4,"br"),t._uU(5),t.qZA(),t.TgZ(6,"div",41),t._uU(7),t.qZA(),t.TgZ(8,"div",41),t._uU(9),t._UZ(10,"br"),t._uU(11),t.qZA(),t.TgZ(12,"div",41),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"div",41),t._uU(16),t._UZ(17,"br"),t._uU(18),t.qZA(),t.TgZ(19,"div",41),t._uU(20),t.qZA(),t.YNc(21,Ut,6,4,"div",18),t.qZA()),2&a){const e=i.$implicit,s=t.oxw();t.Tol(s.statusColor[e.INSStatus]),t.xp6(1),t.Q6J("ngIf",s.displayActions),t.xp6(2),t.Oqu(e.build_Name),t.xp6(2),t.Oqu(e.branch_ArbName),t.xp6(2),t.Oqu(e.UnitCode),t.xp6(2),t.Oqu(e.customer_Mobile),t.xp6(2),t.hij("",e.customer_Name," "),t.xp6(2),t.hij(" ",t.xi3(14,13,e.INSDueDate,"yyyy-MM-dd"),""),t.xp6(3),t.hij(" ",e.INSValue,""),t.xp6(2),t.hij("",e.INSPayedValue," "),t.xp6(2),t.hij(" ",e.INSValue-e.INSPayedValue," "),t.xp6(1),t.Q6J("ngIf",s.displayActions)}}class U{constructor(i,e,s,n,o,h,l,m,S){this.appSettings=i,this.router=e,this.fb=s,this.global=n,this.localStore=o,this.atlasService=h,this.smsService=l,this.dataServiceTransfer=m,this.contractService=S,this.testValue="",this.statusColor={N:"make-gold",T:"make-yellow",P:"make-yellowgreen"},this.installmentAll=[],this.selectedOrders=[],this.curCOMName=st.N.comName,this.account=new A.n,this.count=15,this.userPerm=[],this.totalValue=0,this.remainderValue=0,this.tempValue=0,this.displayActions=!0,this.useIntervalToGetDebit=!1,this.selectedDateFrom=new Date,this.selectedDateTo=new Date,this.searchNumber=1,this.smsTypes=[]}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.emptyString=" ",this.todayDate=this.formatDate(),this.noOfDays=1,this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(i=>{this.account=i}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.recievableVoucherWithoutInvoice=this.appSetup.APSRecievableVoucherWithoutInvoice,this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;console.log("---this.recievableVoucherWithoutInvoice:: "+this.recievableVoucherWithoutInvoice),this.getInstallments(),this.getSMSTemplates()}}sendSMSForSelectedRows(){const i=this.installmentAll.filter(e=>e.selected);for(let e=0;e<i.length;e++)this.msgCusName=i[e].customer_Name,this.msgCusMobile=i[e].customer_Mobile,this.msgValue=+i[e].INSValue-+i[e].INSPayedValue,this.msgDate=i[e].INSDueDate,this.msgBuilding=i[e].build_Name,this.msgUnit=i[e].UnitCode,console.log(this.msgCusName+" - "+this.msgCusMobile+" - "+this.msgValue),console.log(this.msgBuilding+" - "+this.msgUnit+" - "+this.msgDate),this.selectedSmsType&&(this.fullSMSText=this.selectedSmsType.SMTText,console.log(`Sending SMS of type::: ${this.selectedSmsType.SMTText}`),this.fullSMSText=this.fullSMSText.replace("/{{tenant_name}}/",this.msgCusName).replace("/{{building_name}}/",this.msgBuilding).replace("/{{unit_number}}/",this.msgUnit).replace("/{{due_date}}/",this.msgDate).replace("/{{rental_value}}/",this.msgValue.toString()),console.log("Sending SMS after replace:: "+this.fullSMSText),this.atlasService.sendTaqnyatSMS(this.curCOMId,this.account.periorty,this.msgCusMobile,this.fullSMSText).subscribe(s=>{console.log("-----sendTaqnyatSMS response:: ",s)},s=>{console.log("-----sendTaqnyatSMS error:: ",s)}))}sendWhatsapp(){this.atlasService.sendWhatsApp_pdf_infobip(this.curCOMId,this.account.periorty,"966560959522","\u0645\u0644\u0641 \u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0642\u0633\u0637","https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf","myinv.pdf").subscribe(e=>{console.log("-----send Infobip Whatsapp response:: ",e)},e=>{console.log("-----send Infobip Whatsapp error:: ",e)})}sendWhatsForSelectedRows(){const i=this.installmentAll.filter(e=>e.selected);for(let e=0;e<i.length;e++)this.msgCusName=i[e].customer_Name,this.msgCusMobile=i[e].customer_Mobile,this.msgValue=+i[e].INSValue-+i[e].INSPayedValue,this.msgDate=i[e].INSDueDate,this.msgBuilding=i[e].build_Name,this.msgUnit=i[e].UnitCode,console.log(this.msgCusName+" - "+this.msgCusMobile+" - "+this.msgValue),console.log(this.msgBuilding+" - "+this.msgUnit+" - "+this.msgDate),this.selectedSmsType&&(this.fullSMSText=this.selectedSmsType.SMTText,console.log(`Sending Whatsapp of type::: ${this.selectedSmsType.SMTText}`),this.fullSMSText=this.fullSMSText.replace("/{{tenant_name}}/",this.msgCusName).replace("/{{building_name}}/",this.msgBuilding).replace("/{{unit_number}}/",this.msgUnit).replace("/{{due_date}}/",this.msgDate).replace("/{{rental_value}}/",this.msgValue.toString()),console.log("Sending Whatsapp after replace:: "+this.fullSMSText),this.atlasService.sendWhatsApp_Cartat(this.curCOMId,this.account.periorty,this.msgCusMobile,this.fullSMSText).subscribe(s=>{console.log("-----send Cartat Whatsapp response:: ",s)},s=>{console.log("-----send Cartat Whatsapp error:: ",s)}))}setDefaultValue(){null==this.searchNumber&&(this.searchNumber=1)}searchData(){this.useIntervalToGetDebit=!0,this.fromDate=this.formatAnyDate(this.selectedDateFrom),this.toDate=this.formatAnyDate(this.selectedDateTo),console.log("Searching from: ",this.fromDate,"to date: ",this.toDate),this.getInstallments()}toggleSelectAll(i){}isAllSelected(){return this.installmentAll?.length>0&&this.installmentAll.every(i=>i.selected)}updateSelection(i){i.selected?this.selectedOrders.push(i):this.selectedOrders=this.selectedOrders.filter(e=>e!==i)}onPageChanged(i){this.page=i,this.getInstallments(),window.scrollTo(0,0)}printRow(i){const e=`\n      <div>\n        <h1>\u0645\u0637\u0627\u0644\u0628\u0629 \u0645\u0627\u0644\u064a\u0629</h1>\n        <p><strong>\u0645\u0637\u0644\u0648\u0628 \u0645\u0646 \u0627\u0644\u0623\u0633\u062a\u0627\u0630/\u0629: </strong> ${i.customer_Name} \u062c\u0648\u0627\u0644 \u0631\u0642\u0645: ${i.customer_Mobile}</p>\n        <p><strong>\u0645\u0628\u0644\u063a \u0648\u0642\u062f\u0631\u0647: </strong> ${i.INSValue-i.INSPayedValue}</p>\n        <p><strong>\u0648\u0630\u0644\u0643 \u0639\u0646: </strong> ${i.INSNotes}</p>\n      </div>\n    `,s=window.open("","_blank","width=600,height=400");s?.document.write(`\n      <html>\n        <head>\n          <title>${this.curCOMName}</title>\n          <style>\n            body { font-family: Arial, sans-serif; }\n            h1 { color: darkblue; }\n          </style>\n        </head>\n        <body>\n          ${e}\n        </body>\n      </html>\n    `),s?.document.close(),s?.print()}printTablePage(){const i=document.getElementById("printTable")?.innerHTML,e=document.body.innerHTML;document.body.innerHTML=i||"",window.print(),document.body.innerHTML=e,location.reload()}printTableAA(){window.print()}downloadPDF2(){const i=document.getElementById("printTable")?.innerHTML,e=document.body.innerHTML;document.body.innerHTML=i||"",window.print(),document.body.innerHTML=e,location.reload()}getCurrentDateTime(){return(new Date).toLocaleString()}getFormattedDateTime(){const i=new Date;return`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")} ${String(i.getHours()).padStart(2,"0")}:${String(i.getMinutes()).padStart(2,"0")}:${String(i.getSeconds()).padStart(2,"0")}`}downloadPDF(){this.displayActions=!1,this.currentDateTime=this.getCurrentDateTime(),console.log("Execution will start after 3 seconds..."),setTimeout(()=>{console.log("This code runs after 3 seconds");var i=document.getElementById("printTable");rt()(i).then(e=>{var o=208*e.height/e.width;const l=e.toDataURL("image/png");let m=new nt.ZP("p","mm","a4");m.addImage(l,"PNG",0,0,208,o),m.save(this.getFormattedDateTime()),this.displayActions=!0})},200)}can(i){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(i))}getSMSTemplates(){this.filterString="M="+this.curCOMId+"&C="+this.account.periorty,this.smsService.getSMSTemplates(this.filterString).subscribe(i=>{this.smsTypes=i})}getInstallments(){this.totalValue=0,this.remainderValue=0,this.installmentAll=null,this.curUserData.is_superuser?this.useIntervalToGetDebit?this.contractService.getInstallmentsForCustomerDebtAdminFromTo(this.curCOMId,this.account.periorty,this.fromDate,this.toDate).subscribe(i=>{this.installmentAll=i,this.installmentAll=this.installmentAll.map(e=>({...e,selected:!1}));for(let e=0;e<this.installmentAll.length;e++)this.tempValue=+this.installmentAll[e].INSValue,this.totalValue+=this.tempValue,this.tempValue=+this.installmentAll[e].INSValue-+this.installmentAll[e].INSPayedValue,this.remainderValue+=this.tempValue}):this.contractService.getInstallmentsForCustomerDebtAdmin(this.curCOMId,this.account.periorty,this.noOfDays,this.todayDate).subscribe(i=>{this.installmentAll=i,this.installmentAll=this.installmentAll.map(e=>({...e,selected:!1}));for(let e=0;e<this.installmentAll.length;e++)this.tempValue=+this.installmentAll[e].INSValue,this.totalValue+=this.tempValue,this.tempValue=+this.installmentAll[e].INSValue-+this.installmentAll[e].INSPayedValue,this.remainderValue+=this.tempValue}):this.curUserData.periorty>0&&(this.useIntervalToGetDebit?this.contractService.getInstallmentsForCustomerDebtPerEmpFromTo(this.curCOMId,this.account.periorty,this.curUserData.id,this.fromDate,this.toDate).subscribe(i=>{this.installmentAll=i,this.installmentAll=this.installmentAll.map(e=>({...e,selected:!1}));for(let e=0;e<this.installmentAll.length;e++)this.tempValue=+this.installmentAll[e].INSValue,this.totalValue+=this.tempValue,this.tempValue=+this.installmentAll[e].INSValue-+this.installmentAll[e].INSPayedValue,this.remainderValue+=this.tempValue}):this.contractService.getInstallmentsForCustomerDebtPerEmp(this.curCOMId,this.account.periorty,this.curUserData.id,this.noOfDays,this.todayDate).subscribe(i=>{this.installmentAll=i,this.installmentAll=this.installmentAll.map(e=>({...e,selected:!1}));for(let e=0;e<this.installmentAll.length;e++)this.tempValue=+this.installmentAll[e].INSValue,this.totalValue+=this.tempValue,this.tempValue=+this.installmentAll[e].INSValue-+this.installmentAll[e].INSPayedValue,this.remainderValue+=this.tempValue}))}formatDate(){const i=new Date;let e=""+(i.getMonth()+1),s=""+i.getDate();const n=i.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),console.log([n,e,s].join("-")),[n,e,s].join("-")}formatAnyDate(i){let e=""+(i.getMonth()+1),s=""+i.getDate();const n=i.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),console.log([n,e,s].join("-")),[n,e,s].join("-")}onClickAddReceivable(i){this.dataServiceTransfer.setData(i),this.router.navigate(["/payments/receivable-add/"])}onClickAddInvoice(i){this.dataServiceTransfer.setData(i),this.router.navigate(["/payments/receivable-add/"])}}U.\u0275fac=function(i){return new(i||U)(t.Y36(C.d),t.Y36(u.F0),t.Y36(_.qu),t.Y36(y.U),t.Y36(T.C),t.Y36(ct.Z),t.Y36(lt.t),t.Y36(ut.j),t.Y36(g.W))},U.\u0275cmp=t.Xpm({type:U,selectors:[["app-dash-customerdebt"]],features:[t._Bn([g.W])],decls:64,vars:43,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["mat-raised-button","","color","primary",1,"spaced-button",3,"click"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary","class","button-container",3,"click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","class","grouped-elements",4,"ngIf"],[1,"mat-mdc-table","admin-table"],["id","printTable"],[4,"ngIf"],[1,"mat-mdc-header-row"],["class","mat-mdc-header-cell",4,"ngIf"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",3,"class",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"button-container",3,"click"],["fxLayout","row","fxLayoutAlign","start center"],["appearance","outline",1,"date-field"],["matInput","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["pickerto",""],["mat-icon-button","","color","primary",1,"search-button",3,"click"],["fxLayout","row","fxLayoutAlign","start center",1,"grouped-elements"],["appearance","outline",1,"w-100"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","start stretch",1,"button-group"],["mat-raised-button","","color","primary",1,"spaced-button",3,"disabled","click"],[3,"value"],["type","checkbox",3,"checked","change"],[1,"mat-mdc-row"],["class","mat-mdc-cell",4,"ngIf"],[1,"mat-mdc-cell"],["type","checkbox",3,"ngModel","ngModelChange","change"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn","class","btn-invoice",3,"matTooltip","click",4,"ngIf"],["class","btn-invoice","mat-mini-fab","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",1,"btn-invoice",3,"matTooltip","click"],["mat-mini-fab","","color","primary",1,"btn-invoice",3,"matTooltip","click"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3)(4,"mat-button-toggle",4)(5,"mat-icon"),t._uU(6,"search"),t.qZA()()()(),t.TgZ(7,"form",5)(8,"mat-form-field",6)(9,"input",7),t.NdJ("ngModelChange",function(n){return e.searchText=n}),t.ALo(10,"translate"),t.qZA()()(),t.TgZ(11,"div",8),t._UZ(12,"mat-button-toggle-group",9,10),t.qZA()(),t._UZ(14,"mat-divider"),t.TgZ(15,"button",11),t.NdJ("click",function(){return e.sendWhatsapp()}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"mat-divider"),t.TgZ(19,"mat-card")(20,"div",12)(21,"h2"),t._uU(22),t.ALo(23,"translate"),t.qZA()(),t.TgZ(24,"div",12),t.YNc(25,gt,3,3,"button",13),t.YNc(26,_t,22,18,"div",14),t.YNc(27,Tt,15,13,"div",15),t.qZA(),t._UZ(28,"mat-divider"),t.TgZ(29,"div",16)(30,"div",17),t.YNc(31,vt,4,3,"div",18),t.TgZ(32,"div",19),t.YNc(33,Zt,2,1,"div",20),t.TgZ(34,"div",21)(35,"h3"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",21)(39,"h3"),t._uU(40),t.ALo(41,"translate"),t.qZA()(),t.TgZ(42,"div",21)(43,"h3"),t._uU(44),t.ALo(45,"translate"),t.qZA()(),t.TgZ(46,"div",21)(47,"h3"),t._uU(48),t.ALo(49,"translate"),t.qZA()(),t.TgZ(50,"div",21)(51,"h3"),t._uU(52),t.ALo(53,"translate"),t._UZ(54,"br"),t._uU(55),t.ALo(56,"translate"),t.qZA()(),t.TgZ(57,"div",21)(58,"h3"),t._uU(59),t.ALo(60,"translate"),t.qZA()(),t.YNc(61,At,3,0,"div",18),t.qZA(),t.YNc(62,Mt,22,16,"div",22),t.ALo(63,"CustomerDebitSearchPipe"),t.qZA()()()),2&i){const s=t.MAs(3);t.xp6(7),t.ekj("show","search"==s.value),t.xp6(2),t.s9C("placeholder",t.lcZ(10,20,"HTML.SEARCH_CustomerDebit")),t.Q6J("ngModel",e.searchText),t.xp6(7),t.hij(" ",t.lcZ(17,22,"HTML.SendWhats"),"\n"),t.xp6(6),t.Oqu(t.lcZ(23,24,"HTML.CUSTOMERDEBT")),t.xp6(3),t.Q6J("ngIf",e.can("view_dash_CustomerDebtPrintTable")),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_CustomerDebtRetrieve")),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_CustomerDebtSendSMS")),t.xp6(4),t.Q6J("ngIf",!e.displayActions),t.xp6(2),t.Q6J("ngIf",e.displayActions),t.xp6(3),t.hij(" ",t.lcZ(37,26,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(41,28,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(45,30,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(49,32,"HTML.DueDate")," "),t.xp6(4),t.hij(" ",t.lcZ(53,34,"HTML.Value"),""),t.xp6(3),t.hij("",t.lcZ(56,36,"HTML.ValuePayed")," "),t.xp6(4),t.hij(" ",t.lcZ(60,38,"HTML.Remainder")," "),t.xp6(2),t.Q6J("ngIf",e.displayActions),t.xp6(1),t.Q6J("ngForOf",t.xi3(63,40,e.installmentAll,e.searchText))}},dependencies:[c.sg,c.O5,u.rH,d.xw,d.Wh,dt.ey,f.lW,f.RK,f.Tq,f.nh,Q.A9,Q.Yi,v.a8,k.Mq,k.hl,k.nW,Z.Hw,ht.Nt,J.KE,J.hX,J.R9,b.d,mt.gD,D.gM,_._Y,_.Fj,_.Wl,_.JJ,_.JL,_.On,_.F,c.uU,p.X$,pt.bD],styles:["table{width:100%}.make-gold{background-color:gold}.make-yellow{background-color:#ff4500}.make-yellowgreen{background-color:#ad7020}.user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ddd;padding:8px;text-align:left}th{background-color:#f2f2f2}@media print{.no-print{display:none}table{display:table;width:100%;border-collapse:collapse}th,td{border:1px solid black;padding:8px;text-align:left}thead{display:table-header-group}tr{page-break-inside:avoid}}.button-container button{margin:5px}.grouped-elements{gap:16px}.spaced-button{margin-left:16px}.date-field{margin-right:16px;width:170px}.number-field{margin-right:16px;width:70px}.search-button{display:flex;align-items:center;margin-left:8px}\n"],encapsulation:2});var M=r(5412),L=r(7009),j=r(1572),O=r(4333);const Lt=function(a){return["/contracts/contract-add/",a]};function wt(a,i){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&a){const e=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(4,Lt,e.id))}}const It=function(a){return["/contracts/installment-list/",a]};function Ot(a,i){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&a){const e=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,It,e.id))}}function qt(a,i){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8)(16,"div",9),t.YNc(17,wt,4,6,"a",10),t.YNc(18,Ot,4,6,"a",10),t.qZA()()()),2&a){const e=i.$implicit,s=t.oxw();t.xp6(2),t.Oqu(e.branch_ArbName),t.xp6(2),t.Oqu(e.build_Name),t.xp6(2),t.Oqu(e.unit_UnitNumber),t.xp6(2),t.hij(" ",e.customer_Name," "),t.xp6(2),t.hij(" ",e.RCOEndDate," "),t.xp6(2),t.AsE(" (",e.RCOCode," / ",e.RCOSubCode,") "),t.xp6(2),t.hij(" ",e.RCOEjarCode," "),t.xp6(3),t.Q6J("ngIf",s.can("view_dash_Contracts_showContract")),t.xp6(1),t.Q6J("ngIf",s.can("view_dash_Contracts_showInstallments"))}}function Nt(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"mat-card",0)(3,"pagination-controls",14),t.NdJ("pageChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.onPageChanged(n))}),t.qZA()()()()}}function Pt(a,i){1&a&&(t.TgZ(0,"div",15),t._UZ(1,"mat-spinner",16),t.qZA())}class q{constructor(i,e,s,n,o,h,l,m){this.appSettings=i,this.dialog=e,this.contractService=s,this.router=n,this.global=o,this.localStore=h,this.translateService=l,this.snackBar=m,this.account=new A.n,this.count=4,this.userPerm=[],this.daysFrom=1,this.daysTo=30,this.settings=this.appSettings.settings}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(i=>{this.account=i}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;this.prepareMsgLanguage(),this.getContracts()}}can(i){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(i))}formatDate(){const i=new Date;let e=""+(i.getMonth()+1),s=""+i.getDate();const n=i.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),console.log([n,e,s].join("-")),[n,e,s].join("-")}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.contractService.getAllDelaydContracts(this.curCOMId,this.account.periorty,this.formatDate(),this.daysFrom,this.daysTo).subscribe(i=>this.contractsAll=i):0==this.curUserData.periorty?this.contractService.getDelaydContractsPerCustomer(this.curCOMId,this.account.periorty,this.account.customer_KeyField,this.formatDate(),this.daysFrom,this.daysTo).subscribe(i=>this.contractsAll=i):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.contractService.getDelaydContractsPerBranch(this.curCOMId,this.account.periorty,this.account.branch_KeyField,this.formatDate(),this.daysFrom,this.daysTo).subscribe(i=>this.contractsAll=i),"D"==this.securityForApp&&this.contractService.getDelaydContractsPerEmp(this.curCOMId,this.account.periorty,this.account.id,this.formatDate(),this.daysFrom,this.daysTo).subscribe(i=>this.contractsAll=i))}onPageChanged(i){this.page=i,this.getContracts(),window.scrollTo(0,0)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(i=>{this.errorRetrieveMsg=i}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(i=>{this.askToDeletedMsg=i}),this.translateService.get("MESSAGE.DELETED").subscribe(i=>{this.deletedMsg=i}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(i=>{this.deletedTitleMsg=i})}}q.\u0275fac=function(i){return new(i||q)(t.Y36(C.d),t.Y36(M.uw),t.Y36(g.W),t.Y36(u.F0),t.Y36(y.U),t.Y36(T.C),t.Y36(p.sK),t.Y36(L.ux))},q.\u0275cmp=t.Xpm({type:q,selectors:[["app-dash-contractsdelayd"]],features:[t._Bn([g.W])],decls:42,vars:30,consts:[[1,"text-center"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(i,e){1&i&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",1)(9,"div",2)(10,"div",3)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",3)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",3)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",3)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",3)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",3)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",3)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",3),t.qZA(),t.YNc(39,qt,19,10,"div",4),t.qZA()(),t.YNc(40,Nt,4,0,"div",5),t.YNc(41,Pt,2,0,"div",6)),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,12,"HTML.Contract_List")),t.xp6(2),t.hij(" ",t.lcZ(6,14,"HTML.ContractEndLT30"),""),t.xp6(7),t.hij(" ",t.lcZ(13,16,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(17,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(21,20,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(25,22,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,24,"HTML.ContractEndDate")," "),t.xp6(4),t.hij(" ",t.lcZ(33,26,"HTML.ContractCode")," "),t.xp6(4),t.hij(" ",t.lcZ(37,28,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",e.contractsAll),t.xp6(1),t.Q6J("ngIf",e.contractsAll),t.xp6(1),t.Q6J("ngIf",!e.contractsAll))},dependencies:[c.sg,c.O5,u.rH,d.xw,d.Wh,d.yH,f.Tq,v.a8,Z.Hw,b.d,j.Ou,D.gM,O.LS,p.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});const Et=function(a){return["/contracts/contract-add/",a]};function Ft(a,i){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&a){const e=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(4,Et,e.id))}}const Ht=function(a){return["/contracts/installment-list/",a]};function Vt(a,i){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&a){const e=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,Ht,e.id))}}function jt(a,i){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8)(16,"div",9),t.YNc(17,Ft,4,6,"a",10),t.YNc(18,Vt,4,6,"a",10),t.qZA()()()),2&a){const e=i.$implicit,s=t.oxw();t.xp6(2),t.Oqu(e.branch_ArbName),t.xp6(2),t.Oqu(e.build_Name),t.xp6(2),t.Oqu(e.unit_UnitNumber),t.xp6(2),t.hij(" ",e.customer_Name," "),t.xp6(2),t.hij(" ",e.RCOEndDate," "),t.xp6(2),t.AsE(" (",e.RCOCode," / ",e.RCOSubCode,") "),t.xp6(2),t.hij(" ",e.RCOEjarCode," "),t.xp6(3),t.Q6J("ngIf",s.can("view_dash_ContractsLT60_showContract")),t.xp6(1),t.Q6J("ngIf",s.can("view_dash_ContractsLT60_showInstallments"))}}function kt(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"mat-card",0)(3,"pagination-controls",14),t.NdJ("pageChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.onPageChanged(n))}),t.qZA()()()()}}function Jt(a,i){1&a&&(t.TgZ(0,"div",15),t._UZ(1,"mat-spinner",16),t.qZA())}class N{constructor(i,e,s,n,o,h,l,m){this.appSettings=i,this.dialog=e,this.contractService=s,this.router=n,this.global=o,this.localStore=h,this.translateService=l,this.snackBar=m,this.account=new A.n,this.count=4,this.userPerm=[],this.daysFrom=31,this.daysTo=60,this.settings=this.appSettings.settings}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(i=>{this.account=i}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;this.prepareMsgLanguage(),this.getContracts()}}can(i){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(i))}formatDate(){const i=new Date;let e=""+(i.getMonth()+1),s=""+i.getDate();const n=i.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),[n,e,s].join("-")}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.contractService.getAllDelaydContracts(this.curCOMId,this.account.periorty,this.formatDate(),this.daysFrom,this.daysTo).subscribe(i=>this.contractsAll=i):0==this.curUserData.periorty?this.contractService.getDelaydContractsPerCustomer(this.curCOMId,this.account.periorty,this.account.customer_KeyField,this.formatDate(),this.daysFrom,this.daysTo).subscribe(i=>this.contractsAll=i):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.contractService.getDelaydContractsPerBranch(this.curCOMId,this.account.periorty,this.account.branch_KeyField,this.formatDate(),this.daysFrom,this.daysTo).subscribe(i=>this.contractsAll=i),"D"==this.securityForApp&&this.contractService.getDelaydContractsPerEmp(this.curCOMId,this.account.periorty,this.account.id,this.formatDate(),this.daysFrom,this.daysTo).subscribe(i=>this.contractsAll=i))}onPageChanged(i){this.page=i,this.getContracts(),window.scrollTo(0,0)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(i=>{this.errorRetrieveMsg=i}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(i=>{this.askToDeletedMsg=i}),this.translateService.get("MESSAGE.DELETED").subscribe(i=>{this.deletedMsg=i}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(i=>{this.deletedTitleMsg=i})}}N.\u0275fac=function(i){return new(i||N)(t.Y36(C.d),t.Y36(M.uw),t.Y36(g.W),t.Y36(u.F0),t.Y36(y.U),t.Y36(T.C),t.Y36(p.sK),t.Y36(L.ux))},N.\u0275cmp=t.Xpm({type:N,selectors:[["app-dash-contractsdelaydlt60"]],features:[t._Bn([g.W])],decls:42,vars:30,consts:[[1,"text-center"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(i,e){1&i&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",1)(9,"div",2)(10,"div",3)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",3)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",3)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",3)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",3)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",3)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",3)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",3),t.qZA(),t.YNc(39,jt,19,10,"div",4),t.qZA()(),t.YNc(40,kt,4,0,"div",5),t.YNc(41,Jt,2,0,"div",6)),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,12,"HTML.Contract_List")),t.xp6(2),t.hij(" ",t.lcZ(6,14,"HTML.ContractEndLT60"),""),t.xp6(7),t.hij(" ",t.lcZ(13,16,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(17,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(21,20,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(25,22,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,24,"HTML.ContractEndDate")," "),t.xp6(4),t.hij(" ",t.lcZ(33,26,"HTML.ContractCode")," "),t.xp6(4),t.hij(" ",t.lcZ(37,28,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",e.contractsAll),t.xp6(1),t.Q6J("ngIf",e.contractsAll),t.xp6(1),t.Q6J("ngIf",!e.contractsAll))},dependencies:[c.sg,c.O5,u.rH,d.xw,d.Wh,d.yH,f.Tq,v.a8,Z.Hw,b.d,j.Ou,D.gM,O.LS,p.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});const Yt=function(a){return["/contracts/contract-add/",a]};function Rt(a,i){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&a){const e=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(4,Yt,e.id))}}const Qt=function(a){return["/contracts/installment-list/",a]};function Bt(a,i){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&a){const e=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,Qt,e.id))}}function Gt(a,i){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8)(16,"div",9),t.YNc(17,Rt,4,6,"a",10),t.YNc(18,Bt,4,6,"a",10),t.qZA()()()),2&a){const e=i.$implicit,s=t.oxw();t.xp6(2),t.Oqu(e.branch_ArbName),t.xp6(2),t.Oqu(e.build_Name),t.xp6(2),t.Oqu(e.unit_UnitNumber),t.xp6(2),t.hij(" ",e.customer_Name," "),t.xp6(2),t.hij(" ",e.RCOEndDate," "),t.xp6(2),t.AsE(" (",e.RCOCode," / ",e.RCOSubCode,") "),t.xp6(2),t.hij(" ",e.RCOEjarCode," "),t.xp6(3),t.Q6J("ngIf",s.can("view_dash_ContractsGT60_showContract")),t.xp6(1),t.Q6J("ngIf",s.can("view_dash_ContractsGT60_showInstallments"))}}function $t(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"mat-card",0)(3,"pagination-controls",14),t.NdJ("pageChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.onPageChanged(n))}),t.qZA()()()()}}function Kt(a,i){1&a&&(t.TgZ(0,"div",15),t._UZ(1,"mat-spinner",16),t.qZA())}class P{constructor(i,e,s,n,o,h,l,m){this.appSettings=i,this.dialog=e,this.contractService=s,this.router=n,this.global=o,this.localStore=h,this.translateService=l,this.snackBar=m,this.account=new A.n,this.count=4,this.userPerm=[],this.daysFrom=61,this.daysTo=365,this.settings=this.appSettings.settings}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(i=>{this.account=i}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;this.prepareMsgLanguage(),this.getContracts()}}can(i){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(i))}formatDate(){const i=new Date;let e=""+(i.getMonth()+1),s=""+i.getDate();const n=i.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),console.log([n,e,s].join("-")),[n,e,s].join("-")}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.contractService.getAllDelaydContracts(this.curCOMId,this.account.periorty,this.formatDate(),this.daysFrom,this.daysTo).subscribe(i=>this.contractsAll=i):0==this.curUserData.periorty?this.contractService.getDelaydContractsPerCustomer(this.curCOMId,this.account.periorty,this.account.customer_KeyField,this.formatDate(),this.daysFrom,this.daysTo).subscribe(i=>this.contractsAll=i):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.contractService.getDelaydContractsPerBranch(this.curCOMId,this.account.periorty,this.account.branch_KeyField,this.formatDate(),this.daysFrom,this.daysTo).subscribe(i=>this.contractsAll=i),"D"==this.securityForApp&&this.contractService.getDelaydContractsPerEmp(this.curCOMId,this.account.periorty,this.account.id,this.formatDate(),this.daysFrom,this.daysTo).subscribe(i=>this.contractsAll=i))}onPageChanged(i){this.page=i,this.getContracts(),window.scrollTo(0,0)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(i=>{this.errorRetrieveMsg=i}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(i=>{this.askToDeletedMsg=i}),this.translateService.get("MESSAGE.DELETED").subscribe(i=>{this.deletedMsg=i}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(i=>{this.deletedTitleMsg=i})}}P.\u0275fac=function(i){return new(i||P)(t.Y36(C.d),t.Y36(M.uw),t.Y36(g.W),t.Y36(u.F0),t.Y36(y.U),t.Y36(T.C),t.Y36(p.sK),t.Y36(L.ux))},P.\u0275cmp=t.Xpm({type:P,selectors:[["app-dash-contractsdelaydgt60"]],features:[t._Bn([g.W])],decls:42,vars:30,consts:[[1,"text-center"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(i,e){1&i&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",1)(9,"div",2)(10,"div",3)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",3)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",3)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",3)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",3)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",3)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",3)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",3),t.qZA(),t.YNc(39,Gt,19,10,"div",4),t.qZA()(),t.YNc(40,$t,4,0,"div",5),t.YNc(41,Kt,2,0,"div",6)),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,12,"HTML.Contract_List")),t.xp6(2),t.hij(" ",t.lcZ(6,14,"HTML.ContractEndGT60"),""),t.xp6(7),t.hij(" ",t.lcZ(13,16,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(17,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(21,20,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(25,22,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,24,"HTML.ContractEndDate")," "),t.xp6(4),t.hij(" ",t.lcZ(33,26,"HTML.ContractCode")," "),t.xp6(4),t.hij(" ",t.lcZ(37,28,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",e.contractsAll),t.xp6(1),t.Q6J("ngIf",e.contractsAll),t.xp6(1),t.Q6J("ngIf",!e.contractsAll))},dependencies:[c.sg,c.O5,u.rH,d.xw,d.Wh,d.yH,f.Tq,v.a8,Z.Hw,b.d,j.Ou,D.gM,O.LS,p.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});const Wt=function(a){return["/contracts/contract-add/",a]};function Xt(a,i){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&a){const e=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(4,Wt,e.id))}}const zt=function(a){return["/contracts/installment-list/",a]};function te(a,i){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&a){const e=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,zt,e.id))}}function ee(a,i){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8)(16,"div",9),t.YNc(17,Xt,4,6,"a",10),t.YNc(18,te,4,6,"a",10),t.qZA()()()),2&a){const e=i.$implicit,s=t.oxw();t.xp6(2),t.Oqu(e.branch_ArbName),t.xp6(2),t.Oqu(e.build_Name),t.xp6(2),t.Oqu(e.unit_UnitNumber),t.xp6(2),t.hij(" ",e.customer_Name," "),t.xp6(2),t.hij(" ",e.RCOEndDate," "),t.xp6(2),t.AsE(" (",e.RCOCode," / ",e.RCOSubCode,") "),t.xp6(2),t.hij(" ",e.RCOEjarCode," "),t.xp6(3),t.Q6J("ngIf",s.can("view_dash_ContractsAlarm_showContract")),t.xp6(1),t.Q6J("ngIf",s.can("view_dash_ContractsAlarm_showInstallments"))}}function ie(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"mat-card",0)(3,"pagination-controls",14),t.NdJ("pageChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.onPageChanged(n))}),t.qZA()()()()}}function ae(a,i){1&a&&(t.TgZ(0,"div",15),t._UZ(1,"mat-spinner",16),t.qZA())}class E{constructor(i,e,s,n,o,h,l,m){this.appSettings=i,this.dialog=e,this.contractService=s,this.router=n,this.global=o,this.localStore=h,this.translateService=l,this.snackBar=m,this.account=new A.n,this.count=4,this.userPerm=[],this.daysFrom=31,this.daysTo=60,this.settings=this.appSettings.settings}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(i=>{this.account=i}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;this.prepareMsgLanguage(),this.getContracts()}}can(i){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(i))}formatDate(){const i=new Date;let e=""+(i.getMonth()+1),s=""+i.getDate();const n=i.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),console.log([n,e,s].join("-")),[n,e,s].join("-")}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.contractService.getAllAlarmContracts(this.curCOMId,this.account.periorty,this.formatDate()).subscribe(i=>this.contractsAll=i):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.contractService.getAlarmContractsPerBranch(this.curCOMId,this.account.periorty,this.account.branch_KeyField,this.formatDate()).subscribe(i=>this.contractsAll=i),"D"==this.securityForApp&&this.contractService.getAlarmContractsPerEmp(this.curCOMId,this.account.periorty,this.account.id,this.formatDate()).subscribe(i=>this.contractsAll=i))}onPageChanged(i){this.page=i,this.getContracts(),window.scrollTo(0,0)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(i=>{this.errorRetrieveMsg=i}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(i=>{this.askToDeletedMsg=i}),this.translateService.get("MESSAGE.DELETED").subscribe(i=>{this.deletedMsg=i}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(i=>{this.deletedTitleMsg=i})}}E.\u0275fac=function(i){return new(i||E)(t.Y36(C.d),t.Y36(M.uw),t.Y36(g.W),t.Y36(u.F0),t.Y36(y.U),t.Y36(T.C),t.Y36(p.sK),t.Y36(L.ux))},E.\u0275cmp=t.Xpm({type:E,selectors:[["app-dash-contractalarm"]],features:[t._Bn([g.W])],decls:42,vars:30,consts:[[1,"text-center"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(i,e){1&i&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",1)(9,"div",2)(10,"div",3)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",3)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",3)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",3)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",3)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",3)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",3)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",3),t.qZA(),t.YNc(39,ee,19,10,"div",4),t.qZA()(),t.YNc(40,ie,4,0,"div",5),t.YNc(41,ae,2,0,"div",6)),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,12,"HTML.Contract_List")),t.xp6(2),t.hij(" ",t.lcZ(6,14,"HTML.ContractInAlarmTime"),""),t.xp6(7),t.hij(" ",t.lcZ(13,16,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(17,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(21,20,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(25,22,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,24,"HTML.ContractEndDate")," "),t.xp6(4),t.hij(" ",t.lcZ(33,26,"HTML.ContractCode")," "),t.xp6(4),t.hij(" ",t.lcZ(37,28,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",e.contractsAll),t.xp6(1),t.Q6J("ngIf",e.contractsAll),t.xp6(1),t.Q6J("ngIf",!e.contractsAll))},dependencies:[c.sg,c.O5,u.rH,d.xw,d.Wh,d.yH,f.Tq,v.a8,Z.Hw,b.d,j.Ou,D.gM,O.LS,p.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});var B=r(8910);const se=function(a){return["/payments/receivable-add/",a]};function ne(a,i){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8)(16,"div",9)(17,"a",10),t.ALo(18,"translate"),t.TgZ(19,"mat-icon"),t._uU(20,"edit"),t.qZA()()()()()),2&a){const e=i.$implicit;t.xp6(2),t.Oqu(e.branch_ArbName),t.xp6(2),t.Oqu(e.build_Name),t.xp6(2),t.Oqu(e.unit_UnitNumber),t.xp6(2),t.hij(" ",e.customer_Name," "),t.xp6(2),t.hij(" ",e.PDODocDate," "),t.xp6(2),t.hij(" ",e.PDOValue," "),t.xp6(2),t.hij(" ",e.contract_EjarCode," "),t.xp6(3),t.s9C("matTooltip",t.lcZ(18,9,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(11,se,e.id))}}function oe(a,i){if(1&a&&(t.TgZ(0,"div",7)(1,"div",11),t._uU(2,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",11),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8),t._uU(16),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(4),t.hij(" ",e.emptyString," "),t.xp6(2),t.hij(" ",e.emptyString," "),t.xp6(2),t.hij(" ",e.emptyString," "),t.xp6(2),t.hij(" ",e.emptyString," "),t.xp6(2),t.hij(" ",e.totalValue," "),t.xp6(2),t.hij(" ",e.emptyString," "),t.xp6(2),t.hij(" ",e.emptyString," ")}}function re(a,i){if(1&a&&(t.TgZ(0,"mat-card")(1,"div",1)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.qZA(),t._UZ(6,"mat-divider"),t.TgZ(7,"div",2)(8,"div",3)(9,"div",4)(10,"h2"),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"div",4)(14,"h2"),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"div",4)(18,"h2"),t._uU(19),t.ALo(20,"translate"),t.qZA()(),t.TgZ(21,"div",4)(22,"h2"),t._uU(23),t.ALo(24,"translate"),t.qZA()(),t.TgZ(25,"div",4)(26,"h2"),t._uU(27),t.ALo(28,"translate"),t.qZA()(),t.TgZ(29,"div",4)(30,"h2"),t._uU(31),t.ALo(32,"translate"),t.qZA()(),t.TgZ(33,"div",4)(34,"h2"),t._uU(35),t.ALo(36,"translate"),t.qZA()(),t._UZ(37,"div",4),t.qZA(),t.YNc(38,ne,21,13,"div",5),t.YNc(39,oe,17,7,"div",6),t.qZA()()),2&a){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,11,"HTML.ReceivableDoc_List")),t.xp6(2),t.hij(" ",e.dateToday,""),t.xp6(6),t.hij(" ",t.lcZ(12,13,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(16,15,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(20,17,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(24,19,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(28,21,"HTML.DocDate")," "),t.xp6(4),t.hij(" ",t.lcZ(32,23,"HTML.DocValue")," "),t.xp6(4),t.hij(" ",t.lcZ(36,25,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",e.documentsAll),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_DailyWork_recievableTotal"))}}const ce=function(a){return["/payments/payable-add/",a]};function le(a,i){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8)(10,"div",9)(11,"a",10),t.ALo(12,"translate"),t.TgZ(13,"mat-icon"),t._uU(14,"edit"),t.qZA()()()()()),2&a){const e=i.$implicit;t.xp6(2),t.hij(" ",e.customer_Name," "),t.xp6(2),t.hij(" ",e.PDODocDate," "),t.xp6(2),t.hij(" ",e.PDOValue," "),t.xp6(2),t.hij(" ",e.PDOPrintedCode," "),t.xp6(3),t.s9C("matTooltip",t.lcZ(12,6,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(8,ce,e.id))}}function ue(a,i){if(1&a&&(t.TgZ(0,"div",7)(1,"div",11),t._uU(2,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",11),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(4),t.hij(" ",e.emptyString," "),t.xp6(2),t.hij(" ",e.totalValuePayable," "),t.xp6(2),t.hij(" ",e.emptyString," "),t.xp6(2),t.hij(" ",e.emptyString," ")}}function de(a,i){if(1&a&&(t.TgZ(0,"mat-card")(1,"div",1)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.qZA(),t._UZ(6,"mat-divider"),t.TgZ(7,"div",2)(8,"div",3)(9,"div",4)(10,"h2"),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"div",4)(14,"h2"),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"div",4)(18,"h2"),t._uU(19),t.ALo(20,"translate"),t.qZA()(),t.TgZ(21,"div",4)(22,"h2"),t._uU(23),t.ALo(24,"translate"),t.qZA()(),t._UZ(25,"div",4),t.qZA(),t.YNc(26,le,15,10,"div",5),t.YNc(27,ue,11,4,"div",6),t.qZA()()),2&a){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,8,"HTML.PayableDoc_List")),t.xp6(2),t.hij(" ",e.dateToday,""),t.xp6(6),t.hij(" ",t.lcZ(12,10,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(16,12,"HTML.DocDate")," "),t.xp6(4),t.hij(" ",t.lcZ(20,14,"HTML.DocValue")," "),t.xp6(4),t.hij(" ",t.lcZ(24,16,"HTML.DocPrintedNo")," "),t.xp6(3),t.Q6J("ngForOf",e.documentsAllPayable),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_DailyWork_payableTotal"))}}class F{constructor(i,e,s,n,o,h,l,m,S){this.appSettings=i,this.dialog=e,this.paymentService=s,this.router=n,this.global=o,this.localStore=h,this.contractService=l,this.translateService=m,this.snackBar=S,this.account=new A.n,this.userPerm=[],this.totalValue=0,this.totalValuePayable=0,this.tempValue=0,this.settings=this.appSettings.settings}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.emptyString=" ",this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(i=>{this.account=i}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;this.dateToday=this.formatDate(),this.getDocuments(),this.getDocumentsPayable()}}can(i){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(i))}formatDate(){const i=new Date;let e=""+(i.getMonth()+1),s=""+i.getDate();const n=i.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),console.log([n,e,s].join("-")),[n,e,s].join("-")}getDocuments(){this.totalValue=0,this.documentsAll=null,this.curUserData.is_superuser?this.paymentService.getAllReceivableDocuments_OneDay(this.curCOMId,this.account.periorty,this.formatDate()).subscribe(i=>{this.documentsAll=i;for(let e=0;e<this.documentsAll.length;e++)this.tempValue=+this.documentsAll[e].PDOValue,this.totalValue+=this.tempValue}):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.paymentService.getAllReceivableDocumentsPerBranch_OneDay(this.curCOMId,this.account.periorty,this.curUserData.branch_KeyField,this.formatDate()).subscribe(i=>{this.documentsAll=i;for(let e=0;e<this.documentsAll.length;e++)this.tempValue=+this.documentsAll[e].PDOValue,this.totalValue+=this.tempValue}),"D"==this.securityForApp&&this.paymentService.getAllReceivableDocumentsPerEmp_OneDay(this.curCOMId,this.account.periorty,this.curUserData.id,this.formatDate()).subscribe(i=>{this.documentsAll=i;for(let e=0;e<this.documentsAll.length;e++)this.tempValue=+this.documentsAll[e].PDOValue,this.totalValue+=this.tempValue}))}getDocumentsPayable(){this.totalValuePayable=0,this.tempValue=0,this.documentsAllPayable=null,this.curUserData.is_superuser?this.paymentService.getAllPayableDocuments_OneDay(this.curCOMId,this.account.periorty,this.formatDate()).subscribe(i=>{this.documentsAllPayable=i;for(let e=0;e<this.documentsAllPayable.length;e++)this.tempValue=+this.documentsAllPayable[e].PDOValue,this.totalValuePayable+=this.tempValue}):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.paymentService.getAllPayableDocumentsPerBranch_OneDay(this.curCOMId,this.account.periorty,this.curUserData.branch_KeyField,this.formatDate()).subscribe(i=>{this.documentsAllPayable=i;for(let e=0;e<this.documentsAllPayable.length;e++)this.tempValue=+this.documentsAllPayable[e].PDOValue,this.totalValuePayable+=this.tempValue}),"D"==this.securityForApp&&this.paymentService.getAllPayableDocumentsPerEmp_OneDay(this.curCOMId,this.account.periorty,this.curUserData.id,this.formatDate()).subscribe(i=>{this.documentsAllPayable=i;for(let e=0;e<this.documentsAllPayable.length;e++)this.tempValue=+this.documentsAllPayable[e].PDOValue,this.totalValuePayable+=this.tempValue}))}}F.\u0275fac=function(i){return new(i||F)(t.Y36(C.d),t.Y36(M.uw),t.Y36(B.c),t.Y36(u.F0),t.Y36(y.U),t.Y36(T.C),t.Y36(g.W),t.Y36(p.sK),t.Y36(L.ux))},F.\u0275cmp=t.Xpm({type:F,selectors:[["app-dash-dailywork"]],decls:4,vars:2,consts:[[4,"ngIf"],[1,"text-center"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["class","mat-mdc-row",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],[1,"mat-mdc-cell","primary-text","notifbold"]],template:function(i,e){1&i&&(t.YNc(0,re,40,27,"mat-card",0),t._UZ(1,"mat-divider")(2,"br"),t.YNc(3,de,28,18,"mat-card",0)),2&i&&(t.Q6J("ngIf",e.can("view_dash_DailyWork_recievable")),t.xp6(3),t.Q6J("ngIf",e.can("view_dash_DailyWork_payable")))},dependencies:[c.sg,c.O5,u.rH,f.Tq,v.a8,Z.Hw,b.d,D.gM,p.X$],styles:[".user-name[_ngcontent-%COMP%]{padding:0 12px;font-weight:400}.user-content[_ngcontent-%COMP%]{padding:10px}.user-content[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{position:relative}.user-content[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:80px;height:80px}.user-content[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]   img.blocked[_ngcontent-%COMP%]{opacity:.5}.user-content[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content[_ngcontent-%COMP%]   .mat-mdc-slide-toggle[_ngcontent-%COMP%]{margin-top:15px}.user-content[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{padding:2px 10px}.user-content[_ngcontent-%COMP%]   .user-details.blocked[_ngcontent-%COMP%]{opacity:.5}.user-search[_ngcontent-%COMP%]{width:0;overflow:hidden;transition:.3s}.user-search[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%!important;text-align:center!important}.user-search[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{min-height:36px;padding:8px 0!important}.user-search[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%]{display:none}.user-search[_ngcontent-%COMP%]   .mat-mdc-input-element[_ngcontent-%COMP%]{text-align:center}.user-search.show[_ngcontent-%COMP%]{width:100%;overflow:visible}.user-spinner[_ngcontent-%COMP%]{position:absolute;inset:0}.mat-mdc-card[_ngcontent-%COMP%]{overflow:hidden}.ver[_ngcontent-%COMP%]{height:96px}.notifbold[_ngcontent-%COMP%]{font-weight:700}"]});const he=function(a){return["/payments/receivable-add/",a]};function me(a,i){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8),t._uU(16),t.qZA(),t.TgZ(17,"div",8)(18,"div",9)(19,"a",10),t.ALo(20,"translate"),t.TgZ(21,"mat-icon"),t._uU(22,"edit"),t.qZA()()()()()),2&a){const e=i.$implicit;t.xp6(2),t.Oqu(e.branch_ArbName),t.xp6(2),t.Oqu(e.build_Name),t.xp6(2),t.Oqu(e.unit_UnitNumber),t.xp6(2),t.hij(" ",e.customer_Name," "),t.xp6(2),t.hij(" ",e.PDODocDate," "),t.xp6(2),t.hij(" ",e.PDOValue," "),t.xp6(2),t.hij(" ",e.contract_EjarCode," "),t.xp6(2),t.hij(" ",e.PDOPayTypeDisplay," "),t.xp6(3),t.s9C("matTooltip",t.lcZ(20,10,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(12,he,e.id))}}function pe(a,i){if(1&a&&(t.TgZ(0,"div",7)(1,"div",11),t._uU(2,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",11),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8),t._uU(16),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(4),t.hij(" ",e.emptyString," "),t.xp6(2),t.hij(" ",e.emptyString," "),t.xp6(2),t.hij(" ",e.emptyString," "),t.xp6(2),t.hij(" ",e.emptyString," "),t.xp6(2),t.hij(" ",e.totalValue," "),t.xp6(2),t.hij(" ",e.emptyString," "),t.xp6(2),t.hij(" ",e.emptyString," ")}}function ge(a,i){if(1&a&&(t.TgZ(0,"mat-card")(1,"div",1)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t._UZ(5,"mat-divider"),t.TgZ(6,"div",2)(7,"div",3)(8,"div",4)(9,"h3"),t._uU(10),t.ALo(11,"translate"),t.qZA()(),t.TgZ(12,"div",4)(13,"h3"),t._uU(14),t.ALo(15,"translate"),t.qZA()(),t.TgZ(16,"div",4)(17,"h3"),t._uU(18),t.ALo(19,"translate"),t.qZA()(),t.TgZ(20,"div",4)(21,"h3"),t._uU(22),t.ALo(23,"translate"),t.qZA()(),t.TgZ(24,"div",4)(25,"h3"),t._uU(26),t.ALo(27,"translate"),t.qZA()(),t.TgZ(28,"div",4)(29,"h3"),t._uU(30),t.ALo(31,"translate"),t.qZA()(),t.TgZ(32,"div",4)(33,"h3"),t._uU(34),t.ALo(35,"translate"),t.qZA()(),t.TgZ(36,"div",4)(37,"h3"),t._uU(38),t.ALo(39,"translate"),t.qZA()(),t._UZ(40,"div",4),t.qZA(),t.YNc(41,me,23,14,"div",5),t.YNc(42,pe,17,7,"div",6),t.qZA()()),2&a){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,11,"HTML.ReceivableDoc_ValueNotInAccount_List")),t.xp6(7),t.hij(" ",t.lcZ(11,13,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(15,15,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(19,17,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(23,19,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(27,21,"HTML.DocDate")," "),t.xp6(4),t.hij(" ",t.lcZ(31,23,"HTML.DocValue")," "),t.xp6(4),t.hij(" ",t.lcZ(35,25,"HTML.ContractEjarCode")," "),t.xp6(4),t.hij(" ",t.lcZ(39,27,"HTML.DocPayType")," "),t.xp6(3),t.Q6J("ngForOf",e.documentsAll),t.xp6(1),t.Q6J("ngIf",e.can("view_dash_DailyWork_recievableTotal"))}}class H{constructor(i,e,s,n,o,h,l,m,S){this.appSettings=i,this.dialog=e,this.paymentService=s,this.router=n,this.global=o,this.localStore=h,this.contractService=l,this.translateService=m,this.snackBar=S,this.account=new A.n,this.userPerm=[],this.totalValue=0,this.totalValuePayable=0,this.tempValue=0,this.settings=this.appSettings.settings}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.emptyString=" ",this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(i=>{this.account=i}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;this.dateToday=this.formatDate(),this.getDocuments()}}can(i){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(i))}formatDate(){const i=new Date;let e=""+(i.getMonth()+1),s=""+i.getDate();const n=i.getFullYear();return e.length<2&&(e="0"+e),s.length<2&&(s="0"+s),console.log([n,e,s].join("-")),[n,e,s].join("-")}getDocuments(){this.totalValue=0,this.documentsAll=null,this.curUserData.is_superuser?this.paymentService.getAllReceivableDocuments_valueNotInAccount(this.curCOMId,this.account.periorty).subscribe(i=>{this.documentsAll=i;for(let e=0;e<this.documentsAll.length;e++)this.tempValue=+this.documentsAll[e].PDOValue,this.totalValue+=this.tempValue}):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.paymentService.getAllReceivableDocumentsPerBranch_valueNotInAccount(this.curCOMId,this.account.periorty,this.curUserData.branch_KeyField).subscribe(i=>{this.documentsAll=i;for(let e=0;e<this.documentsAll.length;e++)this.tempValue=+this.documentsAll[e].PDOValue,this.totalValue+=this.tempValue}),"D"==this.securityForApp&&this.paymentService.getAllReceivableDocumentsPerEmp_valueNotInAccount(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(i=>{this.documentsAll=i;for(let e=0;e<this.documentsAll.length;e++)this.tempValue=+this.documentsAll[e].PDOValue,this.totalValue+=this.tempValue}))}}function _e(a,i){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-customerdebt"),t.qZA())}function fe(a,i){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-contractsdelayd"),t.qZA())}function Te(a,i){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-contractsdelaydlt60"),t.qZA())}function ve(a,i){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-contractsdelaydgt60"),t.qZA())}function Ze(a,i){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-contractalarm"),t.qZA())}function Ae(a,i){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-dailywork"),t.qZA())}function xe(a,i){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-docvalue-notinaccount"),t.qZA())}H.\u0275fac=function(i){return new(i||H)(t.Y36(C.d),t.Y36(M.uw),t.Y36(B.c),t.Y36(u.F0),t.Y36(y.U),t.Y36(T.C),t.Y36(g.W),t.Y36(p.sK),t.Y36(L.ux))},H.\u0275cmp=t.Xpm({type:H,selectors:[["app-dash-docvalue-notinaccount"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-center"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["class","mat-mdc-row",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],[1,"mat-mdc-cell","primary-text","notifbold"]],template:function(i,e){1&i&&t.YNc(0,ge,43,29,"mat-card",0),2&i&&t.Q6J("ngIf",e.can("view_dash_DocNotInAccount"))},dependencies:[c.sg,c.O5,u.rH,f.Tq,v.a8,Z.Hw,b.d,D.gM,p.X$]});class V{constructor(i){this.dataService=i,this.displayedData=""}ngOnInit(){this.dataSubscribe=this.dataService.totalInfo.subscribe(i=>{this.setValueAfterOnInit(i)})}ngOnDestroy(){this.dataSubscribe.unsubscribe()}setValueAfterOnInit(i){this.displayedData=i.page}}V.\u0275fac=function(i){return new(i||V)(t.Y36(R.n))},V.\u0275cmp=t.Xpm({type:V,selectors:[["app-dashboard"]],decls:8,vars:7,consts:[[4,"ngIf"]],template:function(i,e){1&i&&(t._UZ(0,"app-tiles"),t.YNc(1,_e,2,0,"div",0),t.YNc(2,fe,2,0,"div",0),t.YNc(3,Te,2,0,"div",0),t.YNc(4,ve,2,0,"div",0),t.YNc(5,Ze,2,0,"div",0),t.YNc(6,Ae,2,0,"div",0),t.YNc(7,xe,2,0,"div",0)),2&i&&(t.xp6(1),t.Q6J("ngIf","CustomerDebt"==e.displayedData),t.xp6(1),t.Q6J("ngIf","Contracts"==e.displayedData),t.xp6(1),t.Q6J("ngIf","ContractsLT60"==e.displayedData),t.xp6(1),t.Q6J("ngIf","ContractsGT60"==e.displayedData),t.xp6(1),t.Q6J("ngIf","ContractsAlarm"==e.displayedData),t.xp6(1),t.Q6J("ngIf","DailyWork"==e.displayedData),t.xp6(1),t.Q6J("ngIf","DocValueInAccount"==e.displayedData))},dependencies:[c.O5,I,U,q,N,P,E,F,H],styles:["table[_ngcontent-%COMP%]{width:100%}.make-gold[_ngcontent-%COMP%]{background-color:gold}.make-yellow[_ngcontent-%COMP%]{background-color:#ff4500}.make-yellowgreen[_ngcontent-%COMP%]{background-color:#ad7020}"]});var Ce=r(9045),ye=r(3609);const G=[{path:"",component:V,pathMatch:"full"},{path:"debt",component:U,data:{breadcrumb:"Branch"}}];class w{}w.\u0275fac=function(i){return new(i||w)},w.\u0275mod=t.oAB({type:w}),w.\u0275inj=t.cJS({imports:[c.ez,u.Bz.forChild(G),$.m,O.JX,_.u5,Ce.D,_.UX,ye.kz,K.a4]})}}]);