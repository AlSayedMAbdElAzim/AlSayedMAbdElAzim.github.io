"use strict";(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[915],{5915:(G,V,u)=>{u.r(V),u.d(V,{DashboardModule:()=>M,routes:()=>Q});var d=u(6895),p=u(9132),q=u(589),R=u(8027),t=u(4650),A=u(5346),f=u(5298),n=u(1576),r=u(3546),c=u(7392),l=u(3081);function Z(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",3),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onClickCustomerDebt())}),t.TgZ(2,"mat-icon"),t._uU(3,"monetization_on"),t.qZA(),t.TgZ(4,"h2"),t._uU(5,"$"),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"translate"),t.qZA()()()}2&a&&(t.xp6(7),t.Oqu(t.lcZ(8,1,"HTML.CUSTOMERDEBT")))}function K(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",4),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onClickContracts())}),t.TgZ(2,"mat-icon"),t._uU(3,"hourglass_bottom"),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()}2&a&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"HTML.Contract_List")),t.xp6(3),t.Oqu(t.lcZ(9,4,"HTML.ContractEndLT30")))}function $(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",5),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onClickContractsLT60())}),t.TgZ(2,"mat-icon"),t._uU(3,"offline_bolt"),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()}2&a&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"HTML.Contract_List")),t.xp6(3),t.Oqu(t.lcZ(9,4,"HTML.ContractEndLT60")))}function W(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",6),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onClickContractsGT60())}),t.TgZ(2,"mat-icon"),t._uU(3,"local_fire_department"),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()}2&a&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"HTML.Contract_List")),t.xp6(3),t.Oqu(t.lcZ(9,4,"HTML.ContractEndGT60")))}function X(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",7),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onClickAlarm())}),t.TgZ(2,"mat-icon"),t._uU(3,"notifications_active"),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()}2&a&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"HTML.Contract_List")),t.xp6(3),t.Oqu(t.lcZ(9,4,"HTML.ContractInAlarmTime")))}function z(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",8),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onClickDailyWork())}),t.TgZ(2,"mat-icon"),t._uU(3,"work"),t.qZA(),t.TgZ(4,"h2"),t._uU(5,"$"),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"translate"),t.qZA()()()}2&a&&(t.xp6(7),t.Oqu(t.lcZ(8,1,"HTML.DailyWork")))}function tt(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",2)(1,"mat-card",5),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onClickDocAccount())}),t.TgZ(2,"mat-icon"),t._uU(3,"work"),t.qZA(),t.TgZ(4,"h2"),t._uU(5,"$"),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"translate"),t.qZA()()()}2&a&&(t.xp6(7),t.Oqu(t.lcZ(8,1,"HTML.DocNotInAccount")))}class O{constructor(e,i,s){this.dataService=e,this.localStore=i,this.router=s,this.userPerm=[]}ngOnInit(){if(this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.displayCustomerDebt=this.can("view_dash_CustomerDebt")}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onClickCustomerDebt(){this.info={page:"CustomerDebt"},this.dataService.setInfo(this.info)}onClickContracts(){this.info={page:"Contracts",daysFrom:1,daysTo:30},this.dataService.setInfo(this.info)}onClickContractsLT60(){this.info={page:"ContractsLT60",daysFrom:31,daysTo:60},this.dataService.setInfo(this.info)}onClickContractsGT60(){this.info={page:"ContractsGT60",daysFrom:61,daysTo:365},this.dataService.setInfo(this.info)}onClickAlarm(){this.info={page:"ContractsAlarm"},this.dataService.setInfo(this.info)}onClickDailyWork(){this.info={page:"DailyWork"},this.dataService.setInfo(this.info)}onClickDocAccount(){this.info={page:"DocValueInAccount"},this.dataService.setInfo(this.info)}}O.\u0275fac=function(e){return new(e||O)(t.Y36(A.n),t.Y36(f.C),t.Y36(p.F0))},O.\u0275cmp=t.Xpm({type:O,selectors:[["app-tiles"]],decls:8,vars:7,consts:[["fxLayout","row wrap"],["fxFlex","50","fxFlex.xl","16.6","fxFlex.lg","16.6","fxFlex.md","33.3","fxFlex.sm","33.3","class","p-2",4,"ngIf"],["fxFlex","50","fxFlex.xl","16.6","fxFlex.lg","16.6","fxFlex.md","33.3","fxFlex.sm","33.3",1,"p-2"],[1,"gradient-green","tile","p-2",3,"click"],[1,"gradient-red","tile","p-2",3,"click"],[1,"gradient-orange","tile","p-2",3,"click"],[1,"gradient-pink","tile","p-2",3,"click"],[1,"gradient-gray","tile","p-2",3,"click"],[1,"gradient-brown","tile","p-2",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Z,9,3,"div",1),t.YNc(2,K,10,6,"div",1),t.YNc(3,$,10,6,"div",1),t.YNc(4,W,10,6,"div",1),t.YNc(5,X,10,6,"div",1),t.YNc(6,z,9,3,"div",1),t.YNc(7,tt,9,3,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.can("view_dash_CustomerDebt")),t.xp6(1),t.Q6J("ngIf",i.can("view_dash_Contracts")),t.xp6(1),t.Q6J("ngIf",i.can("view_dash_ContractsLT60")),t.xp6(1),t.Q6J("ngIf",i.can("view_dash_ContractsGT60")),t.xp6(1),t.Q6J("ngIf",i.can("view_dash_ContractsAlarm")),t.xp6(1),t.Q6J("ngIf",i.can("view_dash_DailyWork")),t.xp6(1),t.Q6J("ngIf",i.can("view_dash_DocNotInAccount")))},dependencies:[d.O5,n.xw,n.yH,r.a8,c.Hw,l.X$],styles:[".tile[_ngcontent-%COMP%]{text-align:right;cursor:pointer}.tile[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;left:4px;top:8px;line-height:54px;font-size:54px;width:54px;height:54px;opacity:.3}.tile[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:500}.tile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-transform:uppercase}"]});var T=u(2340),y=u(5783),C=u(4459),x=u(1182),D=u(7465),m=u(8959),b=u(4859);const et=function(a){return["/contracts/tenant-add/",a]};function it(a,e){if(1&a&&(t.TgZ(0,"a",11)(1,"mat-icon"),t._uU(2,"remove_red_eye"),t.qZA()()),2&a){const i=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,et,i.customer_KeyField))}}function at(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"div",8),t._uU(13),t.qZA(),t.TgZ(14,"div",8),t._uU(15),t.qZA(),t.TgZ(16,"div",8),t._uU(17),t.qZA(),t.TgZ(18,"div",8)(19,"div",9),t.YNc(20,it,3,3,"a",10),t.qZA()()()),2&a){const i=e.$implicit,s=t.oxw();t.Tol(s.statusColor[i.INSStatus]),t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.Oqu(i.UnitCode),t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",t.xi3(11,11,i.INSDueDate,"yyyy-MM-dd"),""),t.xp6(3),t.hij(" ",i.INSValue," "),t.xp6(2),t.hij(" ",i.INSPayedValue," "),t.xp6(2),t.hij(" ",i.INSValue-i.INSPayedValue," "),t.xp6(3),t.Q6J("ngIf",s.can("view_dash_CustomerDebtTenant"))}}function st(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",12),t._uU(2,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",12),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",12),t._uU(16),t.qZA(),t.TgZ(17,"div",8),t._uU(18),t.qZA()()),2&a){const i=t.oxw();t.xp6(4),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.totalValue," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.remainderValue," "),t.xp6(2),t.hij(" ",i.emptyString," ")}}class w{constructor(e,i,s,o,h){this.appSettings=e,this.router=i,this.global=s,this.localStore=o,this.contractService=h,this.testValue="",this.statusColor={N:"make-gold",T:"make-yellow",P:"make-yellowgreen"},this.installmentAll=[],this.curCOMId=T.N.comid,this.account=new y.n,this.count=6,this.userPerm=[],this.totalValue=0,this.remainderValue=0,this.tempValue=0}ngOnInit(){if(this.emptyString=" ",this.todayDate=this.formatDate(),this.noOfDays=1,this.securityForApp=(new C.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.getInstallments()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getInstallments(){this.totalValue=0,this.remainderValue=0,this.installmentAll=null,this.curUserData.is_superuser?this.contractService.getInstallmentsForCustomerDebtAdmin(this.curCOMId,this.account.periorty,this.noOfDays,this.formatDate()).subscribe(e=>{this.installmentAll=e;for(let i=0;i<this.installmentAll.length;i++)this.tempValue=+this.installmentAll[i].INSValue,this.totalValue+=this.tempValue,this.tempValue=+this.installmentAll[i].INSValue-+this.installmentAll[i].INSPayedValue,this.remainderValue+=this.tempValue}):this.curUserData.periorty>0&&this.contractService.getInstallmentsForCustomerDebtPerEmp(this.curCOMId,this.account.periorty,this.curUserData.id,this.noOfDays,this.formatDate()).subscribe(e=>{this.installmentAll=e;for(let i=0;i<this.installmentAll.length;i++)this.tempValue=+this.installmentAll[i].INSValue,this.totalValue+=this.tempValue,this.tempValue=+this.installmentAll[i].INSValue-+this.installmentAll[i].INSPayedValue,this.remainderValue+=this.tempValue})}formatDate(){const e=new Date;let i=""+(e.getMonth()+1),s=""+e.getDate();const o=e.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),console.log([o,i,s].join("-")),[o,i,s].join("-")}}w.\u0275fac=function(e){return new(e||w)(t.Y36(x.d),t.Y36(p.F0),t.Y36(D.U),t.Y36(f.C),t.Y36(m.W))},w.\u0275cmp=t.Xpm({type:w,selectors:[["app-dash-customerdebt"]],decls:42,vars:29,consts:[[1,"p-0"],[1,"text-center"],[1,"mat-mdc-table","admin-table","header-sm","truncated"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",3,"class",4,"ngFor","ngForOf"],["class","mat-mdc-row",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink"],[1,"mat-mdc-cell","primary-text","notifbold"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div",2)(6,"div",3)(7,"div",4)(8,"h3"),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"div",4)(12,"h3"),t._uU(13),t.ALo(14,"translate"),t.qZA()(),t.TgZ(15,"div",4)(16,"h3"),t._uU(17),t.ALo(18,"translate"),t.qZA()(),t.TgZ(19,"div",4)(20,"h3"),t._uU(21),t.ALo(22,"translate"),t.qZA()(),t.TgZ(23,"div",4)(24,"h3"),t._uU(25),t.ALo(26,"translate"),t.qZA()(),t.TgZ(27,"div",4)(28,"h3"),t._uU(29),t.ALo(30,"translate"),t.qZA()(),t.TgZ(31,"div",4)(32,"h3"),t._uU(33),t.ALo(34,"translate"),t.qZA()(),t.TgZ(35,"div",4)(36,"h3"),t._uU(37),t.ALo(38,"translate"),t.qZA()(),t._UZ(39,"div",4),t.qZA(),t.YNc(40,at,21,14,"div",5),t.YNc(41,st,19,8,"div",6),t.qZA()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,11,"HTML.CUSTOMERDEBT")),t.xp6(6),t.hij(" ",t.lcZ(10,13,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(14,15,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(18,17,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(22,19,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(26,21,"HTML.DueDate")," "),t.xp6(4),t.hij(" ",t.lcZ(30,23,"HTML.Value")," "),t.xp6(4),t.hij(" ",t.lcZ(34,25,"HTML.ValuePayed")," "),t.xp6(4),t.hij(" ",t.lcZ(38,27,"HTML.Remainder")," "),t.xp6(3),t.Q6J("ngForOf",i.installmentAll),t.xp6(1),t.Q6J("ngIf",i.can("view_dash_CustomerDebtTotal")))},dependencies:[d.sg,d.O5,p.rH,b.Tq,r.a8,c.Hw,d.uU,l.X$],styles:["table[_ngcontent-%COMP%]{width:100%}.make-gold[_ngcontent-%COMP%]{background-color:gold}.make-yellow[_ngcontent-%COMP%]{background-color:#ff4500}.make-yellowgreen[_ngcontent-%COMP%]{background-color:#ad7020}"]});var U=u(5412),P=u(7009),S=u(4850),k=u(1572),L=u(266);const nt=function(a){return["/contracts/contract-add/",a]};function rt(a,e){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&a){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(4,nt,i.id))}}const ot=function(a){return["/contracts/installment-list/",a]};function ct(a,e){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&a){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,ot,i.id))}}function lt(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8)(16,"div",9),t.YNc(17,rt,4,6,"a",10),t.YNc(18,ct,4,6,"a",10),t.qZA()()()),2&a){const i=e.$implicit,s=t.oxw();t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.Oqu(i.unit_UnitNumber),t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",i.RCOEndDate," "),t.xp6(2),t.AsE(" (",i.RCOCode," / ",i.RCOSubCode,") "),t.xp6(2),t.hij(" ",i.RCOEjarCode," "),t.xp6(3),t.Q6J("ngIf",s.can("view_dash_Contracts_showContract")),t.xp6(1),t.Q6J("ngIf",s.can("view_dash_Contracts_showInstallments"))}}function ut(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"mat-card",0)(3,"pagination-controls",14),t.NdJ("pageChange",function(o){t.CHM(i);const h=t.oxw();return t.KtG(h.onPageChanged(o))}),t.qZA()()()()}}function dt(a,e){1&a&&(t.TgZ(0,"div",15),t._UZ(1,"mat-spinner",16),t.qZA())}class I{constructor(e,i,s,o,h,g,_,v){this.appSettings=e,this.dialog=i,this.contractService=s,this.router=o,this.global=h,this.localStore=g,this.translateService=_,this.snackBar=v,this.curCOMId=T.N.comid,this.account=new y.n,this.count=4,this.userPerm=[],this.daysFrom=1,this.daysTo=30,this.settings=this.appSettings.settings}ngOnInit(){if(this.securityForApp=(new C.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getContracts()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}formatDate(){const e=new Date;let i=""+(e.getMonth()+1),s=""+e.getDate();const o=e.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),console.log([o,i,s].join("-")),[o,i,s].join("-")}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.contractService.getAllDelaydContracts(this.curCOMId,this.account.periorty,this.formatDate(),this.daysFrom,this.daysTo).subscribe(e=>this.contractsAll=e):0==this.curUserData.periorty?this.contractService.getDelaydContractsPerCustomer(this.curCOMId,this.account.periorty,this.account.customer_KeyField,this.formatDate(),this.daysFrom,this.daysTo).subscribe(e=>this.contractsAll=e):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.contractService.getDelaydContractsPerBranch(this.curCOMId,this.account.periorty,this.account.branch_KeyField,this.formatDate(),this.daysFrom,this.daysTo).subscribe(e=>this.contractsAll=e),"D"==this.securityForApp&&this.contractService.getDelaydContractsPerEmp(this.curCOMId,this.account.periorty,this.account.id,this.formatDate(),this.daysFrom,this.daysTo).subscribe(e=>this.contractsAll=e))}onPageChanged(e){this.page=e,this.getContracts(),window.scrollTo(0,0)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}I.\u0275fac=function(e){return new(e||I)(t.Y36(x.d),t.Y36(U.uw),t.Y36(m.W),t.Y36(p.F0),t.Y36(D.U),t.Y36(f.C),t.Y36(l.sK),t.Y36(P.ux))},I.\u0275cmp=t.Xpm({type:I,selectors:[["app-dash-contractsdelayd"]],features:[t._Bn([m.W])],decls:42,vars:30,consts:[[1,"text-center"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",1)(9,"div",2)(10,"div",3)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",3)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",3)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",3)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",3)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",3)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",3)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",3),t.qZA(),t.YNc(39,lt,19,10,"div",4),t.qZA()(),t.YNc(40,ut,4,0,"div",5),t.YNc(41,dt,2,0,"div",6)),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,12,"HTML.Contract_List")),t.xp6(2),t.hij(" ",t.lcZ(6,14,"HTML.ContractEndLT30"),""),t.xp6(7),t.hij(" ",t.lcZ(13,16,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(17,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(21,20,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(25,22,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,24,"HTML.ContractEndDate")," "),t.xp6(4),t.hij(" ",t.lcZ(33,26,"HTML.ContractCode")," "),t.xp6(4),t.hij(" ",t.lcZ(37,28,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",i.contractsAll),t.xp6(1),t.Q6J("ngIf",i.contractsAll),t.xp6(1),t.Q6J("ngIf",!i.contractsAll))},dependencies:[d.sg,d.O5,p.rH,n.xw,n.Wh,n.yH,b.Tq,r.a8,c.Hw,S.d,k.Ou,L.gM,l.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});const ht=function(a){return["/contracts/contract-add/",a]};function pt(a,e){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&a){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(4,ht,i.id))}}const mt=function(a){return["/contracts/installment-list/",a]};function gt(a,e){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&a){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,mt,i.id))}}function _t(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8)(16,"div",9),t.YNc(17,pt,4,6,"a",10),t.YNc(18,gt,4,6,"a",10),t.qZA()()()),2&a){const i=e.$implicit,s=t.oxw();t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.Oqu(i.unit_UnitNumber),t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",i.RCOEndDate," "),t.xp6(2),t.AsE(" (",i.RCOCode," / ",i.RCOSubCode,") "),t.xp6(2),t.hij(" ",i.RCOEjarCode," "),t.xp6(3),t.Q6J("ngIf",s.can("view_dash_ContractsLT60_showContract")),t.xp6(1),t.Q6J("ngIf",s.can("view_dash_ContractsLT60_showInstallments"))}}function vt(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"mat-card",0)(3,"pagination-controls",14),t.NdJ("pageChange",function(o){t.CHM(i);const h=t.oxw();return t.KtG(h.onPageChanged(o))}),t.qZA()()()()}}function ft(a,e){1&a&&(t.TgZ(0,"div",15),t._UZ(1,"mat-spinner",16),t.qZA())}class N{constructor(e,i,s,o,h,g,_,v){this.appSettings=e,this.dialog=i,this.contractService=s,this.router=o,this.global=h,this.localStore=g,this.translateService=_,this.snackBar=v,this.curCOMId=T.N.comid,this.account=new y.n,this.count=4,this.userPerm=[],this.daysFrom=31,this.daysTo=60,this.settings=this.appSettings.settings}ngOnInit(){if(this.securityForApp=(new C.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getContracts()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}formatDate(){const e=new Date;let i=""+(e.getMonth()+1),s=""+e.getDate();const o=e.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),[o,i,s].join("-")}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.contractService.getAllDelaydContracts(this.curCOMId,this.account.periorty,this.formatDate(),this.daysFrom,this.daysTo).subscribe(e=>this.contractsAll=e):0==this.curUserData.periorty?this.contractService.getDelaydContractsPerCustomer(this.curCOMId,this.account.periorty,this.account.customer_KeyField,this.formatDate(),this.daysFrom,this.daysTo).subscribe(e=>this.contractsAll=e):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.contractService.getDelaydContractsPerBranch(this.curCOMId,this.account.periorty,this.account.branch_KeyField,this.formatDate(),this.daysFrom,this.daysTo).subscribe(e=>this.contractsAll=e),"D"==this.securityForApp&&this.contractService.getDelaydContractsPerEmp(this.curCOMId,this.account.periorty,this.account.id,this.formatDate(),this.daysFrom,this.daysTo).subscribe(e=>this.contractsAll=e))}onPageChanged(e){this.page=e,this.getContracts(),window.scrollTo(0,0)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}N.\u0275fac=function(e){return new(e||N)(t.Y36(x.d),t.Y36(U.uw),t.Y36(m.W),t.Y36(p.F0),t.Y36(D.U),t.Y36(f.C),t.Y36(l.sK),t.Y36(P.ux))},N.\u0275cmp=t.Xpm({type:N,selectors:[["app-dash-contractsdelaydlt60"]],features:[t._Bn([m.W])],decls:42,vars:30,consts:[[1,"text-center"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",1)(9,"div",2)(10,"div",3)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",3)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",3)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",3)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",3)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",3)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",3)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",3),t.qZA(),t.YNc(39,_t,19,10,"div",4),t.qZA()(),t.YNc(40,vt,4,0,"div",5),t.YNc(41,ft,2,0,"div",6)),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,12,"HTML.Contract_List")),t.xp6(2),t.hij(" ",t.lcZ(6,14,"HTML.ContractEndLT60"),""),t.xp6(7),t.hij(" ",t.lcZ(13,16,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(17,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(21,20,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(25,22,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,24,"HTML.ContractEndDate")," "),t.xp6(4),t.hij(" ",t.lcZ(33,26,"HTML.ContractCode")," "),t.xp6(4),t.hij(" ",t.lcZ(37,28,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",i.contractsAll),t.xp6(1),t.Q6J("ngIf",i.contractsAll),t.xp6(1),t.Q6J("ngIf",!i.contractsAll))},dependencies:[d.sg,d.O5,p.rH,n.xw,n.Wh,n.yH,b.Tq,r.a8,c.Hw,S.d,k.Ou,L.gM,l.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});const At=function(a){return["/contracts/contract-add/",a]};function Zt(a,e){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&a){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(4,At,i.id))}}const Tt=function(a){return["/contracts/installment-list/",a]};function yt(a,e){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&a){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,Tt,i.id))}}function Ct(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8)(16,"div",9),t.YNc(17,Zt,4,6,"a",10),t.YNc(18,yt,4,6,"a",10),t.qZA()()()),2&a){const i=e.$implicit,s=t.oxw();t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.Oqu(i.unit_UnitNumber),t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",i.RCOEndDate," "),t.xp6(2),t.AsE(" (",i.RCOCode," / ",i.RCOSubCode,") "),t.xp6(2),t.hij(" ",i.RCOEjarCode," "),t.xp6(3),t.Q6J("ngIf",s.can("view_dash_ContractsGT60_showContract")),t.xp6(1),t.Q6J("ngIf",s.can("view_dash_ContractsGT60_showInstallments"))}}function xt(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"mat-card",0)(3,"pagination-controls",14),t.NdJ("pageChange",function(o){t.CHM(i);const h=t.oxw();return t.KtG(h.onPageChanged(o))}),t.qZA()()()()}}function Dt(a,e){1&a&&(t.TgZ(0,"div",15),t._UZ(1,"mat-spinner",16),t.qZA())}class E{constructor(e,i,s,o,h,g,_,v){this.appSettings=e,this.dialog=i,this.contractService=s,this.router=o,this.global=h,this.localStore=g,this.translateService=_,this.snackBar=v,this.curCOMId=T.N.comid,this.account=new y.n,this.count=4,this.userPerm=[],this.daysFrom=61,this.daysTo=365,this.settings=this.appSettings.settings}ngOnInit(){if(this.securityForApp=(new C.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getContracts()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}formatDate(){const e=new Date;let i=""+(e.getMonth()+1),s=""+e.getDate();const o=e.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),console.log([o,i,s].join("-")),[o,i,s].join("-")}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.contractService.getAllDelaydContracts(this.curCOMId,this.account.periorty,this.formatDate(),this.daysFrom,this.daysTo).subscribe(e=>this.contractsAll=e):0==this.curUserData.periorty?this.contractService.getDelaydContractsPerCustomer(this.curCOMId,this.account.periorty,this.account.customer_KeyField,this.formatDate(),this.daysFrom,this.daysTo).subscribe(e=>this.contractsAll=e):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.contractService.getDelaydContractsPerBranch(this.curCOMId,this.account.periorty,this.account.branch_KeyField,this.formatDate(),this.daysFrom,this.daysTo).subscribe(e=>this.contractsAll=e),"D"==this.securityForApp&&this.contractService.getDelaydContractsPerEmp(this.curCOMId,this.account.periorty,this.account.id,this.formatDate(),this.daysFrom,this.daysTo).subscribe(e=>this.contractsAll=e))}onPageChanged(e){this.page=e,this.getContracts(),window.scrollTo(0,0)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}E.\u0275fac=function(e){return new(e||E)(t.Y36(x.d),t.Y36(U.uw),t.Y36(m.W),t.Y36(p.F0),t.Y36(D.U),t.Y36(f.C),t.Y36(l.sK),t.Y36(P.ux))},E.\u0275cmp=t.Xpm({type:E,selectors:[["app-dash-contractsdelaydgt60"]],features:[t._Bn([m.W])],decls:42,vars:30,consts:[[1,"text-center"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",1)(9,"div",2)(10,"div",3)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",3)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",3)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",3)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",3)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",3)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",3)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",3),t.qZA(),t.YNc(39,Ct,19,10,"div",4),t.qZA()(),t.YNc(40,xt,4,0,"div",5),t.YNc(41,Dt,2,0,"div",6)),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,12,"HTML.Contract_List")),t.xp6(2),t.hij(" ",t.lcZ(6,14,"HTML.ContractEndGT60"),""),t.xp6(7),t.hij(" ",t.lcZ(13,16,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(17,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(21,20,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(25,22,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,24,"HTML.ContractEndDate")," "),t.xp6(4),t.hij(" ",t.lcZ(33,26,"HTML.ContractCode")," "),t.xp6(4),t.hij(" ",t.lcZ(37,28,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",i.contractsAll),t.xp6(1),t.Q6J("ngIf",i.contractsAll),t.xp6(1),t.Q6J("ngIf",!i.contractsAll))},dependencies:[d.sg,d.O5,p.rH,n.xw,n.Wh,n.yH,b.Tq,r.a8,c.Hw,S.d,k.Ou,L.gM,l.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});const bt=function(a){return["/contracts/contract-add/",a]};function Ut(a,e){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&a){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(4,bt,i.id))}}const Pt=function(a){return["/contracts/installment-list/",a]};function St(a,e){if(1&a&&(t.TgZ(0,"a",11),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&a){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,Pt,i.id))}}function Lt(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8)(16,"div",9),t.YNc(17,Ut,4,6,"a",10),t.YNc(18,St,4,6,"a",10),t.qZA()()()),2&a){const i=e.$implicit,s=t.oxw();t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.Oqu(i.unit_UnitNumber),t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",i.RCOEndDate," "),t.xp6(2),t.AsE(" (",i.RCOCode," / ",i.RCOSubCode,") "),t.xp6(2),t.hij(" ",i.RCOEjarCode," "),t.xp6(3),t.Q6J("ngIf",s.can("view_dash_ContractsAlarm_showContract")),t.xp6(1),t.Q6J("ngIf",s.can("view_dash_ContractsAlarm_showInstallments"))}}function Mt(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"mat-card",0)(3,"pagination-controls",14),t.NdJ("pageChange",function(o){t.CHM(i);const h=t.oxw();return t.KtG(h.onPageChanged(o))}),t.qZA()()()()}}function qt(a,e){1&a&&(t.TgZ(0,"div",15),t._UZ(1,"mat-spinner",16),t.qZA())}class H{constructor(e,i,s,o,h,g,_,v){this.appSettings=e,this.dialog=i,this.contractService=s,this.router=o,this.global=h,this.localStore=g,this.translateService=_,this.snackBar=v,this.curCOMId=T.N.comid,this.account=new y.n,this.count=4,this.userPerm=[],this.daysFrom=31,this.daysTo=60,this.settings=this.appSettings.settings}ngOnInit(){if(this.securityForApp=(new C.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getContracts()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}formatDate(){const e=new Date;let i=""+(e.getMonth()+1),s=""+e.getDate();const o=e.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),console.log([o,i,s].join("-")),[o,i,s].join("-")}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.contractService.getAllAlarmContracts(this.curCOMId,this.account.periorty,this.formatDate()).subscribe(e=>this.contractsAll=e):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.contractService.getAlarmContractsPerBranch(this.curCOMId,this.account.periorty,this.account.branch_KeyField,this.formatDate()).subscribe(e=>this.contractsAll=e),"D"==this.securityForApp&&this.contractService.getAlarmContractsPerEmp(this.curCOMId,this.account.periorty,this.account.id,this.formatDate()).subscribe(e=>this.contractsAll=e))}onPageChanged(e){this.page=e,this.getContracts(),window.scrollTo(0,0)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}H.\u0275fac=function(e){return new(e||H)(t.Y36(x.d),t.Y36(U.uw),t.Y36(m.W),t.Y36(p.F0),t.Y36(D.U),t.Y36(f.C),t.Y36(l.sK),t.Y36(P.ux))},H.\u0275cmp=t.Xpm({type:H,selectors:[["app-dash-contractalarm"]],features:[t._Bn([m.W])],decls:42,vars:30,consts:[[1,"text-center"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",1)(9,"div",2)(10,"div",3)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",3)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",3)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",3)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",3)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",3)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",3)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",3),t.qZA(),t.YNc(39,Lt,19,10,"div",4),t.qZA()(),t.YNc(40,Mt,4,0,"div",5),t.YNc(41,qt,2,0,"div",6)),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,12,"HTML.Contract_List")),t.xp6(2),t.hij(" ",t.lcZ(6,14,"HTML.ContractInAlarmTime"),""),t.xp6(7),t.hij(" ",t.lcZ(13,16,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(17,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(21,20,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(25,22,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,24,"HTML.ContractEndDate")," "),t.xp6(4),t.hij(" ",t.lcZ(33,26,"HTML.ContractCode")," "),t.xp6(4),t.hij(" ",t.lcZ(37,28,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",i.contractsAll),t.xp6(1),t.Q6J("ngIf",i.contractsAll),t.xp6(1),t.Q6J("ngIf",!i.contractsAll))},dependencies:[d.sg,d.O5,p.rH,n.xw,n.Wh,n.yH,b.Tq,r.a8,c.Hw,S.d,k.Ou,L.gM,l.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});var B=u(8910);const Ot=function(a){return["/payments/receivable-add/",a]};function wt(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8)(16,"div",9)(17,"a",10),t.ALo(18,"translate"),t.TgZ(19,"mat-icon"),t._uU(20,"edit"),t.qZA()()()()()),2&a){const i=e.$implicit;t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.Oqu(i.unit_UnitNumber),t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",i.PDODocDate," "),t.xp6(2),t.hij(" ",i.PDOValue," "),t.xp6(2),t.hij(" ",i.contract_EjarCode," "),t.xp6(3),t.s9C("matTooltip",t.lcZ(18,9,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(11,Ot,i.id))}}function It(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",11),t._uU(2,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",11),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8),t._uU(16),t.qZA()()),2&a){const i=t.oxw(2);t.xp6(4),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.totalValue," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.emptyString," ")}}function Nt(a,e){if(1&a&&(t.TgZ(0,"mat-card")(1,"div",1)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.qZA(),t._UZ(6,"mat-divider"),t.TgZ(7,"div",2)(8,"div",3)(9,"div",4)(10,"h2"),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"div",4)(14,"h2"),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"div",4)(18,"h2"),t._uU(19),t.ALo(20,"translate"),t.qZA()(),t.TgZ(21,"div",4)(22,"h2"),t._uU(23),t.ALo(24,"translate"),t.qZA()(),t.TgZ(25,"div",4)(26,"h2"),t._uU(27),t.ALo(28,"translate"),t.qZA()(),t.TgZ(29,"div",4)(30,"h2"),t._uU(31),t.ALo(32,"translate"),t.qZA()(),t.TgZ(33,"div",4)(34,"h2"),t._uU(35),t.ALo(36,"translate"),t.qZA()(),t._UZ(37,"div",4),t.qZA(),t.YNc(38,wt,21,13,"div",5),t.YNc(39,It,17,7,"div",6),t.qZA()()),2&a){const i=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,11,"HTML.ReceivableDoc_List")),t.xp6(2),t.hij(" ",i.dateToday,""),t.xp6(6),t.hij(" ",t.lcZ(12,13,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(16,15,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(20,17,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(24,19,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(28,21,"HTML.DocDate")," "),t.xp6(4),t.hij(" ",t.lcZ(32,23,"HTML.DocValue")," "),t.xp6(4),t.hij(" ",t.lcZ(36,25,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",i.documentsAll),t.xp6(1),t.Q6J("ngIf",i.can("view_dash_DailyWork_recievableTotal"))}}const Et=function(a){return["/payments/payable-add/",a]};function Ht(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8)(10,"div",9)(11,"a",10),t.ALo(12,"translate"),t.TgZ(13,"mat-icon"),t._uU(14,"edit"),t.qZA()()()()()),2&a){const i=e.$implicit;t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",i.PDODocDate," "),t.xp6(2),t.hij(" ",i.PDOValue," "),t.xp6(2),t.hij(" ",i.PDOPrintedCode," "),t.xp6(3),t.s9C("matTooltip",t.lcZ(12,6,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(8,Et,i.id))}}function jt(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",11),t._uU(2,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",11),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA()()),2&a){const i=t.oxw(2);t.xp6(4),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.totalValuePayable," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.emptyString," ")}}function Ft(a,e){if(1&a&&(t.TgZ(0,"mat-card")(1,"div",1)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.qZA(),t._UZ(6,"mat-divider"),t.TgZ(7,"div",2)(8,"div",3)(9,"div",4)(10,"h2"),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"div",4)(14,"h2"),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"div",4)(18,"h2"),t._uU(19),t.ALo(20,"translate"),t.qZA()(),t.TgZ(21,"div",4)(22,"h2"),t._uU(23),t.ALo(24,"translate"),t.qZA()(),t._UZ(25,"div",4),t.qZA(),t.YNc(26,Ht,15,10,"div",5),t.YNc(27,jt,11,4,"div",6),t.qZA()()),2&a){const i=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,8,"HTML.PayableDoc_List")),t.xp6(2),t.hij(" ",i.dateToday,""),t.xp6(6),t.hij(" ",t.lcZ(12,10,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(16,12,"HTML.DocDate")," "),t.xp6(4),t.hij(" ",t.lcZ(20,14,"HTML.DocValue")," "),t.xp6(4),t.hij(" ",t.lcZ(24,16,"HTML.DocPrintedNo")," "),t.xp6(3),t.Q6J("ngForOf",i.documentsAllPayable),t.xp6(1),t.Q6J("ngIf",i.can("view_dash_DailyWork_payableTotal"))}}class j{constructor(e,i,s,o,h,g,_,v,J){this.appSettings=e,this.dialog=i,this.paymentService=s,this.router=o,this.global=h,this.localStore=g,this.contractService=_,this.translateService=v,this.snackBar=J,this.curCOMId=T.N.comid,this.account=new y.n,this.userPerm=[],this.totalValue=0,this.totalValuePayable=0,this.tempValue=0,this.settings=this.appSettings.settings}ngOnInit(){if(this.emptyString=" ",this.securityForApp=(new C.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.global.me=JSON.parse(this.localStore.getItem("account")),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dateToday=this.formatDate(),this.getDocuments(),this.getDocumentsPayable()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}formatDate(){const e=new Date;let i=""+(e.getMonth()+1),s=""+e.getDate();const o=e.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),console.log([o,i,s].join("-")),[o,i,s].join("-")}getDocuments(){this.totalValue=0,this.documentsAll=null,this.curUserData.is_superuser?this.paymentService.getAllReceivableDocuments_OneDay(this.curCOMId,this.account.periorty,this.formatDate()).subscribe(e=>{this.documentsAll=e;for(let i=0;i<this.documentsAll.length;i++)this.tempValue=+this.documentsAll[i].PDOValue,this.totalValue+=this.tempValue}):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.paymentService.getAllReceivableDocumentsPerBranch_OneDay(this.curCOMId,this.account.periorty,this.curUserData.branch_KeyField,this.formatDate()).subscribe(e=>{this.documentsAll=e;for(let i=0;i<this.documentsAll.length;i++)this.tempValue=+this.documentsAll[i].PDOValue,this.totalValue+=this.tempValue}),"D"==this.securityForApp&&this.paymentService.getAllReceivableDocumentsPerEmp_OneDay(this.curCOMId,this.account.periorty,this.curUserData.id,this.formatDate()).subscribe(e=>{this.documentsAll=e;for(let i=0;i<this.documentsAll.length;i++)this.tempValue=+this.documentsAll[i].PDOValue,this.totalValue+=this.tempValue}))}getDocumentsPayable(){this.totalValuePayable=0,this.tempValue=0,this.documentsAllPayable=null,this.curUserData.is_superuser?this.paymentService.getAllPayableDocuments_OneDay(this.curCOMId,this.account.periorty,this.formatDate()).subscribe(e=>{this.documentsAllPayable=e;for(let i=0;i<this.documentsAllPayable.length;i++)this.tempValue=+this.documentsAllPayable[i].PDOValue,this.totalValuePayable+=this.tempValue}):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.paymentService.getAllPayableDocumentsPerBranch_OneDay(this.curCOMId,this.account.periorty,this.curUserData.branch_KeyField,this.formatDate()).subscribe(e=>{this.documentsAllPayable=e;for(let i=0;i<this.documentsAllPayable.length;i++)this.tempValue=+this.documentsAllPayable[i].PDOValue,this.totalValuePayable+=this.tempValue}),"D"==this.securityForApp&&this.paymentService.getAllPayableDocumentsPerEmp_OneDay(this.curCOMId,this.account.periorty,this.curUserData.id,this.formatDate()).subscribe(e=>{this.documentsAllPayable=e;for(let i=0;i<this.documentsAllPayable.length;i++)this.tempValue=+this.documentsAllPayable[i].PDOValue,this.totalValuePayable+=this.tempValue}))}}j.\u0275fac=function(e){return new(e||j)(t.Y36(x.d),t.Y36(U.uw),t.Y36(B.c),t.Y36(p.F0),t.Y36(D.U),t.Y36(f.C),t.Y36(m.W),t.Y36(l.sK),t.Y36(P.ux))},j.\u0275cmp=t.Xpm({type:j,selectors:[["app-dash-dailywork"]],decls:4,vars:2,consts:[[4,"ngIf"],[1,"text-center"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["class","mat-mdc-row",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],[1,"mat-mdc-cell","primary-text","notifbold"]],template:function(e,i){1&e&&(t.YNc(0,Nt,40,27,"mat-card",0),t._UZ(1,"mat-divider")(2,"br"),t.YNc(3,Ft,28,18,"mat-card",0)),2&e&&(t.Q6J("ngIf",i.can("view_dash_DailyWork_recievable")),t.xp6(3),t.Q6J("ngIf",i.can("view_dash_DailyWork_payable")))},dependencies:[d.sg,d.O5,p.rH,b.Tq,r.a8,c.Hw,S.d,L.gM,l.X$],styles:[".user-name[_ngcontent-%COMP%]{padding:0 12px;font-weight:400}.user-content[_ngcontent-%COMP%]{padding:10px}.user-content[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{position:relative}.user-content[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:80px;height:80px}.user-content[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]   img.blocked[_ngcontent-%COMP%]{opacity:.5}.user-content[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content[_ngcontent-%COMP%]   .mat-mdc-slide-toggle[_ngcontent-%COMP%]{margin-top:15px}.user-content[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{padding:2px 10px}.user-content[_ngcontent-%COMP%]   .user-details.blocked[_ngcontent-%COMP%]{opacity:.5}.user-search[_ngcontent-%COMP%]{width:0;overflow:hidden;transition:.3s}.user-search[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%!important;text-align:center!important}.user-search[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{min-height:36px;padding:8px 0!important}.user-search[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%]{display:none}.user-search[_ngcontent-%COMP%]   .mat-mdc-input-element[_ngcontent-%COMP%]{text-align:center}.user-search.show[_ngcontent-%COMP%]{width:100%;overflow:visible}.user-spinner[_ngcontent-%COMP%]{position:absolute;inset:0}.mat-mdc-card[_ngcontent-%COMP%]{overflow:hidden}.ver[_ngcontent-%COMP%]{height:96px}.notifbold[_ngcontent-%COMP%]{font-weight:700}"]});const Yt=function(a){return["/payments/receivable-add/",a]};function Vt(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8),t._uU(16),t.qZA(),t.TgZ(17,"div",8)(18,"div",9)(19,"a",10),t.ALo(20,"translate"),t.TgZ(21,"mat-icon"),t._uU(22,"edit"),t.qZA()()()()()),2&a){const i=e.$implicit;t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.Oqu(i.unit_UnitNumber),t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",i.PDODocDate," "),t.xp6(2),t.hij(" ",i.PDOValue," "),t.xp6(2),t.hij(" ",i.contract_EjarCode," "),t.xp6(2),t.hij(" ",i.PDOPayTypeDisplay," "),t.xp6(3),t.s9C("matTooltip",t.lcZ(20,10,"BTN.EDIT")),t.Q6J("routerLink",t.VKq(12,Yt,i.id))}}function kt(a,e){if(1&a&&(t.TgZ(0,"div",7)(1,"div",11),t._uU(2,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",8),t._uU(8),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",11),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",8),t._uU(16),t.qZA()()),2&a){const i=t.oxw(2);t.xp6(4),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.totalValue," "),t.xp6(2),t.hij(" ",i.emptyString," "),t.xp6(2),t.hij(" ",i.emptyString," ")}}function Rt(a,e){if(1&a&&(t.TgZ(0,"mat-card")(1,"div",1)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t._UZ(5,"mat-divider"),t.TgZ(6,"div",2)(7,"div",3)(8,"div",4)(9,"h3"),t._uU(10),t.ALo(11,"translate"),t.qZA()(),t.TgZ(12,"div",4)(13,"h3"),t._uU(14),t.ALo(15,"translate"),t.qZA()(),t.TgZ(16,"div",4)(17,"h3"),t._uU(18),t.ALo(19,"translate"),t.qZA()(),t.TgZ(20,"div",4)(21,"h3"),t._uU(22),t.ALo(23,"translate"),t.qZA()(),t.TgZ(24,"div",4)(25,"h3"),t._uU(26),t.ALo(27,"translate"),t.qZA()(),t.TgZ(28,"div",4)(29,"h3"),t._uU(30),t.ALo(31,"translate"),t.qZA()(),t.TgZ(32,"div",4)(33,"h3"),t._uU(34),t.ALo(35,"translate"),t.qZA()(),t.TgZ(36,"div",4)(37,"h3"),t._uU(38),t.ALo(39,"translate"),t.qZA()(),t._UZ(40,"div",4),t.qZA(),t.YNc(41,Vt,23,14,"div",5),t.YNc(42,kt,17,7,"div",6),t.qZA()()),2&a){const i=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,11,"HTML.ReceivableDoc_ValueNotInAccount_List")),t.xp6(7),t.hij(" ",t.lcZ(11,13,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(15,15,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(19,17,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(23,19,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(27,21,"HTML.DocDate")," "),t.xp6(4),t.hij(" ",t.lcZ(31,23,"HTML.DocValue")," "),t.xp6(4),t.hij(" ",t.lcZ(35,25,"HTML.ContractEjarCode")," "),t.xp6(4),t.hij(" ",t.lcZ(39,27,"HTML.DocPayType")," "),t.xp6(3),t.Q6J("ngForOf",i.documentsAll),t.xp6(1),t.Q6J("ngIf",i.can("view_dash_DailyWork_recievableTotal"))}}class F{constructor(e,i,s,o,h,g,_,v,J){this.appSettings=e,this.dialog=i,this.paymentService=s,this.router=o,this.global=h,this.localStore=g,this.contractService=_,this.translateService=v,this.snackBar=J,this.curCOMId=T.N.comid,this.account=new y.n,this.userPerm=[],this.totalValue=0,this.totalValuePayable=0,this.tempValue=0,this.settings=this.appSettings.settings}ngOnInit(){if(this.emptyString=" ",this.securityForApp=(new C.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.global.me=JSON.parse(this.localStore.getItem("account")),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dateToday=this.formatDate(),this.getDocuments()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}formatDate(){const e=new Date;let i=""+(e.getMonth()+1),s=""+e.getDate();const o=e.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),console.log([o,i,s].join("-")),[o,i,s].join("-")}getDocuments(){this.totalValue=0,this.documentsAll=null,this.curUserData.is_superuser?this.paymentService.getAllReceivableDocuments_valueNotInAccount(this.curCOMId,this.account.periorty).subscribe(e=>{this.documentsAll=e;for(let i=0;i<this.documentsAll.length;i++)this.tempValue=+this.documentsAll[i].PDOValue,this.totalValue+=this.tempValue}):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.paymentService.getAllReceivableDocumentsPerBranch_valueNotInAccount(this.curCOMId,this.account.periorty,this.curUserData.branch_KeyField).subscribe(e=>{this.documentsAll=e;for(let i=0;i<this.documentsAll.length;i++)this.tempValue=+this.documentsAll[i].PDOValue,this.totalValue+=this.tempValue}),"D"==this.securityForApp&&this.paymentService.getAllReceivableDocumentsPerEmp_valueNotInAccount(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(e=>{this.documentsAll=e;for(let i=0;i<this.documentsAll.length;i++)this.tempValue=+this.documentsAll[i].PDOValue,this.totalValue+=this.tempValue}))}}function Jt(a,e){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-customerdebt"),t.qZA())}function Bt(a,e){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-contractsdelayd"),t.qZA())}function Qt(a,e){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-contractsdelaydlt60"),t.qZA())}function Gt(a,e){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-contractsdelaydgt60"),t.qZA())}function Kt(a,e){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-contractalarm"),t.qZA())}function $t(a,e){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-dailywork"),t.qZA())}function Wt(a,e){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-dash-docvalue-notinaccount"),t.qZA())}F.\u0275fac=function(e){return new(e||F)(t.Y36(x.d),t.Y36(U.uw),t.Y36(B.c),t.Y36(p.F0),t.Y36(D.U),t.Y36(f.C),t.Y36(m.W),t.Y36(l.sK),t.Y36(P.ux))},F.\u0275cmp=t.Xpm({type:F,selectors:[["app-dash-docvalue-notinaccount"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-center"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["class","mat-mdc-row",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],[1,"mat-mdc-cell","primary-text","notifbold"]],template:function(e,i){1&e&&t.YNc(0,Rt,43,29,"mat-card",0),2&e&&t.Q6J("ngIf",i.can("view_dash_DocNotInAccount"))},dependencies:[d.sg,d.O5,p.rH,b.Tq,r.a8,c.Hw,S.d,L.gM,l.X$]});class Y{constructor(e){this.dataService=e,this.displayedData=""}ngOnInit(){this.dataSubscribe=this.dataService.totalInfo.subscribe(e=>{this.setValueAfterOnInit(e)})}ngOnDestroy(){this.dataSubscribe.unsubscribe()}setValueAfterOnInit(e){this.displayedData=e.page}}Y.\u0275fac=function(e){return new(e||Y)(t.Y36(A.n))},Y.\u0275cmp=t.Xpm({type:Y,selectors:[["app-dashboard"]],decls:8,vars:7,consts:[[4,"ngIf"]],template:function(e,i){1&e&&(t._UZ(0,"app-tiles"),t.YNc(1,Jt,2,0,"div",0),t.YNc(2,Bt,2,0,"div",0),t.YNc(3,Qt,2,0,"div",0),t.YNc(4,Gt,2,0,"div",0),t.YNc(5,Kt,2,0,"div",0),t.YNc(6,$t,2,0,"div",0),t.YNc(7,Wt,2,0,"div",0)),2&e&&(t.xp6(1),t.Q6J("ngIf","CustomerDebt"==i.displayedData),t.xp6(1),t.Q6J("ngIf","Contracts"==i.displayedData),t.xp6(1),t.Q6J("ngIf","ContractsLT60"==i.displayedData),t.xp6(1),t.Q6J("ngIf","ContractsGT60"==i.displayedData),t.xp6(1),t.Q6J("ngIf","ContractsAlarm"==i.displayedData),t.xp6(1),t.Q6J("ngIf","DailyWork"==i.displayedData),t.xp6(1),t.Q6J("ngIf","DocValueInAccount"==i.displayedData))},dependencies:[d.O5,O,w,I,N,E,H,j,F],styles:["table[_ngcontent-%COMP%]{width:100%}.make-gold[_ngcontent-%COMP%]{background-color:gold}.make-yellow[_ngcontent-%COMP%]{background-color:#ff4500}.make-yellowgreen[_ngcontent-%COMP%]{background-color:#ad7020}"]});const Q=[{path:"",component:Y,pathMatch:"full"}];class M{}M.\u0275fac=function(e){return new(e||M)},M.\u0275mod=t.oAB({type:M}),M.\u0275inj=t.cJS({imports:[d.ez,p.Bz.forChild(Q),q.m,R.a4]})},8910:(G,V,u)=>{u.d(V,{c:()=>A});var d=u(5521),p=u(2340),q=u(4650),R=u(529),t=u(7465);class A{constructor(n,r){this.http=n,this.globalServ=r,this.baseUrl=(new d.P).api_Ip,this.secondPartUrl=(new d.P).api_constant,this.curCOMId=p.N.comid}getMaxReceivableCode(n,r){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/getMaxCode/?M="+n+"&type=R",this.globalServ.getAuthHeaders())}getMaxPayableCode(n,r){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/getMaxCode/?M="+n+"&type=P",this.globalServ.getAuthHeaders())}getAllReceivableDocuments(n,r){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&M="+n+"&C="+r,this.globalServ.getAuthHeaders())}getAllReceivableDocuments_valueNotInAccount(n,r){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&notinaccount=T&M="+n+"&C="+r,this.globalServ.getAuthHeaders())}getAllReceivableDocuments_OneDay(n,r,c){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&M="+n+"&C="+r+"&fromdate="+c,this.globalServ.getAuthHeaders())}getAllReceivableDocuments_Period(n,r,c,l){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&M="+n+"&C="+r+"&fromdate="+c+"&todate="+l,this.globalServ.getAuthHeaders())}getAllReceivableDocumentsPerBranch(n,r,c){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&M="+n+"&C="+r+"&branch="+c,this.globalServ.getAuthHeaders())}getAllReceivableDocumentsPerBranch_valueNotInAccount(n,r,c){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&notinaccount=T&M="+n+"&C="+r+"&branch="+c,this.globalServ.getAuthHeaders())}getAllReceivableDocumentsPerBranch_OneDay(n,r,c,l){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&M="+n+"&C="+r+"&branch="+c+"&fromdate="+l,this.globalServ.getAuthHeaders())}getAllReceivableDocumentsPerBranch_Period(n,r,c,l,Z){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&M="+n+"&C="+r+"&branch="+c+"&fromdate="+l+"&todate="+Z,this.globalServ.getAuthHeaders())}getAllReceivableDocumentsPerEmp(n,r,c){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&M="+n+"&C="+r+"&emp="+c,this.globalServ.getAuthHeaders())}getAllReceivableDocumentsPerEmp_valueNotInAccount(n,r,c){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&notinaccount=T&M="+n+"&C="+r+"&emp="+c,this.globalServ.getAuthHeaders())}getAllReceivableDocumentsPerEmp_OneDay(n,r,c,l){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&M="+n+"&C="+r+"&emp="+c+"&fromdate="+l,this.globalServ.getAuthHeaders())}getAllReceivableDocumentsPerEmp_Period(n,r,c,l,Z){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&M="+n+"&C="+r+"&emp="+c+"&fromdate="+l+"&todate="+Z,this.globalServ.getAuthHeaders())}getAllPayableDocuments(n,r){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=P&M="+n+"&C="+r,this.globalServ.getAuthHeaders())}getAllPayableDocuments_OneDay(n,r,c){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=P&M="+n+"&C="+r+"&fromdate="+c,this.globalServ.getAuthHeaders())}getAllPayableDocuments_Period(n,r,c,l){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=P&M="+n+"&C="+r+"&fromdate="+c+"&todate="+l,this.globalServ.getAuthHeaders())}getAllPayableDocumentsPerBranch(n,r,c){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=P&M="+n+"&C="+r+"&branch="+c,this.globalServ.getAuthHeaders())}getAllPayableDocumentsPerBranch_OneDay(n,r,c,l){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=P&M="+n+"&C="+r+"&branch="+c+"&fromdate="+l,this.globalServ.getAuthHeaders())}getAllPayableDocumentsPerBranch_Period(n,r,c,l,Z){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=P&M="+n+"&C="+r+"&branch="+c+"&fromdate="+l+"&todate="+Z,this.globalServ.getAuthHeaders())}getAllPayableDocumentsPerEmp(n,r,c){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=P&M="+n+"&C="+r+"&emp="+c,this.globalServ.getAuthHeaders())}getAllPayableDocumentsPerEmp_OneDay(n,r,c,l){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=P&M="+n+"&C="+r+"&emp="+c+"&fromdate="+l,this.globalServ.getAuthHeaders())}getAllPayableDocumentsPerEmp_Period(n,r,c,l,Z){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=P&M="+n+"&C="+r+"&emp="+c+"&fromdate="+l+"&todate="+Z,this.globalServ.getAuthHeaders())}deleteDocument(n){return this.http.delete(this.baseUrl+this.secondPartUrl+"contracts/paydoc/"+n,this.globalServ.getAuthHeaders())}getOneDocs(n){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/"+n,this.globalServ.getAuthHeaders())}addDoc(n){var r=this.baseUrl+this.secondPartUrl+"contracts/paydoc/";return console.log("--addDoc URL:: "+r),this.http.post(r,n,this.globalServ.getAuthHeaders_for_files())}editDoc(n){return this.http.patch(this.baseUrl+this.secondPartUrl+"contracts/paydoc/"+n.id+"/",n,this.globalServ.getAuthHeaders_for_files())}}A.\u0275fac=function(n){return new(n||A)(q.LFG(R.eN),q.LFG(t.U))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}}]);