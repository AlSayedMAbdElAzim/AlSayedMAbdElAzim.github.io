(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[640],{6640:(le,ut,b)=>{"use strict";b.r(ut),b.d(ut,{ContractsModule:()=>Bt,routes:()=>Le});var C=b(6895),y=b(5412),d=b(4006),B=b(8955),t=b(4650),I=b(6002),N=b(5298),h=b(3705),R=b(7009),T=b(1576),q=b(3238),w=b(4859),Z=b(4144),v=b(9549),D=b(4385),O=b(3081);function nt(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.USERNAMEREQ")))}function j(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength")))}function ot(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.EmailREQ")))}function _t(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.InvalidEmail")))}function at(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.FirstNameREQ")))}function vt(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength")))}function ne(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.LastNameREQ")))}function oe(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength")))}function ce(o,e){if(1&o&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function ue(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Mobile is required"),t.qZA())}function de(o,e){if(1&o&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function me(o,e){if(1&o&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.UNTUnitNumber," ")}}function pe(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.PasswordREQ")))}function he(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength6")))}function ae(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.ConfirmPasswordREQ")))}function re(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.MismatchPassword")))}function ge(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.registerForm.value)("disabled",!i.registerForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,3,"BTN.SAVE"))}}class Ct{constructor(e,i,n,a,l,p,f){this.dialogRef=e,this.data=i,this.atlasService=n,this.localStore=a,this.unitsService=l,this.snackBar=p,this.fb=f,this.userPerm=[],this.AllBranches=[],this.AllBuilding=[],this.AllUnitsForBuilding=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.curperiorty=this.data.periorty,this.registerForm=this.fb.group({username:["",d.kI.compose([d.kI.required,d.kI.minLength(3)])],first_name:["",d.kI.compose([d.kI.required,d.kI.minLength(2)])],last_name:["",d.kI.compose([d.kI.required,d.kI.minLength(2)])],email:["",d.kI.compose([d.kI.required,B.Le])],branch_KeyField:[null,d.kI.required],UserMobile:[null,d.kI.required],build_KeyField:[null,d.kI.required],unit_KeyField:[null,d.kI.required],is_customer:"T",password:["",d.kI.required],confirmPassword:["",d.kI.required]},{validator:(0,B.zi)("password","confirmPassword")}),this.getAllBranches(this.curCOMId,this.curperiorty)}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.curperiorty,e.value)}getBuildingPerBranch(e,i,n){this.unitsService.getBuildingsPerBranch(e,i,n).subscribe(a=>{this.AllBuilding=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(e){this.unitsService.getOneBuilding(e.value).subscribe(i=>{this.getUnitsPerBuilding(this.curCOMId,this.curperiorty,e.value,"E")},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuilding(e,i,n,a){this.unitsService.getAllUnitsPerBuilding(e,i,n,a).subscribe(l=>{this.AllUnitsForBuilding=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0644\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onSave(){console.log("===***Press Save button***==="),this.action="Post",this.registerForm.valid&&this.dialogRef.close({event:this.action,data:this.registerForm})}close(){console.log("===***Press Close button***==="),this.action="Cancel",this.dialogRef.close({event:this.action})}}Ct.\u0275fac=function(e){return new(e||Ct)(t.Y36(y.so),t.Y36(y.WI),t.Y36(I.Z),t.Y36(N.C),t.Y36(h.X),t.Y36(R.ux),t.Y36(d.QS))},Ct.\u0275cmp=t.Xpm({type:Ct,selectors:[["app-customers-dialog"]],decls:110,vars:81,consts:[["mat-dialog-title",""],[1,"user-form",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","username","required","",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","email","required","",3,"placeholder"],["matInput","","formControlName","first_name","required","",3,"placeholder"],["matInput","","formControlName","last_name","required","",3,"placeholder"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","UserMobile","required",""],["formControlName","build_KeyField","id","build_OneOpSel",3,"placeholder","selectionChange"],["formControlName","unit_KeyField","id","unit_OneOpSel",3,"placeholder"],["matInput","","formControlName","password","type","password","minlength","6","required","",3,"placeholder"],["matInput","","formControlName","confirmPassword","type","password","required","",3,"placeholder"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",7),t.ALo(13,"translate"),t.YNc(14,nt,3,3,"mat-error",8),t.YNc(15,j,3,3,"mat-error",8),t.qZA()(),t.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",9),t.ALo(22,"translate"),t.YNc(23,ot,3,3,"mat-error",8),t.YNc(24,_t,3,3,"mat-error",8),t.qZA()()(),t.TgZ(25,"div",4)(26,"div",5)(27,"mat-form-field",6)(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",10),t.ALo(32,"translate"),t.YNc(33,at,3,3,"mat-error",8),t.YNc(34,vt,3,3,"mat-error",8),t.qZA()(),t.TgZ(35,"div",5)(36,"mat-form-field",6)(37,"mat-label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"input",11),t.ALo(41,"translate"),t.YNc(42,ne,3,3,"mat-error",8),t.YNc(43,oe,3,3,"mat-error",8),t.qZA()()(),t.TgZ(44,"div",4)(45,"div",5)(46,"mat-form-field",6)(47,"mat-label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"mat-select",12),t.NdJ("selectionChange",function(a){return i.getBuildings(a)}),t.ALo(51,"translate"),t.TgZ(52,"mat-option",13),t._uU(53,"-"),t.qZA(),t.YNc(54,ce,2,2,"mat-option",14),t.qZA()()(),t.TgZ(55,"div",5)(56,"mat-form-field",6)(57,"mat-label"),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"mat-hint"),t._uU(61,"966505602221"),t.qZA(),t._UZ(62,"input",15),t.YNc(63,ue,2,0,"mat-error",8),t.qZA()()(),t.TgZ(64,"div",4)(65,"div",5)(66,"mat-form-field",6)(67,"mat-label"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"mat-select",16),t.NdJ("selectionChange",function(a){return i.readBuilding(a)}),t.ALo(71,"translate"),t.TgZ(72,"mat-option",13),t._uU(73,"-"),t.qZA(),t.YNc(74,de,2,2,"mat-option",14),t.qZA()()(),t.TgZ(75,"div",5)(76,"mat-form-field",6)(77,"mat-label"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"mat-select",17),t.ALo(81,"translate"),t.TgZ(82,"mat-option",13),t._uU(83,"-"),t.qZA(),t.YNc(84,me,2,2,"mat-option",14),t.qZA()()()(),t.TgZ(85,"div",4)(86,"div",5)(87,"mat-form-field",6)(88,"mat-label"),t._uU(89),t.ALo(90,"translate"),t.qZA(),t._UZ(91,"input",18),t.ALo(92,"translate"),t.YNc(93,pe,3,3,"mat-error",8),t.YNc(94,he,3,3,"mat-error",8),t.qZA()(),t.TgZ(95,"div",5)(96,"mat-form-field",6)(97,"mat-label"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t._UZ(100,"input",19),t.ALo(101,"translate"),t.YNc(102,ae,3,3,"mat-error",8),t.YNc(103,re,3,3,"mat-error",8),t.qZA()()()()(),t.TgZ(104,"div",20)(105,"div",4),t.YNc(106,ge,4,5,"button",21),t.TgZ(107,"button",22),t.NdJ("click",function(){return i.close()}),t._uU(108),t.ALo(109,"translate"),t.qZA()()()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,39,"MESSAGE.RegisterMsg")),t.xp6(2),t.Q6J("formGroup",i.registerForm),t.xp6(7),t.Oqu(t.lcZ(11,41,"HTML.USERNAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(13,43,"HTML.USERNAME")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.username.errors?null:i.registerForm.controls.username.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.username.hasError("minlength")),t.xp6(4),t.Oqu(t.lcZ(20,45,"HTML.EMAIL")),t.xp6(2),t.s9C("placeholder",t.lcZ(22,47,"HTML.EMAIL")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.email.errors?null:i.registerForm.controls.email.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.email.hasError("invalidEmail")),t.xp6(5),t.Oqu(t.lcZ(30,49,"HTML.FIRST_NAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(32,51,"HTML.FIRST_NAME")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.first_name.errors?null:i.registerForm.controls.first_name.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.first_name.hasError("minlength")),t.xp6(4),t.Oqu(t.lcZ(39,53,"HTML.LAST_NAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(41,55,"HTML.LAST_NAME")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.last_name.errors?null:i.registerForm.controls.last_name.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.last_name.hasError("minlength")),t.xp6(5),t.hij(" ",t.lcZ(49,57,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(51,59,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.Oqu(t.lcZ(59,61,"HTML.MOBILE")),t.xp6(5),t.Q6J("ngIf",null==i.registerForm.controls.UserMobile.errors?null:i.registerForm.controls.UserMobile.errors.required),t.xp6(5),t.hij(" ",t.lcZ(69,63,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(71,65,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuilding),t.xp6(4),t.hij(" ",t.lcZ(79,67,"HTML.UNIT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(81,69,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnitsForBuilding),t.xp6(5),t.Oqu(t.lcZ(90,71,"HTML.PASSWORD")),t.xp6(2),t.s9C("placeholder",t.lcZ(92,73,"HTML.PASSWORD")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.password.errors?null:i.registerForm.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.password.hasError("minlength")),t.xp6(4),t.Oqu(t.lcZ(99,75,"HTML.ConfirmPassword")),t.xp6(2),t.s9C("placeholder",t.lcZ(101,77,"HTML.ConfirmPassword")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.confirmPassword.errors?null:i.registerForm.controls.confirmPassword.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.confirmPassword.hasError("mismatchedPasswords")),t.xp6(3),t.Q6J("ngIf",i.can("add_tenant")),t.xp6(2),t.Oqu(t.lcZ(109,79,"BTN.CANCEL")))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.wO,C.sg,C.O5,d.sg,d.u,T.xw,T.Wh,T.yH,q.ey,w.lW,y.ZT,y.uh,y.xY,y.H8,Z.Nt,v.KE,v.hX,v.bx,v.TO,D.gD,O.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:280px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});class ft{}var lt=b(5783),ct=b(5726),L=b(5521),E=b(2887),x=b(4459),H=b(8959),mt=b(7298),it=b(1182),P=b(9132),tt=b(7465),pt=b(4165),Kt=b(3071),et=b(4333),dt=b(811),W=b(3546),$=b(7392),X=b(4850),yt=b(1572),rt=b(266),Zt=b(1419);function _e(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-button-toggle",22),t.NdJ("click",function(){t.CHM(i);const a=t.oxw(2);return t.KtG(a.gotoNewTenantFullData())}),t.TgZ(1,"mat-icon"),t._uU(2,"person_add"),t.qZA()()}}function se(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"mat-button-toggle-group",10,11),t.YNc(5,_e,3,0,"mat-button-toggle",12),t.TgZ(6,"mat-button-toggle",13)(7,"mat-icon"),t._uU(8,"search"),t.qZA()()()(),t.TgZ(9,"form",14)(10,"mat-form-field",15)(11,"input",16),t.NdJ("ngModelChange",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.searchText=a)}),t.ALo(12,"translate"),t.qZA()()(),t.TgZ(13,"div",17)(14,"mat-button-toggle-group",18,19)(16,"mat-button-toggle",20)(17,"mat-icon"),t._uU(18,"view_list"),t.qZA()(),t.TgZ(19,"mat-button-toggle",21)(20,"mat-icon"),t._uU(21,"view_module"),t.qZA()()()()()()}if(2&o){const i=t.MAs(4),n=t.oxw();t.xp6(5),t.Q6J("ngIf",n.can("add_tenant")),t.xp6(4),t.ekj("show","search"==i.value),t.xp6(2),t.s9C("placeholder",t.lcZ(12,5,"HTML.SEARCH_TENANT_AnyValue")),t.Q6J("ngModel",n.searchText)}}const Dt=function(o){return["/contracts/tenant-add/",o]};function ht(o,e){if(1&o&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,Dt,i.id))}}function Jt(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.removeTenant(a.id,a.Userid))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}const Ce=function(o){return["/contracts/statements-list/",o]};function Tt(o,e){if(1&o&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.Statements")),t.Q6J("routerLink",t.VKq(4,Ce,i.id))}}const fe=function(o){return["/contracts/contract-list/",o]};function c(o,e){if(1&o&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"auto_stories"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.ContractForTenant")),t.Q6J("routerLink",t.VKq(4,fe,i.id))}}function r(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.openContractForTenant(a.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"auto_stories"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.ContractForTenant"))}function s(o,e){if(1&o&&(t.TgZ(0,"div",23)(1,"div",24),t._uU(2),t.qZA(),t.TgZ(3,"div",24),t._uU(4),t.qZA(),t.TgZ(5,"div",24),t._uU(6),t.qZA(),t.TgZ(7,"div",24),t._uU(8),t.qZA(),t.TgZ(9,"div",24),t._uU(10),t.qZA(),t.TgZ(11,"div",24),t._uU(12),t.qZA(),t.TgZ(13,"div",24)(14,"mat-icon",25),t._uU(15),t.qZA()(),t.TgZ(16,"div",24)(17,"div",26),t.YNc(18,ht,4,6,"a",27),t.YNc(19,Jt,4,3,"button",28),t.YNc(20,Tt,4,6,"a",27),t.YNc(21,c,4,6,"a",27),t.YNc(22,r,4,3,"button",28),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.CUSName),t.xp6(2),t.Oqu(i.CUSMobile),t.xp6(2),t.hij(" ",i.build_Name," "),t.xp6(2),t.hij(" ",i.unit_Name," "),t.xp6(2),t.hij(" ",i.job_Name," "),t.xp6(2),t.hij(" ",i.workplace_Name," "),t.xp6(3),t.Oqu("T"==i.CUSActive?"check_box":"check_box_outline_blank"),t.xp6(3),t.Q6J("ngIf",n.can("change_tenant")||n.can("view_onetenant")||0==n.account.periorty&&"T"!==n.account.userDataConfirmed),t.xp6(1),t.Q6J("ngIf",n.can("delete_tenant")),t.xp6(1),t.Q6J("ngIf",n.can("view_tenantstatements")),t.xp6(1),t.Q6J("ngIf",n.can("view_contractfortenant")),t.xp6(1),t.Q6J("ngIf",n.can("view_contractfortenant"))}}function u(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",31)(1,"div",32)(2,"mat-card",33)(3,"pagination-controls",34),t.NdJ("pageChange",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(a))}),t.qZA()()()()}}function m(o,e){1&o&&(t.TgZ(0,"div",35),t._UZ(1,"mat-spinner",36),t.qZA())}const g=function(o,e){return{itemsPerPage:o,currentPage:e}};class _{constructor(e,i,n,a,l,p,f,A,S,U,M,K){this.transferService=e,this.appSettings=i,this.dialog=n,this.usersService=a,this.router=l,this.contractService=p,this.global=f,this.localStore=A,this.settingService=S,this.snackBar=U,this.translateService=M,this.userService=K,this.curTenant=new ft,this.account=new lt.n,this.count=8,this.defaultCusImage=this.noImageUrl,this.CusImageToUpload=null,this.userPerm=[],this.editTenantCodeStatus=(new x.$).getEditTenantCodeStatus(),this.editCode=!0,this.settings=this.appSettings.settings,this.baseUrl=this.appSettings.settings.url,this.secondPartUrl=new L.P(this.baseUrl).api_constant,this.noImageUrl=new L.P(this.baseUrl).noImage}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultCusImage=n.target.result},i.readAsDataURL(this.CusImageToUpload)}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.getParamValue(this.curCOMId,this.account.periorty,this.editTenantCodeStatus),this.prepareMsgLanguage(),this.getTenants()}}getParamValue(e,i,n){this.settingService.getValueForCode(e,i,n).subscribe(a=>{n==this.editTenantCodeStatus&&(this.editTenantCodeValue=a[0].APAValue)},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getTenants(){this.users=null,this.curUserData.is_superuser?this.usersService.getCustomerPerSelfType(this.curCOMId,this.account.periorty,"P").subscribe(e=>this.users=e):0==this.curUserData.periorty?this.usersService.getCustomerPerUserPerSelfType(this.curCOMId,this.account.periorty,this.curUserData.id,"P").subscribe(e=>this.users=e):("N"==this.securityForApp&&(this.curBranchID=this.curUserData.branch_KeyField??0,this.usersService.getCustomersPerBranchPerSelfType(this.curCOMId,this.account.periorty,this.curBranchID,"P").subscribe(e=>this.users=e)),"D"==this.securityForApp&&this.usersService.getCustomersPerEmployeePerSelfType(this.curCOMId,this.account.periorty,this.curUserData.id,"P").subscribe(e=>this.users=e))}addTenant(e){this.usersService.addOneCustomer(e).subscribe(i=>this.getTenants())}updateTenant(e){this.usersService.editCustomer(e,this.CusImageToUpload,this.CusImageToUpload,this.curUserData.is_employee).subscribe(i=>this.getTenants())}deleteTenant(e){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.usersService.deleteCustomer(e.id).subscribe(a=>this.getTenants())})}removeTenant(e,i){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(a=>{a&&this.usersService.deleteCustomer(e).subscribe(l=>{this.userService.deleteOneUser(i).subscribe(p=>{}),this.getTenants()})})}onPageChanged(e){this.page=e,this.getTenants(),window.scrollTo(0,0)}openContractForTenant(e){this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,e).subscribe(i=>{this.router.navigate("T"==i[0].RCOContractMultiUnits?["/contracts/contractComplex-list/"+e]:["/contracts/contract-list/"+e])})}gotoTenantDisplay(e){console.log("===**gotoTenantDisplay**=== "+e),this.router.navigate(["/contracts/tenant-add/"+e])}gotoNewTenantFullData(){this.transferService.setMessage({editTenantCode:this.editTenantCodeValue}),this.router.navigate(["/contracts/tenant-add/"])}gotoNewTenant(){this.dialog.open(Ct,{data:{periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(i=>{console.log("=====result.event:: "+i.event),"Cancel"==i.event||"Post"==i.event&&this.userService.registerTenant_with_lastName(i.data).subscribe(n=>{console.log("TenantID:: "+n.id),this.getTenants(),this.snackBar.open(this.registeredMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.can("view_onetenant")&&this.gotoTenantDisplay(n.id)},n=>{console.log("error",n),this.snackBar.open(this.notRegisteredMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})})}openTenantDialog(e){this.dialog.open(Ct,{data:e}).afterClosed().subscribe(n=>{n?(console.log("=====if user True:: =============="),console.log(n),this.curTenant=new ft,console.log(this.curTenant),this.fromUserToCustomer(n),console.log(this.curTenant),n.id?this.updateTenant(this.curTenant):this.addTenant(this.curTenant)):console.log("=====if user False:: ==============")})}fromUserToCustomer(e){this.curTenant.id=e.id,this.curTenant.RowDelete=e.settings.isDeleted?1:0,this.curTenant.CUSCode=e.code,this.curTenant.CUSPic=e.image,this.curTenant.CUSGender=e.profile.gender,console.log("====Date===="),console.log(e.profile.birthday),this.curTenant.CUSBirthDate=e.profile.birthday,this.curTenant.CUSMobile=e.mobile,this.curTenant.CUSEmail=e.contacts.email,this.curTenant.CUSActive=e.settings.isActive?"T":"F",this.curTenant.CUSAddress=e.contacts.address,this.curTenant.Country_CTTKeyField=e.contacts.country,this.curTenant.CUSusername=e.username,this.curTenant.CUSFirstName=e.firstname,this.curTenant.CUSLastName=e.lastname}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e}),this.translateService.get("MESSAGE.REGISTERD").subscribe(e=>{this.registeredMsg=e}),this.translateService.get("MESSAGE.NOTREGISTERD").subscribe(e=>{this.notRegisteredMsg=e})}}_.\u0275fac=function(e){return new(e||_)(t.Y36(mt.y),t.Y36(it.d),t.Y36(y.uw),t.Y36(ct.v),t.Y36(P.F0),t.Y36(H.W),t.Y36(tt.U),t.Y36(N.C),t.Y36(pt.g),t.Y36(R.ux),t.Y36(O.sK),t.Y36(Kt.K))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-customers-list"]],features:[t._Bn([ct.v,H.W])],decls:44,vars:37,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"text-muted"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){1&e&&(t.YNc(0,se,22,7,"div",0),t._UZ(1,"mat-divider"),t.TgZ(2,"mat-card")(3,"div",1)(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",2)(9,"div",3)(10,"div",4)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",4)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",4)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",4)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",4)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",4)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",4)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",4),t.qZA(),t.YNc(39,s,23,12,"div",5),t.ALo(40,"paginate"),t.ALo(41,"TenantSearchPipe"),t.qZA()(),t.YNc(42,u,4,0,"div",6),t.YNc(43,m,2,0,"div",7)),2&e&&(t.Q6J("ngIf",i.account.periorty>0),t.xp6(5),t.hij("",t.lcZ(6,12,"HTML.TENANTS_LIST")," "),t.xp6(7),t.hij(" ",t.lcZ(13,14,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(17,16,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(21,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(25,20,"HTML.UNIT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,22,"HTML.Job")," "),t.xp6(4),t.hij(" ",t.lcZ(33,24,"HTML.WorkPlace")," "),t.xp6(4),t.hij(" ",t.lcZ(37,26,"HTML.ACTIVATED")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(40,28,t.xi3(41,31,i.users,i.searchText),t.WLB(34,g,i.count,i.page))),t.xp6(3),t.Q6J("ngIf",i.users),t.xp6(1),t.Q6J("ngIf",!i.users))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,et.LS,C.sg,C.O5,P.rH,T.xw,T.Wh,T.yH,w.Tq,w.nh,dt.A9,dt.Yi,W.a8,$.Hw,Z.Nt,v.KE,X.d,yt.Ou,rt.gM,et._s,Zt.DA,O.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});var F=b(5346);function Y(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-button-toggle",21),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.gotoNewContract())}),t.TgZ(1,"mat-icon"),t._uU(2,"note_add"),t.qZA()()}}const J=function(o){return["/contracts/contract-add/",o]};function G(o,e){if(1&o&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,J,i.id))}}function k(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.removeContract(a.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}const Me=function(o){return["/contracts/installment-list/",o]};function Re(o,e){if(1&o&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,Me,i.id))}}const qe=function(o){return["/contracts/contract-add/renew/",o]};function Ee(o,e){if(1&o&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"autorenew"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.ReNewContract")),t.Q6J("routerLink",t.VKq(4,qe,i.id))}}function Pe(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.leaveTenant(a,a.customer_Name))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"airport_shuttle"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.LEAVE"))}function ke(o,e){if(1&o&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t._UZ(3,"br"),t._uU(4),t.qZA(),t.TgZ(5,"div",23),t._uU(6),t.qZA(),t.TgZ(7,"div",23),t._uU(8),t.qZA(),t.TgZ(9,"div",23),t._uU(10),t.qZA(),t.TgZ(11,"div",23),t._uU(12),t._UZ(13,"br"),t._uU(14),t.qZA(),t.TgZ(15,"div",23),t._uU(16),t.qZA(),t.TgZ(17,"div",23),t._uU(18),t.qZA(),t.TgZ(19,"div",23)(20,"div",24),t.YNc(21,G,4,6,"a",25),t.YNc(22,k,4,3,"button",26),t.YNc(23,Re,4,6,"a",25),t.YNc(24,Ee,4,6,"a",25),t.YNc(25,Pe,4,3,"button",26),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.Tol(n.statusColor[i.RCOContractStatus]),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.unit_UnitNumber),t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",i.customer_Mobile," "),t.xp6(2),t.AsE(" (",i.RCOCode," / ",i.RCOSubCode,")"),t.xp6(2),t.Oqu(i.customer_NationalID),t.xp6(2),t.hij(" ",i.RCOEjarCode," "),t.xp6(2),t.hij(" ",i.RCOEndDate," "),t.xp6(3),t.Q6J("ngIf",n.can("view_onecontract")||0==n.account.periorty),t.xp6(1),t.Q6J("ngIf",n.can("delete_rentcontracts")),t.xp6(1),t.Q6J("ngIf",n.can("view_contractinstallments")||0==n.account.periorty),t.xp6(1),t.Q6J("ngIf",n.can("view_renewcontract")&&"N"==i.RCOContractStatus),t.xp6(1),t.Q6J("ngIf",n.can("view_tenantleave"))}}function Be(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",29)(1,"div",30)(2,"mat-card",31)(3,"pagination-controls",32),t.NdJ("pageChange",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(a))}),t.qZA()()()()}}function Ke(o,e){1&o&&(t.TgZ(0,"div",33),t._UZ(1,"mat-spinner",34),t.qZA())}const Je=function(o,e){return{itemsPerPage:o,currentPage:e}};class Lt{constructor(e,i,n,a,l,p,f,A,S,U,M){this.transferService=e,this.dataService=i,this.appSettings=n,this.activatedRoute=a,this.dialog=l,this.contractService=p,this.router=f,this.global=A,this.localStore=S,this.translateService=U,this.snackBar=M,this.statusColor={N:"make-white",R:"make-gold",F:"make-yellowgreen",C:"make-yellow"},this.account=new lt.n,this.count=4,this.userPerm=[],this.settings=this.appSettings.settings}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.contractInsuranceValueRequired=this.appSetup.APSContractInsuranceValueRequired,this.contractSeekingValueRequired=this.appSetup.APSContractSeekingValueRequired,this.insuranceValueInAccountStatements=this.appSetup.APSInsuranceValueInAccountStatements,this.seekingValueInAccountStatements=this.appSetup.APSSeekingValueInAccountStatements,this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.contForTenant=this.activatedRoute.params.subscribe(e=>{e.tenantid?(this.idForTenant=+e.tenantid,console.log("params['tenantid']:: "+this.idForTenant)):this.idForTenant=0}),console.log("line 85 this.idForTenant:: "+this.idForTenant),this.prepareMsgLanguage(),this.getContracts()}}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getAllContractsSingleUnits(this.curCOMId,this.account.periorty).subscribe(e=>this.contractsAll=e):"T"==this.curUserData.is_owner?this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerOwnerSingleUnits(this.curCOMId,this.account.periorty,this.curUserData.owner_KeyField).subscribe(e=>this.contractsAll=e):"T"==this.curUserData.is_employee?("N"==this.securityForApp&&(this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerBranchSingleUnits(this.curCOMId,this.account.periorty,this.account.branch_KeyField).subscribe(e=>this.contractsAll=e)),"D"==this.securityForApp&&(this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerEmpSingleUnits(this.curCOMId,this.account.periorty,this.account.id).subscribe(e=>this.contractsAll=e))):0==this.curUserData.periorty&&(this.curCustomerID=this.account.customer_KeyField??0,this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.curCustomerID).subscribe(e=>this.contractsAll=e))}renewContract(e){console.log("===========renewContract")}leaveTenant(e,i){this.transferService.setMessage({contract_KeyField:e.id,remaining_Installments:e.remaining_Installments,contenddate:e.RCOEndDate,contvalue:e.RCOContractValue,continsurance:e.RCOInsuranceValue,leaveid:e.RCOTenantLeaveID,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,cusName:i}),console.log("----Before info---"),null==e.RCOTenantLeaveID?(console.log("--contractRow.RCOTenantLeaveID == null--"),this.router.navigate(["contracts/tenant-leave/"])):(console.log("---ELSE-----"),this.router.navigate(["contracts/tenant-leave/"+e.RCOTenantLeaveID+"/"]))}removeContract(e){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.contractService.deleteContract(e).subscribe(a=>this.getContracts())})}contractInstallments(e){}onPageChanged(e){this.page=e,this.getContracts(),window.scrollTo(0,0)}printEInvoice(){this.router.navigate(["/contracts/print-einvoice/"])}gotoNewContract(){this.router.navigate(["/contracts/contract-add/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}Lt.\u0275fac=function(e){return new(e||Lt)(t.Y36(mt.y),t.Y36(F.n),t.Y36(it.d),t.Y36(P.gz),t.Y36(y.uw),t.Y36(H.W),t.Y36(P.F0),t.Y36(tt.U),t.Y36(N.C),t.Y36(O.sK),t.Y36(R.ux))},Lt.\u0275cmp=t.Xpm({type:Lt,selectors:[["app-contract-list"]],features:[t._Bn([H.W])],decls:67,vars:46,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",3,"class",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),t.YNc(4,Y,3,0,"mat-button-toggle",4),t.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),t._uU(7,"search"),t.qZA()()()(),t.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),t.NdJ("ngModelChange",function(a){return i.searchText=a}),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),t._uU(17,"view_list"),t.qZA()(),t.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),t._uU(20,"view_module"),t.qZA()()()()(),t._UZ(21,"mat-divider"),t.TgZ(22,"mat-card")(23,"div",14)(24,"h2"),t._uU(25),t.ALo(26,"translate"),t.qZA()(),t._UZ(27,"mat-divider"),t.TgZ(28,"div",15)(29,"div",16)(30,"div",17)(31,"h3"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",17)(35,"h3"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",17)(39,"h3"),t._uU(40),t.ALo(41,"translate"),t.qZA()(),t.TgZ(42,"div",17)(43,"h3"),t._uU(44),t.ALo(45,"translate"),t.qZA()(),t.TgZ(46,"div",17)(47,"h3"),t._uU(48),t.ALo(49,"translate"),t._UZ(50,"br"),t._uU(51),t.ALo(52,"translate"),t.qZA()(),t.TgZ(53,"div",17)(54,"h3"),t._uU(55),t.ALo(56,"translate"),t.qZA()(),t.TgZ(57,"div",17)(58,"h3"),t._uU(59),t.ALo(60,"translate"),t.qZA()(),t._UZ(61,"div",17),t.qZA(),t.YNc(62,ke,26,17,"div",18),t.ALo(63,"paginate"),t.ALo(64,"ContractSearchPipe"),t.qZA()(),t.YNc(65,Be,4,0,"div",19),t.YNc(66,Ke,2,0,"div",20)),2&e){const n=t.MAs(3);t.xp6(4),t.Q6J("ngIf",i.can("add_rentcontracts")),t.xp6(4),t.ekj("show","search"==n.value),t.xp6(2),t.s9C("placeholder",t.lcZ(11,17,"HTML.SEARCH_CONTRACT")),t.Q6J("ngModel",i.searchText),t.xp6(15),t.Oqu(t.lcZ(26,19,"HTML.Contract_List")),t.xp6(7),t.hij(" ",t.lcZ(33,21,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(37,23,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(41,25,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(45,27,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(49,29,"HTML.ContractCode"),""),t.xp6(3),t.hij("",t.lcZ(52,31,"HTML.IDNUMBER")," "),t.xp6(4),t.hij(" ",t.lcZ(56,33,"HTML.ContractEjarCode")," "),t.xp6(4),t.hij(" ",t.lcZ(60,35,"HTML.ContractEndDate")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(63,37,t.xi3(64,40,i.contractsAll,i.searchText),t.WLB(43,Je,i.count,i.page))),t.xp6(3),t.Q6J("ngIf",i.contractsAll),t.xp6(1),t.Q6J("ngIf",!i.contractsAll)}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,et.LS,C.sg,C.O5,P.rH,T.xw,T.Wh,T.yH,w.Tq,w.nh,dt.A9,dt.Yi,W.a8,$.Hw,Z.Nt,v.KE,X.d,yt.Ou,rt.gM,et._s,Zt.JQ,O.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}table{width:100%}.make-gold{background-color:#fbea96}.make-yellow{background-color:#ff4500}.make-yellowgreen{background-color:#ad7020}.make-white{background-color:#fff}\n"],encapsulation:2});var ye=b(5861);class Ze{}var Ot=b(6838),Mt=b(6709),Q=b(9602),bt=b(3848),Ht=b(1596),At=b(8796);function He(o,e){1&o&&(t.TgZ(0,"h1",85),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"RenewContract")," "))}function We(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function Ve(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Ye(o,e){if(1&o&&(t.TgZ(0,"h1",85),t.YNc(1,We,3,3,"span",48),t.YNc(2,Ve,3,3,"span",48),t._uU(3),t.ALo(4,"translate"),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",!i.contractForDisplay.id),t.xp6(1),t.Q6J("ngIf",i.contractForDisplay.id),t.xp6(1),t.hij(" ",t.lcZ(4,3,"HTML.RentContract"),"\n")}}function Ge(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.OWNName," ")}}function Qe(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.OWNName," ")}}function je(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BACAccountNumber," ")}}function $e(o,e){if(1&o&&(t.TgZ(0,"ng-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CUSName,"")}}function ze(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CURName," ")}}function Xe(o,e){if(1&o&&(t.TgZ(0,"a",86)(1,"mat-icon"),t._uU(2,"download"),t.qZA()()),2&o){const i=t.oxw();t.s9C("href",i.fileToUpload,t.LSH)}}function ti(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"mat-label"),t._uU(2," - "),t.qZA(),t.TgZ(3,"input",87),t.NdJ("change",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.handleFileInput(a.target.files))}),t.qZA(),t.TgZ(4,"button",88),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.callFileInput())}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,1,"HTML.ChoosePDFFile")))}function ei(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function ii(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function ni(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.UNTUnitNumber," ")}}function oi(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function ai(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function ri(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",89),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.saveUpdate(a.contractForDisplay.id))}),t.YNc(1,oi,3,3,"span",48),t.YNc(2,ai,3,3,"span",48),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.contractForDisplay.id),t.xp6(1),t.Q6J("ngIf",i.contractForDisplay.id)}}class xt{constructor(e,i,n,a,l,p,f,A,S,U,M,K,z,st){this.activatedRoute=e,this.codesService=i,this.unitsService=n,this.contractService=a,this.fb=l,this.localStore=p,this.router=f,this.global=A,this.translateService=S,this.atlasService=U,this.settingService=M,this.tenantsService=K,this.snackBar=z,this.appSettings=st,this.account=new lt.n,this.docType_const=(new x.I).OwnershipDocTypes,this.country_const=(new x.I).Countries,this.governorate_const=(new x.I).Governorates,this.city_const=(new x.I).City,this.region_const=(new x.I).Regions,this.buildingFeatures_const=(new x.I).BuildingFeatures,this.passwordHide=!0,this.userPerm=[],this.codeForDefaultOwner=(new x.$).getDefaultOwner(),this.typeOfContractSerial=(new x.$).getTypeOfContractSerial(),this.fileToUpload=null,this.hasPermission_NoOfMonths=!1,this.DocImageToUpload=null,this.defaultDocImage=this.noImageUrl,this.defaultCusImage=this.noImageUrl,this.CusImageToUpload=null,this.DocTypes=[],this.parameters=[],this.Countries=[],this.Governorates=[],this.AllBuilding=[],this.AllUnitsForBuilding=[],this.AllRepresentativeForOwner=[],this.AllBankAccountsForOwner=[],this.AllBranches=[],this.AllOwners=[],this.AllRepresentativeForCustomer=[],this.AllTenants=[],this.baseUrl=this.appSettings.settings.url,this.secondPartUrl=new L.P(this.baseUrl).api_constant,this.noImageUrl=new L.P(this.baseUrl).noImage}isBigEnough(e,i,n){return e>=10}callFileInput(){document.getElementById("fileInput").click()}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.defaultOwner=1,this.userSUb=this.global.user.subscribe(i=>{this.account=i}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.ejarContractNumberRequired=this.appSetup.APSEjarContractNumberRequired,this.contractInsuranceValueRequired=this.appSetup.APSContractInsuranceValueRequired,this.contractSeekingValueRequired=this.appSetup.APSContractSeekingValueRequired,this.insuranceValueInAccountStatements=this.appSetup.APSInsuranceValueInAccountStatements,this.seekingValueInAccountStatements=this.appSetup.APSSeekingValueInAccountStatements,this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;var e=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==e.is_employee,this.isAdmin=e.is_superuser,this.isOwner="T"==e.is_owner,this.ownerKeyForApp=(new x.$).ownerKeyField,this.form=this.fb.group({id:null,RCOCode:[null,d.kI.required],RCOSubCode:1,RCOEjarCode:null,RCOContractMultiUnits:"F",RCOContractNoOfMonths:[{value:"12",disabled:!this.hasPermission_NoOfMonths},[d.kI.required,o=>{const e=o.value;return e&&e>0?null:{greaterThanZero:!0}}]],Related_RCOKeyField:null,contractDate:null,contractStartDate:[null,d.kI.required],contractEndDate:[null,d.kI.required],RCOContractStatus:"N",RCOAlarmStartDate:{value:[""],disabled:!0},RCONoOfDaysForAlarm:[null,d.kI.required],RCONoOfDaysForEjarAlarm:[null,d.kI.required],RCOAlarmCounter:{value:0,disabled:!0},contractUnit:this.fb.group({branch_KeyField:{value:null,disabled:0==this.curUserData.periorty},build_KeyField:{value:null,disabled:0==this.curUserData.periorty},unit_KeyField:{value:null,disabled:0==this.curUserData.periorty}}),contractPerson:this.fb.group({owner_KeyField:null,owner_representative_KeyField:null,customer_KeyField:[null,d.kI.required],customer_work_representative:null,customer_code:null,bankAccount_KeyField:null}),contractValues:this.fb.group({RCOContractValue:[null,d.kI.required],RCOPayEveryMonthesNo:[null,d.kI.required],RCOMonthValue:[null,d.kI.required],RCOInsuranceValue:0,RCOSeekingValue:0,RCOMonthlyExpense:0,RCOExpenseDesc:null,RCOOtherValue:0,RCOMonthlyElectricValue:0,RCOElectricCounterReading:null,RCOMonthlyWaterValue:0,RCOWaterCounterReading:null,RCOMonthlyGasValue:0,RCOGasCounterReading:null}),settings:this.fb.group({isActive:null,isDeleted:null,isInsurance:"T",isSeeking:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),"T"==this.ejarContractNumberRequired?(this.form.controls.RCOEjarCode.setValidators([d.kI.required]),this.form.controls.RCOEjarCode.updateValueAndValidity()):(this.form.controls.RCOEjarCode.clearValidators(),this.form.controls.RCOEjarCode.updateValueAndValidity()),this.prepareMsgLanguage(),this.getParamValue(this.curCOMId,this.account.periorty,1),this.getParamValue(this.curCOMId,this.account.periorty,2),this.getParamValue(this.curCOMId,this.account.periorty,3),this.getParamValue(this.curCOMId,this.account.periorty,this.codeForDefaultOwner),this.getParamValue(this.curCOMId,this.account.periorty,this.typeOfContractSerial),this.getCountries(this.curCOMId,this.account.periorty),this.getAllOwnerss(this.curCOMId,this.account.periorty),this.getOwnershipDocType(this.curCOMId,this.account.periorty),this.getTenants(),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0),this.activatedRoute.data.subscribe(i=>{this.isRenewContract=i.parentID}),this.sub=this.activatedRoute.params.subscribe(i=>{i.id?(this.id=+i.id,console.log("params['id']:: "+this.id),this.getContractById(this.id)):this.contractForDisplay=new Ze})}this.checkPermissions_NoOfMonths()}checkPermissions_NoOfMonths(){this.hasPermission_NoOfMonths=this.can("edit_rentalcontract_noofmonths"),this.hasPermission_NoOfMonths?this.form.get("RCOContractNoOfMonths")?.enable():this.form.get("RCOContractNoOfMonths")?.disable()}handleFileInput(e){e&&e.length&&(this.fileToUpload=e.item(0)),document.getElementById("customButton").textContent=e.length>0?e[0].name:this.chooseFile}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onFileChange(e){this.DocImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultDocImage=n.target.result},i.readAsDataURL(this.DocImageToUpload)}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultCusImage=n.target.result},i.readAsDataURL(this.CusImageToUpload)}mapFormvalue_to_ContractClass(){this.form.enable();const e=new C.uU("en-GB").transform(this.form.value.contractDate,"dd/MM/yyyy"),i=new C.uU("en-GB").transform(this.form.value.contractStartDate,"dd/MM/yyyy"),n=new C.uU("en-GB").transform(this.form.value.contractEndDate,"dd/MM/yyyy"),a=new C.uU("en-GB").transform(this.form.value.RCOAlarmStartDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,this.affectInsurance=this.form.value.settings.isInsurance?"T":"F",this.affectSeeking=this.form.value.settings.isSeeking?"T":"F",this.contractForDisplay.id=this.form.value.id,this.contractForDisplay.Related_RCOKeyField=this.form.value.Related_RCOKeyField,this.contractForDisplay.RCOCode=this.form.value.RCOCode,this.contractForDisplay.RCOSubCode=this.form.value.RCOSubCode,this.contractForDisplay.RCOEjarCode=this.form.value.RCOEjarCode,this.contractForDisplay.RCOContractMultiUnits=this.form.value.RCOContractMultiUnits,null!=this.form.value.contractDate&&(this.contractForDisplay.RCODate=e),null!=this.form.value.contractStartDate&&(this.contractForDisplay.RCOStartDate=i),null!=this.form.value.contractEndDate&&(this.contractForDisplay.RCOEndDate=n),null!=this.form.value.RCOAlarmStartDate&&(this.contractForDisplay.RCOAlarmStartDate=a),this.contractForDisplay.RCOContractStatus=this.form.value.RCOContractStatus,this.contractForDisplay.RCOAlarmCounter=this.form.value.RCOAlarmCounter,this.contractForDisplay.RCONoOfDaysForAlarm=this.form.value.RCONoOfDaysForAlarm,this.contractForDisplay.RCONoOfDaysForEjarAlarm=this.form.value.RCONoOfDaysForEjarAlarm,this.contractForDisplay.branch_KeyField=this.form.value.contractUnit.branch_KeyField,this.contractForDisplay.build_KeyField=this.form.value.contractUnit.build_KeyField,this.contractForDisplay.unit_KeyField=this.form.value.contractUnit.unit_KeyField,this.contractForDisplay.owner_KeyField=this.form.value.contractPerson.owner_KeyField,this.contractForDisplay.owner_representative_KeyField=this.form.value.contractPerson.owner_representative_KeyField,this.contractForDisplay.bankAccount_KeyField=this.form.value.contractPerson.bankAccount_KeyField,this.contractForDisplay.customer_KeyField=this.form.value.contractPerson.customer_KeyField,this.contractForDisplay.customer_work_representative=this.form.value.contractPerson.customer_work_representative,this.contractForDisplay.RCOContractValue=this.form.value.contractValues.RCOContractValue,this.contractForDisplay.RCOPayEveryMonthesNo=this.form.value.contractValues.RCOPayEveryMonthesNo,this.contractForDisplay.RCOContractNoOfMonths=this.form.value.RCOContractNoOfMonths,this.contractForDisplay.RCOMonthValue=this.form.value.contractValues.RCOMonthValue,this.contractForDisplay.RCOInsuranceValue=this.form.value.contractValues.RCOInsuranceValue,this.contractForDisplay.RCOSeekingValue=this.form.value.contractValues.RCOSeekingValue,this.contractForDisplay.RCOMonthlyExpense=this.form.value.contractValues.RCOMonthlyExpense,this.contractForDisplay.RCOExpenseDesc=this.form.value.contractValues.RCOExpenseDesc,this.contractForDisplay.RCOOtherValue=this.form.value.contractValues.RCOOtherValue,this.contractForDisplay.RCOMonthlyElectricValue=this.form.value.contractValues.RCOMonthlyElectricValue,this.contractForDisplay.RCOElectricCounterReading=this.form.value.contractValues.RCOElectricCounterReading,this.contractForDisplay.RCOMonthlyWaterValue=this.form.value.contractValues.RCOMonthlyWaterValue,this.contractForDisplay.RCOWaterCounterReading=this.form.value.contractValues.RCOWaterCounterReading,this.contractForDisplay.RCOMonthlyGasValue=this.form.value.contractValues.RCOMonthlyGasValue,this.contractForDisplay.RCOGasCounterReading=this.form.value.contractValues.RCOGasCounterReading,this.contractForDisplay.RCOActive=this.tenActive,this.contractForDisplay.RowDelete=this.tenDeleted,this.contractForDisplay.RCOInsuranceAffectStatement=this.affectInsurance,this.contractForDisplay.RCOSeekingAffectStatement=this.affectSeeking}getContractById(e){const i=[];this.contractService.getOneContract(e).subscribe(n=>{"T"!=this.isRenewContract&&this.contractService.getOneContractDocs(this.curCOMId,this.account.periorty,e).subscribe(a=>{for(var l of a)i.push({link:l.RCDPic,preview:l.RCDPic})}),this.fillForm(n,i),this.contractForDisplay=n,"T"==this.isRenewContract&&(this.contractForDisplay.id=null)})}fillForm(e,i){this.is_active="T"==e.RCOActive,this.is_insurance="T"==e.RCOInsuranceAffectStatement,this.is_seeking="T"==e.RCOSeekingAffectStatement,null!=e.branch_KeyField&&this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.branch_KeyField),null!=e.build_KeyField&&this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,e.build_KeyField,""),null!=e.owner_KeyField&&(this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,e.owner_KeyField),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,e.owner_KeyField)),null!=e.customer_KeyField&&this.getRepresentativePerCustomer(this.curCOMId,this.account.periorty,e.customer_KeyField),null!=e.RCODate&&(this.s_rcoDate="T"==this.isRenewContract?new Date:e.RCODate),this.is_delete=1==e.RowDelete,this.fileToUpload=e.RCOPdf,this.form.patchValue("T"!=this.isRenewContract?{id:e.id,Related_RCOKeyField:e.Related_RCOKeyField,RCOPdf:e.RCOPdf,RCOCode:e.RCOCode,RCOSubCode:e.RCOSubCode,RCOEjarCode:e.RCOEjarCode,RCOContractMultiUnits:e.RCOContractMultiUnits,RCOContractNoOfMonths:e.RCOContractNoOfMonths,contractDate:e.RCODate,contractStartDate:e.RCOStartDate,contractEndDate:e.RCOEndDate,RCOContractStatus:e.RCOContractStatus,RCOAlarmStartDate:e.RCOAlarmStartDate,RCOAlarmCounter:e.RCOAlarmCounter,RCONoOfDaysForAlarm:e.RCONoOfDaysForAlarm,RCONoOfDaysForEjarAlarm:e.RCONoOfDaysForEjarAlarm,contractUnit:{branch_KeyField:e.branch_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField},contractPerson:{owner_KeyField:e.owner_KeyField,owner_representative_KeyField:e.owner_representative_KeyField,bankAccount_KeyField:e.bankAccount_KeyField,customer_KeyField:e.customer_KeyField,customer_work_representative:e.customer_work_representative},contractValues:{RCOContractValue:e.RCOContractValue,RCOPayEveryMonthesNo:e.RCOPayEveryMonthesNo,RCOMonthValue:e.RCOMonthValue,RCOInsuranceValue:e.RCOInsuranceValue,RCOSeekingValue:e.RCOSeekingValue,RCOMonthlyExpense:e.RCOMonthlyExpense,RCOExpenseDesc:e.RCOExpenseDesc,RCOOtherValue:e.RCOOtherValue,RCOMonthlyElectricValue:e.RCOMonthlyElectricValue,RCOElectricCounterReading:e.RCOElectricCounterReading,RCOMonthlyWaterValue:e.RCOMonthlyWaterValue,RCOWaterCounterReading:e.RCOWaterCounterReading,RCOMonthlyGasValue:e.RCOMonthlyGasValue,RCOGasCounterReading:e.RCOGasCounterReading},settings:{isActive:this.is_active,isDeleted:this.is_delete,isInsurance:this.is_insurance,isSeeking:this.is_seeking},docs:{docPic:i}}:{Related_RCOKeyField:e.id,RCOPdf:e.RCOPdf,RCOCode:e.RCOCode,RCOSubCode:+e.RCOSubCode+1,RCOEjarCode:e.RCOEjarCode,RCOContractMultiUnits:e.RCOContractMultiUnits,RCOContractNoOfMonths:e.RCOContractNoOfMonths,contractDate:new Date,contractStartDate:this.addDays(e.RCOEndDate,1),RCOContractStatus:e.RCOContractStatus,RCOAlarmCounter:0,RCONoOfDaysForAlarm:e.RCONoOfDaysForAlarm,RCONoOfDaysForEjarAlarm:e.RCONoOfDaysForEjarAlarm,contractUnit:{branch_KeyField:e.branch_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField},contractPerson:{owner_KeyField:e.owner_KeyField,owner_representative_KeyField:e.owner_representative_KeyField,bankAccount_KeyField:e.bankAccount_KeyField,customer_KeyField:e.customer_KeyField,customer_work_representative:e.customer_work_representative},contractValues:{RCOContractValue:e.RCOContractValue,RCOPayEveryMonthesNo:e.RCOPayEveryMonthesNo,RCOMonthValue:e.RCOMonthValue,RCOInsuranceValue:e.RCOInsuranceValue,RCOSeekingValue:e.RCOSeekingValue,RCOMonthlyExpense:e.RCOMonthlyExpense,RCOExpenseDesc:e.RCOExpenseDesc,RCOOtherValue:e.RCOOtherValue,RCOMonthlyElectricValue:e.RCOMonthlyElectricValue,RCOElectricCounterReading:e.RCOElectricCounterReading,RCOMonthlyWaterValue:e.RCOMonthlyWaterValue,RCOWaterCounterReading:e.RCOWaterCounterReading,RCOMonthlyGasValue:e.RCOMonthlyGasValue,RCOGasCounterReading:e.RCOGasCounterReading},settings:{isActive:this.is_active,isDeleted:this.is_delete,isInsurance:this.is_insurance,isSeeking:this.is_seeking},docs:{docPic:i}})}handleInstallment(e){var i=this;return(0,ye.Z)(function*(){console.log("inside handleInstallment-------"),console.log("---res.RCOContractNoOfMonths:: "+e.RCOContractNoOfMonths);let n=+e.RCOContractNoOfMonths/+e.RCOPayEveryMonthesNo;console.log("-----noOfInstallment:: "+n);let a=e.RCOPayEveryMonthesNo,l=e.RCOStartDate,p=e.RCOEndDate,f=e.RCOMonthValue;var A,U,M,K,z;for(let V=0;V<n;V++){0==V?(U=new Date(l),console.log("-----111--installmentDate:: "+l),console.log("-----111--tempDate:: "+U),A=i.addMonths(U,(V+1)*a),console.log("-----000--endOfInstallmentPeriod:: "+A),A.setDate(A.getDate()-1),console.log("-----00000--endOfInstallmentPeriod:: "+A),console.log("-----222--tempDate:: "+U),U=new Date(l),console.log("-----333--tempDate:: "+U)):(M=new Date(l),U=new Date(l),U=i.addMonths(M,V*a),M=new Date(l),V==n-1?A=p:((A=i.addMonths(M,(V+1)*a)).setDate(A.getDate()-1),M=new Date(l))),K=new Date(new C.uU("en-GB").transform(U,"yyyy/MM/dd")),z=new Date(new C.uU("en-GB").transform(A,"yyyy/MM/dd"));var st="\u0648\u0630\u0644\u0643 \u0639\u0646 \u0625\u064a\u062c\u0627\u0631 \u0627\u0644\u0648\u062d\u062f\u0629 \u0631\u0642\u0645 "+e.unit_UnitNumber+" \u0645\u0646 \u0627\u0644\u0639\u0642\u0627\u0631 "+e.build_Name+" \u0639\u0646 \u0627\u0644\u0641\u062a\u0631\u0629 \u0645\u0646 "+i.formatDate(K)+" \u0625\u0644\u0649 "+i.formatDate(z);console.log("-----444--noteText:: "+st);let It={contract_KeyField:e.id,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,INSCode:V+1,INSContractTyps:"I",INSStatus:"N",INSValue:f,INSDueDate:K,INSDueToDate:z,INSNotes:st};console.log("---i::"+V+" --INSDueDate:: "+K+" --INSDueToDate:: "+z),yield i.insertInstallment(It)}})()}insertInstallment(e){this.contractService.addInstallments(e).subscribe(i=>{})}saveUpdate(e){this.mapFormvalue_to_ContractClass(),e?(console.log("==========Edit Contract============"),this.contractService.editContractWithPdf(this.contractForDisplay,this.fileToUpload).subscribe(i=>{let n={id:null,contract_KeyField:i.id,customer_KeyField:i.customer_KeyField,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,RCUContractValue:i.RCOContractValue,branch_ArbName:i.branch_ArbName,build_Name:i.build_Name,unit_UnitNumber:i.unit_UnitNumber};this.contractService.getUnitsForContract(this.curCOMId,this.account.periorty,i.id).subscribe(f=>{console.log("-----responseunit[0].unit_KeyField:: "+f[0].unit_KeyField),console.log("-----res.unit_KeyField:: "+i.unit_KeyField),f[0].unit_KeyField!=i.unit_KeyField&&(console.log("--------Inside IF"),this.contractService.deleteUnitFromContract(f[0].id).subscribe(A=>{console.log("--------Delete Scusses for id:: "+f[0].id),this.contractService.addOneUnitForContract(n).subscribe(S=>{console.log("Response from POST API:",S)},S=>{console.error("Error:",S)})}))},f=>{console.error("Error:",f)});let a={contract_KeyField:i.id,TSTArrange:1,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOContractValue,TSTDate:i.RCOStartDate,TSTLineClassification:"A",TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u0627\u0642\u062f \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id};console.log("==================1======================="),console.log("==================1======================="),this.contractService.getStatementsIDPerSubjectIDAndClass(this.curCOMId,this.account.periorty,"RCONTRACT",i.id,"A").subscribe(f=>{f&&f.length>0?(this.stateID=f[0].id,this.stateID&&this.stateID>0&&this.contractService.deleteStatementForStatementID(this.stateID).subscribe(A=>{console.log("====Delete:: ==========this.stateID================"),console.log("====Delete this.stateID:: "+this.stateID),this.contractService.addStatement(a).subscribe(S=>{console.log("====Add statement for Contract after delete")})})):this.contractService.addStatement(a).subscribe(A=>{console.log("====Add statement for Contract after delete")})});let l={contract_KeyField:i.id,TSTArrange:2,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOInsuranceValue,TSTDate:i.RCOStartDate,TSTLineClassification:"B",TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0623\u0645\u064a\u0646 \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id};this.contractService.getStatementsIDPerSubjectIDAndClass(this.curCOMId,this.account.periorty,"RCONTRACT",i.id,"B").subscribe(f=>{f&&f.length>0?(this.insuranceID=f[0].id,this.insuranceID&&this.insuranceID>0&&this.contractService.deleteStatementForStatementID(this.insuranceID).subscribe(A=>{console.log("====Delete:: ==========this.insuranceID================"),console.log("====Delete this.insuranceID:: "+this.insuranceID),this.form.value.settings.isInsurance&&this.contractService.addStatement(l).subscribe(S=>{console.log("====Add Insurance for Contract after delete")})})):this.form.value.settings.isInsurance&&this.contractService.addStatement(l).subscribe(A=>{console.log("====Add Insurance for Contract")})});let p={contract_KeyField:i.id,TSTArrange:3,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOSeekingValue,TSTDate:i.RCOStartDate,TSTLineClassification:"C",TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0633\u0639\u064a \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id};this.contractService.getStatementsIDPerSubjectIDAndClass(this.curCOMId,this.account.periorty,"RCONTRACT",i.id,"C").subscribe(f=>{f&&f.length>0?(this.seekingID=f[0].id,this.seekingID&&this.seekingID>0&&this.contractService.deleteStatementForStatementID(this.seekingID).subscribe(A=>{console.log("====Delete:: ==========this.seekingID================"),console.log("====Delete this.seekingID:: "+this.seekingID),this.form.value.settings.isSeeking&&this.contractService.addStatement(p).subscribe(S=>{console.log("====Add Seeking for Contract after delete")})})):this.form.value.settings.isSeeking&&this.contractService.addStatement(p).subscribe(A=>{console.log("====Add Seeking for Contract")})}),console.log("==================2======================="),console.log("==================2======================="),null!=this.DocImageToUpload&&this.contractService.addContractDocs(this.contractForDisplay.id,this.DocImageToUpload).subscribe(f=>{}),this.contractService.updateCustomerUnitFromContract(this.contractForDisplay.customer_KeyField,this.contractForDisplay.build_KeyField,this.contractForDisplay.unit_KeyField,this.contractForDisplay.id).subscribe(f=>{}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(console.log("=====AddContract======"),this.contractService.addContractWithPdf(this.contractForDisplay,this.fileToUpload).subscribe(i=>{this.contractService.addOneUnitForContract({id:null,contract_KeyField:i.id,customer_KeyField:i.customer_KeyField,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,RCUContractValue:i.RCOContractValue,branch_ArbName:i.branch_ArbName,build_Name:i.build_Name,unit_UnitNumber:i.unit_UnitNumber}).subscribe(p=>{console.log("Response from POST API:",p)},p=>{console.error("Error:",p)}),this.contractService.addStatement({contract_KeyField:i.id,TSTArrange:1,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOContractValue,TSTDate:i.RCOStartDate,TSTLineClassification:"A",TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u0627\u0642\u062f \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id}).subscribe(p=>{}),this.form.value.settings.isInsurance&&this.contractService.addStatement({contract_KeyField:i.id,TSTArrange:2,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOInsuranceValue,TSTDate:i.RCOStartDate,TSTLineClassification:"B",TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0623\u0645\u064a\u0646 \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id}).subscribe(f=>{}),this.form.value.settings.isSeeking&&this.contractService.addStatement({contract_KeyField:i.id,TSTArrange:3,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOSeekingValue,TSTDate:i.RCOStartDate,TSTLineClassification:"C",TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0633\u0639\u064a \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id}).subscribe(f=>{}),null!=this.DocImageToUpload&&this.contractService.addContractDocs(i.id,this.DocImageToUpload).subscribe(p=>{}),this.contractService.updateCustomerUnitFromContract(i.customer_KeyField,i.build_KeyField,i.unit_KeyField,i.id).subscribe(p=>{}),this.unitsService.editOneUnit({id:i.unit_KeyField,customer_KeyField:i.customer_KeyField,UNTHousingStatus:"R"}).subscribe(p=>{}),"T"==this.isRenewContract&&this.contractService.editOneContract({id:this.id,RCOContractStatus:"R"}).subscribe(f=>{}),this.handleInstallment(i),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-add/"+i.id+"/"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])}))}close(){}addDays(e,i){var n=new Date(e);return n.setDate(n.getDate()+i),n}addMonths(e,i){var n=new Date(e);return n.setMonth(n.getMonth()+i),n}addMonths2(e,i){var n=e.getDate();return e.setMonth(e.getMonth()+ +i),e.getDate()!=n&&e.setDate(0),e}compareFunction(e,i){return e.username==i.username&&e.code==i.code}getOwnershipDocType(e,i){this.codesService.getSubForParent(e,i,this.docType_const).subscribe(n=>{this.DocTypes=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0646\u0648\u0627\u0639 \u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0644\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onChangeContractValue(e){const i=this.form.getRawValue();let a=this.form.value.contractValues.RCOPayEveryMonthesNo;0==a&&(a=1);let l=i.RCOContractNoOfMonths;0==l&&(l=12),this.form.patchValue({contractValues:{RCOMonthValue:e.target.value/(l/a)}})}onChangeContractNoOfMonths(e){let i=e.target.value,n=this.form.value.contractValues.RCOPayEveryMonthesNo;0==n&&(n=1);let a=this.form.value.contractValues.RCOContractValue;null==a&&(a=0),this.form.patchValue({contractValues:{RCOMonthValue:a/(i/n)}});let l=this.form.value.contractStartDate;l&&this.onChangeStartDateDoIt(l,i)}onChangePayEvery(e){let n=this.form.getRawValue().RCOContractNoOfMonths;0==n&&(n=12);let l=e.target.value;0==l&&(l=1),this.form.patchValue({contractValues:{RCOMonthValue:this.form.value.contractValues.RCOContractValue/(n/l)}})}onChangeDays(e){if(new C.uU("en-GB").transform(this.form.value.contractEndDate,"dd/MM/yyyy"),null!=this.form.value.contractEndDate){let n=this.form.value.contractEndDate,a=e.target.value;this.paramValueForCode1=a,this.calcAlarmStartDate(n,a)}}onChangeEndDate(e){let i=e.value;console.log("----event.value:: "+e.value),console.log("----event:: "+e),this.onChangeEndDateDoIt(i)}onChangeEndDateDoIt(e){this.calcAlarmStartDate(e,this.paramValueForCode1),this.form.get("contractEndDate").patchValue(e)}onChangeStartDate(e){const i=this.form.getRawValue(),a=new Date(e.value);this.onChangeStartDateDoIt(a,i.RCOContractNoOfMonths)}onChangeStartDateDoIt(e,i){const n=new Date(e);let a=i;n.setMonth(n.getMonth()+ +a),n.setDate(n.getDate()-1),this.onChangeEndDateDoIt(n)}subtractDays(e,i){var n=new Date(e);return n.setDate(n.getDate()-i),n}calcAlarmStartDate(e,i){var n=this.subtractDays(e,i);this.calcDate=new C.uU("en-GB").transform(n,"yyyy-MM-dd"),this.form.patchValue({RCONoOfDaysForAlarm:this.paramValueForCode1,RCONoOfDaysForEjarAlarm:this.paramValueForCode2}),this.form.get("RCOAlarmStartDate").patchValue(this.calcDate)}formatDate(e){const i=new Date(e);let n=""+(i.getMonth()+1),a=""+i.getDate();const l=i.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[l,n,a].join("-")}searchByCode(e){console.log("---Search event:: "+e),this.tenantsService.getCustomerPerCode(this.curCOMId,this.account.periorty,+e).subscribe(i=>{i.length>0?(console.log("---id:: "+i[0].id),this.form.patchValue({contractPerson:{customer_KeyField:i[0].id}}),this.readCustumer(i[0].id)):(console.log("---Not---"),this.form.patchValue({contractPerson:{customer_KeyField:null}}))},i=>{console.log("----not found tenant----")})}getParamValue(e,i,n){this.settingService.getValueForCode(e,i,n).subscribe(a=>{this.parameters=a,1==n&&(this.paramValueForCode1=a[0].APAValue),2==n&&(this.paramValueForCode2=a[0].APAValue),3==n&&(this.paramValueForCode3=a[0].APAValue),n==this.codeForDefaultOwner&&(this.defaultOwner=a[0].APAValue,this.form.patchValue({contractPerson:{owner_KeyField:+this.defaultOwner}}),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.defaultOwner),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,this.defaultOwner)),n==this.typeOfContractSerial&&(this.typeOfContSerialValue=a[0].APAValue,"OWNER"!=this.typeOfContSerialValue.toUpperCase()?this.getMaxContractCode(this.curCOMId,this.account.periorty):this.getMaxContractCodePerOwner(this.curCOMId,this.account.periorty,this.defaultOwner??0))},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxContractCode(e,i){this.contractService.getMaxContractCode(e,i).subscribe(n=>{this.maxContractCode=n.max,this.id||this.form.patchValue({RCOCode:this.maxContractCode})})}getMaxContractCodePerOwner(e,i,n){this.contractService.getMaxContractCodeForOwner(e,i,n).subscribe(a=>{this.maxContractCode=a.max,this.id||this.form.patchValue({RCOCode:this.maxContractCode})})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.value)}getBuildingPerBranch(e,i,n){this.AllBuilding=[],this.AllUnitsForBuilding=[],this.unitsService.getBuildingsPerBranch(e,i,n).subscribe(a=>{this.AllBuilding=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(e){this.unitsService.getOneBuilding(e.value).subscribe(i=>{this.curOwnerId=i.owner_KeyField,console.log("====Cur Owner:: "+this.curOwnerId+"  "+i.owner_FullName),this.form.patchValue({contractPerson:{owner_KeyField:this.curOwnerId}}),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.curOwnerId),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,this.curOwnerId)},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,e.value,"E")}getUnitsPerBuilding(e,i,n,a){this.unitsService.getAllUnitsPerBuilding(e,i,n,a).subscribe(l=>{this.AllUnitsForBuilding=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0644\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnit(e){let i=this.form.value.RCOContractNoOfMonths;e.value&&this.unitsService.getOneUnit(e.value).subscribe(n=>{this.form.patchValue({contractValues:{RCOContractValue:n.UNTContractValue,RCOPayEveryMonthesNo:n.UNTPayInstallmentEveryMonths,RCOMonthValue:n.UNTContractValue/(i/n.UNTPayInstallmentEveryMonths),RCOInsuranceValue:n.UNTInsuranceValue,RCOSeekingValue:n.UNTSeekingValue,RCOMonthlyExpense:n.UNTMonthlyExpense,RCOExpenseDesc:n.UNTExpenseDesc,RCOOtherValue:n.UNTOtherValue,RCOMonthlyElectricValue:n.UNTMonthlyElectricityFee,RCOElectricCounterReading:n.UNTLastElectricityReading,RCOMonthlyWaterValue:n.UNTMonthlyWaterFee,RCOWaterCounterReading:n.UNTLastWaterReading,RCOMonthlyGasValue:n.UNTMonthlyGasFee,RCOGasCounterReading:n.UNTLastGasReading}})},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnitById(e){let n=this.form.getRawValue().RCOContractNoOfMonths;e&&this.unitsService.getOneUnit(e).subscribe(a=>{this.form.patchValue({contractValues:{RCOContractValue:a.UNTContractValue,RCOPayEveryMonthesNo:a.UNTPayInstallmentEveryMonths,RCOMonthValue:a.UNTContractValue/(n/a.UNTPayInstallmentEveryMonths),RCOInsuranceValue:a.UNTInsuranceValue,RCOSeekingValue:a.UNTSeekingValue,RCOMonthlyExpense:a.UNTMonthlyExpense,RCOExpenseDesc:a.UNTExpenseDesc,RCOOtherValue:a.UNTOtherValue,RCOMonthlyElectricValue:a.UNTMonthlyElectricityFee,RCOElectricCounterReading:a.UNTLastElectricityReading,RCOMonthlyWaterValue:a.UNTMonthlyWaterFee,RCOWaterCounterReading:a.UNTLastWaterReading,RCOMonthlyGasValue:a.UNTMonthlyGasFee,RCOGasCounterReading:a.UNTLastGasReading}})},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getRepresentativePerOwner(e,i,n){this.contractService.getOwnersPerParent(e,i,n).subscribe(a=>{this.AllRepresentativeForOwner=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0645\u062b\u0644 \u0627\u0644\u0645\u0627\u0644\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBankAccountsPerOwner(e,i,n){this.contractService.getAllAccountsForOwner(e,i,n).subscribe(a=>{this.AllBankAccountsForOwner=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0628\u0646\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readOwner(e){console.log("====Selected readOwner:: "+e.value),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,e.value??0),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,e.value??0),"OWNER"!=this.typeOfContSerialValue.toUpperCase()||this.getMaxContractCodePerOwner(this.curCOMId,this.account.periorty,e.value??0)}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(e,i,n,a){console.log("----is Emp"),this.atlasService.getBranchPerEmp(e,i,n).subscribe(l=>{this.AllBranches=l,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+a),this.atlasService.getOneBranch(a).subscribe(p=>{this.AllBranches=p},p=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllOwnerss(e,i){this.contractService.getAllOwners(e,i).subscribe(n=>{this.AllOwners=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0644\u0627\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readCustumer(e){console.log("====Selected readCustumer:: "+e),this.tenantsService.getOneCustomer(e).subscribe(i=>{console.log("====Selected branch:: "+i.current_branch),console.log("====Selected building:: "+i.current_building),console.log("====Selected unit:: "+i.current_unit),i.current_unit&&(this.form.patchValue({contractPerson:{customer_code:i.CUSCode},contractUnit:{branch_KeyField:i.current_branch,build_KeyField:i.current_building,unit_KeyField:i.current_unit}}),this.getBuildingPerBranch(this.curCOMId,this.account.periorty,i.current_branch),this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,i.current_building,"E"),this.readUnitById(i.current_unit))},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getRepresentativePerCustomer(this.curCOMId,this.account.periorty,e)}getRepresentativePerCustomer(e,i,n){this.tenantsService.getWorkRelatedWakeelPerCustomers(e,i,n).subscribe(a=>{this.AllRepresentativeForCustomer=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0645\u062b\u0644 \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getTenants(){this.AllTenants=null,this.tenantsService.getCustomersConfirmed(this.curCOMId,this.account.periorty).subscribe(e=>this.AllTenants=e)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("HTML.ChoosePDFFile").subscribe(e=>{this.chooseFile=e})}}xt.\u0275fac=function(e){return new(e||xt)(t.Y36(P.gz),t.Y36(Ot.d),t.Y36(h.X),t.Y36(H.W),t.Y36(d.QS),t.Y36(N.C),t.Y36(P.F0),t.Y36(tt.U),t.Y36(O.sK),t.Y36(I.Z),t.Y36(pt.g),t.Y36(ct.v),t.Y36(R.ux),t.Y36(it.d))},xt.\u0275cmp=t.Xpm({type:xt,selectors:[["app-contract-dialog"]],decls:336,vars:204,consts:[["mat-dialog-title","",4,"ngIf"],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","26.0",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","RCOCode"],["fxFlex","100","fxFlex.gt-sm","18.8",1,"px-1"],["matInput","","formControlName","RCOSubCode"],["fxFlex","100","fxFlex.gt-sm","20.0",1,"px-1"],["matInput","","formControlName","RCOContractNoOfMonths","required","",3,"change"],["fxFlex","100","fxFlex.gt-sm","35.0",1,"px-1"],["matInput","","formControlName","contractDate",3,"matDatepicker"],["matSuffix","",3,"for"],["contractDate",""],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","contractStartDate",3,"matDatepicker","dateChange"],["contractStartDate",""],["matInput","","formControlName","contractEndDate",3,"matDatepicker","dateChange"],["contractEndDate",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","RCOContractStatus","id","contStatusOpSel",3,"placeholder"],[3,"value"],["matInput","","formControlName","RCOEjarCode"],["matInput","","type","date","formControlName","RCOAlarmStartDate",1,"form-control"],["matInput","","formControlName","RCONoOfDaysForAlarm","required","",3,"change"],["matInput","","formControlName","RCONoOfDaysForEjarAlarm","required",""],["matInput","","formControlName","RCOAlarmCounter"],["formGroupName","contractPerson",3,"label"],["fxFlex","100","fxFlex.gt-sm","59.8",1,"px-1"],["formControlName","owner_KeyField","id","oneOwnerOpSel",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","39.8",1,"px-1"],["formControlName","owner_representative_KeyField","id","oneOwnerRepresOpSel",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["formControlName","bankAccount_KeyField","id","bnkaccOpSel",3,"placeholder"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["matInput","","formControlName","customer_code",3,"keyup.enter"],["tenCode",""],["appearance","outline","formControlName","customer_KeyField","id","oneCustomOpSel",1,"w-100",3,"placeholder","change"],["fxFlex","100","fxFlex.gt-sm","29.8",1,"px-1"],["formControlName","customer_work_representative","id","CustomRepsOpSel",3,"placeholder"],["fxLayout","row"],["target","_blank",3,"href",4,"ngIf"],[4,"ngIf"],["formGroupName","contractUnit",3,"label"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],["formControlName","build_KeyField","id","buildOneOpSel",3,"placeholder","selectionChange"],["formControlName","unit_KeyField","id","unitOneOpSel",3,"placeholder","selectionChange"],["formGroupName","contractValues",3,"label"],["matInput","","formControlName","RCOContractValue","required","",3,"change"],["matInput","","formControlName","RCOPayEveryMonthesNo","required","",3,"change"],["matInput","","formControlName","RCOMonthValue","required",""],["fxFlex","100","fxFlex.gt-sm","24.9",1,"px-1"],["matInput","","formControlName","RCOInsuranceValue"],["matInput","","formControlName","RCOSeekingValue"],["matInput","","formControlName","RCOMonthlyExpense"],["matInput","","formControlName","RCOOtherValue"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","RCOExpenseDesc"],["matInput","","formControlName","RCOElectricCounterReading"],["matInput","","formControlName","RCOWaterCounterReading"],["matInput","","formControlName","RCOGasCounterReading"],["matInput","","formControlName","RCOMonthlyElectricValue"],["matInput","","formControlName","RCOMonthlyWaterValue"],["matInput","","formControlName","RCOMonthlyGasValue"],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["formControlName","isInsurance"],["formControlName","isSeeking"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-dialog-title",""],["target","_blank",3,"href"],["formControlName","RCOPdf","type","file","accept",".pdf","id","fileInput",1,"file-input",3,"change"],["id","customButton",1,"custom-button",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e){const n=t.EpF();t.YNc(0,He,3,3,"h1",0),t.YNc(1,Ye,5,5,"h1",0),t.TgZ(2,"form",1)(3,"mat-tab-group",2)(4,"mat-tab",3),t.ALo(5,"translate"),t.TgZ(6,"div",4)(7,"div",5),t._UZ(8,"mat-label"),t.TgZ(9,"div",6)(10,"div",7)(11,"mat-form-field",8)(12,"mat-label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"input",9),t.qZA()(),t.TgZ(16,"div",10)(17,"mat-form-field",8)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",11),t.qZA()(),t.TgZ(22,"div",12)(23,"mat-form-field",8)(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"input",13),t.NdJ("change",function(l){return i.onChangeContractNoOfMonths(l)}),t.qZA()()(),t.TgZ(28,"div",14)(29,"mat-form-field",8)(30,"mat-label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"input",15)(34,"mat-datepicker-toggle",16)(35,"mat-datepicker",null,17),t.qZA()()()(),t.TgZ(37,"div",6)(38,"div",18)(39,"mat-form-field",8)(40,"mat-label"),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"input",19),t.NdJ("dateChange",function(l){return i.onChangeStartDate(l)}),t.qZA(),t._UZ(44,"mat-datepicker-toggle",16)(45,"mat-datepicker",null,20),t.qZA()(),t.TgZ(47,"div",18)(48,"mat-form-field",8)(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"input",21),t.NdJ("dateChange",function(l){return i.onChangeEndDate(l)}),t.qZA(),t._UZ(53,"mat-datepicker-toggle",16)(54,"mat-datepicker",null,22),t.qZA()()(),t.TgZ(56,"div",6)(57,"div",23)(58,"mat-form-field",8)(59,"mat-label"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"mat-select",24),t.ALo(63,"translate"),t.TgZ(64,"mat-option",25),t._uU(65,"-"),t.qZA(),t.TgZ(66,"mat-option",25),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"mat-option",25),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"mat-option",25),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"mat-option",25),t._uU(76),t.ALo(77,"translate"),t.qZA()()()(),t.TgZ(78,"div",23)(79,"mat-form-field",8)(80,"mat-label"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t._UZ(83,"input",26),t.qZA()(),t.TgZ(84,"div",23)(85,"mat-form-field",8)(86,"mat-label"),t._uU(87),t.ALo(88,"translate"),t.qZA(),t._UZ(89,"input",27),t.qZA()()(),t.TgZ(90,"div",6)(91,"div",23)(92,"mat-form-field",8)(93,"mat-label"),t._uU(94),t.ALo(95,"translate"),t.qZA(),t.TgZ(96,"input",28),t.NdJ("change",function(l){return i.onChangeDays(l)}),t.qZA()()(),t.TgZ(97,"div",23)(98,"mat-form-field",8)(99,"mat-label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t._UZ(102,"input",29),t.qZA()(),t.TgZ(103,"div",23)(104,"mat-form-field",8)(105,"mat-label"),t._uU(106),t.ALo(107,"translate"),t.qZA(),t._UZ(108,"input",30),t.qZA()()()()(),t.TgZ(109,"mat-tab",31),t.ALo(110,"translate"),t.TgZ(111,"div",4)(112,"div",5),t._UZ(113,"mat-label"),t.TgZ(114,"div",6)(115,"div",32)(116,"mat-form-field",8)(117,"mat-label"),t._uU(118),t.ALo(119,"translate"),t.qZA(),t.TgZ(120,"mat-select",33),t.NdJ("selectionChange",function(l){return i.readOwner(l)}),t.ALo(121,"translate"),t.TgZ(122,"mat-option",25),t._uU(123,"-"),t.qZA(),t.YNc(124,Ge,2,2,"mat-option",34),t.qZA()()(),t.TgZ(125,"div",35)(126,"mat-form-field",8)(127,"mat-label"),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.TgZ(130,"mat-select",36),t.ALo(131,"translate"),t.TgZ(132,"mat-option",25),t._uU(133,"-"),t.qZA(),t.YNc(134,Qe,2,2,"mat-option",34),t.qZA()()()(),t.TgZ(135,"div",6)(136,"div",37)(137,"mat-form-field",8)(138,"mat-label"),t._uU(139),t.ALo(140,"translate"),t.qZA(),t.TgZ(141,"mat-select",38),t.ALo(142,"translate"),t.TgZ(143,"mat-option",25),t._uU(144,"-"),t.qZA(),t.YNc(145,je,2,2,"mat-option",34),t.qZA()()()(),t.TgZ(146,"div",39)(147,"div",40)(148,"mat-form-field",8)(149,"mat-label"),t._uU(150),t.ALo(151,"translate"),t.qZA(),t.TgZ(152,"input",41,42),t.NdJ("keyup.enter",function(){t.CHM(n);const l=t.MAs(153);return t.KtG(i.searchByCode(l.value))}),t.qZA()()(),t.TgZ(154,"div",18)(155,"label"),t._uU(156),t.ALo(157,"translate"),t.qZA(),t.TgZ(158,"ng-select",43),t.NdJ("change",function(l){return i.readCustumer(l)}),t.ALo(159,"translate"),t.YNc(160,$e,2,2,"ng-option",34),t.qZA()(),t.TgZ(161,"div",44)(162,"mat-form-field",8)(163,"mat-label"),t._uU(164),t.ALo(165,"translate"),t.qZA(),t.TgZ(166,"mat-select",45),t.ALo(167,"translate"),t.TgZ(168,"mat-option",25),t._uU(169,"-"),t.qZA(),t.YNc(170,ze,2,2,"mat-option",34),t.qZA()()()()()(),t.TgZ(171,"div",46),t.YNc(172,Xe,3,1,"a",47),t.YNc(173,ti,7,3,"div",48),t.qZA()(),t.TgZ(174,"mat-tab",49),t.ALo(175,"translate"),t.TgZ(176,"div",4)(177,"div",5),t._UZ(178,"mat-label"),t.TgZ(179,"div",6)(180,"div",37)(181,"mat-form-field",8)(182,"mat-label"),t._uU(183),t.ALo(184,"translate"),t.qZA(),t.TgZ(185,"mat-select",50),t.NdJ("selectionChange",function(l){return i.getBuildings(l)}),t.ALo(186,"translate"),t.TgZ(187,"mat-option",25),t._uU(188,"-"),t.qZA(),t.YNc(189,ei,2,2,"mat-option",34),t.qZA()()()(),t.TgZ(190,"div",6)(191,"div",18)(192,"mat-form-field",8)(193,"mat-label"),t._uU(194),t.ALo(195,"translate"),t.qZA(),t.TgZ(196,"mat-select",51),t.NdJ("selectionChange",function(l){return i.readBuilding(l)}),t.ALo(197,"translate"),t.TgZ(198,"mat-option",25),t._uU(199,"-"),t.qZA(),t.YNc(200,ii,2,2,"mat-option",34),t.qZA()()(),t.TgZ(201,"div",18)(202,"mat-form-field",8)(203,"mat-label"),t._uU(204),t.ALo(205,"translate"),t.qZA(),t.TgZ(206,"mat-select",52),t.NdJ("selectionChange",function(l){return i.readUnit(l)}),t.ALo(207,"translate"),t.TgZ(208,"mat-option",25),t._uU(209,"-"),t.qZA(),t.YNc(210,ni,2,2,"mat-option",34),t.qZA()()()()()()(),t.TgZ(211,"mat-tab",53),t.ALo(212,"translate"),t.TgZ(213,"div",4)(214,"div",5),t._UZ(215,"mat-label"),t.TgZ(216,"div",6)(217,"div",23)(218,"mat-form-field",8)(219,"mat-label"),t._uU(220),t.ALo(221,"translate"),t.qZA(),t.TgZ(222,"input",54),t.NdJ("change",function(l){return i.onChangeContractValue(l)}),t.qZA()()(),t.TgZ(223,"div",23)(224,"mat-form-field",8)(225,"mat-label"),t._uU(226),t.ALo(227,"translate"),t.qZA(),t.TgZ(228,"input",55),t.NdJ("change",function(l){return i.onChangePayEvery(l)}),t.qZA()()(),t.TgZ(229,"div",23)(230,"mat-form-field",8)(231,"mat-label"),t._uU(232),t.ALo(233,"translate"),t.qZA(),t._UZ(234,"input",56),t.qZA()()()(),t.TgZ(235,"div",6)(236,"div",57)(237,"mat-form-field",8)(238,"mat-label"),t._uU(239),t.ALo(240,"translate"),t.qZA(),t._UZ(241,"input",58),t.qZA()(),t.TgZ(242,"div",57)(243,"mat-form-field",8)(244,"mat-label"),t._uU(245),t.ALo(246,"translate"),t.qZA(),t._UZ(247,"input",59),t.qZA()(),t.TgZ(248,"div",57)(249,"mat-form-field",8)(250,"mat-label"),t._uU(251),t.ALo(252,"translate"),t.qZA(),t._UZ(253,"input",60),t.qZA()(),t.TgZ(254,"div",57)(255,"mat-form-field",8)(256,"mat-label"),t._uU(257),t.ALo(258,"translate"),t.qZA(),t._UZ(259,"input",61),t.qZA()()(),t.TgZ(260,"div",6)(261,"div",62)(262,"mat-form-field",8)(263,"mat-label"),t._uU(264),t.ALo(265,"translate"),t.qZA(),t._UZ(266,"input",63),t.qZA()()(),t.TgZ(267,"div",6)(268,"div",23)(269,"mat-form-field",8)(270,"mat-label"),t._uU(271),t.ALo(272,"translate"),t.qZA(),t._UZ(273,"input",64),t.qZA()(),t.TgZ(274,"div",23)(275,"mat-form-field",8)(276,"mat-label"),t._uU(277),t.ALo(278,"translate"),t.qZA(),t._UZ(279,"input",65),t.qZA()(),t.TgZ(280,"div",23)(281,"mat-form-field",8)(282,"mat-label"),t._uU(283),t.ALo(284,"translate"),t.qZA(),t._UZ(285,"input",66),t.qZA()()(),t.TgZ(286,"div",6)(287,"div",23)(288,"mat-form-field",8)(289,"mat-label"),t._uU(290),t.ALo(291,"translate"),t.qZA(),t._UZ(292,"input",67),t.qZA()(),t.TgZ(293,"div",23)(294,"mat-form-field",8)(295,"mat-label"),t._uU(296),t.ALo(297,"translate"),t.qZA(),t._UZ(298,"input",68),t.qZA()(),t.TgZ(299,"div",23)(300,"mat-form-field",8)(301,"mat-label"),t._uU(302),t.ALo(303,"translate"),t.qZA(),t._UZ(304,"input",69),t.qZA()()()()(),t.TgZ(305,"mat-tab",70),t.ALo(306,"translate"),t.TgZ(307,"div",4)(308,"mat-checkbox",71),t._uU(309),t.ALo(310,"translate"),t.qZA(),t.TgZ(311,"mat-checkbox",72),t._uU(312),t.ALo(313,"translate"),t.qZA(),t.TgZ(314,"mat-checkbox",73),t._uU(315),t.ALo(316,"translate"),t.qZA(),t.TgZ(317,"mat-checkbox",74),t._uU(318),t.ALo(319,"translate"),t.qZA()()(),t.TgZ(320,"mat-tab",75),t.ALo(321,"translate"),t.TgZ(322,"div",76)(323,"div",77),t._UZ(324,"img",78),t.TgZ(325,"input",79,80),t.NdJ("change",function(l){return i.onFileChange(l.target.files)}),t.qZA(),t.TgZ(327,"button",81),t.NdJ("click",function(){t.CHM(n);const l=t.MAs(326);return t.KtG(l.click())}),t._uU(328),t.ALo(329,"translate"),t.qZA()(),t._UZ(330,"mat-divider")(331,"input-file",82),t.qZA()()()(),t._UZ(332,"br"),t.TgZ(333,"div",83)(334,"div",6),t.YNc(335,ri,3,4,"button",84),t.qZA()()}if(2&e){const n=t.MAs(36),a=t.MAs(46),l=t.MAs(55);t.Q6J("ngIf","T"==i.isRenewContract),t.xp6(1),t.Q6J("ngIf","T"!=i.isRenewContract),t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(5,86,"HTML.TAB_BASIC")),t.xp6(9),t.hij(" ",t.lcZ(14,88,"HTML.CODE_Contract"),""),t.xp6(6),t.hij(" ",t.lcZ(20,90,"HTML.SUBCODE"),""),t.xp6(6),t.Oqu(t.lcZ(26,92,"HTML.ContractNoOfMonths")),t.xp6(6),t.Oqu(t.lcZ(32,94,"HTML.ContractDate")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(7),t.Oqu(t.lcZ(42,96,"HTML.ContractStartDate")),t.xp6(2),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(6),t.Oqu(t.lcZ(51,98,"HTML.ContractEndDate")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(7),t.Oqu(t.lcZ(61,100,"HTML.ContractStatus")),t.xp6(2),t.s9C("placeholder",t.lcZ(63,102,"HTML.ContractStatus")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(68,104,"OPTIONS.NEW")),t.xp6(2),t.Q6J("value","R"),t.xp6(1),t.Oqu(t.lcZ(71,106,"OPTIONS.ReNew")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(74,108,"OPTIONS.Canceld")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(77,110,"OPTIONS.Finished")),t.xp6(5),t.Oqu(t.lcZ(82,112,"HTML.ContractEjarCode")),t.xp6(6),t.Oqu(t.lcZ(88,114,"HTML.ContractAlarmStartDate")),t.xp6(7),t.hij(" ",t.lcZ(95,116,"HTML.ContractNoOfDaysForAlarm"),""),t.xp6(6),t.hij(" ",t.lcZ(101,118,"HTML.ContractNoOfDaysForEjarAlarm"),""),t.xp6(6),t.hij(" ",t.lcZ(107,120,"HTML.ContractAlarmCounter"),""),t.xp6(3),t.s9C("label",t.lcZ(110,122,"HTML.TAB_ContractPersons")),t.xp6(9),t.hij(" ",t.lcZ(119,124,"HTML.OWNER"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(121,126,"HTML.OWNER")),t.xp6(4),t.Q6J("ngForOf",i.AllOwners),t.xp6(4),t.hij(" ",t.lcZ(129,128,"HTML.OwnerRepresentative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(131,130,"HTML.OwnerRepresentative")),t.xp6(4),t.Q6J("ngForOf",i.AllRepresentativeForOwner),t.xp6(5),t.hij(" ",t.lcZ(140,132,"HTML.BankAccounts"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(142,134,"HTML.BankAccounts")),t.xp6(4),t.Q6J("ngForOf",i.AllBankAccountsForOwner),t.xp6(5),t.Oqu(t.lcZ(151,136,"HTML.CODE_TENANT")),t.xp6(6),t.hij(" ",t.lcZ(157,138,"HTML.TENANT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(159,140,"HTML.TENANT")),t.xp6(2),t.Q6J("ngForOf",i.AllTenants),t.xp6(4),t.hij(" ",t.lcZ(165,142,"HTML.TenantRepresentative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(167,144,"HTML.TenantRepresentative")),t.xp6(4),t.Q6J("ngForOf",i.AllRepresentativeForCustomer),t.xp6(2),t.Q6J("ngIf",i.contractForDisplay.id&&i.fileToUpload&&i.can("view_ejar_pdf")),t.xp6(1),t.Q6J("ngIf",i.can("add_ejar_pdf")),t.xp6(1),t.s9C("label",t.lcZ(175,146,"HTML.TAB_ContractUnit")),t.xp6(9),t.hij(" ",t.lcZ(184,148,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(186,150,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(5),t.hij(" ",t.lcZ(195,152,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(197,154,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuilding),t.xp6(4),t.hij(" ",t.lcZ(205,156,"HTML.UNIT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(207,158,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnitsForBuilding),t.xp6(1),t.s9C("label",t.lcZ(212,160,"HTML.TAB_ContractValues")),t.xp6(9),t.Oqu(t.lcZ(221,162,"HTML.ContractValue")),t.xp6(6),t.Oqu(t.lcZ(227,164,"HTML.PayEveryMonthesNo")),t.xp6(6),t.Oqu(t.lcZ(233,166,"HTML.InstallmentValue")),t.xp6(7),t.Oqu(t.lcZ(240,168,"HTML.InsuranceValue")),t.xp6(6),t.Oqu(t.lcZ(246,170,"HTML.SeekingValue")),t.xp6(6),t.Oqu(t.lcZ(252,172,"HTML.MonthlyExpense")),t.xp6(6),t.Oqu(t.lcZ(258,174,"HTML.OtherValue")),t.xp6(7),t.Oqu(t.lcZ(265,176,"HTML.ExpenseDesc")),t.xp6(7),t.Oqu(t.lcZ(272,178,"HTML.ElectricCounterReading")),t.xp6(6),t.Oqu(t.lcZ(278,180,"HTML.WaterCounterReading")),t.xp6(6),t.Oqu(t.lcZ(284,182,"HTML.GasCounterReading")),t.xp6(7),t.Oqu(t.lcZ(291,184,"HTML.MonthlyElectricValue")),t.xp6(6),t.Oqu(t.lcZ(297,186,"HTML.MonthlyWaterValue")),t.xp6(6),t.Oqu(t.lcZ(303,188,"HTML.MonthlyGasValue")),t.xp6(3),t.s9C("label",t.lcZ(306,190,"HTML.TAB_SETTINGS")),t.xp6(4),t.Oqu(t.lcZ(310,192,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(313,194,"HTML.BLOCKED")),t.xp6(3),t.Oqu(t.lcZ(316,196,"HTML.InsuranceAffectAccount")),t.xp6(3),t.Oqu(t.lcZ(319,198,"HTML.SeekingAffectAccount")),t.xp6(2),t.s9C("label",t.lcZ(321,200,"HTML.TAB_DOCS")),t.xp6(4),t.Q6J("src",i.defaultDocImage,t.LSH),t.xp6(4),t.Oqu(t.lcZ(329,202,"HTML.AddPic")),t.xp6(7),t.Q6J("ngIf",i.contractForDisplay.id&&i.can("change_rentcontracts")||!i.contractForDisplay.id&&i.can("add_rentcontracts"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,C.sg,C.O5,d.sg,d.u,d.x0,T.xw,T.SQ,T.Wh,T.yH,q.ey,w.lW,Mt.oG,Q.Mq,Q.hl,Q.nW,y.ZT,y.uh,y.H8,$.Hw,Z.Nt,v.KE,v.hX,v.R9,X.d,D.gD,bt.uX,bt.SP,Ht.tW,At.w9,At.jq,O.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.file-input{display:none}.custom-button{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px}.custom-button:hover{background-color:#0056b3}\n"],encapsulation:2});var Oe=b(529),Ut=b(1948),li=b(7781),ci=b(9045),xe=b(7948);class Ue{}var Se=b(900);function ui(o,e){if(1&o&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.value),t.xp6(1),t.hij(" ",i.name," ")}}function di(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function mi(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.remove(a.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function pi(o,e){if(1&o&&(t.TgZ(0,"div",26)(1,"div",27),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t._uU(4),t.qZA(),t.TgZ(5,"div",27),t._uU(6),t.qZA(),t.TgZ(7,"div",27),t._uU(8),t.qZA(),t.TgZ(9,"div",27),t._uU(10),t.qZA(),t.TgZ(11,"div",27)(12,"div",28),t.YNc(13,mi,4,3,"button",29),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.CURRelationTypeDisplay),t.xp6(2),t.Oqu(i.CURName),t.xp6(2),t.hij("",i.CURMobile," "),t.xp6(2),t.hij("",i.CURNationalID," "),t.xp6(2),t.hij("",i.CURBirthDate," "),t.xp6(3),t.Q6J("ngIf",n.can("delete_tenantrelative"))}}class Rt{constructor(e,i,n,a,l,p,f,A,S,U){this.dialogRef=e,this.dataInjected=i,this.atlasService=n,this._CustomerService=a,this.translateService=l,this.localStore=p,this.appService=f,this.dialog=A,this.snackBar=S,this.fb=U,this.passwordHide=!0,this.relatives=[],this.userPerm=[]}ngOnInit(){this.relatives=this.appService.getRelative(),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({customer_KeyField:[null,d.kI.required],CURRelationType:[null,d.kI.required],CURName:[null,d.kI.required],CURMobile:null,CURPic:null,nationalID:null,birthday:null,CURWorkNature:null,CURNotes:null}),console.log(this.dataInjected.custId),this.dataForm.patchValue({customer_KeyField:this.dataInjected.custId}),this.oneRelated=new Ue,this.curPeriority=this.dataInjected.periorty,this.action="Patch",this.getTenantRelated(),this.prepareMsgLanguage()}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getTenantRelated(){this.cusRelated=null,this._CustomerService.getRelatedPerCustomers(this.curCOMId,this.curPeriority,this.dataInjected.custId).subscribe(e=>this.cusRelated=e)}mapFormValue_toTable(){const e=new C.uU("en-GB").transform(this.dataForm.value.birthday,"dd/MM/yyyy");null!=this.dataForm.value.birthday&&(this.oneRelated.CURBirthDate=e),this.oneRelated.customer_KeyField=this.dataInjected.custId,this.oneRelated.CURRelationType=this.dataForm.value.CURRelationType,this.oneRelated.CURName=this.dataForm.value.CURName,this.oneRelated.CURMobile=this.dataForm.value.CURMobile,this.oneRelated.CURNationalID=this.dataForm.value.nationalID,this.oneRelated.CURWorkNature=this.dataForm.value.CURWorkNature,this.oneRelated.CURNotes=this.dataForm.value.CURNotes}onSave(){this.mapFormValue_toTable(),this._CustomerService.addRelatedForTenant(this.oneRelated).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(e){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this._CustomerService.deleteRelativeForTenant(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}Rt.\u0275fac=function(e){return new(e||Rt)(t.Y36(y.so),t.Y36(y.WI),t.Y36(I.Z),t.Y36(ct.v),t.Y36(O.sK),t.Y36(N.C),t.Y36(Se.z),t.Y36(y.uw),t.Y36(R.ux),t.Y36(d.QS))},Rt.\u0275cmp=t.Xpm({type:Rt,selectors:[["app-cus-related-dialog"]],decls:78,vars:45,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","CURRelationType","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","CURName"],["matInput","","formControlName","CURMobile"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","nationalID"],["matInput","","formControlName","birthday",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],[3,"value"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",6),t.ALo(10,"translate"),t.YNc(11,ui,2,2,"mat-option",7),t.qZA()()(),t.TgZ(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",8),t.qZA()(),t.TgZ(18,"div",4)(19,"mat-form-field",5)(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"input",9),t.qZA()()(),t.TgZ(24,"div",3)(25,"div",10)(26,"mat-form-field",5)(27,"mat-label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",11),t.qZA()(),t.TgZ(31,"div",10)(32,"mat-form-field",5)(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",12)(37,"mat-datepicker-toggle",13)(38,"mat-datepicker",null,14),t.qZA()()()()(),t.TgZ(40,"div",15)(41,"div",3),t.YNc(42,di,4,4,"button",16),t.TgZ(43,"button",17),t.NdJ("click",function(){return i.close()}),t._uU(44),t.ALo(45,"translate"),t.qZA()()(),t._UZ(46,"mat-divider"),t.TgZ(47,"div",18)(48,"mat-card")(49,"div",19)(50,"h2"),t._uU(51),t.ALo(52,"translate"),t.qZA()(),t._UZ(53,"mat-divider"),t.TgZ(54,"div",20)(55,"div",21)(56,"div",22)(57,"h2"),t._uU(58),t.ALo(59,"translate"),t.qZA()(),t.TgZ(60,"div",22)(61,"h2"),t._uU(62),t.ALo(63,"translate"),t.qZA()(),t.TgZ(64,"div",22)(65,"h2"),t._uU(66),t.ALo(67,"translate"),t.qZA()(),t.TgZ(68,"div",22)(69,"h2"),t._uU(70),t.ALo(71,"translate"),t.qZA()(),t.TgZ(72,"div",22)(73,"h2"),t._uU(74),t.ALo(75,"translate"),t.qZA()(),t._UZ(76,"div",22),t.qZA(),t.YNc(77,pi,14,6,"div",23),t.qZA()()()()),2&e){const n=t.MAs(39);t.Q6J("formGroup",i.dataForm),t.xp6(7),t.hij(" ",t.lcZ(8,19,"HTML.Relative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(10,21,"HTML.Relative")),t.xp6(2),t.Q6J("ngForOf",i.relatives),t.xp6(4),t.Oqu(t.lcZ(16,23,"FIELD.NAME")),t.xp6(6),t.Oqu(t.lcZ(22,25,"HTML.MOBILE")),t.xp6(7),t.Oqu(t.lcZ(29,27,"HTML.IDNUMBER")),t.xp6(6),t.Oqu(t.lcZ(35,29,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(5),t.Q6J("ngIf",i.can("add_tenantrelative")||0==i.curPeriority),t.xp6(2),t.Oqu(t.lcZ(45,31,"BTN.CANCEL")),t.xp6(7),t.Oqu(t.lcZ(52,33,"HTML.Relative")),t.xp6(7),t.hij(" ",t.lcZ(59,35,"HTML.Relative")," "),t.xp6(4),t.hij(" ",t.lcZ(63,37,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(67,39,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(71,41,"HTML.IDNUMBER")," "),t.xp6(4),t.hij(" ",t.lcZ(75,43,"HTML.BIRTH_DATE")," "),t.xp6(3),t.Q6J("ngForOf",i.cusRelated)}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,C.sg,C.O5,d.sg,d.u,T.xw,T.Wh,T.yH,q.ey,w.lW,w.nh,W.a8,Q.Mq,Q.hl,Q.nW,y.xY,y.H8,$.Hw,Z.Nt,v.KE,v.hX,v.R9,X.d,D.gD,rt.gM,O.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});var Te=b(6331),Wt=b(1481);function hi(o,e){if(1&o&&(t.TgZ(0,"div")(1,"a",29)(2,"mat-icon"),t._uU(3,"download"),t.qZA()()()),2&o){const i=t.oxw(2);t.xp6(1),t.s9C("href",i.registerFileToUpload,t.LSH)}}function gi(o,e){if(1&o&&(t.ynx(0),t._UZ(1,"img",32),t.BQk()),2&o){const i=t.oxw(3);t.xp6(1),t.Q6J("src",i.registerFileUrl,t.LSH)}}function _i(o,e){if(1&o&&t._UZ(0,"iframe",33),2&o){const i=t.oxw(3);t.Q6J("src",i.sanitizedFileUrl,t.uOi)}}function Ci(o,e){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,gi,2,1,"ng-container",30),t.YNc(2,_i,1,1,"ng-template",null,31,t.W1O),t.qZA()),2&o){const i=t.MAs(3),n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.isWekalaImage)("ngIfElse",i)}}function fi(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",24),t.YNc(1,hi,4,1,"div",25),t.TgZ(2,"div",26)(3,"input",27),t.NdJ("change",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.onRegisterFileSelected(a.target.files,a))}),t.qZA(),t.TgZ(4,"button",28),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.callOnRegisterFileSelect())}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.YNc(7,Ci,4,2,"div",25),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.currentRelativeID&&i.registerFileToUpload),t.xp6(4),t.hij(" ",t.lcZ(6,3,"HTML.ChooseWekalaFile"),""),t.xp6(2),t.Q6J("ngIf",i.registerFileUrl)}}function Ti(o,e){1&o&&(t.TgZ(0,"div",34)(1,"mat-form-field",6)(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",35),t.qZA()()),2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"HTML.IDNUMBER")))}function bi(o,e){1&o&&(t.TgZ(0,"div",34)(1,"mat-form-field",6)(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",36),t.qZA()()),2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"HTML.WorkNature")))}function vi(o,e){1&o&&(t.TgZ(0,"div",4)(1,"div",37)(2,"mat-form-field",6)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"input",38),t.qZA()(),t.TgZ(7,"div",8)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",39),t.qZA()()()),2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,2,"HTML.ADDRESS")),t.xp6(6),t.Oqu(t.lcZ(11,4,"HTML.ShortAddress")))}function Ai(o,e){if(1&o&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function yi(o,e){if(1&o&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Zi(o,e){if(1&o&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Oi(o,e){if(1&o&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function xi(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"mat-form-field",6)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-select",40),t.NdJ("selectionChange",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.getGovernorate(a))}),t.ALo(7,"translate"),t.TgZ(8,"mat-option",41),t._uU(9,"-"),t.qZA(),t.YNc(10,Ai,2,2,"mat-option",42),t.qZA()()(),t.TgZ(11,"div",5)(12,"mat-form-field",6)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"mat-select",43),t.NdJ("selectionChange",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.getCity(a))}),t.ALo(17,"translate"),t.TgZ(18,"mat-option",41),t._uU(19,"-"),t.qZA(),t.YNc(20,yi,2,2,"mat-option",42),t.qZA()()(),t.TgZ(21,"div",5)(22,"mat-form-field",6)(23,"mat-label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"mat-select",44),t.NdJ("selectionChange",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.getAria(a))}),t.ALo(27,"translate"),t.TgZ(28,"mat-option",41),t._uU(29,"-"),t.qZA(),t.YNc(30,Zi,2,2,"mat-option",42),t.qZA()()(),t.TgZ(31,"div",5)(32,"mat-form-field",6)(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"mat-select",45),t.ALo(37,"translate"),t.TgZ(38,"mat-option",41),t._uU(39,"-"),t.qZA(),t.YNc(40,Oi,2,2,"mat-option",42),t.qZA()()()()}if(2&o){const i=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,12,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(7,14,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(4),t.Oqu(t.lcZ(15,16,"HTML.GOVERN")),t.xp6(2),t.s9C("placeholder",t.lcZ(17,18,"HTML.GOVERN")),t.xp6(4),t.Q6J("ngForOf",i.Governorates),t.xp6(4),t.Oqu(t.lcZ(25,20,"HTML.CITY")),t.xp6(2),t.s9C("placeholder",t.lcZ(27,22,"HTML.CITY")),t.xp6(4),t.Q6J("ngForOf",i.Cities),t.xp6(4),t.Oqu(t.lcZ(35,24,"HTML.REGION")),t.xp6(2),t.s9C("placeholder",t.lcZ(37,26,"HTML.REGION")),t.xp6(4),t.Q6J("ngForOf",i.Areas)}}function Ui(o,e){1&o&&(t.TgZ(0,"div",4)(1,"div",46)(2,"mat-form-field",6)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"input",47),t.qZA()(),t.TgZ(7,"div",8)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",48),t.qZA()(),t.TgZ(13,"div",8)(14,"mat-form-field",6)(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",49),t.qZA()(),t.TgZ(19,"div",8)(20,"mat-form-field",6)(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"input",50),t.qZA()()()),2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,4,"HTML.STREET_NAME")),t.xp6(6),t.Oqu(t.lcZ(11,6,"HTML.BUILDING_NUMBER")),t.xp6(6),t.Oqu(t.lcZ(17,8,"HTML.ZIP")),t.xp6(6),t.Oqu(t.lcZ(23,10,"HTML.BUILDING_SubNUMBER")))}function Si(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function wi(o,e){1&o&&(t.TgZ(0,"div",21)(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"HTML.IDNUMBER")," "))}function Ni(o,e){1&o&&(t.TgZ(0,"div",21)(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"HTML.IsRepresentative")," "))}function Fi(o,e){1&o&&(t.TgZ(0,"div",21)(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"HTML.BIRTH_DATE")," "))}function Ii(o,e){if(1&o&&(t.TgZ(0,"div",53),t._uU(1),t.qZA()),2&o){const i=t.oxw().$implicit;t.xp6(1),t.hij("",i.CURNationalID," ")}}function Di(o,e){if(1&o&&(t.TgZ(0,"div",53),t._uU(1),t.qZA()),2&o){const i=t.oxw().$implicit;t.xp6(1),t.hij("",i.CURisRepresentative," ")}}function Li(o,e){if(1&o&&(t.TgZ(0,"div",53),t._uU(1),t.qZA()),2&o){const i=t.oxw().$implicit;t.xp6(1),t.hij("",i.CURBirthDate," ")}}function Mi(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.displayRow(a))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.VIEW"))}function Ri(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.remove(a.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function qi(o,e){if(1&o&&(t.TgZ(0,"div",52)(1,"div",53),t._uU(2),t.qZA(),t.TgZ(3,"div",53),t._uU(4),t.qZA(),t.TgZ(5,"div",53),t._uU(6),t.qZA(),t.YNc(7,Ii,2,1,"div",54),t.YNc(8,Di,2,1,"div",54),t.YNc(9,Li,2,1,"div",54),t.TgZ(10,"div",53)(11,"div",55),t.YNc(12,Mi,4,3,"button",56),t.YNc(13,Ri,4,3,"button",57),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.CURName),t.xp6(2),t.hij("",i.CURMobile," "),t.xp6(2),t.hij("",i.CURWorkNature," "),t.xp6(1),t.Q6J("ngIf",n.personType===n.personTypeWakeel),t.xp6(1),t.Q6J("ngIf",n.personType===n.personTypeWakeel),t.xp6(1),t.Q6J("ngIf",n.personType===n.personTypeWakeel),t.xp6(3),t.Q6J("ngIf",n.can(n.personType===n.personTypeWakeel?"view_tenant_workrelated_agency":"view_tenant_workrelated")),t.xp6(1),t.Q6J("ngIf",n.can(n.personType===n.personTypeWakeel?"delete_tenant_workrelated_agency":"delete_tenant_workrelated"))}}class St{constructor(e,i,n,a,l,p,f,A,S,U,M,K,z){this.dialogRef=e,this.dataInjected=i,this.atlasService=n,this._CustomerService=a,this.translateService=l,this.localStore=p,this.appService=f,this.dialog=A,this.snackBar=S,this.codesService=U,this.sanitizer=M,this.fb=K,this.appSettings=z,this.passwordHide=!0,this.country_const=(new x.I).Countries,this.governorate_const=(new x.I).Governorates,this.city_const=(new x.I).City,this.region_const=(new x.I).Regions,this.relatives=[],this.currentRelativeID=null,this.currentRowMode=null,this.registerFileToUpload=null,this.userPerm=[],this.registerFileUrl=null,this.isWekalaImage=!1,this.registerFileType=null,this.defaultCusImage=this.noImageUrl,this.CusImageToUpload=null,this.isResp=!1,this.Countries=[],this.Governorates=[],this.Cities=[],this.Areas=[],this.baseUrl=this.appSettings.settings.url,this.secondPartUrl=new L.P(this.baseUrl).api_constant,this.noImageUrl=new L.P(this.baseUrl).noImage}ngOnInit(){this.personType=this.dataInjected.personType,this.personTypeWakeel="W",this.personTypeResp="P",this.currentRowMode="INSERT",this.relatives=this.appService.getRelative(),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({id:null,customer_KeyField:[null,d.kI.required],CURRelationType:"K",CURName:[null,d.kI.required],CURMobile:null,nationalID:null,birthday:null,CURWorkNature:null,CURNotes:null,image:null,CURisRepresentative:!1,CURAddress:null,CURShortAddress:null,CURStreetName:null,CURBuildingNumber:null,CURBuildingSubNumber:null,CURZibCode:null,Country_CTTKeyField:null,Governorate_CTTKeyField:null,City_CTTKeyField:null,Area_CTTKeyField:null,CURRepresentativePdf:null,CURIdPdf:null}),console.log(this.dataInjected.custId),this.dataForm.patchValue({customer_KeyField:this.dataInjected.custId}),this.personType==this.personTypeWakeel&&this.dataForm.patchValue({CURisRepresentative:!0}),this.oneRelated=new Ue,this.curPeriority=this.dataInjected.periorty,this.action="Patch",this.getTenantRelated(),this.getCountries(this.curCOMId,this.curPeriority),this.prepareMsgLanguage()}getFileType(e){const i=e.type;return"application/pdf"===i?"PDF":i.startsWith("image/")?"IMAGE":"NOT"}onRegisterFileSelected(e,i){if(e&&e.length){switch(this.getFileType(e.item(0))){case"IMAGE":this.isWekalaImage=!0,this.registerFileType=this.imageFileSelected;break;case"PDF":this.isWekalaImage=!1,this.registerFileType=this.pdfFileSelected;break;case"NOT":this.isWekalaImage=!1,this.registerFileType=this.otherFileSelected}const l=new FileReader;l.onload=A=>{this.registerFileUrl=l.result,this.sanitizedFileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(A.target.result)},l.readAsDataURL(e.item(0)),this.registerFileToUpload=e.item(0),document.getElementById("wekalaCustomButton").textContent=e.length>0?e[0].name:this.chooseWekalaFilePDF}}getFileTypeFromPath(e){switch(e.split(".").pop()?.toLowerCase().substring(0,3)){case"jpg":case"jpe":case"png":case"gif":return"Image";case"pdf":return"PDF";case"doc":return"Word Document";case"xls":return"Excel Document";default:return"Unknown File Type"}}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getTenantRelated(){this.cusRelated=null,this.personType==this.personTypeWakeel&&this._CustomerService.getWorkRelatedWakeelPerCustomers(this.curCOMId,this.curPeriority,this.dataInjected.custId).subscribe(e=>this.cusRelated=e),this.personType==this.personTypeResp&&this._CustomerService.getWorkRelatedNotWakeelPerCustomers(this.curCOMId,this.curPeriority,this.dataInjected.custId).subscribe(e=>this.cusRelated=e)}mapFormValue_toTable(){const e=new C.uU("en-GB").transform(this.dataForm.value.birthday,"dd/MM/yyyy");null!=this.dataForm.value.birthday&&(this.oneRelated.CURBirthDate=e),this.oneRelated.CURisRepresentative=0==this.dataForm.value.CURisRepresentative?"F":"T",this.oneRelated.CURPic=this.dataForm.value.image,this.oneRelated.customer_KeyField=this.dataInjected.custId,this.oneRelated.CURRelationType=this.dataForm.value.CURRelationType,this.oneRelated.CURName=this.dataForm.value.CURName,this.oneRelated.CURMobile=this.dataForm.value.CURMobile,this.oneRelated.CURNationalID=this.dataForm.value.nationalID,this.oneRelated.CURWorkNature=this.dataForm.value.CURWorkNature,this.oneRelated.CURNotes=this.dataForm.value.CURNotes,this.oneRelated.CURAddress=this.dataForm.value.CURAddress,this.oneRelated.CURShortAddress=this.dataForm.value.CURShortAddress,this.oneRelated.CURStreetName=this.dataForm.value.CURStreetName,this.oneRelated.CURBuildingNumber=this.dataForm.value.CURBuildingNumber,this.oneRelated.CURBuildingSubNumber=this.dataForm.value.CURBuildingSubNumber,this.oneRelated.CURZibCode=this.dataForm.value.CURZibCode,this.dataForm.value.Country_CTTKeyField&&(this.oneRelated.Country_CTTKeyField=this.dataForm.value.Country_CTTKeyField),this.dataForm.value.Governorate_CTTKeyField&&(this.oneRelated.Governorate_CTTKeyField=this.dataForm.value.Governorate_CTTKeyField),this.dataForm.value.City_CTTKeyField&&(this.oneRelated.City_CTTKeyField=this.dataForm.value.City_CTTKeyField),this.dataForm.value.Area_CTTKeyField&&(this.oneRelated.Area_CTTKeyField=this.dataForm.value.Area_CTTKeyField),this.dataForm.value.CURRepresentativePdf&&(this.oneRelated.CURRepresentativePdf=this.dataForm.value.CURRepresentativePdf),this.dataForm.value.CURIdPdf&&(this.oneRelated.CURIdPdf=this.dataForm.value.CURIdPdf)}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultCusImage=n.target.result},i.readAsDataURL(this.CusImageToUpload)}callOnRegisterFileSelect(){document.getElementById("wekalaFileInput").click()}onSave(){this.mapFormValue_toTable(),"INSERT"==this.currentRowMode?this._CustomerService.addRelatedForTenantWithPic(this.oneRelated,this.CusImageToUpload,this.registerFileToUpload).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()}):"EDIT"==this.currentRowMode&&this._CustomerService.editRelatedForTenantWithPic(this.oneRelated,this.currentRelativeID,this.CusImageToUpload,this.registerFileToUpload).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}displayRow(e){var i;this.isWekalaImage=!1,this.registerFileUrl="",this.sanitizedFileUrl="",console.log("===***Press Display button***==="),this.currentRelativeID=e.id,this.currentRowMode="EDIT",e.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.curPeriority,e.Country_CTTKeyField),e.Governorate_CTTKeyField&&this.getCityPerGoverno(this.curCOMId,this.curPeriority,e.Governorate_CTTKeyField),e.City_CTTKeyField&&this.getAreaPerCity(this.curCOMId,this.curPeriority,e.City_CTTKeyField),this.registerFileToUpload=e.CURRepresentativePdf,this.registerFileToUpload&&("Image"==(i=this.getFileTypeFromPath(this.registerFileToUpload.toString()))?(this.isWekalaImage=!0,this.registerFileUrl=this.registerFileToUpload.toString()):"PDF"==i?(this.isWekalaImage=!1,this.sanitizedFileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.registerFileToUpload.name)):console.log("Selected file is of another type:",i)),"T"==e.CURisRepresentative&&(this.isResp=!0),"F"==e.CURisRepresentative&&(this.isResp=!1),this.dataForm.patchValue({id:e.id,customer_KeyField:e.customer_KeyField,CURRelationType:e.CURRelationType,CURName:e.CURName,CURMobile:e.CURMobile,image:e.CURPic,nationalID:e.CURNationalID,birthday:e.CURBirthDate,CURWorkNature:e.CURWorkNature,CURNotes:e.CURNotes,CURisRepresentative:this.isResp,CURAddress:e.CURAddress,CURShortAddress:e.CURShortAddress,CURStreetName:e.CURStreetName,CURBuildingNumber:e.CURBuildingNumber,CURBuildingSubNumber:e.CURBuildingSubNumber,CURZibCode:e.CURZibCode,Country_CTTKeyField:e.Country_CTTKeyField,Governorate_CTTKeyField:e.Governorate_CTTKeyField,City_CTTKeyField:e.City_CTTKeyField,Area_CTTKeyField:e.Area_CTTKeyField,CURRepresentativePdf:e.CURRepresentativePdf,CURIdPdf:e.CURIdPdf})}remove(e){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this._CustomerService.deleteRelativeForTenant(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(e){this.getGovernoratePerCountry(this.curCOMId,this.curPeriority,e.value)}getGovernoratePerCountry(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.governorate_const,n).subscribe(a=>{this.Governorates=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(e){this.getCityPerGoverno(this.curCOMId,this.curPeriority,e.value)}getCityPerGoverno(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.city_const,n).subscribe(a=>{this.Cities=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(e){this.getAreaPerCity(this.curCOMId,this.curPeriority,e.value)}getAreaPerCity(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.region_const,n).subscribe(a=>{this.Areas=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e}),this.translateService.get("HTML.ChooseWekalaFile").subscribe(e=>{this.chooseWekalaFilePDF=e}),this.translateService.get("MESSAGE.ImageSelected").subscribe(e=>{this.imageFileSelected=e}),this.translateService.get("MESSAGE.PDFSelected").subscribe(e=>{this.pdfFileSelected=e}),this.translateService.get("MESSAGE.OtherFileSelected").subscribe(e=>{this.otherFileSelected=e})}}function Ei(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function Pi(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function ki(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Code is required"),t.qZA())}function Bi(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Code isn't long enough, minimum of 4 characters"),t.qZA())}function Ki(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Password is required"),t.qZA())}function Ji(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Password isn't long enough, minimum of 6 characters"),t.qZA())}function Hi(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-form-field",99)(1,"mat-label")(2,"mat-icon"),t._uU(3,"vpn_key"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"input",100),t.TgZ(7,"mat-icon",101),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.passwordHide=!a.passwordHide)}),t._uU(8),t.qZA(),t.YNc(9,Ki,2,0,"mat-error",1),t.YNc(10,Ji,2,0,"mat-error",1),t.qZA()}if(2&o){const i=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,5,"HTML.PASSWORD"),""),t.xp6(2),t.Q6J("type",i.passwordHide?"password":"text"),t.xp6(2),t.Oqu(i.passwordHide?"visibility":"visibility_off"),t.xp6(1),t.Q6J("ngIf",null==i.form.controls.password.errors?null:i.form.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",i.form.controls.password.hasError("minlength"))}}function Wi(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"First name is required"),t.qZA())}function Vi(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Last name is required"),t.qZA())}function Yi(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Mobile is required"),t.qZA())}function Gi(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Qi(o,e){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Oqu(i.fileType)}}function ji(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function $i(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function zi(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.UNTUnitNumber," ")}}function Xi(o,e){1&o&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HTML.ElectricityCounterNumber")," "))}function tn(o,e){1&o&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HTML.WaterCounterNumber")," "))}function en(o,e){1&o&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HTML.GasCounterNumber")," "))}function nn(o,e){if(1&o&&(t.TgZ(0,"ng-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName,"")}}function on(o,e){if(1&o&&(t.TgZ(0,"ng-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName,"")}}function an(o,e){if(1&o&&(t.TgZ(0,"div")(1,"a",102)(2,"mat-icon"),t._uU(3,"download"),t.qZA()()()),2&o){const i=t.oxw();t.xp6(1),t.s9C("href",i.natIDfileToUpload,t.LSH)}}function rn(o,e){if(1&o&&(t.ynx(0),t._UZ(1,"img",105),t.BQk()),2&o){const i=t.oxw(2);t.xp6(1),t.Q6J("src",i.fileUrl,t.LSH)}}function sn(o,e){if(1&o&&t._UZ(0,"iframe",106),2&o){const i=t.oxw(2);t.Q6J("src",i.sanitizedUrl,t.uOi)}}function ln(o,e){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,rn,2,1,"ng-container",103),t.YNc(2,sn,1,1,"ng-template",null,104,t.W1O),t.qZA()),2&o){const i=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isImage)("ngIfElse",i)}}function cn(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function un(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function dn(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function mn(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function pn(o,e){1&o&&(t.TgZ(0,"mat-tab",107),t.ALo(1,"translate"),t.TgZ(2,"div",6),t._UZ(3,"mat-label"),t.TgZ(4,"div",5)(5,"mat-checkbox",108),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"mat-checkbox",109),t._uU(9),t.ALo(10,"translate"),t.qZA()()()()),2&o&&(t.s9C("label",t.lcZ(1,3,"HTML.TAB_SETTINGS")),t.xp6(6),t.Oqu(t.lcZ(7,5,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(10,7,"HTML.BLOCKED")))}function hn(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function gn(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function _n(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",110),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.saveUpdate(a.CUS.id))}),t.YNc(1,hn,3,3,"span",1),t.YNc(2,gn,3,3,"span",1),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.CUS.id),t.xp6(1),t.Q6J("ngIf",i.CUS.id)}}function Cn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",111),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.customerRelated(a.CUS.id))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.Accompany"))}}function fn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",111),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.changePassword(a.CUS))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.PasswordChange"))}}function Tn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",111),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.confirmData(a.CUS.id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(1),t.Oqu(t.lcZ(2,2,"BTN.SUBMIT"))}}St.\u0275fac=function(e){return new(e||St)(t.Y36(y.so),t.Y36(y.WI),t.Y36(I.Z),t.Y36(ct.v),t.Y36(O.sK),t.Y36(N.C),t.Y36(Se.z),t.Y36(y.uw),t.Y36(R.ux),t.Y36(Ot.d),t.Y36(Wt.H7),t.Y36(d.QS),t.Y36(it.d))},St.\u0275cmp=t.Xpm({type:St,selectors:[["app-cus-workrelated-dialog"]],decls:53,vars:31,consts:[["autocomplete","off","fxLayout","row wrap",1,"user-form","dialog-content",3,"formGroup"],["fxFlex","100","fxFlex.gt-sm","25","class","px-2",4,"ngIf"],["fxFlex","100",1,"px-2",3,"fxFlex.gt-sm"],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100","form-row"],["fxFlex","100","fxFlex.gt-sm","25.0",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","CURName"],["fxFlex","100","fxFlex.gt-sm","20.0",1,"px-1"],["matInput","","formControlName","CURMobile"],["fxFlex","100","fxFlex.gt-sm","54.9","class","px-1",4,"ngIf","ngIfElse"],["worknature",""],["fxLayout","row","fxLayoutAlign","space-between center","class","w-100 form-row",4,"ngIf"],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["mat-dialog-content",""],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-header-cell",4,"ngIf"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","25",1,"px-2"],[4,"ngIf"],["fxLayout","row"],["type","file","accept","image/*,.pdf","id","wekalaFileInput",1,"file-input",3,"change"],["id","wekalaCustomButton",1,"custom-button",3,"click"],["id","registerdownloadicon","target","_blank",3,"href"],[4,"ngIf","ngIfElse"],["pdfWekalaPreview",""],[2,"max-width","100%","height","250px",3,"src"],["frameborder","0",2,"width","100%","height","250px",3,"src"],["fxFlex","100","fxFlex.gt-sm","54.9",1,"px-1"],["matInput","","formControlName","nationalID"],["matInput","","formControlName","CURWorkNature"],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["matInput","","formControlName","CURAddress"],["matInput","","formControlName","CURShortAddress"],["formControlName","Country_CTTKeyField","id","own_countOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","Governorate_CTTKeyField","id","own_governoOpSel",3,"placeholder","selectionChange"],["formControlName","City_CTTKeyField","id","own_cityOpSel",3,"placeholder","selectionChange"],["formControlName","Area_CTTKeyField","id","own_areaOpSel",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","40.0",1,"px-1"],["matInput","","formControlName","CURStreetName"],["matInput","","formControlName","CURBuildingNumber"],["matInput","","formControlName","CURZibCode"],["matInput","","formControlName","CURBuildingSubNumber"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],["class","mat-mdc-cell",4,"ngIf"],[1,"p-2","actions"],["mat-mini-fab","","color","primary","class","mx-1",3,"matTooltip","click",4,"ngIf"],["class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",1,"mx-1",3,"matTooltip","click"],[1,"mx-1",3,"matTooltip","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0),t.YNc(1,fi,8,5,"div",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"input",7),t.qZA()(),t.TgZ(11,"div",8)(12,"mat-form-field",6)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",9),t.qZA()(),t.YNc(17,Ti,6,3,"div",10),t.YNc(18,bi,6,3,"ng-template",null,11,t.W1O),t.qZA(),t.YNc(20,vi,13,6,"div",12),t.YNc(21,xi,41,28,"div",12),t.YNc(22,Ui,25,12,"div",12),t.qZA(),t.TgZ(23,"div",13)(24,"div",14),t.YNc(25,Si,4,4,"button",15),t.TgZ(26,"button",16),t.NdJ("click",function(){return i.close()}),t._uU(27),t.ALo(28,"translate"),t.qZA()()()(),t._UZ(29,"mat-divider"),t.qZA(),t.TgZ(30,"div",17)(31,"div",18)(32,"mat-card"),t._UZ(33,"mat-divider"),t.TgZ(34,"div",19)(35,"div",20)(36,"div",21)(37,"h2"),t._uU(38),t.ALo(39,"translate"),t.qZA()(),t.TgZ(40,"div",21)(41,"h2"),t._uU(42),t.ALo(43,"translate"),t.qZA()(),t.TgZ(44,"div",21)(45,"h2"),t._uU(46),t.ALo(47,"translate"),t.qZA()(),t.YNc(48,wi,4,3,"div",22),t.YNc(49,Ni,4,3,"div",22),t.YNc(50,Fi,4,3,"div",22),t._UZ(51,"div",21),t.qZA(),t.YNc(52,qi,14,8,"div",23),t.qZA()()()()),2&e){const n=t.MAs(19);t.Q6J("formGroup",i.dataForm),t.xp6(1),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(1),t.Q6J("fxFlex.gt-sm",i.personType===i.personTypeWakeel?"75":"100"),t.xp6(6),t.Oqu(t.lcZ(9,19,"FIELD.NAME")),t.xp6(6),t.Oqu(t.lcZ(15,21,"HTML.MOBILE")),t.xp6(3),t.Q6J("ngIf",i.personType===i.personTypeWakeel)("ngIfElse",n),t.xp6(3),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(1),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(1),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(3),t.Q6J("ngIf",i.can("add_tenant_workrelated")||0==i.curPeriority),t.xp6(2),t.Oqu(t.lcZ(28,23,"BTN.CANCEL")),t.xp6(11),t.hij(" ",t.lcZ(39,25,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(43,27,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(47,29,"HTML.WorkNature")," "),t.xp6(2),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(1),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(1),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(2),t.Q6J("ngForOf",i.cusRelated)}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,C.sg,C.O5,d.sg,d.u,T.xw,T.Wh,T.yH,q.ey,w.lW,w.nh,W.a8,y.xY,y.H8,$.Hw,Z.Nt,v.KE,v.hX,X.d,D.gD,rt.gM,O.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}.container[_ngcontent-%COMP%]{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.dialog-content[_ngcontent-%COMP%]{margin-top:16px}.file-input[_ngcontent-%COMP%]{display:none}.custom-button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px;height:40px}.custom-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.form-row[_ngcontent-%COMP%]{margin-bottom:-15px;margin-top:-5px}"]});class qt{constructor(e,i,n,a,l,p,f,A,S,U,M,K,z,st,V,It,Ae){this.transferService=e,this.appSettings=i,this.activatedRoute=n,this.codesService=a,this.unitsService=l,this.fb=p,this.localStore=f,this._CustomerService=A,this.router=S,this.dialog=U,this.global=M,this.atlasService=K,this.settingService=z,this.translateService=st,this.contractService=V,this.sanitizer=It,this.snackBar=Ae,this.account=new lt.n,this.country_const=(new x.I).Countries,this.governorate_const=(new x.I).Governorates,this.city_const=(new x.I).City,this.region_const=(new x.I).Regions,this.notificationType_const=(new x.I).NotificationTypes,this.job_const=(new x.I).Jobs,this.workplace_const=(new x.I).WorkPlaces,this.passwordHide=!0,this.tenant=new ft,this.editCode=!0,this.userPerm=[],this.brandfileToUpload=null,this.natIDfileToUpload=null,this.DocImageToUpload=null,this.defaultDocImage=this.noImageUrl,this.defaultCusImage=this.noImageUrl,this.CusImageToUpload=null,this.defaultIDImage=this.noImageUrl,this.IDImageToUpload=null,this.fileType=null,this.idFileType=null,this.fileUrl=null,this.isImage=!1,this.AllBranches=[],this.notificationsObject=new xe.j,this.allowedChar="1234567890",this.lengthOfCode=6,this.Jobs=[],this.WorkPlaces=[],this.Countries=[],this.Governorates=[],this.Cities=[],this.Areas=[],this.AllBuildings=[],this.AllUnits=[],this.settings=this.appSettings.settings,this.baseUrl=this.appSettings.settings.url,this.secondPartUrl=new L.P(this.baseUrl).api_constant,this.noImageUrl=new L.P(this.baseUrl).noImage}handleFileInputBrand(e){e&&e.length&&(this.brandfileToUpload=e.item(0)),document.getElementById("customButtonBrand").textContent=e.length>0?e[0].name:this.chooseFilePDFBrand}handleFileInputNatID(e){e&&e.length&&(this.natIDfileToUpload=e.item(0)),document.getElementById("customButtonNatId").textContent=e.length>0?e[0].name:this.chooseFilePDFNatID}callFileInputBrand(){document.getElementById("brandFileInput").click()}callFileInputNatId(){document.getElementById("natIDFileInput").click()}callFileInput(){document.getElementById("fileInput").click()}callOnHowiaFileSelect(){document.getElementById("howiaFileInput").click()}callIDFileInput(){document.getElementById("idFileInput").click()}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.isImage=!1,this.transferService.getMessage.subscribe(e=>{this.editCode="YES"==e.editTenantCode.toUpperCase(),console.log("---2222 this.editCode:: "+this.editCode)}),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getMaxCodeForCustomers(this.curCOMId,this.account.periorty),this.getCountries(this.curCOMId,this.account.periorty),this.getJobs(this.curCOMId,this.account.periorty),this.getWorkPlaces(this.curCOMId,this.account.periorty),this.getNotificationRows(this.curCOMId,this.account.periorty,1),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=+e.id,this.getTenantById(this.id)):this.CUS=new ft;var i=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==i.is_employee,this.isAdmin=i.is_superuser,this.isOwner="T"==i.is_owner,console.log("---1111 this.editCode:: "+this.editCode),this.form=this.fb.group({id:null,code:{value:null,disabled:!this.editCode},username:{value:null,disabled:this.id},password:null,firstname:[null,d.kI.required],lastname:[null,d.kI.required],image:null,CUSBrandPdf:null,CUSIdPdf:null,mobile:null,Nationality_CTTKeyField:null,CUSFamousName:null,selftype:"P",CUSEInvoiceType:"G",profile:this.fb.group({birthday:[null,d.kI.required],gender:"M",current_branch:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curbuilding:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curunit:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},CUSTaxNumber:null,CUSCommercialRegister:null}),work:this.fb.group({company:[null,d.kI.required],position:null,nationalIDType:"F",nationalID:[null,d.kI.required],nationalIDStartDate:null,nationalIDEndDate:null,nationalIDPic:null,WorkPlace_CTTKeyField:null,Job_CTTKeyField:null}),contacts:this.fb.group({email:["",d.kI.compose([d.kI.required,B.Le])],homephone:null,workphone:null,address:null,CUSStreetName:null,CUSBuildingNumber:null,CUSZibCode:null,CUSShortAddress:null,CUSBuildingSubNumber:null,country:null,governorate:null,city:null,area:null}),social:this.fb.group({facebook:null,twitter:null,google:null}),settings:this.fb.group({isActive:null,isDeleted:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0)})}}onChangeNationalID(e){let i=e.target.value,n=this.form.value.work.nationalID;console.log("---national_id_event:: "+i),console.log("---national_id_read:: "+n),this._CustomerService.checkNationalId(this.curCOMId,this.account.periorty,i).subscribe(a=>{a?.exists&&this.snackBar.open("\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629/\u0627\u0644\u0625\u0642\u0627\u0645\u0629 \u0645\u0648\u062c\u0648\u062f \u0645\u0633\u0628\u0642\u0627\u064b","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onFileChange(e){this.DocImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultDocImage=n.target.result},i.readAsDataURL(this.DocImageToUpload)}onFileRemove(e){console.log("====On Remove:: "+e)}getFileType(e){const i=e.type;return"application/pdf"===i?"PDF":i.startsWith("image/")?"IMAGE":"NOT"}onEnter(e){e.preventDefault()}handelCUSImgInput(e){if(e&&e.length){switch(this.getFileType(e.item(0))){case"IMAGE":this.fileType=this.imageFileSelected;break;case"PDF":this.fileType=this.pdfFileSelected;break;case"NOT":this.fileType=this.otherFileSelected}if(this.fileType==this.imageFileSelected){console.log("--------Here when image-------------"),this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=p=>{this.defaultCusImage=p.target.result},i.readAsDataURL(this.CusImageToUpload),document.getElementById("customButton").textContent=e.length>0?e[0].name:this.chooseFile}}}onFileSelected(e,i){if(e&&e.length){switch(this.getFileType(e.item(0))){case"IMAGE":this.isImage=!0,this.idFileType=this.imageFileSelected;break;case"PDF":this.isImage=!1,this.idFileType=this.pdfFileSelected;break;case"NOT":this.isImage=!1,this.idFileType=this.otherFileSelected}const l=new FileReader;l.onload=p=>{this.fileUrl=l.result,this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(p.target.result)},l.readAsDataURL(e.item(0)),this.natIDfileToUpload=e.item(0)}}handelIDImgInput(e){this.IDImageToUpload=e.item(0);var i=new FileReader;i.onload=l=>{this.defaultIDImage=l.target.result,console.log("=====after====="+this.defaultIDImage)},i.readAsDataURL(this.IDImageToUpload),document.getElementById("idCustomButton").textContent=e.length>0?e[0].name:this.chooseFile}mapFormvalue_to_CustomerClass(e){this.form.enable(),this.cur_branch=this.form.value.profile.current_branch,this.cur_building=this.form.value.profile.curbuilding,this.cur_unit=this.form.value.profile.curunit,this.form.disable();const i=new C.uU("en-GB").transform(this.form.value.profile.birthday,"dd/MM/yyyy"),n=new C.uU("en-GB").transform(this.form.value.work.nationalIDStartDate,"dd/MM/yyyy"),a=new C.uU("en-GB").transform(this.form.value.work.nationalIDEndDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,null!=this.form.value.profile.birthday&&(this.CUS.CUSBirthDate=i),null!=this.form.value.work.nationalIDStartDate&&(this.CUS.CUSNationalIDStartDate=n),null!=this.form.value.work.nationalIDEndDate&&(this.CUS.CUSNationalIDEndDate=a),this.CUS.CUSCode=+this.form.value.code,this.CUS.CUSFirstName=this.form.value.firstname,this.CUS.CUSLastName=this.form.value.lastname,this.CUS.CUSusername=this.form.value.username,this.CUS.CUSpassword=this.form.value.password,"POST"==e&&(this.CUS.is_create_CustomUser_table="T"),this.CUS.CUSGender=this.form.value.profile.gender,this.CUS.current_branch=this.cur_branch,this.CUS.current_building=this.cur_building,this.CUS.current_unit=this.cur_unit,this.CUS.CUSSelfType=this.form.value.selftype,this.CUS.CUSEInvoiceType=this.form.value.CUSEInvoiceType,this.CUS.CUSPic=this.form.value.image,this.CUS.CUSIDPic=this.form.value.work.nationalIDPic,this.CUS.CUSGuarantor=this.form.value.work.company,this.CUS.CUSJobName=this.form.value.work.position??"",this.CUS.CUSNationalIDType=this.form.value.work.nationalIDType,this.CUS.CUSNationalID=this.form.value.work.nationalID,this.CUS.WorkPlace_CTTKeyField=this.form.value.work.WorkPlace_CTTKeyField,this.CUS.Job_CTTKeyField=this.form.value.work.Job_CTTKeyField,this.CUS.Nationality_CTTKeyField=this.form.value.Nationality_CTTKeyField,this.CUS.CUSMobile=this.form.value.mobile,this.CUS.CUSFamousName=this.form.value.CUSFamousName??"",this.CUS.CUSEmail=this.form.value.contacts.email,this.CUS.CUSHomePhone=this.form.value.contacts.homephone,this.CUS.CUSWorkPhone=this.form.value.contacts.workphone,this.CUS.CUSAddress=this.form.value.contacts.address??"",this.CUS.CUSStreetName=this.form.value.contacts.CUSStreetName??"",this.CUS.CUSBuildingNumber=this.form.value.contacts.CUSBuildingNumber??"",this.CUS.CUSZibCode=this.form.value.contacts.CUSZibCode??"",this.CUS.CUSShortAddress=this.form.value.contacts.CUSShortAddress??"",this.CUS.CUSBuildingSubNumber=this.form.value.contacts.CUSBuildingSubNumber??"",this.CUS.Country_CTTKeyField=this.form.value.contacts.country,this.CUS.Governorate_CTTKeyField=this.form.value.contacts.governorate,this.CUS.City_CTTKeyField=this.form.value.contacts.city,this.CUS.Area_CTTKeyField=this.form.value.contacts.area,this.CUS.CUSFacebook=this.form.value.social.facebook??"",this.CUS.CUSTwitter=this.form.value.social.twitter??"",this.CUS.CUSGoogle=this.form.value.social.google??"",this.CUS.CUSTaxNumber=this.form.value.profile.CUSTaxNumber??"",this.CUS.CUSCommercialRegister=this.form.value.profile.CUSCommercialRegister??"",this.CUS.CUSActive=this.tenActive,this.CUS.RowDelete=this.tenDeleted}getTenantById(e){const i=[];this._CustomerService.getOneCustomer(e).subscribe(n=>{this._CustomerService.getOneCustomerDocs(this.curCOMId,this.account.periorty,e).subscribe(a=>{for(var l of a)i.push({link:l.CUDPic,preview:l.CUDPic})}),this.fillForm(n,i),this.CUS=n,n.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,n.Country_CTTKeyField),n.Governorate_CTTKeyField&&this.getCityPerGoverno(this.curCOMId,this.account.periorty,n.Governorate_CTTKeyField),n.City_CTTKeyField&&this.getAreaPerCity(this.curCOMId,this.account.periorty,n.City_CTTKeyField)})}getFileTypeFromPath(e){console.log("--------start of getFileTypeFromPath----------"),console.log("-----filePath1111:: "+e);const i=e.split(".").pop()?.toLowerCase();switch(console.log("-----filePath2222:: "+e),console.log("--------extension:: "+i),i.substring(0,3)){case"jpg":case"jpe":case"png":case"gif":return"Image";case"pdf":return"PDF";case"doc":return"Word Document";case"xls":return"Excel Document";default:return"Unknown File Type"}}fillForm(e,i){var n;console.log("----inside Fill Form---111111--"),this.is_active="T"==e.CUSActive,e.current_building&&this.getAllUnits(this.curCOMId,this.account.periorty,e.current_building),this.defaultCusImage=null!=e.CUSPic?e.CUSPic:this.noImageUrl,this.defaultIDImage=null!=e.CUSIDPic?e.CUSIDPic:this.noImageUrl,this.is_delete=1==e.RowDelete,console.log("----inside Fill Form---222222--"),this.brandfileToUpload=e.CUSBrandPdf,this.natIDfileToUpload=e.CUSIdPdf,this.natIDfileToUpload&&("Image"==(n=this.getFileTypeFromPath(this.natIDfileToUpload.toString()))?(console.log("Selected file is an image."),this.isImage=!0,this.fileUrl=this.natIDfileToUpload.toString(),console.log("-----this.fileUrl:: "+this.fileUrl)):"PDF"==n?(console.log("Selected file is a PDF."),this.isImage=!1,this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.natIDfileToUpload.name),console.log("------this.sanitizedUrl.:: "+this.sanitizedUrl)):console.log("Selected file is of another type:",n)),console.log("----inside Fill Form---333333--"),this.form.patchValue({id:e.id,code:e.CUSCode,username:e.CUSusername,password:e.CUSpassword,firstname:e.CUSFirstName,lastname:e.CUSLastName,image:e.CUSPic,CUSBrandPdf:e.CUSBrandPdf,CUSIdPdf:e.CUSIdPdf,selftype:e.CUSSelfType,CUSEInvoiceType:e.CUSEInvoiceType,mobile:e.CUSMobile,Nationality_CTTKeyField:e.Nationality_CTTKeyField,CUSFamousName:e.CUSFamousName,profile:{birthday:e.CUSBirthDate,gender:e.CUSGender,CUSTaxNumber:e.CUSTaxNumber,CUSCommercialRegister:e.CUSCommercialRegister,current_branch:e.current_branch,curbuilding:e.current_building,curunit:e.current_unit},work:{company:e.CUSGuarantor,position:e.CUSJobName,nationalIDType:e.CUSNationalIDType,nationalID:e.CUSNationalID,nationalIDStartDate:e.CUSNationalIDStartDate,nationalIDEndDate:e.CUSNationalIDEndDate,nationalIDPic:e.CUSIDPic,WorkPlace_CTTKeyField:e.WorkPlace_CTTKeyField,Job_CTTKeyField:e.Job_CTTKeyField},contacts:{email:e.CUSEmail,homephone:e.CUSHomePhone,workphone:e.CUSWorkPhone,address:e.CUSAddress,country:e.Country_CTTKeyField,governorate:e.Governorate_CTTKeyField,city:e.City_CTTKeyField,area:e.Area_CTTKeyField,CUSStreetName:e.CUSStreetName,CUSBuildingNumber:e.CUSBuildingNumber,CUSZibCode:e.CUSZibCode,CUSShortAddress:e.CUSShortAddress,CUSBuildingSubNumber:e.CUSBuildingSubNumber},social:{facebook:e.CUSFacebook,twitter:e.CUSTwitter,google:e.CUSGoogle},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}}),console.log("----inside Fill Form---4444444--"),e.current_unit&&this.getUnitFullData(e.current_unit),console.log("----inside Fill Form---55555555--")}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(e,i,n,a){console.log("----is Emp"),this.atlasService.getBranchPerEmp(e,i,n).subscribe(l=>{this.AllBranches=l,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+a),this.atlasService.getOneBranch(a).subscribe(p=>{this.AllBranches=p},p=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getNotificationRows(e,i,n){this.codesService.getSubForParentAndArrange(e,i,this.notificationType_const,n).subscribe(a=>{1==n&&(this.cttNotificationType_TenantData=a[0].id),2==n&&(this.cttNotificationType_EndContract=a[0].id)},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0646\u0648\u0639 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapvaluesToNotificationClass(){this.notificationsObject.notificationType_CTTKeyField=this.cttNotificationType_TenantData,this.notificationsObject.UNOActive="T",this.notificationsObject.UNONotificationFromTenant="T",this.notificationsObject.branch_KeyField=this.cur_branch,this.notificationsObject.UNOTitle="\u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0623\u062c\u0631",this.notificationsObject.build_KeyField=this.cur_building,this.notificationsObject.unit_KeyField=this.cur_unit,this.notificationsObject.customer_KeyField=this.form.value.id,this.notificationsObject.UNOText="\u0628\u0631\u062c\u0627\u0621 \u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631 "+this.form.value.firstname+" "+this.form.value.lastname}readCusCode(e){let n=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({contacts:{email:"E"+n+"@changeit.com"},username:n,password:n})}pad(e,i){let n=e+"";for(;n.length<i;)n="0"+n;return n}createRandomString(e,i){let n="";for(let a=0;a<e;a++)n+=i.charAt(Math.floor(Math.random()*i.length));return n}generateUserName(e,i){return this.pad(e,4)+i}confirmData(e){this._CustomerService.editCustomerConfirm({CUSConfirmed:"T",id:e}).subscribe(n=>{this.snackBar.open("\u062a\u0645 \u0625\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},n=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}customerRelated(e){console.log("========Sayed2982024=====customerRelated()==============="),this.dialog.open(Rt,{data:{custId:e,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}customerWorkRelated(e){console.log("========Sayed2982024=====customerWorkRelated()==============="),this.dialog.open(St,{data:{custId:e,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}changePassword(e){this.dialog.open(Te.p,{data:{dataRow:e,curUserData:this.curUserData,userPerm:this.userPerm,pk:e.Userid},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}saveUpdate(e){console.log("=============saveUpdate()==============="),e?(this.mapFormvalue_to_CustomerClass("PATCH"),console.log("=============Update data()==============="),this._CustomerService.editCustomerWithPDF(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.curUserData.is_employee,this.brandfileToUpload,this.natIDfileToUpload).subscribe(i=>{console.log("res=> "+i),"F"==this.curUserData.is_employee&&(this.mapvaluesToNotificationClass(),this.unitsService.addNotificationForUnits(this.notificationsObject).subscribe(n=>{},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})),null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(this.CUS.id,this.DocImageToUpload).subscribe(n=>{console.log("====yes from update====",n)}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(this.mapFormvalue_to_CustomerClass("POST"),console.log(this.CUS),this._CustomerService.addCustomerWithPDF(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.brandfileToUpload,this.natIDfileToUpload).subscribe(i=>{null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(i.id,this.DocImageToUpload).subscribe(n=>{console.log("====yes from insert====",n)}),this.contractService.addCustomUserFromTenant(i,this.CusImageToUpload).subscribe(n=>{this.contractService.updateCustomerWithUserID(i.id,n.id).subscribe(a=>{},a=>{console.log("ERROR::--\x3e ",a)})}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))}close(){}compareFunction(e,i){return e.username==i.username&&e.code==i.code}getJobs(e,i){this.codesService.getSubForParent(e,i,this.job_const).subscribe(n=>{this.Jobs=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u0638\u0627\u0626\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getWorkPlaces(e,i){this.codesService.getSubForParent(e,i,this.workplace_const).subscribe(n=>{this.WorkPlaces=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0645\u0627\u0643\u0646 \u0627\u0644\u0639\u0645\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxCodeForCustomers(e,i){this.contractService.getMaxCustomerCode(e,i).subscribe(n=>{if(this.maxCustomerCode=n.max,!this.id){let a=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({code:this.maxCustomerCode,username:a,password:a,contacts:{email:"E"+a+"@changeit.com"}})}})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(e){this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,e.value)}getGovernoratePerCountry(e,i,n){this.Governorates=[],this.Cities=[],this.Areas=[],this.codesService.getSubForParentAndRelated(e,i,this.governorate_const,n).subscribe(a=>{this.Governorates=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(e){this.getCityPerGoverno(this.curCOMId,this.account.periorty,e.value)}getCityPerGoverno(e,i,n){this.Areas=[],this.codesService.getSubForParentAndRelated(e,i,this.city_const,n).subscribe(a=>{this.Cities=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(e){this.getAreaPerCity(this.curCOMId,this.account.periorty,e.value)}getAreaPerCity(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.region_const,n).subscribe(a=>{this.Areas=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllBuildings(e,i){this.unitsService.getAllBuilding(e,i).subscribe(n=>{this.AllBuildings=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.AllUnits=[],this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.value)}getBuildingPerBranch(e,i,n){this.unitsService.getBuildingsPerBranch(e,i,n).subscribe(a=>{this.AllBuildings=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuild(e){this.getAllUnits(this.curCOMId,this.account.periorty,e.value)}getAllUnits(e,i,n){this.unitsService.getAllUnitsPerBuilding(e,i,n,"E").subscribe(a=>{this.AllUnits=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitData(e){this.getUnitFullData(e.value)}getUnitFullData(e){this.unitsService.getOneUnit(e).subscribe(i=>{this.electricUnit="null"==i.UNTElectricityNumber?"":i.UNTElectricityNumber,this.waterUnit="null"==i.UNTWaterNumber?"":i.UNTWaterNumber,this.gasUnit="null"==i.UNTGasNumber?"":i.UNTGasNumber},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("HTML.ChooseImageFile").subscribe(e=>{this.chooseFile=e}),this.translateService.get("HTML.ChoosePDFFile").subscribe(e=>{this.chooseFilePDF=e}),this.translateService.get("HTML.ChoosePDFFile_Brand").subscribe(e=>{this.chooseFilePDFBrand=e}),this.translateService.get("HTML.ChoosePDFFile_NatId").subscribe(e=>{this.chooseFilePDFNatID=e}),this.translateService.get("MESSAGE.ImageSelected").subscribe(e=>{this.imageFileSelected=e}),this.translateService.get("MESSAGE.PDFSelected").subscribe(e=>{this.pdfFileSelected=e}),this.translateService.get("MESSAGE.OtherFileSelected").subscribe(e=>{this.otherFileSelected=e})}}qt.\u0275fac=function(e){return new(e||qt)(t.Y36(mt.y),t.Y36(it.d),t.Y36(P.gz),t.Y36(Ot.d),t.Y36(h.X),t.Y36(d.QS),t.Y36(N.C),t.Y36(ct.v),t.Y36(P.F0),t.Y36(y.uw),t.Y36(tt.U),t.Y36(I.Z),t.Y36(pt.g),t.Y36(O.sK),t.Y36(H.W),t.Y36(Wt.H7),t.Y36(R.ux))},qt.\u0275cmp=t.Xpm({type:qt,selectors:[["app-customers-details"]],features:[t._Bn([H.W])],decls:364,vars:232,consts:[["mat-dialog-title",""],[4,"ngIf"],[1,"user-form",3,"formGroup","keydown.enter"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["appearance","outline",1,"w-20"],["matInput","","formControlName","code","required",""],["appearance","outline",1,"w-30"],["matInput","","formControlName","username","required",""],["class","w-45",4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstname","required",""],["matInput","","formControlName","lastname","required",""],["matInput","","formControlName","mobile","required",""],["formControlName","Nationality_CTTKeyField","id","nationalityOpSel",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["formControlName","CUSEInvoiceType"],["value","G","labelPosition","after"],["value","P","labelPosition","after"],["value","B","labelPosition","after"],["fxLayout","row"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","image","name","image","id","fileInput","type","file","accept","image/*",1,"file-input",3,"change"],["id","customButton",1,"custom-button",3,"click"],["formGroupName","profile",3,"label"],["formControlName","gender"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],[1,"w-50"],["matInput","","formControlName","birthday","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["formControlName","current_branch","id","curbranchContOpSel","required","",3,"placeholder","selectionChange"],["appearance","outline",1,"w-50"],["formControlName","curbuilding","id","buildOpSel",3,"placeholder","selectionChange"],["appearance","outline",1,"w-45"],["formControlName","curunit","id","unitOpSel",3,"placeholder","selectionChange"],["appearance","outline",1,"w-95"],["matInput","","formControlName","CUSTaxNumber"],["matInput","","formControlName","CUSCommercialRegister"],["formGroupName","work",3,"label"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline","formControlName","WorkPlace_CTTKeyField","id","workplOpSel",1,"w-100",3,"placeholder"],["appearance","outline","formControlName","Job_CTTKeyField","id","jobsOpSel",1,"w-100",3,"placeholder"],["formControlName","nationalIDType"],["value","N","labelPosition","after"],["value","K","labelPosition","after"],["value","S","labelPosition","after"],["value","O","labelPosition","after"],["appearance","outline",1,"w-60"],["matInput","","formControlName","company","required",""],["appearance","outline",1,"w-40"],["matInput","","formControlName","nationalID","required","",3,"change"],["matInput","","formControlName","nationalIDStartDate",3,"matDatepicker"],["natStartDate",""],["matInput","","formControlName","nationalIDEndDate",3,"matDatepicker"],["natEndDate",""],["type","file","accept","image/*,.pdf","id","howiaFileInput",1,"file-input",3,"change"],["id","idCustomButton",1,"custom-button",3,"click"],["formGroupName","contacts",3,"label"],["fxLayout","column","fxLayoutGap","10px grid",1,"form-field-outer"],["appearance","outline",1,"w-24"],["matInput","","formControlName","homephone"],["appearance","outline",1,"w-25"],["matInput","","formControlName","workphone"],["matInput","","formControlName","email","required","",3,"placeholder"],["appearance","outline",1,"w-80"],["matInput","","formControlName","address"],["appearance","outline",1,"w-19"],["matInput","","formControlName","CUSShortAddress"],["formControlName","country","id","countrOpSel",3,"placeholder","selectionChange"],["formControlName","governorate","id","governoOpSel",3,"placeholder","selectionChange"],["formControlName","city","id","cityOpSel",3,"placeholder","selectionChange"],["formControlName","area","id","areaOpSel",3,"placeholder"],["matInput","","formControlName","CUSStreetName"],["matInput","","formControlName","CUSBuildingNumber"],["matInput","","formControlName","CUSZibCode"],["matInput","","formControlName","CUSBuildingSubNumber"],["formGroupName","social",3,"label"],["matInput","","formControlName","facebook"],["matInput","","formControlName","twitter"],["matInput","","formControlName","google"],["formGroupName","settings",3,"label",4,"ngIf"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"w-45"],["matInput","","formControlName","password","required","",3,"type"],["matSuffix","",3,"click"],["id","iddownloadiconalone","target","_blank",3,"href"],[4,"ngIf","ngIfElse"],["pdfPreview",""],[2,"max-width","100%","height","250px",3,"src"],["frameborder","0",2,"width","100%","height","250px",3,"src"],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"h1",0),t.YNc(1,Ei,3,3,"span",1),t.YNc(2,Pi,3,3,"span",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("keydown.enter",function(l){return i.onEnter(l)}),t.TgZ(6,"mat-tab-group",3)(7,"mat-tab",4),t.ALo(8,"translate"),t.TgZ(9,"div",5)(10,"div",6),t._UZ(11,"mat-label"),t.TgZ(12,"div",7)(13,"mat-form-field",8)(14,"mat-label")(15,"mat-icon"),t._uU(16,"person"),t.qZA(),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",9),t.YNc(20,ki,2,0,"mat-error",1),t.YNc(21,Bi,2,0,"mat-error",1),t.qZA(),t.TgZ(22,"mat-form-field",10)(23,"mat-label")(24,"mat-icon"),t._uU(25,"person"),t.qZA(),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",11),t.qZA(),t.YNc(29,Hi,11,7,"mat-form-field",12),t.qZA()(),t.TgZ(30,"div",7)(31,"div",13)(32,"mat-form-field",14)(33,"mat-label")(34,"mat-icon"),t._uU(35,"person"),t.qZA(),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",15),t.YNc(39,Wi,2,0,"mat-error",1),t.qZA()(),t.TgZ(40,"div",13)(41,"mat-form-field",14)(42,"mat-label")(43,"mat-icon"),t._uU(44,"person"),t.qZA(),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"input",16),t.YNc(48,Vi,2,0,"mat-error",1),t.qZA()()(),t.TgZ(49,"div",7)(50,"div",13)(51,"mat-form-field",14)(52,"mat-label"),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"mat-hint"),t._uU(56,"966505602221"),t.qZA(),t._UZ(57,"input",17),t.YNc(58,Yi,2,0,"mat-error",1),t.qZA()(),t.TgZ(59,"div",13)(60,"mat-form-field",14)(61,"mat-label"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"mat-select",18),t.ALo(65,"translate"),t.TgZ(66,"mat-option",19),t._uU(67,"-"),t.qZA(),t.YNc(68,Gi,2,2,"mat-option",20),t.qZA()()()(),t.TgZ(69,"div",7)(70,"div",21)(71,"mat-label"),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"mat-radio-group",22)(75,"mat-radio-button",23),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"mat-radio-button",24),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"mat-radio-button",25),t._uU(82),t.ALo(83,"translate"),t.qZA()()()(),t.TgZ(84,"div",26)(85,"div",27),t._UZ(86,"img",28),t.TgZ(87,"input",29),t.NdJ("change",function(l){return i.handelCUSImgInput(l.target.files)}),t.qZA(),t.YNc(88,Qi,2,1,"div",1),t.TgZ(89,"button",30),t.NdJ("click",function(){return i.callFileInput()}),t._uU(90),t.ALo(91,"translate"),t.qZA()()()()(),t.TgZ(92,"mat-tab",31),t.ALo(93,"translate"),t.TgZ(94,"div",5)(95,"div",7)(96,"mat-radio-group",32)(97,"mat-radio-button",33),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"mat-radio-button",34),t._uU(101),t.ALo(102,"translate"),t.qZA()(),t.TgZ(103,"mat-form-field",35)(104,"mat-label"),t._uU(105),t.ALo(106,"translate"),t.qZA(),t._UZ(107,"input",36)(108,"mat-datepicker-toggle",37)(109,"mat-datepicker",null,38),t.qZA()(),t.TgZ(111,"div",7)(112,"div",13)(113,"mat-form-field",14)(114,"mat-label"),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"mat-select",39),t.NdJ("selectionChange",function(l){return i.getBuildings(l)}),t.ALo(118,"translate"),t.TgZ(119,"mat-option",19),t._uU(120,"-"),t.qZA(),t.YNc(121,ji,2,2,"mat-option",20),t.qZA()()()(),t.TgZ(122,"div",7)(123,"mat-form-field",40)(124,"mat-label"),t._uU(125),t.ALo(126,"translate"),t.qZA(),t.TgZ(127,"mat-select",41),t.NdJ("selectionChange",function(l){return i.getUnitsPerBuild(l)}),t.ALo(128,"translate"),t.TgZ(129,"mat-option",19),t._uU(130,"-"),t.qZA(),t.YNc(131,$i,2,2,"mat-option",20),t.qZA()(),t.TgZ(132,"mat-form-field",42)(133,"mat-label"),t._uU(134),t.ALo(135,"translate"),t.qZA(),t.TgZ(136,"mat-select",43),t.NdJ("selectionChange",function(l){return i.getUnitData(l)}),t.ALo(137,"translate"),t.TgZ(138,"mat-option",19),t._uU(139,"-"),t.qZA(),t.YNc(140,zi,2,2,"mat-option",20),t.qZA()()(),t.TgZ(141,"div",7)(142,"div",13)(143,"mat-form-field",44)(144,"mat-label"),t._uU(145),t.ALo(146,"translate"),t.qZA(),t._UZ(147,"input",45),t.qZA()(),t.TgZ(148,"div",13)(149,"mat-form-field",44)(150,"mat-label"),t._uU(151),t.ALo(152,"translate"),t.qZA(),t._UZ(153,"input",46),t.qZA()()(),t.TgZ(154,"div",7),t.YNc(155,Xi,3,3,"h4",1),t.TgZ(156,"h3"),t._uU(157),t.qZA(),t.YNc(158,tn,3,3,"h4",1),t.TgZ(159,"h3"),t._uU(160),t.qZA(),t.YNc(161,en,3,3,"h4",1),t.TgZ(162,"h3"),t._uU(163),t.qZA()()()(),t.TgZ(164,"mat-tab",47),t.ALo(165,"translate"),t.TgZ(166,"div",5)(167,"div",6),t._UZ(168,"mat-label"),t.TgZ(169,"div",7)(170,"div",48)(171,"label"),t._uU(172),t.ALo(173,"translate"),t.qZA(),t.TgZ(174,"ng-select",49),t.ALo(175,"translate"),t.YNc(176,nn,2,2,"ng-option",20),t.qZA()(),t.TgZ(177,"div",48)(178,"label"),t._uU(179),t.ALo(180,"translate"),t.qZA(),t.TgZ(181,"ng-select",50),t.ALo(182,"translate"),t.YNc(183,on,2,2,"ng-option",20),t.qZA()()(),t._UZ(184,"mat-divider")(185,"mat-divider"),t.qZA(),t.TgZ(186,"mat-radio-group",51)(187,"mat-radio-button",52),t._uU(188),t.ALo(189,"translate"),t.qZA(),t.TgZ(190,"mat-radio-button",34),t._uU(191),t.ALo(192,"translate"),t.qZA(),t.TgZ(193,"mat-radio-button",53),t._uU(194),t.ALo(195,"translate"),t.qZA(),t.TgZ(196,"mat-radio-button",54),t._uU(197),t.ALo(198,"translate"),t.qZA(),t.TgZ(199,"mat-radio-button",55),t._uU(200),t.ALo(201,"translate"),t.qZA()(),t.TgZ(202,"div",7)(203,"mat-form-field",56)(204,"mat-label"),t._uU(205),t.ALo(206,"translate"),t.qZA(),t._UZ(207,"input",57),t.qZA(),t.TgZ(208,"mat-form-field",58)(209,"mat-label"),t._uU(210),t.ALo(211,"translate"),t.qZA(),t.TgZ(212,"input",59),t.NdJ("change",function(l){return i.onChangeNationalID(l)}),t.qZA()()(),t.TgZ(213,"div",7)(214,"mat-form-field",42)(215,"mat-label"),t._uU(216),t.ALo(217,"translate"),t.qZA(),t._UZ(218,"input",60)(219,"mat-datepicker-toggle",37)(220,"mat-datepicker",null,61),t.qZA(),t.TgZ(222,"mat-form-field",58)(223,"mat-label"),t._uU(224),t.ALo(225,"translate"),t.qZA(),t._UZ(226,"input",62)(227,"mat-datepicker-toggle",37)(228,"mat-datepicker",null,63),t.qZA()()(),t.YNc(230,an,4,1,"div",1),t.TgZ(231,"div",26)(232,"input",64),t.NdJ("change",function(l){return i.onFileSelected(l.target.files,l)}),t.qZA(),t.TgZ(233,"button",65),t.NdJ("click",function(){return i.callOnHowiaFileSelect()}),t._uU(234),t.ALo(235,"translate"),t.qZA(),t.YNc(236,ln,4,2,"div",1),t.qZA()(),t.TgZ(237,"mat-tab",66),t.ALo(238,"translate"),t.TgZ(239,"div",67),t._UZ(240,"mat-label"),t.TgZ(241,"div",7)(242,"mat-form-field",68)(243,"mat-label"),t._uU(244),t.ALo(245,"translate"),t.qZA(),t._UZ(246,"input",69),t.qZA(),t.TgZ(247,"mat-form-field",70)(248,"mat-label"),t._uU(249),t.ALo(250,"translate"),t.qZA(),t._UZ(251,"input",71),t.qZA(),t.TgZ(252,"mat-form-field",40)(253,"mat-label"),t._uU(254),t.ALo(255,"translate"),t.qZA(),t._UZ(256,"input",72),t.ALo(257,"translate"),t.qZA()(),t.TgZ(258,"div",7)(259,"mat-form-field",73)(260,"mat-label"),t._uU(261),t.ALo(262,"translate"),t.qZA(),t._UZ(263,"input",74),t.qZA(),t.TgZ(264,"mat-form-field",75)(265,"mat-label"),t._uU(266),t.ALo(267,"translate"),t.qZA(),t._UZ(268,"input",76),t.qZA()(),t.TgZ(269,"div",7)(270,"mat-form-field",70)(271,"mat-label"),t._uU(272),t.ALo(273,"translate"),t.qZA(),t.TgZ(274,"mat-select",77),t.NdJ("selectionChange",function(l){return i.getGovernorate(l)}),t.ALo(275,"translate"),t.TgZ(276,"mat-option",19),t._uU(277,"-"),t.qZA(),t.YNc(278,cn,2,2,"mat-option",20),t.qZA()(),t.TgZ(279,"mat-form-field",70)(280,"mat-label"),t._uU(281),t.ALo(282,"translate"),t.qZA(),t.TgZ(283,"mat-select",78),t.NdJ("selectionChange",function(l){return i.getCity(l)}),t.ALo(284,"translate"),t.TgZ(285,"mat-option",19),t._uU(286,"-"),t.qZA(),t.YNc(287,un,2,2,"mat-option",20),t.qZA()(),t.TgZ(288,"mat-form-field",68)(289,"mat-label"),t._uU(290),t.ALo(291,"translate"),t.qZA(),t.TgZ(292,"mat-select",79),t.NdJ("selectionChange",function(l){return i.getAria(l)}),t.ALo(293,"translate"),t.TgZ(294,"mat-option",19),t._uU(295,"-"),t.qZA(),t.YNc(296,dn,2,2,"mat-option",20),t.qZA()(),t.TgZ(297,"mat-form-field",70)(298,"mat-label"),t._uU(299),t.ALo(300,"translate"),t.qZA(),t.TgZ(301,"mat-select",80),t.ALo(302,"translate"),t.TgZ(303,"mat-option",19),t._uU(304,"-"),t.qZA(),t.YNc(305,mn,2,2,"mat-option",20),t.qZA()()(),t.TgZ(306,"div",7)(307,"mat-form-field",58)(308,"mat-label"),t._uU(309),t.ALo(310,"translate"),t.qZA(),t._UZ(311,"input",81),t.qZA(),t.TgZ(312,"mat-form-field",8)(313,"mat-label"),t._uU(314),t.ALo(315,"translate"),t.qZA(),t._UZ(316,"input",82),t.qZA(),t.TgZ(317,"mat-form-field",75)(318,"mat-label"),t._uU(319),t.ALo(320,"translate"),t.qZA(),t._UZ(321,"input",83),t.qZA(),t.TgZ(322,"mat-form-field",8)(323,"mat-label"),t._uU(324),t.ALo(325,"translate"),t.qZA(),t._UZ(326,"input",84),t.qZA()()()(),t.TgZ(327,"mat-tab",85),t.ALo(328,"translate"),t.TgZ(329,"div",6),t._UZ(330,"mat-label"),t.TgZ(331,"div",5)(332,"mat-form-field",14)(333,"mat-label"),t._uU(334,"Facebook"),t.qZA(),t._UZ(335,"input",86),t.qZA(),t.TgZ(336,"mat-form-field",14)(337,"mat-label"),t._uU(338,"Twitter"),t.qZA(),t._UZ(339,"input",87),t.qZA(),t.TgZ(340,"mat-form-field",14)(341,"mat-label"),t._uU(342,"Google"),t.qZA(),t._UZ(343,"input",88),t.qZA()()()(),t.YNc(344,pn,11,9,"mat-tab",89),t.TgZ(345,"mat-tab",90),t.ALo(346,"translate"),t.TgZ(347,"div",91)(348,"div",27),t._UZ(349,"img",28),t.TgZ(350,"input",92,93),t.NdJ("change",function(l){return i.onFileChange(l.target.files)}),t.qZA(),t.TgZ(352,"button",94),t.NdJ("click",function(){t.CHM(n);const l=t.MAs(351);return t.KtG(l.click())}),t._uU(353),t.ALo(354,"translate"),t.qZA()(),t._UZ(355,"mat-divider")(356,"input-file",95),t.qZA()()()(),t._UZ(357,"br"),t.TgZ(358,"div",96)(359,"div",7),t.YNc(360,_n,3,4,"button",97),t.YNc(361,Cn,4,4,"button",98),t.YNc(362,fn,4,4,"button",98),t.YNc(363,Tn,3,4,"button",98),t.qZA()()}if(2&e){const n=t.MAs(110),a=t.MAs(221),l=t.MAs(229);t.xp6(1),t.Q6J("ngIf",!i.CUS.id),t.xp6(1),t.Q6J("ngIf",i.CUS.id),t.xp6(1),t.hij(" ",t.lcZ(4,106,"HTML.TENANT"),"\n"),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(8,108,"HTML.TAB_BASIC")),t.xp6(10),t.hij(" ",t.lcZ(18,110,"HTML.CODE"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.code.errors?null:i.form.controls.code.errors.required),t.xp6(1),t.Q6J("ngIf",i.form.controls.code.hasError("minlength")),t.xp6(5),t.hij(" ",t.lcZ(27,112,"HTML.USERNAME"),""),t.xp6(3),t.Q6J("ngIf",!i.CUS.id),t.xp6(7),t.hij(" ",t.lcZ(37,114,"HTML.FIRST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.firstname.errors?null:i.form.controls.firstname.errors.required),t.xp6(6),t.hij(" ",t.lcZ(46,116,"HTML.LAST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.lastname.errors?null:i.form.controls.lastname.errors.required),t.xp6(5),t.Oqu(t.lcZ(54,118,"HTML.MOBILE")),t.xp6(5),t.Q6J("ngIf",null==i.form.controls.mobile.errors?null:i.form.controls.mobile.errors.required),t.xp6(4),t.Oqu(t.lcZ(63,120,"HTML.Nationality")),t.xp6(2),t.s9C("placeholder",t.lcZ(65,122,"HTML.Nationality")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(4),t.Oqu(t.lcZ(73,124,"HTML.EInvoiceType")),t.xp6(4),t.Oqu(t.lcZ(77,126,"HTML.EType_Without")),t.xp6(3),t.Oqu(t.lcZ(80,128,"HTML.EType_Personal")),t.xp6(3),t.Oqu(t.lcZ(83,130,"HTML.EType_Business")),t.xp6(4),t.Q6J("src",i.defaultCusImage,t.LSH),t.xp6(2),t.Q6J("ngIf",i.fileType),t.xp6(2),t.Oqu(t.lcZ(91,132,"HTML.ChooseImageFile")),t.xp6(2),t.s9C("label",t.lcZ(93,134,"HTML.TAB_PERSONAL")),t.xp6(6),t.Oqu(t.lcZ(99,136,"HTML.MALE")),t.xp6(3),t.Oqu(t.lcZ(102,138,"HTML.FEMALE")),t.xp6(4),t.Oqu(t.lcZ(106,140,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(7),t.hij(" ",t.lcZ(116,142,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(118,144,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.Oqu(t.lcZ(126,146,"HTML.BUILDING")),t.xp6(2),t.s9C("placeholder",t.lcZ(128,148,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuildings),t.xp6(3),t.Oqu(t.lcZ(135,150,"HTML.UNIT")),t.xp6(2),t.s9C("placeholder",t.lcZ(137,152,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnits),t.xp6(5),t.Oqu(t.lcZ(146,154,"HTML.TaxNumber")),t.xp6(6),t.Oqu(t.lcZ(152,156,"HTML.CommercialRegister")),t.xp6(4),t.Q6J("ngIf",i.electricUnit),t.xp6(2),t.Oqu(i.electricUnit),t.xp6(1),t.Q6J("ngIf",i.waterUnit),t.xp6(2),t.Oqu(i.waterUnit),t.xp6(1),t.Q6J("ngIf",i.gasUnit),t.xp6(2),t.Oqu(i.gasUnit),t.xp6(1),t.s9C("label",t.lcZ(165,158,"HTML.TAB_ID")),t.xp6(8),t.hij(" ",t.lcZ(173,160,"HTML.WorkPlace"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(175,162,"HTML.WorkPlace")),t.xp6(2),t.Q6J("ngForOf",i.WorkPlaces),t.xp6(3),t.hij(" ",t.lcZ(180,164,"HTML.Job"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(182,166,"HTML.Job")),t.xp6(2),t.Q6J("ngForOf",i.Jobs),t.xp6(5),t.Oqu(t.lcZ(189,168,"OPTIONS.NATIONAL_ID")),t.xp6(3),t.Oqu(t.lcZ(192,170,"OPTIONS.FOREIGN_ID")),t.xp6(3),t.Oqu(t.lcZ(195,172,"OPTIONS.GULF_ID")),t.xp6(3),t.Oqu(t.lcZ(198,174,"OPTIONS.SPECIAL_EQAMA")),t.xp6(3),t.Oqu(t.lcZ(201,176,"OPTIONS.OTHER")),t.xp6(5),t.Oqu(t.lcZ(206,178,"HTML.GUARANTOR")),t.xp6(5),t.Oqu(t.lcZ(211,180,"HTML.IDNUMBER")),t.xp6(6),t.Oqu(t.lcZ(217,182,"HTML.START_DATE")),t.xp6(2),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(5),t.Oqu(t.lcZ(225,184,"HTML.END_DATE")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(3),t.Q6J("ngIf",i.CUS.id&&i.natIDfileToUpload),t.xp6(4),t.hij(" ",t.lcZ(235,186,"HTML.ChooseHowiaImageFile"),""),t.xp6(2),t.Q6J("ngIf",i.fileUrl),t.xp6(1),t.s9C("label",t.lcZ(238,188,"HTML.TAB_CONTACTS")),t.xp6(7),t.Oqu(t.lcZ(245,190,"HTML.HOME_PHONE")),t.xp6(5),t.Oqu(t.lcZ(250,192,"HTML.WORK_PHONE")),t.xp6(5),t.Oqu(t.lcZ(255,194,"HTML.EMAIL")),t.xp6(2),t.s9C("placeholder",t.lcZ(257,196,"HTML.EMAIL")),t.xp6(5),t.Oqu(t.lcZ(262,198,"HTML.ADDRESS")),t.xp6(5),t.Oqu(t.lcZ(267,200,"HTML.ShortAddress")),t.xp6(6),t.Oqu(t.lcZ(273,202,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(275,204,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(3),t.Oqu(t.lcZ(282,206,"HTML.GOVERN")),t.xp6(2),t.s9C("placeholder",t.lcZ(284,208,"HTML.GOVERN")),t.xp6(4),t.Q6J("ngForOf",i.Governorates),t.xp6(3),t.Oqu(t.lcZ(291,210,"HTML.CITY")),t.xp6(2),t.s9C("placeholder",t.lcZ(293,212,"HTML.CITY")),t.xp6(4),t.Q6J("ngForOf",i.Cities),t.xp6(3),t.Oqu(t.lcZ(300,214,"HTML.REGION")),t.xp6(2),t.s9C("placeholder",t.lcZ(302,216,"HTML.REGION")),t.xp6(4),t.Q6J("ngForOf",i.Areas),t.xp6(4),t.Oqu(t.lcZ(310,218,"HTML.STREET_NAME")),t.xp6(5),t.Oqu(t.lcZ(315,220,"HTML.BUILDING_NUMBER")),t.xp6(5),t.Oqu(t.lcZ(320,222,"HTML.ZIP")),t.xp6(5),t.Oqu(t.lcZ(325,224,"HTML.BUILDING_SubNUMBER")),t.xp6(3),t.s9C("label",t.lcZ(328,226,"HTML.TAB_SOCIAL_LIFE")),t.xp6(17),t.Q6J("ngIf",i.account.periorty>0),t.xp6(1),t.s9C("label",t.lcZ(346,228,"HTML.TAB_DOCS")),t.xp6(4),t.Q6J("src",i.defaultDocImage,t.LSH),t.xp6(4),t.Oqu(t.lcZ(354,230,"HTML.AddPic")),t.xp6(7),t.Q6J("ngIf",i.can("change_tenant")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("view_tenantrelative")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("change_tenant_password")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("confirm_tenant"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,Ut.VQ,Ut.U0,C.sg,C.O5,d.sg,d.u,d.x0,T.xw,T.SQ,T.Wh,T.yH,q.ey,w.lW,Mt.oG,Q.Mq,Q.hl,Q.nW,y.ZT,y.uh,y.H8,$.Hw,Z.Nt,v.KE,v.hX,v.bx,v.TO,v.R9,X.d,D.gD,bt.uX,bt.SP,Ht.tW,At.w9,At.jq,O.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.file-input{display:none}.custom-button{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px;height:40px}.custom-button:hover{background-color:#0056b3}\n"],encapsulation:2});var bn=b(3609);class vn{}function An(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(2),t.Oqu(t.lcZ(3,3,"BTN.SAVE"))}}class Vt{constructor(e,i,n,a){this.dialogRef=e,this.data=i,this.localStore=n,this.fb=a,this.userPerm=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.form=this.fb.group({id:null,INSCode:null,INSContractTyps:"I",INSStatus:"N",INSValue:0,INSPayedValue:0,dueDate:null,INSDueToDate:null,payDate:null,INSPersonPayName:null,INSNotes:null,RowConfirm:0,RowDelete:0,RowStatus:0,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,customer_KeyField:null}),this.data.cttRow?(console.log("===this.data.cttRow==="),console.log(this.data.cttRow),this.action="Patch",this.form.patchValue({id:this.data.cttRow.id,INSCode:this.data.cttRow.INSCode,dueDate:new Date(this.data.cttRow.INSDueDate),INSDueToDate:new Date(this.data.cttRow.INSDueToDate),payDate:new Date(this.data.cttRow.INSPayDate),INSPersonPayName:this.data.cttRow.INSPersonPayName,INSNotes:this.data.cttRow.INSNotes,contract_KeyField:this.data.cttRow.contract_KeyField,branch_KeyField:this.data.cttRow.branch_KeyField,owner_KeyField:this.data.cttRow.owner_KeyField,build_KeyField:this.data.cttRow.build_KeyField,unit_KeyField:this.data.cttRow.unit_KeyField,customer_KeyField:this.data.cttRow.customer_KeyField,INSContractTyps:this.data.cttRow.INSContractTyps,INSStatus:this.data.cttRow.INSStatus,INSValue:this.data.cttRow.INSValue,INSPayedValue:this.data.cttRow.INSPayedValue,RowConfirm:this.data.cttRow.RowConfirm,RowDelete:this.data.cttRow.RowDelete,RowStatus:this.data.cttRow.RowStatus})):(console.log("==contract****:: "+this.data.contract),this.action="Post",this.form.patchValue({contract_KeyField:this.data.contract,branch_KeyField:this.data.branch,owner_KeyField:this.data.owner,build_KeyField:this.data.build,unit_KeyField:this.data.unit,customer_KeyField:this.data.customer,INSContractTyps:"I",INSStatus:"N",INSValue:0,INSPayedValue:0,RowConfirm:0,RowDelete:0,RowStatus:0}))}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onSave(){console.log("===***Press Save button***==="),this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value})}close(){console.log("===***Press Close button***==="),this.action="Cancel",this.dialogRef.close({event:this.action})}}Vt.\u0275fac=function(e){return new(e||Vt)(t.Y36(y.so),t.Y36(y.WI),t.Y36(N.C),t.Y36(d.QS))},Vt.\u0275cmp=t.Xpm({type:Vt,selectors:[["app-installment-dialog"]],decls:83,vars:53,consts:[["mat-dialog-title",""],[1,"user-form",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","24.98",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","INSCode","required",""],["fxFlex","100","fxFlex.gt-sm","25.0",1,"px-1"],["matInput","","formControlName","INSValue","required",""],["matInput","","formControlName","dueDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["dueDate",""],["matInput","","formControlName","INSDueToDate","required","",3,"matDatepicker"],["dueToDate",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","INSStatus","id","instStatusOpSel",3,"placeholder"],[3,"value"],["matInput","","formControlName","INSPayedValue"],["matInput","","formControlName","payDate",3,"matDatepicker"],["payDate",""],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","INSNotes"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",7),t.qZA()(),t.TgZ(13,"div",8)(14,"mat-form-field",6)(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",9),t.qZA()(),t.TgZ(19,"div",8)(20,"mat-form-field",6)(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"input",10)(25,"mat-datepicker-toggle",11)(26,"mat-datepicker",null,12),t.qZA()(),t.TgZ(28,"div",8)(29,"mat-form-field",6)(30,"mat-label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"input",13)(34,"mat-datepicker-toggle",11)(35,"mat-datepicker",null,14),t.qZA()()(),t.TgZ(37,"div",4)(38,"div",15)(39,"mat-form-field",6)(40,"mat-label"),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"mat-select",16),t.ALo(44,"translate"),t.TgZ(45,"mat-option",17),t._uU(46,"-"),t.qZA(),t.TgZ(47,"mat-option",17),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"mat-option",17),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"mat-option",17),t._uU(54),t.ALo(55,"translate"),t.qZA()()()(),t.TgZ(56,"div",15)(57,"mat-form-field",6)(58,"mat-label"),t._uU(59),t.ALo(60,"translate"),t.qZA(),t._UZ(61,"input",18),t.qZA()(),t.TgZ(62,"div",15)(63,"mat-form-field",6)(64,"mat-label"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t._UZ(67,"input",19)(68,"mat-datepicker-toggle",11)(69,"mat-datepicker",null,20),t.qZA()()(),t.TgZ(71,"div",21)(72,"mat-form-field",6)(73,"mat-label"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t._UZ(76,"input",22),t.qZA()()()(),t.TgZ(77,"div",23)(78,"div",4),t.YNc(79,An,4,5,"button",24),t.TgZ(80,"button",25),t.NdJ("click",function(){return i.close()}),t._uU(81),t.ALo(82,"translate"),t.qZA()()()()),2&e){const n=t.MAs(27),a=t.MAs(36),l=t.MAs(70);t.xp6(1),t.Oqu(t.lcZ(2,25,"HTML.InstallmentData")),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(7),t.Oqu(t.lcZ(11,27,"HTML.CODE")),t.xp6(6),t.Oqu(t.lcZ(17,29,"HTML.InstallmentValue")),t.xp6(6),t.Oqu(t.lcZ(23,31,"HTML.DueDate")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(32,33,"HTML.DueToDate")),t.xp6(2),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(7),t.Oqu(t.lcZ(42,35,"HTML.InstallmentStatus")),t.xp6(2),t.s9C("placeholder",t.lcZ(44,37,"HTML.InstallmentStatus")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(49,39,"OPTIONS.NotPayed")),t.xp6(2),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(52,41,"OPTIONS.Payed")),t.xp6(2),t.Q6J("value","T"),t.xp6(1),t.Oqu(t.lcZ(55,43,"OPTIONS.PartialPayed")),t.xp6(5),t.Oqu(t.lcZ(60,45,"HTML.PayedValue")),t.xp6(6),t.Oqu(t.lcZ(66,47,"HTML.PayedDate")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(6),t.Oqu(t.lcZ(75,49,"HTML.Notes")),t.xp6(5),t.Q6J("ngIf",i.can("change_installment")),t.xp6(2),t.Oqu(t.lcZ(82,51,"BTN.CANCEL"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,C.O5,d.sg,d.u,T.xw,T.Wh,T.yH,q.ey,w.lW,Q.Mq,Q.hl,Q.nW,y.ZT,y.uh,y.xY,y.H8,Z.Nt,v.KE,v.hX,v.R9,D.gD,O.X$]});var we=b(1008);function yn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.openCategoryDialog(null))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.AddInstallment")))}function Zn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.openCategoryDialog(a))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.EDIT"))}function On(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.remove(a.id,a.contract_KeyField))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function xn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.printEInvoice(a))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.TaxInvoice"))}function Un(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.printEInvoiceRequest(a))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"account_balance_wallet"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.TaxRequest"))}function Sn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.createDocumentNumber("S",a))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"key"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.TaxInvoice"))}function wn(o,e){if(1&o&&(t.TgZ(0,"div",9)(1,"div",10),t._uU(2),t.qZA(),t.TgZ(3,"div",10),t._uU(4),t.qZA(),t.TgZ(5,"div",10),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"div",10),t._uU(9),t.qZA(),t.TgZ(10,"div",10),t._uU(11),t.qZA(),t.TgZ(12,"div",10)(13,"div",11),t.YNc(14,Zn,4,3,"button",12),t.YNc(15,On,4,3,"button",13),t.YNc(16,xn,4,3,"button",12),t.YNc(17,Un,4,3,"button",12),t.YNc(18,Sn,4,3,"button",12),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.INSCode),t.xp6(2),t.Oqu(i.INSValue),t.xp6(2),t.Oqu(t.xi3(7,10,i.INSDueDate,"yyyy-MM-dd")),t.xp6(3),t.Oqu(i.INSStatusDisplay),t.xp6(2),t.Oqu(i.INSPayedValue),t.xp6(3),t.Q6J("ngIf",n.can("view_installment")),t.xp6(1),t.Q6J("ngIf",n.can("delete_installment")),t.xp6(1),t.Q6J("ngIf",("P"==i.customer_EInvoiceType||"B"==i.customer_EInvoiceType)&&n.can("view_installment")),t.xp6(1),t.Q6J("ngIf",("P"==i.customer_EInvoiceType||"B"==i.customer_EInvoiceType)&&n.can("view_installment")),t.xp6(1),t.Q6J("ngIf",("P"==i.customer_EInvoiceType||"B"==i.customer_EInvoiceType)&&n.can("view_installment"))}}function Nn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"mat-card",18)(3,"pagination-controls",19),t.NdJ("pageChange",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(a))}),t.qZA()()()()}}const Fn=function(o,e){return{itemsPerPage:o,currentPage:e}};class Yt{constructor(e,i,n,a,l,p,f,A,S,U,M,K,z){this.transferService=e,this.localStore=i,this.global=n,this.router=a,this.activatedRoute=l,this._contractService=p,this.invoiceService=f,this.settingService=A,this.snackBar=S,this.translateService=U,this.fb=M,this.dialog=K,this.appSettings=z,this.contractInstallmentsArray=[],this.count=6,this.account=new lt.n,this.installmentForDisplay={id:void 0,COMId:void 0,INSCode:void 0,contract_KeyField:void 0,branch_KeyField:void 0,owner_KeyField:void 0,build_KeyField:void 0,unit_KeyField:void 0,customer_KeyField:void 0,INSContractTyps:void 0,INSStatus:void 0,INSValue:void 0,INSDueDate:void 0,INSDueToDate:void 0,INSPayedValue:void 0,INSPayDate:null,INSPersonPayName:void 0,INSNotes:void 0,EntryDate:void 0,EntryUser:void 0,RowConfirm:void 0,RowStatus:void 0,RowDelete:void 0},this.userPerm=[],this.expensesInvoiceCTT=(new x.I).ExpensesInvoice,this.sellInvoiceCTT=(new x.I).SellInvoice,this.addAlarmCTT=(new x.I).AddAlarm,this.discountAlarmCTT=(new x.I).DiscountAlarm,this.requestInvoiceCTT=(new x.I).RequestInvoice,this.settings=this.appSettings.settings}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=+e.id,this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id),this._contractService.getOneContract(this.id).subscribe(i=>{this.contract_KeyField=i.id,this.branch_KeyField=i.branch_KeyField,this.owner_KeyField=i.owner_KeyField,this.build_KeyField=i.build_KeyField,this.unit_KeyField=i.unit_KeyField,this.customer_KeyField=i.customer_KeyField})):this.Insta=new vn})}}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}generateUserName(e,i){return this.pad(e,4)+i}pad(e,i){let n=e+"";for(;n.length<i;)n="0"+n;return n}createDocumentNumber(e,i){var n,a;switch(e){case"X":this.curDocUsed=this.expensesInvoiceCTT;break;case"S":default:this.curDocUsed=this.sellInvoiceCTT;break;case"A":this.curDocUsed=this.addAlarmCTT;break;case"D":this.curDocUsed=this.discountAlarmCTT;break;case"R":this.curDocUsed=this.requestInvoiceCTT}this.filterString="M="+this.curCOMId+"&C="+this.curUserData.periorty+"&usr=all",this.invoiceNumber="",this.settingService.getSerialsPerType(this.curCOMId,this.curUserData.periorty,this.curDocUsed).subscribe(l=>{this.docserialType=l[0].DOSDocSerialType,"P"==this.docserialType?this.settingService.getAllDetaisForSerial(this.curCOMId,this.curUserData.periorty,l[0].id).subscribe(p=>{for(let f=0;f<p.length;f++)if(this.partType=p[f].DSDPartType,this.partDigitNo=p[f].DSDNoOfDigits,this.partStartWith=p[f].DSDPartStartWith??"",this.partStartWith.length==+this.partDigitNo)this.invoiceNumber+=this.partStartWith;else if(this.partStartWith.length>+this.partDigitNo)this.invoiceNumber+=this.partStartWith.substring(0,+this.partDigitNo-1);else if(this.partStartWith.length<+this.partDigitNo)switch(this.invoiceNumber+=this.partStartWith,this.remainderLength=+this.partDigitNo-this.partStartWith.length,this.partType){case"Y":n=(new Date).getFullYear().toString(),a=n,n=n.substring(n.length-+this.remainderLength),this.invoiceNumber+=n,this.filterString+="&year="+a;break;case"M":a=((new Date).getMonth()+1).toString(),n="0"+a.slice(-2),this.invoiceNumber+=n,this.filterString+="&month="+a;break;case"B":n=i.branch_KeyField.length>=+this.remainderLength?i.branch_KeyField.toString().slice(-this.remainderLength):this.pad(i.branch_KeyField,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&branch="+i.branch_KeyField;break;case"O":n=i.owner_KeyField.length>=+this.remainderLength?i.owner_KeyField.toString().slice(-this.remainderLength):this.pad(i.owner_KeyField,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&owner="+i.owner_KeyField;break;case"P":n=i.build_KeyField.length>=+this.remainderLength?i.build_KeyField.toString().slice(-this.remainderLength):this.pad(i.build_KeyField,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&building="+i.build_KeyField;break;case"U":n=i.unit_KeyField.length>=+this.remainderLength?i.unit_KeyField.toString().slice(-this.remainderLength):this.pad(i.unit_KeyField,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&unit="+i.unit_KeyField;break;case"T":n=i.CUSKeyField.length>=+this.remainderLength?i.CUSKeyField.toString().slice(-this.remainderLength):this.pad(i.CUSKeyField,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&customer="+i.CUSKeyField;break;case"C":n=i.contract_KeyField.length>=+this.remainderLength?i.contract_KeyField.toString().slice(-this.remainderLength):this.pad(i.contract_KeyField,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&contract="+i.contract_KeyField;break;case"E":n=i.curUserData.id.length>=+this.remainderLength?i.curUserData.id.toString().slice(-this.remainderLength):this.pad(i.curUserData.id,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&user="+i.curUserData.id;break;case"F":this.invoiceNumber+=n=this.partStartWith;break;case"S":console.log("----++++++++++-------"),console.log("this.filterString:: "+this.filterString),console.log("----++++++++++-------"),this.invoiceService.getInvoicesPerSpecOneString(this.filterString).subscribe(A=>{A.length>0?(this.maxSerial=A[0].INVSerial??0,this.maxSerial+=1,(a=this.maxSerial.toString()).length>=this.partDigitNo?this.invoiceNumber+=n=a:(n=this.pad(a.toString(),this.partDigitNo),this.invoiceNumber+=n),console.log("-------*****PartType=P*after Serial*****---------"),console.log("this.maxSerial:: "+this.maxSerial),console.log("this.invoiceNumber:: "+this.invoiceNumber),console.log("-------***********---------")):(this.maxSerial=1,this.partDigitNo>1?(n=this.pad(1,this.partDigitNo),this.invoiceNumber+=n):this.invoiceNumber+="1",console.log("-------*****PartType=P*after Serial new rows*****---------"),console.log("this.maxSerial:: "+this.maxSerial),console.log("this.invoiceNumber:: "+this.invoiceNumber),console.log("-------***********---------"))})}}):this._contractService.getMaxContractCodeForOwner(this.curCOMId,this.curUserData.periorty,this.curDocUsed).subscribe(p=>{this.maxSerial=p.max,this.invoiceNumber=this.maxSerial.toString(),console.log("-------*****PartType=G******---------"),console.log("this.maxSerial:: "+this.maxSerial),console.log("this.invoiceNumber:: "+this.invoiceNumber),console.log("-------***********---------")})})}createInvoiceNumber(e,i,n){let a=i??0;a+=1;let l=this.pad(a,n);this.newInvNumber=e+l}printEInvoice(e){this.createInvoiceNumber(e.owner_InvMask,+e.owner_LastInvCode,+e.owner_InvCodeLength),this.invType="INV",this.transferService.setMessage({customer_EInvoiceType:e.customer_EInvoiceType,invType:this.invType,ownerID:e.owner_KeyField,tenantID:e.customer_KeyField,ownerTaxNumber:e.owner_TaxNumber,ownerName:e.owner_FullName,ownerAddress:e.owner_Address,ownerCommRegister:e.owner_CommercialRegister,tenantCommRegister:e.customer_CommercialRegister,ownerBankName:e.owner_BankName,ownerBankAccountNumber:e.owner_BankAccountNumber,accountOwnerName:e.owner_BankAccountOwnerName,tenantName:e.customer_Name,tenantAddress:e.customer_Address,tenantTaxNumber:e.customer_TaxNumber,invoiceValue:e.INSValue-e.INSPayedValue,invoiceNumber:this.newInvNumber,intervalStartDate:e.contract_StartDate,intervalEndDate:e.contract_EndDate,ownerLogo:e.owner_LogoPic,ownerLogoBase64:e.owner_LogoBase64}),this.router.navigate(["/contracts/print-einvoice/"])}printEInvoiceRequest(e){this.invType="REQUEST",this.newRequestNumber="R2024000001",this.transferService.setMessage({customer_EInvoiceType:e.customer_EInvoiceType,invType:this.invType,ownerID:e.owner_KeyField,tenantID:e.customer_KeyField,ownerTaxNumber:e.owner_TaxNumber,ownerName:e.owner_FullName,ownerAddress:e.owner_Address,ownerCommRegister:e.owner_CommercialRegister,tenantCommRegister:e.customer_CommercialRegister,ownerBankName:e.owner_BankName,ownerBankAccountNumber:e.owner_BankAccountNumber,accountOwnerName:e.owner_BankAccountOwnerName,tenantName:e.customer_Name,tenantAddress:e.customer_Address,tenantTaxNumber:e.customer_TaxNumber,invoiceValue:e.INSValue-e.INSPayedValue,invoiceNumber:this.newRequestNumber,intervalStartDate:e.contract_StartDate,intervalEndDate:e.contract_EndDate,ownerLogo:e.owner_LogoPic,ownerLogoBase64:e.owner_LogoBase64}),this.router.navigate(["/contracts/print-einvoice/"])}onPageChanged(e){this.page=e,window.scrollTo(0,0)}openCategoryDialog(e){this.dialog.open(Vt,{data:{cttRow:e,contract:this.contract_KeyField,branch:this.branch_KeyField,owner:this.owner_KeyField,build:this.build_KeyField,unit:this.unit_KeyField,customer:this.customer_KeyField},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{console.log("=====result.event:: "+n.event),"Cancel"==n.event||("Patch"==n.event?(this.mapFormvalue_to_InstallmentClass(n.data),this.updateInstallment(this.installmentForDisplay)):"Post"==n.event&&(this.mapFormvalue_to_InstallmentClass(n.data),this.addInstallment(this.installmentForDisplay)))})}addInstallment(e){console.log("====inside addInstallment== ==="),this._contractService.addInstallments(e).subscribe(i=>this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id))}updateInstallment(e){console.log("====inside updateInstallment====="),this._contractService.editInstallments(e).subscribe(i=>this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id))}mapFormvalue_to_InstallmentClass(e){if(console.log("====formValue.dueDate:: "+e.dueDate),null!=e.dueDate){const l=new Date(new C.uU("en-GB").transform(e.dueDate,"yyyy/MM/dd"));new Date(new C.uU("en-GB").transform(new Date(e.dueDate),"yyyy/MM/dd")),this.installmentForDisplay.INSDueDate=l}if(null!=e.INSDueToDate){var n=new Date(new C.uU("en-GB").transform(e.INSDueToDate,"yyyy/MM/dd"));this.installmentForDisplay.INSDueToDate=n}if(null!=e.payDate){const l=new C.uU("en-GB").transform(e.payDate,"dd/MM/yyyy");new Date(new C.uU("en-GB").transform(new Date(e.payDate),"yyyy/MM/dd")),this.installmentForDisplay.INSPayDate=l}this.installmentForDisplay.id=e.id,this.installmentForDisplay.INSCode=e.INSCode,this.installmentForDisplay.INSContractTyps=e.INSContractTyps,this.installmentForDisplay.INSStatus=e.INSStatus,this.installmentForDisplay.INSValue=e.INSValue,this.installmentForDisplay.INSPayedValue=e.INSPayedValue,this.installmentForDisplay.INSPersonPayName=e.INSPersonPayName,this.installmentForDisplay.INSNotes=e.INSNotes,this.installmentForDisplay.RowConfirm=e.RowConfirm,this.installmentForDisplay.RowDelete=e.RowDelete,this.installmentForDisplay.RowStatus=e.RowStatus,this.installmentForDisplay.contract_KeyField=e.contract_KeyField,this.installmentForDisplay.branch_KeyField=e.branch_KeyField,this.installmentForDisplay.owner_KeyField=e.owner_KeyField,this.installmentForDisplay.build_KeyField=e.build_KeyField,this.installmentForDisplay.unit_KeyField=e.unit_KeyField,this.installmentForDisplay.customer_KeyField=e.customer_KeyField}getInstallmentsPerContract(e,i,n){this._contractService.getInstallmentsPerContract(e,i,n).subscribe(a=>{this.contractInstallmentsArray=a},a=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}remove(e,i){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(a=>{a&&this._contractService.deleteInstallment(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,i)})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}Yt.\u0275fac=function(e){return new(e||Yt)(t.Y36(mt.y),t.Y36(N.C),t.Y36(tt.U),t.Y36(P.F0),t.Y36(P.gz),t.Y36(H.W),t.Y36(we.q),t.Y36(pt.g),t.Y36(R.ux),t.Y36(O.sK),t.Y36(d.qu),t.Y36(y.uw),t.Y36(it.d))},Yt.\u0275cmp=t.Xpm({type:Yt,selectors:[["app-installment"]],decls:34,vars:27,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","click"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"h2"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.YNc(6,yn,3,3,"button",2),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",3)(9,"div",4)(10,"div",5)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",5)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",5)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",5)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",5)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t._UZ(30,"div",5),t.qZA(),t.YNc(31,wn,19,13,"div",6),t.ALo(32,"paginate"),t.qZA()(),t.YNc(33,Nn,4,0,"div",7),t.qZA()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,9,"BTN.INSTALLMENT")),t.xp6(2),t.Q6J("ngIf",i.can("add_installment")),t.xp6(6),t.hij(" ",t.lcZ(13,11,"HTML.CODE")," "),t.xp6(4),t.hij(" ",t.lcZ(17,13,"HTML.InstallmentValue")," "),t.xp6(4),t.hij(" ",t.lcZ(21,15,"HTML.DueDate")," "),t.xp6(4),t.hij(" ",t.lcZ(25,17,"HTML.InstallmentStatus")," "),t.xp6(4),t.hij(" ",t.lcZ(29,19,"HTML.PayedValue")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(32,21,i.contractInstallmentsArray,t.WLB(24,Fn,i.count,i.page))),t.xp6(2),t.Q6J("ngIf",i.contractInstallmentsArray.length>0))},dependencies:[et.LS,C.sg,C.O5,T.xw,T.Wh,T.yH,w.lW,w.nh,W.a8,$.Hw,X.d,rt.gM,et._s,C.uU,O.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:480px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});var Ne=b(6166),In=b(4159),Fe=b.n(In);function Dn(o,e){if(1&o&&(t.TgZ(0,"div",7)(1,"div",10),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"div",10),t._uU(5),t.qZA(),t.TgZ(6,"div",10),t._uU(7),t.qZA(),t.TgZ(8,"div",10),t._uU(9),t.qZA()()),2&o){const i=e.$implicit;t.xp6(2),t.Oqu(t.xi3(3,4,i.TSTDate,"yyyy-MM-dd")),t.xp6(3),t.Oqu(i.TSTDebitValue),t.xp6(2),t.Oqu(i.TSTCreditValue),t.xp6(2),t.Oqu(i.TSTDescription)}}function Ln(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"mat-card",13)(3,"pagination-controls",14),t.NdJ("pageChange",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(a))}),t.qZA()()()()}}const Mn=function(o,e){return{itemsPerPage:o,currentPage:e}};class Gt{constructor(e,i,n,a,l,p,f,A){this.localStore=e,this.global=i,this.router=n,this.activatedRoute=a,this.tenantsService=l,this.snackBar=p,this.translateService=f,this.appSettings=A,this.tenantStatementArray=[],this.count=10,this.account=new lt.n,this.totalDebitValue=0,this.tempDebitValue=0,this.totalCreditValue=0,this.tempCreditValue=0,this.settings=this.appSettings.settings}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){this.emptyString=" ",this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")&&(this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.prepareMsgLanguage(),this.sub=this.activatedRoute.params.subscribe(e=>{e.id&&(this.id=+e.id,this.getCustomer(this.id),this.getStatementsPerCustomer(this.curCOMId,this.account.periorty,this.id))}))}downloadPDF(){var e=document.getElementById("contentToConvert");Fe()(e).then(i=>{var l=208*i.height/i.width;const f=i.toDataURL("image/png");let A=new Ne.ZP("p","mm","a4");A.addImage(f,"PNG",0,0,208,l),A.save("MYPdf.pdf")})}onPageChanged(e){this.page=e,window.scrollTo(0,0)}getStatementsPerCustomer(e,i,n){this.totalDebitValue=0,this.totalCreditValue=0,this.tenantsService.getStatementsPerCustomers(e,i,n).subscribe(a=>{this.tenantStatementArray=a;for(let l=0;l<this.tenantStatementArray.length;l++)this.tempDebitValue=+this.tenantStatementArray[l].TSTDebitValue,this.totalDebitValue+=this.tempDebitValue,this.tempCreditValue=+this.tenantStatementArray[l].TSTCreditValue,this.totalCreditValue+=this.tempCreditValue},a=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCustomer(e){this.tenantsService.getOneCustomer(e).subscribe(i=>{this.cusName=i.CUSName})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e})}}Gt.\u0275fac=function(e){return new(e||Gt)(t.Y36(N.C),t.Y36(tt.U),t.Y36(P.F0),t.Y36(P.gz),t.Y36(ct.v),t.Y36(R.ux),t.Y36(O.sK),t.Y36(it.d))},Gt.\u0275cmp=t.Xpm({type:Gt,selectors:[["app-tenant-statements"]],decls:43,vars:33,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click"],["id","contentToConvert",1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell","primary-text","notifbold"],["fxLayout","row wrap",4,"ngIf"],[1,"mat-mdc-cell"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"button",2),t.NdJ("click",function(){return i.downloadPDF()}),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t._UZ(6,"mat-divider"),t.TgZ(7,"div",3)(8,"div",1)(9,"h2"),t._uU(10),t.ALo(11,"translate"),t.qZA()(),t._UZ(12,"mat-divider"),t.TgZ(13,"div",4)(14,"div",5)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",5)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",5)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",5)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t.YNc(30,Dn,10,7,"div",6),t.ALo(31,"paginate"),t.TgZ(32,"div",7)(33,"div",8),t._uU(34,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(35,"div",8),t._uU(36),t.qZA(),t.TgZ(37,"div",8),t._uU(38),t.qZA(),t.TgZ(39,"div",8),t._uU(40),t.ALo(41,"translate"),t.qZA()()()(),t.YNc(42,Ln,4,0,"div",9),t.qZA()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,13,"BTN.DownloadPDF")),t.xp6(6),t.AsE("",t.lcZ(11,15,"BTN.Statements")," :: ",i.cusName,""),t.xp6(6),t.hij(" ",t.lcZ(17,17,"HTML.Date")," "),t.xp6(4),t.hij(" ",t.lcZ(21,19,"HTML.Debit")," "),t.xp6(4),t.hij(" ",t.lcZ(25,21,"HTML.Credit")," "),t.xp6(4),t.hij(" ",t.lcZ(29,23,"HTML.Description")," "),t.xp6(2),t.Q6J("ngForOf",t.xi3(31,25,i.tenantStatementArray,t.WLB(30,Mn,i.count,i.page))),t.xp6(6),t.hij(" ",i.totalDebitValue," "),t.xp6(2),t.hij(" ",i.totalCreditValue," "),t.xp6(2),t.AsE(" ",t.lcZ(41,28,"HTML.Balance")," (",i.totalCreditValue-i.totalDebitValue,") "),t.xp6(2),t.Q6J("ngIf",i.tenantStatementArray.length>0))},dependencies:[et.LS,C.sg,C.O5,T.xw,T.Wh,T.yH,w.lW,W.a8,X.d,et._s,C.uU,O.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:480px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});class Rn{}function qn(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function En(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Pn(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"First name is required"),t.qZA())}function kn(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Last name is required"),t.qZA())}function Bn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-form-field",17)(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"input",83),t.ALo(5,"translate"),t.TgZ(6,"mat-icon",84),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.passwordHide=!a.passwordHide)}),t._uU(7),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"HTML.PASSWORD")),t.xp6(2),t.s9C("placeholder",t.lcZ(5,6,"HTML.PASSWORD")),t.Q6J("type",i.passwordHide?"password":"text"),t.xp6(3),t.Oqu(i.passwordHide?"visibility":"visibility_off")}}function Kn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-form-field",17)(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"input",85),t.ALo(5,"translate"),t.TgZ(6,"mat-icon",84),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.confirmpasswordHide=!a.confirmpasswordHide)}),t._uU(7),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"HTML.ConfirmPassword")),t.xp6(2),t.s9C("placeholder",t.lcZ(5,6,"HTML.ConfirmPassword")),t.Q6J("type",i.confirmpasswordHide?"password":"text"),t.xp6(3),t.Oqu(i.confirmpasswordHide?"visibility":"visibility_off")}}function Jn(o,e){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Hn(o,e){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Wn(o,e){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Vn(o,e){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Yn(o,e){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Gn(o,e){if(1&o&&(t.TgZ(0,"mat-tab",86),t.ALo(1,"translate"),t.TgZ(2,"div",6)(3,"mat-dialog-content",7)(4,"div",8)(5,"div",87)(6,"mat-form-field",17)(7,"mat-label"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"input",88),t.qZA()(),t.TgZ(11,"div",41)(12,"mat-form-field",17)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",89),t.qZA()(),t.TgZ(17,"div",41)(18,"mat-form-field",17)(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",90),t.qZA()()()(),t.TgZ(23,"div",8)(24,"div",91)(25,"mat-form-field",17)(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"mat-select",92),t.ALo(30,"translate"),t.TgZ(31,"mat-option",22),t._uU(32,"-"),t.qZA(),t.TgZ(33,"mat-option",22),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"mat-option",22),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"mat-option",22),t._uU(40),t.ALo(41,"translate"),t.qZA()()()(),t.TgZ(42,"div",91)(43,"mat-form-field",17)(44,"mat-label"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"mat-select",93),t.ALo(48,"translate"),t.TgZ(49,"mat-option",22),t._uU(50,"-"),t.qZA(),t.YNc(51,Yn,2,2,"mat-option",52),t.qZA()()(),t.TgZ(52,"div",94)(53,"mat-form-field",17)(54,"mat-label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"input",95),t.qZA()()()()()),2&o){const i=t.oxw();t.s9C("label",t.lcZ(1,16,"HTML.TAB_EINVOICE")),t.xp6(8),t.Oqu(t.lcZ(9,18,"HTML.OrganizationName")),t.xp6(6),t.Oqu(t.lcZ(15,20,"HTML.OrganizationUnit")),t.xp6(6),t.Oqu(t.lcZ(21,22,"HTML.CommonName")),t.xp6(7),t.Oqu(t.lcZ(28,24,"HTML.TypeOfInvoices")),t.xp6(2),t.s9C("placeholder",t.lcZ(30,26,"HTML.TypeOfInvoices")),t.xp6(4),t.Q6J("value","0100"),t.xp6(1),t.Oqu(t.lcZ(35,28,"OPTIONS.Simple")),t.xp6(2),t.Q6J("value","1000"),t.xp6(1),t.Oqu(t.lcZ(38,30,"OPTIONS.Standard")),t.xp6(2),t.Q6J("value","1100"),t.xp6(1),t.Oqu(t.lcZ(41,32,"OPTIONS.SimpleStandard")),t.xp6(5),t.Oqu(t.lcZ(46,34,"HTML.BusinessCategory")),t.xp6(2),t.s9C("placeholder",t.lcZ(48,36,"HTML.BusinessCategory")),t.xp6(4),t.Q6J("ngForOf",i.WorkField),t.xp6(4),t.hij(" ",t.lcZ(56,38,"HTML.OWNERSerialNumber"),"")}}function Qn(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function jn(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function $n(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",96),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.onSave())}),t.YNc(1,Qn,3,3,"span",1),t.YNc(2,jn,3,3,"span",1),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.oneowner.id),t.xp6(1),t.Q6J("ngIf",i.oneowner.id)}}class wt{constructor(e,i,n,a,l,p,f,A,S){this.dialogRef=e,this.oneowner=i,this.atlasService=n,this.localStore=a,this.codesService=l,this.sanitizer=p,this.snackBar=f,this.fb=A,this.appSettings=S,this.passwordHide=!0,this.confirmpasswordHide=!0,this.workField_const=(new x.I).WorkType,this.country_const=(new x.I).Countries,this.governorate_const=(new x.I).Governorates,this.city_const=(new x.I).City,this.region_const=(new x.I).Regions,this.defaultOwnerImage=this.noImageUrl,this.defaultOwnerIDImage=this.noImageUrl,this.defaultOwnerLogo=this.noImageUrl,this.OwnerImageToUpload=null,this.OwnerIDImageToUpload=null,this.OwnerLogoToUpload=null,this.userPerm=[],this.WorkField=[],this.allowedChar="1234567890",this.lengthOfCode=6,this.Countries=[],this.Governorates=[],this.Cities=[],this.Areas=[],this.baseUrl=this.appSettings.settings.url,this.secondPartUrl=new L.P(this.baseUrl).api_constant,this.noImageUrl=new L.P(this.baseUrl).noImage}handelOwnerImgInput(e){this.OwnerImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultOwnerImage=n.target.result},i.readAsDataURL(this.OwnerImageToUpload)}handelOwnerIDImgInput(e){this.OwnerIDImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultOwnerIDImage=n.target.result},i.readAsDataURL(this.OwnerIDImageToUpload)}handelOwnerLogo(e){this.OwnerLogoToUpload=e.item(0);var i=new FileReader;i.readAsDataURL(this.OwnerLogoToUpload),i.onload=n=>{this.defaultOwnerLogo=n.target.result,this.fileName=this.OwnerLogoToUpload.name+" "+this.OwnerLogoToUpload.type;const a=i.result.split(",")[1];this.filePreview="data:image/png;base64,"+a,this.form.patchValue({settings:{OWNLogoPicBase64:this.filePreview}})}}sanitize(e){return this.sanitizer.bypassSecurityTrustUrl(e)}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.oneowner.dataRow&&(this.id=this.oneowner.dataRow.id),this.form=this.fb.group({id:null,OWNFirstName:["",d.kI.compose([d.kI.required,d.kI.minLength(2)])],OWNLastName:["",d.kI.compose([d.kI.required,d.kI.minLength(2)])],OWNGender:null,OWNSelfType:null,OWNBirthDate:null,OWNPic:null,work:this.fb.group({OWNNationalIDType:null,OWNNationalID:null,OWNNationalIDStartDate:null,OWNNationalIDEndDate:null,OWNIDPic:null}),contacts:this.fb.group({username:{value:null,disabled:this.id},OWNPassword:null,confirmPassword:null,OWNEmail:["",d.kI.compose([d.kI.required,B.Le])],OWNMobile:[null,d.kI.required],OWNMobileWhatsapp:null,OWNHomePhone:null,OWNWorkPhone:null,OWNAddress:null,OWNShortAddress:null,OWNAddressDescription:null,OWNStreetName:null,OWNBuildingNumber:null,OWNZibCode:null,OWNBuildingSubNumber:null,country:null,governorate:null,city:null,area:null},{validator:(0,B.zi)("OWNPassword","confirmPassword")}),settings:this.fb.group({OWNActive:!1,OWNTaxNumber:null,OWNCommercialRegister:null,OWNBankName:null,OWNBankAccountNumber:null,OWNBankAccountOwnerName:null,OWNLastInvoiceCode:null,OWNInvoiceMask:null,OWNInvoiceNumberLength:null,OWNLogoPic:null,OWNLogoPicBase64:null,EntryDate:null}),einvoice:this.fb.group({OWNOrganizationName:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u0634\u0623\u0629 \u0636\u0631\u064a\u0628\u064a\u0627\u064b",OWNOrganizationUnit:"\u0627\u0644\u0641\u0631\u0639",OWNCommonName:"CN123456789",OWNTypeOfInvoices:"1100",BusinessCategory_CTTKeyField:null,OWNCSR:null,OWNPublicKey:null,OWNPrivateKey:null,OWNCertificate:null,OWNComplianceAuth:null,OWNProductionAuth:null,OWNCountryShortName:"SA",OWNCitySubDivision:"Sharafia",OWNSerialNumber:"1-TST|2-TST|3-ea52s1d8-e6a2",OWNPlotIdentification:null,OWNTaxName:"Standard and Simplified"})}),this.getCountries(this.curCOMId,this.curUserData.periorty),this.getWorkField(this.curCOMId,this.curUserData.periorty),this.oneowner.dataRow?(this.curPeriority=this.curUserData.periorty,this.action="Patch",this.fillForm(this.oneowner.dataRow),this.oneowner.dataRow.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.curUserData.periorty,this.oneowner.dataRow.Country_CTTKeyField),this.oneowner.dataRow.Governorate_CTTKeyField&&this.getCityPerGoverno(this.curCOMId,this.curUserData.periorty,this.oneowner.dataRow.Governorate_CTTKeyField),this.oneowner.dataRow.City_CTTKeyField&&this.getAreaPerCity(this.curCOMId,this.curUserData.periorty,this.oneowner.dataRow.City_CTTKeyField)):(this.curPeriority=0,this.action="Post",this.oneowner.dataRow=new Rn,this.getMaxCodeForCustomers())}getWorkField(e,i){this.codesService.getSubForParent(e,i,this.workField_const).subscribe(n=>{this.WorkField=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0646\u0648\u0627\u0639 \u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0644\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}fillForm(e){this.defaultOwnerImage=null!=e.OWNPic?e.OWNPic:this.noImageUrl,this.defaultOwnerIDImage=null!=e.OWNIDPic?e.OWNIDPic:this.noImageUrl,this.defaultOwnerLogo=null!=e.OWNLogoPic?e.OWNLogoPic:this.noImageUrl,this.form.patchValue({id:e.id,OWNFirstName:e.OWNFirstName,OWNLastName:e.OWNLastName,OWNGender:e.OWNGender,OWNBirthDate:e.OWNBirthDate,OWNSelfType:e.OWNSelfType,OWNPic:e.OWNPic,work:{OWNNationalIDType:e.OWNNationalIDType,OWNNationalID:e.OWNNationalID,OWNNationalIDStartDate:e.OWNNationalIDStartDate,OWNNationalIDEndDate:e.OWNNationalIDEndDate,OWNIDPic:e.OWNIDPic},contacts:{username:e.username,OWNPassword:e.OWNPassword,confirmPassword:e.OWNPassword,OWNEmail:e.OWNEmail,OWNMobile:e.OWNMobile,OWNMobileWhatsapp:e.OWNMobileWhatsapp,OWNHomePhone:e.OWNHomePhone,OWNWorkPhone:e.OWNWorkPhone,OWNAddress:e.OWNAddress,OWNShortAddress:e.OWNShortAddress,OWNBuildingSubNumber:e.OWNBuildingSubNumber,OWNAddressDescription:e.OWNAddressDescription,OWNStreetName:e.OWNStreetName,OWNBuildingNumber:e.OWNBuildingNumber,OWNZibCode:e.OWNZibCode,country:e.Country_CTTKeyField,governorate:e.Governorate_CTTKeyField,city:e.City_CTTKeyField,area:e.Area_CTTKeyField},settings:{OWNActive:e.OWNActive,OWNTaxNumber:e.OWNTaxNumber,OWNCommercialRegister:e.OWNCommercialRegister,OWNBankName:e.OWNBankName,OWNBankAccountNumber:e.OWNBankAccountNumber,OWNBankAccountOwnerName:e.OWNBankAccountOwnerName,OWNLogoPic:e.OWNLogoPic,OWNLogoPicBase64:e.OWNLogoPicBase64,OWNLastInvoiceCode:e.OWNLastInvoiceCode,OWNInvoiceMask:e.OWNInvoiceMask,OWNInvoiceNumberLength:e.OWNInvoiceNumberLength,EntryDate:e.entryDate},einvoice:{OWNOrganizationName:e.OWNOrganizationName,OWNOrganizationUnit:e.OWNOrganizationUnit,OWNCommonName:e.OWNCommonName,OWNTypeOfInvoices:e.OWNTypeOfInvoices,BusinessCategory_CTTKeyField:e.BusinessCategory_CTTKeyField,OWNCSR:e.OWNCSR,OWNPublicKey:e.OWNPublicKey,OWNPrivateKey:e.OWNPrivateKey,OWNCertificate:e.OWNCertificate,OWNComplianceAuth:e.OWNComplianceAuth,OWNProductionAuth:e.OWNProductionAuth,OWNCountryShortName:e.OWNCountryShortName,OWNCitySubDivision:e.OWNCitySubDivision,OWNSerialNumber:e.OWNSerialNumber,OWNPlotIdentification:e.OWNPlotIdentification,OWNTaxName:e.OWNTaxName}}),this.filePreview=e.OWNLogoPicBase64}onSave(){console.log("===***Press Save button***==="),this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value,ownPic:this.OwnerImageToUpload,ownerIDPic:this.OwnerIDImageToUpload,ownerLogo:this.OwnerLogoToUpload})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}createRandomString(e,i){let n="";for(let a=0;a<e;a++)n+=i.charAt(Math.floor(Math.random()*i.length));return n}getMaxCodeForCustomers(){let e=this.createRandomString(this.lengthOfCode,this.allowedChar);console.log(e),this.form.patchValue({contacts:{username:e,OWNPassword:e,confirmPassword:e,OWNEmail:"E"+e+"@changeit.com"}})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(e){this.getGovernoratePerCountry(this.curCOMId,this.curUserData.periorty,e.value)}getGovernoratePerCountry(e,i,n){this.Governorates=[],this.Cities=[],this.Areas=[],this.codesService.getSubForParentAndRelated(e,i,this.governorate_const,n).subscribe(a=>{this.Governorates=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(e){this.getCityPerGoverno(this.curCOMId,this.curUserData.periorty,e.value)}getCityPerGoverno(e,i,n){this.Areas=[],this.codesService.getSubForParentAndRelated(e,i,this.city_const,n).subscribe(a=>{this.Cities=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(e){this.getAreaPerCity(this.curCOMId,this.curUserData.periorty,e.value)}getAreaPerCity(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.region_const,n).subscribe(a=>{this.Areas=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}}wt.\u0275fac=function(e){return new(e||wt)(t.Y36(y.so),t.Y36(y.WI),t.Y36(I.Z),t.Y36(N.C),t.Y36(Ot.d),t.Y36(Wt.H7),t.Y36(R.ux),t.Y36(d.QS),t.Y36(it.d))},wt.\u0275cmp=t.Xpm({type:wt,selectors:[["app-owners-dialog"]],decls:310,vars:200,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content",""],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],[1,"dialog-content"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["appearance","outline",1,"w-50"],["matInput","","formControlName","OWNFirstName","required",""],["appearance","outline",1,"w-45"],["matInput","","formControlName","OWNLastName","required",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","OWNGender",1,"w-100"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],["appearance","outline",1,"w-100"],["matInput","","formControlName","OWNBirthDate",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["formControlName","OWNSelfType","id","selftypeOpSel",3,"placeholder"],[3,"value"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","OWNPic","name","ownPic","id","OwnerPicupload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","work",3,"label"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["formControlName","OWNNationalIDType","id","idTypeOpSel",3,"placeholder"],["matInput","","formControlName","OWNNationalID"],["matInput","","formControlName","OWNNationalIDStartDate",3,"matDatepicker"],["idstartdate",""],["matInput","","formControlName","OWNNationalIDEndDate",3,"matDatepicker"],["idenddate",""],["formControlName","OWNIDPic","name","OWNIDPic","id","OwnerIDPicupload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","contacts",3,"label"],["fxFlex","100","fxFlex.gt-sm","29.9",1,"px-1"],["matInput","","formControlName","username","required","",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","69.8",1,"px-1"],["matInput","","formControlName","OWNEmail","required",""],["appearance","outline","class","w-100",4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","25.0",1,"px-1"],["matInput","","formControlName","OWNMobile"],["matInput","","formControlName","OWNMobileWhatsapp"],["matInput","","formControlName","OWNHomePhone"],["matInput","","formControlName","OWNWorkPhone"],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["matInput","","formControlName","OWNAddress"],["fxFlex","100","fxFlex.gt-sm","20.0",1,"px-1"],["matInput","","formControlName","OWNShortAddress"],["appearance","outline",1,"w-25"],["formControlName","country","id","countrOpSel",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","governorate","id","governoOpSel",3,"placeholder","selectionChange"],["appearance","outline",1,"w-24"],["formControlName","city","id","cityOpSel",3,"placeholder","selectionChange"],["formControlName","area","id","areaOpSel",3,"placeholder"],["appearance","outline",1,"w-40"],["matInput","","formControlName","OWNStreetName"],["appearance","outline",1,"w-20"],["matInput","","formControlName","OWNBuildingNumber"],["appearance","outline",1,"w-19"],["matInput","","formControlName","OWNZibCode"],["matInput","","formControlName","OWNBuildingSubNumber"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","OWNAddressDescription","rows","3"],["formGroupName","settings",3,"label"],["formControlName","OWNActive"],["matInput","","formControlName","OWNTaxNumber"],["appearance","outline",1,"w-49"],["matInput","","formControlName","OWNCommercialRegister"],["matInput","","formControlName","OWNBankName"],["matInput","","formControlName","OWNBankAccountNumber"],["matInput","","formControlName","OWNBankAccountOwnerName"],["matInput","","formControlName","OWNLastInvoiceCode"],["matInput","","formControlName","OWNInvoiceMask"],["matInput","","formControlName","OWNInvoiceNumberLength"],["formControlName","OWNLogoPic","name","OWNLogoPic","id","OwnerLogoupload","type","file","accept","image/*",1,"user-img",3,"change"],["width","150","height","150",3,"src"],["formGroupName","einvoice",3,"label",4,"ngIf"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["matInput","","formControlName","OWNPassword","minlength","6",3,"placeholder","type"],["matSuffix","",3,"click"],["matInput","","formControlName","confirmPassword",3,"placeholder","type"],["formGroupName","einvoice",3,"label"],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["matInput","","formControlName","OWNOrganizationName"],["matInput","","formControlName","OWNOrganizationUnit"],["matInput","","formControlName","OWNCommonName"],["fxFlex","100","fxFlex.gt-sm","30.0",1,"px-1"],["formControlName","OWNTypeOfInvoices","id","invtypeOpSel",3,"placeholder"],["formControlName","BusinessCategory_CTTKeyField","id","busicatOpSel",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","40.0",1,"px-1"],["matInput","","formControlName","OWNSerialNumber"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1",0),t.YNc(1,qn,3,3,"span",1),t.YNc(2,En,3,3,"span",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",2)(6,"form",3)(7,"mat-tab-group",4)(8,"mat-tab",5),t.ALo(9,"translate"),t.TgZ(10,"div",6)(11,"mat-dialog-content",7)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label")(15,"mat-icon"),t._uU(16,"person"),t.qZA(),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",10),t.YNc(20,Pn,2,0,"mat-error",1),t.qZA(),t.TgZ(21,"mat-form-field",11)(22,"mat-label")(23,"mat-icon"),t._uU(24,"person"),t.qZA(),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"input",12),t.YNc(28,kn,2,0,"mat-error",1),t.qZA()()(),t.TgZ(29,"div",8)(30,"div",13)(31,"mat-radio-group",14)(32,"mat-radio-button",15),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"mat-radio-button",16),t._uU(36),t.ALo(37,"translate"),t.qZA()()(),t.TgZ(38,"div",13)(39,"mat-form-field",17)(40,"mat-label"),t._uU(41),t.ALo(42,"translate"),t.qZA(),t._UZ(43,"input",18)(44,"mat-datepicker-toggle",19)(45,"mat-datepicker",null,20),t.qZA()(),t.TgZ(47,"div",13)(48,"mat-form-field",17)(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"mat-select",21),t.ALo(53,"translate"),t.TgZ(54,"mat-option",22),t._uU(55,"-"),t.qZA(),t.TgZ(56,"mat-option",22),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.TgZ(59,"mat-option",22),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"mat-option",22),t._uU(63),t.ALo(64,"translate"),t.qZA()()()()(),t.TgZ(65,"div",23),t._UZ(66,"img",24),t.TgZ(67,"input",25),t.NdJ("change",function(a){return i.handelOwnerImgInput(a.target.files)}),t.qZA()()()(),t.TgZ(68,"mat-tab",26),t.ALo(69,"translate"),t.TgZ(70,"div",6)(71,"mat-dialog-content",7)(72,"div",8)(73,"div",27)(74,"mat-form-field",17)(75,"mat-label"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"mat-select",28),t.ALo(79,"translate"),t.TgZ(80,"mat-option",22),t._uU(81,"-"),t.qZA(),t.TgZ(82,"mat-option",22),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"mat-option",22),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.TgZ(88,"mat-option",22),t._uU(89),t.ALo(90,"translate"),t.qZA(),t.TgZ(91,"mat-option",22),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.TgZ(94,"mat-option",22),t._uU(95),t.ALo(96,"translate"),t.qZA()()()(),t.TgZ(97,"div",27)(98,"mat-form-field",17)(99,"mat-label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t._UZ(102,"input",29),t.qZA()()()(),t.TgZ(103,"div",8)(104,"div",27)(105,"mat-form-field",17)(106,"mat-label"),t._uU(107),t.ALo(108,"translate"),t.qZA(),t._UZ(109,"input",30)(110,"mat-datepicker-toggle",19)(111,"mat-datepicker",null,31),t.qZA()(),t.TgZ(113,"div",27)(114,"mat-form-field",17)(115,"mat-label"),t._uU(116),t.ALo(117,"translate"),t.qZA(),t._UZ(118,"input",32)(119,"mat-datepicker-toggle",19)(120,"mat-datepicker",null,33),t.qZA()()(),t.TgZ(122,"div",23),t._UZ(123,"img",24),t.TgZ(124,"input",34),t.NdJ("change",function(a){return i.handelOwnerIDImgInput(a.target.files)}),t.qZA()()()(),t.TgZ(125,"mat-tab",35),t.ALo(126,"translate"),t.TgZ(127,"div",6)(128,"mat-dialog-content",7)(129,"div",8)(130,"div",36)(131,"mat-form-field",17)(132,"mat-label"),t._uU(133),t.ALo(134,"translate"),t.qZA(),t._UZ(135,"input",37),t.ALo(136,"translate"),t.qZA()(),t.TgZ(137,"div",38)(138,"mat-form-field",17)(139,"mat-label"),t._uU(140),t.ALo(141,"translate"),t.qZA(),t._UZ(142,"input",39),t.qZA()()()(),t.TgZ(143,"div",8)(144,"div",27),t.YNc(145,Bn,8,8,"mat-form-field",40),t.qZA(),t.TgZ(146,"div",27),t.YNc(147,Kn,8,8,"mat-form-field",40),t.qZA()(),t.TgZ(148,"div",8)(149,"div",41)(150,"mat-form-field",17)(151,"mat-label"),t._uU(152),t.ALo(153,"translate"),t.qZA(),t._UZ(154,"input",42),t.qZA()(),t.TgZ(155,"div",41)(156,"mat-form-field",17)(157,"mat-label"),t._uU(158),t.ALo(159,"translate"),t.qZA(),t._UZ(160,"input",43),t.qZA()(),t.TgZ(161,"div",41)(162,"mat-form-field",17)(163,"mat-label"),t._uU(164),t.ALo(165,"translate"),t.qZA(),t._UZ(166,"input",44),t.qZA()(),t.TgZ(167,"div",41)(168,"mat-form-field",17)(169,"mat-label"),t._uU(170),t.ALo(171,"translate"),t.qZA(),t._UZ(172,"input",45),t.qZA()()(),t.TgZ(173,"div",8)(174,"div",46)(175,"mat-form-field",17)(176,"mat-label"),t._uU(177),t.ALo(178,"translate"),t.qZA(),t._UZ(179,"input",47),t.qZA()(),t.TgZ(180,"div",48)(181,"mat-form-field",17)(182,"mat-label"),t._uU(183),t.ALo(184,"translate"),t.qZA(),t._UZ(185,"input",49),t.qZA()()(),t.TgZ(186,"div",8)(187,"mat-form-field",50)(188,"mat-label"),t._uU(189),t.ALo(190,"translate"),t.qZA(),t.TgZ(191,"mat-select",51),t.NdJ("selectionChange",function(a){return i.getGovernorate(a)}),t.ALo(192,"translate"),t.TgZ(193,"mat-option",22),t._uU(194,"-"),t.qZA(),t.YNc(195,Jn,2,2,"mat-option",52),t.qZA()(),t.TgZ(196,"mat-form-field",50)(197,"mat-label"),t._uU(198),t.ALo(199,"translate"),t.qZA(),t.TgZ(200,"mat-select",53),t.NdJ("selectionChange",function(a){return i.getCity(a)}),t.ALo(201,"translate"),t.TgZ(202,"mat-option",22),t._uU(203,"-"),t.qZA(),t.YNc(204,Hn,2,2,"mat-option",52),t.qZA()(),t.TgZ(205,"mat-form-field",54)(206,"mat-label"),t._uU(207),t.ALo(208,"translate"),t.qZA(),t.TgZ(209,"mat-select",55),t.NdJ("selectionChange",function(a){return i.getAria(a)}),t.ALo(210,"translate"),t.TgZ(211,"mat-option",22),t._uU(212,"-"),t.qZA(),t.YNc(213,Wn,2,2,"mat-option",52),t.qZA()(),t.TgZ(214,"mat-form-field",50)(215,"mat-label"),t._uU(216),t.ALo(217,"translate"),t.qZA(),t.TgZ(218,"mat-select",56),t.ALo(219,"translate"),t.TgZ(220,"mat-option",22),t._uU(221,"-"),t.qZA(),t.YNc(222,Vn,2,2,"mat-option",52),t.qZA()()(),t.TgZ(223,"div",8)(224,"mat-form-field",57)(225,"mat-label"),t._uU(226),t.ALo(227,"translate"),t.qZA(),t._UZ(228,"input",58),t.qZA(),t.TgZ(229,"mat-form-field",59)(230,"mat-label"),t._uU(231),t.ALo(232,"translate"),t.qZA(),t._UZ(233,"input",60),t.qZA(),t.TgZ(234,"mat-form-field",61)(235,"mat-label"),t._uU(236),t.ALo(237,"translate"),t.qZA(),t._UZ(238,"input",62),t.qZA(),t.TgZ(239,"mat-form-field",59)(240,"mat-label"),t._uU(241),t.ALo(242,"translate"),t.qZA(),t._UZ(243,"input",63),t.qZA()(),t.TgZ(244,"div",64)(245,"mat-form-field",17)(246,"mat-label"),t._uU(247),t.ALo(248,"translate"),t.qZA(),t._UZ(249,"textarea",65),t.qZA()()()(),t.TgZ(250,"mat-tab",66),t.ALo(251,"translate"),t.TgZ(252,"div",6)(253,"mat-checkbox",67),t._uU(254,"Active"),t.qZA()(),t.TgZ(255,"div",6)(256,"div",8)(257,"mat-form-field",9)(258,"mat-label"),t._uU(259),t.ALo(260,"translate"),t.qZA(),t._UZ(261,"input",68),t.qZA(),t.TgZ(262,"mat-form-field",69)(263,"mat-label"),t._uU(264),t.ALo(265,"translate"),t.qZA(),t._UZ(266,"input",70),t.qZA()(),t.TgZ(267,"div",8)(268,"mat-form-field",9)(269,"mat-label"),t._uU(270),t.ALo(271,"translate"),t.qZA(),t._UZ(272,"input",71),t.qZA(),t.TgZ(273,"mat-form-field",11)(274,"mat-label"),t._uU(275),t.ALo(276,"translate"),t.qZA(),t._UZ(277,"input",72),t.qZA()(),t.TgZ(278,"div",8)(279,"mat-form-field",9)(280,"mat-label"),t._uU(281),t.ALo(282,"translate"),t.qZA(),t._UZ(283,"input",73),t.qZA(),t.TgZ(284,"mat-form-field",11)(285,"mat-label"),t._uU(286),t.ALo(287,"translate"),t.qZA(),t._UZ(288,"input",74),t.qZA()(),t.TgZ(289,"div",8)(290,"mat-form-field",9)(291,"mat-label"),t._uU(292),t.ALo(293,"translate"),t.qZA(),t._UZ(294,"input",75),t.qZA(),t.TgZ(295,"mat-form-field",11)(296,"mat-label"),t._uU(297),t.ALo(298,"translate"),t.qZA(),t._UZ(299,"input",76),t.qZA()(),t.TgZ(300,"div",23)(301,"input",77),t.NdJ("change",function(a){return i.handelOwnerLogo(a.target.files)}),t.qZA(),t._UZ(302,"img",78),t.qZA()()(),t.YNc(303,Gn,58,40,"mat-tab",79),t.qZA()()(),t.TgZ(304,"div",80)(305,"div",8),t.YNc(306,$n,3,4,"button",81),t.TgZ(307,"button",82),t.NdJ("click",function(){return i.close()}),t._uU(308),t.ALo(309,"translate"),t.qZA()()()),2&e){const n=t.MAs(46),a=t.MAs(112),l=t.MAs(121);t.xp6(1),t.Q6J("ngIf",!i.oneowner.id),t.xp6(1),t.Q6J("ngIf",i.oneowner.id),t.xp6(1),t.hij(" ",t.lcZ(4,88,"HTML.OWNER"),""),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(9,90,"HTML.TAB_BASIC")),t.xp6(9),t.hij(" ",t.lcZ(18,92,"HTML.FIRST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.OWNFirstName.errors?null:i.form.controls.OWNFirstName.errors.required),t.xp6(5),t.hij(" ",t.lcZ(26,94,"HTML.LAST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.OWNLastName.errors?null:i.form.controls.OWNLastName.errors.required),t.xp6(5),t.Oqu(t.lcZ(34,96,"HTML.MALE")),t.xp6(3),t.Oqu(t.lcZ(37,98,"HTML.FEMALE")),t.xp6(5),t.Oqu(t.lcZ(42,100,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(51,102,"HTML.OWNER_SelfType")),t.xp6(2),t.s9C("placeholder",t.lcZ(53,104,"HTML.OWNER_SelfType")),t.xp6(4),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(58,106,"OPTIONS.Person")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(61,108,"OPTIONS.Company")),t.xp6(2),t.Q6J("value","O"),t.xp6(1),t.Oqu(t.lcZ(64,110,"OPTIONS.OTHER")),t.xp6(3),t.Q6J("src",i.defaultOwnerImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(69,112,"HTML.TAB_ID")),t.xp6(8),t.Oqu(t.lcZ(77,114,"HTML.IDTYPE")),t.xp6(2),t.s9C("placeholder",t.lcZ(79,116,"HTML.IDTYPE")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(84,118,"OPTIONS.NATIONAL_ID")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(87,120,"OPTIONS.FOREIGN_ID")),t.xp6(2),t.Q6J("value","K"),t.xp6(1),t.Oqu(t.lcZ(90,122,"OPTIONS.GULF_ID")),t.xp6(2),t.Q6J("value","S"),t.xp6(1),t.Oqu(t.lcZ(93,124,"OPTIONS.SPECIAL_EQAMA")),t.xp6(2),t.Q6J("value","O"),t.xp6(1),t.Oqu(t.lcZ(96,126,"OPTIONS.OTHER")),t.xp6(5),t.Oqu(t.lcZ(101,128,"HTML.IDNUMBER")),t.xp6(7),t.Oqu(t.lcZ(108,130,"HTML.START_DATE")),t.xp6(2),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(6),t.Oqu(t.lcZ(117,132,"HTML.END_DATE")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(4),t.Q6J("src",i.defaultOwnerIDImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(126,134,"HTML.TAB_CONTACTS")),t.xp6(8),t.Oqu(t.lcZ(134,136,"HTML.USERNAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(136,138,"HTML.USERNAME")),t.xp6(5),t.Oqu(t.lcZ(141,140,"HTML.EMAIL")),t.xp6(5),t.Q6J("ngIf",!i.oneowner.id),t.xp6(2),t.Q6J("ngIf",!i.oneowner.id),t.xp6(5),t.Oqu(t.lcZ(153,142,"HTML.MOBILE")),t.xp6(6),t.Oqu(t.lcZ(159,144,"HTML.WHATSAPP")),t.xp6(6),t.Oqu(t.lcZ(165,146,"HTML.HOME_PHONE")),t.xp6(6),t.Oqu(t.lcZ(171,148,"HTML.WORK_PHONE")),t.xp6(7),t.Oqu(t.lcZ(178,150,"HTML.ADDRESS")),t.xp6(6),t.Oqu(t.lcZ(184,152,"HTML.ShortAddress")),t.xp6(6),t.Oqu(t.lcZ(190,154,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(192,156,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(3),t.Oqu(t.lcZ(199,158,"HTML.GOVERN")),t.xp6(2),t.s9C("placeholder",t.lcZ(201,160,"HTML.GOVERN")),t.xp6(4),t.Q6J("ngForOf",i.Governorates),t.xp6(3),t.Oqu(t.lcZ(208,162,"HTML.CITY")),t.xp6(2),t.s9C("placeholder",t.lcZ(210,164,"HTML.CITY")),t.xp6(4),t.Q6J("ngForOf",i.Cities),t.xp6(3),t.Oqu(t.lcZ(217,166,"HTML.REGION")),t.xp6(2),t.s9C("placeholder",t.lcZ(219,168,"HTML.REGION")),t.xp6(4),t.Q6J("ngForOf",i.Areas),t.xp6(4),t.Oqu(t.lcZ(227,170,"HTML.STREET_NAME")),t.xp6(5),t.Oqu(t.lcZ(232,172,"HTML.BUILDING_NUMBER")),t.xp6(5),t.Oqu(t.lcZ(237,174,"HTML.ZIP")),t.xp6(5),t.Oqu(t.lcZ(242,176,"HTML.BUILDING_SubNUMBER")),t.xp6(6),t.Oqu(t.lcZ(248,178,"HTML.ADDRESS_DESC")),t.xp6(3),t.s9C("label",t.lcZ(251,180,"HTML.TAB_SETTINGS")),t.xp6(9),t.Oqu(t.lcZ(260,182,"HTML.TaxNumber")),t.xp6(5),t.Oqu(t.lcZ(265,184,"HTML.CommercialRegister")),t.xp6(6),t.Oqu(t.lcZ(271,186,"HTML.BankName")),t.xp6(5),t.Oqu(t.lcZ(276,188,"HTML.AccountNumber")),t.xp6(6),t.Oqu(t.lcZ(282,190,"HTML.AccountOwnerName")),t.xp6(5),t.Oqu(t.lcZ(287,192,"HTML.InvoiceLastCode")),t.xp6(6),t.Oqu(t.lcZ(293,194,"HTML.InvoiceMask")),t.xp6(5),t.Oqu(t.lcZ(298,196,"HTML.InvoiceCodeLength")),t.xp6(5),t.Q6J("src",i.sanitize(i.filePreview),t.LSH),t.xp6(1),t.Q6J("ngIf",i.can("view_owner_einvoice_data")),t.xp6(3),t.Q6J("ngIf",i.oneowner.id&&i.can("change_propertyowner")||!i.oneowner.id&&i.can("add_propertyowner")),t.xp6(2),t.Oqu(t.lcZ(309,198,"BTN.CANCEL"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.wO,Ut.VQ,Ut.U0,C.sg,C.O5,d.sg,d.u,d.x0,T.xw,T.Wh,T.yH,q.ey,w.lW,Mt.oG,Q.Mq,Q.hl,Q.nW,y.ZT,y.uh,y.xY,y.H8,$.Hw,Z.Nt,v.KE,v.hX,v.TO,v.R9,D.gD,bt.uX,bt.SP,O.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:600px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.dialog-content[_ngcontent-%COMP%]{margin-top:8px}"]});var zn=b(4870);function Xn(o,e){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function to(o,e){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function eo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function io(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.remove(a.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function no(o,e){if(1&o&&(t.TgZ(0,"div",20)(1,"div",21),t._uU(2),t.qZA(),t.TgZ(3,"div",21),t._uU(4),t.qZA(),t.TgZ(5,"div",21)(6,"div",22),t.YNc(7,io,4,3,"button",23),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.hij("",i.build_Name," "),t.xp6(3),t.Q6J("ngIf",n.can("delete_owner_security_onebuilding"))}}class Qt{constructor(e,i,n,a,l,p,f,A,S){this.dialogRef=e,this.oneowner=i,this.atlasService=n,this.unitsService=a,this.translateService=l,this.localStore=p,this.dialog=f,this.snackBar=A,this.fb=S,this.passwordHide=!0,this.userPerm=[],this.AllBranches=[],this.AllBuilding=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({branch_KeyField:[null,d.kI.required],build_KeyField:[null,d.kI.required]}),this.Builds=new zn.x,this.curPeriority=0,this.action="Patch",this.getAllBranches(this.curCOMId,this.curPeriority),this.getOwnerBuilds(),this.prepareMsgLanguage()}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getOwnerBuilds(){this.empBuildings=null,this.unitsService.getAllBuildingForOwner(this.curCOMId,this.curPeriority,this.oneowner.id).subscribe(e=>this.empBuildings=e)}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.curPeriority,e.value)}getBuildingPerBranch(e,i,n){null==n?(console.log("-----related:: "+n),this.AllBuilding=[]):this.unitsService.getBuildingsPerBranch(e,i,n).subscribe(a=>{this.AllBuilding=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapFormValue_toTable(){this.Builds.owner_KeyField=this.oneowner.id,this.Builds.build_KeyField=this.dataForm.value.build_KeyField,this.Builds.branch_KeyField=this.dataForm.value.branch_KeyField}onSave(){this.mapFormValue_toTable(),this.unitsService.addBuildForOwner(this.Builds).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerBuilds()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(e){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.unitsService.deleteBuildingForOwner(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerBuilds()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}Qt.\u0275fac=function(e){return new(e||Qt)(t.Y36(y.so),t.Y36(y.WI),t.Y36(I.Z),t.Y36(h.X),t.Y36(O.sK),t.Y36(N.C),t.Y36(y.uw),t.Y36(R.ux),t.Y36(d.QS))},Qt.\u0275cmp=t.Xpm({type:Qt,selectors:[["app-owners-builds-dialog"]],decls:51,vars:29,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","build_KeyField","id","build_OneOpSel",3,"placeholder"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",6),t.NdJ("selectionChange",function(a){return i.getBuildings(a)}),t.ALo(10,"translate"),t.TgZ(11,"mat-option",7),t._uU(12,"-"),t.qZA(),t.YNc(13,Xn,2,2,"mat-option",8),t.qZA()()(),t.TgZ(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"mat-select",9),t.ALo(20,"translate"),t.TgZ(21,"mat-option",7),t._uU(22,"-"),t.qZA(),t.YNc(23,to,2,2,"mat-option",8),t.qZA()()()()()(),t.TgZ(24,"div",10)(25,"div",3),t.YNc(26,eo,4,4,"button",11),t.TgZ(27,"button",12),t.NdJ("click",function(){return i.close()}),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t._UZ(30,"mat-divider"),t.TgZ(31,"div",13)(32,"mat-dialog-content")(33,"mat-card")(34,"div",14)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"mat-divider"),t.TgZ(39,"div",15)(40,"div",16)(41,"div",17)(42,"h2"),t._uU(43),t.ALo(44,"translate"),t.qZA()(),t.TgZ(45,"div",17)(46,"h2"),t._uU(47),t.ALo(48,"translate"),t.qZA()(),t._UZ(49,"div",17),t.qZA(),t.YNc(50,no,8,3,"div",18),t.qZA()()()()()),2&e&&(t.Q6J("formGroup",i.dataForm),t.xp6(7),t.hij(" ",t.lcZ(8,13,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(10,15,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.hij(" ",t.lcZ(18,17,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(20,19,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuilding),t.xp6(3),t.Q6J("ngIf",i.can("add_owner_security_onebuilding")),t.xp6(2),t.Oqu(t.lcZ(29,21,"BTN.CANCEL")),t.xp6(8),t.Oqu(t.lcZ(37,23,"HTML.OwnerBuilding")),t.xp6(7),t.hij(" ",t.lcZ(44,25,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(48,27,"HTML.BUILDING")," "),t.xp6(3),t.Q6J("ngForOf",i.empBuildings))},dependencies:[d._Y,d.JJ,d.JL,C.sg,C.O5,d.sg,d.u,T.xw,T.Wh,T.yH,q.ey,w.lW,w.nh,W.a8,y.xY,y.H8,$.Hw,v.KE,v.hX,X.d,D.gD,rt.gM,O.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});class oo{}function ao(o,e){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function ro(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function so(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.displayRow(a))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.VIEW"))}function lo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.remove(a.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function co(o,e){if(1&o&&(t.TgZ(0,"div",24)(1,"div",25),t._uU(2),t.qZA(),t.TgZ(3,"div",25),t._uU(4),t.qZA(),t.TgZ(5,"div",25)(6,"mat-icon",26),t._uU(7),t.qZA()(),t.TgZ(8,"div",25)(9,"div",27),t.YNc(10,so,4,3,"button",28),t.YNc(11,lo,4,3,"button",29),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.bankName),t.xp6(2),t.hij("",i.BACAccountNumber," "),t.xp6(3),t.Oqu("T"==i.BACActive?"check_box":"check_box_outline_blank"),t.xp6(3),t.Q6J("ngIf",n.can("change_bankaccount")),t.xp6(1),t.Q6J("ngIf",n.can("delete_bankaccount"))}}class jt{constructor(e,i,n,a,l,p,f,A,S,U){this.dialogRef=e,this.oneowner=i,this.atlasService=n,this.contractService=a,this.translateService=l,this.codesService=p,this.localStore=f,this.dialog=A,this.snackBar=S,this.fb=U,this.passwordHide=!0,this.bank_const=(new x.I).Banks,this.userPerm=[],this.currentRowMode=null,this.isResp=!1,this.AllBanks=[]}ngOnInit(){this.currentRowMode="INSERT",this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({id:null,bank_CTTKeyField:[null,d.kI.required],owner_KeyField:[null,d.kI.required],BACAccountNumber:[null,d.kI.required],BACIBan:null,BACActive:!0}),this.dataForm.patchValue({owner_KeyField:this.oneowner.id}),this.Accounts=new oo,this.curPeriority=0,this.action="Patch",this.getAllBanks(this.curCOMId,this.curPeriority),this.getOwnerAccounts(),this.prepareMsgLanguage()}displayRow(e){this.currentRowMode="EDIT","T"==e.BACActive&&(this.isResp=!0),"F"==e.BACActive&&(this.isResp=!1),this.dataForm.patchValue({id:e.id,bank_CTTKeyField:e.bank_CTTKeyField,owner_KeyField:e.owner_KeyField,BACAccountNumber:e.BACAccountNumber,BACIBan:e.BACIBan,BACActive:this.isResp})}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getOwnerAccounts(){this.ownerAccounts=null,this.contractService.getAllAccountsForOwner(this.curCOMId,this.curPeriority,this.oneowner.id).subscribe(e=>this.ownerAccounts=e)}getAllBanks(e,i){this.codesService.getSubForParent(e,i,this.bank_const).subscribe(n=>{this.AllBanks=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0628\u0646\u0648\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapFormValue_toTable(){this.Accounts.BACActive=0==this.dataForm.value.BACActive?"F":"T",this.Accounts.id=this.dataForm.value.id,this.Accounts.owner_KeyField=this.oneowner.id,this.Accounts.bank_CTTKeyField=this.dataForm.value.bank_CTTKeyField,this.Accounts.BACAccountNumber=this.dataForm.value.BACAccountNumber,this.Accounts.BACIBan=this.dataForm.value.BACIBan}onSave(){this.mapFormValue_toTable(),"INSERT"==this.currentRowMode?this.contractService.addBankAccountForOwner(this.Accounts).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerAccounts()}):"EDIT"==this.currentRowMode&&this.contractService.editBankAccountForOwner(this.Accounts).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerAccounts()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(e){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.contractService.deleteAccountForOwner(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerAccounts()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}jt.\u0275fac=function(e){return new(e||jt)(t.Y36(y.so),t.Y36(y.WI),t.Y36(I.Z),t.Y36(H.W),t.Y36(O.sK),t.Y36(Ot.d),t.Y36(N.C),t.Y36(y.uw),t.Y36(R.ux),t.Y36(d.QS))},jt.\u0275cmp=t.Xpm({type:jt,selectors:[["app-owners-bank-accounts"]],decls:62,vars:34,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","bank_CTTKeyField","id","bankContOpSel",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","BACAccountNumber"],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["matInput","","formControlName","BACIBan"],["fxFlex","100","fxFlex.gt-sm","20.0",1,"px-1"],["formControlName","BACActive","color","primary"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"text-muted"],[1,"p-2","actions"],["mat-mini-fab","","color","primary","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",1,"mx-1",3,"matTooltip","click"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",6),t.ALo(10,"translate"),t.TgZ(11,"mat-option",7),t._uU(12,"-"),t.qZA(),t.YNc(13,ao,2,2,"mat-option",8),t.qZA()()(),t.TgZ(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",9),t.qZA()()(),t.TgZ(20,"div",3)(21,"div",10)(22,"mat-form-field",5)(23,"mat-label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",11),t.qZA()(),t.TgZ(27,"div",12)(28,"mat-checkbox",13),t._uU(29),t.ALo(30,"translate"),t.qZA()()()()(),t.TgZ(31,"div",14)(32,"div",3),t.YNc(33,ro,4,4,"button",15),t.TgZ(34,"button",16),t.NdJ("click",function(){return i.close()}),t._uU(35),t.ALo(36,"translate"),t.qZA()()(),t._UZ(37,"mat-divider"),t.TgZ(38,"div",17)(39,"mat-dialog-content")(40,"mat-card")(41,"div",18)(42,"h2"),t._uU(43),t.ALo(44,"translate"),t.qZA()(),t._UZ(45,"mat-divider"),t.TgZ(46,"div",19)(47,"div",20)(48,"div",21)(49,"h2"),t._uU(50),t.ALo(51,"translate"),t.qZA()(),t.TgZ(52,"div",21)(53,"h2"),t._uU(54),t.ALo(55,"translate"),t.qZA()(),t.TgZ(56,"div",21)(57,"h2"),t._uU(58),t.ALo(59,"translate"),t.qZA()(),t._UZ(60,"div",21),t.qZA(),t.YNc(61,co,12,5,"div",22),t.qZA()()()()()),2&e&&(t.Q6J("formGroup",i.dataForm),t.xp6(7),t.hij(" ",t.lcZ(8,14,"HTML.BankName"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(10,16,"HTML.BankName")),t.xp6(4),t.Q6J("ngForOf",i.AllBanks),t.xp6(4),t.Oqu(t.lcZ(18,18,"HTML.AccountNumber")),t.xp6(7),t.Oqu(t.lcZ(25,20,"HTML.AccountIBan")),t.xp6(5),t.Oqu(t.lcZ(30,22,"HTML.ACTIVE")),t.xp6(4),t.Q6J("ngIf",i.can("add_bankaccount")),t.xp6(2),t.Oqu(t.lcZ(36,24,"BTN.CANCEL")),t.xp6(8),t.Oqu(t.lcZ(44,26,"HTML.BankAccounts")),t.xp6(7),t.hij(" ",t.lcZ(51,28,"HTML.BankName")," "),t.xp6(4),t.hij(" ",t.lcZ(55,30,"HTML.AccountNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(59,32,"HTML.ACTIVE")," "),t.xp6(3),t.Q6J("ngForOf",i.ownerAccounts))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,C.sg,C.O5,d.sg,d.u,T.xw,T.Wh,T.yH,q.ey,w.lW,w.nh,W.a8,Mt.oG,y.xY,y.H8,$.Hw,Z.Nt,v.KE,v.hX,X.d,D.gD,rt.gM,O.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});var uo=b(3221),be=b(8255),mo=b(455);function po(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-button-toggle",16),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.openOwnerDialog(null))}),t.TgZ(1,"mat-icon"),t._uU(2,"person_add"),t.qZA()()}}function ho(o,e){if(1&o&&(t.TgZ(0,"h3",39),t._uU(1),t.qZA()),2&o){const i=t.oxw().$implicit;t.xp6(1),t.AsE("",i.OWNFirstName," ",i.OWNLastName,"")}}function go(o,e){1&o&&(t.TgZ(0,"h3",39),t._uU(1,"User blocked"),t.qZA())}function _o(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openOwnerDialog(a))}),t.TgZ(1,"mat-icon"),t._uU(2,"mode_edit"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.VIEW")))}function Co(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.deleteOwner(a))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.REMOVE")))}function fo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.changePassword(a))}),t.TgZ(1,"mat-icon"),t._uU(2,"key"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.PasswordChange")))}function To(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openBuildingDialog(a))}),t.TgZ(1,"mat-icon"),t._uU(2,"business"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Building")))}function bo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openUserPermission(a.Userid))}),t.TgZ(1,"mat-icon"),t._uU(2,"security"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Security")))}function vo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openBankAccountsDialog(a))}),t.TgZ(1,"mat-icon"),t._uU(2,"account_balance_wallet"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.BankAccounts")))}function Ao(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.setupInvoice(a))}),t.TgZ(1,"mat-icon"),t._uU(2,"settings"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.InvPhase2Setup")))}function yo(o,e){if(1&o&&t._UZ(0,"img",41),2&o){const i=t.oxw().$implicit;t.ekj("blocked",1==i.RowDelete),t.Q6J("src",i.OWNPic,t.LSH)}}function Zo(o,e){if(1&o&&t._UZ(0,"img",42),2&o){const i=t.oxw().$implicit;t.ekj("blocked",1==i.RowDelete)}}function Oo(o,e){1&o&&(t.TgZ(0,"mat-icon",43),t._uU(1,"block"),t.qZA())}function xo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",19)(1,"mat-card")(2,"div",20),t.YNc(3,ho,2,2,"h3",21),t.YNc(4,go,2,0,"h3",21),t.TgZ(5,"button",22,23)(7,"mat-icon"),t._uU(8,"more_vert"),t.qZA()()(),t.TgZ(9,"mat-menu",24,25)(11,"span",26),t.NdJ("mouseleave",function(){t.CHM(i);const a=t.MAs(6);return t.KtG(a.closeMenu())}),t.YNc(12,_o,6,3,"button",27),t.YNc(13,Co,6,3,"button",27),t._UZ(14,"mat-divider"),t.YNc(15,fo,6,3,"button",27),t._UZ(16,"mat-divider"),t.YNc(17,To,6,3,"button",27),t.YNc(18,bo,6,3,"button",27),t._UZ(19,"mat-divider"),t.YNc(20,vo,6,3,"button",27),t._UZ(21,"mat-divider"),t.YNc(22,Ao,6,3,"button",27),t._UZ(23,"mat-divider"),t.qZA()(),t.TgZ(24,"div",28)(25,"div",29)(26,"div",30),t.YNc(27,yo,1,3,"img",31),t.YNc(28,Zo,1,2,"img",32),t.YNc(29,Oo,2,0,"mat-icon",33),t.qZA(),t.TgZ(30,"div",34)(31,"mat-slide-toggle",35),t.NdJ("change",function(){const l=t.CHM(i).$implicit;return t.KtG(l.RowDelete=!l.RowDelete)}),t.qZA()()(),t.TgZ(32,"div",36)(33,"p",37)(34,"mat-icon",38),t._uU(35,"contact_phone"),t.qZA(),t.TgZ(36,"span"),t._uU(37),t.qZA()(),t.TgZ(38,"p",37)(39,"mat-icon",38),t._uU(40,"chat"),t.qZA(),t.TgZ(41,"span"),t._uU(42),t.qZA()(),t.TgZ(43,"p",37)(44,"mat-icon",38),t._uU(45,"mail_outline"),t.qZA(),t.TgZ(46,"span"),t._uU(47),t.qZA()(),t.TgZ(48,"p",37)(49,"mat-icon",38),t._uU(50,"card_membership"),t.qZA(),t.TgZ(51,"span"),t._uU(52),t.qZA()(),t.TgZ(53,"p",37)(54,"mat-icon",38),t._uU(55,"location_on"),t.qZA(),t.TgZ(56,"span"),t._uU(57),t.qZA()()()()()()}if(2&o){const i=e.$implicit,n=t.MAs(10),a=t.oxw(2);t.xp6(3),t.Q6J("ngIf",0==i.RowDelete),t.xp6(1),t.Q6J("ngIf",1==i.RowDelete),t.xp6(1),t.Q6J("matMenuTriggerFor",n),t.xp6(7),t.Q6J("ngIf",a.can("view_oneowner")),t.xp6(1),t.Q6J("ngIf",a.can("delete_propertyowner")),t.xp6(2),t.Q6J("ngIf",a.can("change_owner_password")),t.xp6(2),t.Q6J("ngIf",a.can("view_owner_securitybuildings")),t.xp6(1),t.Q6J("ngIf",a.can("view_emp_securitypermissions")),t.xp6(2),t.Q6J("ngIf",a.can("view_bankaccount")),t.xp6(2),t.Q6J("ngIf",a.can("setup_einvoice_phase2")),t.xp6(5),t.Q6J("ngIf",i.OWNPic),t.xp6(1),t.Q6J("ngIf",!i.OWNPic),t.xp6(1),t.Q6J("ngIf",1==i.RowDelete),t.xp6(2),t.Q6J("checked",1==i.RowDelete),t.xp6(1),t.ekj("blocked",1==i.RowDelete),t.xp6(5),t.Oqu(i.OWNMobile),t.xp6(5),t.Oqu(i.OWNMobileWhatsapp),t.xp6(5),t.Oqu(i.OWNEmail),t.xp6(5),t.Oqu(i.OWNSelfTypeDisplay),t.xp6(5),t.Oqu(i.OWNAddress)}}const Ie=function(o,e){return{itemsPerPage:o,currentPage:e}};function Uo(o,e){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,xo,58,21,"div",18),t.ALo(2,"paginate"),t.ALo(3,"OwnerSearchPipe"),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.xi3(3,4,i.owners,i.searchText),t.WLB(7,Ie,i.count,i.page)))}}function So(o,e){if(1&o&&(t.TgZ(0,"h3",39),t._uU(1),t.qZA()),2&o){const i=t.oxw().$implicit;t.xp6(1),t.AsE("",i.OWNFirstName," ",i.OWNLastName,"")}}function wo(o,e){1&o&&(t.TgZ(0,"h3",39),t._uU(1,"User blocked"),t.qZA())}function No(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openOwnerDialog(a))}),t.TgZ(1,"mat-icon"),t._uU(2,"mode_edit"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.VIEW")))}function Fo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.deleteOwner(a))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.REMOVE")))}function Io(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openBuildingDialog(a))}),t.TgZ(1,"mat-icon"),t._uU(2,"business"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Building")))}function Do(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openUserPermission(a.Userid))}),t.TgZ(1,"mat-icon"),t._uU(2,"security"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Security")))}function Lo(o,e){if(1&o&&t._UZ(0,"img",41),2&o){const i=t.oxw().$implicit;t.ekj("blocked",1==i.RowDelete),t.Q6J("src",i.OWNPic,t.LSH)}}function Mo(o,e){if(1&o&&t._UZ(0,"img",52),2&o){const i=t.oxw().$implicit;t.ekj("blocked",1==i.RowDelete)}}function Ro(o,e){1&o&&(t.TgZ(0,"mat-icon",43),t._uU(1,"block"),t.qZA())}function qo(o,e){1&o&&(t.TgZ(0,"mat-icon",38),t._uU(1,"person_outline"),t.qZA())}function Eo(o,e){1&o&&(t.TgZ(0,"mat-icon",38),t._uU(1,"person"),t.qZA())}function Po(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",45)(1,"mat-card")(2,"div",20),t.YNc(3,So,2,2,"h3",21),t.YNc(4,wo,2,0,"h3",21),t.TgZ(5,"button",22,23)(7,"mat-icon"),t._uU(8,"more_vert"),t.qZA()()(),t.TgZ(9,"mat-menu",24,25)(11,"span",26),t.NdJ("mouseleave",function(){t.CHM(i);const a=t.MAs(6);return t.KtG(a.closeMenu())}),t.YNc(12,No,6,3,"button",27),t.YNc(13,Fo,6,3,"button",27),t._UZ(14,"mat-divider"),t.YNc(15,Io,6,3,"button",27),t.YNc(16,Do,6,3,"button",27),t.qZA()(),t.TgZ(17,"div",28)(18,"div",46)(19,"div",30),t.YNc(20,Lo,1,3,"img",31),t.YNc(21,Mo,1,2,"img",47),t.YNc(22,Ro,2,0,"mat-icon",33),t.qZA(),t.TgZ(23,"div",34)(24,"mat-slide-toggle",35),t.NdJ("change",function(){const l=t.CHM(i).$implicit;return t.KtG(l.RowDelete=!l.RowDelete)}),t.qZA()()(),t.TgZ(25,"div",48)(26,"div",49)(27,"p",37)(28,"mat-icon",38),t._uU(29,"chat-dots"),t.qZA(),t.TgZ(30,"span"),t._uU(31),t.qZA()()(),t.TgZ(32,"div",49)(33,"p",37)(34,"mat-icon",38),t._uU(35,"mail_outline"),t.qZA(),t.TgZ(36,"span"),t._uU(37),t.qZA()(),t.TgZ(38,"p",37)(39,"mat-icon",38),t._uU(40,"contact_phone"),t.qZA(),t.TgZ(41,"span"),t._uU(42),t.qZA()(),t.TgZ(43,"p",37)(44,"mat-icon",38),t._uU(45,"location_on"),t.qZA(),t.TgZ(46,"span"),t._uU(47),t.qZA()()(),t.TgZ(48,"div",50)(49,"p",37)(50,"mat-icon",38),t._uU(51,"event_available"),t.qZA(),t.TgZ(52,"span"),t._uU(53),t.ALo(54,"date"),t.qZA()(),t.TgZ(55,"p",37),t.YNc(56,qo,2,0,"mat-icon",51),t.YNc(57,Eo,2,0,"mat-icon",51),t.TgZ(58,"span"),t._uU(59),t.qZA()()()()()()()}if(2&o){const i=e.$implicit,n=t.MAs(10),a=t.oxw(2);t.xp6(3),t.Q6J("ngIf",0==i.RowDelete),t.xp6(1),t.Q6J("ngIf",1==i.RowDelete),t.xp6(1),t.Q6J("matMenuTriggerFor",n),t.xp6(7),t.Q6J("ngIf",a.can("view_oneowner")),t.xp6(1),t.Q6J("ngIf",a.can("delete_propertyowner")),t.xp6(2),t.Q6J("ngIf",a.can("view_owner_securitybuildings")),t.xp6(1),t.Q6J("ngIf",a.can("view_emp_securitypermissions")),t.xp6(4),t.Q6J("ngIf",i.OWNPic),t.xp6(1),t.Q6J("ngIf",!i.OWNPic),t.xp6(1),t.Q6J("ngIf",1==i.RowDelete),t.xp6(2),t.Q6J("checked",1==i.RowDelete),t.xp6(1),t.ekj("blocked",1==i.RowDelete),t.xp6(6),t.Oqu(i.OWNMobileWhatsapp),t.xp6(6),t.Oqu(i.OWNEmail),t.xp6(5),t.Oqu(i.OWNMobile),t.xp6(5),t.Oqu(i.OWNAddress),t.xp6(6),t.hij("Registration ",t.xi3(54,21,i.EntryDate,"dd MMMM, yyyy 'at' HH:mm"),""),t.xp6(3),t.Q6J("ngIf",1==i.RowDelete),t.xp6(1),t.Q6J("ngIf",0==i.RowDelete),t.xp6(2),t.Oqu(1==i.RowDelete?"Blocked":"Active")}}function ko(o,e){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,Po,60,24,"div",44),t.ALo(2,"paginate"),t.ALo(3,"OwnerSearchPipe"),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.xi3(3,4,i.owners,i.searchText),t.WLB(7,Ie,i.count,i.page)))}}function Bo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",17)(1,"div",45)(2,"mat-card",53)(3,"pagination-controls",54),t.NdJ("pageChange",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(a))}),t.qZA()()()()}}function Ko(o,e){1&o&&(t.TgZ(0,"div",55),t._UZ(1,"mat-spinner",56),t.qZA())}class $t{constructor(e,i,n,a,l,p,f){this.appSettings=e,this.dialog=i,this.router=n,this.global=a,this.localStore=l,this.translateService=p,this.contractService=f,this.count=9,this.account=new lt.n,this.userPerm=[],this.ownersForDisplay={id:null,COMId:null,OWNCode:null,OWNName:null,OWNFirstName:null,OWNLastName:null,OWNGender:null,OWNGenderDisplay:null,OWNBirthDate:null,OWNNationalIDStartDate:null,OWNNationalIDEndDate:null,username:null,OWNPassword:null,OWNMobile:null,OWNMobileWhatsapp:null,OWNHomePhone:null,OWNWorkPhone:null,OWNEmail:null,OWNAddress:null,OWNAddressDescription:null,OWNShortAddress:null,OWNStreetName:null,OWNBuildingNumber:null,OWNZibCode:null,OWNNotes:null,OWNActive:null,OWNActiveDisplay:null,OWNPic:null,OWNIDPic:null,Related_OWNKeyField:null,Country_CTTKeyField:null,Governorate_CTTKeyField:null,OWNNationalIDType:null,OWNNationalIDTypeDisplay:null,OWNNationalID:null,City_CTTKeyField:null,Area_CTTKeyField:null,OWNLangtitude:null,OWNAltitude:null,OWNSelfType:null,OWNSelfTypeDisplay:null,OWNTaxNumber:null,OWNCommercialRegister:null,OWNBankName:null,OWNBankAccountNumber:null,OWNBankAccountOwnerName:null,OWNLogoPic:null,OWNLogoPicBase64:null,OWNLastInvoiceCode:null,OWNInvoiceMask:null,OWNInvoiceNumberLength:null,EntryDate:null,last_updated:null,EntryUser:null,RowConfirm:0,RowDelete:0,RowStatus:0,OWNOrganizationName:null,OWNOrganizationUnit:null,OWNCommonName:null,OWNTypeOfInvoices:null,BusinessCategory_CTTKeyField:null,OWNCSR:null,OWNPublicKey:null,OWNPrivateKey:null,OWNCertificate:null,OWNComplianceAuth:null,OWNProductionAuth:null,OWNBuildingSubNumber:null,OWNCountryShortName:null,OWNCitySubDivision:null,OWNSerialNumber:null,OWNPlotIdentification:null,OWNTaxName:null},this.settings=this.appSettings.settings}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getOwners()}}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getOwners(){this.owners=null,this.curOwnerId=this.curUserData.owner_KeyField??0,this.curUserData.is_superuser?(console.log("-----SuperUser11-----"),console.log("---this.account.periorty:: "+this.account.periorty),console.log("---this.account[periorty]:: "+this.account.periorty),console.log("-----SuperUser22-----"),this.contractService.getAllOwners(this.curCOMId,this.account.periorty).subscribe(e=>{console.log(e),this.owners=e})):"T"==this.curUserData.is_owner?(console.log("-----Owner-----"),this.contractService.getOwnersPerParent(this.curCOMId,this.account.periorty,this.curOwnerId).subscribe(e=>{console.log(e),this.owners=e})):"T"==this.curUserData.is_employee&&(console.log("-----Employee-----"),console.log("this.curUserData[id]:: "+this.curUserData.id),this.contractService.getOwnersPerEmp(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(e=>{console.log(e),console.log("----After----"),this.owners=e}))}addOwner(e,i,n,a){this.contractService.addOwner(e,i,n,a).subscribe(l=>{this.contractService.addCustomUserFromOwner(l,i).subscribe(p=>{this.contractService.updateOwnerWithUserID(l.id,p.id).subscribe(f=>{},f=>{console.log("ERROR::--\x3e ",f)})}),this.getOwners()})}updateOwner(e,i,n,a){console.log("====inside updateOwner====="),this.contractService.editOwner(e,i,n,a).subscribe(l=>{this.contractService.updateCustomUserFromOwner(l,i).subscribe(p=>{}),this.getOwners()})}changePassword(e){this.dialog.open(Te.p,{data:{dataRow:e,curUserData:this.curUserData,userPerm:this.userPerm,pk:e.Userid},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}deleteOwner(e){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.contractService.deleteOneOwner(e.id).subscribe(a=>this.getOwners())})}onPageChanged(e){this.page=e,this.getOwners(),window.scrollTo(0,0)}openBankAccountsDialog(e){this.dialog.open(jt,{data:e,panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}setupInvoice(e){}openOwnerDialog(e){this.dialog.open(wt,{data:{dataRow:e,curUserData:this.curUserData,userPerm:this.userPerm},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{"Cancel"==n.event||("Patch"==n.event?(this.mapFormvalue_to_OwnerClass(n.data,"Patch"),this.updateOwner(this.ownersForDisplay,n.ownPic,n.ownerIDPic,n.ownerLogo)):"Post"==n.event&&(this.mapFormvalue_to_OwnerClass(n.data,"Post"),this.addOwner(this.ownersForDisplay,n.ownPic,n.ownerIDPic,n.ownerLogo)))})}openBuildingDialog(e){this.dialog.open(Qt,{data:e,panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}openSecurityDialog(e){this.dialog.open(uo.y,{data:e}).afterClosed().subscribe(n=>{})}openUserPermission(e){this.router.navigate(["/settings/permissions-all/"+e+"/"])}mapFormvalue_to_OwnerClass(e,i){console.log(e),console.log("=================formValue==========================");const n=new C.uU("en-GB").transform(e.OWNBirthDate,"dd/MM/yyyy"),a=new C.uU("en-GB").transform(e.work.OWNNationalIDStartDate,"dd/MM/yyyy"),l=new C.uU("en-GB").transform(e.work.OWNNationalIDEndDate,"dd/MM/yyyy");this.ownersForDisplay.id=e.id,this.ownersForDisplay.OWNFirstName=e.OWNFirstName,this.ownersForDisplay.OWNLastName=e.OWNLastName,this.ownersForDisplay.OWNGender=e.OWNGender,this.ownersForDisplay.OWNSelfType=e.OWNSelfType,null!=e.OWNBirthDate&&(this.ownersForDisplay.OWNBirthDate=n),null!=e.work.OWNNationalIDStartDate&&(this.ownersForDisplay.OWNNationalIDStartDate=a),null!=e.work.OWNNationalIDEndDate&&(this.ownersForDisplay.OWNNationalIDEndDate=l),this.ownersForDisplay.OWNNationalIDType=e.work.OWNNationalIDType,this.ownersForDisplay.OWNNationalID=e.work.OWNNationalID,this.ownersForDisplay.username=e.contacts.username,this.ownersForDisplay.OWNPassword=e.contacts.OWNPassword,this.ownersForDisplay.OWNEmail=e.contacts.OWNEmail,this.ownersForDisplay.OWNMobile=e.contacts.OWNMobile,this.ownersForDisplay.OWNMobileWhatsapp=e.contacts.OWNMobileWhatsapp,this.ownersForDisplay.OWNHomePhone=e.contacts.OWNHomePhone,this.ownersForDisplay.OWNWorkPhone=e.contacts.OWNWorkPhone,this.ownersForDisplay.OWNAddress=e.contacts.OWNAddress,this.ownersForDisplay.OWNShortAddress=e.contacts.OWNShortAddress,this.ownersForDisplay.OWNAddressDescription=e.contacts.OWNAddressDescription,this.ownersForDisplay.OWNBuildingSubNumber=e.contacts.OWNBuildingSubNumber,this.ownersForDisplay.OWNStreetName=e.contacts.OWNStreetName,this.ownersForDisplay.OWNBuildingNumber=e.contacts.OWNBuildingNumber,this.ownersForDisplay.OWNZibCode=e.contacts.OWNZibCode,this.ownersForDisplay.Country_CTTKeyField=e.contacts.country,this.ownersForDisplay.Governorate_CTTKeyField=e.contacts.governorate,this.ownersForDisplay.City_CTTKeyField=e.contacts.city,this.ownersForDisplay.Area_CTTKeyField=e.contacts.area,this.ownersForDisplay.OWNActive=e.settings.OWNActive,this.ownersForDisplay.OWNTaxNumber=e.settings.OWNTaxNumber,this.ownersForDisplay.OWNCommercialRegister=e.settings.OWNCommercialRegister,this.ownersForDisplay.OWNBankName=e.settings.OWNBankName,this.ownersForDisplay.OWNBankAccountNumber=e.settings.OWNBankAccountNumber,this.ownersForDisplay.OWNBankAccountOwnerName=e.settings.OWNBankAccountOwnerName,this.ownersForDisplay.OWNLogoPicBase64=e.settings.OWNLogoPicBase64,this.ownersForDisplay.OWNLastInvoiceCode=e.settings.OWNLastInvoiceCode,this.ownersForDisplay.OWNInvoiceMask=e.settings.OWNInvoiceMask,this.ownersForDisplay.OWNInvoiceNumberLength=e.settings.OWNInvoiceNumberLength,this.ownersForDisplay.OWNOrganizationName=e.einvoice.OWNOrganizationName,this.ownersForDisplay.OWNOrganizationUnit=e.einvoice.OWNOrganizationUnit,this.ownersForDisplay.OWNCommonName=e.einvoice.OWNCommonName,this.ownersForDisplay.OWNTypeOfInvoices=e.einvoice.OWNTypeOfInvoices,this.ownersForDisplay.BusinessCategory_CTTKeyField=e.einvoice.BusinessCategory_CTTKeyField,this.ownersForDisplay.OWNCSR=e.einvoice.OWNCSR,this.ownersForDisplay.OWNPublicKey=e.einvoice.OWNPublicKey,this.ownersForDisplay.OWNPrivateKey=e.einvoice.OWNPrivateKey,this.ownersForDisplay.OWNCertificate=e.einvoice.OWNCertificate,this.ownersForDisplay.OWNComplianceAuth=e.einvoice.OWNComplianceAuth,this.ownersForDisplay.OWNProductionAuth=e.einvoice.OWNProductionAuth,this.ownersForDisplay.OWNBuildingSubNumber=e.contacts.OWNBuildingSubNumber,this.ownersForDisplay.OWNCountryShortName=e.einvoice.OWNCountryShortName,this.ownersForDisplay.OWNCitySubDivision=e.einvoice.OWNCitySubDivision,this.ownersForDisplay.OWNSerialNumber=e.einvoice.OWNSerialNumber,this.ownersForDisplay.OWNPlotIdentification=e.einvoice.OWNPlotIdentification,this.ownersForDisplay.OWNTaxName=e.einvoice.OWNTaxName}prepareMsgLanguage(){this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}$t.\u0275fac=function(e){return new(e||$t)(t.Y36(it.d),t.Y36(y.uw),t.Y36(P.F0),t.Y36(tt.U),t.Y36(N.C),t.Y36(O.sK),t.Y36(H.W))},$t.\u0275cmp=t.Xpm({type:$t,selectors:[["app-owners-list"]],features:[t._Bn([H.W])],decls:25,vars:11,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","grid"],["viewType","matButtonToggleGroup"],["value","grid"],["value","list"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","33.3","fxFlex.md","50","class","p-2",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-md","33.3","fxFlex.md","50",1,"p-2"],["fxLayout","row","fxLayoutAlign","space-between center",1,"bg-primary"],["class","user-name",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["xPosition","before","overlapTrigger","true"],["menu","matMenu"],[3,"mouseleave"],["mat-menu-item","",3,"click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-around center",1,"user-content"],["fxFlex","30","fxLayout","column","fxLayoutAlign","center center"],[1,"user-img"],["class","transition-2",3,"src","blocked",4,"ngIf"],["src","assets/images/others/user.jpg","class","transition-2",3,"blocked",4,"ngIf"],["color","warn",4,"ngIf"],[1,"user-social"],["color","primary",3,"checked","change"],["fxFlex","70","fxLayout","column",1,"user-details","transition-2"],["fxLayout","row","fxLayoutAlign","start center"],[1,"text-muted"],[1,"user-name"],["mat-menu-item","",3,"click"],[1,"transition-2",3,"src"],["src","assets/images/others/user.jpg",1,"transition-2"],["color","warn"],["fxFlex","100","class","p-2",4,"ngFor","ngForOf"],["fxFlex","100",1,"p-2"],["fxFlex","20","fxFlex.xs","30","fxLayout","column","fxLayoutAlign","center center"],["src","assets/img/users/default-user.jpg","class","transition-2",3,"blocked",4,"ngIf"],["fxFlex","80","fxFlex.xs","70","fxLayout","row","fxLayout.xs","column",1,"user-details","transition-2"],["fxFlex","30","fxFlex.xs","100","fxLayout","column"],["fxFlex","40","fxFlex.xs","100","fxLayout","column"],["class","text-muted",4,"ngIf"],["src","assets/img/users/default-user.jpg",1,"transition-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),t.YNc(4,po,3,0,"mat-button-toggle",4),t.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),t._uU(7,"search"),t.qZA()()()(),t.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),t.NdJ("ngModelChange",function(a){return i.searchText=a}),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),t._uU(17,"view_module"),t.qZA()(),t.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),t._uU(20,"view_list"),t.qZA()()()()(),t.YNc(21,Uo,4,10,"div",14),t.YNc(22,ko,4,10,"div",14),t.YNc(23,Bo,4,0,"div",14),t.YNc(24,Ko,2,0,"div",15)),2&e){const n=t.MAs(3),a=t.MAs(14);t.xp6(4),t.Q6J("ngIf",i.can("add_propertyowner")),t.xp6(4),t.ekj("show","search"==n.value),t.xp6(2),t.s9C("placeholder",t.lcZ(11,9,"HTML.SEARCH_Owner")),t.Q6J("ngModel",i.searchText),t.xp6(11),t.Q6J("ngIf","grid"==a.value),t.xp6(1),t.Q6J("ngIf","list"==a.value),t.xp6(1),t.Q6J("ngIf",i.owners),t.xp6(1),t.Q6J("ngIf",!i.owners)}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,et.LS,C.sg,C.O5,T.xw,T.Wh,T.yH,w.RK,dt.A9,dt.Yi,W.a8,$.Hw,Z.Nt,v.KE,X.d,be.VK,be.OP,be.p6,yt.Ou,mo.Rr,et._s,Zt.sp,C.uU,O.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});class ve{}var Jo=b(6381),Ho=b(8910);function Wo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.saveEditDocData(a.tenantLeaveForDisplay.id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.leaveData_Form.value)("disabled",!i.leaveData_Form.valid),t.xp6(1),t.Oqu(t.lcZ(2,3,"BTN.SAVE"))}}class Et{constructor(e,i,n,a,l,p,f,A,S,U,M,K,z,st){this.transferService=e,this.dataService=i,this.activatedRoute=n,this.localStore=a,this._companyService=l,this.global=p,this.router=f,this.snackBar=A,this.docsService=S,this.tenantsService=U,this.contractService=M,this.translateService=K,this.fb=z,this._formBuilder=st,this.account=new lt.n,this.userPerm=[],this.curDocValue=0,this.curDocPayedValue=0}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.transferService.getMessage.subscribe(e=>{this.contract_KeyField=e.contract_KeyField,this.contEndDate=e.contenddate,this.contValue=e.contvalue,this.contInsurance=e.continsurance,this.leaveID=e.leaveid,this.branch_KeyField=e.branch_KeyField,this.owner_KeyField=e.owner_KeyField,this.build_KeyField=e.build_KeyField,this.unit_KeyField=e.unit_KeyField,this.customer_KeyField=e.customer_KeyField,this.customerName=e.cusName,this.contRemainingInstallments=e.remaining_Installments}),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.leaveData_Form=this.fb.group({id:null,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,customer_KeyField:null,TELCode:null,TELLastElectricityReading:null,TELCurrentElectricityReading:null,TELContractEndDate:null,TELLeaveDate:null,DaysDiff:{value:null,disabled:!0},contractValue:{value:null,disabled:!0},TELDeductionElectricValue:0,TELDeductionInstallmentValue:0,TELDeductionDamageValue:0,TELDeductionMonthlyExpensesValue:0,TELDeductionCutFromAdditionValue:0,TELDeductionOtherValue:0,TELDeductionTotalValue:0,TELAdditionInsuranceValue:0,TELAdditionCutFromRentValue:0,TELAdditionOtherValue:0,TELAdditionTotalValue:0,TELNotes:null,netTotalDiff:{value:0,disabled:!0}}),this.sub=this.activatedRoute.params.subscribe(e=>{null==e.id?(console.log("----NULL--------------\x3e>>>"),this.tenantLeaveForDisplay=new ve,this.leaveData_Form.patchValue({contract_KeyField:this.contract_KeyField,TELContractEndDate:this.contEndDate,TELAdditionInsuranceValue:this.contInsurance,TELAdditionTotalValue:this.contInsurance,TELNotes:"",branch_KeyField:this.branch_KeyField,owner_KeyField:this.owner_KeyField,build_KeyField:this.build_KeyField,unit_KeyField:this.unit_KeyField,customer_KeyField:this.customer_KeyField,contractValue:this.contValue,TELDeductionInstallmentValue:this.contRemainingInstallments,TELDeductionTotalValue:this.contRemainingInstallments,netTotalDiff:this.contInsurance-this.contRemainingInstallments})):e.id?(console.log("---param:: "+e.id),this.id=+e.id,this.getLeaveDataById(this.id)):(console.log("----Empty----"),this.tenantLeaveForDisplay=new ve)})}}onChangeLeaveDate(e){this.calcDays(e.value,this.leaveData_Form.value.TELContractEndDate),this.leaveData_Form.get("TELLeaveDate").patchValue(e.value)}calcDays(e,i){var n=this.calculateDiff(e,i);console.log("---otherDays  "+n);let l=Math.round(this.contValue/365*n*100)/100;null==l&&(l=0),this.leaveData_Form.patchValue({DaysDiff:n,TELAdditionCutFromRentValue:l}),this.calcAdditionTotal()}calculateDiff(e,i){let n=new Date(i);return e=new Date(e),Math.floor((Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())-Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))/864e5)}calcAdditionTotal(){let e=this.leaveData_Form.value.TELAdditionInsuranceValue,i=this.leaveData_Form.value.TELAdditionOtherValue,n=this.leaveData_Form.value.TELAdditionCutFromRentValue;null==e&&(e=0),null==i&&(i=0),null==n&&(n=0),this.leaveData_Form.patchValue({TELAdditionTotalValue:Math.round(100*(+e+ +i+ +n))/100}),this.calcNetTotal()}calcDeductionTotal(){let e=this.leaveData_Form.value.TELDeductionElectricValue,i=this.leaveData_Form.value.TELDeductionInstallmentValue,n=this.leaveData_Form.value.TELDeductionDamageValue,a=this.leaveData_Form.value.TELDeductionMonthlyExpensesValue,l=this.leaveData_Form.value.TELDeductionCutFromAdditionValue,p=this.leaveData_Form.value.TELDeductionOtherValue;null==e&&(e=0),null==i&&(i=0),null==n&&(n=0),null==a&&(a=0),null==l&&(l=0),null==p&&(p=0),this.leaveData_Form.patchValue({TELDeductionTotalValue:Math.round(100*(+e+ +i+ +n+ +a+ +l+ +p))/100}),this.calcNetTotal()}calcNetTotal(){let e=this.leaveData_Form.value.TELAdditionTotalValue,i=this.leaveData_Form.value.TELDeductionTotalValue;null==e&&(e=0),null==i&&(i=0),this.leaveData_Form.patchValue({netTotalDiff:Math.round(100*(+e-+i))/100})}readAddInsuranceValue(e){let i=e.target.value;if(i>0){let n=this.leaveData_Form.value.TELAdditionCutFromRentValue,a=this.leaveData_Form.value.TELAdditionOtherValue;null==n&&(n=0),null==a&&(a=0),this.leaveData_Form.patchValue({TELAdditionTotalValue:+i+ +n+ +a})}}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getLeaveDataById(e){console.log("---inside getLeaveDataById -----"),this.contractService.getLeaveData(e).subscribe(i=>{this.fillForm(i),this.tenantLeaveForDisplay=i},i=>{this.tenantLeaveForDisplay=new ve,console.log("---getLeaveDataById  not found Leave data")})}fillForm(e){null!=e.TELContractEndDate&&(this.contra_endDate=e.TELContractEndDate),null!=e.TELLeaveDate&&(this.contra_leaveDate=e.TELLeaveDate),console.log("---11------"),this.calculateDiffDays=this.calculateDiff(e.TELLeaveDate,e.TELContractEndDate),console.log("---this.calculateDiffDays:: "+this.calculateDiffDays),this.leaveData_Form.patchValue({id:e.id,contract_KeyField:e.contract_KeyField,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,TELCode:e.TELCode,TELLastElectricityReading:e.TELLastElectricityReading,TELCurrentElectricityReading:e.TELCurrentElectricityReading,TELContractEndDate:e.TELContractEndDate,TELLeaveDate:e.TELLeaveDate,TELDeductionElectricValue:e.TELDeductionElectricValue,TELDeductionInstallmentValue:e.TELDeductionInstallmentValue,TELDeductionDamageValue:e.TELDeductionDamageValue,TELDeductionMonthlyExpensesValue:e.TELDeductionMonthlyExpensesValue,TELDeductionCutFromAdditionValue:e.TELDeductionCutFromAdditionValue,TELDeductionOtherValue:e.TELDeductionOtherValue,TELDeductionTotalValue:e.TELDeductionTotalValue,TELAdditionInsuranceValue:e.TELAdditionInsuranceValue,TELAdditionCutFromRentValue:e.TELAdditionCutFromRentValue,TELAdditionOtherValue:e.TELAdditionOtherValue,TELAdditionTotalValue:e.TELAdditionTotalValue,TELNotes:e.TELNotes,netTotalDiff:e.TELAdditionTotalValue-e.TELDeductionTotalValue,contractValue:this.contValue,DaysDiff:this.calculateDiffDays}),console.log("---22------")}mappingFormValue_ToPayDocClass(){const e=new C.uU("en-GB").transform(this.leaveData_Form.value.TELContractEndDate,"dd/MM/yyyy"),i=new C.uU("en-GB").transform(this.leaveData_Form.value.TELLeaveDate,"dd/MM/yyyy");this.tenantLeaveForDisplay.id=this.leaveData_Form.value.id,this.tenantLeaveForDisplay.contract_KeyField=this.leaveData_Form.value.contract_KeyField,this.tenantLeaveForDisplay.branch_KeyField=this.leaveData_Form.value.branch_KeyField,this.tenantLeaveForDisplay.owner_KeyField=this.leaveData_Form.value.owner_KeyField,this.tenantLeaveForDisplay.build_KeyField=this.leaveData_Form.value.build_KeyField,this.tenantLeaveForDisplay.unit_KeyField=this.leaveData_Form.value.unit_KeyField,this.tenantLeaveForDisplay.customer_KeyField=this.leaveData_Form.value.customer_KeyField,null!=this.leaveData_Form.value.TELContractEndDate&&(this.tenantLeaveForDisplay.TELContractEndDate=e),null!=this.leaveData_Form.value.TELLeaveDate&&(this.tenantLeaveForDisplay.TELLeaveDate=i),this.tenantLeaveForDisplay.TELCode=this.leaveData_Form.value.TELCode,this.tenantLeaveForDisplay.TELLastElectricityReading=this.leaveData_Form.value.TELLastElectricityReading,this.tenantLeaveForDisplay.TELCurrentElectricityReading=this.leaveData_Form.value.TELCurrentElectricityReading,this.tenantLeaveForDisplay.TELDeductionElectricValue=this.leaveData_Form.value.TELDeductionElectricValue,this.tenantLeaveForDisplay.TELDeductionInstallmentValue=this.leaveData_Form.value.TELDeductionInstallmentValue,this.tenantLeaveForDisplay.TELDeductionDamageValue=this.leaveData_Form.value.TELDeductionDamageValue,this.tenantLeaveForDisplay.TELDeductionMonthlyExpensesValue=this.leaveData_Form.value.TELDeductionMonthlyExpensesValue,this.tenantLeaveForDisplay.TELDeductionCutFromAdditionValue=this.leaveData_Form.value.TELDeductionCutFromAdditionValue,this.tenantLeaveForDisplay.TELDeductionOtherValue=this.leaveData_Form.value.TELDeductionOtherValue,this.tenantLeaveForDisplay.TELDeductionTotalValue=this.leaveData_Form.value.TELDeductionTotalValue,this.tenantLeaveForDisplay.TELAdditionInsuranceValue=this.leaveData_Form.value.TELAdditionInsuranceValue,this.tenantLeaveForDisplay.TELAdditionCutFromRentValue=this.leaveData_Form.value.TELAdditionCutFromRentValue,this.tenantLeaveForDisplay.TELAdditionOtherValue=this.leaveData_Form.value.TELAdditionOtherValue,this.tenantLeaveForDisplay.TELAdditionTotalValue=this.leaveData_Form.value.TELAdditionTotalValue,this.tenantLeaveForDisplay.TELNotes=this.leaveData_Form.value.TELNotes}saveEditDocData(e){this.mappingFormValue_ToPayDocClass(),e?this.contractService.editTenantLeave(this.tenantLeaveForDisplay).subscribe(i=>{let n={contract_KeyField:i.contract_KeyField,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,customer_KeyField:i.customer_KeyField,TSTCreditValue:i.TELAdditionTotalValue,TSTDebitValue:i.TELDeductionTotalValue,TSTDate:i.TELLeaveDate,TSTDescription:"\u0646\u062a\u064a\u062c\u0629 \u0645\u0633\u062a\u0646\u062f \u0627\u0644\u0625\u062e\u0644\u0627\u0621 \u0631\u0642\u0645 "+i.TELCode,TSTSubject:"LEAVE",TSTSubjectID:i.id};console.log("------Start to Deleted--------"),this.contractService.getStatementsIDPerSubjectID(this.curCOMId,this.account.periorty,"LEAVE",i.id).subscribe(a=>{this.stateID=a[0].id,console.log("this.stateID:: "+this.stateID),this.contractService.deleteStatement(this.stateID).subscribe(l=>{console.log("Statment Deleted"),this.contractService.addStatement(n).subscribe(p=>{console.log("Statment Added after deleted")})})}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):this.contractService.addTenantLeave(this.tenantLeaveForDisplay).subscribe(i=>{this.contractService.editContractWithDic({RCOTenantLeaveID:i.id,RCOContractStatus:"F"},i.contract_KeyField).subscribe(l=>{console.log("editContractWithDic Done")},l=>{console.log("editContractWithDic Error:: "+l)});let a={contract_KeyField:i.contract_KeyField,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,customer_KeyField:i.customer_KeyField,TSTCreditValue:i.TELAdditionTotalValue,TSTDebitValue:i.TELDeductionTotalValue,TSTDate:i.TELLeaveDate,TSTDescription:"\u0646\u062a\u064a\u062c\u0629 \u0645\u0633\u062a\u0646\u062f \u0627\u0644\u0625\u062e\u0644\u0627\u0621 \u0631\u0642\u0645 "+i.TELCode,TSTSubject:"LEAVE",TSTSubjectID:i.id};console.log("--tenantStatementData:: "+a),this.contractService.addStatement(a).subscribe(l=>{console.log("addStatement Done")},l=>{console.log("addStatement Error:: "+l)}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e})}}Et.\u0275fac=function(e){return new(e||Et)(t.Y36(mt.y),t.Y36(F.n),t.Y36(P.gz),t.Y36(N.C),t.Y36(Jo.J),t.Y36(tt.U),t.Y36(P.F0),t.Y36(R.ux),t.Y36(Ho.c),t.Y36(ct.v),t.Y36(H.W),t.Y36(O.sK),t.Y36(d.qu),t.Y36(d.qu))},Et.\u0275cmp=t.Xpm({type:Et,selectors:[["app-tenant-leave"]],decls:145,vars:71,consts:[[1,"p-2"],[1,"pt-3"],["autocomplete","off","fxLayout","row wrap",3,"formGroup"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","29.9",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","TELContractEndDate"],["matInput","","formControlName","TELLeaveDate",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["contractleaveDate",""],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["matInput","","formControlName","contractValue"],["fxFlex","100","fxFlex.gt-sm","19.8",1,"px-1"],["matInput","","formControlName","DaysDiff"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","TELLastElectricityReading"],["matInput","","formControlName","TELCurrentElectricityReading"],["fxFlex","100","fxFlex.gt-sm","40",1,"px-2"],["vertical","",2,"height","10px"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-1"],["matInput","","formControlName","TELAdditionInsuranceValue",3,"change"],["matInput","","formControlName","TELAdditionCutFromRentValue",3,"change"],["matInput","","formControlName","TELAdditionOtherValue",3,"change"],["matInput","","formControlName","TELAdditionTotalValue"],["fxFlex","100","fxFlex.gt-sm","10",1,"px-2"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-2"],["matInput","","formControlName","TELDeductionElectricValue",3,"change"],["matInput","","formControlName","TELDeductionInstallmentValue",3,"change"],["matInput","","formControlName","TELDeductionDamageValue",3,"change"],["matInput","","formControlName","TELDeductionMonthlyExpensesValue",3,"change"],["matInput","","formControlName","TELDeductionCutFromAdditionValue",3,"change"],["matInput","","formControlName","TELDeductionOtherValue",3,"change"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","TELDeductionTotalValue"],["fxFlex","100","fxFlex.gt-sm","24.9",1,"px-1"],["matInput","","formControlName","netTotalDiff"],["fxFlex","100","fxFlex.gt-sm","74.9",1,"px-1"],["matInput","","formControlName","TELNotes","rows","3"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"mat-card-content",1)(8,"form",2),t._UZ(9,"mat-label"),t.TgZ(10,"div",3)(11,"div",4)(12,"mat-form-field",5)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",6),t.qZA()(),t.TgZ(17,"div",4)(18,"mat-form-field",5)(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"input",7),t.NdJ("dateChange",function(a){return i.onChangeLeaveDate(a)}),t.qZA(),t._UZ(23,"mat-datepicker-toggle",8)(24,"mat-datepicker",null,9),t.qZA()(),t.TgZ(26,"div",10)(27,"mat-form-field",5)(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",11),t.qZA()(),t.TgZ(32,"div",12)(33,"mat-form-field",5)(34,"mat-label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",13),t.qZA()()(),t.TgZ(38,"div",3)(39,"div",14)(40,"mat-form-field",5)(41,"mat-label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",15),t.qZA()(),t.TgZ(45,"div",14)(46,"mat-form-field",5)(47,"mat-label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._UZ(50,"input",16),t.qZA()()(),t.TgZ(51,"div",17)(52,"p"),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"mat-divider",18),t.TgZ(56,"div",19)(57,"div",20)(58,"mat-form-field",5)(59,"mat-label"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"input",21),t.NdJ("change",function(){return i.calcAdditionTotal()}),t.qZA()()(),t.TgZ(63,"div",20)(64,"mat-form-field",5)(65,"mat-label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"input",22),t.NdJ("change",function(){return i.calcAdditionTotal()}),t.qZA()()(),t.TgZ(69,"div",20)(70,"mat-form-field",5)(71,"mat-label"),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"input",23),t.NdJ("change",function(){return i.calcAdditionTotal()}),t.qZA()()(),t.TgZ(75,"div",20)(76,"mat-form-field",5)(77,"mat-label"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t._UZ(80,"input",24),t.qZA()()()(),t._UZ(81,"div",25),t.TgZ(82,"div",26)(83,"p"),t._uU(84),t.ALo(85,"translate"),t.qZA(),t._UZ(86,"mat-divider",18),t.TgZ(87,"div",19)(88,"div",20)(89,"mat-form-field",5)(90,"mat-label"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t.TgZ(93,"input",27),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(94,"div",20)(95,"mat-form-field",5)(96,"mat-label"),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.TgZ(99,"input",28),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(100,"div",20)(101,"mat-form-field",5)(102,"mat-label"),t._uU(103),t.ALo(104,"translate"),t.qZA(),t.TgZ(105,"input",29),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(106,"div",20)(107,"mat-form-field",5)(108,"mat-label"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"input",30),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(112,"div",20)(113,"mat-form-field",5)(114,"mat-label"),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"input",31),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(118,"div",20)(119,"mat-form-field",5)(120,"mat-label"),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"input",32),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(124,"div",33)(125,"mat-form-field",5)(126,"mat-label"),t._uU(127),t.ALo(128,"translate"),t.qZA(),t._UZ(129,"input",34),t.qZA()()()(),t.TgZ(130,"div",3)(131,"div",35)(132,"mat-form-field",5)(133,"mat-label"),t._uU(134),t.ALo(135,"translate"),t.qZA(),t._UZ(136,"input",36),t.qZA()(),t.TgZ(137,"div",37)(138,"mat-form-field",5)(139,"mat-label"),t._uU(140),t.ALo(141,"translate"),t.qZA(),t._UZ(142,"textarea",38),t.qZA()()(),t.TgZ(143,"div",3),t.YNc(144,Wo,3,5,"button",39),t.qZA()()()()()),2&e){const n=t.MAs(25);t.xp6(5),t.AsE("",t.lcZ(6,27,"HTML.TenantLeave"),": ",i.customerName,""),t.xp6(3),t.Q6J("formGroup",i.leaveData_Form),t.xp6(6),t.hij(" ",t.lcZ(15,29,"HTML.ContractEndDate"),""),t.xp6(6),t.Oqu(t.lcZ(21,31,"HTML.ContractLeaveDate")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(6),t.hij(" ",t.lcZ(30,33,"HTML.ContractValue"),""),t.xp6(6),t.hij(" ",t.lcZ(36,35,"HTML.DaysDiff"),""),t.xp6(7),t.hij(" ",t.lcZ(43,37,"HTML.LastElectricityReading"),""),t.xp6(6),t.hij(" ",t.lcZ(49,39,"HTML.ElectricCounterReading"),""),t.xp6(5),t.Oqu(t.lcZ(54,41,"HTML.Addition")),t.xp6(7),t.Oqu(t.lcZ(61,43,"HTML.AdditionInsuranceValue")),t.xp6(6),t.Oqu(t.lcZ(67,45,"HTML.AdditionCutFromRentValue")),t.xp6(6),t.Oqu(t.lcZ(73,47,"HTML.AdditionOtherValue")),t.xp6(6),t.Oqu(t.lcZ(79,49,"HTML.AdditionTotalValue")),t.xp6(6),t.Oqu(t.lcZ(85,51,"HTML.Deduction")),t.xp6(7),t.Oqu(t.lcZ(92,53,"HTML.DeductionElectricValue")),t.xp6(6),t.Oqu(t.lcZ(98,55,"HTML.DeductionInstallmentValue")),t.xp6(6),t.Oqu(t.lcZ(104,57,"HTML.DeductionDamageValue")),t.xp6(6),t.Oqu(t.lcZ(110,59,"HTML.DeductionMonthlyExpensesValue")),t.xp6(6),t.Oqu(t.lcZ(116,61,"HTML.DeductionCutFromAdditionValue")),t.xp6(6),t.Oqu(t.lcZ(122,63,"HTML.DeductionOtherValue")),t.xp6(6),t.Oqu(t.lcZ(128,65,"HTML.DeductionTotalValue")),t.xp6(7),t.hij(" ",t.lcZ(135,67,"HTML.NetValue"),""),t.xp6(6),t.Oqu(t.lcZ(141,69,"HTML.Notes")),t.xp6(4),t.Q6J("ngIf",i.can("doing_tenantleave"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,C.O5,d.sg,d.u,T.xw,T.Wh,T.yH,w.lW,W.a8,W.dn,W.dk,W.n5,Q.Mq,Q.hl,Q.nW,y.ZT,Z.Nt,v.KE,v.hX,v.R9,X.d,O.X$]});var Nt=b(3172),De=b(100);const gt_TAG_1="01",gt_TAG_2="02",gt_TAG_3="03",gt_TAG_4="04",gt_TAG_5="05";class zt{constructor(e){this.invoiceService=e,this.formData={InvoiceID:1,NameOfSeller:"\u0627\u0644\u0645\u0628\u0631\u0645\u062c \u0627\u0644\u0639\u0631\u0628\u064a",VatRNumber:"3002011109990663",RealTime:Vo(),InvoiceTWVat:"2300.00",VatTotal:"300.00"},this.allOfInvoice=[],this.finalCode=""}ngOnChanges(e){e.formData.currentValue&&(this.formData={InvoiceID:e.formData.currentValue.invid,NameOfSeller:e.formData.currentValue.sellerName,VatRNumber:e.formData.currentValue.vatRegNum,RealTime:e.formData.currentValue.time,InvoiceTWVat:e.formData.currentValue.totalWithVat,VatTotal:e.formData.currentValue.totalVat},this.generateQR(),console.log("-----changes[formData].currentValue.invid:: "+e.formData.currentValue.invid),console.log("----this.finalCode:: "+this.finalCode),this.invoiceService.editInvoice({INVQRString:this.finalCode},e.formData.currentValue.invid).subscribe(n=>{console.log("qrString Saved")},n=>{console.log("Error! qrString not Saved")}))}generateQR(){this.formData&&(function Yo(o,e){if(o.split("").every(i=>i.charCodeAt(0)<128)){let i=o.length.toString(16);i=1===i.length?gt_TAG_1+"0"+i:gt_TAG_1+i,e.push(i),e.push(Nt.lW.from(o,"utf-8").toString("hex"))}else{let i=Nt.lW.from(o,"utf-8"),n=i.length.toString(16);n=1===n.length?gt_TAG_1+"0"+n:gt_TAG_1+n,e.push(n),e.push(i.toString("hex"))}}(this.formData.NameOfSeller,this.allOfInvoice),function Go(o,e){let i=o.length.toString(16);i=1===i.length?gt_TAG_2+"0"+i:gt_TAG_2+i,e.push(i),e.push(Nt.lW.from(o,"utf-8").toString("hex"))}(this.formData.VatRNumber,this.allOfInvoice),function Qo(o,e){let i=o.length.toString(16);i=1===i.length?gt_TAG_3+"0"+i:gt_TAG_3+i,e.push(i),e.push(Nt.lW.from(o,"utf-8").toString("hex"))}(this.formData.RealTime,this.allOfInvoice),function jo(o,e){let i=o.length.toString(16);i=1===i.length?gt_TAG_4+"0"+i:gt_TAG_4+i,e.push(i),e.push(Nt.lW.from(o,"utf-8").toString("hex"))}(this.formData.InvoiceTWVat,this.allOfInvoice),function $o(o,e){let i=o.length.toString(16);i=1===i.length?gt_TAG_5+"0"+i:gt_TAG_5+i,e.push(i),e.push(Nt.lW.from(o,"utf-8").toString("hex"))}(this.formData.VatTotal,this.allOfInvoice),this.finalCode=Nt.lW.from(this.allOfInvoice.join(""),"hex").toString("base64"))}}function Vo(o=new Date){let e=String(o.getFullYear()),i=String(o.getMonth()+1),n=String(o.getDate()),a=String(o.getHours()),l=String(o.getMinutes()),p=String(o.getSeconds());return e.length<4&&(e="20"+e),i.length<2&&(i="0"+i),n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),l.length<2&&(l="0"+l),p.length<2&&(p="0"+p),`${e}-${i}-${n}T${a}:${l}:${p}Z`}function zo(o,e){if(1&o&&(t.TgZ(0,"div")(1,"p",14),t._uU(2,"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u0644\u0633\u0644\u064a"),t.qZA(),t.TgZ(3,"p",15),t._uU(4),t.qZA()()),2&o){const i=t.oxw();t.xp6(4),t.Oqu(i.invoiceNumber)}}function Xo(o,e){if(1&o&&(t.TgZ(0,"td",21),t._UZ(1,"app-qrlevelone",47),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("formData",i.formDataSent)}}function ta(o,e){1&o&&(t.TgZ(0,"div",22)(1,"p",45),t._uU(2,"\u0645\u0644\u0627\u062d\u0638\u0629"),t.qZA(),t.TgZ(3,"p",48),t._uU(4,"\u062a\u0639\u062a\u0628\u0631 \u0647\u0630\u0647 \u0627\u0644\u0648\u0631\u0642\u0629 \u0645\u0637\u0627\u0644\u0628\u0629 \u0648\u0644\u0627 \u064a\u0639\u062a\u0645\u062f \u0628\u0647\u0627 \u0623\u0645\u0627\u0645 \u0627\u0644\u0632\u0643\u0627\u0629 \u0648\u0627\u0644\u062f\u062e\u0644 \u0623\u0648 \u0627\u064a\u0629 \u062c\u0647\u0629 \u062d\u0643\u0648\u0645\u064a\u0629 \u0627\u062e\u0631\u0649 \u0648\u0633\u064a\u062a\u0645 \u0625\u0635\u062f\u0627\u0631 \u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629 \u0628\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0633\u062a\u062d\u0642."),t.qZA(),t.TgZ(5,"p"),t._uU(6," .......... \u0648\u0644\u0643\u0645 \u062c\u0632\u064a \u0627\u0644\u0634\u0643\u0631 .........."),t.qZA()())}zt.\u0275fac=function(e){return new(e||zt)(t.Y36(we.q))},zt.\u0275cmp=t.Xpm({type:zt,selectors:[["app-qrlevelone"]],inputs:{formData:"formData"},features:[t.TTD],decls:1,vars:5,consts:[[3,"qrdata","width","errorCorrectionLevel","allowEmptyString"]],template:function(e,i){1&e&&t._UZ(0,"qrcode",0),2&e&&t.Q6J("qrdata",i.finalCode)("width",256)("errorCorrectionLevel","M")("width",130)("allowEmptyString",!0)},dependencies:[De.V]});class Xt{constructor(e,i,n,a,l,p){this.transferService=e,this.appSettings=i,this.datePipe=n,this.http=a,this._sanitizer=l,this.settingService=p,this.getBase64StringFromDataURL=f=>f.replace("data:","").replace(/^.+,/,""),this.settings=this.appSettings.settings}ngOnInit(){this.transferService.getMessage.subscribe(l=>{this.invoiceID=l.invId,this.ownerid=l.ownerID,this.tenantid=l.tenantID,this.ownerTaxNumber=l.ownerTaxNumber,this.ownerName=l.ownerName,this.ownerCommRegister=l.ownerCommRegister,this.ownerAddress=l.ownerAddress,this.ownerBankName=l.ownerBankName,this.ownerBankAccountNumber=l.ownerBankAccountNumber,this.accountOwnerName=l.accountOwnerName,this.tenantAddress=l.tenantAddress,this.tenantName=l.tenantName,this.tenantTaxNumber=l.tenantTaxNumber,this.tenantCommRegister=l.tenantCommRegister,this.invoiceValue=l.invoiceValue,this.invoiceNumber=l.invoiceNumber,this.intervalStartDate=l.intervalStartDate,this.intervalEndDate=l.intervalEndDate,this.ownerLogo=l.ownerLogo,this.ownerLogoBase64=l.ownerLogoBase64,this.CusEInvType=l.customer_EInvoiceType,this.invType=l.invType,this.invDate=l.invDate,this.invDateString=l.invDateString,this.invFromDate=l.invFrom,this.invToDate=l.invTo,console.log("-*-*-*this.invType:: "+this.invType+"*-*-*-"),console.log("-*-*-*this.invoiceValue:: "+this.invoiceValue+"*-*-*-"),"S"==this.invType?"B"==this.CusEInvType?this.invTypeText="\u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629":"P"==this.CusEInvType&&(this.invTypeText="\u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629 \u0645\u0628\u0633\u0637\u0629"):"R"==this.invType&&(this.invTypeText="\u0645\u0637\u0627\u0644\u0628\u0640\u0629 \u0645\u0627\u0644\u064a\u0640\u0629")}),this.invoiceValue=parseFloat(this.invoiceValue).toFixed(2),this.taxValue=(.15*this.invoiceValue).toFixed(2),this.netValue=(1.15*this.invoiceValue).toFixed(2);var e=(new Date).setSeconds(0,0),i=new Date(e).toISOString(),n=new Date(this.invDate).setSeconds(0,0),a=new Date(n).toISOString();console.log("---dt:: "+i),console.log("---this.invDate:: "+this.invDate),console.log("---efgh:: "+a),this.curDateTime=i,this.curDate=new Date(this.invDate),this.curDate=this.datePipe.transform(this.curDate,"yyyy-MM-dd"),this.formDataSent={invid:this.invoiceID,sellerName:this.ownerName,vatRegNum:this.ownerTaxNumber,time:this.invDateString,totalWithVat:parseFloat(this.netValue).toFixed(2),totalVat:parseFloat(this.taxValue).toFixed(2)}}sanitize(e){return this._sanitizer.bypassSecurityTrustUrl(e)}testPDF(){}downloadPDF(){var e=document.getElementById("contentToConvert");Fe()(e,{scale:2}).then(i=>{var l=208*i.height/i.width;const f=i.toDataURL("image/jpeg",.5),A=this.getBase64StringFromDataURL(f);let S=new Ne.kH("p","mm","a4");S.addImage(A,"PNG",0,0,208,l),S.save(this.curDateTime.toString()+".pdf")})}printinv(){let e,i;e=document.getElementById("contentToConvert").innerHTML,i=window.open("","_blank","top=0,left=0,height=100%,width=auto"),i.document.open(),i.document.write(`\n      <html>\n        <head>\n          <title>Print tab</title>\n          <style>          \n          // -----------------------------------------------------------------------\n          \n          *,\n          ::before,\n          ::after {\n            box-sizing: border-box;\n            /* 1 */\n            border-width: 0;\n            /* 2 */\n            border-style: solid;\n            /* 2 */\n            border-color: #e5e7eb;\n            /* 2 */\n          }\n          \n          ::before,\n          ::after {\n            --tw-content: '';\n          }\n          \n          html {\n            line-height: 1.5;\n            /* 1 */\n            -webkit-text-size-adjust: 100%;\n            /* 2 */\n            -moz-tab-size: 4;\n            /* 3 */\n            tab-size: 4;\n            /* 3 */\n            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n            /* 4 */\n            font-feature-settings: normal;\n            /* 5 */\n            font-variation-settings: normal;\n            /* 6 */\n          }\n          \n          body {\n            margin: 0;\n            /* 1 */\n            line-height: inherit;\n            /* 2 */\n          }\n          \n          /*\n          1. Add the correct height in Firefox.\n          2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n          3. Ensure horizontal rules are visible by default.\n          */\n          \n          hr {\n            height: 0;\n            /* 1 */\n            color: inherit;\n            /* 2 */\n            border-top-width: 1px;\n            /* 3 */\n          }\n          \n          /*\n          Add the correct text decoration in Chrome, Edge, and Safari.\n          */\n          \n          abbr:where([title]) {\n            -webkit-text-decoration: underline dotted;\n                    text-decoration: underline dotted;\n          }\n          \n          /*\n          Remove the default font size and weight for headings.\n          */\n          \n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6 {\n            font-size: inherit;\n            font-weight: inherit;\n          }\n          \n          /*\n          Reset links to optimize for opt-in styling instead of opt-out.\n          */\n          \n          a {\n            color: inherit;\n            text-decoration: inherit;\n          }\n          \n          /*\n          Add the correct font weight in Edge and Safari.\n          */\n          \n          b,\n          strong {\n            font-weight: bolder;\n          }\n          \n          code,\n          kbd,\n          samp,\n          pre {\n            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n            /* 1 */\n            font-size: 1em;\n            /* 2 */\n          }\n          \n          /*\n          Add the correct font size in all browsers.\n          */\n          \n          small {\n            font-size: 80%;\n          }\n          \n          sub,\n          sup {\n            font-size: 75%;\n            line-height: 0;\n            position: relative;\n            vertical-align: baseline;\n          }\n          \n          sub {\n            bottom: -0.25em;\n          }\n          \n          sup {\n            top: -0.5em;\n          }\n          \n          /*\n          1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n          2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n          3. Remove gaps between table borders by default.\n          */\n          \n          table {\n            text-indent: 0;\n            /* 1 */\n            border-color: inherit;\n            /* 2 */\n            border-collapse: collapse;\n            /* 3 */\n          }\n          \n          /*\n          1. Change the font styles in all browsers.\n          2. Remove the margin in Firefox and Safari.\n          3. Remove default padding in all browsers.\n          */\n          \n          button,\n          input,\n          optgroup,\n          select,\n          textarea {\n            font-family: inherit;\n            /* 1 */\n            font-feature-settings: inherit;\n            /* 1 */\n            font-variation-settings: inherit;\n            /* 1 */\n            font-size: 100%;\n            /* 1 */\n            font-weight: inherit;\n            /* 1 */\n            line-height: inherit;\n            /* 1 */\n            color: inherit;\n            /* 1 */\n            margin: 0;\n            /* 2 */\n            padding: 0;\n            /* 3 */\n          }\n          \n          /*\n          Remove the inheritance of text transform in Edge and Firefox.\n          */\n          \n          button,\n          select {\n            text-transform: none;\n          }\n          \n          /*\n          1. Correct the inability to style clickable types in iOS and Safari.\n          2. Remove default button styles.\n          */\n          \n          button,\n          [type='button'],\n          [type='reset'],\n          [type='submit'] {\n            -webkit-appearance: button;\n            /* 1 */\n            background-color: transparent;\n            /* 2 */\n            background-image: none;\n            /* 2 */\n          }\n          \n          /*\n          Use the modern Firefox focus style for all focusable elements.\n          */\n          \n          :-moz-focusring {\n            outline: auto;\n          }\n          \n          :-moz-ui-invalid {\n            box-shadow: none;\n          }\n          \n          /*\n          Add the correct vertical alignment in Chrome and Firefox.\n          */\n          \n          progress {\n            vertical-align: baseline;\n          }\n          \n          /*\n          Correct the cursor style of increment and decrement buttons in Safari.\n          */\n          \n          ::-webkit-inner-spin-button,\n          ::-webkit-outer-spin-button {\n            height: auto;\n          }\n          \n          /*\n          1. Correct the odd appearance in Chrome and Safari.\n          2. Correct the outline style in Safari.\n          */\n          \n          [type='search'] {\n            -webkit-appearance: textfield;\n            /* 1 */\n            outline-offset: -2px;\n            /* 2 */\n          }\n          \n          /*\n          Remove the inner padding in Chrome and Safari on macOS.\n          */\n          \n          ::-webkit-search-decoration {\n            -webkit-appearance: none;\n          }\n          \n          ::-webkit-file-upload-button {\n            -webkit-appearance: button;\n            /* 1 */\n            font: inherit;\n            /* 2 */\n          }\n          \n          /*\n          Add the correct display in Chrome and Safari.\n          */\n          \n          summary {\n            display: list-item;\n          }\n          \n          /*\n          Removes the default spacing and border for appropriate elements.\n          */\n          \n          blockquote,\n          dl,\n          dd,\n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6,\n          hr,\n          figure,\n          p,\n          pre {\n            margin: 0;\n          }\n          \n          fieldset {\n            margin: 0;\n            padding: 0;\n          }\n          \n          legend {\n            padding: 0;\n          }\n          \n          ol,\n          ul,\n          menu {\n            list-style: none;\n            margin: 0;\n            padding: 0;\n          }\n          \n          /*\n          Reset default styling for dialogs.\n          */\n          \n          dialog {\n            padding: 0;\n          }\n          \n          /*\n          Prevent resizing textareas horizontally by default.\n          */\n          \n          textarea {\n            resize: vertical;\n          }\n          \n          /*\n          1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n          2. Set the default placeholder color to the user's configured gray 400 color.\n          */\n          \n          input::placeholder,\n          textarea::placeholder {\n            opacity: 1;\n            /* 1 */\n            color: #9ca3af;\n            /* 2 */\n          }\n          \n          /*\n          Set the default cursor for buttons.\n          */\n          \n          button,\n          [role="button"] {\n            cursor: pointer;\n          }\n          \n          /*\n          Make sure disabled buttons don't get the pointer cursor.\n          */\n          \n          :disabled {\n            cursor: default;\n          }\n          \n          img,\n          svg,\n          video,\n          canvas,\n          audio,\n          iframe,\n          embed,\n          object {\n            display: block;\n            /* 1 */\n            vertical-align: middle;\n            /* 2 */\n          }\n          \n          /*\n          Constrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n          */\n          \n          img,\n          video {\n            max-width: 100%;\n            height: auto;\n          }\n          \n          /* Make elements with the HTML hidden attribute stay hidden by default */\n          \n          [hidden] {\n            display: none;\n          }\n          \n          *, ::before, ::after{\n            --tw-border-spacing-x: 0;\n            --tw-border-spacing-y: 0;\n            --tw-translate-x: 0;\n            --tw-translate-y: 0;\n            --tw-rotate: 0;\n            --tw-skew-x: 0;\n            --tw-skew-y: 0;\n            --tw-scale-x: 1;\n            --tw-scale-y: 1;\n            --tw-pan-x:  ;\n            --tw-pan-y:  ;\n            --tw-pinch-zoom:  ;\n            --tw-scroll-snap-strictness: proximity;\n            --tw-gradient-from-position:  ;\n            --tw-gradient-via-position:  ;\n            --tw-gradient-to-position:  ;\n            --tw-ordinal:  ;\n            --tw-slashed-zero:  ;\n            --tw-numeric-figure:  ;\n            --tw-numeric-spacing:  ;\n            --tw-numeric-fraction:  ;\n            --tw-ring-inset:  ;\n            --tw-ring-offset-width: 0px;\n            --tw-ring-offset-color: #fff;\n            --tw-ring-color: rgb(59 130 246 / 0.5);\n            --tw-ring-offset-shadow: 0 0 #0000;\n            --tw-ring-shadow: 0 0 #0000;\n            --tw-shadow: 0 0 #0000;\n            --tw-shadow-colored: 0 0 #0000;\n            --tw-blur:  ;\n            --tw-brightness:  ;\n            --tw-contrast:  ;\n            --tw-grayscale:  ;\n            --tw-hue-rotate:  ;\n            --tw-invert:  ;\n            --tw-saturate:  ;\n            --tw-sepia:  ;\n            --tw-drop-shadow:  ;\n            --tw-backdrop-blur:  ;\n            --tw-backdrop-brightness:  ;\n            --tw-backdrop-contrast:  ;\n            --tw-backdrop-grayscale:  ;\n            --tw-backdrop-hue-rotate:  ;\n            --tw-backdrop-invert:  ;\n            --tw-backdrop-opacity:  ;\n            --tw-backdrop-saturate:  ;\n            --tw-backdrop-sepia:  ;\n          }\n          \n          ::backdrop{\n            --tw-border-spacing-x: 0;\n            --tw-border-spacing-y: 0;\n            --tw-translate-x: 0;\n            --tw-translate-y: 0;\n            --tw-rotate: 0;\n            --tw-skew-x: 0;\n            --tw-skew-y: 0;\n            --tw-scale-x: 1;\n            --tw-scale-y: 1;\n            --tw-pan-x:  ;\n            --tw-pan-y:  ;\n            --tw-pinch-zoom:  ;\n            --tw-scroll-snap-strictness: proximity;\n            --tw-gradient-from-position:  ;\n            --tw-gradient-via-position:  ;\n            --tw-gradient-to-position:  ;\n            --tw-ordinal:  ;\n            --tw-slashed-zero:  ;\n            --tw-numeric-figure:  ;\n            --tw-numeric-spacing:  ;\n            --tw-numeric-fraction:  ;\n            --tw-ring-inset:  ;\n            --tw-ring-offset-width: 0px;\n            --tw-ring-offset-color: #fff;\n            --tw-ring-color: rgb(59 130 246 / 0.5);\n            --tw-ring-offset-shadow: 0 0 #0000;\n            --tw-ring-shadow: 0 0 #0000;\n            --tw-shadow: 0 0 #0000;\n            --tw-shadow-colored: 0 0 #0000;\n            --tw-blur:  ;\n            --tw-brightness:  ;\n            --tw-contrast:  ;\n            --tw-grayscale:  ;\n            --tw-hue-rotate:  ;\n            --tw-invert:  ;\n            --tw-saturate:  ;\n            --tw-sepia:  ;\n            --tw-drop-shadow:  ;\n            --tw-backdrop-blur:  ;\n            --tw-backdrop-brightness:  ;\n            --tw-backdrop-contrast:  ;\n            --tw-backdrop-grayscale:  ;\n            --tw-backdrop-hue-rotate:  ;\n            --tw-backdrop-invert:  ;\n            --tw-backdrop-opacity:  ;\n            --tw-backdrop-saturate:  ;\n            --tw-backdrop-sepia:  ;\n          }\n          \n          .fixed{\n            position: fixed;\n          }\n          \n          .bottom-0{\n            bottom: 0px;\n          }\n          \n          .left-0{\n            left: 0px;\n          }\n          \n          .table{\n            display: table;\n          }\n          \n          .h-12{\n            height: 3rem;\n          }\n          \n          .w-1/2{\n            width: 50%;\n          }\n          \n          .w-full{\n            width: 100%;\n          }\n          \n          .border-collapse{\n            border-collapse: collapse;\n          }\n          \n          .border-spacing-0{\n            --tw-border-spacing-x: 0px;\n            --tw-border-spacing-y: 0px;\n            border-spacing: var(--tw-border-spacing-x) var(--tw-border-spacing-y);\n          }\n          \n          .whitespace-nowrap{\n            white-space: nowrap;\n          }\n          \n          .border-b{\n            border-bottom-width: 1px;\n          }\n          \n          .border-b-2{\n            border-bottom-width: 2px;\n          }\n          \n          .border-r{\n            border-right-width: 1px;\n          }\n          \n          .border-main{\n            border-color: #5c6ac4;\n          }\n          \n          .bg-main{\n            background-color: #5c6ac4;\n          }\n          \n          .bg-slate-100{\n            background-color: #f1f5f9;\n          }\n          \n          .p-3{\n            padding: 0.75rem;\n          }\n          \n          .p-4{\n              padding: 1.25rem;\n            }\n          \n          .px-14{\n            padding-left: 3.5rem;\n            padding-right: 3.5rem;\n          }\n          \n          .px-2{\n            padding-left: 0.5rem;\n            padding-right: 0.5rem;\n          }\n          \n          .py-10{\n            padding-top: 2.5rem;\n            padding-bottom: 2.5rem;\n          }\n          \n          .py-3{\n            padding-top: 0.75rem;\n            padding-bottom: 0.75rem;\n          }\n          \n          .py-4{\n            padding-top: 1rem;\n            padding-bottom: 1rem;\n          }\n          \n          .py-6{\n            padding-top: 1.5rem;\n            padding-bottom: 1.5rem;\n          }\n          \n          .pb-3{\n            padding-bottom: 0.75rem;\n          }\n          \n          .pl-2{\n            padding-left: 0.5rem;\n          }\n          \n          .pl-3{\n            padding-left: 0.75rem;\n          }\n          \n          .pl-4{\n            padding-left: 1rem;\n          }\n          \n          .pr-3{\n            padding-right: 0.75rem;\n          }\n          \n          .pr-4{\n            padding-right: 1rem;\n          }\n          \n          .pr-6{\n              padding-right: 6rem;\n            }\n          \n          .text-center{\n            text-align: center;\n          }\n          \n          .text-right{\n            text-align: right;\n          }\n          \n          .align-top{\n            vertical-align: top;\n          }\n          \n          .text-sm{\n            font-size: 0.875rem;\n            line-height: 1.25rem;\n          }\n          \n          .text-xs{\n            font-size: 0.75rem;\n            line-height: 1rem;\n          }\n          \n          .font-bold{\n            font-weight: 700;\n          }\n          .font-bold40{\n              font-weight: 700;\n              font-size: 40px;\n            }\n          .font-bold30{\n              font-weight: 700;\n              font-size: 30px;\n          }\n          \n          \n          .italic{\n            font-style: italic;\n          }\n          \n          .text-main{\n            color: #5c6ac4;\n          }\n          \n          .text-neutral-600{\n            color: #525252;\n          }\n          \n          .text-neutral-700{\n            color: #404040;\n          }\n          \n          .text-slate-300{\n            color: #cbd5e1;\n          }\n          \n          .text-slate-400{\n            color: #94a3b8;\n          }\n          \n          .text-white{\n            color: #fff;\n          }\n          \n          @page {\n            margin: 0;\n          }\n          \n          @media print {\n            body {\n              -webkit-print-color-adjust: exact;\n            }\n          }  \n          \n          // -----------------------------------------------------------------------\n.text-head{\n  font-size: 24px;\n  font-weight: bold;\n  color: #111;\n  text-align: center;\n  }\n.text-headdate{\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n  }\n.net{\n  font-size: 14px;\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n  }\n.text-rtl{\n  text-align: right;\n  }\n.msg {\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\n  font-size: 14px;\n  width: 100%;\n  text-align: right;\n}\n.bankdata {\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\n  font-size: 12px;\n  width: 100%;\n  text-align: right;\n}\n.footermsg {\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\n  font-size: 10px;\n  width: 100%;\n  text-align: right;\n}\n.text-headcustomer{\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n  }\n.invoice-box {\n  max-width: 800px;\n  margin: auto;\n  padding: 30px;\n  border: 1px solid #eee;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\n  font-size: 14px;\n  line-height: 24px;\n  font-family: 'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.invoice-box table {\n  width: 100%;\n  line-height: inherit;\n  text-align: left;\n}\n\n.invoice-box table td {\n  padding: 5px;\n  vertical-align: top;\n}\n\n.invoice-box table tr td:nth-child(2) {\n  text-align: right;\n}\n\n.invoice-box table tr.top table td {\n  padding-bottom: 20px;\n}\n\n.invoice-box table tr.top table td.title {\n  font-size: 45px;\n  line-height: 45px;\n  color: #333;\n}\n\n.invoice-box table tr.information table td {\n  padding-bottom: 40px;\n}\n\n.invoice-box table tr.heading td {\n  background: #eee;\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\t\n  text-align: right;\t\t\t\n}\n\n.invoice-box table tr.details td {\n  padding-bottom: 20px;\n  border-bottom: 1px solid #eee;\n}\n\n.invoice-box table tr.item td {\n  border-bottom: 1px solid #eee;\n}\n\n.invoice-box table tr.item.last td {\n  border-bottom: none;\n}\n\n.invoice-box table tr.total td:nth-child(2) {\n  border-top: 2px solid #111;\n  font-weight: bold;\n  font-size: 20px;\n}\n\n@media only screen and (max-width: 600px) {\n  .invoice-box table tr.top table td {\n      width: 100%;\n      display: block;\n      text-align: center;\n  }\n\n  .invoice-box table tr.information table td {\n      width: 100%;\n      display: block;\n      text-align: center;\n  }\n}\n\n/** RTL **/\n.invoice-box.rtl {\n  direction: rtl;\n  font-family: Tahoma, 'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;\n}\n\n.invoice-box.rtl table {\n  text-align: right;\n}\n\n.invoice-box.rtl table tr td:nth-child(2) {\n  text-align: left;\n}\n  \n          </style>\n          <script>\n            var global = global || window;\n          <\/script>\n\n        </head>\n    <body onload="window.print();window.close()">${e}</body>\n      </html>`),i.document.close()}}function ea(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-button-toggle",22),t.NdJ("click",function(){t.CHM(i);const a=t.oxw(2);return t.KtG(a.gotoNewTenantFullData())}),t.TgZ(1,"mat-icon"),t._uU(2,"person_add"),t.qZA()()}}function ia(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"mat-button-toggle-group",10,11),t.YNc(5,ea,3,0,"mat-button-toggle",12),t.TgZ(6,"mat-button-toggle",13)(7,"mat-icon"),t._uU(8,"search"),t.qZA()()()(),t.TgZ(9,"form",14)(10,"mat-form-field",15)(11,"input",16),t.NdJ("ngModelChange",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.searchText=a)}),t.ALo(12,"translate"),t.qZA()()(),t.TgZ(13,"div",17)(14,"mat-button-toggle-group",18,19)(16,"mat-button-toggle",20)(17,"mat-icon"),t._uU(18,"view_list"),t.qZA()(),t.TgZ(19,"mat-button-toggle",21)(20,"mat-icon"),t._uU(21,"view_module"),t.qZA()()()()()()}if(2&o){const i=t.MAs(4),n=t.oxw();t.xp6(5),t.Q6J("ngIf",n.can("add_tenant")),t.xp6(4),t.ekj("show","search"==i.value),t.xp6(2),t.s9C("placeholder",t.lcZ(12,5,"HTML.SEARCH_TENANT_AnyValue")),t.Q6J("ngModel",n.searchText)}}Xt.\u0275fac=function(e){return new(e||Xt)(t.Y36(mt.y),t.Y36(it.d),t.Y36(C.uU),t.Y36(Oe.eN),t.Y36(Wt.H7),t.Y36(pt.g))},Xt.\u0275cmp=t.Xpm({type:Xt,selectors:[["app-print-einvoice"]],features:[t._Bn([C.uU])],decls:151,vars:27,consts:[["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click"],["id","contentToConvert",1,"py-4"],[1,"px-14","py-6"],[1,"w-full","border-collapse","border-spacing-0"],[1,"w-full","align-top"],["width","150","height","150",3,"src"],[1,"align-top"],[1,"text-sm"],[1,"border-collapse","border-spacing-0"],[1,"pl-4"],[1,"whitespace-nowrap","font-bold30","text-main","text-right"],[1,"border-r","pr-4"],[4,"ngIf"],[1,"whitespace-nowrap","text-slate-400","text-right"],[1,"whitespace-nowrap","font-bold","text-main","text-right"],["class","border-r pr-6",4,"ngIf"],[1,"bg-slate-100","px-14","py-6","text-sm"],[1,"w-1/2","align-top"],[1,"text-sm","text-neutral-600"],[1,"font-bold"],[1,"border-r","pr-6"],[1,"px-14","py-10","text-sm","text-neutral-700"],[1,"border-b-2","border-main","pb-3","pl-3","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","text-right","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","text-center","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","pr-3","text-right","font-bold","text-main"],[1,"border-b","py-3","pl-3"],[1,"border-b","py-3","pl-2"],[1,"border-b","py-3","pl-2","text-right"],[1,"border-b","py-3","pl-2","text-center"],[1,"border-b","py-3","pl-2","pr-3","text-right"],["colspan","7"],[1,"w-full"],[1,"border-b","p-3"],[1,"whitespace-nowrap","text-slate-400"],[1,"border-b","p-3","text-right"],[1,"whitespace-nowrap","font-bold","text-main"],[1,"p-3"],[1,"p-3","text-right"],[1,"bg-main","p-3"],[1,"whitespace-nowrap","font-bold","text-white"],[1,"bg-main","p-3","text-right"],[1,"px-14","text-sm","text-neutral-700"],[1,"text-main","font-bold"],["class","px-14 py-10 text-sm text-neutral-700",4,"ngIf"],[3,"formData"],[1,"italic"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"button",1),t.NdJ("click",function(){return i.downloadPDF()}),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t._UZ(5,"mat-divider"),t.TgZ(6,"div")(7,"div",2)(8,"div",3)(9,"table",4)(10,"tbody")(11,"tr")(12,"td",5)(13,"div"),t._UZ(14,"img",6),t.qZA()()(),t.TgZ(15,"tr")(16,"td",7)(17,"div",8)(18,"table",9)(19,"tbody")(20,"tr")(21,"td",10),t._UZ(22,"div"),t.qZA(),t.TgZ(23,"td",10),t._UZ(24,"div"),t.qZA(),t.TgZ(25,"td",10)(26,"div")(27,"p",11),t._uU(28),t.qZA()()(),t.TgZ(29,"td",12),t.YNc(30,zo,5,1,"div",13),t.TgZ(31,"div")(32,"p",14),t._uU(33,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"),t.qZA(),t.TgZ(34,"p",15),t._uU(35),t.qZA()()(),t.YNc(36,Xo,2,1,"td",16),t.qZA()()()()()()()()(),t.TgZ(37,"div",17)(38,"table",4)(39,"tbody")(40,"tr")(41,"td",10),t._UZ(42,"div"),t.qZA(),t.TgZ(43,"td",18)(44,"div",19)(45,"p",20),t._uU(46,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u0643"),t.qZA(),t.TgZ(47,"p",20),t._uU(48),t.qZA(),t.TgZ(49,"p"),t._uU(50),t.qZA(),t.TgZ(51,"p"),t._uU(52),t.qZA(),t.TgZ(53,"p"),t._uU(54),t.qZA()()(),t.TgZ(55,"td",21)(56,"div",19)(57,"p",20),t._uU(58,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644"),t.qZA(),t.TgZ(59,"p",20),t._uU(60),t.qZA(),t.TgZ(61,"p"),t._uU(62),t.qZA(),t.TgZ(63,"p"),t._uU(64),t.qZA(),t.TgZ(65,"p"),t._uU(66),t.qZA()()()()()()(),t.TgZ(67,"div",22)(68,"table",4)(69,"thead")(70,"tr")(71,"td",23),t._uU(72,"#"),t.qZA(),t.TgZ(73,"td",24),t._uU(74,"\u0627\u0644\u0635\u0646\u0641"),t.qZA(),t.TgZ(75,"td",25),t._uU(76,"\u0627\u0644\u0642\u064a\u0645\u0629"),t.qZA(),t.TgZ(77,"td",26),t._uU(78,"\u0627\u0644\u0643\u0645\u064a\u0629."),t.qZA(),t.TgZ(79,"td",25),t._uU(80,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(81,"td",26),t._uU(82,"\u0646\u0633\u0628\u0629 \u0627\u0644\u0636\u0631\u064a\u0628\u0629"),t.qZA(),t.TgZ(83,"td",26),t._uU(84,"\u0627\u0644\u0636\u0631\u064a\u0628\u0629"),t.qZA(),t.TgZ(85,"td",27),t._uU(86,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a \u0645\u0639 \u0627\u0644\u0636\u0631\u064a\u0628\u0629"),t.qZA()()(),t.TgZ(87,"tbody")(88,"tr")(89,"td",28),t._uU(90,"1."),t.qZA(),t.TgZ(91,"td",29),t._uU(92,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0625\u064a\u062c\u0627\u0631"),t.qZA(),t.TgZ(93,"td",30),t._uU(94),t.qZA(),t.TgZ(95,"td",31),t._uU(96,"1"),t.qZA(),t.TgZ(97,"td",31),t._uU(98),t.qZA(),t.TgZ(99,"td",31),t._uU(100,"%15"),t.qZA(),t.TgZ(101,"td",30),t._uU(102),t.qZA(),t.TgZ(103,"td",32),t._uU(104),t.qZA()(),t.TgZ(105,"tr")(106,"td",33)(107,"table",4)(108,"tbody")(109,"tr"),t._UZ(110,"td",34),t.TgZ(111,"td")(112,"table",4)(113,"tbody")(114,"tr")(115,"td",35)(116,"div",36),t._uU(117,"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0628\u062f\u0648\u0646 \u0636\u0631\u064a\u0628\u0629:"),t.qZA()(),t.TgZ(118,"td",37)(119,"div",38),t._uU(120),t.qZA()()(),t.TgZ(121,"tr")(122,"td",39)(123,"div",36),t._uU(124,"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0636\u0631\u064a\u0628\u0629:"),t.qZA()(),t.TgZ(125,"td",40)(126,"div",38),t._uU(127),t.qZA()()(),t.TgZ(128,"tr")(129,"td",41)(130,"div",42),t._uU(131,"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0645\u0639 \u0627\u0644\u0636\u0631\u064a\u0628\u0629:"),t.qZA()(),t.TgZ(132,"td",43)(133,"div",42),t._uU(134),t.qZA()()()()()()()()()()()()()(),t.TgZ(135,"div",44)(136,"p",45),t._uU(137,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062a\u062d\u0648\u064a\u0644"),t.qZA(),t.TgZ(138,"p"),t._uU(139," \u0627\u0633\u0645 \u0627\u0644\u0628\u0646\u0643 : "),t.TgZ(140,"b"),t._uU(141),t.qZA()(),t.TgZ(142,"p"),t._uU(143," \u0631\u0642\u0645 \u0627\u0644\u062d\u0633\u0627\u0628: "),t.TgZ(144,"b"),t._uU(145),t.qZA()(),t.TgZ(146,"p"),t._uU(147," \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f : "),t.TgZ(148,"b"),t._uU(149),t.qZA()()(),t.YNc(150,ta,7,0,"div",46),t.qZA()()()),2&e){let n,a;t.xp6(3),t.Oqu(t.lcZ(4,25,"BTN.DownloadPDF")),t.xp6(11),t.Q6J("src",i.sanitize(i.ownerLogoBase64),t.LSH),t.xp6(14),t.hij("",i.invTypeText," "),t.xp6(2),t.Q6J("ngIf","S"==i.invType),t.xp6(5),t.Oqu(i.curDate),t.xp6(1),t.Q6J("ngIf","S"==i.invType),t.xp6(12),t.Oqu(null!==(n=i.ownerName)&&void 0!==n?n:"Supplier Company INC"),t.xp6(2),t.hij("\u0627\u0644\u0639\u0646\u0648\u0627\u0646: ",i.ownerAddress,""),t.xp6(2),t.hij("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a: ",i.ownerTaxNumber,""),t.xp6(2),t.hij(":\u0631\u0642\u0645 \u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a ",i.ownerCommRegister,""),t.xp6(6),t.Oqu(null!==(a=i.tenantName)&&void 0!==a?a:"Customer Company"),t.xp6(2),t.hij("\u0627\u0644\u0639\u0646\u0648\u0627\u0646: ",i.tenantAddress,""),t.xp6(2),t.hij("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a: ",i.tenantTaxNumber,""),t.xp6(2),t.hij(":\u0631\u0642\u0645 \u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a ",i.tenantCommRegister,""),t.xp6(28),t.hij("",i.invoiceValue," \u0631\u0633"),t.xp6(4),t.hij("",i.invoiceValue," \u0631\u0633"),t.xp6(4),t.hij("",i.taxValue," \u0631\u0633"),t.xp6(2),t.hij("",i.netValue," \u0631\u0633"),t.xp6(16),t.hij("",i.invoiceValue," \u0631\u0633"),t.xp6(7),t.hij("",i.taxValue," \u0631\u0633"),t.xp6(7),t.hij("",i.netValue," \u0631\u0633"),t.xp6(7),t.Oqu(i.ownerBankName),t.xp6(4),t.Oqu(i.ownerBankAccountNumber),t.xp6(4),t.Oqu(i.accountOwnerName),t.xp6(1),t.Q6J("ngIf","REQUEST"==i.invType)}},dependencies:[C.O5,T.xw,T.Wh,w.lW,W.a8,X.d,zt,O.X$],styles:['.text-head[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#111;text-align:center}.text-headdate[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;text-align:right}.net[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333;text-align:right}.text-rtl[_ngcontent-%COMP%]{text-align:right}.msg[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-weight:700;font-size:22px;width:100%;text-align:right}.bankdata[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-weight:700;font-size:18px;width:100%;text-align:right}.footermsg[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-weight:700;font-size:16px;width:100%;text-align:right}.text-headcustomer[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#111;text-align:right}.invoice-box[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:30px;border:1px solid #eee;box-shadow:0 0 10px #00000026;font-size:16px;line-height:24px;font-family:Helvetica Neue,Helvetica,Helvetica,Arial,sans-serif;color:#555}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;line-height:inherit;text-align:left}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px;vertical-align:top}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:right}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.top[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:20px}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.top[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.title[_ngcontent-%COMP%]{font-size:45px;line-height:45px;color:#333}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.information[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:40px}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.heading[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#eee;border-bottom:1px solid #ddd;font-weight:700;text-align:right}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:20px;border-bottom:1px solid #eee}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #eee}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.item.last[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:none}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){border-top:2px solid #111;font-weight:700;font-size:20px}@media only screen and (max-width: 600px){.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.top[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.information[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:100%;display:block;text-align:center}}.invoice-box.rtl[_ngcontent-%COMP%]{direction:rtl;font-family:Tahoma,Helvetica Neue,Helvetica,Helvetica,Arial,sans-serif}.invoice-box.rtl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{text-align:right}.invoice-box.rtl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:left}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}[_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{--tw-content: ""}html[_ngcontent-%COMP%]{line-height:1.5;-webkit-text-size-adjust:100%;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal}body[_ngcontent-%COMP%]{margin:0;line-height:inherit}hr[_ngcontent-%COMP%]{height:0;color:inherit;border-top-width:1px}abbr[_ngcontent-%COMP%]:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-size:inherit;font-weight:inherit}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}b[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{font-weight:bolder}code[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], samp[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small[_ngcontent-%COMP%]{font-size:80%}sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%]{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub[_ngcontent-%COMP%]{bottom:-.25em}sup[_ngcontent-%COMP%]{top:-.5em}table[_ngcontent-%COMP%]{text-indent:0;border-color:inherit;border-collapse:collapse}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{text-transform:none}button[_ngcontent-%COMP%], [type=button][_ngcontent-%COMP%], [type=reset][_ngcontent-%COMP%], [type=submit][_ngcontent-%COMP%]{-webkit-appearance:button;background-color:transparent;background-image:none}[_ngcontent-%COMP%]:-moz-focusring{outline:auto}[_ngcontent-%COMP%]:-moz-ui-invalid{box-shadow:none}progress[_ngcontent-%COMP%]{vertical-align:baseline}[_ngcontent-%COMP%]::-webkit-inner-spin-button, [_ngcontent-%COMP%]::-webkit-outer-spin-button{height:auto}[type=search][_ngcontent-%COMP%]{-webkit-appearance:textfield;outline-offset:-2px}[_ngcontent-%COMP%]::-webkit-search-decoration{-webkit-appearance:none}[_ngcontent-%COMP%]::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary[_ngcontent-%COMP%]{display:list-item}blockquote[_ngcontent-%COMP%], dl[_ngcontent-%COMP%], dd[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], hr[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], p[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{margin:0}fieldset[_ngcontent-%COMP%]{margin:0;padding:0}legend[_ngcontent-%COMP%]{padding:0}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%], menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}dialog[_ngcontent-%COMP%]{padding:0}textarea[_ngcontent-%COMP%]{resize:vertical}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{opacity:1;color:#9ca3af}button[_ngcontent-%COMP%], [role=button][_ngcontent-%COMP%]{cursor:pointer}[_ngcontent-%COMP%]:disabled{cursor:default}img[_ngcontent-%COMP%], svg[_ngcontent-%COMP%], video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], audio[_ngcontent-%COMP%], iframe[_ngcontent-%COMP%], embed[_ngcontent-%COMP%], object[_ngcontent-%COMP%]{display:block;vertical-align:middle}img[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{max-width:100%;height:auto}[hidden][_ngcontent-%COMP%]{display:none}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }[_ngcontent-%COMP%]::-webkit-backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }[_ngcontent-%COMP%]::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.fixed[_ngcontent-%COMP%]{position:fixed}.bottom-0[_ngcontent-%COMP%]{bottom:0}.left-0[_ngcontent-%COMP%]{left:0}.table[_ngcontent-%COMP%]{display:table}.h-12[_ngcontent-%COMP%]{height:3rem}.w-1\\/2[_ngcontent-%COMP%]{width:50%}.w-full[_ngcontent-%COMP%]{width:100%}.border-collapse[_ngcontent-%COMP%]{border-collapse:collapse}.border-spacing-0[_ngcontent-%COMP%]{--tw-border-spacing-x: 0px;--tw-border-spacing-y: 0px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y)}.whitespace-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.border-b[_ngcontent-%COMP%]{border-bottom-width:1px}.border-b-2[_ngcontent-%COMP%]{border-bottom-width:2px}.border-r[_ngcontent-%COMP%]{border-right-width:1px}.border-main[_ngcontent-%COMP%]{border-color:#5c6ac4}.bg-main[_ngcontent-%COMP%]{background-color:#5c6ac4}.bg-slate-100[_ngcontent-%COMP%]{background-color:#f1f5f9}.p-3[_ngcontent-%COMP%]{padding:.75rem}.p-4[_ngcontent-%COMP%]{padding:1.25rem}.px-14[_ngcontent-%COMP%]{padding-left:3.5rem;padding-right:3.5rem}.px-2[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.py-10[_ngcontent-%COMP%]{padding-top:2.5rem;padding-bottom:2.5rem}.py-3[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}.py-4[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.py-6[_ngcontent-%COMP%]{padding-top:1.5rem;padding-bottom:1.5rem}.pb-3[_ngcontent-%COMP%]{padding-bottom:.75rem}.pl-2[_ngcontent-%COMP%]{padding-left:.5rem}.pl-3[_ngcontent-%COMP%]{padding-left:.75rem}.pl-4[_ngcontent-%COMP%]{padding-left:1rem}.pr-3[_ngcontent-%COMP%]{padding-right:.75rem}.pr-4[_ngcontent-%COMP%]{padding-right:1rem}.pr-6[_ngcontent-%COMP%]{padding-right:6rem}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.align-top[_ngcontent-%COMP%]{vertical-align:top}.text-sm[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.text-xs[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.font-bold40[_ngcontent-%COMP%]{font-weight:700;font-size:40px}.font-bold30[_ngcontent-%COMP%]{font-weight:700;font-size:30px}.italic[_ngcontent-%COMP%]{font-style:italic}.text-main[_ngcontent-%COMP%]{color:#5c6ac4}.text-neutral-600[_ngcontent-%COMP%]{color:#525252}.text-neutral-700[_ngcontent-%COMP%]{color:#404040}.text-slate-300[_ngcontent-%COMP%]{color:#cbd5e1}.text-slate-400[_ngcontent-%COMP%]{color:#94a3b8}.text-white[_ngcontent-%COMP%]{color:#fff}@page{margin:0}@media print{body[_ngcontent-%COMP%]{-webkit-print-color-adjust:exact}}']});const na=function(o){return["/contracts/businesstenant-add/",o]};function oa(o,e){if(1&o&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,na,i.id))}}function aa(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.removeTenant(a.id,a.Userid))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}const ra=function(o){return["/contracts/statements-list/",o]};function sa(o,e){if(1&o&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.Statements")),t.Q6J("routerLink",t.VKq(4,ra,i.id))}}const la=function(o){return["/contracts/contractComplex-list/",o]};function ca(o,e){if(1&o&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"auto_stories"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.ContractForTenant")),t.Q6J("routerLink",t.VKq(4,la,i.id))}}function ua(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.openContractForTenant(a.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"auto_stories"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.ContractForTenant"))}function da(o,e){if(1&o&&(t.TgZ(0,"div",23)(1,"div",24),t._uU(2),t.qZA(),t.TgZ(3,"div",24),t._uU(4),t.qZA(),t.TgZ(5,"div",24),t._uU(6),t.qZA(),t.TgZ(7,"div",24),t._uU(8),t.qZA(),t.TgZ(9,"div",24),t._uU(10),t.qZA(),t.TgZ(11,"div",24),t._uU(12),t.qZA(),t.TgZ(13,"div",24)(14,"mat-icon",25),t._uU(15),t.qZA()(),t.TgZ(16,"div",24)(17,"div",26),t.YNc(18,oa,4,6,"a",27),t.YNc(19,aa,4,3,"button",28),t.YNc(20,sa,4,6,"a",27),t.YNc(21,ca,4,6,"a",27),t.YNc(22,ua,4,3,"button",28),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.CUSName),t.xp6(2),t.Oqu(i.CUSMobile),t.xp6(2),t.hij(" ",i.build_Name," "),t.xp6(2),t.hij(" ",i.unit_Name," "),t.xp6(2),t.hij(" ",i.job_Name," "),t.xp6(2),t.hij(" ",i.workplace_Name," "),t.xp6(3),t.Oqu("T"==i.CUSActive?"check_box":"check_box_outline_blank"),t.xp6(3),t.Q6J("ngIf",n.can("change_tenant")||n.can("view_onetenant")||0==n.account.periorty&&"T"!==n.account.userDataConfirmed),t.xp6(1),t.Q6J("ngIf",n.can("delete_tenant")),t.xp6(1),t.Q6J("ngIf",n.can("view_tenantstatements")),t.xp6(1),t.Q6J("ngIf",n.can("view_contractfortenant")),t.xp6(1),t.Q6J("ngIf",n.can("view_contractfortenant"))}}function ma(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",31)(1,"div",32)(2,"mat-card",33)(3,"pagination-controls",34),t.NdJ("pageChange",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(a))}),t.qZA()()()()}}function pa(o,e){1&o&&(t.TgZ(0,"div",35),t._UZ(1,"mat-spinner",36),t.qZA())}const ha=function(o,e){return{itemsPerPage:o,currentPage:e}};class te{constructor(e,i,n,a,l,p,f,A,S,U,M,K){this.transferService=e,this.appSettings=i,this.dialog=n,this.usersService=a,this.router=l,this.contractService=p,this.global=f,this.localStore=A,this.settingService=S,this.snackBar=U,this.translateService=M,this.userService=K,this.curTenant=new ft,this.account=new lt.n,this.count=8,this.defaultCusImage=this.noImageUrl,this.CusImageToUpload=null,this.userPerm=[],this.editTenantCodeStatus=(new x.$).getEditTenantCodeStatus(),this.editCode=!0,this.settings=this.appSettings.settings,this.baseUrl=this.appSettings.settings.url,this.secondPartUrl=new L.P(this.baseUrl).api_constant,this.noImageUrl=new L.P(this.baseUrl).noImage}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultCusImage=n.target.result},i.readAsDataURL(this.CusImageToUpload)}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.getParamValue(this.curCOMId,this.account.periorty,this.editTenantCodeStatus),this.prepareMsgLanguage(),this.getTenants()}}getParamValue(e,i,n){this.settingService.getValueForCode(e,i,n).subscribe(a=>{n==this.editTenantCodeStatus&&(this.editTenantCodeValue=a[0].APAValue)},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getTenants(){this.users=null,this.curUserData.is_superuser?this.usersService.getCustomerPerSelfType(this.curCOMId,this.account.periorty,"C").subscribe(e=>this.users=e):0==this.curUserData.periorty?this.usersService.getCustomerPerUserPerSelfType(this.curCOMId,this.account.periorty,this.curUserData.id,"C").subscribe(e=>this.users=e):("N"==this.securityForApp&&(this.curBranchID=this.curUserData.branch_KeyField??0,this.usersService.getCustomersPerBranchPerSelfType(this.curCOMId,this.account.periorty,this.curBranchID,"C").subscribe(e=>this.users=e)),"D"==this.securityForApp&&this.usersService.getCustomersPerEmployeePerSelfType(this.curCOMId,this.account.periorty,this.curUserData.id,"C").subscribe(e=>this.users=e))}addTenant(e){this.usersService.addOneCustomer(e).subscribe(i=>this.getTenants())}updateTenant(e){this.usersService.editCustomer(e,this.CusImageToUpload,this.CusImageToUpload,this.curUserData.is_employee).subscribe(i=>this.getTenants())}deleteTenant(e){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.usersService.deleteCustomer(e.id).subscribe(a=>this.getTenants())})}removeTenant(e,i){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(a=>{a&&this.usersService.deleteCustomer(e).subscribe(l=>{this.userService.deleteOneUser(i).subscribe(p=>{}),this.getTenants()})})}onPageChanged(e){this.page=e,this.getTenants(),window.scrollTo(0,0)}openContractForTenant(e){this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,e).subscribe(i=>{this.router.navigate("T"==i[0].RCOContractMultiUnits?["/contracts/contractComplex-list/"+e]:["/contracts/contract-list/"+e])})}gotoTenantDisplay(e){console.log("===**gotoTenantDisplay**=== "+e),this.router.navigate(["/contracts/tenant-add/"+e])}gotoNewTenantFullData(){this.transferService.setMessage({editTenantCode:this.editTenantCodeValue}),this.router.navigate(["/contracts/businesstenant-add/"])}gotoNewTenant(){this.dialog.open(Ct,{data:{periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(i=>{console.log("=====result.event:: "+i.event),"Cancel"==i.event||"Post"==i.event&&this.userService.registerTenant_with_lastName(i.data).subscribe(n=>{console.log("TenantID:: "+n.id),this.getTenants(),this.snackBar.open(this.registeredMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.can("view_onetenant")&&this.gotoTenantDisplay(n.id)},n=>{console.log("error",n),this.snackBar.open(this.notRegisteredMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})})}openTenantDialog(e){this.dialog.open(Ct,{data:e}).afterClosed().subscribe(n=>{n?(console.log("=====if user True:: =============="),console.log(n),this.curTenant=new ft,console.log(this.curTenant),this.fromUserToCustomer(n),console.log(this.curTenant),n.id?this.updateTenant(this.curTenant):this.addTenant(this.curTenant)):console.log("=====if user False:: ==============")})}fromUserToCustomer(e){this.curTenant.id=e.id,this.curTenant.RowDelete=e.settings.isDeleted?1:0,this.curTenant.CUSCode=e.code,this.curTenant.CUSPic=e.image,this.curTenant.CUSGender=e.profile.gender,console.log("====Date===="),console.log(e.profile.birthday),this.curTenant.CUSBirthDate=e.profile.birthday,this.curTenant.CUSMobile=e.mobile,this.curTenant.CUSEmail=e.contacts.email,this.curTenant.CUSActive=e.settings.isActive?"T":"F",this.curTenant.CUSAddress=e.contacts.address,this.curTenant.Country_CTTKeyField=e.contacts.country,this.curTenant.CUSusername=e.username,this.curTenant.CUSFirstName=e.firstname,this.curTenant.CUSLastName=e.lastname}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e}),this.translateService.get("MESSAGE.REGISTERD").subscribe(e=>{this.registeredMsg=e}),this.translateService.get("MESSAGE.NOTREGISTERD").subscribe(e=>{this.notRegisteredMsg=e})}}function ga(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function _a(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Ca(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Code is required"),t.qZA())}function fa(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Code isn't long enough, minimum of 4 characters"),t.qZA())}function Ta(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Password is required"),t.qZA())}function ba(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Password isn't long enough, minimum of 6 characters"),t.qZA())}function va(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-form-field",118)(1,"mat-label")(2,"mat-icon"),t._uU(3,"vpn_key"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"input",119),t.TgZ(7,"mat-icon",120),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.passwordHide=!a.passwordHide)}),t._uU(8),t.qZA(),t.YNc(9,Ta,2,0,"mat-error",1),t.YNc(10,ba,2,0,"mat-error",1),t.qZA()}if(2&o){const i=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,5,"HTML.PASSWORD"),""),t.xp6(2),t.Q6J("type",i.passwordHide?"password":"text"),t.xp6(2),t.Oqu(i.passwordHide?"visibility":"visibility_off"),t.xp6(1),t.Q6J("ngIf",null==i.form.controls.password.errors?null:i.form.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",i.form.controls.password.hasError("minlength"))}}function Aa(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"First name is required"),t.qZA())}function ya(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Last name is required"),t.qZA())}function Za(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Mobile is required"),t.qZA())}function Oa(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function xa(o,e){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Oqu(i.fileType)}}function Ua(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function Sa(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function wa(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.UNTUnitNumber," ")}}function Na(o,e){1&o&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HTML.ElectricityCounterNumber")," "))}function Fa(o,e){1&o&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HTML.WaterCounterNumber")," "))}function Ia(o,e){1&o&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HTML.GasCounterNumber")," "))}function Da(o,e){if(1&o&&(t.TgZ(0,"ng-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName,"")}}function La(o,e){if(1&o&&(t.TgZ(0,"ng-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName,"")}}function Ma(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Ra(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function qa(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Ea(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Pa(o,e){if(1&o&&(t.TgZ(0,"div")(1,"a",121)(2,"mat-icon"),t._uU(3,"download"),t.qZA()()()),2&o){const i=t.oxw();t.xp6(1),t.s9C("href",i.natIDfileToUpload,t.LSH)}}function ka(o,e){if(1&o&&(t.ynx(0),t._UZ(1,"img",124),t.BQk()),2&o){const i=t.oxw(2);t.xp6(1),t.Q6J("src",i.fileUrl,t.LSH)}}function Ba(o,e){if(1&o&&t._UZ(0,"iframe",125),2&o){const i=t.oxw(2);t.Q6J("src",i.sanitizedUrl,t.uOi)}}function Ka(o,e){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,ka,2,1,"ng-container",122),t.YNc(2,Ba,1,1,"ng-template",null,123,t.W1O),t.qZA()),2&o){const i=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isImage)("ngIfElse",i)}}function Ja(o,e){if(1&o&&(t.TgZ(0,"ng-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName,"")}}function Ha(o,e){if(1&o&&(t.TgZ(0,"div")(1,"a",126)(2,"mat-icon"),t._uU(3,"download"),t.qZA()()()),2&o){const i=t.oxw();t.xp6(1),t.s9C("href",i.registerFileToUpload,t.LSH)}}function Wa(o,e){if(1&o&&(t.ynx(0),t._UZ(1,"img",124),t.BQk()),2&o){const i=t.oxw(2);t.xp6(1),t.Q6J("src",i.registerFileUrl,t.LSH)}}function Va(o,e){if(1&o&&t._UZ(0,"iframe",125),2&o){const i=t.oxw(2);t.Q6J("src",i.sanitizedFileUrl,t.uOi)}}function Ya(o,e){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Wa,2,1,"ng-container",122),t.YNc(2,Va,1,1,"ng-template",null,127,t.W1O),t.qZA()),2&o){const i=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isRegisterImage)("ngIfElse",i)}}function Ga(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Qa(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function ja(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function $a(o,e){if(1&o&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function za(o,e){1&o&&(t.TgZ(0,"mat-tab",128),t.ALo(1,"translate"),t.TgZ(2,"div",6),t._UZ(3,"mat-label"),t.TgZ(4,"div",5)(5,"mat-checkbox",129),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"mat-checkbox",130),t._uU(9),t.ALo(10,"translate"),t.qZA()()()()),2&o&&(t.s9C("label",t.lcZ(1,3,"HTML.TAB_SETTINGS")),t.xp6(6),t.Oqu(t.lcZ(7,5,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(10,7,"HTML.BLOCKED")))}function Xa(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function tr(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function er(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",131),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.saveUpdate(a.CUS.id))}),t.YNc(1,Xa,3,3,"span",1),t.YNc(2,tr,3,3,"span",1),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.CUS.id),t.xp6(1),t.Q6J("ngIf",i.CUS.id)}}function ir(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",132),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.customerRelated(a.CUS.id))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.Accompany"))}}function nr(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",132),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.customerWorkRelated(a.CUS.id))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.WorkRelated"))}}function or(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",132),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.customerWorkRelatedAgency(a.CUS.id))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.Agency"))}}function ar(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",132),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.changePassword(a.CUS))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.PasswordChange"))}}function rr(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",132),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.confirmData(a.CUS.id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(1),t.Oqu(t.lcZ(2,2,"BTN.SUBMIT"))}}te.\u0275fac=function(e){return new(e||te)(t.Y36(mt.y),t.Y36(it.d),t.Y36(y.uw),t.Y36(ct.v),t.Y36(P.F0),t.Y36(H.W),t.Y36(tt.U),t.Y36(N.C),t.Y36(pt.g),t.Y36(R.ux),t.Y36(O.sK),t.Y36(Kt.K))},te.\u0275cmp=t.Xpm({type:te,selectors:[["app-customers-list-companies"]],features:[t._Bn([ct.v,H.W])],decls:44,vars:37,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"text-muted"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){1&e&&(t.YNc(0,ia,22,7,"div",0),t._UZ(1,"mat-divider"),t.TgZ(2,"mat-card")(3,"div",1)(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",2)(9,"div",3)(10,"div",4)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",4)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",4)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",4)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",4)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",4)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",4)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",4),t.qZA(),t.YNc(39,da,23,12,"div",5),t.ALo(40,"paginate"),t.ALo(41,"TenantSearchPipe"),t.qZA()(),t.YNc(42,ma,4,0,"div",6),t.YNc(43,pa,2,0,"div",7)),2&e&&(t.Q6J("ngIf",i.account.periorty>0),t.xp6(5),t.hij("",t.lcZ(6,12,"HTML.TENANTS_LIST")," "),t.xp6(7),t.hij(" ",t.lcZ(13,14,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(17,16,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(21,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(25,20,"HTML.UNIT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,22,"HTML.Job")," "),t.xp6(4),t.hij(" ",t.lcZ(33,24,"HTML.WorkPlace")," "),t.xp6(4),t.hij(" ",t.lcZ(37,26,"HTML.ACTIVATED")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(40,28,t.xi3(41,31,i.users,i.searchText),t.WLB(34,ha,i.count,i.page))),t.xp6(3),t.Q6J("ngIf",i.users),t.xp6(1),t.Q6J("ngIf",!i.users))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,et.LS,C.sg,C.O5,P.rH,T.xw,T.Wh,T.yH,w.Tq,w.nh,dt.A9,dt.Yi,W.a8,$.Hw,Z.Nt,v.KE,X.d,yt.Ou,rt.gM,et._s,Zt.DA,O.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});class Pt{constructor(e,i,n,a,l,p,f,A,S,U,M,K,z,st,V,It,Ae){this.transferService=e,this.appSettings=i,this.activatedRoute=n,this.codesService=a,this.unitsService=l,this.fb=p,this.localStore=f,this._CustomerService=A,this.router=S,this.dialog=U,this.global=M,this.atlasService=K,this.settingService=z,this.translateService=st,this.contractService=V,this.sanitizer=It,this.snackBar=Ae,this.account=new lt.n,this.country_const=(new x.I).Countries,this.governorate_const=(new x.I).Governorates,this.city_const=(new x.I).City,this.region_const=(new x.I).Regions,this.notificationType_const=(new x.I).NotificationTypes,this.job_const=(new x.I).Jobs,this.workplace_const=(new x.I).WorkPlaces,this.workField_const=(new x.I).WorkType,this.passwordHide=!0,this.tenant=new ft,this.editCode=!0,this.selectedOption="C",this.userPerm=[],this.brandfileToUpload=null,this.natIDfileToUpload=null,this.registerFileToUpload=null,this.DocImageToUpload=null,this.defaultDocImage=this.noImageUrl,this.defaultCusImage=this.noImageUrl,this.CusImageToUpload=null,this.defaultIDImage=this.noImageUrl,this.IDImageToUpload=null,this.fileType=null,this.idFileType=null,this.registerFileType=null,this.fileUrl=null,this.registerFileUrl=null,this.isImage=!1,this.isRegisterImage=!1,this.AllBranches=[],this.notificationsObject=new xe.j,this.allowedChar="1234567890",this.lengthOfCode=6,this.Jobs=[],this.WorkPlaces=[],this.WorkFields=[],this.Countries=[],this.Governorates=[],this.Governorates_EstOwner=[],this.Cities_EstOwner=[],this.Cities=[],this.Areas_EstOwner=[],this.Areas=[],this.AllBuildings=[],this.AllUnits=[],this.settings=this.appSettings.settings,this.baseUrl=this.appSettings.settings.url,this.secondPartUrl=new L.P(this.baseUrl).api_constant,this.noImageUrl=new L.P(this.baseUrl).noImage}onBusinessOptionChange(e){this.selectedOption=e.value,console.log("------this.selectedOption:: "+this.selectedOption)}handleFileInputBrand(e){e&&e.length&&(this.brandfileToUpload=e.item(0)),document.getElementById("customButtonBrand").textContent=e.length>0?e[0].name:this.chooseFilePDFBrand}handleFileInputNatID(e){e&&e.length&&(this.natIDfileToUpload=e.item(0)),document.getElementById("customButtonNatId").textContent=e.length>0?e[0].name:this.chooseFilePDFNatID}callFileInputBrand(){document.getElementById("brandFileInput").click()}callFileInputNatId(){document.getElementById("natIDFileInput").click()}callFileInput(){document.getElementById("fileInput").click()}callOnRegisterFileSelect(){document.getElementById("registerFileInput").click()}callOnHowiaFileSelect(){document.getElementById("howiaFileInput").click()}callIDFileInput(){document.getElementById("idFileInput").click()}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.isImage=!1,this.isRegisterImage=!1,this.transferService.getMessage.subscribe(e=>{this.editCode="YES"==e.editTenantCode.toUpperCase(),console.log("---2222 this.editCode:: "+this.editCode)}),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getMaxCodeForCustomers(this.curCOMId,this.account.periorty),this.getCountries(this.curCOMId,this.account.periorty),this.getJobs(this.curCOMId,this.account.periorty),this.getWorkPlaces(this.curCOMId,this.account.periorty),this.getWorkFields(this.curCOMId,this.account.periorty),this.getNotificationRows(this.curCOMId,this.account.periorty,1),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=+e.id,this.getTenantById(this.id)):this.CUS=new ft;var i=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==i.is_employee,this.isAdmin=i.is_superuser,this.isOwner="T"==i.is_owner,console.log("---1111 this.editCode:: "+this.editCode),this.form=this.fb.group({id:null,code:{value:null,disabled:!this.editCode},username:{value:null,disabled:this.id},password:null,firstname:[null,d.kI.required],lastname:[null,d.kI.required],image:null,CUSBrandPdf:null,CUSIdPdf:null,mobile:null,Nationality_CTTKeyField:null,selftype:"C",CUSEInvoiceType:"G",profile:this.fb.group({birthday:[null,d.kI.required],gender:"M",current_branch:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curbuilding:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curunit:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee}}),work:this.fb.group({company:[null,d.kI.required],position:null,nationalIDType:"N",nationalID:[null,d.kI.required],nationalIDStartDate:null,nationalIDEndDate:null,nationalIDPic:null,WorkPlace_CTTKeyField:null,Job_CTTKeyField:null,CUSAddress_EstOwner:null,CUSShortAddress_EstOwner:null,CUSStreetName_EstOwner:null,CUSBuildingNumber_EstOwner:null,CUSBuildingSubNumber_EstOwner:null,CUSZibCode_EstOwner:null,Country_CTTKeyField_EstOwner:null,Governorate_CTTKeyField_EstOwner:null,City_CTTKeyField_EstOwner:null,Area_CTTKeyField_EstOwner:null}),business:this.fb.group({CUSEstablishmentName:null,CUSUnifiedNumber:null,CUSCoRegisterOwnerName:null,CUSCoRegisterManagerName:null,CUSCoRegisterPdf:null,CUSBrandName:null,workField_CTTKeyField:null,CUSEstablishAddressPdf:null,CUSEstablishAddressPic:null,CUSNots:null,CUSTaxNumber:null,CUSCommercialRegister:null,CUSFamousName:null}),contacts:this.fb.group({email:["",d.kI.compose([d.kI.required,B.Le])],homephone:null,workphone:null,address:null,CUSStreetName:null,CUSBuildingNumber:null,CUSZibCode:null,CUSShortAddress:null,CUSBuildingSubNumber:null,country:null,governorate:null,city:null,area:null}),social:this.fb.group({facebook:null,twitter:null,google:null}),settings:this.fb.group({isActive:null,isDeleted:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0)})}}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onFileChange(e){this.DocImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultDocImage=n.target.result},i.readAsDataURL(this.DocImageToUpload)}onFileRemove(e){console.log("====On Remove:: "+e)}getFileType(e){const i=e.type;return"application/pdf"===i?"PDF":i.startsWith("image/")?"IMAGE":"NOT"}onEnter(e){e.preventDefault()}handelCUSImgInput(e){if(e&&e.length){switch(this.getFileType(e.item(0))){case"IMAGE":this.fileType=this.imageFileSelected;break;case"PDF":this.fileType=this.pdfFileSelected;break;case"NOT":this.fileType=this.otherFileSelected}if(this.fileType==this.imageFileSelected){console.log("--------Here when image-------------"),this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=p=>{this.defaultCusImage=p.target.result},i.readAsDataURL(this.CusImageToUpload),document.getElementById("customButton").textContent=e.length>0?e[0].name:this.chooseFile}}}onRegisterFileSelected(e,i){if(e&&e.length){switch(this.getFileType(e.item(0))){case"IMAGE":this.isRegisterImage=!0,this.registerFileType=this.imageFileSelected;break;case"PDF":this.isRegisterImage=!1,this.registerFileType=this.pdfFileSelected;break;case"NOT":this.isRegisterImage=!1,this.registerFileType=this.otherFileSelected}const l=new FileReader;l.onload=A=>{this.registerFileUrl=l.result,this.sanitizedFileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(A.target.result)},l.readAsDataURL(e.item(0)),this.registerFileToUpload=e.item(0),document.getElementById("registerCustomButton").textContent=e.length>0?e[0].name:this.chooseRegisterFilePDF}}onFileSelected(e,i){if(e&&e.length){switch(this.getFileType(e.item(0))){case"IMAGE":this.isImage=!0,this.idFileType=this.imageFileSelected;break;case"PDF":this.isImage=!1,this.idFileType=this.pdfFileSelected;break;case"NOT":this.isImage=!1,this.idFileType=this.otherFileSelected}const l=new FileReader;l.onload=p=>{this.fileUrl=l.result,this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(p.target.result)},l.readAsDataURL(e.item(0)),this.natIDfileToUpload=e.item(0)}}handelIDImgInput(e){this.IDImageToUpload=e.item(0);var i=new FileReader;i.onload=l=>{this.defaultIDImage=l.target.result,console.log("=====after====="+this.defaultIDImage)},i.readAsDataURL(this.IDImageToUpload),document.getElementById("idCustomButton").textContent=e.length>0?e[0].name:this.chooseFile}mapFormvalue_to_CustomerClass(e){this.form.enable(),this.cur_branch=this.form.value.profile.current_branch,this.cur_building=this.form.value.profile.curbuilding,this.cur_unit=this.form.value.profile.curunit,this.form.disable();const i=new C.uU("en-GB").transform(this.form.value.profile.birthday,"dd/MM/yyyy"),n=new C.uU("en-GB").transform(this.form.value.work.nationalIDStartDate,"dd/MM/yyyy"),a=new C.uU("en-GB").transform(this.form.value.work.nationalIDEndDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,null!=this.form.value.profile.birthday&&(this.CUS.CUSBirthDate=i),null!=this.form.value.work.nationalIDStartDate&&(this.CUS.CUSNationalIDStartDate=n),null!=this.form.value.work.nationalIDEndDate&&(this.CUS.CUSNationalIDEndDate=a),this.CUS.CUSCode=+this.form.value.code,this.CUS.CUSFirstName=this.form.value.firstname,this.CUS.CUSLastName=this.form.value.lastname,this.CUS.CUSusername=this.form.value.username,this.CUS.CUSpassword=this.form.value.password,"POST"==e&&(this.CUS.is_create_CustomUser_table="T"),this.CUS.CUSGender=this.form.value.profile.gender,this.CUS.current_branch=this.cur_branch,this.CUS.current_building=this.cur_building,this.CUS.current_unit=this.cur_unit,this.CUS.CUSSelfType=this.form.value.selftype,this.CUS.CUSEInvoiceType=this.form.value.CUSEInvoiceType,this.CUS.CUSPic=this.form.value.image,this.CUS.CUSIDPic=this.form.value.work.nationalIDPic,this.CUS.CUSGuarantor=this.form.value.work.company,this.CUS.CUSJobName=this.form.value.work.position??"",this.CUS.CUSNationalIDType=this.form.value.work.nationalIDType,this.CUS.CUSNationalID=this.form.value.work.nationalID,this.CUS.WorkPlace_CTTKeyField=this.form.value.work.WorkPlace_CTTKeyField,this.CUS.Job_CTTKeyField=this.form.value.work.Job_CTTKeyField,this.CUS.Nationality_CTTKeyField=this.form.value.Nationality_CTTKeyField,this.CUS.CUSAddress_EstOwner=this.form.value.work.CUSAddress_EstOwner??"",this.CUS.CUSShortAddress_EstOwner=this.form.value.work.CUSShortAddress_EstOwner??"",this.CUS.CUSStreetName_EstOwner=this.form.value.work.CUSStreetName_EstOwner??"",this.CUS.CUSBuildingNumber_EstOwner=this.form.value.work.CUSBuildingNumber_EstOwner??"",this.CUS.CUSBuildingSubNumber_EstOwner=this.form.value.work.CUSBuildingSubNumber_EstOwner??"",this.CUS.CUSZibCode_EstOwner=this.form.value.work.CUSZibCode_EstOwner??"",this.CUS.Country_CTTKeyField_EstOwner=this.form.value.work.Country_CTTKeyField_EstOwner,this.CUS.Governorate_CTTKeyField_EstOwner=this.form.value.work.Governorate_CTTKeyField_EstOwner,this.CUS.City_CTTKeyField_EstOwner=this.form.value.work.City_CTTKeyField_EstOwner,this.CUS.Area_CTTKeyField_EstOwner=this.form.value.work.Area_CTTKeyField_EstOwner,this.CUS.CUSEstablishmentName=this.form.value.business.CUSEstablishmentName,this.CUS.CUSUnifiedNumber=this.form.value.business.CUSUnifiedNumber,this.CUS.CUSCoRegisterOwnerName=this.form.value.business.CUSCoRegisterOwnerName,this.CUS.CUSCoRegisterManagerName=this.form.value.business.CUSCoRegisterManagerName,this.CUS.CUSCoRegisterPdf=this.form.value.business.CUSCoRegisterPdf,this.CUS.CUSBrandName=this.form.value.business.CUSBrandName,this.CUS.workField_CTTKeyField=this.form.value.business.workField_CTTKeyField,this.CUS.CUSNots=this.form.value.business.CUSNots,this.CUS.CUSTaxNumber=this.form.value.business.CUSTaxNumber??"",this.CUS.CUSCommercialRegister=this.form.value.business.CUSCommercialRegister??"",this.CUS.CUSFamousName=this.form.value.business.CUSFamousName??"",this.CUS.CUSMobile=this.form.value.mobile,this.CUS.CUSEmail=this.form.value.contacts.email,this.CUS.CUSHomePhone=this.form.value.contacts.homephone,this.CUS.CUSWorkPhone=this.form.value.contacts.workphone,this.CUS.CUSAddress=this.form.value.contacts.address??"",this.CUS.CUSStreetName=this.form.value.contacts.CUSStreetName??"",this.CUS.CUSBuildingNumber=this.form.value.contacts.CUSBuildingNumber??"",this.CUS.CUSZibCode=this.form.value.contacts.CUSZibCode??"",this.CUS.CUSShortAddress=this.form.value.contacts.CUSShortAddress??"",this.CUS.CUSBuildingSubNumber=this.form.value.contacts.CUSBuildingSubNumber??"",this.CUS.Country_CTTKeyField=this.form.value.contacts.country,this.CUS.Governorate_CTTKeyField=this.form.value.contacts.governorate,this.CUS.City_CTTKeyField=this.form.value.contacts.city,this.CUS.Area_CTTKeyField=this.form.value.contacts.area,this.CUS.CUSFacebook=this.form.value.social.facebook??"",this.CUS.CUSTwitter=this.form.value.social.twitter??"",this.CUS.CUSGoogle=this.form.value.social.google??"",this.CUS.CUSActive=this.tenActive,this.CUS.RowDelete=this.tenDeleted}getTenantById(e){const i=[];this._CustomerService.getOneCustomer(e).subscribe(n=>{this._CustomerService.getOneCustomerDocs(this.curCOMId,this.account.periorty,e).subscribe(a=>{for(var l of a)i.push({link:l.CUDPic,preview:l.CUDPic})}),this.fillForm(n,i),this.CUS=n,n.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,n.Country_CTTKeyField),n.Country_CTTKeyField_EstOwner&&this.getGovernoratePerCountry_EstOwner(this.curCOMId,this.account.periorty,n.Country_CTTKeyField_EstOwner),n.Governorate_CTTKeyField&&this.getCityPerGoverno(this.curCOMId,this.account.periorty,n.Governorate_CTTKeyField),n.Governorate_CTTKeyField_EstOwner&&this.getCityPerGoverno_EstOwner(this.curCOMId,this.account.periorty,n.Governorate_CTTKeyField_EstOwner),n.City_CTTKeyField&&this.getAreaPerCity(this.curCOMId,this.account.periorty,n.City_CTTKeyField),n.City_CTTKeyField_EstOwner&&this.getAreaPerCity_EstOwner(this.curCOMId,this.account.periorty,n.City_CTTKeyField_EstOwner)})}getFileTypeFromPath(e){console.log("--------start of getFileTypeFromPath----------"),console.log("-----filePath1111:: "+e);const i=e.split(".").pop()?.toLowerCase();switch(console.log("-----filePath2222:: "+e),console.log("--------extension:: "+i),i.substring(0,3)){case"jpg":case"jpe":case"png":case"gif":return"Image";case"pdf":return"PDF";case"doc":return"Word Document";case"xls":return"Excel Document";default:return"Unknown File Type"}}fillForm(e,i){var n,a;console.log("----inside Fill Form---111111--"),this.is_active="T"==e.CUSActive,e.current_building&&this.getAllUnits(this.curCOMId,this.account.periorty,e.current_building),this.defaultCusImage=null!=e.CUSPic?e.CUSPic:this.noImageUrl,this.defaultIDImage=null!=e.CUSIDPic?e.CUSIDPic:this.noImageUrl,this.is_delete=1==e.RowDelete,console.log("----inside Fill Form---222222--"),this.brandfileToUpload=e.CUSBrandPdf,this.natIDfileToUpload=e.CUSIdPdf,this.registerFileToUpload=e.CUSCoRegisterPdf,this.natIDfileToUpload&&("Image"==(n=this.getFileTypeFromPath(this.natIDfileToUpload.toString()))?(console.log("Selected file is an image."),this.isImage=!0,this.fileUrl=this.natIDfileToUpload.toString(),console.log("-----this.fileUrl:: "+this.fileUrl)):"PDF"==n?(console.log("Selected file is a PDF."),this.isImage=!1,this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.natIDfileToUpload.name),console.log("------this.sanitizedUrl.:: "+this.sanitizedUrl)):console.log("Selected file is of another type:",n)),this.registerFileToUpload&&("Image"==(a=this.getFileTypeFromPath(this.registerFileToUpload.toString()))?(console.log("Selected file is an image."),this.isRegisterImage=!0,this.registerFileUrl=this.registerFileToUpload.toString(),console.log("-----this.registerFileUrl:: "+this.registerFileUrl)):"PDF"==a?(console.log("Selected file is a PDF."),this.isRegisterImage=!1,this.sanitizedFileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.registerFileToUpload.name),console.log("------this.sanitizedFileUrl.:: "+this.sanitizedFileUrl)):console.log("Selected file is of another type:",a)),console.log("----inside Fill Form---333333--"),this.form.patchValue({id:e.id,code:e.CUSCode,username:e.CUSusername,password:e.CUSpassword,firstname:e.CUSFirstName,lastname:e.CUSLastName,image:e.CUSPic,CUSBrandPdf:e.CUSBrandPdf,CUSIdPdf:e.CUSIdPdf,selftype:e.CUSSelfType,CUSEInvoiceType:e.CUSEInvoiceType,mobile:e.CUSMobile,Nationality_CTTKeyField:e.Nationality_CTTKeyField,profile:{birthday:e.CUSBirthDate,gender:e.CUSGender,current_branch:e.current_branch,curbuilding:e.current_building,curunit:e.current_unit},work:{company:e.CUSGuarantor,position:e.CUSJobName,nationalIDType:e.CUSNationalIDType,nationalID:e.CUSNationalID,nationalIDStartDate:e.CUSNationalIDStartDate,nationalIDEndDate:e.CUSNationalIDEndDate,nationalIDPic:e.CUSIDPic,WorkPlace_CTTKeyField:e.WorkPlace_CTTKeyField,Job_CTTKeyField:e.Job_CTTKeyField,CUSAddress_EstOwner:e.CUSAddress_EstOwner,CUSShortAddress_EstOwner:e.CUSShortAddress_EstOwner,CUSStreetName_EstOwner:e.CUSStreetName_EstOwner,CUSBuildingNumber_EstOwner:e.CUSBuildingNumber_EstOwner,CUSBuildingSubNumber_EstOwner:e.CUSBuildingSubNumber_EstOwner,CUSZibCode_EstOwner:e.CUSZibCode_EstOwner,Country_CTTKeyField_EstOwner:e.Country_CTTKeyField_EstOwner,Governorate_CTTKeyField_EstOwner:e.Governorate_CTTKeyField_EstOwner,City_CTTKeyField_EstOwner:e.City_CTTKeyField_EstOwner,Area_CTTKeyField_EstOwner:e.Area_CTTKeyField_EstOwner},business:{CUSEstablishmentName:e.CUSEstablishmentName,CUSUnifiedNumber:e.CUSUnifiedNumber,CUSCoRegisterOwnerName:e.CUSCoRegisterOwnerName,CUSCoRegisterManagerName:e.CUSCoRegisterManagerName,CUSBrandName:e.CUSBrandName,workField_CTTKeyField:e.workField_CTTKeyField,CUSEstablishAddressPdf:e.CUSEstablishAddressPdf,CUSEstablishAddressPic:e.CUSEstablishAddressPic,CUSNots:e.CUSNots,CUSTaxNumber:e.CUSTaxNumber,CUSCommercialRegister:e.CUSCommercialRegister,CUSFamousName:e.CUSFamousName},contacts:{email:e.CUSEmail,homephone:e.CUSHomePhone,workphone:e.CUSWorkPhone,address:e.CUSAddress,country:e.Country_CTTKeyField,governorate:e.Governorate_CTTKeyField,city:e.City_CTTKeyField,area:e.Area_CTTKeyField,CUSStreetName:e.CUSStreetName,CUSBuildingNumber:e.CUSBuildingNumber,CUSZibCode:e.CUSZibCode,CUSShortAddress:e.CUSShortAddress,CUSBuildingSubNumber:e.CUSBuildingSubNumber},social:{facebook:e.CUSFacebook,twitter:e.CUSTwitter,google:e.CUSGoogle},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}}),console.log("----inside Fill Form---4444444--"),e.current_unit&&this.getUnitFullData(e.current_unit),console.log("----inside Fill Form---55555555--")}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(e,i,n,a){console.log("----is Emp"),this.atlasService.getBranchPerEmp(e,i,n).subscribe(l=>{this.AllBranches=l,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+a),this.atlasService.getOneBranch(a).subscribe(p=>{this.AllBranches=p},p=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getNotificationRows(e,i,n){this.codesService.getSubForParentAndArrange(e,i,this.notificationType_const,n).subscribe(a=>{1==n&&(this.cttNotificationType_TenantData=a[0].id),2==n&&(this.cttNotificationType_EndContract=a[0].id)},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0646\u0648\u0639 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapvaluesToNotificationClass(){this.notificationsObject.notificationType_CTTKeyField=this.cttNotificationType_TenantData,this.notificationsObject.UNOActive="T",this.notificationsObject.UNONotificationFromTenant="T",this.notificationsObject.branch_KeyField=this.cur_branch,this.notificationsObject.UNOTitle="\u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0623\u062c\u0631",this.notificationsObject.build_KeyField=this.cur_building,this.notificationsObject.unit_KeyField=this.cur_unit,this.notificationsObject.customer_KeyField=this.form.value.id,this.notificationsObject.UNOText="\u0628\u0631\u062c\u0627\u0621 \u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631 "+this.form.value.firstname+" "+this.form.value.lastname}readCusCode(e){let n=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({contacts:{email:"E"+n+"@changeit.com"},username:n,password:n})}pad(e,i){let n=e+"";for(;n.length<i;)n="0"+n;return n}createRandomString(e,i){let n="";for(let a=0;a<e;a++)n+=i.charAt(Math.floor(Math.random()*i.length));return n}generateUserName(e,i){return this.pad(e,4)+i}confirmData(e){this._CustomerService.editCustomerConfirm({CUSConfirmed:"T",id:e}).subscribe(n=>{this.snackBar.open("\u062a\u0645 \u0625\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/businesstenant-list"])},n=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}customerRelated(e){console.log("========Sayed2982024=====customerRelated()==============="),this.dialog.open(Rt,{data:{custId:e,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}customerWorkRelated(e){console.log("========Sayed2982024=====customerWorkRelated()==============="),this.dialog.open(St,{data:{custId:e,periorty:this.account.periorty,personType:"P"},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}customerWorkRelatedAgency(e){console.log("========Sayed2982024=====customerWorkRelated()==============="),this.dialog.open(St,{data:{custId:e,periorty:this.account.periorty,personType:"W"},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}changePassword(e){this.dialog.open(Te.p,{data:{dataRow:e,curUserData:this.curUserData,userPerm:this.userPerm,pk:e.Userid},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}saveUpdate(e){console.log("=============saveUpdate()==============="),e?(this.mapFormvalue_to_CustomerClass("PATCH"),console.log("=============Update data()==============="),this._CustomerService.editCustomerBusinessWithPDF(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.curUserData.is_employee,this.brandfileToUpload,this.natIDfileToUpload,this.registerFileToUpload).subscribe(i=>{console.log("res=> "+i),"F"==this.curUserData.is_employee&&(this.mapvaluesToNotificationClass(),this.unitsService.addNotificationForUnits(this.notificationsObject).subscribe(n=>{},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})),null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(this.CUS.id,this.DocImageToUpload).subscribe(n=>{console.log("====yes from update====",n)}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/businesstenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(this.mapFormvalue_to_CustomerClass("POST"),console.log(this.CUS),this._CustomerService.addCustomerBusinessWithPDF(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.brandfileToUpload,this.natIDfileToUpload,this.registerFileToUpload).subscribe(i=>{null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(i.id,this.DocImageToUpload).subscribe(n=>{console.log("====yes from insert====",n)}),this.contractService.addCustomUserFromTenant(i,this.CusImageToUpload).subscribe(n=>{this.contractService.updateCustomerWithUserID(i.id,n.id).subscribe(a=>{},a=>{console.log("ERROR::--\x3e ",a)})}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/businesstenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))}close(){}compareFunction(e,i){return e.username==i.username&&e.code==i.code}getJobs(e,i){this.codesService.getSubForParent(e,i,this.job_const).subscribe(n=>{this.Jobs=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u0638\u0627\u0626\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getWorkPlaces(e,i){this.codesService.getSubForParent(e,i,this.workplace_const).subscribe(n=>{this.WorkPlaces=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0645\u0627\u0643\u0646 \u0627\u0644\u0639\u0645\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getWorkFields(e,i){this.codesService.getSubForParent(e,i,this.workField_const).subscribe(n=>{this.WorkFields=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0645\u0627\u0643\u0646 \u0627\u0644\u0639\u0645\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxCodeForCustomers(e,i){this.contractService.getMaxCustomerCode(e,i).subscribe(n=>{if(this.maxCustomerCode=n.max,!this.id){let a=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({code:this.maxCustomerCode,username:a,password:a,contacts:{email:"E"+a+"@changeit.com"}})}})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(e){this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,e.value)}getGovernoratePerCountry(e,i,n){this.Governorates=[],this.Cities=[],this.Areas=[],this.codesService.getSubForParentAndRelated(e,i,this.governorate_const,n).subscribe(a=>{this.Governorates=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate_EstOwner(e){this.getGovernoratePerCountry_EstOwner(this.curCOMId,this.account.periorty,e.value)}getGovernoratePerCountry_EstOwner(e,i,n){this.Governorates_EstOwner=[],this.Cities_EstOwner=[],this.Areas_EstOwner=[],this.codesService.getSubForParentAndRelated(e,i,this.governorate_const,n).subscribe(a=>{this.Governorates_EstOwner=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity_EstOwner(e){this.getCityPerGoverno_EstOwner(this.curCOMId,this.account.periorty,e.value)}getCityPerGoverno_EstOwner(e,i,n){this.Cities_EstOwner=[],this.Areas_EstOwner=[],this.codesService.getSubForParentAndRelated(e,i,this.city_const,n).subscribe(a=>{this.Cities_EstOwner=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(e){this.getCityPerGoverno(this.curCOMId,this.account.periorty,e.value)}getCityPerGoverno(e,i,n){this.Cities=[],this.Areas=[],this.codesService.getSubForParentAndRelated(e,i,this.city_const,n).subscribe(a=>{this.Cities=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria_EstOwner(e){this.getAreaPerCity_EstOwner(this.curCOMId,this.account.periorty,e.value)}getAreaPerCity_EstOwner(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.region_const,n).subscribe(a=>{this.Areas_EstOwner=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(e){this.getAreaPerCity(this.curCOMId,this.account.periorty,e.value)}getAreaPerCity(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.region_const,n).subscribe(a=>{this.Areas=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllBuildings(e,i){this.unitsService.getAllBuilding(e,i).subscribe(n=>{this.AllBuildings=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.value)}getBuildingPerBranch(e,i,n){this.AllBuildings=[],this.AllUnits=[],this.unitsService.getBuildingsPerBranch(e,i,n).subscribe(a=>{this.AllBuildings=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuild(e){this.getAllUnits(this.curCOMId,this.account.periorty,e.value)}getAllUnits(e,i,n){this.unitsService.getAllUnitsPerBuilding(e,i,n,"E").subscribe(a=>{this.AllUnits=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitData(e){this.getUnitFullData(e.value)}getUnitFullData(e){this.unitsService.getOneUnit(e).subscribe(i=>{this.electricUnit="null"==i.UNTElectricityNumber?"":i.UNTElectricityNumber,this.waterUnit="null"==i.UNTWaterNumber?"":i.UNTWaterNumber,this.gasUnit="null"==i.UNTGasNumber?"":i.UNTGasNumber},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("HTML.ChooseImageFile").subscribe(e=>{this.chooseFile=e}),this.translateService.get("HTML.ChoosePDFFile").subscribe(e=>{this.chooseFilePDF=e}),this.translateService.get("HTML.ChoosePDFFile_Brand").subscribe(e=>{this.chooseFilePDFBrand=e}),this.translateService.get("HTML.ChoosePDFFile_NatId").subscribe(e=>{this.chooseFilePDFNatID=e}),this.translateService.get("HTML.ChooseRegisterImageFile").subscribe(e=>{this.chooseRegisterFilePDF=e}),this.translateService.get("MESSAGE.ImageSelected").subscribe(e=>{this.imageFileSelected=e}),this.translateService.get("MESSAGE.PDFSelected").subscribe(e=>{this.pdfFileSelected=e}),this.translateService.get("MESSAGE.OtherFileSelected").subscribe(e=>{this.otherFileSelected=e})}}function sr(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-button-toggle",21),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.gotoNewContract())}),t.TgZ(1,"mat-icon"),t._uU(2,"note_add"),t.qZA()()}}Pt.\u0275fac=function(e){return new(e||Pt)(t.Y36(mt.y),t.Y36(it.d),t.Y36(P.gz),t.Y36(Ot.d),t.Y36(h.X),t.Y36(d.QS),t.Y36(N.C),t.Y36(ct.v),t.Y36(P.F0),t.Y36(y.uw),t.Y36(tt.U),t.Y36(I.Z),t.Y36(pt.g),t.Y36(O.sK),t.Y36(H.W),t.Y36(Wt.H7),t.Y36(R.ux))},Pt.\u0275cmp=t.Xpm({type:Pt,selectors:[["app-customers-details-companies"]],features:[t._Bn([H.W])],decls:479,vars:303,consts:[["mat-dialog-title",""],[4,"ngIf"],[1,"user-form",3,"formGroup","keydown.enter"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["appearance","outline",1,"w-20"],["matInput","","formControlName","code","required",""],["appearance","outline",1,"w-30"],["matInput","","formControlName","username","required",""],["class","w-45",4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstname","required",""],["matInput","","formControlName","lastname","required",""],["matInput","","formControlName","mobile","required",""],["formControlName","Nationality_CTTKeyField","id","nationalityOpSel",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["formControlName","CUSEInvoiceType"],["value","G","labelPosition","after"],["value","P","labelPosition","after"],["value","B","labelPosition","after"],["fxLayout","row"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","image","name","image","id","fileInput","type","file","accept","image/*",1,"file-input",3,"change"],["id","customButton",1,"custom-button",3,"click"],["formGroupName","profile",3,"label"],["formControlName","gender"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],[1,"w-50"],["matInput","","formControlName","birthday","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["formControlName","current_branch","id","curbranchContOpSel","required","",3,"placeholder","selectionChange"],["appearance","outline",1,"w-50"],["formControlName","curbuilding","id","buildOpSel",3,"placeholder","selectionChange"],["appearance","outline",1,"w-45"],["formControlName","curunit","id","unitOpSel",3,"placeholder","selectionChange"],["formGroupName","work",3,"label"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline","formControlName","WorkPlace_CTTKeyField","id","workplOpSel",1,"w-100",3,"placeholder"],["appearance","outline","formControlName","Job_CTTKeyField","id","jobsOpSel",1,"w-100",3,"placeholder"],["formControlName","nationalIDType"],["value","N","labelPosition","after"],["value","K","labelPosition","after"],["value","S","labelPosition","after"],["value","O","labelPosition","after"],["fxFlex","100","fxFlex.gt-sm","60.0",1,"px-1"],["matInput","","formControlName","company","required",""],["fxFlex","100","fxFlex.gt-sm","40.0",1,"px-1"],["matInput","","formControlName","nationalID","required",""],["appearance","outline",1,"w-80"],["matInput","","formControlName","CUSAddress_EstOwner"],["appearance","outline",1,"w-19"],["matInput","","formControlName","CUSShortAddress_EstOwner"],["appearance","outline",1,"w-25"],["formControlName","Country_CTTKeyField_EstOwner","id","own_countOpSel",3,"placeholder","selectionChange"],["formControlName","Governorate_CTTKeyField_EstOwner","id","own_governoOpSel",3,"placeholder","selectionChange"],["appearance","outline",1,"w-24"],["formControlName","City_CTTKeyField_EstOwner","id","own_cityOpSel",3,"placeholder","selectionChange"],["formControlName","Area_CTTKeyField_EstOwner","id","own_areaOpSel",3,"placeholder"],["appearance","outline",1,"w-40"],["matInput","","formControlName","CUSStreetName_EstOwner"],["matInput","","formControlName","CUSBuildingNumber_EstOwner"],["matInput","","formControlName","CUSZibCode_EstOwner"],["matInput","","formControlName","CUSBuildingSubNumber_EstOwner"],["type","file","accept","image/*,.pdf","id","howiaFileInput",1,"file-input",3,"change"],["id","idCustomButton",1,"custom-button",3,"click"],["formGroupName","business",3,"label"],["fxLayout","column","fxLayoutGap","10px grid",1,"form-field-outer"],["matInput","","formControlName","CUSEstablishmentName"],["fxFlex","100","fxFlex.gt-sm","25.0",1,"px-1"],["matInput","","formControlName","CUSTaxNumber"],["matInput","","formControlName","CUSCommercialRegister"],["matInput","","formControlName","CUSCoRegisterOwnerName"],["matInput","","formControlName","CUSCoRegisterManagerName"],["fxFlex","100","fxFlex.gt-sm","20.0",1,"px-1"],["matInput","","formControlName","CUSUnifiedNumber"],["appearance","outline","formControlName","workField_CTTKeyField","id","workfieldplOpSel",1,"w-100",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","30.0",1,"px-1"],["matInput","","formControlName","CUSBrandName"],["matInput","","formControlName","CUSFamousName"],["type","file","accept","image/*,.pdf","id","registerFileInput",1,"file-input",3,"change"],["id","registerCustomButton",1,"custom-button",3,"click"],["formGroupName","contacts",3,"label"],["matInput","","formControlName","homephone"],["matInput","","formControlName","workphone"],["matInput","","formControlName","email","required","",3,"placeholder"],["matInput","","formControlName","address"],["matInput","","formControlName","CUSShortAddress"],["formControlName","country","id","countrOpSel",3,"placeholder","selectionChange"],["formControlName","governorate","id","governoOpSel",3,"placeholder","selectionChange"],["formControlName","city","id","cityOpSel",3,"placeholder","selectionChange"],["formControlName","area","id","areaOpSel",3,"placeholder"],["matInput","","formControlName","CUSStreetName"],["matInput","","formControlName","CUSBuildingNumber"],["matInput","","formControlName","CUSZibCode"],["matInput","","formControlName","CUSBuildingSubNumber"],["formGroupName","social",3,"label"],["matInput","","formControlName","facebook"],["matInput","","formControlName","twitter"],["matInput","","formControlName","google"],["formGroupName","settings",3,"label",4,"ngIf"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"w-45"],["matInput","","formControlName","password","required","",3,"type"],["matSuffix","",3,"click"],["id","iddownloadiconalone","target","_blank",3,"href"],[4,"ngIf","ngIfElse"],["pdfPreview",""],[2,"max-width","100%","height","250px",3,"src"],["frameborder","0",2,"width","100%","height","250px",3,"src"],["id","registerdownloadicon","target","_blank",3,"href"],["pdfRegisterPreview",""],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"h1",0),t.YNc(1,ga,3,3,"span",1),t.YNc(2,_a,3,3,"span",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("keydown.enter",function(l){return i.onEnter(l)}),t.TgZ(6,"mat-tab-group",3)(7,"mat-tab",4),t.ALo(8,"translate"),t.TgZ(9,"div",5)(10,"div",6),t._UZ(11,"mat-label"),t.TgZ(12,"div",7)(13,"mat-form-field",8)(14,"mat-label")(15,"mat-icon"),t._uU(16,"person"),t.qZA(),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",9),t.YNc(20,Ca,2,0,"mat-error",1),t.YNc(21,fa,2,0,"mat-error",1),t.qZA(),t.TgZ(22,"mat-form-field",10)(23,"mat-label")(24,"mat-icon"),t._uU(25,"person"),t.qZA(),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",11),t.qZA(),t.YNc(29,va,11,7,"mat-form-field",12),t.qZA()(),t.TgZ(30,"div",7)(31,"div",13)(32,"mat-form-field",14)(33,"mat-label")(34,"mat-icon"),t._uU(35,"person"),t.qZA(),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",15),t.YNc(39,Aa,2,0,"mat-error",1),t.qZA()(),t.TgZ(40,"div",13)(41,"mat-form-field",14)(42,"mat-label")(43,"mat-icon"),t._uU(44,"person"),t.qZA(),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"input",16),t.YNc(48,ya,2,0,"mat-error",1),t.qZA()()(),t.TgZ(49,"div",7)(50,"div",13)(51,"mat-form-field",14)(52,"mat-label"),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"mat-hint"),t._uU(56,"966505602221"),t.qZA(),t._UZ(57,"input",17),t.YNc(58,Za,2,0,"mat-error",1),t.qZA()(),t.TgZ(59,"div",13)(60,"mat-form-field",14)(61,"mat-label"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"mat-select",18),t.ALo(65,"translate"),t.TgZ(66,"mat-option",19),t._uU(67,"-"),t.qZA(),t.YNc(68,Oa,2,2,"mat-option",20),t.qZA()()()(),t.TgZ(69,"div",7)(70,"div",21)(71,"mat-label"),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"mat-radio-group",22)(75,"mat-radio-button",23),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"mat-radio-button",24),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"mat-radio-button",25),t._uU(82),t.ALo(83,"translate"),t.qZA()()()(),t.TgZ(84,"div",26)(85,"div",27),t._UZ(86,"img",28),t.TgZ(87,"input",29),t.NdJ("change",function(l){return i.handelCUSImgInput(l.target.files)}),t.qZA(),t.YNc(88,xa,2,1,"div",1),t.TgZ(89,"button",30),t.NdJ("click",function(){return i.callFileInput()}),t._uU(90),t.ALo(91,"translate"),t.qZA()()()()(),t.TgZ(92,"mat-tab",31),t.ALo(93,"translate"),t.TgZ(94,"div",5)(95,"div",7)(96,"mat-radio-group",32)(97,"mat-radio-button",33),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"mat-radio-button",34),t._uU(101),t.ALo(102,"translate"),t.qZA()(),t.TgZ(103,"mat-form-field",35)(104,"mat-label"),t._uU(105),t.ALo(106,"translate"),t.qZA(),t._UZ(107,"input",36)(108,"mat-datepicker-toggle",37)(109,"mat-datepicker",null,38),t.qZA()(),t.TgZ(111,"div",7)(112,"div",13)(113,"mat-form-field",14)(114,"mat-label"),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"mat-select",39),t.NdJ("selectionChange",function(l){return i.getBuildings(l)}),t.ALo(118,"translate"),t.TgZ(119,"mat-option",19),t._uU(120,"-"),t.qZA(),t.YNc(121,Ua,2,2,"mat-option",20),t.qZA()()()(),t.TgZ(122,"div",7)(123,"mat-form-field",40)(124,"mat-label"),t._uU(125),t.ALo(126,"translate"),t.qZA(),t.TgZ(127,"mat-select",41),t.NdJ("selectionChange",function(l){return i.getUnitsPerBuild(l)}),t.ALo(128,"translate"),t.TgZ(129,"mat-option",19),t._uU(130,"-"),t.qZA(),t.YNc(131,Sa,2,2,"mat-option",20),t.qZA()(),t.TgZ(132,"mat-form-field",42)(133,"mat-label"),t._uU(134),t.ALo(135,"translate"),t.qZA(),t.TgZ(136,"mat-select",43),t.NdJ("selectionChange",function(l){return i.getUnitData(l)}),t.ALo(137,"translate"),t.TgZ(138,"mat-option",19),t._uU(139,"-"),t.qZA(),t.YNc(140,wa,2,2,"mat-option",20),t.qZA()()(),t.TgZ(141,"div",7),t.YNc(142,Na,3,3,"h4",1),t.TgZ(143,"h3"),t._uU(144),t.qZA(),t.YNc(145,Fa,3,3,"h4",1),t.TgZ(146,"h3"),t._uU(147),t.qZA(),t.YNc(148,Ia,3,3,"h4",1),t.TgZ(149,"h3"),t._uU(150),t.qZA()()()(),t.TgZ(151,"mat-tab",44),t.ALo(152,"translate"),t.TgZ(153,"div",5)(154,"div",6),t._UZ(155,"mat-label"),t.TgZ(156,"div",7)(157,"div",45)(158,"label"),t._uU(159),t.ALo(160,"translate"),t.qZA(),t.TgZ(161,"ng-select",46),t.ALo(162,"translate"),t.YNc(163,Da,2,2,"ng-option",20),t.qZA()(),t.TgZ(164,"div",45)(165,"label"),t._uU(166),t.ALo(167,"translate"),t.qZA(),t.TgZ(168,"ng-select",47),t.ALo(169,"translate"),t.YNc(170,La,2,2,"ng-option",20),t.qZA()()(),t._UZ(171,"mat-divider")(172,"mat-divider"),t.qZA(),t.TgZ(173,"mat-radio-group",48)(174,"mat-radio-button",49),t._uU(175),t.ALo(176,"translate"),t.qZA(),t.TgZ(177,"mat-radio-button",34),t._uU(178),t.ALo(179,"translate"),t.qZA(),t.TgZ(180,"mat-radio-button",50),t._uU(181),t.ALo(182,"translate"),t.qZA(),t.TgZ(183,"mat-radio-button",51),t._uU(184),t.ALo(185,"translate"),t.qZA(),t.TgZ(186,"mat-radio-button",52),t._uU(187),t.ALo(188,"translate"),t.qZA()(),t.TgZ(189,"div",7)(190,"div",53)(191,"mat-form-field",14)(192,"mat-label"),t._uU(193),t.ALo(194,"translate"),t.qZA(),t._UZ(195,"input",54),t.qZA()(),t.TgZ(196,"div",55)(197,"mat-form-field",14)(198,"mat-label"),t._uU(199),t.ALo(200,"translate"),t.qZA(),t._UZ(201,"input",56),t.qZA()()(),t.TgZ(202,"div",7)(203,"mat-form-field",57)(204,"mat-label"),t._uU(205),t.ALo(206,"translate"),t.qZA(),t._UZ(207,"input",58),t.qZA(),t.TgZ(208,"mat-form-field",59)(209,"mat-label"),t._uU(210),t.ALo(211,"translate"),t.qZA(),t._UZ(212,"input",60),t.qZA()(),t.TgZ(213,"div",7)(214,"mat-form-field",61)(215,"mat-label"),t._uU(216),t.ALo(217,"translate"),t.qZA(),t.TgZ(218,"mat-select",62),t.NdJ("selectionChange",function(l){return i.getGovernorate_EstOwner(l)}),t.ALo(219,"translate"),t.TgZ(220,"mat-option",19),t._uU(221,"-"),t.qZA(),t.YNc(222,Ma,2,2,"mat-option",20),t.qZA()(),t.TgZ(223,"mat-form-field",61)(224,"mat-label"),t._uU(225),t.ALo(226,"translate"),t.qZA(),t.TgZ(227,"mat-select",63),t.NdJ("selectionChange",function(l){return i.getCity_EstOwner(l)}),t.ALo(228,"translate"),t.TgZ(229,"mat-option",19),t._uU(230,"-"),t.qZA(),t.YNc(231,Ra,2,2,"mat-option",20),t.qZA()(),t.TgZ(232,"mat-form-field",64)(233,"mat-label"),t._uU(234),t.ALo(235,"translate"),t.qZA(),t.TgZ(236,"mat-select",65),t.NdJ("selectionChange",function(l){return i.getAria_EstOwner(l)}),t.ALo(237,"translate"),t.TgZ(238,"mat-option",19),t._uU(239,"-"),t.qZA(),t.YNc(240,qa,2,2,"mat-option",20),t.qZA()(),t.TgZ(241,"mat-form-field",61)(242,"mat-label"),t._uU(243),t.ALo(244,"translate"),t.qZA(),t.TgZ(245,"mat-select",66),t.ALo(246,"translate"),t.TgZ(247,"mat-option",19),t._uU(248,"-"),t.qZA(),t.YNc(249,Ea,2,2,"mat-option",20),t.qZA()()(),t.TgZ(250,"div",7)(251,"mat-form-field",67)(252,"mat-label"),t._uU(253),t.ALo(254,"translate"),t.qZA(),t._UZ(255,"input",68),t.qZA(),t.TgZ(256,"mat-form-field",8)(257,"mat-label"),t._uU(258),t.ALo(259,"translate"),t.qZA(),t._UZ(260,"input",69),t.qZA(),t.TgZ(261,"mat-form-field",59)(262,"mat-label"),t._uU(263),t.ALo(264,"translate"),t.qZA(),t._UZ(265,"input",70),t.qZA(),t.TgZ(266,"mat-form-field",8)(267,"mat-label"),t._uU(268),t.ALo(269,"translate"),t.qZA(),t._UZ(270,"input",71),t.qZA()()(),t.YNc(271,Pa,4,1,"div",1),t.TgZ(272,"div",26)(273,"input",72),t.NdJ("change",function(l){return i.onFileSelected(l.target.files,l)}),t.qZA(),t.TgZ(274,"button",73),t.NdJ("click",function(){return i.callOnHowiaFileSelect()}),t._uU(275),t.ALo(276,"translate"),t.qZA(),t.YNc(277,Ka,4,2,"div",1),t.qZA()(),t.TgZ(278,"mat-tab",74),t.ALo(279,"translate"),t.TgZ(280,"div",75),t._UZ(281,"mat-label"),t.TgZ(282,"div",7)(283,"div",13)(284,"mat-form-field",14)(285,"mat-label"),t._uU(286),t.ALo(287,"translate"),t.qZA(),t._UZ(288,"input",76),t.qZA()(),t.TgZ(289,"div",77)(290,"mat-form-field",14)(291,"mat-label"),t._uU(292),t.ALo(293,"translate"),t.qZA(),t._UZ(294,"input",78),t.qZA()(),t.TgZ(295,"div",77)(296,"mat-form-field",14)(297,"mat-label"),t._uU(298),t.ALo(299,"translate"),t.qZA(),t._UZ(300,"input",79),t.qZA()()(),t.TgZ(301,"div",7)(302,"div",55)(303,"mat-form-field",14)(304,"mat-label"),t._uU(305),t.ALo(306,"translate"),t.qZA(),t._UZ(307,"input",80),t.qZA()(),t.TgZ(308,"div",55)(309,"mat-form-field",14)(310,"mat-label"),t._uU(311),t.ALo(312,"translate"),t.qZA(),t._UZ(313,"input",81),t.qZA()(),t.TgZ(314,"div",82)(315,"mat-form-field",14)(316,"mat-label"),t._uU(317),t.ALo(318,"translate"),t.qZA(),t._UZ(319,"input",83),t.qZA()()(),t.TgZ(320,"div",7)(321,"div",55)(322,"div",26)(323,"label"),t._uU(324),t.ALo(325,"translate"),t.qZA(),t.TgZ(326,"ng-select",84),t.ALo(327,"translate"),t.YNc(328,Ja,2,2,"ng-option",20),t.qZA()()(),t.TgZ(329,"div",85)(330,"mat-form-field",14)(331,"mat-label")(332,"mat-icon"),t._uU(333,"fingerprint"),t.qZA(),t._uU(334),t.ALo(335,"translate"),t.qZA(),t._UZ(336,"input",86),t.qZA()(),t.TgZ(337,"div",85)(338,"mat-form-field",14)(339,"mat-label"),t._uU(340),t.ALo(341,"translate"),t.qZA(),t._UZ(342,"input",87),t.qZA()()(),t.YNc(343,Ha,4,1,"div",1),t.TgZ(344,"div",26)(345,"input",88),t.NdJ("change",function(l){return i.onRegisterFileSelected(l.target.files,l)}),t.qZA(),t.TgZ(346,"button",89),t.NdJ("click",function(){return i.callOnRegisterFileSelect()}),t._uU(347),t.ALo(348,"translate"),t.qZA(),t.YNc(349,Ya,4,2,"div",1),t.qZA()()(),t.TgZ(350,"mat-tab",90),t.ALo(351,"translate"),t.TgZ(352,"div",75),t._UZ(353,"mat-label"),t.TgZ(354,"div",7)(355,"mat-form-field",64)(356,"mat-label"),t._uU(357),t.ALo(358,"translate"),t.qZA(),t._UZ(359,"input",91),t.qZA(),t.TgZ(360,"mat-form-field",61)(361,"mat-label"),t._uU(362),t.ALo(363,"translate"),t.qZA(),t._UZ(364,"input",92),t.qZA(),t.TgZ(365,"mat-form-field",40)(366,"mat-label"),t._uU(367),t.ALo(368,"translate"),t.qZA(),t._UZ(369,"input",93),t.ALo(370,"translate"),t.qZA()(),t.TgZ(371,"div",7)(372,"mat-form-field",57)(373,"mat-label"),t._uU(374),t.ALo(375,"translate"),t.qZA(),t._UZ(376,"input",94),t.qZA(),t.TgZ(377,"mat-form-field",59)(378,"mat-label"),t._uU(379),t.ALo(380,"translate"),t.qZA(),t._UZ(381,"input",95),t.qZA()(),t.TgZ(382,"div",7)(383,"mat-form-field",61)(384,"mat-label"),t._uU(385),t.ALo(386,"translate"),t.qZA(),t.TgZ(387,"mat-select",96),t.NdJ("selectionChange",function(l){return i.getGovernorate(l)}),t.ALo(388,"translate"),t.TgZ(389,"mat-option",19),t._uU(390,"-"),t.qZA(),t.YNc(391,Ga,2,2,"mat-option",20),t.qZA()(),t.TgZ(392,"mat-form-field",61)(393,"mat-label"),t._uU(394),t.ALo(395,"translate"),t.qZA(),t.TgZ(396,"mat-select",97),t.NdJ("selectionChange",function(l){return i.getCity(l)}),t.ALo(397,"translate"),t.TgZ(398,"mat-option",19),t._uU(399,"-"),t.qZA(),t.YNc(400,Qa,2,2,"mat-option",20),t.qZA()(),t.TgZ(401,"mat-form-field",64)(402,"mat-label"),t._uU(403),t.ALo(404,"translate"),t.qZA(),t.TgZ(405,"mat-select",98),t.NdJ("selectionChange",function(l){return i.getAria(l)}),t.ALo(406,"translate"),t.TgZ(407,"mat-option",19),t._uU(408,"-"),t.qZA(),t.YNc(409,ja,2,2,"mat-option",20),t.qZA()(),t.TgZ(410,"mat-form-field",61)(411,"mat-label"),t._uU(412),t.ALo(413,"translate"),t.qZA(),t.TgZ(414,"mat-select",99),t.ALo(415,"translate"),t.TgZ(416,"mat-option",19),t._uU(417,"-"),t.qZA(),t.YNc(418,$a,2,2,"mat-option",20),t.qZA()()(),t.TgZ(419,"div",7)(420,"mat-form-field",67)(421,"mat-label"),t._uU(422),t.ALo(423,"translate"),t.qZA(),t._UZ(424,"input",100),t.qZA(),t.TgZ(425,"mat-form-field",8)(426,"mat-label"),t._uU(427),t.ALo(428,"translate"),t.qZA(),t._UZ(429,"input",101),t.qZA(),t.TgZ(430,"mat-form-field",59)(431,"mat-label"),t._uU(432),t.ALo(433,"translate"),t.qZA(),t._UZ(434,"input",102),t.qZA(),t.TgZ(435,"mat-form-field",8)(436,"mat-label"),t._uU(437),t.ALo(438,"translate"),t.qZA(),t._UZ(439,"input",103),t.qZA()()()(),t.TgZ(440,"mat-tab",104),t.ALo(441,"translate"),t.TgZ(442,"div",6),t._UZ(443,"mat-label"),t.TgZ(444,"div",5)(445,"mat-form-field",14)(446,"mat-label"),t._uU(447,"Facebook"),t.qZA(),t._UZ(448,"input",105),t.qZA(),t.TgZ(449,"mat-form-field",14)(450,"mat-label"),t._uU(451,"Twitter"),t.qZA(),t._UZ(452,"input",106),t.qZA(),t.TgZ(453,"mat-form-field",14)(454,"mat-label"),t._uU(455,"Google"),t.qZA(),t._UZ(456,"input",107),t.qZA()()()(),t.YNc(457,za,11,9,"mat-tab",108),t.TgZ(458,"mat-tab",109),t.ALo(459,"translate"),t.TgZ(460,"div",110)(461,"div",27),t._UZ(462,"img",28),t.TgZ(463,"input",111,112),t.NdJ("change",function(l){return i.onFileChange(l.target.files)}),t.qZA(),t.TgZ(465,"button",113),t.NdJ("click",function(){t.CHM(n);const l=t.MAs(464);return t.KtG(l.click())}),t._uU(466),t.ALo(467,"translate"),t.qZA()(),t._UZ(468,"mat-divider")(469,"input-file",114),t.qZA()()()(),t._UZ(470,"br"),t.TgZ(471,"div",115)(472,"div",7),t.YNc(473,er,3,4,"button",116),t.YNc(474,ir,4,4,"button",117),t.YNc(475,nr,4,4,"button",117),t.YNc(476,or,4,4,"button",117),t.YNc(477,ar,4,4,"button",117),t.YNc(478,rr,3,4,"button",117),t.qZA()()}if(2&e){const n=t.MAs(110);t.xp6(1),t.Q6J("ngIf",!i.CUS.id),t.xp6(1),t.Q6J("ngIf",i.CUS.id),t.xp6(1),t.hij(" ",t.lcZ(4,133,"HTML.TENANT"),"\n"),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(8,135,"HTML.TAB_BASIC")),t.xp6(10),t.hij(" ",t.lcZ(18,137,"HTML.CODE"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.code.errors?null:i.form.controls.code.errors.required),t.xp6(1),t.Q6J("ngIf",i.form.controls.code.hasError("minlength")),t.xp6(5),t.hij(" ",t.lcZ(27,139,"HTML.USERNAME"),""),t.xp6(3),t.Q6J("ngIf",!i.CUS.id),t.xp6(7),t.hij(" ",t.lcZ(37,141,"HTML.FIRST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.firstname.errors?null:i.form.controls.firstname.errors.required),t.xp6(6),t.hij(" ",t.lcZ(46,143,"HTML.LAST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.lastname.errors?null:i.form.controls.lastname.errors.required),t.xp6(5),t.Oqu(t.lcZ(54,145,"HTML.MOBILE")),t.xp6(5),t.Q6J("ngIf",null==i.form.controls.mobile.errors?null:i.form.controls.mobile.errors.required),t.xp6(4),t.Oqu(t.lcZ(63,147,"HTML.Nationality")),t.xp6(2),t.s9C("placeholder",t.lcZ(65,149,"HTML.Nationality")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(4),t.Oqu(t.lcZ(73,151,"HTML.EInvoiceType")),t.xp6(4),t.Oqu(t.lcZ(77,153,"HTML.EType_Without")),t.xp6(3),t.Oqu(t.lcZ(80,155,"HTML.EType_Personal")),t.xp6(3),t.Oqu(t.lcZ(83,157,"HTML.EType_Business")),t.xp6(4),t.Q6J("src",i.defaultCusImage,t.LSH),t.xp6(2),t.Q6J("ngIf",i.fileType),t.xp6(2),t.Oqu(t.lcZ(91,159,"HTML.ChooseImageFile")),t.xp6(2),t.s9C("label",t.lcZ(93,161,"HTML.TAB_PERSONAL")),t.xp6(6),t.Oqu(t.lcZ(99,163,"HTML.MALE")),t.xp6(3),t.Oqu(t.lcZ(102,165,"HTML.FEMALE")),t.xp6(4),t.Oqu(t.lcZ(106,167,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(7),t.hij(" ",t.lcZ(116,169,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(118,171,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.Oqu(t.lcZ(126,173,"HTML.BUILDING")),t.xp6(2),t.s9C("placeholder",t.lcZ(128,175,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuildings),t.xp6(3),t.Oqu(t.lcZ(135,177,"HTML.UNIT")),t.xp6(2),t.s9C("placeholder",t.lcZ(137,179,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnits),t.xp6(2),t.Q6J("ngIf",i.electricUnit),t.xp6(2),t.Oqu(i.electricUnit),t.xp6(1),t.Q6J("ngIf",i.waterUnit),t.xp6(2),t.Oqu(i.waterUnit),t.xp6(1),t.Q6J("ngIf",i.gasUnit),t.xp6(2),t.Oqu(i.gasUnit),t.xp6(1),t.s9C("label",t.lcZ(152,181,"HTML.EstablishmentOwner")),t.xp6(8),t.hij(" ",t.lcZ(160,183,"HTML.WorkPlace"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(162,185,"HTML.WorkPlace")),t.xp6(2),t.Q6J("ngForOf",i.WorkPlaces),t.xp6(3),t.hij(" ",t.lcZ(167,187,"HTML.Job"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(169,189,"HTML.Job")),t.xp6(2),t.Q6J("ngForOf",i.Jobs),t.xp6(5),t.Oqu(t.lcZ(176,191,"OPTIONS.NATIONAL_ID")),t.xp6(3),t.Oqu(t.lcZ(179,193,"OPTIONS.FOREIGN_ID")),t.xp6(3),t.Oqu(t.lcZ(182,195,"OPTIONS.GULF_ID")),t.xp6(3),t.Oqu(t.lcZ(185,197,"OPTIONS.SPECIAL_EQAMA")),t.xp6(3),t.Oqu(t.lcZ(188,199,"OPTIONS.OTHER")),t.xp6(6),t.Oqu(t.lcZ(194,201,"HTML.EstablishmentOwnerName")),t.xp6(6),t.Oqu(t.lcZ(200,203,"HTML.IDNUMBER")),t.xp6(6),t.Oqu(t.lcZ(206,205,"HTML.ADDRESS")),t.xp6(5),t.Oqu(t.lcZ(211,207,"HTML.ShortAddress")),t.xp6(6),t.Oqu(t.lcZ(217,209,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(219,211,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(3),t.Oqu(t.lcZ(226,213,"HTML.GOVERN")),t.xp6(2),t.s9C("placeholder",t.lcZ(228,215,"HTML.GOVERN")),t.xp6(4),t.Q6J("ngForOf",i.Governorates_EstOwner),t.xp6(3),t.Oqu(t.lcZ(235,217,"HTML.CITY")),t.xp6(2),t.s9C("placeholder",t.lcZ(237,219,"HTML.CITY")),t.xp6(4),t.Q6J("ngForOf",i.Cities_EstOwner),t.xp6(3),t.Oqu(t.lcZ(244,221,"HTML.REGION")),t.xp6(2),t.s9C("placeholder",t.lcZ(246,223,"HTML.REGION")),t.xp6(4),t.Q6J("ngForOf",i.Areas_EstOwner),t.xp6(4),t.Oqu(t.lcZ(254,225,"HTML.STREET_NAME")),t.xp6(5),t.Oqu(t.lcZ(259,227,"HTML.BUILDING_NUMBER")),t.xp6(5),t.Oqu(t.lcZ(264,229,"HTML.ZIP")),t.xp6(5),t.Oqu(t.lcZ(269,231,"HTML.BUILDING_SubNUMBER")),t.xp6(3),t.Q6J("ngIf",i.CUS.id&&i.natIDfileToUpload),t.xp6(4),t.hij(" ",t.lcZ(276,233,"HTML.ChooseHowiaImageFile"),""),t.xp6(2),t.Q6J("ngIf",i.fileUrl),t.xp6(1),t.s9C("label",t.lcZ(279,235,"HTML.BusinessTab")),t.xp6(8),t.Oqu(t.lcZ(287,237,"HTML.EstablishmentName")),t.xp6(6),t.Oqu(t.lcZ(293,239,"HTML.TaxNumber")),t.xp6(6),t.Oqu(t.lcZ(299,241,"HTML.CommercialRegister")),t.xp6(7),t.Oqu(t.lcZ(306,243,"HTML.CoRegisterOwnerName")),t.xp6(6),t.Oqu(t.lcZ(312,245,"HTML.CoRegisterManagerName")),t.xp6(6),t.Oqu(t.lcZ(318,247,"HTML.UnifiedNumber")),t.xp6(7),t.hij(" ",t.lcZ(325,249,"HTML.workField"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(327,251,"HTML.workField")),t.xp6(2),t.Q6J("ngForOf",i.WorkFields),t.xp6(6),t.hij(" ",t.lcZ(335,253,"HTML.TradeMark"),""),t.xp6(6),t.hij(" ",t.lcZ(341,255,"HTML.FamousName"),""),t.xp6(3),t.Q6J("ngIf",i.CUS.id&&i.registerFileToUpload),t.xp6(4),t.hij(" ",t.lcZ(348,257,"HTML.ChooseRegisterImageFile"),""),t.xp6(2),t.Q6J("ngIf",i.registerFileUrl),t.xp6(1),t.s9C("label",t.lcZ(351,259,"HTML.TAB_CONTACTS")),t.xp6(7),t.Oqu(t.lcZ(358,261,"HTML.HOME_PHONE")),t.xp6(5),t.Oqu(t.lcZ(363,263,"HTML.WORK_PHONE")),t.xp6(5),t.Oqu(t.lcZ(368,265,"HTML.EMAIL")),t.xp6(2),t.s9C("placeholder",t.lcZ(370,267,"HTML.EMAIL")),t.xp6(5),t.Oqu(t.lcZ(375,269,"HTML.ADDRESS")),t.xp6(5),t.Oqu(t.lcZ(380,271,"HTML.ShortAddress")),t.xp6(6),t.Oqu(t.lcZ(386,273,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(388,275,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(3),t.Oqu(t.lcZ(395,277,"HTML.GOVERN")),t.xp6(2),t.s9C("placeholder",t.lcZ(397,279,"HTML.GOVERN")),t.xp6(4),t.Q6J("ngForOf",i.Governorates),t.xp6(3),t.Oqu(t.lcZ(404,281,"HTML.CITY")),t.xp6(2),t.s9C("placeholder",t.lcZ(406,283,"HTML.CITY")),t.xp6(4),t.Q6J("ngForOf",i.Cities),t.xp6(3),t.Oqu(t.lcZ(413,285,"HTML.REGION")),t.xp6(2),t.s9C("placeholder",t.lcZ(415,287,"HTML.REGION")),t.xp6(4),t.Q6J("ngForOf",i.Areas),t.xp6(4),t.Oqu(t.lcZ(423,289,"HTML.STREET_NAME")),t.xp6(5),t.Oqu(t.lcZ(428,291,"HTML.BUILDING_NUMBER")),t.xp6(5),t.Oqu(t.lcZ(433,293,"HTML.ZIP")),t.xp6(5),t.Oqu(t.lcZ(438,295,"HTML.BUILDING_SubNUMBER")),t.xp6(3),t.s9C("label",t.lcZ(441,297,"HTML.TAB_SOCIAL_LIFE")),t.xp6(17),t.Q6J("ngIf",i.account.periorty>0),t.xp6(1),t.s9C("label",t.lcZ(459,299,"HTML.TAB_DOCS")),t.xp6(4),t.Q6J("src",i.defaultDocImage,t.LSH),t.xp6(4),t.Oqu(t.lcZ(467,301,"HTML.AddPic")),t.xp6(7),t.Q6J("ngIf",i.can("change_tenant")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("view_tenantrelative")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("view_tenant_workrelated")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("view_tenant_workrelated_agency")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("change_tenant_password")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("confirm_tenant"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,Ut.VQ,Ut.U0,C.sg,C.O5,d.sg,d.u,d.x0,T.xw,T.SQ,T.Wh,T.yH,q.ey,w.lW,Mt.oG,Q.Mq,Q.hl,Q.nW,y.ZT,y.uh,y.H8,$.Hw,Z.Nt,v.KE,v.hX,v.bx,v.TO,v.R9,X.d,D.gD,bt.uX,bt.SP,Ht.tW,At.w9,At.jq,O.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.file-input{display:none}.custom-button{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px;height:40px}.custom-button:hover{background-color:#0056b3}\n"],encapsulation:2});const lr=function(o){return["/contracts/contractComplex-add/",o]};function cr(o,e){if(1&o&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,lr,i.id))}}function ur(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.removeContract(a.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}const dr=function(o){return["/contracts/installment-list/",o]};function mr(o,e){if(1&o&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,dr,i.id))}}const pr=function(o){return["/contracts/contractComplex-add/renew/",o]};function hr(o,e){if(1&o&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"autorenew"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.ReNewContract")),t.Q6J("routerLink",t.VKq(4,pr,i.id))}}function gr(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.leaveTenant(a,a.customer_Name))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"airport_shuttle"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.LEAVE"))}function _r(o,e){if(1&o&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t._UZ(3,"br"),t._uU(4),t.qZA(),t.TgZ(5,"div",23),t._uU(6),t.qZA(),t.TgZ(7,"div",23),t._uU(8),t.qZA(),t.TgZ(9,"div",23),t._uU(10),t.qZA(),t.TgZ(11,"div",23),t._uU(12),t.qZA(),t.TgZ(13,"div",23),t._uU(14),t.qZA(),t.TgZ(15,"div",23),t._uU(16),t.qZA(),t.TgZ(17,"div",23)(18,"div",24),t.YNc(19,cr,4,6,"a",25),t.YNc(20,ur,4,3,"button",26),t.YNc(21,mr,4,6,"a",25),t.YNc(22,hr,4,6,"a",25),t.YNc(23,gr,4,3,"button",26),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.Tol(n.statusColor[i.RCOContractStatus]),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.unit_UnitNumber),t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",i.customer_Mobile," "),t.xp6(2),t.hij(" ",i.RCOEndDate," "),t.xp6(2),t.AsE(" (",i.RCOCode," / ",i.RCOSubCode,") "),t.xp6(2),t.hij(" ",i.RCOEjarCode," "),t.xp6(3),t.Q6J("ngIf",n.can("view_onecontract")||0==n.account.periorty),t.xp6(1),t.Q6J("ngIf",n.can("delete_rentcontracts")),t.xp6(1),t.Q6J("ngIf",n.can("view_contractinstallments")||0==n.account.periorty),t.xp6(1),t.Q6J("ngIf",n.can("view_renewcontract")&&"N"==i.RCOContractStatus),t.xp6(1),t.Q6J("ngIf",n.can("view_tenantleave"))}}function Cr(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",29)(1,"div",30)(2,"mat-card",31)(3,"pagination-controls",32),t.NdJ("pageChange",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(a))}),t.qZA()()()()}}function fr(o,e){1&o&&(t.TgZ(0,"div",33),t._UZ(1,"mat-spinner",34),t.qZA())}const Tr=function(o,e){return{itemsPerPage:o,currentPage:e}};class kt{constructor(e,i,n,a,l,p,f,A,S,U,M){this.transferService=e,this.dataService=i,this.appSettings=n,this.activatedRoute=a,this.dialog=l,this.contractService=p,this.router=f,this.global=A,this.localStore=S,this.translateService=U,this.snackBar=M,this.statusColor={N:"make-white",R:"make-gold",F:"make-yellowgreen",C:"make-yellow"},this.account=new lt.n,this.count=4,this.userPerm=[],this.settings=this.appSettings.settings}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.contractInsuranceValueRequired=this.appSetup.APSContractInsuranceValueRequired,this.contractSeekingValueRequired=this.appSetup.APSContractSeekingValueRequired,this.insuranceValueInAccountStatements=this.appSetup.APSInsuranceValueInAccountStatements,this.seekingValueInAccountStatements=this.appSetup.APSSeekingValueInAccountStatements,this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.contForTenant=this.activatedRoute.params.subscribe(e=>{e.tenantid?(this.idForTenant=+e.tenantid,console.log("params['tenantid']:: "+this.idForTenant)):this.idForTenant=0}),console.log("line 85 this.idForTenant:: "+this.idForTenant),this.prepareMsgLanguage(),this.getContracts()}}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getAllContractsMultiUnits(this.curCOMId,this.account.periorty).subscribe(e=>this.contractsAll=e):"T"==this.curUserData.is_owner?this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerOwnerMultiUnits(this.curCOMId,this.account.periorty,this.curUserData.owner_KeyField).subscribe(e=>this.contractsAll=e):"T"==this.curUserData.is_employee?("N"==this.securityForApp&&(this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerBranchMultiUnits(this.curCOMId,this.account.periorty,this.account.branch_KeyField).subscribe(e=>this.contractsAll=e)),"D"==this.securityForApp&&(this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerEmpMultiUnits(this.curCOMId,this.account.periorty,this.account.id).subscribe(e=>this.contractsAll=e))):0==this.curUserData.periorty&&(this.curCustomerID=this.account.customer_KeyField??0,this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.curCustomerID).subscribe(e=>this.contractsAll=e))}renewContract(e){console.log("===========renewContract")}leaveTenant(e,i){this.transferService.setMessage({contract_KeyField:e.id,remaining_Installments:e.remaining_Installments,contenddate:e.RCOEndDate,contvalue:e.RCOContractValue,continsurance:e.RCOInsuranceValue,leaveid:e.RCOTenantLeaveID,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,cusName:i}),null==e.RCOTenantLeaveID?(console.log("--contractRow.RCOTenantLeaveID == null--"),this.router.navigate(["contracts/tenant-leave/"])):(console.log("---ELSE-----"),this.router.navigate(["contracts/tenant-leave/"+e.RCOTenantLeaveID+"/"]))}removeContract(e){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.contractService.deleteContract(e).subscribe(a=>this.getContracts())})}contractInstallments(e){}onPageChanged(e){this.page=e,this.getContracts(),window.scrollTo(0,0)}printEInvoice(){this.router.navigate(["/contracts/print-einvoice/"])}gotoNewContract(){this.router.navigate(["/contracts/contractComplex-add/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}kt.\u0275fac=function(e){return new(e||kt)(t.Y36(mt.y),t.Y36(F.n),t.Y36(it.d),t.Y36(P.gz),t.Y36(y.uw),t.Y36(H.W),t.Y36(P.F0),t.Y36(tt.U),t.Y36(N.C),t.Y36(O.sK),t.Y36(R.ux))},kt.\u0275cmp=t.Xpm({type:kt,selectors:[["app-contract-complex-list"]],features:[t._Bn([H.W])],decls:64,vars:43,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",3,"class",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),t.YNc(4,sr,3,0,"mat-button-toggle",4),t.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),t._uU(7,"search"),t.qZA()()()(),t.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),t.NdJ("ngModelChange",function(a){return i.searchText=a}),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),t._uU(17,"view_list"),t.qZA()(),t.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),t._uU(20,"view_module"),t.qZA()()()()(),t._UZ(21,"mat-divider"),t.TgZ(22,"mat-card")(23,"div",14)(24,"h2"),t._uU(25),t.ALo(26,"translate"),t.qZA()(),t._UZ(27,"mat-divider"),t.TgZ(28,"div",15)(29,"div",16)(30,"div",17)(31,"h3"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",17)(35,"h3"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",17)(39,"h3"),t._uU(40),t.ALo(41,"translate"),t.qZA()(),t.TgZ(42,"div",17)(43,"h3"),t._uU(44),t.ALo(45,"translate"),t.qZA()(),t.TgZ(46,"div",17)(47,"h3"),t._uU(48),t.ALo(49,"translate"),t.qZA()(),t.TgZ(50,"div",17)(51,"h3"),t._uU(52),t.ALo(53,"translate"),t.qZA()(),t.TgZ(54,"div",17)(55,"h3"),t._uU(56),t.ALo(57,"translate"),t.qZA()(),t._UZ(58,"div",17),t.qZA(),t.YNc(59,_r,24,16,"div",18),t.ALo(60,"paginate"),t.ALo(61,"ContractSearchPipe"),t.qZA()(),t.YNc(62,Cr,4,0,"div",19),t.YNc(63,fr,2,0,"div",20)),2&e){const n=t.MAs(3);t.xp6(4),t.Q6J("ngIf",i.can("add_rentcontracts")),t.xp6(4),t.ekj("show","search"==n.value),t.xp6(2),t.s9C("placeholder",t.lcZ(11,16,"HTML.SEARCH_CONTRACT")),t.Q6J("ngModel",i.searchText),t.xp6(15),t.Oqu(t.lcZ(26,18,"HTML.Contract_MultiUnit_List")),t.xp6(7),t.hij(" ",t.lcZ(33,20,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(37,22,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(41,24,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(45,26,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(49,28,"HTML.ContractEndDate")," "),t.xp6(4),t.hij(" ",t.lcZ(53,30,"HTML.ContractCode")," "),t.xp6(4),t.hij(" ",t.lcZ(57,32,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(60,34,t.xi3(61,37,i.contractsAll,i.searchText),t.WLB(40,Tr,i.count,i.page))),t.xp6(3),t.Q6J("ngIf",i.contractsAll),t.xp6(1),t.Q6J("ngIf",!i.contractsAll)}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,et.LS,C.sg,C.O5,P.rH,T.xw,T.Wh,T.yH,w.Tq,w.nh,dt.A9,dt.Yi,W.a8,$.Hw,Z.Nt,v.KE,X.d,yt.Ou,rt.gM,et._s,Zt.JQ,O.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}table{width:100%}.make-gold{background-color:#fbea96}.make-yellow{background-color:#ff4500}.make-yellowgreen{background-color:#ad7020}.make-white{background-color:#fff}\n"],encapsulation:2});class br{}function vr(o,e){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function Ar(o,e){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function yr(o,e){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.UNTUnitNumber," ")}}function Zr(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function Or(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.remove(a.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function xr(o,e){if(1&o&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t.qZA(),t.TgZ(3,"div",23),t._uU(4),t.qZA(),t.TgZ(5,"div",23),t._uU(6),t.qZA(),t.TgZ(7,"div",23),t._uU(8),t.qZA(),t.TgZ(9,"div",23)(10,"div",24),t.YNc(11,Or,4,3,"button",25),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.hij("",i.build_Name," "),t.xp6(2),t.hij("",i.unit_UnitNumber," "),t.xp6(2),t.hij("",i.RCUContractValue," "),t.xp6(3),t.Q6J("ngIf",n.can("delete_rentcontractunits"))}}class ee{constructor(e,i,n,a,l,p,f,A,S,U){this.dialogRef=e,this.rcontract=i,this.atlasService=n,this.unitsService=a,this.contractService=l,this.translateService=p,this.localStore=f,this.dialog=A,this.snackBar=S,this.fb=U,this.userPerm=[],this.AllBranches=[],this.AllBuilding=[],this.AllUnitsForBuilding=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({branch_KeyField:[null,d.kI.required],build_KeyField:[null,d.kI.required],contract_KeyField:[null],owner_KeyField:[null],unit_KeyField:[null,d.kI.required],customer_KeyField:[null],RCUContractValue:[null]}),this.ContractsUnits=new br,this.curPeriority=this.rcontract.periorty,this.action="Patch",this.getAllBranches(this.curCOMId,this.curPeriority),this.getContractUnits(),this.prepareMsgLanguage()}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getContractUnits(){this.contractUnits=null,this.contractService.getUnitsForContract(this.curCOMId,this.curPeriority,this.rcontract.id).subscribe(e=>this.contractUnits=e)}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.curPeriority,e.value)}getBuildingPerBranch(e,i,n){null==n?(console.log("-----related:: "+n),this.AllBuilding=[]):this.unitsService.getBuildingsPerBranch(e,i,n).subscribe(a=>{this.AllBuilding=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(e){this.unitsService.getOneBuilding(e.value).subscribe(i=>{this.curOwnerId=i.owner_KeyField,this.dataForm.patchValue({owner_KeyField:this.curOwnerId})},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getUnitsPerBuilding(this.curCOMId,this.rcontract.periorty,e.value,"E")}getUnitsPerBuilding(e,i,n,a){this.unitsService.getAllUnitsPerBuilding(e,i,n,a).subscribe(l=>{this.AllUnitsForBuilding=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0644\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnit(e){e.value&&this.unitsService.getOneUnit(e.value).subscribe(n=>{this.dataForm.patchValue({RCUContractValue:n.UNTContractValue})},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapFormValue_toTable(){this.ContractsUnits.contract_KeyField=this.rcontract.id,this.ContractsUnits.customer_KeyField=this.rcontract.customer_KeyField,this.ContractsUnits.branch_KeyField=this.dataForm.value.branch_KeyField,this.ContractsUnits.build_KeyField=this.dataForm.value.build_KeyField,this.ContractsUnits.owner_KeyField=this.dataForm.value.owner_KeyField,this.ContractsUnits.unit_KeyField=this.dataForm.value.unit_KeyField,this.ContractsUnits.RCUContractValue=this.dataForm.value.RCUContractValue}onSave(){this.mapFormValue_toTable(),this.contractService.addUnitForContract(this.ContractsUnits).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getContractUnits()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(e){this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.unitsService.deleteBuildingForUser(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getContractUnits()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}function Ur(o,e){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function Sr(o,e){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function wr(o,e){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.AsE(" ",i.UNTUnitNumber," - ",i.UNTContractValue," ")}}function Nr(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.addSelectedUnit())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.ADD"))}}function Fr(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(i);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.removeUnit(a))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function Ir(o,e){if(1&o&&(t.TgZ(0,"div",21)(1,"div",22),t._uU(2),t.qZA(),t.TgZ(3,"div",22),t._uU(4),t.qZA(),t.TgZ(5,"div",22),t._uU(6),t.qZA(),t.TgZ(7,"div",22),t._uU(8),t.qZA(),t.TgZ(9,"div",22)(10,"div",23),t.YNc(11,Fr,4,3,"button",24),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.hij("",i.build_Name," "),t.xp6(2),t.hij("",i.unit_UnitNumber," "),t.xp6(2),t.hij("",i.RCUContractValue," "),t.xp6(3),t.Q6J("ngIf",n.can("delete_rentcontractunits"))}}ee.\u0275fac=function(e){return new(e||ee)(t.Y36(y.so),t.Y36(y.WI),t.Y36(I.Z),t.Y36(h.X),t.Y36(H.W),t.Y36(O.sK),t.Y36(N.C),t.Y36(y.uw),t.Y36(R.ux),t.Y36(d.QS))},ee.\u0275cmp=t.Xpm({type:ee,selectors:[["app-contract-complex-units"]],decls:69,vars:42,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","33.0",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","34.0",1,"px-1"],["formControlName","build_KeyField","id","build_OneOpSel",3,"placeholder","selectionChange"],["formControlName","unit_KeyField","id","unitOneOpSel",3,"placeholder","selectionChange"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",6),t.NdJ("selectionChange",function(a){return i.getBuildings(a)}),t.ALo(10,"translate"),t.TgZ(11,"mat-option",7),t._uU(12,"-"),t.qZA(),t.YNc(13,vr,2,2,"mat-option",8),t.qZA()()(),t.TgZ(14,"div",9)(15,"mat-form-field",5)(16,"mat-label"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"mat-select",10),t.NdJ("selectionChange",function(a){return i.readBuilding(a)}),t.ALo(20,"translate"),t.TgZ(21,"mat-option",7),t._uU(22,"-"),t.qZA(),t.YNc(23,Ar,2,2,"mat-option",8),t.qZA()()(),t.TgZ(24,"div",4)(25,"mat-form-field",5)(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"mat-select",11),t.NdJ("selectionChange",function(a){return i.readUnit(a)}),t.ALo(30,"translate"),t.TgZ(31,"mat-option",7),t._uU(32,"-"),t.qZA(),t.YNc(33,yr,2,2,"mat-option",8),t.qZA()()()()()(),t.TgZ(34,"div",12)(35,"div",3),t.YNc(36,Zr,4,4,"button",13),t.TgZ(37,"button",14),t.NdJ("click",function(){return i.close()}),t._uU(38),t.ALo(39,"translate"),t.qZA()()(),t._UZ(40,"mat-divider"),t.TgZ(41,"div",15)(42,"mat-dialog-content")(43,"mat-card")(44,"div",16)(45,"h2"),t._uU(46),t.ALo(47,"translate"),t.qZA()(),t._UZ(48,"mat-divider"),t.TgZ(49,"div",17)(50,"div",18)(51,"div",19)(52,"h2"),t._uU(53),t.ALo(54,"translate"),t.qZA()(),t.TgZ(55,"div",19)(56,"h2"),t._uU(57),t.ALo(58,"translate"),t.qZA()(),t.TgZ(59,"div",19)(60,"h2"),t._uU(61),t.ALo(62,"translate"),t.qZA()(),t.TgZ(63,"div",19)(64,"h2"),t._uU(65),t.ALo(66,"translate"),t.qZA()(),t._UZ(67,"div",19),t.qZA(),t.YNc(68,xr,12,5,"div",20),t.qZA()()()()()),2&e&&(t.Q6J("formGroup",i.dataForm),t.xp6(7),t.hij(" ",t.lcZ(8,18,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(10,20,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.hij(" ",t.lcZ(18,22,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(20,24,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuilding),t.xp6(4),t.hij(" ",t.lcZ(28,26,"HTML.UNIT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(30,28,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnitsForBuilding),t.xp6(3),t.Q6J("ngIf",i.can("add_emp_security_onebuilding")),t.xp6(2),t.Oqu(t.lcZ(39,30,"BTN.CANCEL")),t.xp6(8),t.Oqu(t.lcZ(47,32,"HTML.ContractUnits")),t.xp6(7),t.hij(" ",t.lcZ(54,34,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(58,36,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(62,38,"HTML.UNIT")," "),t.xp6(4),t.hij(" ",t.lcZ(66,40,"HTML.ContractValue")," "),t.xp6(3),t.Q6J("ngForOf",i.contractUnits))},dependencies:[d._Y,d.JJ,d.JL,C.sg,C.O5,d.sg,d.u,T.xw,T.Wh,T.yH,q.ey,w.lW,w.nh,W.a8,y.xY,y.H8,$.Hw,v.KE,v.hX,X.d,D.gD,rt.gM,O.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});class ie{constructor(e,i,n,a,l){this.fb=e,this.unitsService=i,this.dialog=n,this.translateService=a,this.contractService=l,this.selectedUnitsChange=new t.vpe,this.selectedBranchChange=new t.vpe,this.selectedBuildingChange=new t.vpe,this.selectedUnits=[]}ngOnInit(){this.dataForm=this.fb.group({branch_KeyField:[null,d.kI.required],build_KeyField:[null,d.kI.required],contract_KeyField:[null],owner_KeyField:[null],unit_KeyField:[null,d.kI.required],customer_KeyField:[null],RCUContractValue:[null]}),"Retrieve"==this.AddRetrieve&&(this.selectedUnits=this.SelectedUnitsRetrieve,console.log("------Retrieve------"),this.selectedUnits.forEach(e=>{console.log("----id:: "+e.id),console.log("----contract_KeyField:: "+e.contract_KeyField),console.log("----customer_KeyField:: "+e.customer_KeyField),console.log("----branch_KeyField:: "+e.branch_KeyField),console.log("----owner_KeyField:: "+e.owner_KeyField),console.log("----build_KeyField:: "+e.build_KeyField),console.log("----unit_KeyField:: "+e.unit_KeyField),console.log("----unit_UnitNumber:: "+e.unit_UnitNumber),console.log("----RCUContractValue:: "+e.RCUContractValue)})),this.prepareMsgLanguage()}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onBranchChange(e){this.selectedBranchChange.emit(e)}onBuildingChange(e){this.selectedBuildingChange.emit(e.value)}addSelectedUnit(){this.unitsService.getOneUnit(this.dataForm.value.unit_KeyField).subscribe(e=>{this.oneUnit=e;let i={id:null,branch_KeyField:e.branch_KeyField,build_KeyField:e.build_KeyField,owner_KeyField:e.owner_KeyField,unit_KeyField:e.id,RCUContractValue:e.UNTContractValue,branch_ArbName:e.branch_ArbName,build_Name:e.build_Name,unit_UnitNumber:e.UNTUnitNumber};console.log("-----this.selected.unit_KeyField:: "+i.unit_KeyField),this.addUnit(i)},e=>{})}addUnit(e){this.selectedUnits.some(i=>i.unit_KeyField===e.unit_KeyField)||(this.selectedUnits.push(e),this.selectedUnitsChange.emit(this.selectedUnits))}removeUnit(e){e.id?(console.log("-----delete from DataBase-------:: "+e.id),this.dialog.open(E.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&(this.contractService.deleteUnitFromContract(e.id).subscribe(l=>{this.selectedUnits=this.selectedUnits.filter(p=>p!==e),this.selectedUnitsChange.emit(this.selectedUnits)}),this.unitsService.editOneUnit({id:e.unit_KeyField,customer_KeyField:null,UNTHousingStatus:"M"}).subscribe(l=>{console.log("==unit after Update Status:: "+l)}))})):(console.log("-----delete from Memory-------"),this.selectedUnits=this.selectedUnits.filter(i=>i!==e),this.selectedUnitsChange.emit(this.selectedUnits))}prepareMsgLanguage(){this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}function Dr(o,e){1&o&&(t.TgZ(0,"h1",83),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"RenewContract")," "))}function Lr(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function Mr(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Rr(o,e){if(1&o&&(t.TgZ(0,"h1",83),t.YNc(1,Lr,3,3,"span",48),t.YNc(2,Mr,3,3,"span",48),t._uU(3),t.ALo(4,"translate"),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",!i.contractForDisplay.id),t.xp6(1),t.Q6J("ngIf",i.contractForDisplay.id),t.xp6(1),t.hij(" ",t.lcZ(4,3,"HTML.RentContract"),"\n")}}function qr(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.OWNName," ")}}function Er(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.OWNName," ")}}function Pr(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BACAccountNumber," ")}}function kr(o,e){if(1&o&&(t.TgZ(0,"ng-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CUSName,"")}}function Br(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CURName," ")}}function Kr(o,e){if(1&o&&(t.TgZ(0,"a",84)(1,"mat-icon"),t._uU(2,"download"),t.qZA()()),2&o){const i=t.oxw();t.s9C("href",i.fileToUpload,t.LSH)}}function Jr(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"mat-label"),t._uU(2," - "),t.qZA(),t.TgZ(3,"input",85),t.NdJ("change",function(a){t.CHM(i);const l=t.oxw();return t.KtG(l.handleFileInput(a.target.files))}),t.qZA(),t.TgZ(4,"button",86),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.callFileInput())}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,1,"HTML.ChoosePDFFile")))}function Hr(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function Wr(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Vr(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",87),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.saveUpdate(a.contractForDisplay.id))}),t.YNc(1,Hr,3,3,"span",48),t.YNc(2,Wr,3,3,"span",48),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.contractForDisplay.id),t.xp6(1),t.Q6J("ngIf",i.contractForDisplay.id)}}ie.\u0275fac=function(e){return new(e||ie)(t.Y36(d.QS),t.Y36(h.X),t.Y36(y.uw),t.Y36(O.sK),t.Y36(H.W))},ie.\u0275cmp=t.Xpm({type:ie,selectors:[["app-unit-selection-popup"]],inputs:{AllBranches:"AllBranches",AllBuilding:"AllBuilding",AllUnitsForBuilding:"AllUnitsForBuilding",SelectedUnitsRetrieve:"SelectedUnitsRetrieve",AddRetrieve:"AddRetrieve",curUserData:"curUserData",userPerm:"userPerm"},outputs:{selectedUnitsChange:"selectedUnitsChange",selectedBranchChange:"selectedBranchChange",selectedBuildingChange:"selectedBuildingChange"},features:[t._Bn([H.W])],decls:66,vars:39,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","33.0",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","34.0",1,"px-1"],["formControlName","build_KeyField","id","build_OneOpSel",3,"placeholder","selectionChange"],["formControlName","unit_KeyField","id","unitOneOpSel",3,"placeholder"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",6),t.NdJ("selectionChange",function(a){return i.onBranchChange(a.value)}),t.ALo(10,"translate"),t.TgZ(11,"mat-option",7),t._uU(12,"-"),t.qZA(),t.YNc(13,Ur,2,2,"mat-option",8),t.qZA()()(),t.TgZ(14,"div",9)(15,"mat-form-field",5)(16,"mat-label"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"mat-select",10),t.NdJ("selectionChange",function(a){return i.onBuildingChange(a)}),t.ALo(20,"translate"),t.TgZ(21,"mat-option",7),t._uU(22,"-"),t.qZA(),t.YNc(23,Sr,2,2,"mat-option",8),t.qZA()()(),t.TgZ(24,"div",4)(25,"mat-form-field",5)(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"mat-select",11),t.ALo(30,"translate"),t.TgZ(31,"mat-option",7),t._uU(32,"-"),t.qZA(),t.YNc(33,wr,2,3,"mat-option",8),t.qZA()()()()()(),t.TgZ(34,"div",12)(35,"div",3),t.YNc(36,Nr,4,4,"button",13),t.qZA()(),t._UZ(37,"mat-divider"),t.TgZ(38,"div",14)(39,"mat-dialog-content")(40,"mat-card")(41,"div",15)(42,"h2"),t._uU(43),t.ALo(44,"translate"),t.qZA()(),t._UZ(45,"mat-divider"),t.TgZ(46,"div",16)(47,"div",17)(48,"div",18)(49,"h2"),t._uU(50),t.ALo(51,"translate"),t.qZA()(),t.TgZ(52,"div",18)(53,"h2"),t._uU(54),t.ALo(55,"translate"),t.qZA()(),t.TgZ(56,"div",18)(57,"h2"),t._uU(58),t.ALo(59,"translate"),t.qZA()(),t.TgZ(60,"div",18)(61,"h2"),t._uU(62),t.ALo(63,"translate"),t.qZA()(),t._UZ(64,"div",18),t.qZA(),t.YNc(65,Ir,12,5,"div",19),t.qZA()()()()()),2&e&&(t.Q6J("formGroup",i.dataForm),t.xp6(7),t.hij(" ",t.lcZ(8,17,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(10,19,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.hij(" ",t.lcZ(18,21,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(20,23,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuilding),t.xp6(4),t.hij(" ",t.lcZ(28,25,"HTML.UNIT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(30,27,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnitsForBuilding),t.xp6(3),t.Q6J("ngIf","Retrieve"==i.AddRetrieve&&i.can("change_rentcontracts")||i.can("add_rentcontracts")),t.xp6(7),t.Oqu(t.lcZ(44,29,"HTML.ContractUnits")),t.xp6(7),t.hij(" ",t.lcZ(51,31,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(55,33,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(59,35,"HTML.UNIT")," "),t.xp6(4),t.hij(" ",t.lcZ(63,37,"HTML.ContractValue")," "),t.xp6(3),t.Q6J("ngForOf",i.selectedUnits))},dependencies:[d._Y,d.JJ,d.JL,C.sg,C.O5,d.sg,d.u,T.xw,T.Wh,T.yH,q.ey,w.lW,w.nh,W.a8,y.xY,y.H8,$.Hw,v.KE,v.hX,X.d,D.gD,rt.gM,O.X$]});class Ft{constructor(e,i,n,a,l,p,f,A,S,U,M,K,z,st,V){this.activatedRoute=e,this.codesService=i,this.unitsService=n,this.contractService=a,this.fb=l,this.localStore=p,this.router=f,this.appSettings=A,this.global=S,this.dialog=U,this.translateService=M,this.atlasService=K,this.settingService=z,this.tenantsService=st,this.snackBar=V,this.selectedUnits=[],this.totalRentalValue=0,this.buildings=[],this.units=[],this.account=new lt.n,this.docType_const=(new x.I).OwnershipDocTypes,this.country_const=(new x.I).Countries,this.governorate_const=(new x.I).Governorates,this.city_const=(new x.I).City,this.region_const=(new x.I).Regions,this.buildingFeatures_const=(new x.I).BuildingFeatures,this.passwordHide=!0,this.userPerm=[],this.codeForDefaultOwner=(new x.$).getDefaultOwner(),this.typeOfContractSerial=(new x.$).getTypeOfContractSerial(),this.fileToUpload=null,this.hasPermission_NoOfMonths=!1,this.DocImageToUpload=null,this.defaultDocImage=this.noImageUrl,this.defaultCusImage=this.noImageUrl,this.CusImageToUpload=null,this.DocTypes=[],this.parameters=[],this.Countries=[],this.RetrievedSelectedUnits=[],this.Governorates=[],this.AllBuilding=[],this.AllUnitsForBuilding=[],this.AllRepresentativeForOwner=[],this.AllBankAccountsForOwner=[],this.AllBranches=[],this.AllOwners=[],this.AllRepresentativeForCustomer=[],this.AllTenants=[],this.settings=this.appSettings.settings,this.baseUrl=this.appSettings.settings.url,this.secondPartUrl=new L.P(this.baseUrl).api_constant,this.noImageUrl=new L.P(this.baseUrl).noImage}isBigEnough(e,i,n){return e>=10}callFileInput(){document.getElementById("fileInput").click()}ngOnDestroy(){this.userSUb&&this.userSUb.unsubscribe()}ngOnInit(){if(this.userSUb=this.global.user.subscribe(i=>{this.account=i}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curCOMId=this.curUserData.COMId,this.appSetup=JSON.parse(this.localStore.getItem("appsetup")),this.ejarContractNumberRequired=this.appSetup.APSEjarContractNumberRequired,this.contractInsuranceValueRequired=this.appSetup.APSContractInsuranceValueRequired,this.contractSeekingValueRequired=this.appSetup.APSContractSeekingValueRequired,this.insuranceValueInAccountStatements=this.appSetup.APSInsuranceValueInAccountStatements,this.seekingValueInAccountStatements=this.appSetup.APSSeekingValueInAccountStatements,this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;var e=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==e.is_employee,this.isAdmin=e.is_superuser,this.isOwner="T"==e.is_owner,this.ownerKeyForApp=(new x.$).ownerKeyField,this.form=this.fb.group({id:null,RCOCode:[null,d.kI.required],RCOSubCode:1,RCOEjarCode:null,RCOContractMultiUnits:"T",RCOContractNoOfMonths:[{value:"12",disabled:!this.hasPermission_NoOfMonths},[d.kI.required,o=>{const e=o.value;return e&&e>0?null:{greaterThanZero:!0}}]],Related_RCOKeyField:null,contractDate:null,contractStartDate:[null,d.kI.required],contractEndDate:[null,d.kI.required],RCOContractStatus:"N",RCOAlarmStartDate:{value:[""],disabled:!0},RCONoOfDaysForAlarm:[null,d.kI.required],RCONoOfDaysForEjarAlarm:[null,d.kI.required],RCOAlarmCounter:{value:0,disabled:!0},contractUnit:this.fb.group({branch_KeyField:{value:null,disabled:0==this.curUserData.periorty},build_KeyField:{value:null,disabled:0==this.curUserData.periorty},unit_KeyField:{value:null,disabled:0==this.curUserData.periorty}}),contractPerson:this.fb.group({owner_KeyField:null,owner_representative_KeyField:null,customer_KeyField:[null,d.kI.required],customer_work_representative:null,customer_code:null,bankAccount_KeyField:null}),contractValues:this.fb.group({RCOContractValue:[null,d.kI.required],RCOPayEveryMonthesNo:[null,d.kI.required],RCOMonthValue:[null,d.kI.required],RCOInsuranceValue:0,RCOSeekingValue:0,RCOMonthlyExpense:0,RCOExpenseDesc:null,RCOOtherValue:0,RCOMonthlyElectricValue:0,RCOElectricCounterReading:null,RCOMonthlyWaterValue:0,RCOWaterCounterReading:null,RCOMonthlyGasValue:0,RCOGasCounterReading:null}),settings:this.fb.group({isActive:null,isDeleted:null,isInsurance:"T",isSeeking:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),"T"==this.ejarContractNumberRequired?(this.form.controls.RCOEjarCode.setValidators([d.kI.required]),this.form.controls.RCOEjarCode.updateValueAndValidity()):(this.form.controls.RCOEjarCode.clearValidators(),this.form.controls.RCOEjarCode.updateValueAndValidity()),this.prepareMsgLanguage(),this.getParamValue(this.curCOMId,this.account.periorty,1),this.getParamValue(this.curCOMId,this.account.periorty,2),this.getParamValue(this.curCOMId,this.account.periorty,3),this.getParamValue(this.curCOMId,this.account.periorty,this.codeForDefaultOwner),this.getParamValue(this.curCOMId,this.account.periorty,this.typeOfContractSerial),this.getCountries(this.curCOMId,this.account.periorty),this.getAllOwnerss(this.curCOMId,this.account.periorty),this.getOwnershipDocType(this.curCOMId,this.account.periorty),this.getTenants(),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0),this.activatedRoute.data.subscribe(i=>{this.isRenewContract=i.parentID}),this.sub=this.activatedRoute.params.subscribe(i=>{i.id?(this.id=+i.id,console.log("params['id']:: "+this.id),this.getContractById(this.id)):(this.contractForDisplay=new Ze,this.addRetrieveInd="Add")})}this.checkPermissions_NoOfMonths()}checkPermissions_NoOfMonths(){this.hasPermission_NoOfMonths=this.can("edit_rentalcontract_noofmonths"),this.hasPermission_NoOfMonths?this.form.get("RCOContractNoOfMonths")?.enable():this.form.get("RCOContractNoOfMonths")?.disable()}handleFileInput(e){e&&e.length&&(this.fileToUpload=e.item(0)),document.getElementById("customButton").textContent=e.length>0?e[0].name:this.chooseFile}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onFileChange(e){this.DocImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultDocImage=n.target.result},i.readAsDataURL(this.DocImageToUpload)}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultCusImage=n.target.result},i.readAsDataURL(this.CusImageToUpload)}mapFormvalue_to_ContractClass(){this.form.enable();const e=new C.uU("en-GB").transform(this.form.value.contractDate,"dd/MM/yyyy"),i=new C.uU("en-GB").transform(this.form.value.contractStartDate,"dd/MM/yyyy"),n=new C.uU("en-GB").transform(this.form.value.contractEndDate,"dd/MM/yyyy"),a=new C.uU("en-GB").transform(this.form.value.RCOAlarmStartDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,this.affectInsurance=this.form.value.settings.isInsurance?"T":"F",this.affectSeeking=this.form.value.settings.isSeeking?"T":"F",this.contractForDisplay.id=this.form.value.id,this.contractForDisplay.Related_RCOKeyField=this.form.value.Related_RCOKeyField,this.contractForDisplay.RCOCode=this.form.value.RCOCode,this.contractForDisplay.RCOSubCode=this.form.value.RCOSubCode,this.contractForDisplay.RCOEjarCode=this.form.value.RCOEjarCode,this.contractForDisplay.RCOContractMultiUnits=this.form.value.RCOContractMultiUnits,this.contractForDisplay.RCOContractValue=this.totalRentalValue,null!=this.form.value.contractDate&&(this.contractForDisplay.RCODate=e),null!=this.form.value.contractStartDate&&(this.contractForDisplay.RCOStartDate=i),null!=this.form.value.contractEndDate&&(this.contractForDisplay.RCOEndDate=n),null!=this.form.value.RCOAlarmStartDate&&(this.contractForDisplay.RCOAlarmStartDate=a),this.contractForDisplay.RCOContractStatus=this.form.value.RCOContractStatus,this.contractForDisplay.RCOAlarmCounter=this.form.value.RCOAlarmCounter,this.contractForDisplay.RCONoOfDaysForAlarm=this.form.value.RCONoOfDaysForAlarm,this.contractForDisplay.RCONoOfDaysForEjarAlarm=this.form.value.RCONoOfDaysForEjarAlarm,this.contractForDisplay.branch_KeyField=this.form.value.contractUnit.branch_KeyField,this.contractForDisplay.build_KeyField=this.form.value.contractUnit.build_KeyField,this.contractForDisplay.unit_KeyField=this.form.value.contractUnit.unit_KeyField,this.contractForDisplay.owner_KeyField=this.form.value.contractPerson.owner_KeyField,this.contractForDisplay.owner_representative_KeyField=this.form.value.contractPerson.owner_representative_KeyField,this.contractForDisplay.bankAccount_KeyField=this.form.value.contractPerson.bankAccount_KeyField,this.contractForDisplay.customer_KeyField=this.form.value.contractPerson.customer_KeyField,this.contractForDisplay.customer_work_representative=this.form.value.contractPerson.customer_work_representative,this.contractForDisplay.RCOContractValue=this.form.value.contractValues.RCOContractValue,this.contractForDisplay.RCOPayEveryMonthesNo=this.form.value.contractValues.RCOPayEveryMonthesNo,this.contractForDisplay.RCOContractNoOfMonths=this.form.value.RCOContractNoOfMonths,this.contractForDisplay.RCOMonthValue=this.form.value.contractValues.RCOMonthValue,this.contractForDisplay.RCOInsuranceValue=this.form.value.contractValues.RCOInsuranceValue,this.contractForDisplay.RCOSeekingValue=this.form.value.contractValues.RCOSeekingValue,this.contractForDisplay.RCOMonthlyExpense=this.form.value.contractValues.RCOMonthlyExpense,this.contractForDisplay.RCOExpenseDesc=this.form.value.contractValues.RCOExpenseDesc,this.contractForDisplay.RCOOtherValue=this.form.value.contractValues.RCOOtherValue,this.contractForDisplay.RCOMonthlyElectricValue=this.form.value.contractValues.RCOMonthlyElectricValue,this.contractForDisplay.RCOElectricCounterReading=this.form.value.contractValues.RCOElectricCounterReading,this.contractForDisplay.RCOMonthlyWaterValue=this.form.value.contractValues.RCOMonthlyWaterValue,this.contractForDisplay.RCOWaterCounterReading=this.form.value.contractValues.RCOWaterCounterReading,this.contractForDisplay.RCOMonthlyGasValue=this.form.value.contractValues.RCOMonthlyGasValue,this.contractForDisplay.RCOGasCounterReading=this.form.value.contractValues.RCOGasCounterReading,this.contractForDisplay.RCOActive=this.tenActive,this.contractForDisplay.RowDelete=this.tenDeleted,this.contractForDisplay.RCOInsuranceAffectStatement=this.affectInsurance,this.contractForDisplay.RCOSeekingAffectStatement=this.affectSeeking}getContractById(e){this.addRetrieveInd="Retrieve";const i=[];this.contractService.getOneContract(e).subscribe(n=>{"T"!=this.isRenewContract&&this.contractService.getOneContractDocs(this.curCOMId,this.account.periorty,e).subscribe(a=>{for(var l of a)i.push({link:l.RCDPic,preview:l.RCDPic})}),this.contractService.getUnitsForContract(this.curCOMId,this.account.periorty,e).subscribe(a=>{a.forEach(l=>{this.RetrievedSelectedUnits.push({id:l.id,contract_KeyField:l.contract_KeyField,customer_KeyField:l.customer_KeyField,branch_KeyField:l.branch_KeyField,owner_KeyField:l.owner_KeyField,build_KeyField:l.build_KeyField,unit_KeyField:l.unit_KeyField,RCUContractValue:l.RCUContractValue,branch_ArbName:l.branch_ArbName,build_Name:l.build_Name,unit_UnitNumber:l.unit_UnitNumber})}),console.log("----------------------------------------------------------"),console.log("----this.RetrievedSelectedUnits:: "+this.RetrievedSelectedUnits),console.log("----------------------------------------------------------")}),this.fillForm(n,i),this.contractForDisplay=n,"T"==this.isRenewContract&&(this.contractForDisplay.id=null)})}fillForm(e,i){this.is_active="T"==e.RCOActive,this.is_insurance="T"==e.RCOInsuranceAffectStatement,this.is_seeking="T"==e.RCOSeekingAffectStatement,null!=e.branch_KeyField&&this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.branch_KeyField),null!=e.build_KeyField&&this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,e.build_KeyField,""),null!=e.owner_KeyField&&(this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,e.owner_KeyField),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,e.owner_KeyField)),null!=e.customer_KeyField&&this.getRepresentativePerCustomer(this.curCOMId,this.account.periorty,e.customer_KeyField),null!=e.RCODate&&(this.s_rcoDate="T"==this.isRenewContract?new Date:e.RCODate),this.is_delete=1==e.RowDelete,this.fileToUpload=e.RCOPdf,this.form.patchValue("T"!=this.isRenewContract?{id:e.id,Related_RCOKeyField:e.Related_RCOKeyField,RCOPdf:e.RCOPdf,RCOCode:e.RCOCode,RCOSubCode:e.RCOSubCode,RCOEjarCode:e.RCOEjarCode,RCOContractMultiUnits:e.RCOContractMultiUnits,RCOContractNoOfMonths:e.RCOContractNoOfMonths,contractDate:e.RCODate,contractStartDate:e.RCOStartDate,contractEndDate:e.RCOEndDate,RCOContractStatus:e.RCOContractStatus,RCOAlarmStartDate:e.RCOAlarmStartDate,RCOAlarmCounter:e.RCOAlarmCounter,RCONoOfDaysForAlarm:e.RCONoOfDaysForAlarm,RCONoOfDaysForEjarAlarm:e.RCONoOfDaysForEjarAlarm,contractUnit:{branch_KeyField:e.branch_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField},contractPerson:{owner_KeyField:e.owner_KeyField,owner_representative_KeyField:e.owner_representative_KeyField,bankAccount_KeyField:e.bankAccount_KeyField,customer_KeyField:e.customer_KeyField,customer_work_representative:e.customer_work_representative},contractValues:{RCOContractValue:e.RCOContractValue,RCOPayEveryMonthesNo:e.RCOPayEveryMonthesNo,RCOMonthValue:e.RCOMonthValue,RCOInsuranceValue:e.RCOInsuranceValue,RCOSeekingValue:e.RCOSeekingValue,RCOMonthlyExpense:e.RCOMonthlyExpense,RCOExpenseDesc:e.RCOExpenseDesc,RCOOtherValue:e.RCOOtherValue,RCOMonthlyElectricValue:e.RCOMonthlyElectricValue,RCOElectricCounterReading:e.RCOElectricCounterReading,RCOMonthlyWaterValue:e.RCOMonthlyWaterValue,RCOWaterCounterReading:e.RCOWaterCounterReading,RCOMonthlyGasValue:e.RCOMonthlyGasValue,RCOGasCounterReading:e.RCOGasCounterReading},settings:{isActive:this.is_active,isDeleted:this.is_delete,isInsurance:this.is_insurance,isSeeking:this.is_seeking},docs:{docPic:i}}:{Related_RCOKeyField:e.id,RCOPdf:e.RCOPdf,RCOCode:e.RCOCode,RCOSubCode:+e.RCOSubCode+1,RCOEjarCode:e.RCOEjarCode,RCOContractMultiUnits:e.RCOContractMultiUnits,RCOContractNoOfMonths:e.RCOContractNoOfMonths,contractDate:new Date,contractStartDate:this.addDays(e.RCOEndDate,1),RCOContractStatus:e.RCOContractStatus,RCOAlarmCounter:0,RCONoOfDaysForAlarm:e.RCONoOfDaysForAlarm,RCONoOfDaysForEjarAlarm:e.RCONoOfDaysForEjarAlarm,contractUnit:{branch_KeyField:e.branch_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField},contractPerson:{owner_KeyField:e.owner_KeyField,owner_representative_KeyField:e.owner_representative_KeyField,bankAccount_KeyField:e.bankAccount_KeyField,customer_KeyField:e.customer_KeyField,customer_work_representative:e.customer_work_representative},contractValues:{RCOContractValue:e.RCOContractValue,RCOPayEveryMonthesNo:e.RCOPayEveryMonthesNo,RCOMonthValue:e.RCOMonthValue,RCOInsuranceValue:e.RCOInsuranceValue,RCOSeekingValue:e.RCOSeekingValue,RCOMonthlyExpense:e.RCOMonthlyExpense,RCOExpenseDesc:e.RCOExpenseDesc,RCOOtherValue:e.RCOOtherValue,RCOMonthlyElectricValue:e.RCOMonthlyElectricValue,RCOElectricCounterReading:e.RCOElectricCounterReading,RCOMonthlyWaterValue:e.RCOMonthlyWaterValue,RCOWaterCounterReading:e.RCOWaterCounterReading,RCOMonthlyGasValue:e.RCOMonthlyGasValue,RCOGasCounterReading:e.RCOGasCounterReading},settings:{isActive:this.is_active,isDeleted:this.is_delete,isInsurance:this.is_insurance,isSeeking:this.is_seeking},docs:{docPic:i}})}handleInstallment(e){var i=this;return(0,ye.Z)(function*(){console.log("inside handleInstallment-------"),console.log("---res.RCOContractNoOfMonths:: "+e.RCOContractNoOfMonths);let n=+e.RCOContractNoOfMonths/+e.RCOPayEveryMonthesNo;console.log("-----noOfInstallment:: "+n);let a=e.RCOPayEveryMonthesNo,l=e.RCOStartDate,p=e.RCOEndDate,f=e.RCOMonthValue;var A,U,M,K,z;for(let V=0;V<n;V++){0==V?(U=new Date(l),console.log("-----111--installmentDate:: "+l),console.log("-----111--tempDate:: "+U),A=i.addMonths(U,(V+1)*a),console.log("-----000--endOfInstallmentPeriod:: "+A),A.setDate(A.getDate()-1),console.log("-----00000--endOfInstallmentPeriod:: "+A),console.log("-----222--tempDate:: "+U),U=new Date(l),console.log("-----333--tempDate:: "+U)):(M=new Date(l),U=new Date(l),U=i.addMonths(M,V*a),M=new Date(l),V==n-1?A=p:((A=i.addMonths(M,(V+1)*a)).setDate(A.getDate()-1),M=new Date(l))),K=new Date(new C.uU("en-GB").transform(U,"yyyy/MM/dd")),z=new Date(new C.uU("en-GB").transform(A,"yyyy/MM/dd"));var st="\u0648\u0630\u0644\u0643 \u0639\u0646 \u0625\u064a\u062c\u0627\u0631 \u0627\u0644\u0648\u062d\u062f\u0629 \u0631\u0642\u0645 "+e.unit_UnitNumber+" \u0645\u0646 \u0627\u0644\u0639\u0642\u0627\u0631 "+e.build_Name+" \u0639\u0646 \u0627\u0644\u0641\u062a\u0631\u0629 \u0645\u0646 "+i.formatDate(K)+" \u0625\u0644\u0649 "+i.formatDate(z);console.log("-----444--noteText:: "+st);let It={contract_KeyField:e.id,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,INSCode:V+1,INSContractTyps:"I",INSStatus:"N",INSValue:f,INSDueDate:K,INSDueToDate:z,INSNotes:st};console.log("---i::"+V+" --INSDueDate:: "+K+" --INSDueToDate:: "+z),yield i.insertInstallment(It)}})()}insertInstallment(e){this.contractService.addInstallments(e).subscribe(i=>{})}saveContract(){console.log("Save the rental contract and selected units logic here")}openUnitDialog(e){this.dialog.open(ee,{data:{contractRow:e,selectedUnits:this.selectedUnits,periorty:this.account.periorty,curUserData:this.curUserData,userPerm:this.userPerm},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{"Cancel"==n.event||("Patch"==n.event||"Post"==n.event)&&(this.totalRentalValue=n.totalUnitsRentalValue,this.selectedUnits=n.unitsSelected,this.calculateTotalRentalValue())})}calculateTotalRentalValue(){this.totalRentalValue=this.selectedUnits.reduce((e,i)=>e+ +i.RCUContractValue,0)}saveUpdate(e){this.mapFormvalue_to_ContractClass(),e?(console.log("==========Edit Contract============"),this.contractService.editContractWithPdf(this.contractForDisplay,this.fileToUpload).subscribe(i=>{this.selectedUnits.forEach(p=>{console.log("ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ"),console.log("-----"+p.build_Name+" - "+p.UNTUnitNumber),p.id||(console.log("-----------Unitcode to be Updated::"+p.build_Name+" - "+p.UNTUnitNumber),this.contractService.addOneUnitForContract({id:null,contract_KeyField:i.id,customer_KeyField:i.customer_KeyField,branch_KeyField:p.branch_KeyField,owner_KeyField:p.owner_KeyField,build_KeyField:p.build_KeyField,unit_KeyField:p.unit_KeyField,RCUContractValue:p.RCUContractValue,branch_ArbName:p.branch_ArbName,build_Name:p.build_Name,unit_UnitNumber:p.UNTUnitNumber}).subscribe(A=>{console.log("Response from EDIT API:",A)},A=>{console.error("Error:",A)}))});let n={contract_KeyField:i.id,TSTArrange:1,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOContractValue,TSTDate:i.RCOStartDate,TSTLineClassification:"A",TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u0627\u0642\u062f \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id};console.log("==================1======================="),console.log("==================1======================="),this.contractService.getStatementsIDPerSubjectIDAndClass(this.curCOMId,this.account.periorty,"RCONTRACT",i.id,"A").subscribe(p=>{p&&p.length>0?(this.stateID=p[0].id,this.stateID&&this.stateID>0&&this.contractService.deleteStatementForStatementID(this.stateID).subscribe(f=>{console.log("====Delete:: ==========this.stateID================"),console.log("====Delete this.stateID:: "+this.stateID),this.contractService.addStatement(n).subscribe(A=>{console.log("====Add statement for Contract after delete")})})):this.contractService.addStatement(n).subscribe(f=>{console.log("====Add statement for Contract after delete")})});let a={contract_KeyField:i.id,TSTArrange:2,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOInsuranceValue,TSTDate:i.RCOStartDate,TSTLineClassification:"B",TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0623\u0645\u064a\u0646 \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id};this.contractService.getStatementsIDPerSubjectIDAndClass(this.curCOMId,this.account.periorty,"RCONTRACT",i.id,"B").subscribe(p=>{p&&p.length>0?(this.insuranceID=p[0].id,this.insuranceID&&this.insuranceID>0&&this.contractService.deleteStatementForStatementID(this.insuranceID).subscribe(f=>{console.log("====Delete:: ==========this.insuranceID================"),console.log("====Delete this.insuranceID:: "+this.insuranceID),this.form.value.settings.isInsurance&&this.contractService.addStatement(a).subscribe(A=>{console.log("====Add Insurance for Contract after delete")})})):this.form.value.settings.isInsurance&&this.contractService.addStatement(a).subscribe(f=>{console.log("====Add Insurance for Contract")})});let l={contract_KeyField:i.id,TSTArrange:3,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOSeekingValue,TSTDate:i.RCOStartDate,TSTLineClassification:"C",TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0633\u0639\u064a \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id};this.contractService.getStatementsIDPerSubjectIDAndClass(this.curCOMId,this.account.periorty,"RCONTRACT",i.id,"C").subscribe(p=>{p&&p.length>0?(this.seekingID=p[0].id,this.seekingID&&this.seekingID>0&&this.contractService.deleteStatementForStatementID(this.seekingID).subscribe(f=>{console.log("====Delete:: ==========this.seekingID================"),console.log("====Delete this.seekingID:: "+this.seekingID),this.form.value.settings.isSeeking&&this.contractService.addStatement(l).subscribe(A=>{console.log("====Add Seeking for Contract after delete")})})):this.form.value.settings.isSeeking&&this.contractService.addStatement(l).subscribe(f=>{console.log("====Add Seeking for Contract")})}),console.log("==================2======================="),console.log("==================2======================="),null!=this.DocImageToUpload&&this.contractService.addContractDocs(this.contractForDisplay.id,this.DocImageToUpload).subscribe(p=>{}),this.selectedUnits.forEach(p=>{this.unitsService.editOneUnit({id:p.unit_KeyField,customer_KeyField:i.customer_KeyField,UNTHousingStatus:"R"}).subscribe(A=>{})}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contractComplex-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(console.log("=====AddContract======"),this.contractService.addContractWithPdf(this.contractForDisplay,this.fileToUpload).subscribe(i=>{this.selectedUnits.forEach(a=>{console.log("AAAAAAAAAAAAAAAAAAAAAA"),console.log("-----"+a.build_Name+" - "+a.UNTUnitNumber),a.id||(console.log("-----------Unitcode to be Updated::"+a.build_Name+" - "+a.UNTUnitNumber),this.contractService.addOneUnitForContract({id:null,contract_KeyField:i.id,customer_KeyField:i.customer_KeyField,branch_KeyField:a.branch_KeyField,owner_KeyField:a.owner_KeyField,build_KeyField:a.build_KeyField,unit_KeyField:a.unit_KeyField,RCUContractValue:a.RCUContractValue,branch_ArbName:a.branch_ArbName,build_Name:a.build_Name,unit_UnitNumber:a.UNTUnitNumber}).subscribe(p=>{console.log("Response from POST API:",p)},p=>{console.error("Error:",p)}))}),this.contractService.addStatement({contract_KeyField:i.id,TSTArrange:1,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOContractValue,TSTDate:i.RCOStartDate,TSTLineClassification:"A",TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u0627\u0642\u062f \u0644\u0644\u0639\u0642\u062f \u0645\u062a\u0639\u062f\u062f \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id}).subscribe(a=>{}),this.form.value.settings.isInsurance&&this.contractService.addStatement({contract_KeyField:i.id,TSTArrange:2,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOInsuranceValue,TSTDate:i.RCOStartDate,TSTLineClassification:"B",TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0623\u0645\u064a\u0646 \u0644\u0644\u0639\u0642\u062f \u0645\u062a\u0639\u062f\u062f \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id}).subscribe(l=>{}),this.form.value.settings.isSeeking&&this.contractService.addStatement({contract_KeyField:i.id,TSTArrange:3,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOSeekingValue,TSTDate:i.RCOStartDate,TSTLineClassification:"C",TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0633\u0639\u064a \u0644\u0644\u0639\u0642\u062f \u0645\u062a\u0639\u062f\u062f \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id}).subscribe(l=>{}),null!=this.DocImageToUpload&&this.contractService.addContractDocs(i.id,this.DocImageToUpload).subscribe(a=>{}),this.selectedUnits.forEach(a=>{this.unitsService.editOneUnit({id:a.unit_KeyField,customer_KeyField:i.customer_KeyField,UNTHousingStatus:"R"}).subscribe(p=>{})}),"T"==this.isRenewContract&&this.contractService.editOneContract({id:this.id,RCOContractStatus:"R"}).subscribe(l=>{}),this.handleInstallment(i),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contractComplex-add/"+i.id+"/"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contractComplex-list"])}))}close(){}addDays(e,i){var n=new Date(e);return n.setDate(n.getDate()+i),n}addMonths(e,i){var n=new Date(e);return n.setMonth(n.getMonth()+i),n}addMonths2(e,i){var n=e.getDate();return e.setMonth(e.getMonth()+ +i),e.getDate()!=n&&e.setDate(0),e}compareFunction(e,i){return e.username==i.username&&e.code==i.code}getOwnershipDocType(e,i){this.codesService.getSubForParent(e,i,this.docType_const).subscribe(n=>{this.DocTypes=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0646\u0648\u0627\u0639 \u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0644\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onChangeContractValue(e){const i=this.form.getRawValue();let a=this.form.value.contractValues.RCOPayEveryMonthesNo;0==a&&(a=1);let l=i.RCOContractNoOfMonths;0==l&&(l=12),this.form.patchValue({contractValues:{RCOMonthValue:(e.target.value/(l/a)).toFixed(2)}})}onChangeContractNoOfMonths(e){let i=e.target.value,n=this.form.value.contractValues.RCOPayEveryMonthesNo;0==n&&(n=1);let a=this.form.value.contractValues.RCOContractValue;null==a&&(a=0),this.form.patchValue({contractValues:{RCOMonthValue:a/(i/n)}});let l=this.form.value.contractStartDate;l&&this.onChangeStartDateDoIt(l,i)}onChangePayEvery(e){let n=this.form.getRawValue().RCOContractNoOfMonths;0==n&&(n=12);let l=e.target.value;0==l&&(l=1),this.form.patchValue({contractValues:{RCOMonthValue:(this.form.value.contractValues.RCOContractValue/(n/l)).toFixed(2)}})}onChangeDays(e){if(new C.uU("en-GB").transform(this.form.value.contractEndDate,"dd/MM/yyyy"),null!=this.form.value.contractEndDate){let n=this.form.value.contractEndDate,a=e.target.value;this.paramValueForCode1=a,this.calcAlarmStartDate(n,a)}}onChangeEndDate(e){let i=e.value;console.log("----event.value:: "+e.value),console.log("----event:: "+e),this.onChangeEndDateDoIt(i)}onChangeEndDateDoIt(e){this.calcAlarmStartDate(e,this.paramValueForCode1),this.form.get("contractEndDate").patchValue(e)}onChangeStartDate(e){const i=this.form.getRawValue(),a=new Date(e.value);this.onChangeStartDateDoIt(a,i.RCOContractNoOfMonths)}onChangeStartDateDoIt(e,i){const n=new Date(e);let a=i;n.setMonth(n.getMonth()+ +a),n.setDate(n.getDate()-1),this.onChangeEndDateDoIt(n)}subtractDays(e,i){var n=new Date(e);return n.setDate(n.getDate()-i),n}calcAlarmStartDate(e,i){var n=this.subtractDays(e,i);this.calcDate=new C.uU("en-GB").transform(n,"yyyy-MM-dd"),this.form.patchValue({RCONoOfDaysForAlarm:this.paramValueForCode1,RCONoOfDaysForEjarAlarm:this.paramValueForCode2}),this.form.get("RCOAlarmStartDate").patchValue(this.calcDate)}formatDate(e){const i=new Date(e);let n=""+(i.getMonth()+1),a=""+i.getDate();const l=i.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[l,n,a].join("-")}searchByCode(e){console.log("---Search event:: "+e),this.tenantsService.getCustomerPerCode(this.curCOMId,this.account.periorty,+e).subscribe(i=>{i.length>0?(console.log("---id:: "+i[0].id),this.form.patchValue({contractPerson:{customer_KeyField:i[0].id}}),this.readCustumer(i[0].id)):(console.log("---Not---"),this.form.patchValue({contractPerson:{customer_KeyField:null}}))},i=>{console.log("----not found tenant----")})}getParamValue(e,i,n){this.settingService.getValueForCode(e,i,n).subscribe(a=>{this.parameters=a,1==n&&(this.paramValueForCode1=a[0].APAValue),2==n&&(this.paramValueForCode2=a[0].APAValue),3==n&&(this.paramValueForCode3=a[0].APAValue),n==this.codeForDefaultOwner&&(this.defaultOwner=a[0].APAValue,this.form.patchValue({contractPerson:{owner_KeyField:+this.defaultOwner}}),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.defaultOwner),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,this.defaultOwner)),n==this.typeOfContractSerial&&(this.typeOfContSerialValue=a[0].APAValue,"OWNER"!=this.typeOfContSerialValue.toUpperCase()?this.getMaxContractCode(this.curCOMId,this.account.periorty):this.getMaxContractCodePerOwner(this.curCOMId,this.account.periorty,this.defaultOwner??0))},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxContractCode(e,i){this.contractService.getMaxContractCode(e,i).subscribe(n=>{this.maxContractCode=n.max,this.id||this.form.patchValue({RCOCode:this.maxContractCode})})}getMaxContractCodePerOwner(e,i,n){this.contractService.getMaxContractCodeForOwner(e,i,n).subscribe(a=>{this.maxContractCode=a.max,this.id||this.form.patchValue({RCOCode:this.maxContractCode})})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onSelectedUnitsChange(e){console.log("---from parent window when change selected units:: "+e.length),console.log("------units.unit_KeyField:: "+e[0].unit_KeyField),this.selectedUnits=e,this.calculateTotalRentalValue()}onBuildingsPerBranchFromChild(e){console.log("---Called from Child by braID:: "+e),this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e)}onUnitsPerBuildingFromChild(e){this.unitsService.getOneBuilding(e).subscribe(i=>{this.curOwnerId=i.owner_KeyField,console.log("====Cur Owner:: "+this.curOwnerId+"  "+i.owner_FullName),this.form.patchValue({contractPerson:{owner_KeyField:this.curOwnerId}}),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.curOwnerId),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,this.curOwnerId)},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,e,"E")}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.value)}getBuildingPerBranch(e,i,n){this.AllBuilding=[],this.AllUnitsForBuilding=[],this.unitsService.getBuildingsPerBranch(e,i,n).subscribe(a=>{this.AllBuilding=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(e){this.unitsService.getOneBuilding(e.value).subscribe(i=>{this.curOwnerId=i.owner_KeyField,console.log("====Cur Owner:: "+this.curOwnerId+"  "+i.owner_FullName),this.form.patchValue({contractPerson:{owner_KeyField:this.curOwnerId}}),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.curOwnerId),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,this.curOwnerId)},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,e.value,"E")}getUnitsPerBuilding(e,i,n,a){this.unitsService.getAllUnitsPerBuilding(e,i,n,a).subscribe(l=>{this.AllUnitsForBuilding=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0644\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnit(e){let i=this.form.value.RCOContractNoOfMonths;e.value&&this.unitsService.getOneUnit(e.value).subscribe(n=>{this.form.patchValue({contractValues:{RCOContractValue:n.UNTContractValue,RCOPayEveryMonthesNo:n.UNTPayInstallmentEveryMonths,RCOMonthValue:n.UNTContractValue/(i/n.UNTPayInstallmentEveryMonths),RCOInsuranceValue:n.UNTInsuranceValue,RCOSeekingValue:n.UNTSeekingValue,RCOMonthlyExpense:n.UNTMonthlyExpense,RCOExpenseDesc:n.UNTExpenseDesc,RCOOtherValue:n.UNTOtherValue,RCOMonthlyElectricValue:n.UNTMonthlyElectricityFee,RCOElectricCounterReading:n.UNTLastElectricityReading,RCOMonthlyWaterValue:n.UNTMonthlyWaterFee,RCOWaterCounterReading:n.UNTLastWaterReading,RCOMonthlyGasValue:n.UNTMonthlyGasFee,RCOGasCounterReading:n.UNTLastGasReading}})},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnitById(e){let n=this.form.getRawValue().RCOContractNoOfMonths;e&&this.unitsService.getOneUnit(e).subscribe(a=>{this.form.patchValue({contractValues:{RCOContractValue:a.UNTContractValue,RCOPayEveryMonthesNo:a.UNTPayInstallmentEveryMonths,RCOMonthValue:a.UNTContractValue/(n/a.UNTPayInstallmentEveryMonths),RCOInsuranceValue:a.UNTInsuranceValue,RCOSeekingValue:a.UNTSeekingValue,RCOMonthlyExpense:a.UNTMonthlyExpense,RCOExpenseDesc:a.UNTExpenseDesc,RCOOtherValue:a.UNTOtherValue,RCOMonthlyElectricValue:a.UNTMonthlyElectricityFee,RCOElectricCounterReading:a.UNTLastElectricityReading,RCOMonthlyWaterValue:a.UNTMonthlyWaterFee,RCOWaterCounterReading:a.UNTLastWaterReading,RCOMonthlyGasValue:a.UNTMonthlyGasFee,RCOGasCounterReading:a.UNTLastGasReading}})},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getRepresentativePerOwner(e,i,n){this.contractService.getOwnersPerParent(e,i,n).subscribe(a=>{this.AllRepresentativeForOwner=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0645\u062b\u0644 \u0627\u0644\u0645\u0627\u0644\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBankAccountsPerOwner(e,i,n){this.contractService.getAllAccountsForOwner(e,i,n).subscribe(a=>{this.AllBankAccountsForOwner=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0628\u0646\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readOwner(e){console.log("====Selected readOwner:: "+e.value),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,e.value??0),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,e.value??0),"OWNER"!=this.typeOfContSerialValue.toUpperCase()||this.getMaxContractCodePerOwner(this.curCOMId,this.account.periorty,e.value??0)}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(e,i,n,a){console.log("----is Emp"),this.atlasService.getBranchPerEmp(e,i,n).subscribe(l=>{this.AllBranches=l,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+a),this.atlasService.getOneBranch(a).subscribe(p=>{this.AllBranches=p},p=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllOwnerss(e,i){this.contractService.getAllOwners(e,i).subscribe(n=>{this.AllOwners=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0644\u0627\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onEnter(e){e.preventDefault()}readCustumer(e){console.log("====Selected readCustumer:: "+e),this.tenantsService.getOneCustomer(e).subscribe(i=>{},i=>{}),this.getRepresentativePerCustomer(this.curCOMId,this.account.periorty,e)}getRepresentativePerCustomer(e,i,n){this.tenantsService.getWorkRelatedWakeelPerCustomers(e,i,n).subscribe(a=>{this.AllRepresentativeForCustomer=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0645\u062b\u0644 \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getTenants(){this.AllTenants=null,this.tenantsService.getCustomersConfirmed(this.curCOMId,this.account.periorty).subscribe(e=>this.AllTenants=e)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("HTML.ChoosePDFFile").subscribe(e=>{this.chooseFile=e})}}Ft.\u0275fac=function(e){return new(e||Ft)(t.Y36(P.gz),t.Y36(Ot.d),t.Y36(h.X),t.Y36(H.W),t.Y36(d.QS),t.Y36(N.C),t.Y36(P.F0),t.Y36(it.d),t.Y36(tt.U),t.Y36(y.uw),t.Y36(O.sK),t.Y36(I.Z),t.Y36(pt.g),t.Y36(ct.v),t.Y36(R.ux))},Ft.\u0275cmp=t.Xpm({type:Ft,selectors:[["app-contract-complex-dialog"]],decls:303,vars:190,consts:[["mat-dialog-title","",4,"ngIf"],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","26.0",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","RCOCode"],["fxFlex","100","fxFlex.gt-sm","18.8",1,"px-1"],["matInput","","formControlName","RCOSubCode"],["fxFlex","100","fxFlex.gt-sm","20.0",1,"px-1"],["matInput","","formControlName","RCOContractNoOfMonths","required","",3,"change"],["fxFlex","100","fxFlex.gt-sm","35.0",1,"px-1"],["matInput","","formControlName","contractDate",3,"matDatepicker"],["matSuffix","",3,"for"],["contractDate",""],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","contractStartDate",3,"matDatepicker","dateChange"],["contractStartDate",""],["matInput","","formControlName","contractEndDate",3,"matDatepicker","dateChange"],["contractEndDate",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","RCOContractStatus","id","contStatusOpSel",3,"placeholder"],[3,"value"],["matInput","","formControlName","RCOEjarCode"],["matInput","","type","date","formControlName","RCOAlarmStartDate",1,"form-control"],["matInput","","formControlName","RCONoOfDaysForAlarm","required","",3,"change"],["matInput","","formControlName","RCONoOfDaysForEjarAlarm","required",""],["matInput","","formControlName","RCOAlarmCounter"],["formGroupName","contractPerson",3,"label"],["fxFlex","100","fxFlex.gt-sm","59.8",1,"px-1"],["formControlName","owner_KeyField","id","oneOwnerOpSel",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","39.8",1,"px-1"],["formControlName","owner_representative_KeyField","id","oneOwnerRepresOpSel",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["formControlName","bankAccount_KeyField","id","bnkaccOpSel",3,"placeholder"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1",3,"keydown.enter"],["matInput","","formControlName","customer_code",3,"keyup.enter"],["tenCode",""],["appearance","outline","formControlName","customer_KeyField","id","oneCustomOpSel",1,"w-100",3,"placeholder","change"],["fxFlex","100","fxFlex.gt-sm","29.8",1,"px-1"],["formControlName","customer_work_representative","id","CustomRepsOpSel",3,"placeholder"],["fxLayout","row"],["target","_blank",3,"href",4,"ngIf"],[4,"ngIf"],["formGroupName","contractUnit",3,"label"],[3,"AllBranches","AllBuilding","AllUnitsForBuilding","SelectedUnitsRetrieve","AddRetrieve","curUserData","userPerm","selectedUnitsChange","selectedBranchChange","selectedBuildingChange"],["formGroupName","contractValues",3,"label"],["matInput","","formControlName","RCOContractValue","required","",3,"change"],["matInput","","formControlName","RCOPayEveryMonthesNo","required","",3,"change"],["matInput","","formControlName","RCOMonthValue","required",""],["fxFlex","100","fxFlex.gt-sm","24.9",1,"px-1"],["matInput","","formControlName","RCOInsuranceValue"],["matInput","","formControlName","RCOSeekingValue"],["matInput","","formControlName","RCOMonthlyExpense"],["matInput","","formControlName","RCOOtherValue"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","RCOExpenseDesc"],["matInput","","formControlName","RCOElectricCounterReading"],["matInput","","formControlName","RCOWaterCounterReading"],["matInput","","formControlName","RCOGasCounterReading"],["matInput","","formControlName","RCOMonthlyElectricValue"],["matInput","","formControlName","RCOMonthlyWaterValue"],["matInput","","formControlName","RCOMonthlyGasValue"],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["formControlName","isInsurance"],["formControlName","isSeeking"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-dialog-title",""],["target","_blank",3,"href"],["formControlName","RCOPdf","type","file","accept",".pdf","id","fileInput",1,"file-input",3,"change"],["id","customButton",1,"custom-button",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e){const n=t.EpF();t.YNc(0,Dr,3,3,"h1",0),t.YNc(1,Rr,5,5,"h1",0),t.TgZ(2,"form",1)(3,"mat-tab-group",2)(4,"mat-tab",3),t.ALo(5,"translate"),t.TgZ(6,"div",4)(7,"div",5),t._UZ(8,"mat-label"),t.TgZ(9,"div",6)(10,"div",7)(11,"mat-form-field",8)(12,"mat-label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"input",9),t.qZA()(),t.TgZ(16,"div",10)(17,"mat-form-field",8)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",11),t.qZA()(),t.TgZ(22,"div",12)(23,"mat-form-field",8)(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"input",13),t.NdJ("change",function(l){return i.onChangeContractNoOfMonths(l)}),t.qZA()()(),t.TgZ(28,"div",14)(29,"mat-form-field",8)(30,"mat-label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"input",15)(34,"mat-datepicker-toggle",16)(35,"mat-datepicker",null,17),t.qZA()()()(),t.TgZ(37,"div",6)(38,"div",18)(39,"mat-form-field",8)(40,"mat-label"),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"input",19),t.NdJ("dateChange",function(l){return i.onChangeStartDate(l)}),t.qZA(),t._UZ(44,"mat-datepicker-toggle",16)(45,"mat-datepicker",null,20),t.qZA()(),t.TgZ(47,"div",18)(48,"mat-form-field",8)(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"input",21),t.NdJ("dateChange",function(l){return i.onChangeEndDate(l)}),t.qZA(),t._UZ(53,"mat-datepicker-toggle",16)(54,"mat-datepicker",null,22),t.qZA()()(),t.TgZ(56,"div",6)(57,"div",23)(58,"mat-form-field",8)(59,"mat-label"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"mat-select",24),t.ALo(63,"translate"),t.TgZ(64,"mat-option",25),t._uU(65,"-"),t.qZA(),t.TgZ(66,"mat-option",25),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"mat-option",25),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"mat-option",25),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"mat-option",25),t._uU(76),t.ALo(77,"translate"),t.qZA()()()(),t.TgZ(78,"div",23)(79,"mat-form-field",8)(80,"mat-label"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t._UZ(83,"input",26),t.qZA()(),t.TgZ(84,"div",23)(85,"mat-form-field",8)(86,"mat-label"),t._uU(87),t.ALo(88,"translate"),t.qZA(),t._UZ(89,"input",27),t.qZA()()(),t.TgZ(90,"div",6)(91,"div",23)(92,"mat-form-field",8)(93,"mat-label"),t._uU(94),t.ALo(95,"translate"),t.qZA(),t.TgZ(96,"input",28),t.NdJ("change",function(l){return i.onChangeDays(l)}),t.qZA()()(),t.TgZ(97,"div",23)(98,"mat-form-field",8)(99,"mat-label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t._UZ(102,"input",29),t.qZA()(),t.TgZ(103,"div",23)(104,"mat-form-field",8)(105,"mat-label"),t._uU(106),t.ALo(107,"translate"),t.qZA(),t._UZ(108,"input",30),t.qZA()()()()(),t.TgZ(109,"mat-tab",31),t.ALo(110,"translate"),t.TgZ(111,"div",4)(112,"div",5),t._UZ(113,"mat-label"),t.TgZ(114,"div",6)(115,"div",32)(116,"mat-form-field",8)(117,"mat-label"),t._uU(118),t.ALo(119,"translate"),t.qZA(),t.TgZ(120,"mat-select",33),t.NdJ("selectionChange",function(l){return i.readOwner(l)}),t.ALo(121,"translate"),t.TgZ(122,"mat-option",25),t._uU(123,"-"),t.qZA(),t.YNc(124,qr,2,2,"mat-option",34),t.qZA()()(),t.TgZ(125,"div",35)(126,"mat-form-field",8)(127,"mat-label"),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.TgZ(130,"mat-select",36),t.ALo(131,"translate"),t.TgZ(132,"mat-option",25),t._uU(133,"-"),t.qZA(),t.YNc(134,Er,2,2,"mat-option",34),t.qZA()()()(),t.TgZ(135,"div",6)(136,"div",37)(137,"mat-form-field",8)(138,"mat-label"),t._uU(139),t.ALo(140,"translate"),t.qZA(),t.TgZ(141,"mat-select",38),t.ALo(142,"translate"),t.TgZ(143,"mat-option",25),t._uU(144,"-"),t.qZA(),t.YNc(145,Pr,2,2,"mat-option",34),t.qZA()()()(),t.TgZ(146,"div",39)(147,"div",40),t.NdJ("keydown.enter",function(l){return i.onEnter(l)}),t.TgZ(148,"mat-form-field",8)(149,"mat-label"),t._uU(150),t.ALo(151,"translate"),t.qZA(),t.TgZ(152,"input",41,42),t.NdJ("keyup.enter",function(){t.CHM(n);const l=t.MAs(153);return t.KtG(i.searchByCode(l.value))}),t.qZA()()(),t.TgZ(154,"div",18)(155,"label"),t._uU(156),t.ALo(157,"translate"),t.qZA(),t.TgZ(158,"ng-select",43),t.NdJ("change",function(l){return i.readCustumer(l)}),t.ALo(159,"translate"),t.YNc(160,kr,2,2,"ng-option",34),t.qZA()(),t.TgZ(161,"div",44)(162,"mat-form-field",8)(163,"mat-label"),t._uU(164),t.ALo(165,"translate"),t.qZA(),t.TgZ(166,"mat-select",45),t.ALo(167,"translate"),t.TgZ(168,"mat-option",25),t._uU(169,"-"),t.qZA(),t.YNc(170,Br,2,2,"mat-option",34),t.qZA()()()()()(),t.TgZ(171,"div",46),t.YNc(172,Kr,3,1,"a",47),t.YNc(173,Jr,7,3,"div",48),t.qZA()(),t.TgZ(174,"mat-tab",49),t.ALo(175,"translate"),t.TgZ(176,"div")(177,"app-unit-selection-popup",50),t.NdJ("selectedUnitsChange",function(l){return i.onSelectedUnitsChange(l)})("selectedBranchChange",function(l){return i.onBuildingsPerBranchFromChild(l)})("selectedBuildingChange",function(l){return i.onUnitsPerBuildingFromChild(l)}),t.qZA()()(),t.TgZ(178,"mat-tab",51),t.ALo(179,"translate"),t.TgZ(180,"div",4)(181,"div",5),t._UZ(182,"mat-label"),t.TgZ(183,"div",6)(184,"div",23)(185,"mat-form-field",8)(186,"mat-label"),t._uU(187),t.ALo(188,"translate"),t.qZA(),t.TgZ(189,"input",52),t.NdJ("change",function(l){return i.onChangeContractValue(l)}),t.qZA()()(),t.TgZ(190,"div",23)(191,"mat-form-field",8)(192,"mat-label"),t._uU(193),t.ALo(194,"translate"),t.qZA(),t.TgZ(195,"input",53),t.NdJ("change",function(l){return i.onChangePayEvery(l)}),t.qZA()()(),t.TgZ(196,"div",23)(197,"mat-form-field",8)(198,"mat-label"),t._uU(199),t.ALo(200,"translate"),t.qZA(),t._UZ(201,"input",54),t.qZA()()()(),t.TgZ(202,"div",6)(203,"div",55)(204,"mat-form-field",8)(205,"mat-label"),t._uU(206),t.ALo(207,"translate"),t.qZA(),t._UZ(208,"input",56),t.qZA()(),t.TgZ(209,"div",55)(210,"mat-form-field",8)(211,"mat-label"),t._uU(212),t.ALo(213,"translate"),t.qZA(),t._UZ(214,"input",57),t.qZA()(),t.TgZ(215,"div",55)(216,"mat-form-field",8)(217,"mat-label"),t._uU(218),t.ALo(219,"translate"),t.qZA(),t._UZ(220,"input",58),t.qZA()(),t.TgZ(221,"div",55)(222,"mat-form-field",8)(223,"mat-label"),t._uU(224),t.ALo(225,"translate"),t.qZA(),t._UZ(226,"input",59),t.qZA()()(),t.TgZ(227,"div",6)(228,"div",60)(229,"mat-form-field",8)(230,"mat-label"),t._uU(231),t.ALo(232,"translate"),t.qZA(),t._UZ(233,"input",61),t.qZA()()(),t.TgZ(234,"div",6)(235,"div",23)(236,"mat-form-field",8)(237,"mat-label"),t._uU(238),t.ALo(239,"translate"),t.qZA(),t._UZ(240,"input",62),t.qZA()(),t.TgZ(241,"div",23)(242,"mat-form-field",8)(243,"mat-label"),t._uU(244),t.ALo(245,"translate"),t.qZA(),t._UZ(246,"input",63),t.qZA()(),t.TgZ(247,"div",23)(248,"mat-form-field",8)(249,"mat-label"),t._uU(250),t.ALo(251,"translate"),t.qZA(),t._UZ(252,"input",64),t.qZA()()(),t.TgZ(253,"div",6)(254,"div",23)(255,"mat-form-field",8)(256,"mat-label"),t._uU(257),t.ALo(258,"translate"),t.qZA(),t._UZ(259,"input",65),t.qZA()(),t.TgZ(260,"div",23)(261,"mat-form-field",8)(262,"mat-label"),t._uU(263),t.ALo(264,"translate"),t.qZA(),t._UZ(265,"input",66),t.qZA()(),t.TgZ(266,"div",23)(267,"mat-form-field",8)(268,"mat-label"),t._uU(269),t.ALo(270,"translate"),t.qZA(),t._UZ(271,"input",67),t.qZA()()()()(),t.TgZ(272,"mat-tab",68),t.ALo(273,"translate"),t.TgZ(274,"div",4)(275,"mat-checkbox",69),t._uU(276),t.ALo(277,"translate"),t.qZA(),t.TgZ(278,"mat-checkbox",70),t._uU(279),t.ALo(280,"translate"),t.qZA(),t.TgZ(281,"mat-checkbox",71),t._uU(282),t.ALo(283,"translate"),t.qZA(),t.TgZ(284,"mat-checkbox",72),t._uU(285),t.ALo(286,"translate"),t.qZA()()(),t.TgZ(287,"mat-tab",73),t.ALo(288,"translate"),t.TgZ(289,"div",74)(290,"div",75),t._UZ(291,"img",76),t.TgZ(292,"input",77,78),t.NdJ("change",function(l){return i.onFileChange(l.target.files)}),t.qZA(),t.TgZ(294,"button",79),t.NdJ("click",function(){t.CHM(n);const l=t.MAs(293);return t.KtG(l.click())}),t._uU(295),t.ALo(296,"translate"),t.qZA()(),t._UZ(297,"mat-divider")(298,"input-file",80),t.qZA()()()(),t._UZ(299,"br"),t.TgZ(300,"div",81)(301,"div",6),t.YNc(302,Vr,3,4,"button",82),t.qZA()()}if(2&e){const n=t.MAs(36),a=t.MAs(46),l=t.MAs(55);t.Q6J("ngIf","T"==i.isRenewContract),t.xp6(1),t.Q6J("ngIf","T"!=i.isRenewContract),t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(5,84,"HTML.TAB_BASIC")),t.xp6(9),t.hij(" ",t.lcZ(14,86,"HTML.CODE_Contract"),""),t.xp6(6),t.hij(" ",t.lcZ(20,88,"HTML.SUBCODE"),""),t.xp6(6),t.Oqu(t.lcZ(26,90,"HTML.ContractNoOfMonths")),t.xp6(6),t.Oqu(t.lcZ(32,92,"HTML.ContractDate")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(7),t.Oqu(t.lcZ(42,94,"HTML.ContractStartDate")),t.xp6(2),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(6),t.Oqu(t.lcZ(51,96,"HTML.ContractEndDate")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(7),t.Oqu(t.lcZ(61,98,"HTML.ContractStatus")),t.xp6(2),t.s9C("placeholder",t.lcZ(63,100,"HTML.ContractStatus")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(68,102,"OPTIONS.NEW")),t.xp6(2),t.Q6J("value","R"),t.xp6(1),t.Oqu(t.lcZ(71,104,"OPTIONS.ReNew")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(74,106,"OPTIONS.Canceld")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(77,108,"OPTIONS.Finished")),t.xp6(5),t.Oqu(t.lcZ(82,110,"HTML.ContractEjarCode")),t.xp6(6),t.Oqu(t.lcZ(88,112,"HTML.ContractAlarmStartDate")),t.xp6(7),t.hij(" ",t.lcZ(95,114,"HTML.ContractNoOfDaysForAlarm"),""),t.xp6(6),t.hij(" ",t.lcZ(101,116,"HTML.ContractNoOfDaysForEjarAlarm"),""),t.xp6(6),t.hij(" ",t.lcZ(107,118,"HTML.ContractAlarmCounter"),""),t.xp6(3),t.s9C("label",t.lcZ(110,120,"HTML.TAB_ContractPersons")),t.xp6(9),t.hij(" ",t.lcZ(119,122,"HTML.OWNER"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(121,124,"HTML.OWNER")),t.xp6(4),t.Q6J("ngForOf",i.AllOwners),t.xp6(4),t.hij(" ",t.lcZ(129,126,"HTML.OwnerRepresentative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(131,128,"HTML.OwnerRepresentative")),t.xp6(4),t.Q6J("ngForOf",i.AllRepresentativeForOwner),t.xp6(5),t.hij(" ",t.lcZ(140,130,"HTML.BankAccounts"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(142,132,"HTML.BankAccounts")),t.xp6(4),t.Q6J("ngForOf",i.AllBankAccountsForOwner),t.xp6(5),t.Oqu(t.lcZ(151,134,"HTML.CODE_TENANT")),t.xp6(6),t.hij(" ",t.lcZ(157,136,"HTML.TENANT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(159,138,"HTML.TENANT")),t.xp6(2),t.Q6J("ngForOf",i.AllTenants),t.xp6(4),t.hij(" ",t.lcZ(165,140,"HTML.TenantRepresentative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(167,142,"HTML.TenantRepresentative")),t.xp6(4),t.Q6J("ngForOf",i.AllRepresentativeForCustomer),t.xp6(2),t.Q6J("ngIf",i.contractForDisplay.id&&i.fileToUpload&&i.can("view_ejar_pdf")),t.xp6(1),t.Q6J("ngIf",i.can("add_ejar_pdf")),t.xp6(1),t.s9C("label",t.lcZ(175,144,"HTML.TAB_ContractUnit")),t.xp6(3),t.Q6J("AllBranches",i.AllBranches)("AllBuilding",i.AllBuilding)("AllUnitsForBuilding",i.AllUnitsForBuilding)("SelectedUnitsRetrieve",i.RetrievedSelectedUnits)("AddRetrieve",i.addRetrieveInd)("curUserData",i.curUserData)("userPerm",i.userPerm),t.xp6(1),t.s9C("label",t.lcZ(179,146,"HTML.TAB_ContractValues")),t.xp6(9),t.Oqu(t.lcZ(188,148,"HTML.ContractValue")),t.xp6(6),t.Oqu(t.lcZ(194,150,"HTML.PayEveryMonthesNo")),t.xp6(6),t.Oqu(t.lcZ(200,152,"HTML.InstallmentValue")),t.xp6(7),t.Oqu(t.lcZ(207,154,"HTML.InsuranceValue")),t.xp6(6),t.Oqu(t.lcZ(213,156,"HTML.SeekingValue")),t.xp6(6),t.Oqu(t.lcZ(219,158,"HTML.MonthlyExpense")),t.xp6(6),t.Oqu(t.lcZ(225,160,"HTML.OtherValue")),t.xp6(7),t.Oqu(t.lcZ(232,162,"HTML.ExpenseDesc")),t.xp6(7),t.Oqu(t.lcZ(239,164,"HTML.ElectricCounterReading")),t.xp6(6),t.Oqu(t.lcZ(245,166,"HTML.WaterCounterReading")),t.xp6(6),t.Oqu(t.lcZ(251,168,"HTML.GasCounterReading")),t.xp6(7),t.Oqu(t.lcZ(258,170,"HTML.MonthlyElectricValue")),t.xp6(6),t.Oqu(t.lcZ(264,172,"HTML.MonthlyWaterValue")),t.xp6(6),t.Oqu(t.lcZ(270,174,"HTML.MonthlyGasValue")),t.xp6(3),t.s9C("label",t.lcZ(273,176,"HTML.TAB_SETTINGS")),t.xp6(4),t.Oqu(t.lcZ(277,178,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(280,180,"HTML.BLOCKED")),t.xp6(3),t.Oqu(t.lcZ(283,182,"HTML.InsuranceAffectAccount")),t.xp6(3),t.Oqu(t.lcZ(286,184,"HTML.SeekingAffectAccount")),t.xp6(2),t.s9C("label",t.lcZ(288,186,"HTML.TAB_DOCS")),t.xp6(4),t.Q6J("src",i.defaultDocImage,t.LSH),t.xp6(4),t.Oqu(t.lcZ(296,188,"HTML.AddPic")),t.xp6(7),t.Q6J("ngIf",i.contractForDisplay.id&&i.can("change_rentcontracts")||!i.contractForDisplay.id&&i.can("add_rentcontracts"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,C.sg,C.O5,d.sg,d.u,d.x0,T.xw,T.SQ,T.Wh,T.yH,q.ey,w.lW,Mt.oG,Q.Mq,Q.hl,Q.nW,y.ZT,y.uh,y.H8,$.Hw,Z.Nt,v.KE,v.hX,v.R9,X.d,D.gD,bt.uX,bt.SP,Ht.tW,At.w9,At.jq,ie,O.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.file-input{display:none}.custom-button{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px}.custom-button:hover{background-color:#0056b3}\n"],encapsulation:2});const Le=[{path:"",redirectTo:"tenant-list",pathMatch:"full"},{path:"tenant-list",component:_,data:{breadcrumb:"Tenants"}},{path:"tenant-add",component:qt,data:{breadcrumb:"AddTenant"}},{path:"tenant-add/:id",component:qt,data:{breadcrumb:"EditTenant"}},{path:"businesstenant-list",component:te,data:{breadcrumb:"TenantBusiness"}},{path:"businesstenant-add",component:Pt,data:{breadcrumb:"AddTenantBusiness"}},{path:"businesstenant-add/:id",component:Pt,data:{breadcrumb:"EditTenantBusiness"}},{path:"owner-list",component:$t,data:{breadcrumb:"Owners"}},{path:"owner-add",component:wt,data:{breadcrumb:"AddOwner"}},{path:"owner-add/:id",component:wt,data:{breadcrumb:"EditOwner"}},{path:"contract-list",component:Lt,data:{breadcrumb:"RentContracts"}},{path:"contract-list/:tenantid",component:Lt,data:{breadcrumb:"RentContractsForTenant"}},{path:"contract-add",component:xt,data:{breadcrumb:"AddContract"}},{path:"contract-add/:id",component:xt,data:{breadcrumb:"EditContract"}},{path:"contract-add/renew/:id",component:xt,data:{breadcrumb:"RenewContract",parentID:"T"}},{path:"installment-list/:id",component:Yt,data:{breadcrumb:"ContractInstallments"}},{path:"statements-list/:id",component:Gt,data:{breadcrumb:"TenantStatements"}},{path:"tenant-leave",component:Et,data:{breadcrumb:"AddTenantLeave"}},{path:"tenant-leave/:id",component:Et,data:{breadcrumb:"EditTenantLeave"}},{path:"print-einvoice",component:Xt,data:{breadcrumb:"E-Invoice"}},{path:"contractComplex-list",component:kt,data:{breadcrumb:"ContractsMultiUnits"}},{path:"contractComplex-list/:tenantid",component:kt,data:{breadcrumb:"RentContractsForTenant"}},{path:"contractComplex-add",component:Ft,data:{breadcrumb:"AddContract"}},{path:"contractComplex-add/:id",component:Ft,data:{breadcrumb:"EditContract"}},{path:"contractComplex-add/renew/:id",component:Ft,data:{breadcrumb:"RenewContract",parentID:"T"}}];class Bt{}Bt.\u0275fac=function(e){return new(e||Bt)},Bt.\u0275mod=t.oAB({type:Bt}),Bt.\u0275inj=t.cJS({imports:[Oe.JF,d.u5,Ut.Fk,et.JX,ci.D,De.N,C.ez,P.Bz.forChild(Le),d.UX,li.m,et.JX,bn.kz,Ht.Y$,At.A0]})},5343:(le,ut)=>{"use strict";ut.byteLength=function N(Z){var v=I(Z),O=v[1];return 3*(v[0]+O)/4-O},ut.toByteArray=function R(Z){var v,at,D=I(Z),O=D[0],nt=D[1],j=new y(function h(Z,v,D){return 3*(v+D)/4-D}(0,O,nt)),ot=0,_t=nt>0?O-4:O;for(at=0;at<_t;at+=4)v=C[Z.charCodeAt(at)]<<18|C[Z.charCodeAt(at+1)]<<12|C[Z.charCodeAt(at+2)]<<6|C[Z.charCodeAt(at+3)],j[ot++]=v>>16&255,j[ot++]=v>>8&255,j[ot++]=255&v;return 2===nt&&(v=C[Z.charCodeAt(at)]<<2|C[Z.charCodeAt(at+1)]>>4,j[ot++]=255&v),1===nt&&(v=C[Z.charCodeAt(at)]<<10|C[Z.charCodeAt(at+1)]<<4|C[Z.charCodeAt(at+2)]>>2,j[ot++]=v>>8&255,j[ot++]=255&v),j},ut.fromByteArray=function w(Z){for(var v,D=Z.length,O=D%3,nt=[],j=16383,ot=0,_t=D-O;ot<_t;ot+=j)nt.push(q(Z,ot,ot+j>_t?_t:ot+j));return 1===O?nt.push(b[(v=Z[D-1])>>2]+b[v<<4&63]+"=="):2===O&&nt.push(b[(v=(Z[D-2]<<8)+Z[D-1])>>10]+b[v>>4&63]+b[v<<2&63]+"="),nt.join("")};for(var b=[],C=[],y=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=0,t=d.length;B<t;++B)b[B]=d[B],C[d.charCodeAt(B)]=B;function I(Z){var v=Z.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var D=Z.indexOf("=");return-1===D&&(D=v),[D,D===v?0:4-D%4]}function T(Z){return b[Z>>18&63]+b[Z>>12&63]+b[Z>>6&63]+b[63&Z]}function q(Z,v,D){for(var nt=[],j=v;j<D;j+=3)nt.push(T((Z[j]<<16&16711680)+(Z[j+1]<<8&65280)+(255&Z[j+2])));return nt.join("")}C["-".charCodeAt(0)]=62,C["_".charCodeAt(0)]=63},3172:(le,ut,b)=>{"use strict";const y=b(5343),d=b(8461),B="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;ut.lW=h,ut.h2=50;const t=2147483647;function N(c){if(c>t)throw new RangeError('The value "'+c+'" is invalid for option "size"');const r=new Uint8Array(c);return Object.setPrototypeOf(r,h.prototype),r}function h(c,r,s){if("number"==typeof c){if("string"==typeof r)throw new TypeError('The "string" argument must be of type string. Received type number');return w(c)}return R(c,r,s)}function R(c,r,s){if("string"==typeof c)return function Z(c,r){if(("string"!=typeof r||""===r)&&(r="utf8"),!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);const s=0|_t(c,r);let u=N(s);const m=u.write(c,r);return m!==s&&(u=u.slice(0,m)),u}(c,r);if(ArrayBuffer.isView(c))return function D(c){if(ht(c,Uint8Array)){const r=new Uint8Array(c);return O(r.buffer,r.byteOffset,r.byteLength)}return v(c)}(c);if(null==c)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(ht(c,ArrayBuffer)||c&&ht(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ht(c,SharedArrayBuffer)||c&&ht(c.buffer,SharedArrayBuffer)))return O(c,r,s);if("number"==typeof c)throw new TypeError('The "value" argument must not be of type number. Received type number');const u=c.valueOf&&c.valueOf();if(null!=u&&u!==c)return h.from(u,r,s);const m=function nt(c){if(h.isBuffer(c)){const r=0|j(c.length),s=N(r);return 0===s.length||c.copy(s,0,0,r),s}return void 0!==c.length?"number"!=typeof c.length||Jt(c.length)?N(0):v(c):"Buffer"===c.type&&Array.isArray(c.data)?v(c.data):void 0}(c);if(m)return m;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof c[Symbol.toPrimitive])return h.from(c[Symbol.toPrimitive]("string"),r,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}function T(c){if("number"!=typeof c)throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function w(c){return T(c),N(c<0?0:0|j(c))}function v(c){const r=c.length<0?0:0|j(c.length),s=N(r);for(let u=0;u<r;u+=1)s[u]=255&c[u];return s}function O(c,r,s){if(r<0||c.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<r+(s||0))throw new RangeError('"length" is outside of buffer bounds');let u;return u=void 0===r&&void 0===s?new Uint8Array(c):void 0===s?new Uint8Array(c,r):new Uint8Array(c,r,s),Object.setPrototypeOf(u,h.prototype),u}function j(c){if(c>=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|c}function _t(c,r){if(h.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||ht(c,ArrayBuffer))return c.byteLength;if("string"!=typeof c)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);const s=c.length,u=arguments.length>2&&!0===arguments[2];if(!u&&0===s)return 0;let m=!1;for(;;)switch(r){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return rt(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return se(c).length;default:if(m)return u?-1:rt(c).length;r=(""+r).toLowerCase(),m=!0}}function at(c,r,s){let u=!1;if((void 0===r||r<0)&&(r=0),r>this.length||((void 0===s||s>this.length)&&(s=this.length),s<=0)||(s>>>=0)<=(r>>>=0))return"";for(c||(c="utf8");;)switch(c){case"hex":return lt(this,r,s);case"utf8":case"utf-8":return ae(this,r,s);case"ascii":return Ct(this,r,s);case"latin1":case"binary":return ft(this,r,s);case"base64":return he(this,r,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ct(this,r,s);default:if(u)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),u=!0}}function vt(c,r,s){const u=c[r];c[r]=c[s],c[s]=u}function ne(c,r,s,u,m){if(0===c.length)return-1;if("string"==typeof s?(u=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),Jt(s=+s)&&(s=m?0:c.length-1),s<0&&(s=c.length+s),s>=c.length){if(m)return-1;s=c.length-1}else if(s<0){if(!m)return-1;s=0}if("string"==typeof r&&(r=h.from(r,u)),h.isBuffer(r))return 0===r.length?-1:oe(c,r,s,u,m);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?m?Uint8Array.prototype.indexOf.call(c,r,s):Uint8Array.prototype.lastIndexOf.call(c,r,s):oe(c,[r],s,u,m);throw new TypeError("val must be string, number or Buffer")}function oe(c,r,s,u,m){let J,g=1,_=c.length,F=r.length;if(void 0!==u&&("ucs2"===(u=String(u).toLowerCase())||"ucs-2"===u||"utf16le"===u||"utf-16le"===u)){if(c.length<2||r.length<2)return-1;g=2,_/=2,F/=2,s/=2}function Y(G,k){return 1===g?G[k]:G.readUInt16BE(k*g)}if(m){let G=-1;for(J=s;J<_;J++)if(Y(c,J)===Y(r,-1===G?0:J-G)){if(-1===G&&(G=J),J-G+1===F)return G*g}else-1!==G&&(J-=J-G),G=-1}else for(s+F>_&&(s=_-F),J=s;J>=0;J--){let G=!0;for(let k=0;k<F;k++)if(Y(c,J+k)!==Y(r,k)){G=!1;break}if(G)return J}return-1}function ce(c,r,s,u){s=Number(s)||0;const m=c.length-s;u?(u=Number(u))>m&&(u=m):u=m;const g=r.length;let _;for(u>g/2&&(u=g/2),_=0;_<u;++_){const F=parseInt(r.substr(2*_,2),16);if(Jt(F))return _;c[s+_]=F}return _}function ue(c,r,s,u){return Dt(rt(r,c.length-s),c,s,u)}function de(c,r,s,u){return Dt(function Zt(c){const r=[];for(let s=0;s<c.length;++s)r.push(255&c.charCodeAt(s));return r}(r),c,s,u)}function me(c,r,s,u){return Dt(se(r),c,s,u)}function pe(c,r,s,u){return Dt(function _e(c,r){let s,u,m;const g=[];for(let _=0;_<c.length&&!((r-=2)<0);++_)s=c.charCodeAt(_),u=s>>8,m=s%256,g.push(m),g.push(u);return g}(r,c.length-s),c,s,u)}function he(c,r,s){return y.fromByteArray(0===r&&s===c.length?c:c.slice(r,s))}function ae(c,r,s){s=Math.min(c.length,s);const u=[];let m=r;for(;m<s;){const g=c[m];let _=null,F=g>239?4:g>223?3:g>191?2:1;if(m+F<=s){let Y,J,G,k;switch(F){case 1:g<128&&(_=g);break;case 2:Y=c[m+1],128==(192&Y)&&(k=(31&g)<<6|63&Y,k>127&&(_=k));break;case 3:Y=c[m+1],J=c[m+2],128==(192&Y)&&128==(192&J)&&(k=(15&g)<<12|(63&Y)<<6|63&J,k>2047&&(k<55296||k>57343)&&(_=k));break;case 4:Y=c[m+1],J=c[m+2],G=c[m+3],128==(192&Y)&&128==(192&J)&&128==(192&G)&&(k=(15&g)<<18|(63&Y)<<12|(63&J)<<6|63&G,k>65535&&k<1114112&&(_=k))}}null===_?(_=65533,F=1):_>65535&&(_-=65536,u.push(_>>>10&1023|55296),_=56320|1023&_),u.push(_),m+=F}return function ge(c){const r=c.length;if(r<=re)return String.fromCharCode.apply(String,c);let s="",u=0;for(;u<r;)s+=String.fromCharCode.apply(String,c.slice(u,u+=re));return s}(u)}!(h.TYPED_ARRAY_SUPPORT=function I(){try{const c=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(c,r),42===c.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(c,r,s){return R(c,r,s)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(c,r,s){return function q(c,r,s){return T(c),c<=0?N(c):void 0!==r?"string"==typeof s?N(c).fill(r,s):N(c).fill(r):N(c)}(c,r,s)},h.allocUnsafe=function(c){return w(c)},h.allocUnsafeSlow=function(c){return w(c)},h.isBuffer=function(r){return null!=r&&!0===r._isBuffer&&r!==h.prototype},h.compare=function(r,s){if(ht(r,Uint8Array)&&(r=h.from(r,r.offset,r.byteLength)),ht(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),!h.isBuffer(r)||!h.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===s)return 0;let u=r.length,m=s.length;for(let g=0,_=Math.min(u,m);g<_;++g)if(r[g]!==s[g]){u=r[g],m=s[g];break}return u<m?-1:m<u?1:0},h.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(r,s){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return h.alloc(0);let u;if(void 0===s)for(s=0,u=0;u<r.length;++u)s+=r[u].length;const m=h.allocUnsafe(s);let g=0;for(u=0;u<r.length;++u){let _=r[u];if(ht(_,Uint8Array))g+_.length>m.length?(h.isBuffer(_)||(_=h.from(_)),_.copy(m,g)):Uint8Array.prototype.set.call(m,_,g);else{if(!h.isBuffer(_))throw new TypeError('"list" argument must be an Array of Buffers');_.copy(m,g)}g+=_.length}return m},h.byteLength=_t,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<r;s+=2)vt(this,s,s+1);return this},h.prototype.swap32=function(){const r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<r;s+=4)vt(this,s,s+3),vt(this,s+1,s+2);return this},h.prototype.swap64=function(){const r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<r;s+=8)vt(this,s,s+7),vt(this,s+1,s+6),vt(this,s+2,s+5),vt(this,s+3,s+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){const r=this.length;return 0===r?"":0===arguments.length?ae(this,0,r):at.apply(this,arguments)},h.prototype.equals=function(r){if(!h.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||0===h.compare(this,r)},h.prototype.inspect=function(){let r="";const s=ut.h2;return r=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(r+=" ... "),"<Buffer "+r+">"},B&&(h.prototype[B]=h.prototype.inspect),h.prototype.compare=function(r,s,u,m,g){if(ht(r,Uint8Array)&&(r=h.from(r,r.offset,r.byteLength)),!h.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(void 0===s&&(s=0),void 0===u&&(u=r?r.length:0),void 0===m&&(m=0),void 0===g&&(g=this.length),s<0||u>r.length||m<0||g>this.length)throw new RangeError("out of range index");if(m>=g&&s>=u)return 0;if(m>=g)return-1;if(s>=u)return 1;if(this===r)return 0;let _=(g>>>=0)-(m>>>=0),F=(u>>>=0)-(s>>>=0);const Y=Math.min(_,F),J=this.slice(m,g),G=r.slice(s,u);for(let k=0;k<Y;++k)if(J[k]!==G[k]){_=J[k],F=G[k];break}return _<F?-1:F<_?1:0},h.prototype.includes=function(r,s,u){return-1!==this.indexOf(r,s,u)},h.prototype.indexOf=function(r,s,u){return ne(this,r,s,u,!0)},h.prototype.lastIndexOf=function(r,s,u){return ne(this,r,s,u,!1)},h.prototype.write=function(r,s,u,m){if(void 0===s)m="utf8",u=this.length,s=0;else if(void 0===u&&"string"==typeof s)m=s,u=this.length,s=0;else{if(!isFinite(s))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");s>>>=0,isFinite(u)?(u>>>=0,void 0===m&&(m="utf8")):(m=u,u=void 0)}const g=this.length-s;if((void 0===u||u>g)&&(u=g),r.length>0&&(u<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");m||(m="utf8");let _=!1;for(;;)switch(m){case"hex":return ce(this,r,s,u);case"utf8":case"utf-8":return ue(this,r,s,u);case"ascii":case"latin1":case"binary":return de(this,r,s,u);case"base64":return me(this,r,s,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,r,s,u);default:if(_)throw new TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),_=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const re=4096;function Ct(c,r,s){let u="";s=Math.min(c.length,s);for(let m=r;m<s;++m)u+=String.fromCharCode(127&c[m]);return u}function ft(c,r,s){let u="";s=Math.min(c.length,s);for(let m=r;m<s;++m)u+=String.fromCharCode(c[m]);return u}function lt(c,r,s){const u=c.length;(!r||r<0)&&(r=0),(!s||s<0||s>u)&&(s=u);let m="";for(let g=r;g<s;++g)m+=Ce[c[g]];return m}function ct(c,r,s){const u=c.slice(r,s);let m="";for(let g=0;g<u.length-1;g+=2)m+=String.fromCharCode(u[g]+256*u[g+1]);return m}function L(c,r,s){if(c%1!=0||c<0)throw new RangeError("offset is not uint");if(c+r>s)throw new RangeError("Trying to access beyond buffer length")}function E(c,r,s,u,m,g){if(!h.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>m||r<g)throw new RangeError('"value" argument is out of bounds');if(s+u>c.length)throw new RangeError("Index out of range")}function x(c,r,s,u,m){dt(r,u,m,c,s,7);let g=Number(r&BigInt(4294967295));c[s++]=g,g>>=8,c[s++]=g,g>>=8,c[s++]=g,g>>=8,c[s++]=g;let _=Number(r>>BigInt(32)&BigInt(4294967295));return c[s++]=_,_>>=8,c[s++]=_,_>>=8,c[s++]=_,_>>=8,c[s++]=_,s}function H(c,r,s,u,m){dt(r,u,m,c,s,7);let g=Number(r&BigInt(4294967295));c[s+7]=g,g>>=8,c[s+6]=g,g>>=8,c[s+5]=g,g>>=8,c[s+4]=g;let _=Number(r>>BigInt(32)&BigInt(4294967295));return c[s+3]=_,_>>=8,c[s+2]=_,_>>=8,c[s+1]=_,_>>=8,c[s]=_,s+8}function mt(c,r,s,u,m,g){if(s+u>c.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function it(c,r,s,u,m){return r=+r,s>>>=0,m||mt(c,0,s,4),d.write(c,r,s,u,23,4),s+4}function P(c,r,s,u,m){return r=+r,s>>>=0,m||mt(c,0,s,8),d.write(c,r,s,u,52,8),s+8}h.prototype.slice=function(r,s){const u=this.length;(r=~~r)<0?(r+=u)<0&&(r=0):r>u&&(r=u),(s=void 0===s?u:~~s)<0?(s+=u)<0&&(s=0):s>u&&(s=u),s<r&&(s=r);const m=this.subarray(r,s);return Object.setPrototypeOf(m,h.prototype),m},h.prototype.readUintLE=h.prototype.readUIntLE=function(r,s,u){r>>>=0,s>>>=0,u||L(r,s,this.length);let m=this[r],g=1,_=0;for(;++_<s&&(g*=256);)m+=this[r+_]*g;return m},h.prototype.readUintBE=h.prototype.readUIntBE=function(r,s,u){r>>>=0,s>>>=0,u||L(r,s,this.length);let m=this[r+--s],g=1;for(;s>0&&(g*=256);)m+=this[r+--s]*g;return m},h.prototype.readUint8=h.prototype.readUInt8=function(r,s){return r>>>=0,s||L(r,1,this.length),this[r]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(r,s){return r>>>=0,s||L(r,2,this.length),this[r]|this[r+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(r,s){return r>>>=0,s||L(r,2,this.length),this[r]<<8|this[r+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(r,s){return r>>>=0,s||L(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(r,s){return r>>>=0,s||L(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},h.prototype.readBigUInt64LE=Tt(function(r){W(r>>>=0,"offset");const s=this[r],u=this[r+7];(void 0===s||void 0===u)&&$(r,this.length-8);const m=s+256*this[++r]+65536*this[++r]+this[++r]*2**24,g=this[++r]+256*this[++r]+65536*this[++r]+u*2**24;return BigInt(m)+(BigInt(g)<<BigInt(32))}),h.prototype.readBigUInt64BE=Tt(function(r){W(r>>>=0,"offset");const s=this[r],u=this[r+7];(void 0===s||void 0===u)&&$(r,this.length-8);const m=s*2**24+65536*this[++r]+256*this[++r]+this[++r],g=this[++r]*2**24+65536*this[++r]+256*this[++r]+u;return(BigInt(m)<<BigInt(32))+BigInt(g)}),h.prototype.readIntLE=function(r,s,u){r>>>=0,s>>>=0,u||L(r,s,this.length);let m=this[r],g=1,_=0;for(;++_<s&&(g*=256);)m+=this[r+_]*g;return g*=128,m>=g&&(m-=Math.pow(2,8*s)),m},h.prototype.readIntBE=function(r,s,u){r>>>=0,s>>>=0,u||L(r,s,this.length);let m=s,g=1,_=this[r+--m];for(;m>0&&(g*=256);)_+=this[r+--m]*g;return g*=128,_>=g&&(_-=Math.pow(2,8*s)),_},h.prototype.readInt8=function(r,s){return r>>>=0,s||L(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},h.prototype.readInt16LE=function(r,s){r>>>=0,s||L(r,2,this.length);const u=this[r]|this[r+1]<<8;return 32768&u?4294901760|u:u},h.prototype.readInt16BE=function(r,s){r>>>=0,s||L(r,2,this.length);const u=this[r+1]|this[r]<<8;return 32768&u?4294901760|u:u},h.prototype.readInt32LE=function(r,s){return r>>>=0,s||L(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},h.prototype.readInt32BE=function(r,s){return r>>>=0,s||L(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},h.prototype.readBigInt64LE=Tt(function(r){W(r>>>=0,"offset");const s=this[r],u=this[r+7];return(void 0===s||void 0===u)&&$(r,this.length-8),(BigInt(this[r+4]+256*this[r+5]+65536*this[r+6]+(u<<24))<<BigInt(32))+BigInt(s+256*this[++r]+65536*this[++r]+this[++r]*2**24)}),h.prototype.readBigInt64BE=Tt(function(r){W(r>>>=0,"offset");const s=this[r],u=this[r+7];(void 0===s||void 0===u)&&$(r,this.length-8);const m=(s<<24)+65536*this[++r]+256*this[++r]+this[++r];return(BigInt(m)<<BigInt(32))+BigInt(this[++r]*2**24+65536*this[++r]+256*this[++r]+u)}),h.prototype.readFloatLE=function(r,s){return r>>>=0,s||L(r,4,this.length),d.read(this,r,!0,23,4)},h.prototype.readFloatBE=function(r,s){return r>>>=0,s||L(r,4,this.length),d.read(this,r,!1,23,4)},h.prototype.readDoubleLE=function(r,s){return r>>>=0,s||L(r,8,this.length),d.read(this,r,!0,52,8)},h.prototype.readDoubleBE=function(r,s){return r>>>=0,s||L(r,8,this.length),d.read(this,r,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(r,s,u,m){r=+r,s>>>=0,u>>>=0,m||E(this,r,s,u,Math.pow(2,8*u)-1,0);let g=1,_=0;for(this[s]=255&r;++_<u&&(g*=256);)this[s+_]=r/g&255;return s+u},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(r,s,u,m){r=+r,s>>>=0,u>>>=0,m||E(this,r,s,u,Math.pow(2,8*u)-1,0);let g=u-1,_=1;for(this[s+g]=255&r;--g>=0&&(_*=256);)this[s+g]=r/_&255;return s+u},h.prototype.writeUint8=h.prototype.writeUInt8=function(r,s,u){return r=+r,s>>>=0,u||E(this,r,s,1,255,0),this[s]=255&r,s+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(r,s,u){return r=+r,s>>>=0,u||E(this,r,s,2,65535,0),this[s]=255&r,this[s+1]=r>>>8,s+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(r,s,u){return r=+r,s>>>=0,u||E(this,r,s,2,65535,0),this[s]=r>>>8,this[s+1]=255&r,s+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(r,s,u){return r=+r,s>>>=0,u||E(this,r,s,4,4294967295,0),this[s+3]=r>>>24,this[s+2]=r>>>16,this[s+1]=r>>>8,this[s]=255&r,s+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(r,s,u){return r=+r,s>>>=0,u||E(this,r,s,4,4294967295,0),this[s]=r>>>24,this[s+1]=r>>>16,this[s+2]=r>>>8,this[s+3]=255&r,s+4},h.prototype.writeBigUInt64LE=Tt(function(r,s=0){return x(this,r,s,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Tt(function(r,s=0){return H(this,r,s,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(r,s,u,m){if(r=+r,s>>>=0,!m){const Y=Math.pow(2,8*u-1);E(this,r,s,u,Y-1,-Y)}let g=0,_=1,F=0;for(this[s]=255&r;++g<u&&(_*=256);)r<0&&0===F&&0!==this[s+g-1]&&(F=1),this[s+g]=(r/_>>0)-F&255;return s+u},h.prototype.writeIntBE=function(r,s,u,m){if(r=+r,s>>>=0,!m){const Y=Math.pow(2,8*u-1);E(this,r,s,u,Y-1,-Y)}let g=u-1,_=1,F=0;for(this[s+g]=255&r;--g>=0&&(_*=256);)r<0&&0===F&&0!==this[s+g+1]&&(F=1),this[s+g]=(r/_>>0)-F&255;return s+u},h.prototype.writeInt8=function(r,s,u){return r=+r,s>>>=0,u||E(this,r,s,1,127,-128),r<0&&(r=255+r+1),this[s]=255&r,s+1},h.prototype.writeInt16LE=function(r,s,u){return r=+r,s>>>=0,u||E(this,r,s,2,32767,-32768),this[s]=255&r,this[s+1]=r>>>8,s+2},h.prototype.writeInt16BE=function(r,s,u){return r=+r,s>>>=0,u||E(this,r,s,2,32767,-32768),this[s]=r>>>8,this[s+1]=255&r,s+2},h.prototype.writeInt32LE=function(r,s,u){return r=+r,s>>>=0,u||E(this,r,s,4,2147483647,-2147483648),this[s]=255&r,this[s+1]=r>>>8,this[s+2]=r>>>16,this[s+3]=r>>>24,s+4},h.prototype.writeInt32BE=function(r,s,u){return r=+r,s>>>=0,u||E(this,r,s,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[s]=r>>>24,this[s+1]=r>>>16,this[s+2]=r>>>8,this[s+3]=255&r,s+4},h.prototype.writeBigInt64LE=Tt(function(r,s=0){return x(this,r,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Tt(function(r,s=0){return H(this,r,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(r,s,u){return it(this,r,s,!0,u)},h.prototype.writeFloatBE=function(r,s,u){return it(this,r,s,!1,u)},h.prototype.writeDoubleLE=function(r,s,u){return P(this,r,s,!0,u)},h.prototype.writeDoubleBE=function(r,s,u){return P(this,r,s,!1,u)},h.prototype.copy=function(r,s,u,m){if(!h.isBuffer(r))throw new TypeError("argument should be a Buffer");if(u||(u=0),!m&&0!==m&&(m=this.length),s>=r.length&&(s=r.length),s||(s=0),m>0&&m<u&&(m=u),m===u||0===r.length||0===this.length)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),r.length-s<m-u&&(m=r.length-s+u);const g=m-u;return this===r&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(s,u,m):Uint8Array.prototype.set.call(r,this.subarray(u,m),s),g},h.prototype.fill=function(r,s,u,m){if("string"==typeof r){if("string"==typeof s?(m=s,s=0,u=this.length):"string"==typeof u&&(m=u,u=this.length),void 0!==m&&"string"!=typeof m)throw new TypeError("encoding must be a string");if("string"==typeof m&&!h.isEncoding(m))throw new TypeError("Unknown encoding: "+m);if(1===r.length){const _=r.charCodeAt(0);("utf8"===m&&_<128||"latin1"===m)&&(r=_)}}else"number"==typeof r?r&=255:"boolean"==typeof r&&(r=Number(r));if(s<0||this.length<s||this.length<u)throw new RangeError("Out of range index");if(u<=s)return this;let g;if(s>>>=0,u=void 0===u?this.length:u>>>0,r||(r=0),"number"==typeof r)for(g=s;g<u;++g)this[g]=r;else{const _=h.isBuffer(r)?r:h.from(r,m),F=_.length;if(0===F)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(g=0;g<u-s;++g)this[g+s]=_[g%F]}return this};const tt={};function pt(c,r,s){tt[c]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:r.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,delete this.name}get code(){return c}set code(m){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:m,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}function Kt(c){let r="",s=c.length;const u="-"===c[0]?1:0;for(;s>=u+4;s-=3)r=`_${c.slice(s-3,s)}${r}`;return`${c.slice(0,s)}${r}`}function dt(c,r,s,u,m,g){if(c>s||c<r){const _="bigint"==typeof r?"n":"";let F;throw F=g>3?0===r||r===BigInt(0)?`>= 0${_} and < 2${_} ** ${8*(g+1)}${_}`:`>= -(2${_} ** ${8*(g+1)-1}${_}) and < 2 ** ${8*(g+1)-1}${_}`:`>= ${r}${_} and <= ${s}${_}`,new tt.ERR_OUT_OF_RANGE("value",F,c)}!function et(c,r,s){W(r,"offset"),(void 0===c[r]||void 0===c[r+s])&&$(r,c.length-(s+1))}(u,m,g)}function W(c,r){if("number"!=typeof c)throw new tt.ERR_INVALID_ARG_TYPE(r,"number",c)}function $(c,r,s){throw Math.floor(c)!==c?(W(c,s),new tt.ERR_OUT_OF_RANGE(s||"offset","an integer",c)):r<0?new tt.ERR_BUFFER_OUT_OF_BOUNDS:new tt.ERR_OUT_OF_RANGE(s||"offset",`>= ${s?1:0} and <= ${r}`,c)}pt("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pt("ERR_INVALID_ARG_TYPE",function(c,r){return`The "${c}" argument must be of type number. Received type ${typeof r}`},TypeError),pt("ERR_OUT_OF_RANGE",function(c,r,s){let u=`The value of "${c}" is out of range.`,m=s;return Number.isInteger(s)&&Math.abs(s)>2**32?m=Kt(String(s)):"bigint"==typeof s&&(m=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(m=Kt(m)),m+="n"),u+=` It must be ${r}. Received ${m}`,u},RangeError);const X=/[^+/0-9A-Za-z-_]/g;function rt(c,r){let s;r=r||1/0;const u=c.length;let m=null;const g=[];for(let _=0;_<u;++_){if(s=c.charCodeAt(_),s>55295&&s<57344){if(!m){if(s>56319){(r-=3)>-1&&g.push(239,191,189);continue}if(_+1===u){(r-=3)>-1&&g.push(239,191,189);continue}m=s;continue}if(s<56320){(r-=3)>-1&&g.push(239,191,189),m=s;continue}s=65536+(m-55296<<10|s-56320)}else m&&(r-=3)>-1&&g.push(239,191,189);if(m=null,s<128){if((r-=1)<0)break;g.push(s)}else if(s<2048){if((r-=2)<0)break;g.push(s>>6|192,63&s|128)}else if(s<65536){if((r-=3)<0)break;g.push(s>>12|224,s>>6&63|128,63&s|128)}else{if(!(s<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;g.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}}return g}function se(c){return y.toByteArray(function yt(c){if((c=(c=c.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;c.length%4!=0;)c+="=";return c}(c))}function Dt(c,r,s,u){let m;for(m=0;m<u&&!(m+s>=r.length||m>=c.length);++m)r[m+s]=c[m];return m}function ht(c,r){return c instanceof r||null!=c&&null!=c.constructor&&null!=c.constructor.name&&c.constructor.name===r.name}function Jt(c){return c!=c}const Ce=function(){const c="0123456789abcdef",r=new Array(256);for(let s=0;s<16;++s){const u=16*s;for(let m=0;m<16;++m)r[u+m]=c[s]+c[m]}return r}();function Tt(c){return typeof BigInt>"u"?fe:c}function fe(){throw new Error("BigInt not supported")}},8461:(le,ut)=>{ut.read=function(b,C,y,d,B){var t,I,N=8*B-d-1,h=(1<<N)-1,R=h>>1,T=-7,q=y?B-1:0,w=y?-1:1,Z=b[C+q];for(q+=w,t=Z&(1<<-T)-1,Z>>=-T,T+=N;T>0;t=256*t+b[C+q],q+=w,T-=8);for(I=t&(1<<-T)-1,t>>=-T,T+=d;T>0;I=256*I+b[C+q],q+=w,T-=8);if(0===t)t=1-R;else{if(t===h)return I?NaN:1/0*(Z?-1:1);I+=Math.pow(2,d),t-=R}return(Z?-1:1)*I*Math.pow(2,t-d)},ut.write=function(b,C,y,d,B,t){var I,N,h,R=8*t-B-1,T=(1<<R)-1,q=T>>1,w=23===B?Math.pow(2,-24)-Math.pow(2,-77):0,Z=d?0:t-1,v=d?1:-1,D=C<0||0===C&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(N=isNaN(C)?1:0,I=T):(I=Math.floor(Math.log(C)/Math.LN2),C*(h=Math.pow(2,-I))<1&&(I--,h*=2),(C+=I+q>=1?w/h:w*Math.pow(2,1-q))*h>=2&&(I++,h/=2),I+q>=T?(N=0,I=T):I+q>=1?(N=(C*h-1)*Math.pow(2,B),I+=q):(N=C*Math.pow(2,q-1)*Math.pow(2,B),I=0));B>=8;b[y+Z]=255&N,Z+=v,N/=256,B-=8);for(I=I<<B|N,R+=B;R>0;b[y+Z]=255&I,Z+=v,I/=256,R-=8);b[y+Z-v]|=128*D}}}]);