"use strict";(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[893],{6002:($,O,i)=>{i.d(O,{Z:()=>P});var v=i(5521),c=i(2340),t=i(4650),m=i(529),b=i(7465);class P{constructor(l,u){this.http=l,this.globalServ=u,this.baseUrl=(new v.P).api_Ip,this.secondPartUrl=(new v.P).api_constant,this.curCOMId=c.N.comid}getAllBranch(l,u){return this.http.get(this.baseUrl+this.secondPartUrl+"atlas/branch/allBranches/?M="+l+"&C="+u,this.globalServ.getAuthHeaders())}getOneBranch(l){return console.log(this.baseUrl+this.secondPartUrl+"atlas/branch/"+l+"/"),this.http.get(this.baseUrl+this.secondPartUrl+"atlas/branch/"+l+"/",this.globalServ.getAuthHeaders())}getMainBranch(l,u){return this.http.get(this.baseUrl+this.secondPartUrl+"atlas/branch/branchPerSpec/?M="+l+"&C="+u+"&Main=T",this.globalServ.getAuthHeaders())}getBranchPerEmp(l,u,p){return this.http.get(this.baseUrl+this.secondPartUrl+"atlas/branch/branchPerSpec/?M="+l+"&C="+u+"&emp="+p,this.globalServ.getAuthHeaders())}getBranchPerOwner(l,u,p){return this.http.get(this.baseUrl+this.secondPartUrl+"atlas/branch/branchPerSpec/?M="+l+"&C="+u+"&owner="+p,this.globalServ.getAuthHeaders())}sendSms(l,u,p){return this.http.post(l,u,this.globalServ.smsHeaders(p))}sendSmsData(l,u){const p=new FormData;return p.append("bearerTokens",u),p.append("sender","Jeddah Lake"),p.append("recipients","966503002323"),p.append("body","125478"),this.http.post(l,p,this.globalServ.smsHeaders(u))}sendSmsGet(l){return this.http.get(l)}sendSmsGetToken(l,u){return this.http.get(l,this.globalServ.smsHeaders(u))}addBranch(l){return this.http.post(this.baseUrl+this.secondPartUrl+"atlas/branch/",l,this.globalServ.getAuthHeaders())}editBranch(l,u){return this.http.put(this.baseUrl+this.secondPartUrl+"atlas/branch/"+u+"/",l,this.globalServ.getAuthHeaders())}deleteBranch(l){return this.http.delete(this.baseUrl+this.secondPartUrl+"atlas/branch/"+l+"/",this.globalServ.getAuthHeaders())}softDeleteBranch(l){return this.http.put(this.baseUrl+this.secondPartUrl+"atlas/branch/"+l+"/",{RowDelete:1},this.globalServ.getAuthHeaders())}}P.\u0275fac=function(l){return new(l||P)(t.LFG(m.eN),t.LFG(b.U))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"})},3221:($,O,i)=>{i.d(O,{y:()=>S});var v=i(2340),c=i(5783),t=i(4650),m=i(4006),b=i(9132),P=i(7009),M=i(3071),l=i(5298),u=i(7465),p=i(3081),q=i(5412),e=i(4165),F=i(1182),y=i(6895),w=i(4333),f=i(1576),x=i(4859),Y=i(3546),E=i(7392),D=i(266);function z(h,o){if(1&h){const d=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(d);const C=t.oxw(2);return t.KtG(C.onClickUsed())}),t.TgZ(1,"mat-icon"),t._uU(2,"vpn_key"),t.qZA()()}}function U(h,o){if(1&h){const d=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(d);const C=t.oxw().$implicit,T=t.oxw();return t.KtG(T.onClickSendItToUser(T.AllPermissionsDisplayed,C.codename))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"lock"),t.qZA()()}2&h&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.Transfer"))}function G(h,o){if(1&h&&(t.TgZ(0,"div",10)(1,"div",11),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",12),t._uU(5),t.qZA(),t.TgZ(6,"div",11)(7,"div",13),t.YNc(8,z,3,0,"button",14),t.YNc(9,U,4,3,"button",15),t.qZA()()()),2&h){const d=o.$implicit,A=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"SECURITY."+d.codename)),t.xp6(3),t.Oqu(d.codename),t.xp6(3),t.Q6J("ngIf",A.can("add_emp_security_onepermission")&&A.userPerm.indexOf(d.codename)>-1),t.xp6(1),t.Q6J("ngIf",A.can("add_emp_security_onepermission")&&-1==A.userPerm.indexOf(d.codename))}}function j(h,o){if(1&h){const d=t.EpF();t.TgZ(0,"div")(1,"div",18)(2,"mat-card",19)(3,"pagination-controls",20),t.NdJ("pageChange",function(C){t.CHM(d);const T=t.oxw();return t.KtG(T.onPageChanged(C))}),t.qZA()()()()}}function J(h,o){if(1&h){const d=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(d);const C=t.oxw().$implicit,T=t.oxw();return t.KtG(T.onClickDeletePerm(C.codename))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&h&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function V(h,o){if(1&h&&(t.TgZ(0,"div",10)(1,"div",21),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",11)(5,"div",13),t.YNc(6,J,4,3,"button",15),t.qZA()()()),2&h){const d=o.$implicit,A=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,2,"SECURITY."+d.codename)," "),t.xp6(4),t.Q6J("ngIf",A.can("delete_emp_security_onepermission"))}}function B(h,o){if(1&h){const d=t.EpF();t.TgZ(0,"div")(1,"div",18)(2,"mat-card",19)(3,"pagination-controls",22),t.NdJ("pageChange",function(C){t.CHM(d);const T=t.oxw();return t.KtG(T.onUserPageChanged(C))}),t.qZA()()()()}}class S{constructor(o,d,A,C,T,ee,L,te,ae,ne,ie,X){this.formBuilder=o,this.router=d,this.snackBar=A,this.userService=C,this.activatedRoute=T,this.localStore=ee,this.global=L,this.translateService=te,this.fb=ae,this.dialog=ne,this.settingService=ie,this.appSettings=X,this.countAll=6,this.countPerUser=6,this.curCOMId=v.N.comid,this.account=new c.n,this.tempuserPerm=[],this.AllPermissions=[],this.AllPermissionsDisplayed=[],this.tempDisplayed=[],this.UserPermissions=[],this.userPerm=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(o=>{this.account=o}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let o=0;o<this.curUserPermissions.length;o++)this.tempuserPerm[o]=this.curUserPermissions[o].codename;this.getAllPermissions()}this.sub=this.activatedRoute.params.subscribe(o=>{o.id&&(this.id=+o.id,console.log("params['id']:: "+this.id),this.getUserPermissions(+this.id))})}can(o){return!(!this.curUserData.is_superuser&&!this.tempuserPerm.includes(o))}refreshDisplayed(o){this.AllPermissionsDisplayed=o,this.config={id:"basicPaginate",itemsPerPage:this.countAll,currentPage:1,totalItems:this.AllPermissionsDisplayed.length}}getAllPermissions(){this.userService.getAllPermission().subscribe(o=>{this.AllPermissions=o,this.refreshDisplayed(this.AllPermissions),this.tempDisplayed=o,this.config={id:"basicPaginate",itemsPerPage:this.countAll,currentPage:1,totalItems:this.AllPermissions.length}},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUserPermissions(o){this.userService.getUserPermission(o).subscribe(d=>{this.UserPermissions=d.user_permissions,this.userConfig={id:"userPaginate",itemsPerPage:this.countPerUser,currentPage:1,totalItems:this.UserPermissions.length},this.userPermInArray()},d=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}userPermInArray(){for(let o=0;o<this.UserPermissions.length;o++)this.userPerm[o]=this.UserPermissions[o].codename,console.log("this.userPerm[i]:: "+this.userPerm[o])}manageAllPermissionsDisplayed(){console.log("this.userPerm:: "+this.userPerm),this.tempDisplayed.forEach((o,d)=>{this.userPerm.includes(this.tempDisplayed[d].codename)&&(console.log("**included:: "+this.tempDisplayed[d].codename),delete this.tempDisplayed[d])}),this.refreshDisplayed(this.tempDisplayed)}onClickSendItToUser(o,d){console.log("----// Add it to Table  ----//"),this.userService.addUserPerm(this.id,d).subscribe(A=>{this.refreshDisplayed(o),this.getUserPermissions(this.id)})}onClickDeletePerm(o){console.log("----// Remove Perm from Table  ----//"),this.userService.removeUserPerm(this.id,o).subscribe(d=>{this.getUserPermissions(this.id)})}onClickUsed(){console.log("--** it is used so, will not do anything **--")}onPageChanged(o){this.config.currentPage=o}onUserPageChanged(o){this.userConfig.currentPage=o}onLoginFormSubmit(o){}onRegisterFormSubmit(o){}}S.\u0275fac=function(o){return new(o||S)(t.Y36(m.QS),t.Y36(b.F0),t.Y36(P.ux),t.Y36(M.K),t.Y36(b.gz),t.Y36(l.C),t.Y36(u.U),t.Y36(p.sK),t.Y36(m.qu),t.Y36(q.uw),t.Y36(e.g),t.Y36(F.d))},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-emp-security-dialog"]],decls:29,vars:19,consts:[[1,"p-4"],["fxLayout","row"],["fxFlex","100","fxFlex.gt-sm","50",1,"p-3"],[1,"mat-mdc-table","permission-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","10",1,"p-3"],["fxFlex","100","fxFlex.gt-sm","35",1,"p-3"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"mat-mdc-cell","primary-text","notifbold"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxFlex","100"],[1,"p-0","text-center"],["id","basicPaginate","autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],[1,"mat-mdc-cell","selectedbold"],["id","userPaginate","autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(o,d){1&o&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"div",5)(10,"h2"),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t._UZ(13,"div",5),t.qZA(),t.YNc(14,G,10,6,"div",6),t.ALo(15,"paginate"),t.qZA(),t.YNc(16,j,4,0,"div",7),t.qZA(),t._UZ(17,"div",8),t.TgZ(18,"div",9)(19,"div",3)(20,"div",4)(21,"div",5)(22,"h2"),t._uU(23),t.ALo(24,"translate"),t.qZA()(),t._UZ(25,"div",5),t.qZA(),t.YNc(26,V,7,4,"div",6),t.ALo(27,"paginate"),t.qZA(),t.YNc(28,B,4,0,"div",7),t.qZA()()()),2&o&&(t.xp6(7),t.hij(" ",t.lcZ(8,7,"HTML.Description")," "),t.xp6(4),t.hij(" ",t.lcZ(12,9,"HTML.CODE")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(15,11,d.AllPermissionsDisplayed,d.config)),t.xp6(2),t.Q6J("ngIf",d.AllPermissionsDisplayed.length>0),t.xp6(7),t.hij(" ",t.lcZ(24,14,"HTML.CODE")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(27,16,d.UserPermissions,d.userConfig)),t.xp6(2),t.Q6J("ngIf",d.UserPermissions.length>0))},dependencies:[y.sg,y.O5,w.LS,f.xw,f.yH,x.nh,Y.a8,E.Hw,D.gM,w._s,p.X$],styles:[".auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}.notifbold[_ngcontent-%COMP%]{font-weight:700}.selectedbold[_ngcontent-%COMP%]{font-weight:700;color:green}.permission-table.mat-mdc-table[_ngcontent-%COMP%]{display:block;overflow-x:auto}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%], .permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%]{display:flex;border-bottom-width:1px;border-bottom-style:solid;align-items:center;min-height:48px;padding:0 16px}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%], .permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{flex:1;overflow:hidden;word-wrap:break-word;padding:0 8px}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell.image[_ngcontent-%COMP%], .permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell.image[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0;flex-basis:60px}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;border-radius:50%;margin:4px 0}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell.status[_ngcontent-%COMP%], .permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell.status[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0;flex-basis:32px}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell.ratings[_ngcontent-%COMP%], .permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell.ratings[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0;flex-basis:80px}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:14px}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{text-align:right}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 4px}.permission-table.mat-mdc-table.header-sm[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%]{min-height:36px}.permission-table.mat-mdc-table.truncated[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%], .permission-table.mat-mdc-table.truncated[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis}"]})},3893:($,O,i)=>{i.r(O),i.d(O,{SettingsModule:()=>N,routes:()=>oe});var v=i(6895),c=i(9132),t=i(529),m=i(4006),b=i(4333),P=i(589),M=i(9045),l=i(2340),u=i(5783),p=i(5412),q=i(4459),e=i(4650),F=i(6838),y=i(7009),w=i(5298),f=i(1576),x=i(4859),Y=i(4144),E=i(9549),D=i(3081);function z(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(n);const g=e.oxw();return e.KtG(g.onSave())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&r){const n=e.oxw();e.Q6J("mat-dialog-close",n.form.value)("disabled",!n.form.valid),e.xp6(1),e.Oqu(e.lcZ(2,3,"BTN.SAVE"))}}class U{constructor(a,n,s,g,_,Z){this.dialogRef=a,this.codesService=n,this.snackBar=s,this.data=g,this.localStore=_,this.fb=Z,this.curCOMId=l.N.comid,this.account=new u.n,this.currency_const=(new q.I).Currency,this.userPerm=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let a=0;a<this.curUserPermissions.length;a++)this.userPerm[a]=this.curUserPermissions[a].codename;this.form=this.fb.group({id:null,APACode:{value:null,disabled:!0},APAName:{value:null,disabled:!0},APAValue:[null,m.kI.required],RowConfirm:0,RowDelete:0,RowStatus:0}),this.data.paramRow?(this.action="Patch",this.form.patchValue(this.data.paramRow)):this.action="Post"}can(a){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(a))}onSave(){this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value})}close(){this.action="Cancel",this.dialogRef.close({event:this.action})}}U.\u0275fac=function(a){return new(a||U)(e.Y36(p.so),e.Y36(F.d),e.Y36(y.ux),e.Y36(p.WI),e.Y36(w.C),e.Y36(m.QS))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-applicationparam-dialog"]],decls:31,vars:17,consts:[["mat-dialog-title",""],["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","APACode"],["matInput","","formControlName","APAName"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","APAValue","required",""],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(a,n){1&a&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"input",6),e.qZA()(),e.TgZ(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"input",7),e.qZA()(),e.TgZ(18,"div",8)(19,"div",9)(20,"mat-form-field",5)(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"input",10),e.qZA()()()()(),e.TgZ(25,"div",11)(26,"div",8),e.YNc(27,z,3,5,"button",12),e.TgZ(28,"button",13),e.NdJ("click",function(){return n.close()}),e._uU(29),e.ALo(30,"translate"),e.qZA()()()()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,7,"ADMIN_NAV.BRANCH")),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(6),e.Oqu(e.lcZ(10,9,"HTML.CODE")),e.xp6(6),e.Oqu(e.lcZ(16,11,"FIELD.NAME")),e.xp6(7),e.Oqu(e.lcZ(23,13,"HTML.Value")),e.xp6(5),e.Q6J("ngIf",n.can("change_oneapplicationparam")),e.xp6(2),e.Oqu(e.lcZ(30,15,"BTN.CANCEL")))},dependencies:[v.O5,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.sg,m.u,f.xw,f.Wh,f.yH,x.lW,p.ZT,p.uh,p.xY,p.H8,Y.Nt,E.KE,E.hX,D.X$]});var G=i(7465),j=i(3071),J=i(4165),V=i(1182),B=i(3546),S=i(7392),h=i(4850),o=i(266);function d(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(n);const g=e.oxw();return e.KtG(g.onClickArrangePermissions())}),e.TgZ(1,"h2"),e._uU(2,"Arrange"),e.qZA()()}}function A(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(n);const g=e.oxw().$implicit,_=e.oxw();return e.KtG(_.openParamDialog(g))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()}2&r&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.EDIT"))}function C(r,a){if(1&r&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e._uU(4),e.qZA(),e.TgZ(5,"div",10),e._uU(6),e.qZA(),e.TgZ(7,"div",10)(8,"div",12),e.YNc(9,A,4,3,"button",13),e.qZA()()()),2&r){const n=a.$implicit,s=e.oxw();e.xp6(2),e.Oqu(n.APACode),e.xp6(2),e.Oqu(n.APAName),e.xp6(2),e.Oqu(n.APAValue),e.xp6(3),e.Q6J("ngIf",s.can("view_oneapplicationparam"))}}function T(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"mat-card",17)(3,"pagination-controls",18),e.NdJ("pageChange",function(g){e.CHM(n);const _=e.oxw();return e.KtG(_.onPageChanged(g))}),e.qZA()()()()}}const ee=function(r,a){return{itemsPerPage:r,currentPage:a}};class L{constructor(a,n,s,g,_,Z,W,K,k,Q){this.localStore=a,this.global=n,this.router=s,this.userService=g,this.snackBar=_,this.translateService=Z,this.fb=W,this.dialog=K,this.settingService=k,this.appSettings=Q,this.count=10,this.curCOMId=l.N.comid,this.account=new u.n,this.userPerm=[],this.AllParameters=[],this.arrangePermission=[{id:1,codename:"view_dashboard",arrangement:"100"},{id:2,codename:"view_dash_CustomerDebt",arrangement:"110"},{id:3,codename:"view_dash_CustomerDebtTotal",arrangement:"111"},{id:4,codename:"view_dash_CustomerDebtTenant",arrangement:"112"},{id:5,codename:"view_dash_Contracts",arrangement:"120"},{id:6,codename:"view_dash_Contracts_showContract",arrangement:"121"},{id:7,codename:"view_dash_Contracts_showInstallments",arrangement:"122"},{id:8,codename:"view_dash_ContractsLT60",arrangement:"130"},{id:9,codename:"view_dash_ContractsLT60_showContract",arrangement:"131"},{id:10,codename:"view_dash_ContractsLT60_showInstallments",arrangement:"132"},{id:11,codename:"view_dash_ContractsGT60",arrangement:"140"},{id:12,codename:"view_dash_ContractsGT60_showContract",arrangement:"141"},{id:13,codename:"view_dash_ContractsGT60_showInstallments",arrangement:"142"},{id:14,codename:"view_dash_ContractsAlarm",arrangement:"150"},{id:15,codename:"view_dash_ContractsAlarm_showContract",arrangement:"151"},{id:16,codename:"view_dash_ContractsAlarm_showInstallments",arrangement:"152"},{id:17,codename:"view_dash_DailyWork",arrangement:"160"},{id:18,codename:"view_dash_DailyWork_recievable",arrangement:"161"},{id:19,codename:"view_dash_DailyWork_recievableTotal",arrangement:"162"},{id:20,codename:"view_dash_DailyWork_payable",arrangement:"163"},{id:21,codename:"view_dash_DailyWork_payableTotal",arrangement:"164"},{id:22,codename:"view_dash_DocNotInAccount",arrangement:"165"},{id:23,codename:"view_maindatamenu",arrangement:"200"},{id:24,codename:"view_company",arrangement:"210"},{id:25,codename:"change_company",arrangement:"211"},{id:26,codename:"view_branch",arrangement:"220"},{id:27,codename:"add_branch",arrangement:"221"},{id:28,codename:"change_branch",arrangement:"222"},{id:29,codename:"delete_branch",arrangement:"223"},{id:30,codename:"view_sms_fields",arrangement:"224"},{id:30,codename:"view_systemcodes",arrangement:"300"},{id:31,codename:"view_country",arrangement:"301"},{id:32,codename:"add_country",arrangement:"302"},{id:33,codename:"change_country",arrangement:"303"},{id:34,codename:"delete_country",arrangement:"304"},{id:35,codename:"view_governorate",arrangement:"305"},{id:36,codename:"add_governorate",arrangement:"306"},{id:37,codename:"change_governorate",arrangement:"307"},{id:38,codename:"delete_governorate",arrangement:"308"},{id:39,codename:"view_city",arrangement:"310"},{id:40,codename:"add_city",arrangement:"311"},{id:41,codename:"change_city",arrangement:"312"},{id:42,codename:"delete_city",arrangement:"313"},{id:43,codename:"view_region",arrangement:"315"},{id:44,codename:"add_region",arrangement:"316"},{id:45,codename:"change_region",arrangement:"317"},{id:46,codename:"delete_region",arrangement:"318"},{id:46,codename:"view_doctypes",arrangement:"319"},{id:46,codename:"add_doctypes",arrangement:"319"},{id:46,codename:"change_doctypes",arrangement:"319"},{id:46,codename:"delete_doctypes",arrangement:"319"},{id:47,codename:"view_buildingfeature",arrangement:"320"},{id:48,codename:"add_buildingfeature",arrangement:"321"},{id:49,codename:"change_buildingfeature",arrangement:"322"},{id:50,codename:"delete_buildingfeature",arrangement:"323"},{id:51,codename:"view_ownershipdoc",arrangement:"325"},{id:52,codename:"add_ownershipdoc",arrangement:"326"},{id:53,codename:"change_ownershipdoc",arrangement:"327"},{id:54,codename:"delete_ownershipdoc",arrangement:"328"},{id:55,codename:"view_currency",arrangement:"330"},{id:56,codename:"add_currency",arrangement:"331"},{id:57,codename:"change_currency",arrangement:"332"},{id:58,codename:"delete_currency",arrangement:"333"},{id:59,codename:"view_expenses",arrangement:"335"},{id:60,codename:"add_expenses",arrangement:"336"},{id:61,codename:"change_expenses",arrangement:"337"},{id:62,codename:"delete_expenses",arrangement:"338"},{id:63,codename:"view_notification",arrangement:"340"},{id:64,codename:"add_notification",arrangement:"341"},{id:65,codename:"change_notification",arrangement:"342"},{id:66,codename:"delete_notification",arrangement:"343"},{id:67,codename:"view_jobs",arrangement:"345"},{id:68,codename:"add_jobs",arrangement:"346"},{id:69,codename:"change_jobs",arrangement:"347"},{id:70,codename:"delete_jobs",arrangement:"348"},{id:71,codename:"view_workplaces",arrangement:"350"},{id:72,codename:"add_workplaces",arrangement:"351"},{id:73,codename:"change_workplaces",arrangement:"352"},{id:74,codename:"delete_workplaces",arrangement:"353"},{id:75,codename:"view_buildingmenu",arrangement:"400"},{id:76,codename:"view_propertyowner",arrangement:"410"},{id:77,codename:"add_propertyowner",arrangement:"411"},{id:78,codename:"change_propertyowner",arrangement:"412"},{id:79,codename:"delete_propertyowner",arrangement:"413"},{id:80,codename:"view_oneowner",arrangement:"414"},{id:81,codename:"view_owner_securitybuildings",arrangement:"415"},{id:82,codename:"add_owner_security_onebuilding",arrangement:"416"},{id:83,codename:"delete_owner_security_onebuilding",arrangement:"417"},{id:83,codename:"change_owner_password",arrangement:"418"},{id:84,codename:"view_building",arrangement:"420"},{id:85,codename:"view_onebuilding",arrangement:"421"},{id:86,codename:"add_building",arrangement:"422"},{id:87,codename:"change_building",arrangement:"423"},{id:88,codename:"delete_building",arrangement:"424"},{id:89,codename:"view_buildCustomerDept",arrangement:"425"},{id:90,codename:"view_units",arrangement:"430"},{id:91,codename:"view_oneunit",arrangement:"431"},{id:92,codename:"add_units",arrangement:"432"},{id:93,codename:"change_units",arrangement:"433"},{id:94,codename:"delete_units",arrangement:"434"},{id:95,codename:"view_unititemexpenses",arrangement:"435"},{id:96,codename:"view_addunitexpenses",arrangement:"436"},{id:97,codename:"view_deleteunitexpenses",arrangement:"437"},{id:98,codename:"view_tenant",arrangement:"440"},{id:99,codename:"view_onetenant",arrangement:"441"},{id:100,codename:"add_tenant",arrangement:"442"},{id:101,codename:"change_tenant",arrangement:"443"},{id:102,codename:"delete_tenant",arrangement:"444"},{id:103,codename:"confirm_tenant",arrangement:"445"},{id:104,codename:"view_tenantstatements",arrangement:"446"},{id:105,codename:"view_tenantrelative",arrangement:"447"},{id:106,codename:"add_tenantrelative",arrangement:"448"},{id:107,codename:"delete_tenantrelative",arrangement:"449"},{id:107,codename:"change_tenant_password",arrangement:"450"},{id:108,codename:"view_contractsmenu",arrangement:"500"},{id:109,codename:"view_rentcontracts",arrangement:"510"},{id:110,codename:"view_onecontract",arrangement:"511"},{id:111,codename:"view_contractinstallments",arrangement:"512"},{id:112,codename:"view_renewcontract",arrangement:"513"},{id:113,codename:"add_rentcontracts",arrangement:"514"},{id:114,codename:"change_rentcontracts",arrangement:"515"},{id:115,codename:"delete_rentcontracts",arrangement:"516"},{id:116,codename:"view_installment",arrangement:"517"},{id:117,codename:"add_installment",arrangement:"518"},{id:118,codename:"change_installment",arrangement:"519"},{id:119,codename:"delete_installment",arrangement:"520"},{id:121,codename:"doing_tenantleave",arrangement:"521"},{id:122,codename:"view_documentsmenu",arrangement:"600"},{id:123,codename:"view_receivable",arrangement:"610"},{id:124,codename:"view_onereceivable",arrangement:"611"},{id:125,codename:"add_onereceivable",arrangement:"612"},{id:126,codename:"change_onereceivable",arrangement:"613"},{id:127,codename:"delete_onereceivable",arrangement:"614"},{id:128,codename:"view_payable",arrangement:"620"},{id:129,codename:"view_onepayable",arrangement:"621"},{id:130,codename:"add_onepayable",arrangement:"622"},{id:131,codename:"change_onepayable",arrangement:"623"},{id:132,codename:"delete_onepayable",arrangement:"624"},{id:133,codename:"view_employeemenu",arrangement:"700"},{id:134,codename:"view_employee",arrangement:"701"},{id:135,codename:"view_oneemployee",arrangement:"702"},{id:136,codename:"add_employee",arrangement:"703"},{id:137,codename:"change_employee",arrangement:"704"},{id:138,codename:"delete_employee",arrangement:"705"},{id:139,codename:"view_emp_securitybuildings",arrangement:"706"},{id:140,codename:"add_emp_security_onebuilding",arrangement:"707"},{id:141,codename:"delete_emp_security_onebuilding",arrangement:"708"},{id:142,codename:"view_emp_securitypermissions",arrangement:"709"},{id:143,codename:"add_emp_security_onepermission",arrangement:"710"},{id:144,codename:"delete_emp_security_onepermission",arrangement:"711"},{id:145,codename:"view_emp_last_seen",arrangement:"712"},{id:145,codename:"change_emp_password",arrangement:"713"},{id:146,codename:"view_settingsmenu",arrangement:"800"},{id:147,codename:"view_applicationparamlist",arrangement:"801"},{id:148,codename:"view_oneapplicationparam",arrangement:"802"},{id:149,codename:"change_oneapplicationparam",arrangement:"803"},{id:150,codename:"arrange_permissionslist",arrangement:"804"}],this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(a=>{this.account=a}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let a=0;a<this.curUserPermissions.length;a++)this.userPerm[a]=this.curUserPermissions[a].codename;this.prepareMsgLanguage(),this.getAllParam(this.curCOMId,this.account.periorty)}else this.router.navigate(["/sign-in"])}can(a){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(a))}getAllParam(a,n){this.settingService.getAllParam(a,n).subscribe(s=>{this.AllParameters=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onPageChanged(a){this.page=a,window.scrollTo(0,0)}onClickArrangePermissions(){for(let a=0;a<this.arrangePermission.length;a++)this.userService.arrangeUserPerm(this.arrangePermission[a].codename,this.arrangePermission[a].arrangement).subscribe(n=>{a==this.arrangePermission.length-1&&console.log("-----Finished"),console.log("arrangePermissionID:: "+this.arrangePermission[a].id)})}openParamDialog(a){console.log("-----Data:: "+a),this.dialog.open(U,{data:{paramRow:a,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(s=>{"Cancel"==s.event||("Patch"==s.event?this.settingService.editParam(s.data,s.data.id).subscribe(g=>{this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getAllParam(this.curCOMId,this.account.periorty)},g=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):"Post"==s.event&&this.settingService.addParam(s.data).subscribe(g=>{this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0641\u064a \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getAllParam(this.curCOMId,this.account.periorty)},g=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(a=>{this.errorRetrieveMsg=a}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(a=>{this.askToDeletedMsg=a}),this.translateService.get("MESSAGE.DELETED").subscribe(a=>{this.deletedMsg=a}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(a=>{this.deletedTitleMsg=a})}}L.\u0275fac=function(a){return new(a||L)(e.Y36(w.C),e.Y36(G.U),e.Y36(c.F0),e.Y36(j.K),e.Y36(y.ux),e.Y36(D.sK),e.Y36(m.qu),e.Y36(p.uw),e.Y36(J.g),e.Y36(V.d))},L.\u0275cmp=e.Xpm({type:L,selectors:[["app-applicationparam-list"]],decls:26,vars:21,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"mat-mdc-cell","primary-text","notifbold"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,d,3,0,"button",2),e.qZA(),e._UZ(7,"mat-divider"),e.TgZ(8,"div",3)(9,"div",4)(10,"div",5)(11,"h2"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",5)(15,"h2"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",5)(19,"h2"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e._UZ(22,"div",5),e.qZA(),e.YNc(23,C,10,4,"div",6),e.ALo(24,"paginate"),e.qZA()(),e.YNc(25,T,4,0,"div",7),e.qZA()),2&a&&(e.xp6(4),e.Oqu(e.lcZ(5,7,"ADMIN_NAV.ApplicationParam")),e.xp6(2),e.Q6J("ngIf",n.can("arrange_permissionslist")),e.xp6(6),e.hij(" ",e.lcZ(13,9,"HTML.CODE")," "),e.xp6(4),e.hij(" ",e.lcZ(17,11,"FIELD.NAME")," "),e.xp6(4),e.hij(" ",e.lcZ(21,13,"HTML.Value")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(24,15,n.AllParameters,e.WLB(18,ee,n.count,n.page))),e.xp6(2),e.Q6J("ngIf",n.AllParameters.length>0))},dependencies:[v.sg,v.O5,b.LS,f.xw,f.Wh,f.yH,x.lW,x.nh,B.a8,S.Hw,h.d,o.gM,b._s,D.X$],styles:[".notifbold[_ngcontent-%COMP%]{font-weight:700}"]});var te=i(3221),ae=i(2887);class ne{}var ie=i(6002),X=i(3238),re=i(4385);function se(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(n);const g=e.oxw();return e.KtG(g.onSave())}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&r){const n=e.oxw();e.Q6J("disabled",!n.dataForm.valid),e.xp6(2),e.Oqu(e.lcZ(3,2,"BTN.SAVE"))}}function le(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"div",24)(1,"button",25),e.NdJ("click",function(){e.CHM(n);const g=e.oxw().$implicit,_=e.oxw();return e.KtG(_.remove(g.id))}),e.ALo(2,"translate"),e.TgZ(3,"mat-icon"),e._uU(4,"delete"),e.qZA()()()}2&r&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"BTN.REMOVE")))}function ce(r,a){if(1&r&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2),e.qZA(),e.TgZ(3,"div",22),e._uU(4),e.qZA(),e.TgZ(5,"div",22),e._uU(6),e.qZA(),e.TgZ(7,"div",22),e._uU(8),e.qZA(),e.TgZ(9,"div",22),e.YNc(10,le,5,3,"div",23),e.qZA()()),2&r){const n=a.$implicit,s=e.oxw();e.xp6(2),e.Oqu(n.DSDCode),e.xp6(2),e.Oqu(n.DSDPartTypeDisplay),e.xp6(2),e.hij("",n.DSDNoOfDigits," "),e.xp6(2),e.hij("",n.DSDPartStartWith," "),e.xp6(2),e.Q6J("ngIf",s.can("delete_onedocumentserial_detail"))}}class R{constructor(a,n,s,g,_,Z,W,K,k,Q){this.dialogRef=a,this.serialInjected=n,this.atlasService=s,this.settingService=g,this.translateService=_,this._codesService=Z,this.localStore=W,this.dialog=K,this.snackBar=k,this.fb=Q,this.passwordHide=!0,this.curCOMId=l.N.comid,this.userPerm=[]}ngOnInit(){this.parentExpenseCTT=(new q.I).Expenses,this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let a=0;a<this.curUserPermissions.length;a++)this.userPerm[a]=this.curUserPermissions[a].codename;this.dataForm=this.fb.group({DOSKeyField:[null,m.kI.required],DSDPartType:[null,m.kI.required],DSDCode:null,DSDNoOfDigits:0,DSDPartStartWith:null}),this.dataForm.patchValue({DOSKeyField:this.serialInjected.serialRow.id}),this.DocSerialDt=new ne,this.curPeriority=this.serialInjected.periorty,this.action="Patch",this.getSerialDetails(),this.prepareMsgLanguage()}can(a){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(a))}getSerialDetails(){this.docSerialDT=null,this.settingService.getAllDetaisForSerial(this.curCOMId,this.curPeriority,this.serialInjected.serialRow.id).subscribe(a=>this.docSerialDT=a)}mapFormValue_toTable(){this.DocSerialDt.DOSKeyField=this.serialInjected.serialRow.id,this.DocSerialDt.DSDPartType=this.dataForm.value.DSDPartType,this.DocSerialDt.DSDNoOfDigits=this.dataForm.value.DSDNoOfDigits,this.DocSerialDt.DSDPartStartWith=this.dataForm.value.DSDPartStartWith,this.DocSerialDt.DSDCode=this.dataForm.value.DSDCode}onSave(){this.mapFormValue_toTable(),this.settingService.addDetailsForSerial(this.DocSerialDt).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getSerialDetails()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(a){this.dialog.open(ae.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(s=>{s&&this.settingService.deleteDetailForSerial(a).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getSerialDetails()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(a=>{this.dataSavedMsg=a}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(a=>{this.askToDeletedMsg=a}),this.translateService.get("MESSAGE.DELETED").subscribe(a=>{this.deletedMsg=a}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(a=>{this.deletedTitleMsg=a})}}function me(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(n);const g=e.oxw();return e.KtG(g.onSave())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&r){const n=e.oxw();e.Q6J("mat-dialog-close",n.form.value)("disabled",!n.form.valid),e.xp6(1),e.Oqu(e.lcZ(2,3,"BTN.SAVE"))}}R.\u0275fac=function(a){return new(a||R)(e.Y36(p.so),e.Y36(p.WI),e.Y36(ie.Z),e.Y36(J.g),e.Y36(D.sK),e.Y36(F.d),e.Y36(w.C),e.Y36(p.uw),e.Y36(y.ux),e.Y36(m.QS))},R.\u0275cmp=e.Xpm({type:R,selectors:[["app-documentserial-details"]],decls:92,vars:77,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","35.0",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","DSDPartType","id","partTypeOpSel",3,"placeholder"],[3,"value"],["fxFlex","100","fxFlex.gt-sm","34.6",1,"px-1"],["matInput","","formControlName","DSDNoOfDigits"],["matInput","","formControlName","DSDPartStartWith"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],["class","p-2 actions",4,"ngIf"],[1,"p-2","actions"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(a,n){1&a&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-select",6),e.ALo(10,"translate"),e.TgZ(11,"mat-option",7),e._uU(12,"-"),e.qZA(),e.TgZ(13,"mat-option",7),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"mat-option",7),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"mat-option",7),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"mat-option",7),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"mat-option",7),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"mat-option",7),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"mat-option",7),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"mat-option",7),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"mat-option",7),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"mat-option",7),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"mat-option",7),e._uU(44),e.ALo(45,"translate"),e.qZA()()()(),e.TgZ(46,"div",8)(47,"mat-form-field",5)(48,"mat-label"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e._UZ(51,"input",9),e.qZA()(),e.TgZ(52,"div",8)(53,"mat-form-field",5)(54,"mat-label"),e._uU(55),e.ALo(56,"translate"),e.qZA(),e._UZ(57,"input",10),e.qZA()()()()(),e.TgZ(58,"div",11)(59,"div",3),e.YNc(60,se,4,4,"button",12),e.TgZ(61,"button",13),e.NdJ("click",function(){return n.close()}),e._uU(62),e.ALo(63,"translate"),e.qZA()()(),e._UZ(64,"mat-divider"),e.TgZ(65,"div",14)(66,"mat-card")(67,"div",15)(68,"h2"),e._uU(69),e.ALo(70,"translate"),e.qZA()(),e._UZ(71,"mat-divider"),e.TgZ(72,"div",16)(73,"div",17)(74,"div",18)(75,"h2"),e._uU(76),e.ALo(77,"translate"),e.qZA()(),e.TgZ(78,"div",18)(79,"h2"),e._uU(80),e.ALo(81,"translate"),e.qZA()(),e.TgZ(82,"div",18)(83,"h2"),e._uU(84),e.ALo(85,"translate"),e.qZA()(),e.TgZ(86,"div",18)(87,"h2"),e._uU(88),e.ALo(89,"translate"),e.qZA()(),e._UZ(90,"div",18),e.qZA(),e.YNc(91,ce,11,5,"div",19),e.qZA()()()()),2&a&&(e.Q6J("formGroup",n.dataForm),e.xp6(7),e.Oqu(e.lcZ(8,35,"HTML.PartType")),e.xp6(2),e.s9C("placeholder",e.lcZ(10,37,"HTML.PartType")),e.xp6(4),e.Q6J("value","Y"),e.xp6(1),e.Oqu(e.lcZ(15,39,"OPTIONS.Year")),e.xp6(2),e.Q6J("value","M"),e.xp6(1),e.Oqu(e.lcZ(18,41,"OPTIONS.Month")),e.xp6(2),e.Q6J("value","B"),e.xp6(1),e.Oqu(e.lcZ(21,43,"OPTIONS.Branch")),e.xp6(2),e.Q6J("value","O"),e.xp6(1),e.Oqu(e.lcZ(24,45,"OPTIONS.Owner")),e.xp6(2),e.Q6J("value","P"),e.xp6(1),e.Oqu(e.lcZ(27,47,"OPTIONS.Property")),e.xp6(2),e.Q6J("value","U"),e.xp6(1),e.Oqu(e.lcZ(30,49,"OPTIONS.Unit")),e.xp6(2),e.Q6J("value","T"),e.xp6(1),e.Oqu(e.lcZ(33,51,"OPTIONS.Tenant")),e.xp6(2),e.Q6J("value","C"),e.xp6(1),e.Oqu(e.lcZ(36,53,"OPTIONS.Contract")),e.xp6(2),e.Q6J("value","E"),e.xp6(1),e.Oqu(e.lcZ(39,55,"OPTIONS.Employee")),e.xp6(2),e.Q6J("value","F"),e.xp6(1),e.Oqu(e.lcZ(42,57,"OPTIONS.FixedCharacters")),e.xp6(2),e.Q6J("value","S"),e.xp6(1),e.Oqu(e.lcZ(45,59,"OPTIONS.DocumentSerial")),e.xp6(5),e.Oqu(e.lcZ(50,61,"HTML.PartDigitNumber")),e.xp6(6),e.Oqu(e.lcZ(56,63,"HTML.PartStartWith")),e.xp6(5),e.Q6J("ngIf",n.can("add_onedocumentserial_detail")),e.xp6(2),e.Oqu(e.lcZ(63,65,"BTN.CANCEL")),e.xp6(7),e.Oqu(e.lcZ(70,67,"HTML.SerialParts")),e.xp6(7),e.hij(" ",e.lcZ(77,69,"HTML.CODE")," "),e.xp6(4),e.hij(" ",e.lcZ(81,71,"HTML.PartType")," "),e.xp6(4),e.hij(" ",e.lcZ(85,73,"HTML.PartDigitNumber")," "),e.xp6(4),e.hij(" ",e.lcZ(89,75,"HTML.PartStartWith")," "),e.xp6(3),e.Q6J("ngForOf",n.docSerialDT))},dependencies:[v.sg,v.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,f.xw,f.Wh,f.yH,X.ey,x.lW,x.nh,B.a8,p.xY,p.H8,S.Hw,Y.Nt,E.KE,E.hX,h.d,re.gD,o.gM,D.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});class I{constructor(a,n,s,g,_,Z){this.dialogRef=a,this.codesService=n,this.snackBar=s,this.data=g,this.localStore=_,this.fb=Z,this.curCOMId=l.N.comid,this.account=new u.n,this.currency_const=(new q.I).Currency,this.userPerm=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let a=0;a<this.curUserPermissions.length;a++)this.userPerm[a]=this.curUserPermissions[a].codename;this.form=this.fb.group({id:null,DOSCode:{value:null,disabled:!0},DOSName:{value:null,disabled:!0},DOSEName:{value:null,disabled:!0},DocType_CTTKeyField:{value:null,disabled:!0},DOSDocSerialType:[null,m.kI.required],DOSNoOfParts:null,RowConfirm:0,RowDelete:0,RowStatus:0}),this.data.paramRow?(this.action="Patch",this.form.patchValue(this.data.paramRow)):this.action="Post"}can(a){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(a))}onSave(){this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value})}close(){this.action="Cancel",this.dialogRef.close({event:this.action})}}function de(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(n);const g=e.oxw().$implicit,_=e.oxw();return e.KtG(_.openParamDialog(g))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()}2&r&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.EDIT"))}function ge(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(n);const g=e.oxw().$implicit,_=e.oxw();return e.KtG(_.createSerialDialog(g))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"build"),e.qZA()()}2&r&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.CreateSerial"))}function ue(r,a){if(1&r&&(e.TgZ(0,"div",7)(1,"div",8),e._uU(2),e.qZA(),e.TgZ(3,"div",9),e._uU(4),e.qZA(),e.TgZ(5,"div",8),e._uU(6),e.qZA(),e.TgZ(7,"div",8),e._uU(8),e.qZA(),e.TgZ(9,"div",8),e._uU(10),e.qZA(),e.TgZ(11,"div",8)(12,"div",10),e.YNc(13,de,4,3,"button",11),e.YNc(14,ge,4,3,"button",11),e.qZA()()()),2&r){const n=a.$implicit,s=e.oxw();e.xp6(2),e.Oqu(n.DOSCode),e.xp6(2),e.Oqu(n.DOSName),e.xp6(2),e.Oqu(n.DocType_Name),e.xp6(2),e.Oqu(n.DOSDocSerialTypeDisplay),e.xp6(2),e.Oqu(n.DOSNoOfParts),e.xp6(3),e.Q6J("ngIf",s.can("change_onedocumentserial")),e.xp6(1),e.Q6J("ngIf",s.can("view_documentserial_detail_list"))}}function pe(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"mat-card",15)(3,"pagination-controls",16),e.NdJ("pageChange",function(g){e.CHM(n);const _=e.oxw();return e.KtG(_.onPageChanged(g))}),e.qZA()()()()}}I.\u0275fac=function(a){return new(a||I)(e.Y36(p.so),e.Y36(F.d),e.Y36(y.ux),e.Y36(p.WI),e.Y36(w.C),e.Y36(m.QS))},I.\u0275cmp=e.Xpm({type:I,selectors:[["app-documentserial-dialog"]],decls:32,vars:23,consts:[["mat-dialog-title",""],["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","DOSDocSerialType","id","docSerialTypeOpSel",3,"placeholder"],[3,"value"],["matInput","","formControlName","DOSNoOfParts"],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(a,n){1&a&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"form",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"mat-select",6),e.ALo(11,"translate"),e.TgZ(12,"mat-option",7),e._uU(13,"-"),e.qZA(),e.TgZ(14,"mat-option",7),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"mat-option",7),e._uU(18),e.ALo(19,"translate"),e.qZA()()()(),e.TgZ(20,"div",4)(21,"mat-form-field",5)(22,"mat-label"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",8),e.qZA()()()(),e.TgZ(26,"div",9)(27,"div",10),e.YNc(28,me,3,5,"button",11),e.TgZ(29,"button",12),e.NdJ("click",function(){return n.close()}),e._uU(30),e.ALo(31,"translate"),e.qZA()()()()),2&a&&(e.xp6(1),e.Oqu(n.data.docName),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(6),e.Oqu(e.lcZ(9,11,"HTML.SerialType")),e.xp6(2),e.s9C("placeholder",e.lcZ(11,13,"HTML.SerialType")),e.xp6(4),e.Q6J("value","G"),e.xp6(1),e.Oqu(e.lcZ(16,15,"OPTIONS.General")),e.xp6(2),e.Q6J("value","P"),e.xp6(1),e.Oqu(e.lcZ(19,17,"OPTIONS.PerPart")),e.xp6(5),e.Oqu(e.lcZ(24,19,"HTML.PartsNumber")),e.xp6(5),e.Q6J("ngIf",n.can("change_onedocumentserial")),e.xp6(2),e.Oqu(e.lcZ(31,21,"BTN.CANCEL")))},dependencies:[v.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,f.xw,f.Wh,f.yH,X.ey,x.lW,p.ZT,p.uh,p.xY,p.H8,Y.Nt,E.KE,E.hX,re.gD,D.X$]});const he=function(r,a){return{itemsPerPage:r,currentPage:a}};class H{constructor(a,n,s,g,_,Z,W,K,k,Q){this.localStore=a,this.global=n,this.router=s,this.userService=g,this.snackBar=_,this.translateService=Z,this.fb=W,this.dialog=K,this.settingService=k,this.appSettings=Q,this.count=10,this.curCOMId=l.N.comid,this.account=new u.n,this.userPerm=[],this.AllSerials=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(a=>{this.account=a}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let a=0;a<this.curUserPermissions.length;a++)this.userPerm[a]=this.curUserPermissions[a].codename;this.prepareMsgLanguage(),this.getAllSerials(this.curCOMId,this.account.periorty)}else this.router.navigate(["/sign-in"])}can(a){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(a))}getAllSerials(a,n){this.settingService.getAllSerials(a,n).subscribe(s=>{this.AllSerials=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062a\u0633\u0644\u0633\u0644 \u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onPageChanged(a){this.page=a,window.scrollTo(0,0)}openParamDialog(a){console.log("-----Data:: "+a),this.dialog.open(I,{data:{paramRow:a,periorty:this.account.periorty,docName:a.DOSName,docTypename:a.DocType_Name},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(s=>{"Cancel"==s.event||("Patch"==s.event?this.settingService.editSerial(s.data,s.data.id).subscribe(g=>{this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u062a\u0633\u0644\u0633\u0644 \u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getAllSerials(this.curCOMId,this.account.periorty)},g=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u062a\u0633\u0644\u0633\u0644 \u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):"Post"==s.event&&this.settingService.addSerial(s.data).subscribe(g=>{this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u062a\u0633\u0644\u0633\u0644 \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getAllSerials(this.curCOMId,this.account.periorty)},g=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u062a\u0633\u0644\u0633\u0644 \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))})}createSerialDialog(a){console.log("-----Data:: "+a),this.dialog.open(R,{data:{serialRow:a,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(s=>{})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(a=>{this.errorRetrieveMsg=a}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(a=>{this.askToDeletedMsg=a}),this.translateService.get("MESSAGE.DELETED").subscribe(a=>{this.deletedMsg=a}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(a=>{this.deletedTitleMsg=a})}}H.\u0275fac=function(a){return new(a||H)(e.Y36(w.C),e.Y36(G.U),e.Y36(c.F0),e.Y36(j.K),e.Y36(y.ux),e.Y36(D.sK),e.Y36(m.qu),e.Y36(p.uw),e.Y36(J.g),e.Y36(V.d))},H.\u0275cmp=e.Xpm({type:H,selectors:[["app-documentserial-list"]],decls:33,vars:26,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"mat-mdc-cell","primary-text","notifbold"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e._UZ(6,"mat-divider"),e.TgZ(7,"div",2)(8,"div",3)(9,"div",4)(10,"h2"),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div",4)(14,"h2"),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",4)(18,"h2"),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",4)(22,"h2"),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"div",4)(26,"h2"),e._uU(27),e.ALo(28,"translate"),e.qZA()(),e._UZ(29,"div",4),e.qZA(),e.YNc(30,ue,15,7,"div",5),e.ALo(31,"paginate"),e.qZA()(),e.YNc(32,pe,4,0,"div",6),e.qZA()),2&a&&(e.xp6(4),e.Oqu(e.lcZ(5,8,"ADMIN_NAV.ApplicationParam")),e.xp6(7),e.hij(" ",e.lcZ(12,10,"HTML.CODE")," "),e.xp6(4),e.hij(" ",e.lcZ(16,12,"FIELD.NAME")," "),e.xp6(4),e.hij(" ",e.lcZ(20,14,"HTML.DocumentsType")," "),e.xp6(4),e.hij(" ",e.lcZ(24,16,"HTML.SerialType")," "),e.xp6(4),e.hij(" ",e.lcZ(28,18,"HTML.PartsNumber")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(31,20,n.AllSerials,e.WLB(23,he,n.count,n.page))),e.xp6(2),e.Q6J("ngIf",n.AllSerials.length>0))},dependencies:[v.sg,v.O5,b.LS,f.xw,f.Wh,f.yH,x.nh,B.a8,S.Hw,h.d,o.gM,b._s,D.X$],styles:[".notifbold[_ngcontent-%COMP%]{font-weight:700}"]});const oe=[{path:"",redirectTo:"parameters",pathMatch:"full"},{path:"parameters",component:L,pathMatch:"full",data:{breadcrumb:"Parameters"}},{path:"parameters-add/:id",component:U,data:{breadcrumb:"EditParameter"}},{path:"permissions-all/:id",component:te.y,data:{breadcrumb:"Permissions"}},{path:"serial",component:H,pathMatch:"full",data:{breadcrumb:"DocSerials"}},{path:"serial-add/:id",component:I,data:{breadcrumb:"EditDocSerials"}},{path:"serial-add",component:I,data:{breadcrumb:"AddDocSerials"}}];class N{}N.\u0275fac=function(a){return new(a||N)},N.\u0275mod=e.oAB({type:N}),N.\u0275inj=e.cJS({imports:[v.ez,c.Bz.forChild(oe),t.JF,m.u5,b.JX,M.D,m.UX,P.m,b.JX]})},2887:($,O,i)=>{i.d(O,{$:()=>P});var v=i(5412),c=i(4650),t=i(1576),m=i(4859),b=i(3081);class P{constructor(l,u){this.dialogRef=l,this.data=u}ngOnInit(){}onConfirm(){this.dialogRef.close(!0)}onDismiss(){this.dialogRef.close(!1)}}P.\u0275fac=function(l){return new(l||P)(c.Y36(v.so),c.Y36(v.WI))},P.\u0275cmp=c.Xpm({type:P,selectors:[["app-confirm-dialog"]],decls:13,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(l,u){1&l&&(c.TgZ(0,"h1",0),c._uU(1),c.qZA(),c.TgZ(2,"div",1)(3,"p"),c._uU(4),c.qZA()(),c.TgZ(5,"div",2)(6,"div",3)(7,"button",4),c.NdJ("click",function(){return u.onDismiss()}),c._uU(8),c.ALo(9,"translate"),c.qZA(),c.TgZ(10,"button",5),c.NdJ("click",function(){return u.onConfirm()}),c._uU(11),c.ALo(12,"translate"),c.qZA()()()),2&l&&(c.xp6(1),c.Oqu(null==u.data?null:u.data.title),c.xp6(3),c.Oqu(null==u.data?null:u.data.message),c.xp6(4),c.Oqu(c.lcZ(9,4,"BTN.NO")),c.xp6(3),c.Oqu(c.lcZ(12,6,"BTN.YES")))},dependencies:[t.xw,t.Wh,m.lW,v.uh,v.xY,v.H8,b.X$]})}}]);