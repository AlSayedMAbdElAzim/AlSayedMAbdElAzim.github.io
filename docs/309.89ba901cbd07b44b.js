"use strict";(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[309],{5309:(w,A,o)=>{o.r(A),o.d(A,{AtlasModule:()=>I,routes:()=>$});var h=o(6895),c=o(9132),l=o(4006),O=o(589),g=o(4333),C=o(3609),d=o(1596),i=o(5783),u=o(2340),p=o(5521),e=o(4650),B=o(5298),X=o(6381),L=o(7465),E=o(7009),T=o(1576),M=o(4859),x=o(3546),F=o(4144),v=o(9549),y=o(3081);function z(r,t){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.ADD")))}function ee(r,t){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function te(r,t){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Arabic Name is required"),e.qZA())}function ae(r,t){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Arabic Name isn't long enough, minimum of 4 characters"),e.qZA())}function re(r,t){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"English Name is required"),e.qZA())}function ne(r,t){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"English Name isn't long enough, minimum of 4 characters"),e.qZA())}function oe(r,t){1&r&&(e.TgZ(0,"div",24)(1,"button",25),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"BTN.SAVE")))}class D{constructor(t,a,n,s,m,Z){this.localStore=t,this._companyService=a,this.global=n,this.router=s,this.snackBar=m,this.fb=Z,this.curCOMId=u.N.comid,this.account=new i.n,this.userPerm=[],this.fileToUpload=null,this.url=(new p.P).noImage,this.companyData_Form=this.fb.group({COMCode:[],COMAraName:["",l.kI.required],COMLogo:[],COMEngName:["",l.kI.required],COMDisplayedName:["",l.kI.required],COMAddress:[],COMPhone:[],COMMobile:["",l.kI.required],COMFax:[]})}ngOnInit(){if(this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.get_CompanyData(this.curCOMId,this.account.periorty)}else this.router.navigate(["/sign-in"])}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}handelFileInput(t){this.fileToUpload=t.item(0);var a=new FileReader;a.onload=n=>{this.url=n.target.result},a.readAsDataURL(this.fileToUpload),console.log("=========this.fileToUpload========="),console.log(this.fileToUpload)}get_CompanyData(t,a){this._companyService.getCompany(t,a).subscribe(n=>{this.companyDataPatchValues(n[0]),this.url=n[0].COMLogo},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u0631\u0643\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mappingCompanyDataFormToClass(){this.initializationForCompany(),this.newCompanyData.COMCode=this.companyData_Form.value.COMCode,this.newCompanyData.COMAraName=this.companyData_Form.value.COMAraName,this.newCompanyData.COMEngName=this.companyData_Form.value.COMEngName,this.newCompanyData.COMAddress=this.companyData_Form.value.COMAddress,this.newCompanyData.COMPhone=this.companyData_Form.value.COMPhone,this.newCompanyData.COMMobile=this.companyData_Form.value.COMMobile,this.newCompanyData.COMFax=this.companyData_Form.value.COMFax,this.newCompanyData.COMDisplayedName=this.companyData_Form.value.COMDisplayedName}companyDataPatchValues(t){this.companyData_Form.patchValue({COMCode:t.COMCode,COMAraName:t.COMAraName,COMEngName:t.COMEngName,COMAddress:t.COMAddress,COMPhone:t.COMPhone,COMMobile:t.COMMobile,COMFax:t.COMFax,COMDisplayedName:t.COMDisplayedName})}initializationForCompany(){this.newCompanyData={COMId:this.curCOMId,EntryDate:null,EntryUser:null,RowConfirm:0,RowStatus:0,RowDelete:0,COMCode:null,COMAraName:"",COMEngName:"",COMDisplayedName:"",COMLogo:null,COMAddress:"",COMPhone:"",COMMobile:"",COMFax:""}}saveEditCompanyData(){this.mappingCompanyDataFormToClass(),console.log("=====this.newCompanyData====="),console.log(this.newCompanyData),this._companyService.editCompany(this.newCompanyData,this.curCOMId,this.fileToUpload).subscribe(()=>{this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u0631\u0643\u0647","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["atlas/company"])},t=>{console.log("ERROR",t),this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u062d\u0641\u0638 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u0631\u0643\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}}D.\u0275fac=function(t){return new(t||D)(e.Y36(B.C),e.Y36(X.J),e.Y36(L.U),e.Y36(c.F0),e.Y36(E.ux),e.Y36(l.qu))},D.\u0275cmp=e.Xpm({type:D,selectors:[["app-company-info"]],decls:67,vars:36,consts:[[1,"p-2"],[4,"ngIf"],[1,"pt-3"],["autocomplete","off","fxLayout","row wrap",3,"formGroup","ngSubmit"],["fxFlex","100","fxFlex.gt-sm","40",1,"px-2"],["width","200","height","150","id","campanyLogo",3,"src"],[1,"file-upload"],["for","upload",1,"d-block","file-upload__label"],["type","file","id","upload","formControlName","COMLogo","name","COMLogo","accept","image/*",1,"file-upload__input",3,"change"],["fxFlex","100","fxFlex.gt-sm","60",1,"px-2"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","95",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","COMAraName","required",""],["fxFlex","100","fxFlex.gt-sm","5",1,"px-1"],["matInput","","formControlName","COMEngName","required","","readonly",""],["fxFlex","100","fxFlex.gt-sm","50",1,"px-1"],["matInput","","formControlName","COMDisplayedName"],["matInput","","formControlName","COMMobile"],["matInput","","formControlName","COMPhone"],["matInput","","formControlName","COMFax"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","COMAddress","rows","3"],["fxFlex","100","class","mt-2 text-center w-100",4,"ngIf"],["fxFlex","100",1,"mt-2","text-center","w-100"],["mat-raised-button","","color","primary","type","submit"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"h1"),e.YNc(5,z,3,3,"span",1),e.YNc(6,ee,3,3,"span",1),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"mat-card-content",2)(10,"form",3),e.NdJ("ngSubmit",function(){return a.saveEditCompanyData()}),e.TgZ(11,"div",4),e._UZ(12,"img",5),e.TgZ(13,"div",6)(14,"label",7),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"input",8),e.NdJ("change",function(s){return a.handelFileInput(s.target.files)}),e.qZA()()(),e.TgZ(18,"div",9)(19,"div",10)(20,"div",11)(21,"mat-form-field",12)(22,"mat-label"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",13),e.YNc(26,te,2,0,"mat-error",1),e.YNc(27,ae,2,0,"mat-error",1),e.qZA()(),e.TgZ(28,"div",14)(29,"mat-form-field",12)(30,"mat-label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._UZ(33,"input",15),e.YNc(34,re,2,0,"mat-error",1),e.YNc(35,ne,2,0,"mat-error",1),e.qZA()(),e.TgZ(36,"div",16)(37,"mat-form-field",12)(38,"mat-label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e._UZ(41,"input",17),e.qZA()(),e.TgZ(42,"div",16)(43,"mat-form-field",12)(44,"mat-label"),e._uU(45),e.ALo(46,"translate"),e.qZA(),e._UZ(47,"input",18),e.qZA()(),e.TgZ(48,"div",16)(49,"mat-form-field",12)(50,"mat-label"),e._uU(51),e.ALo(52,"translate"),e.qZA(),e._UZ(53,"input",19),e.qZA()(),e.TgZ(54,"div",16)(55,"mat-form-field",12)(56,"mat-label"),e._uU(57),e.ALo(58,"translate"),e.qZA(),e._UZ(59,"input",20),e.qZA()(),e.TgZ(60,"div",21)(61,"mat-form-field",12)(62,"mat-label"),e._uU(63),e.ALo(64,"translate"),e.qZA(),e._UZ(65,"textarea",22),e.qZA()(),e.YNc(66,oe,4,3,"div",23),e.qZA()()()()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",!a.curCOMId),e.xp6(1),e.Q6J("ngIf",a.curCOMId),e.xp6(1),e.hij(" ",e.lcZ(8,18,"HTML.COMPANYDATA"),""),e.xp6(3),e.Q6J("formGroup",a.companyData_Form),e.xp6(2),e.Q6J("src",a.url,e.LSH),e.xp6(3),e.Oqu(e.lcZ(16,20,"HTML.Logo")),e.xp6(8),e.Oqu(e.lcZ(24,22,"HTML.ArabicName")),e.xp6(3),e.Q6J("ngIf",null==a.companyData_Form.controls.COMAraName.errors?null:a.companyData_Form.controls.COMAraName.errors.required),e.xp6(1),e.Q6J("ngIf",a.companyData_Form.controls.COMAraName.hasError("minlength")),e.xp6(4),e.Oqu(e.lcZ(32,24,"HTML.EnglishName")),e.xp6(3),e.Q6J("ngIf",null==a.companyData_Form.controls.COMEngName.errors?null:a.companyData_Form.controls.COMEngName.errors.required),e.xp6(1),e.Q6J("ngIf",a.companyData_Form.controls.COMEngName.hasError("minlength")),e.xp6(4),e.Oqu(e.lcZ(40,26,"HTML.DisplayedName")),e.xp6(6),e.Oqu(e.lcZ(46,28,"HTML.MOBILE")),e.xp6(6),e.Oqu(e.lcZ(52,30,"HTML.WORK_PHONE")),e.xp6(6),e.Oqu(e.lcZ(58,32,"HTML.Fax")),e.xp6(6),e.Oqu(e.lcZ(64,34,"HTML.ADDRESS")),e.xp6(3),e.Q6J("ngIf",a.can("change_company")))},dependencies:[h.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,T.xw,T.yH,M.lW,x.a8,x.dn,x.dk,x.n5,F.Nt,v.KE,v.hX,v.TO,y.X$]});var f=o(4459),b=o(5412),H=o(3238),ie=o(6709),Q=o(4385);function se(r,t){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Arabic Name is required"),e.qZA())}function le(r,t){if(1&r&&(e.TgZ(0,"mat-option",18)(1,"span"),e._uU(2),e.qZA()()),2&r){const a=t.$implicit;e.Q6J("value",a.id),e.xp6(2),e.Oqu(a.CTTSubjectName)}}function ce(r,t){if(1&r&&(e.TgZ(0,"mat-option",19)(1,"span"),e._uU(2),e.qZA()()),2&r){const a=t.$implicit;e.Q6J("value",a.id),e.xp6(2),e.Oqu(a.CTTSubjectName)}}function ue(r,t){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.SAVE")))}function de(r,t){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function pe(r,t){if(1&r){const a=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.onSave())}),e.YNc(1,ue,3,3,"span",7),e.YNc(2,de,3,3,"span",7),e.qZA()}if(2&r){const a=e.oxw();e.Q6J("mat-dialog-close",a.form.value)("disabled",!a.form.valid),e.xp6(1),e.Q6J("ngIf",!a.data.cttRow),e.xp6(1),e.Q6J("ngIf",a.data.cttRow)}}class U{constructor(t,a,n){this.dialogRef=t,this.data=a,this.fb=n}ngOnInit(){this.form=this.fb.group({id:null,CTTSubjectName:[null,l.kI.required],CTTIsDefaultValue:!1,Parent_CTTKeyField:0,Related_CTTKeyField:null,CTTSubjectEName:null,RowConfirm:0,RowDelete:0,RowStatus:0,CTTArrangeOrder:0,CTTSerial:null,CTTCode:null}),this.data.cttRow?(this.action="Patch",this.form.patchValue(this.data.cttRow)):(this.action="Post",this.form.patchValue({Parent_CTTKeyField:this.data.parentID}))}onSubmit(){console.log(this.form.value),this.form.valid&&this.dialogRef.close(this.form.value)}onSave(){this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value})}close(){this.action="Cancel",this.dialogRef.close({event:this.action})}canAdd(){return!(!this.data.curUserData.is_superuser&&!this.data.userPerm.includes(this.data.securityAdd))}canChange(){return!(!this.data.curUserData.is_superuser&&!this.data.userPerm.includes(this.data.securityChange))}}U.\u0275fac=function(t){return new(t||U)(e.Y36(b.so),e.Y36(b.WI),e.Y36(l.QS))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-codetabletree-dialog"]],decls:38,vars:24,consts:[["mat-dialog-title",""],["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","CTTSubjectName","required",""],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["formControlName","Parent_CTTKeyField",3,"disabled"],["disabled","",3,"value",4,"ngFor","ngForOf"],["formControlName","Related_CTTKeyField"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100",1,"py-1"],["formControlName","CTTIsDefaultValue","color","primary"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["disabled","",3,"value"],[3,"value"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(t,a){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,se,2,0,"mat-error",7),e.qZA()(),e.TgZ(13,"div",8)(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"mat-select",9),e.YNc(20,le,3,2,"mat-option",10),e.qZA()()(),e.TgZ(21,"div",4)(22,"mat-form-field",5)(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"mat-select",11),e.YNc(27,ce,3,2,"mat-option",12),e.qZA()()()(),e.TgZ(28,"div",13)(29,"mat-checkbox",14),e._uU(30),e.ALo(31,"translate"),e.qZA()()()(),e.TgZ(32,"div",15)(33,"div",8),e.YNc(34,pe,3,4,"button",16),e.TgZ(35,"button",17),e.NdJ("click",function(){return a.close()}),e._uU(36),e.ALo(37,"translate"),e.qZA()()()()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,12,"ADMIN_NAV.SYSTEMCODES")),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(6),e.Oqu(e.lcZ(10,14,"FIELD.NAME")),e.xp6(3),e.Q6J("ngIf",null==a.form.controls.CTTSubjectName.errors?null:a.form.controls.CTTSubjectName.errors.required),e.xp6(5),e.Oqu(e.lcZ(18,16,"HTML.PARENT")),e.xp6(2),e.Q6J("disabled",!0),e.xp6(1),e.Q6J("ngForOf",a.data.parentCTT),e.xp6(4),e.Oqu(e.lcZ(25,18,"HTML.RELATED")),e.xp6(3),e.Q6J("ngForOf",a.data.relatedCTT),e.xp6(3),e.Oqu(e.lcZ(31,20,"HTML.IsDefaultValue")),e.xp6(4),e.Q6J("ngIf",a.data.cttRow&&a.canChange()||!a.data.cttRow&&a.canAdd()),e.xp6(2),e.Oqu(e.lcZ(37,22,"BTN.CANCEL")))},dependencies:[h.sg,h.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,T.xw,T.Wh,T.yH,H.ey,M.lW,ie.oG,b.ZT,b.uh,b.xY,b.H8,F.Nt,v.KE,v.hX,v.TO,Q.gD,y.X$]});var V=o(2887),q=o(6838),K=o(1182),W=o(7392),G=o(4850),j=o(266);function he(r,t){if(1&r){const a=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.openCategoryDialog(null))}),e.TgZ(1,"h2"),e._uU(2,"+"),e.qZA()()}}function me(r,t){if(1&r){const a=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(a);const s=e.oxw().$implicit,m=e.oxw();return e.KtG(m.openCategoryDialog(s))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()}2&r&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.VIEW"))}function ge(r,t){if(1&r){const a=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(a);const s=e.oxw().$implicit,m=e.oxw();return e.KtG(m.remove(s.id))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()}2&r&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.REMOVE"))}function Ce(r,t){if(1&r&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2),e.qZA(),e.TgZ(3,"div",10)(4,"mat-icon",11),e._uU(5),e.qZA()(),e.TgZ(6,"div",10),e._uU(7),e.qZA(),e.TgZ(8,"div",10)(9,"div",12),e.YNc(10,me,4,3,"button",13),e.YNc(11,ge,4,3,"button",14),e.qZA()()()),2&r){const a=t.$implicit,n=e.oxw();e.xp6(2),e.Oqu(a.CTTSubjectName),e.xp6(3),e.Oqu(a.CTTIsDefaultValue?"check_box":"check_box_outline_blank"),e.xp6(2),e.hij(" ",a.related_Name," "),e.xp6(3),e.Q6J("ngIf",n.userCanView),e.xp6(1),e.Q6J("ngIf",n.userCanDelete)}}function fe(r,t){if(1&r){const a=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"mat-card",19)(3,"pagination-controls",20),e.NdJ("pageChange",function(s){e.CHM(a);const m=e.oxw();return e.KtG(m.onPageChanged(s))}),e.qZA()()()()}}const _e=function(r,t){return{itemsPerPage:r,currentPage:t}};class _{constructor(t,a,n,s,m,Z,R,J,Y,k){this.localStore=t,this.global=a,this.router=n,this.activatedRoute=s,this._codesService=m,this.snackBar=Z,this.translateService=R,this.fb=J,this.dialog=Y,this.appSettings=k,this.currentRowCTTArray=[],this.allCTTArray=[],this.parentsCTTArray=[],this.relatedCTTArray=[],this.levelOneCTTArray=[],this.count=6,this.curCOMId=u.N.comid,this.account=new i.n,this.userPerm=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.global.me=JSON.parse(this.localStore.getItem("account")),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.prepareMsgLanguage()}else this.router.navigate(["/sign-in"]);this.activatedRoute.data.subscribe(t=>{this.securityAdd=t.securityAdd,this.securityChange=t.securityChange,this.securityDelete=t.securityDelete,this.securityView=t.securityView,this.parentCTT=t.parentCTT,this.relatedCTT=t.relatedCTT,this.userCanAdd=this.canadd(),this.userCanChange=this.canchange(),this.userCanDelete=this.candelete(),this.userCanView=this.canview(),this.getCodeTableTreePerParent(this.curCOMId,this.account.periorty),this.getAllCodeTableTree(this.curCOMId,this.account.periorty),this.getCodeTableTreeLevelOne(this.curCOMId,this.account.periorty),this.parentCTT&&this.getCodeTableTreePerCode(this.curCOMId,this.account.periorty),this.relatedCTT&&this.getCodeTableTreePerRelated(this.curCOMId,this.account.periorty)})}canadd(){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(this.securityAdd))}canchange(){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(this.securityChange))}candelete(){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(this.securityDelete))}canview(){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(this.securityView))}onPageChanged(t){this.page=t,window.scrollTo(0,0)}openCategoryDialog(t){this.dialog.open(U,{data:{cttRow:t,parentID:this.parentID,parentCTTValue:this.parentCTT,relatedCTTValue:this.relatedCTT,parentCTT:this.levelOneCTTArray,relatedCTT:this.relatedCTTArray,curUserData:this.curUserData,userPerm:this.userPerm,securityChange:this.securityChange,securityAdd:this.securityAdd},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{"Cancel"==n.event||("Patch"==n.event?this._codesService.editCode(n.data,n.data.id).subscribe(s=>{this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0643\u0648\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getCodeTableTreePerParent(this.curCOMId,this.account.periorty)},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0643\u0648\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):"Post"==n.event&&this._codesService.addCodeTableTree(n.data).subscribe(s=>{this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0643\u0648\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getCodeTableTreePerParent(this.curCOMId,this.account.periorty)},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0643\u0648\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))})}getAllCodeTableTree(t,a){this._codesService.getAllCodeTableTree(t,a).subscribe(n=>{this.allCTTArray=n},n=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCodeTableTreeLevelOne(t,a){this._codesService.getLevelOne(t,a).subscribe(n=>{this.levelOneCTTArray=n},n=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCodeTableTreePerCode(t,a){this._codesService.getRowPerCode(t,a,this.parentCTT).subscribe(n=>{this.parentID=n[0].id,this.currentRowCTTArray=n},n=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCodeTableTreePerParent(t,a){this.curParentCTT=this.parentCTT??0,this._codesService.getSubForParent(t,a,this.curParentCTT).subscribe(n=>{this.parentsCTTArray=n},n=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCodeTableTreePerRelated(t,a){this._codesService.getSubForParent(t,a,this.relatedCTT).subscribe(n=>{this.relatedCTTArray=n},n=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}remove(t){this.dialog.open(V.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this._codesService.deleteCode(t).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getCodeTableTreePerParent(this.curCOMId,this.account.periorty)})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(t=>{this.deletedTitleMsg=t})}}_.\u0275fac=function(t){return new(t||_)(e.Y36(B.C),e.Y36(L.U),e.Y36(c.F0),e.Y36(c.gz),e.Y36(q.d),e.Y36(E.ux),e.Y36(y.sK),e.Y36(l.qu),e.Y36(b.uw),e.Y36(K.d))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-codetabletree-list"]],decls:26,vars:21,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"text-muted"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","click"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,he,3,0,"button",2),e.qZA(),e._UZ(7,"mat-divider"),e.TgZ(8,"div",3)(9,"div",4)(10,"div",5)(11,"h2"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",5)(15,"h2"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",5)(19,"h2"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e._UZ(22,"div",5),e.qZA(),e.YNc(23,Ce,12,5,"div",6),e.ALo(24,"paginate"),e.qZA()(),e.YNc(25,fe,4,0,"div",7),e.qZA()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,7,"ADMIN_NAV.SYSTEMCODES")),e.xp6(2),e.Q6J("ngIf",a.userCanAdd),e.xp6(6),e.hij(" ",e.lcZ(13,9,"FIELD.NAME")," "),e.xp6(4),e.hij(" ",e.lcZ(17,11,"HTML.DEFAULT")," "),e.xp6(4),e.hij(" ",e.lcZ(21,13,"HTML.RELATED")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(24,15,a.parentsCTTArray,e.WLB(18,_e,a.count,a.page))),e.xp6(2),e.Q6J("ngIf",a.parentsCTTArray.length>0))},dependencies:[h.sg,h.O5,T.xw,T.Wh,T.yH,M.lW,M.nh,x.a8,W.Hw,G.d,j.gM,g.LS,y.X$,g._s]});var Te=o(529);class N{constructor(t,a){this.http=t,this.globalServ=a,this.baseUrl=(new p.P).api_Ip,this.secondPartUrl=(new p.P).api_constant,this.defaultCusImage=(new p.P).noImage,this.CusImageToUpload=null}onTextChanged(t){this.tipText=t.target.value}onImageChanged(t){this.tipPIC=t.target.files[0],this.tipPicName=this.tipPIC.name}handelCUSImgInput(t){this.CusImageToUpload=t.item(0);var a=new FileReader;a.onload=n=>{this.defaultCusImage=n.target.result},a.readAsDataURL(this.CusImageToUpload)}newTip(){const t=new FormData;t.append("TIPText",this.tipText),t.append("TIPPIC",this.CusImageToUpload),this.http.post(this.baseUrl+this.secondPartUrl+"atlas/tips/",t,this.globalServ.getAuthHeaders_for_files()).subscribe(a=>console.log(a),a=>console.log(a))}}function be(r,t){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Arabic Name is required"),e.qZA())}function ve(r,t){if(1&r&&(e.TgZ(0,"mat-option",10)(1,"span"),e._uU(2),e.qZA()()),2&r){const a=t.$implicit;e.Q6J("value",a.id),e.xp6(2),e.Oqu(a.CTTSubjectName)}}function Ae(r,t){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.SAVE")))}function ye(r,t){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function Ze(r,t){if(1&r){const a=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.onSave())}),e.YNc(1,Ae,3,3,"span",7),e.YNc(2,ye,3,3,"span",7),e.qZA()}if(2&r){const a=e.oxw();e.Q6J("mat-dialog-close",a.form.value)("disabled",!a.form.valid),e.xp6(1),e.Q6J("ngIf",!a.data.branchRow),e.xp6(1),e.Q6J("ngIf",a.data.branchRow)}}N.\u0275fac=function(t){return new(t||N)(e.Y36(Te.eN),e.Y36(L.U))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-tips-list"]],decls:25,vars:1,consts:[["type","text",3,"change"],["type","file",3,"change"],[3,"click"],[2,"width","150px","height","200px",3,"src"],["for","upload",1,"d-block","text-center"],["name","TIPPIC","id","upload","type","file","accept","image/*",3,"change"]],template:function(t,a){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Upload Image From Angular"),e.qZA(),e.TgZ(2,"label"),e._uU(3," Title: "),e.TgZ(4,"input",0),e.NdJ("change",function(s){return a.onTextChanged(s)}),e.qZA()(),e._UZ(5,"br"),e.TgZ(6,"label"),e._uU(7," Image: "),e.TgZ(8,"input",1),e.NdJ("change",function(s){return a.onImageChanged(s.target.files)}),e.qZA()(),e._UZ(9,"br"),e.TgZ(10,"button",2),e.NdJ("click",function(){return a.newTip()}),e._uU(11,"New Tips"),e.qZA(),e._UZ(12,"br")(13,"br")(14,"br")(15,"br"),e.TgZ(16,"h1"),e._uU(17,"Upload Image From Angular"),e.qZA(),e._UZ(18,"br")(19,"br"),e.TgZ(20,"div"),e._UZ(21,"img",3),e.TgZ(22,"label",4),e._uU(23,"\u0635\u0648\u0631\u0647 \u0627\u0644\u0639\u0645\u064a\u0644"),e.qZA(),e.TgZ(24,"input",5),e.NdJ("change",function(s){return a.handelCUSImgInput(s.target.files)}),e.qZA()()),2&t&&(e.xp6(21),e.Q6J("src",a.defaultCusImage,e.LSH))}});class P{constructor(t,a,n,s,m){this.dialogRef=t,this.codesService=a,this.snackBar=n,this.data=s,this.fb=m,this.curCOMId=u.N.comid,this.account=new i.n,this.currency_const=(new f.I).Currency,this.currenciesArray=[]}ngOnInit(){this.form=this.fb.group({id:null,BRAArbName:[null,l.kI.required],BRAAddress:null,Currency_CTTKeyField:[null,l.kI.required],RowConfirm:0,RowDelete:0,RowStatus:0,BRACode:null}),this.getCurrencies(this.curCOMId,this.data.periorty),this.data.branchRow?(this.action="Patch",this.form.patchValue(this.data.branchRow)):this.action="Post"}getCurrencies(t,a){this.codesService.getSubForParent(t,a,this.currency_const).subscribe(n=>{this.currenciesArray=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0645\u0644\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onSave(){this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value})}close(){this.action="Cancel",this.dialogRef.close({event:this.action})}can(t){return!(!this.data.curUserData.is_superuser&&!this.data.userPerm.includes(t))}}P.\u0275fac=function(t){return new(t||P)(e.Y36(b.so),e.Y36(q.d),e.Y36(E.ux),e.Y36(b.WI),e.Y36(l.QS))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-branch-dialog"]],decls:36,vars:19,consts:[["mat-dialog-title",""],["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","BRAArbName","required",""],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["formControlName","Currency_CTTKeyField"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","BRAAddress","required",""],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(t,a){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,be,2,0,"mat-error",7),e.qZA()(),e.TgZ(13,"div",8)(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"mat-select",9)(20,"mat-option",10),e._uU(21,"-"),e.qZA(),e.YNc(22,ve,3,2,"mat-option",11),e.qZA()()()(),e.TgZ(23,"div",8)(24,"div",12)(25,"mat-form-field",5)(26,"mat-label"),e._uU(27),e.ALo(28,"translate"),e.qZA(),e._UZ(29,"input",13),e.qZA()()()()(),e.TgZ(30,"div",14)(31,"div",8),e.YNc(32,Ze,3,4,"button",15),e.TgZ(33,"button",16),e.NdJ("click",function(){return a.close()}),e._uU(34),e.ALo(35,"translate"),e.qZA()()()()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,9,"ADMIN_NAV.BRANCH")),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(6),e.Oqu(e.lcZ(10,11,"FIELD.NAME")),e.xp6(3),e.Q6J("ngIf",null==a.form.controls.BRAArbName.errors?null:a.form.controls.BRAArbName.errors.required),e.xp6(5),e.Oqu(e.lcZ(18,13,"HTML.Currency")),e.xp6(5),e.Q6J("ngForOf",a.currenciesArray),e.xp6(5),e.Oqu(e.lcZ(28,15,"HTML.ADDRESS")),e.xp6(5),e.Q6J("ngIf",a.data.branchRow&&a.can("change_branch")||!a.data.branchRow&&a.can("add_branch")),e.xp6(2),e.Oqu(e.lcZ(35,17,"BTN.CANCEL")))},dependencies:[h.sg,h.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,T.xw,T.Wh,T.yH,H.ey,M.lW,b.ZT,b.uh,b.xY,b.H8,F.Nt,v.KE,v.hX,v.TO,Q.gD,y.X$]});var Oe=o(6002);function Me(r,t){if(1&r){const a=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.openCategoryDialog(null))}),e.TgZ(1,"h2"),e._uU(2,"+"),e.qZA()()}}function xe(r,t){if(1&r){const a=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(a);const s=e.oxw().$implicit,m=e.oxw();return e.KtG(m.openCategoryDialog(s))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()}2&r&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.VIEW"))}function Ie(r,t){if(1&r){const a=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(a);const s=e.oxw().$implicit,m=e.oxw();return e.KtG(m.remove(s.id))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()}2&r&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.REMOVE"))}function De(r,t){if(1&r&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2),e.qZA(),e.TgZ(3,"div",10),e._uU(4),e.qZA(),e.TgZ(5,"div",10),e._uU(6),e.qZA(),e.TgZ(7,"div",10)(8,"div",11),e.YNc(9,xe,4,3,"button",12),e.YNc(10,Ie,4,3,"button",13),e.qZA()()()),2&r){const a=t.$implicit,n=e.oxw();e.xp6(2),e.Oqu(a.BRAArbName),e.xp6(2),e.Oqu(a.currencyName),e.xp6(2),e.Oqu(a.BRAAddress),e.xp6(3),e.Q6J("ngIf",n.can("view_branch")),e.xp6(1),e.Q6J("ngIf",n.can("delete_branch"))}}function Ue(r,t){if(1&r){const a=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"mat-card",18)(3,"pagination-controls",19),e.NdJ("pageChange",function(s){e.CHM(a);const m=e.oxw();return e.KtG(m.onPageChanged(s))}),e.qZA()()()()}}const Ne=function(r,t){return{itemsPerPage:r,currentPage:t}};class S{constructor(t,a,n,s,m,Z,R,J,Y,k){this.localStore=t,this.global=a,this.router=n,this._codesService=s,this.snackBar=m,this.translateService=Z,this.fb=R,this.dialog=J,this.atlasService=Y,this.appSettings=k,this.count=6,this.curCOMId=u.N.comid,this.account=new i.n,this.userPerm=[],this.AllBranches=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.prepareMsgLanguage(),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0)}else this.router.navigate(["/sign-in"])}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getAllBranches(t,a){this.atlasService.getAllBranch(t,a).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(t,a,n,s){console.log("----is Emp"),this.atlasService.getBranchPerEmp(t,a,n).subscribe(m=>{this.AllBranches=m,console.log("8888 getBranchPerEmp:: "+this.AllBranches),this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+s),this.atlasService.getOneBranch(s).subscribe(Z=>{this.AllBranches=Z,console.log("7777getOneBranch:: "+this.AllBranches)},Z=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},m=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onPageChanged(t){this.page=t,window.scrollTo(0,0)}openCategoryDialog(t){console.log("-----Data:: "+t),this.dialog.open(P,{data:{branchRow:t,periorty:this.account.periorty,curUserData:this.curUserData,userPerm:this.userPerm},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{"Cancel"==n.event||("Patch"==n.event?this.atlasService.editBranch(n.data,n.data.id).subscribe(s=>{this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0643\u0648\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getAllBranches(this.curCOMId,this.account.periorty)},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0643\u0648\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):"Post"==n.event&&this.atlasService.addBranch(n.data).subscribe(s=>{this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0641\u0631\u0639","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getAllBranches(this.curCOMId,this.account.periorty)},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))})}remove(t){this.dialog.open(V.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.atlasService.softDeleteBranch(t).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getAllBranches(this.curCOMId,this.account.periorty)})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(t=>{this.deletedTitleMsg=t})}}S.\u0275fac=function(t){return new(t||S)(e.Y36(B.C),e.Y36(L.U),e.Y36(c.F0),e.Y36(q.d),e.Y36(E.ux),e.Y36(y.sK),e.Y36(l.qu),e.Y36(b.uw),e.Y36(Oe.Z),e.Y36(K.d))},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-branch-list"]],decls:26,vars:21,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","click"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,Me,3,0,"button",2),e.qZA(),e._UZ(7,"mat-divider"),e.TgZ(8,"div",3)(9,"div",4)(10,"div",5)(11,"h2"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",5)(15,"h2"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",5)(19,"h2"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e._UZ(22,"div",5),e.qZA(),e.YNc(23,De,11,5,"div",6),e.ALo(24,"paginate"),e.qZA()(),e.YNc(25,Ue,4,0,"div",7),e.qZA()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,7,"ADMIN_NAV.BRANCH")),e.xp6(2),e.Q6J("ngIf",a.can("add_branch")),e.xp6(6),e.hij(" ",e.lcZ(13,9,"FIELD.NAME")," "),e.xp6(4),e.hij(" ",e.lcZ(17,11,"HTML.Currency")," "),e.xp6(4),e.hij(" ",e.lcZ(21,13,"HTML.ADDRESS")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(24,15,a.AllBranches,e.WLB(18,Ne,a.count,a.page))),e.xp6(2),e.Q6J("ngIf",a.AllBranches.length>0))},dependencies:[h.sg,h.O5,T.xw,T.Wh,T.yH,M.lW,M.nh,x.a8,W.Hw,G.d,j.gM,g.LS,y.X$,g._s]});const $=[{path:"company",component:D,data:{breadcrumb:"Company"}},{path:"branch",component:S,data:{breadcrumb:"Branch"}},{path:"codetree/country",component:_,data:{breadcrumb:"Countries",parentCTT:String((new f.I).Countries),relatedCTT:null,securityAdd:"add_country",securityChange:"change_country",securityDelete:"delete_country",securityView:"view_country"}},{path:"codetree/govern",component:_,data:{breadcrumb:"Governorates",parentCTT:String((new f.I).Governorates),relatedCTT:String((new f.I).Countries),securityAdd:"add_governorate",securityChange:"change_governorate",securityDelete:"delete_governorate",securityView:"view_governorate"}},{path:"codetree/city",component:_,data:{breadcrumb:"Cities",parentCTT:String((new f.I).City),relatedCTT:String((new f.I).Governorates),securityAdd:"add_city",securityChange:"change_city",securityDelete:"delete_city",securityView:"view_city"}},{path:"codetree/region",component:_,data:{breadcrumb:"Regions",parentCTT:String((new f.I).Regions),relatedCTT:String((new f.I).City),securityAdd:"add_region",securityChange:"change_region",securityDelete:"delete_region",securityView:"view_region"}},{path:"codetree/features",component:_,data:{breadcrumb:"PropertyFeatures",parentCTT:String((new f.I).BuildingFeatures),securityAdd:"add_buildingfeature",securityChange:"change_buildingfeature",securityDelete:"delete_buildingfeature",securityView:"view_buildingfeature"}},{path:"codetree/ownershipdoc",component:_,data:{breadcrumb:"OwnershipDocTypes",parentCTT:String((new f.I).OwnershipDocTypes),securityAdd:"add_ownershipdoc",securityChange:"change_ownershipdoc",securityDelete:"delete_ownershipdoc",securityView:"view_ownershipdoc"}},{path:"codetree/currency",component:_,data:{breadcrumb:"Currency",parentCTT:String((new f.I).Currency),securityAdd:"add_currency",securityChange:"change_currency",securityDelete:"delete_currency",securityView:"view_currency"}},{path:"codetree/expenses",component:_,data:{breadcrumb:"Expenses",parentCTT:String((new f.I).Expenses),securityAdd:"add_expenses",securityChange:"change_expenses",securityDelete:"delete_expenses",securityView:"view_expenses"}},{path:"codetree/notification",component:_,data:{breadcrumb:"Notification",parentCTT:String((new f.I).NotificationTypes),securityAdd:"add_notification",securityChange:"change_notification",securityDelete:"delete_notification",securityView:"view_notification"}},{path:"codetree/jobs",component:_,data:{breadcrumb:"Jobs",parentCTT:String((new f.I).Jobs),securityAdd:"add_jobs",securityChange:"change_jobs",securityDelete:"delete_jobs",securityView:"view_jobs"}},{path:"codetree/workplaces",component:_,data:{breadcrumb:"WorkPlaces",parentCTT:String((new f.I).WorkPlaces),securityAdd:"add_workplaces",securityChange:"change_workplaces",securityDelete:"delete_workplaces",securityView:"view_workplaces"}},{path:"tips",component:N,data:{breadcrumb:"Tips"}}];class I{constructor(t){this.translateService=t}ngOnInit(){this.prepareMsgLanguage()}prepareMsgLanguage(){this.translateService.get("TS.COMPANYDATA").subscribe(t=>{this.companyDataMsg=t})}}I.\u0275fac=function(t){return new(t||I)(e.LFG(y.sK))},I.\u0275mod=e.oAB({type:I}),I.\u0275inj=e.cJS({imports:[h.ez,c.Bz.forChild($),l.UX,O.m,g.JX,C.kz,d.Y$]})},6002:(w,A,o)=>{o.d(A,{Z:()=>C});var h=o(5521),c=o(2340),l=o(4650),O=o(529),g=o(7465);class C{constructor(i,u){this.http=i,this.globalServ=u,this.baseUrl=(new h.P).api_Ip,this.secondPartUrl=(new h.P).api_constant,this.curCOMId=c.N.comid}getAllBranch(i,u){return this.http.get(this.baseUrl+this.secondPartUrl+"atlas/branch/allBranches/?M="+i+"&C="+u,this.globalServ.getAuthHeaders())}getOneBranch(i){return console.log(this.baseUrl+this.secondPartUrl+"atlas/branch/"+i+"/"),this.http.get(this.baseUrl+this.secondPartUrl+"atlas/branch/"+i+"/",this.globalServ.getAuthHeaders())}getMainBranch(i,u){return this.http.get(this.baseUrl+this.secondPartUrl+"atlas/branch/branchPerSpec/?M="+i+"&C="+u+"&Main=T",this.globalServ.getAuthHeaders())}getBranchPerEmp(i,u,p){return this.http.get(this.baseUrl+this.secondPartUrl+"atlas/branch/branchPerSpec/?M="+i+"&C="+u+"&emp="+p,this.globalServ.getAuthHeaders())}sendSms(i,u,p){return this.http.post(i,u,this.globalServ.smsHeaders(p))}sendSmsData(i,u){const p=new FormData;return p.append("bearerTokens",u),p.append("sender","Jeddah Lake"),p.append("recipients","966503002323"),p.append("body","125478"),this.http.post(i,p,this.globalServ.smsHeaders(u))}sendSmsGet(i){return this.http.get(i)}sendSmsGetToken(i,u){return this.http.get(i,this.globalServ.smsHeaders(u))}addBranch(i){return this.http.post(this.baseUrl+this.secondPartUrl+"atlas/branch/",i,this.globalServ.getAuthHeaders())}editBranch(i,u){return this.http.put(this.baseUrl+this.secondPartUrl+"atlas/branch/"+u+"/",i,this.globalServ.getAuthHeaders())}deleteBranch(i){return this.http.delete(this.baseUrl+this.secondPartUrl+"atlas/branch/"+i+"/",this.globalServ.getAuthHeaders())}softDeleteBranch(i){return this.http.put(this.baseUrl+this.secondPartUrl+"atlas/branch/"+i+"/",{RowDelete:1},this.globalServ.getAuthHeaders())}}C.\u0275fac=function(i){return new(i||C)(l.LFG(O.eN),l.LFG(g.U))},C.\u0275prov=l.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"})},6381:(w,A,o)=>{o.d(A,{J:()=>g});var h=o(5521),c=o(4650),l=o(529),O=o(7465);class g{constructor(d,i){this.http=d,this.globalServ=i,this.baseUrl=(new h.P).api_Ip,this.secondPartUrl=(new h.P).api_constant}getCompanies(d){return this.http.get(this.baseUrl+this.secondPartUrl+"atlas/company/allCompanies/?C="+d,this.globalServ.getAuthHeaders())}addCompany(d){return this.http.post(this.baseUrl+this.secondPartUrl+"atlas/company/",d,this.globalServ.getAuthHeaders())}editCompany(d,i,u){const p=new FormData;return null!==u&&p.append("COMLogo",u,u.name),d.COMCode&&p.append("COMCode",d.COMCode.toString()),p.append("COMAraName",d.COMAraName),p.append("COMEngName",d.COMEngName),p.append("COMAddress",d.COMAddress),p.append("COMPhone",d.COMPhone),p.append("COMMobile",d.COMMobile),p.append("COMFax",d.COMFax),p.append("COMDisplayedName",d.COMDisplayedName),this.http.patch(this.baseUrl+this.secondPartUrl+"atlas/company/"+i+"/",p,this.globalServ.getAuthHeaders_for_files())}deleteCompany(d){return this.http.delete(this.baseUrl+this.secondPartUrl+"atlas/company/"+d+"/",this.globalServ.getAuthHeaders())}getOneCompany(d){return this.http.get(this.baseUrl+this.secondPartUrl+"atlas/company/"+d+"/",this.globalServ.getAuthHeaders())}getCompany(d,i){return this.http.get(this.baseUrl+this.secondPartUrl+"atlas/company/allCompanies/?M="+d+"&C="+i,this.globalServ.getAuthHeaders())}}g.\u0275fac=function(d){return new(d||g)(c.LFG(l.eN),c.LFG(O.U))},g.\u0275prov=c.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})},2887:(w,A,o)=>{o.d(A,{$:()=>C});var h=o(5412),c=o(4650),l=o(1576),O=o(4859),g=o(3081);class C{constructor(i,u){this.dialogRef=i,this.data=u}ngOnInit(){}onConfirm(){this.dialogRef.close(!0)}onDismiss(){this.dialogRef.close(!1)}}C.\u0275fac=function(i){return new(i||C)(c.Y36(h.so),c.Y36(h.WI))},C.\u0275cmp=c.Xpm({type:C,selectors:[["app-confirm-dialog"]],decls:13,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,u){1&i&&(c.TgZ(0,"h1",0),c._uU(1),c.qZA(),c.TgZ(2,"div",1)(3,"p"),c._uU(4),c.qZA()(),c.TgZ(5,"div",2)(6,"div",3)(7,"button",4),c.NdJ("click",function(){return u.onDismiss()}),c._uU(8),c.ALo(9,"translate"),c.qZA(),c.TgZ(10,"button",5),c.NdJ("click",function(){return u.onConfirm()}),c._uU(11),c.ALo(12,"translate"),c.qZA()()()),2&i&&(c.xp6(1),c.Oqu(null==u.data?null:u.data.title),c.xp6(3),c.Oqu(null==u.data?null:u.data.message),c.xp6(4),c.Oqu(c.lcZ(9,4,"BTN.NO")),c.xp6(3),c.Oqu(c.lcZ(12,6,"BTN.YES")))},dependencies:[l.xw,l.Wh,O.lW,h.uh,h.xY,h.H8,g.X$]})}}]);