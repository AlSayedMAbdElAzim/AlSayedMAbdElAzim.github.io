(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[430],{3430:(Jt,X,f)=>{"use strict";f.r(X),f.d(X,{ContractsModule:()=>wt,routes:()=>Ce});var _=f(6895),x=f(5412),m=f(4006),I=f(8955),O=f(2340),t=f(4650),D=f(6002),p=f(5298),J=f(3705),N=f(7009),T=f(1576),K=f(3238),C=f(4859),A=f(4144),v=f(9549),S=f(4385),w=f(3081);function k(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.USERNAMEREQ")))}function G(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength")))}function ot(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.EmailREQ")))}function Q(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.InvalidEmail")))}function ct(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.FirstNameREQ")))}function Rt(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength")))}function Bt(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.LastNameREQ")))}function Yt(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength")))}function Gt(r,e){if(1&r&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function Qt(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Mobile is required"),t.qZA())}function jt(r,e){if(1&r&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function $t(r,e){if(1&r&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.UNTUnitNumber," ")}}function zt(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.PasswordREQ")))}function kt(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength6")))}function Kt(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.ConfirmPasswordREQ")))}function Xt(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.MismatchPassword")))}function te(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&r){const i=t.oxw();t.Q6J("mat-dialog-close",i.registerForm.value)("disabled",!i.registerForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,3,"BTN.SAVE"))}}class ht{constructor(e,i,a,l,u,b,Z){this.dialogRef=e,this.data=i,this.atlasService=a,this.localStore=l,this.unitsService=u,this.snackBar=b,this.fb=Z,this.curCOMId=O.N.comid,this.userPerm=[],this.AllBranches=[],this.AllBuilding=[],this.AllUnitsForBuilding=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.curperiorty=this.data.periorty,this.registerForm=this.fb.group({username:["",m.kI.compose([m.kI.required,m.kI.minLength(3)])],first_name:["",m.kI.compose([m.kI.required,m.kI.minLength(2)])],last_name:["",m.kI.compose([m.kI.required,m.kI.minLength(2)])],email:["",m.kI.compose([m.kI.required,I.Le])],branch_KeyField:[null,m.kI.required],UserMobile:[null,m.kI.required],build_KeyField:[null,m.kI.required],unit_KeyField:[null,m.kI.required],is_customer:"T",password:["",m.kI.required],confirmPassword:["",m.kI.required]},{validator:(0,I.zi)("password","confirmPassword")}),this.getAllBranches(this.curCOMId,this.curperiorty)}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(a=>{this.AllBranches=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.curperiorty,e.value)}getBuildingPerBranch(e,i,a){this.unitsService.getBuildingsPerBranch(e,i,a).subscribe(l=>{this.AllBuilding=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(e){this.unitsService.getOneBuilding(e.value).subscribe(i=>{this.getUnitsPerBuilding(this.curCOMId,this.curperiorty,e.value,"E")},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuilding(e,i,a,l){this.unitsService.getAllUnitsPerBuilding(e,i,a,l).subscribe(u=>{this.AllUnitsForBuilding=u},u=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0644\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onSave(){console.log("===***Press Save button***==="),this.action="Post",this.registerForm.valid&&this.dialogRef.close({event:this.action,data:this.registerForm})}close(){console.log("===***Press Close button***==="),this.action="Cancel",this.dialogRef.close({event:this.action})}}ht.\u0275fac=function(e){return new(e||ht)(t.Y36(x.so),t.Y36(x.WI),t.Y36(D.Z),t.Y36(p.C),t.Y36(J.X),t.Y36(N.ux),t.Y36(m.QS))},ht.\u0275cmp=t.Xpm({type:ht,selectors:[["app-customers-dialog"]],decls:110,vars:81,consts:[["mat-dialog-title",""],[1,"user-form",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","username","required","",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","email","required","",3,"placeholder"],["matInput","","formControlName","first_name","required","",3,"placeholder"],["matInput","","formControlName","last_name","required","",3,"placeholder"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","UserMobile","required",""],["formControlName","build_KeyField","id","build_OneOpSel",3,"placeholder","selectionChange"],["formControlName","unit_KeyField","id","unit_OneOpSel",3,"placeholder"],["matInput","","formControlName","password","type","password","minlength","6","required","",3,"placeholder"],["matInput","","formControlName","confirmPassword","type","password","required","",3,"placeholder"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",7),t.ALo(13,"translate"),t.YNc(14,k,3,3,"mat-error",8),t.YNc(15,G,3,3,"mat-error",8),t.qZA()(),t.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",9),t.ALo(22,"translate"),t.YNc(23,ot,3,3,"mat-error",8),t.YNc(24,Q,3,3,"mat-error",8),t.qZA()()(),t.TgZ(25,"div",4)(26,"div",5)(27,"mat-form-field",6)(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",10),t.ALo(32,"translate"),t.YNc(33,ct,3,3,"mat-error",8),t.YNc(34,Rt,3,3,"mat-error",8),t.qZA()(),t.TgZ(35,"div",5)(36,"mat-form-field",6)(37,"mat-label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"input",11),t.ALo(41,"translate"),t.YNc(42,Bt,3,3,"mat-error",8),t.YNc(43,Yt,3,3,"mat-error",8),t.qZA()()(),t.TgZ(44,"div",4)(45,"div",5)(46,"mat-form-field",6)(47,"mat-label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"mat-select",12),t.NdJ("selectionChange",function(l){return i.getBuildings(l)}),t.ALo(51,"translate"),t.TgZ(52,"mat-option",13),t._uU(53,"-"),t.qZA(),t.YNc(54,Gt,2,2,"mat-option",14),t.qZA()()(),t.TgZ(55,"div",5)(56,"mat-form-field",6)(57,"mat-label"),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"mat-hint"),t._uU(61,"966505602221"),t.qZA(),t._UZ(62,"input",15),t.YNc(63,Qt,2,0,"mat-error",8),t.qZA()()(),t.TgZ(64,"div",4)(65,"div",5)(66,"mat-form-field",6)(67,"mat-label"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"mat-select",16),t.NdJ("selectionChange",function(l){return i.readBuilding(l)}),t.ALo(71,"translate"),t.TgZ(72,"mat-option",13),t._uU(73,"-"),t.qZA(),t.YNc(74,jt,2,2,"mat-option",14),t.qZA()()(),t.TgZ(75,"div",5)(76,"mat-form-field",6)(77,"mat-label"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"mat-select",17),t.ALo(81,"translate"),t.TgZ(82,"mat-option",13),t._uU(83,"-"),t.qZA(),t.YNc(84,$t,2,2,"mat-option",14),t.qZA()()()(),t.TgZ(85,"div",4)(86,"div",5)(87,"mat-form-field",6)(88,"mat-label"),t._uU(89),t.ALo(90,"translate"),t.qZA(),t._UZ(91,"input",18),t.ALo(92,"translate"),t.YNc(93,zt,3,3,"mat-error",8),t.YNc(94,kt,3,3,"mat-error",8),t.qZA()(),t.TgZ(95,"div",5)(96,"mat-form-field",6)(97,"mat-label"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t._UZ(100,"input",19),t.ALo(101,"translate"),t.YNc(102,Kt,3,3,"mat-error",8),t.YNc(103,Xt,3,3,"mat-error",8),t.qZA()()()()(),t.TgZ(104,"div",20)(105,"div",4),t.YNc(106,te,4,5,"button",21),t.TgZ(107,"button",22),t.NdJ("click",function(){return i.close()}),t._uU(108),t.ALo(109,"translate"),t.qZA()()()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,39,"MESSAGE.RegisterMsg")),t.xp6(2),t.Q6J("formGroup",i.registerForm),t.xp6(7),t.Oqu(t.lcZ(11,41,"HTML.USERNAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(13,43,"HTML.USERNAME")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.username.errors?null:i.registerForm.controls.username.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.username.hasError("minlength")),t.xp6(4),t.Oqu(t.lcZ(20,45,"HTML.EMAIL")),t.xp6(2),t.s9C("placeholder",t.lcZ(22,47,"HTML.EMAIL")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.email.errors?null:i.registerForm.controls.email.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.email.hasError("invalidEmail")),t.xp6(5),t.Oqu(t.lcZ(30,49,"HTML.FIRST_NAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(32,51,"HTML.FIRST_NAME")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.first_name.errors?null:i.registerForm.controls.first_name.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.first_name.hasError("minlength")),t.xp6(4),t.Oqu(t.lcZ(39,53,"HTML.LAST_NAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(41,55,"HTML.LAST_NAME")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.last_name.errors?null:i.registerForm.controls.last_name.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.last_name.hasError("minlength")),t.xp6(5),t.hij(" ",t.lcZ(49,57,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(51,59,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.Oqu(t.lcZ(59,61,"HTML.MOBILE")),t.xp6(5),t.Q6J("ngIf",null==i.registerForm.controls.UserMobile.errors?null:i.registerForm.controls.UserMobile.errors.required),t.xp6(5),t.hij(" ",t.lcZ(69,63,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(71,65,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuilding),t.xp6(4),t.hij(" ",t.lcZ(79,67,"HTML.UNIT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(81,69,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnitsForBuilding),t.xp6(5),t.Oqu(t.lcZ(90,71,"HTML.PASSWORD")),t.xp6(2),t.s9C("placeholder",t.lcZ(92,73,"HTML.PASSWORD")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.password.errors?null:i.registerForm.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.password.hasError("minlength")),t.xp6(4),t.Oqu(t.lcZ(99,75,"HTML.ConfirmPassword")),t.xp6(2),t.s9C("placeholder",t.lcZ(101,77,"HTML.ConfirmPassword")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.confirmPassword.errors?null:i.registerForm.controls.confirmPassword.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.confirmPassword.hasError("mismatchedPasswords")),t.xp6(3),t.Q6J("ngIf",i.can("add_tenant")),t.xp6(2),t.Oqu(t.lcZ(109,79,"BTN.CANCEL")))},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.wO,_.sg,_.O5,m.sg,m.u,T.xw,T.Wh,T.yH,K.ey,C.lW,x.ZT,x.uh,x.xY,x.H8,A.Nt,v.KE,v.hX,v.bx,v.TO,S.gD,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:280px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});class bt{}var at=f(5783),E=f(5726),U=f(5521),rt=f(2887),F=f(4459),ut=f(7298),st=f(1182),V=f(9132),j=f(7465),dt=f(4165),Vt=f(3071),$=f(4333),mt=f(811),H=f(3546),z=f(7392),tt=f(4850),Ot=f(1572),pt=f(266),Nt=f(1419);function ee(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"mat-button-toggle",22),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return t.KtG(l.gotoNewTenantFullData())}),t.TgZ(1,"mat-icon"),t._uU(2,"person_add"),t.qZA()()}}function Ht(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"mat-button-toggle-group",10,11),t.YNc(5,ee,3,0,"mat-button-toggle",12),t.TgZ(6,"mat-button-toggle",13)(7,"mat-icon"),t._uU(8,"search"),t.qZA()()()(),t.TgZ(9,"form",14)(10,"mat-form-field",15)(11,"input",16),t.NdJ("ngModelChange",function(l){t.CHM(i);const u=t.oxw();return t.KtG(u.searchText=l)}),t.ALo(12,"translate"),t.qZA()()(),t.TgZ(13,"div",17)(14,"mat-button-toggle-group",18,19)(16,"mat-button-toggle",20)(17,"mat-icon"),t._uU(18,"view_list"),t.qZA()(),t.TgZ(19,"mat-button-toggle",21)(20,"mat-icon"),t._uU(21,"view_module"),t.qZA()()()()()()}if(2&r){const i=t.MAs(4),a=t.oxw();t.xp6(5),t.Q6J("ngIf",a.can("add_tenant")),t.xp6(4),t.ekj("show","search"==i.value),t.xp6(2),t.s9C("placeholder",t.lcZ(12,5,"HTML.SEARCH_TENANT_AnyValue")),t.Q6J("ngModel",a.searchText)}}const vt=function(r){return["/contracts/tenant-add/",r]};function it(r,e){if(1&r&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&r){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,vt,i.id))}}function Dt(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw();return t.KtG(u.removeTenant(l.id,l.Userid))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&r&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}const ie=function(r){return["/contracts/statements-list/",r]};function lt(r,e){if(1&r&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&r){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.Statements")),t.Q6J("routerLink",t.VKq(4,ie,i.id))}}const ne=function(r){return["/contracts/contract-list/",r]};function s(r,e){if(1&r&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"auto_stories"),t.qZA()()),2&r){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.ContractForTenant")),t.Q6J("routerLink",t.VKq(4,ne,i.id))}}function n(r,e){if(1&r&&(t.TgZ(0,"div",23)(1,"div",24),t._uU(2),t.qZA(),t.TgZ(3,"div",24),t._uU(4),t.qZA(),t.TgZ(5,"div",24),t._uU(6),t.qZA(),t.TgZ(7,"div",24),t._uU(8),t.qZA(),t.TgZ(9,"div",24),t._uU(10),t.qZA(),t.TgZ(11,"div",24),t._uU(12),t.qZA(),t.TgZ(13,"div",24)(14,"mat-icon",25),t._uU(15),t.qZA()(),t.TgZ(16,"div",24)(17,"div",26),t.YNc(18,it,4,6,"a",27),t.YNc(19,Dt,4,3,"button",28),t.YNc(20,lt,4,6,"a",27),t.YNc(21,s,4,6,"a",27),t.qZA()()()),2&r){const i=e.$implicit,a=t.oxw();t.xp6(2),t.Oqu(i.CUSName),t.xp6(2),t.Oqu(i.CUSMobile),t.xp6(2),t.hij(" ",i.build_Name," "),t.xp6(2),t.hij(" ",i.unit_Name," "),t.xp6(2),t.hij(" ",i.job_Name," "),t.xp6(2),t.hij(" ",i.workplace_Name," "),t.xp6(3),t.Oqu("T"==i.CUSActive?"check_box":"check_box_outline_blank"),t.xp6(3),t.Q6J("ngIf",a.can("change_tenant")||a.can("view_onetenant")||0==a.account.periorty&&"T"!==a.account.userDataConfirmed),t.xp6(1),t.Q6J("ngIf",a.can("delete_tenant")),t.xp6(1),t.Q6J("ngIf",a.can("view_tenantstatements")),t.xp6(1),t.Q6J("ngIf",a.can("view_contractfortenant"))}}function o(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"div",31)(1,"div",32)(2,"mat-card",33)(3,"pagination-controls",34),t.NdJ("pageChange",function(l){t.CHM(i);const u=t.oxw();return t.KtG(u.onPageChanged(l))}),t.qZA()()()()}}function c(r,e){1&r&&(t.TgZ(0,"div",35),t._UZ(1,"mat-spinner",36),t.qZA())}const d=function(r,e){return{itemsPerPage:r,currentPage:e}};class h{constructor(e,i,a,l,u,b,Z,M,P,Y,et){this.transferService=e,this.appSettings=i,this.dialog=a,this.usersService=l,this.router=u,this.global=b,this.localStore=Z,this.settingService=M,this.snackBar=P,this.translateService=Y,this.userService=et,this.curTenant=new bt,this.curCOMId=O.N.comid,this.account=new at.n,this.count=8,this.defaultCusImage=(new U.P).noImage,this.CusImageToUpload=null,this.userPerm=[],this.editTenantCodeStatus=(new F.$).getEditTenantCodeStatus(),this.editCode=!0,this.settings=this.appSettings.settings}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=a=>{this.defaultCusImage=a.target.result},i.readAsDataURL(this.CusImageToUpload)}ngOnInit(){if(this.securityForApp=(new F.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.getParamValue(this.curCOMId,this.account.periorty,this.editTenantCodeStatus),this.prepareMsgLanguage(),this.getTenants()}else this.router.navigate(["/sign-in"])}getParamValue(e,i,a){this.settingService.getValueForCode(e,i,a).subscribe(l=>{a==this.editTenantCodeStatus&&(this.editTenantCodeValue=l[0].APAValue)},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getTenants(){this.users=null,this.curUserData.is_superuser?this.usersService.getCustomerPerSpec(this.curCOMId,this.account.periorty).subscribe(e=>this.users=e):0==this.curUserData.periorty?this.usersService.getCustomerPerUser(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(e=>this.users=e):("N"==this.securityForApp&&(this.curBranchID=this.curUserData.branch_KeyField??0,this.usersService.getCustomersPerBranch(this.curCOMId,this.account.periorty,this.curBranchID).subscribe(e=>this.users=e)),"D"==this.securityForApp&&this.usersService.getCustomersPerEmployee(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(e=>this.users=e))}addTenant(e){this.usersService.addOneCustomer(e).subscribe(i=>this.getTenants())}updateTenant(e){this.usersService.editCustomer(e,this.CusImageToUpload,this.CusImageToUpload,this.curUserData.is_employee).subscribe(i=>this.getTenants())}deleteTenant(e){this.dialog.open(rt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(a=>{a&&this.usersService.deleteCustomer(e.id).subscribe(l=>this.getTenants())})}removeTenant(e,i){this.dialog.open(rt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(l=>{l&&this.usersService.deleteCustomer(e).subscribe(u=>{this.userService.deleteOneUser(i).subscribe(b=>{}),this.getTenants()})})}onPageChanged(e){this.page=e,this.getTenants(),window.scrollTo(0,0)}gotoTenantDisplay(e){console.log("===**gotoTenantDisplay**=== "+e),this.router.navigate(["/contracts/tenant-add/"+e])}gotoNewTenantFullData(){this.transferService.setMessage({editTenantCode:this.editTenantCodeValue}),this.router.navigate(["/contracts/tenant-add/"])}gotoNewTenant(){this.dialog.open(ht,{data:{periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(i=>{console.log("=====result.event:: "+i.event),"Cancel"==i.event||"Post"==i.event&&this.userService.registerTenant_with_lastName(i.data).subscribe(a=>{console.log("TenantID:: "+a.id),this.getTenants(),this.snackBar.open(this.registeredMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.can("view_onetenant")&&this.gotoTenantDisplay(a.id)},a=>{console.log("error",a),this.snackBar.open(this.notRegisteredMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})})}openTenantDialog(e){this.dialog.open(ht,{data:e}).afterClosed().subscribe(a=>{a?(console.log("=====if user True:: =============="),console.log(a),this.curTenant=new bt,console.log(this.curTenant),this.fromUserToCustomer(a),console.log(this.curTenant),a.id?this.updateTenant(this.curTenant):this.addTenant(this.curTenant)):console.log("=====if user False:: ==============")})}fromUserToCustomer(e){this.curTenant.id=e.id,this.curTenant.RowDelete=e.settings.isDeleted?1:0,this.curTenant.CUSCode=e.code,this.curTenant.CUSPic=e.image,this.curTenant.CUSGender=e.profile.gender,console.log("====Date===="),console.log(e.profile.birthday),this.curTenant.CUSBirthDate=e.profile.birthday,this.curTenant.CUSMobile=e.mobile,this.curTenant.CUSEmail=e.contacts.email,this.curTenant.CUSActive=e.settings.isActive?"T":"F",this.curTenant.CUSAddress=e.contacts.address,this.curTenant.Country_CTTKeyField=e.contacts.country,this.curTenant.CUSusername=e.username,this.curTenant.CUSFirstName=e.firstname,this.curTenant.CUSLastName=e.lastname}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e}),this.translateService.get("MESSAGE.REGISTERD").subscribe(e=>{this.registeredMsg=e}),this.translateService.get("MESSAGE.NOTREGISTERD").subscribe(e=>{this.notRegisteredMsg=e})}}h.\u0275fac=function(e){return new(e||h)(t.Y36(ut.y),t.Y36(st.d),t.Y36(x.uw),t.Y36(E.v),t.Y36(V.F0),t.Y36(j.U),t.Y36(p.C),t.Y36(dt.g),t.Y36(N.ux),t.Y36(w.sK),t.Y36(Vt.K))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-customers-list"]],features:[t._Bn([E.v])],decls:44,vars:37,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"text-muted"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){1&e&&(t.YNc(0,Ht,22,7,"div",0),t._UZ(1,"mat-divider"),t.TgZ(2,"mat-card")(3,"div",1)(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",2)(9,"div",3)(10,"div",4)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",4)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",4)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",4)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",4)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",4)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",4)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",4),t.qZA(),t.YNc(39,n,22,11,"div",5),t.ALo(40,"paginate"),t.ALo(41,"TenantSearchPipe"),t.qZA()(),t.YNc(42,o,4,0,"div",6),t.YNc(43,c,2,0,"div",7)),2&e&&(t.Q6J("ngIf",i.account.periorty>0),t.xp6(5),t.hij("",t.lcZ(6,12,"HTML.TENANTS_LIST")," "),t.xp6(7),t.hij(" ",t.lcZ(13,14,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(17,16,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(21,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(25,20,"HTML.UNIT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,22,"HTML.Job")," "),t.xp6(4),t.hij(" ",t.lcZ(33,24,"HTML.WorkPlace")," "),t.xp6(4),t.hij(" ",t.lcZ(37,26,"HTML.ACTIVATED")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(40,28,t.xi3(41,31,i.users,i.searchText),t.WLB(34,d,i.count,i.page))),t.xp6(3),t.Q6J("ngIf",i.users),t.xp6(1),t.Q6J("ngIf",!i.users))},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.On,m.F,$.LS,_.sg,_.O5,V.rH,T.xw,T.Wh,T.yH,C.Tq,C.nh,mt.A9,mt.Yi,H.a8,z.Hw,A.Nt,v.KE,tt.d,Ot.Ou,pt.gM,$._s,Nt.DA,w.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});var g=f(8959),y=f(5346);function R(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"mat-button-toggle",21),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.gotoNewContract())}),t.TgZ(1,"mat-icon"),t._uU(2,"note_add"),t.qZA()()}}const q=function(r){return["/contracts/contract-add/",r]};function B(r,e){if(1&r&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&r){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,q,i.id))}}function L(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw();return t.KtG(u.removeContract(l.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&r&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}const Te=function(r){return["/contracts/installment-list/",r]};function be(r,e){if(1&r&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&r){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,Te,i.id))}}const ve=function(r){return["/contracts/contract-add/renew/",r]};function xe(r,e){if(1&r&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"autorenew"),t.qZA()()),2&r){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.ReNewContract")),t.Q6J("routerLink",t.VKq(4,ve,i.id))}}function Ae(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw();return t.KtG(u.leaveTenant(l,l.customer_Name))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"airport_shuttle"),t.qZA()()}2&r&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.LEAVE"))}function ye(r,e){if(1&r&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t._UZ(3,"br"),t._uU(4),t.qZA(),t.TgZ(5,"div",23),t._uU(6),t.qZA(),t.TgZ(7,"div",23),t._uU(8),t.qZA(),t.TgZ(9,"div",23),t._uU(10),t.qZA(),t.TgZ(11,"div",23),t._uU(12),t.qZA(),t.TgZ(13,"div",23),t._uU(14),t.qZA(),t.TgZ(15,"div",23),t._uU(16),t.qZA(),t.TgZ(17,"div",23)(18,"div",24),t.YNc(19,B,4,6,"a",25),t.YNc(20,L,4,3,"button",26),t.YNc(21,be,4,6,"a",25),t.YNc(22,xe,4,6,"a",25),t.YNc(23,Ae,4,3,"button",26),t.qZA()()()),2&r){const i=e.$implicit,a=t.oxw();t.Tol(a.statusColor[i.RCOContractStatus]),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.unit_UnitNumber),t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",i.customer_Mobile," "),t.xp6(2),t.hij(" ",i.RCOEndDate," "),t.xp6(2),t.AsE(" (",i.RCOCode," / ",i.RCOSubCode,") "),t.xp6(2),t.hij(" ",i.RCOEjarCode," "),t.xp6(3),t.Q6J("ngIf",a.can("view_onecontract")||0==a.account.periorty),t.xp6(1),t.Q6J("ngIf",a.can("delete_rentcontracts")),t.xp6(1),t.Q6J("ngIf",a.can("view_contractinstallments")||0==a.account.periorty),t.xp6(1),t.Q6J("ngIf",a.can("view_renewcontract")&&"N"==i.RCOContractStatus),t.xp6(1),t.Q6J("ngIf",a.can("view_tenantleave"))}}function Ze(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"div",29)(1,"div",30)(2,"mat-card",31)(3,"pagination-controls",32),t.NdJ("pageChange",function(l){t.CHM(i);const u=t.oxw();return t.KtG(u.onPageChanged(l))}),t.qZA()()()()}}function we(r,e){1&r&&(t.TgZ(0,"div",33),t._UZ(1,"mat-spinner",34),t.qZA())}const Oe=function(r,e){return{itemsPerPage:r,currentPage:e}};class xt{constructor(e,i,a,l,u,b,Z,M,P,Y,et){this.transferService=e,this.dataService=i,this.appSettings=a,this.activatedRoute=l,this.dialog=u,this.contractService=b,this.router=Z,this.global=M,this.localStore=P,this.translateService=Y,this.snackBar=et,this.statusColor={N:"make-white",R:"make-gold",F:"make-yellowgreen",C:"make-yellow"},this.curCOMId=O.N.comid,this.account=new at.n,this.count=4,this.userPerm=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.securityForApp=(new F.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.contForTenant=this.activatedRoute.params.subscribe(e=>{e.tenantid?(this.idForTenant=+e.tenantid,console.log("params['tenantid']:: "+this.idForTenant)):this.idForTenant=0}),console.log("line 85 this.idForTenant:: "+this.idForTenant),this.prepareMsgLanguage(),this.getContracts()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getAllContracts(this.curCOMId,this.account.periorty).subscribe(e=>this.contractsAll=e):"T"==this.curUserData.is_owner?this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerOwner(this.curCOMId,this.account.periorty,this.curUserData.owner_KeyField).subscribe(e=>this.contractsAll=e):"T"==this.curUserData.is_employee?("N"==this.securityForApp&&(this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerBranch(this.curCOMId,this.account.periorty,this.account.branch_KeyField).subscribe(e=>this.contractsAll=e)),"D"==this.securityForApp&&(this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerEmp(this.curCOMId,this.account.periorty,this.account.id).subscribe(e=>this.contractsAll=e))):0==this.curUserData.periorty&&(this.curCustomerID=this.account.customer_KeyField??0,this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.curCustomerID).subscribe(e=>this.contractsAll=e))}renewContract(e){console.log("===========renewContract")}leaveTenant(e,i){this.transferService.setMessage({contract_KeyField:e.id,remaining_Installments:e.remaining_Installments,contenddate:e.RCOEndDate,contvalue:e.RCOContractValue,continsurance:e.RCOInsuranceValue,leaveid:e.RCOTenantLeaveID,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,cusName:i}),console.log("----Before info---"),null==e.RCOTenantLeaveID?(console.log("--contractRow.RCOTenantLeaveID == null--"),this.router.navigate(["contracts/tenant-leave/"])):(console.log("---ELSE-----"),this.router.navigate(["contracts/tenant-leave/"+e.RCOTenantLeaveID+"/"]))}removeContract(e){this.dialog.open(rt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(a=>{a&&this.contractService.deleteContract(e).subscribe(l=>this.getContracts())})}contractInstallments(e){}onPageChanged(e){this.page=e,this.getContracts(),window.scrollTo(0,0)}printEInvoice(){this.router.navigate(["/contracts/print-einvoice/"])}gotoNewContract(){this.router.navigate(["/contracts/contract-add/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}xt.\u0275fac=function(e){return new(e||xt)(t.Y36(ut.y),t.Y36(y.n),t.Y36(st.d),t.Y36(V.gz),t.Y36(x.uw),t.Y36(g.W),t.Y36(V.F0),t.Y36(j.U),t.Y36(p.C),t.Y36(w.sK),t.Y36(N.ux))},xt.\u0275cmp=t.Xpm({type:xt,selectors:[["app-contract-list"]],features:[t._Bn([g.W])],decls:64,vars:43,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",3,"class",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),t.YNc(4,R,3,0,"mat-button-toggle",4),t.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),t._uU(7,"search"),t.qZA()()()(),t.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),t.NdJ("ngModelChange",function(l){return i.searchText=l}),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),t._uU(17,"view_list"),t.qZA()(),t.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),t._uU(20,"view_module"),t.qZA()()()()(),t._UZ(21,"mat-divider"),t.TgZ(22,"mat-card")(23,"div",14)(24,"h2"),t._uU(25),t.ALo(26,"translate"),t.qZA()(),t._UZ(27,"mat-divider"),t.TgZ(28,"div",15)(29,"div",16)(30,"div",17)(31,"h3"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",17)(35,"h3"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",17)(39,"h3"),t._uU(40),t.ALo(41,"translate"),t.qZA()(),t.TgZ(42,"div",17)(43,"h3"),t._uU(44),t.ALo(45,"translate"),t.qZA()(),t.TgZ(46,"div",17)(47,"h3"),t._uU(48),t.ALo(49,"translate"),t.qZA()(),t.TgZ(50,"div",17)(51,"h3"),t._uU(52),t.ALo(53,"translate"),t.qZA()(),t.TgZ(54,"div",17)(55,"h3"),t._uU(56),t.ALo(57,"translate"),t.qZA()(),t._UZ(58,"div",17),t.qZA(),t.YNc(59,ye,24,16,"div",18),t.ALo(60,"paginate"),t.ALo(61,"ContractSearchPipe"),t.qZA()(),t.YNc(62,Ze,4,0,"div",19),t.YNc(63,we,2,0,"div",20)),2&e){const a=t.MAs(3);t.xp6(4),t.Q6J("ngIf",i.can("add_rentcontracts")),t.xp6(4),t.ekj("show","search"==a.value),t.xp6(2),t.s9C("placeholder",t.lcZ(11,16,"HTML.SEARCH_CONTRACT")),t.Q6J("ngModel",i.searchText),t.xp6(15),t.Oqu(t.lcZ(26,18,"HTML.Contract_List")),t.xp6(7),t.hij(" ",t.lcZ(33,20,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(37,22,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(41,24,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(45,26,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(49,28,"HTML.ContractEndDate")," "),t.xp6(4),t.hij(" ",t.lcZ(53,30,"HTML.ContractCode")," "),t.xp6(4),t.hij(" ",t.lcZ(57,32,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(60,34,t.xi3(61,37,i.contractsAll,i.searchText),t.WLB(40,Oe,i.count,i.page))),t.xp6(3),t.Q6J("ngIf",i.contractsAll),t.xp6(1),t.Q6J("ngIf",!i.contractsAll)}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.On,m.F,$.LS,_.sg,_.O5,V.rH,T.xw,T.Wh,T.yH,C.Tq,C.nh,mt.A9,mt.Yi,H.a8,z.Hw,A.Nt,v.KE,tt.d,Ot.Ou,pt.gM,$._s,Nt.JQ,w.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}table{width:100%}.make-gold{background-color:#fbea96}.make-yellow{background-color:#ff4500}.make-yellowgreen{background-color:#ad7020}.make-white{background-color:#fff}\n"],encapsulation:2});var Ne=f(5861);class De{}var ce=f(6838),oe=f(6709),W=f(9602),At=f(3848),ae=f(1596),Ut=f(8796);function Ue(r,e){1&r&&(t.TgZ(0,"h1",76),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"RenewContract")," "))}function Le(r,e){1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function Ie(r,e){1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Se(r,e){if(1&r&&(t.TgZ(0,"h1",76),t.YNc(1,Le,3,3,"span",77),t.YNc(2,Ie,3,3,"span",77),t._uU(3),t.ALo(4,"translate"),t.qZA()),2&r){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",!i.contractForDisplay.id),t.xp6(1),t.Q6J("ngIf",i.contractForDisplay.id),t.xp6(1),t.hij(" ",t.lcZ(4,3,"HTML.RentContract"),"")}}function Fe(r,e){if(1&r&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.OWNName," ")}}function Me(r,e){if(1&r&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.OWNName," ")}}function Ee(r,e){if(1&r&&(t.TgZ(0,"ng-option",23),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CUSName,"")}}function qe(r,e){if(1&r&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CUSName," ")}}function Pe(r,e){if(1&r&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function Re(r,e){if(1&r&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function Be(r,e){if(1&r&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.UNTUnitNumber," ")}}function ke(r,e){1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function Ke(r,e){1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Ve(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",78),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.saveUpdate(l.contractForDisplay.id))}),t.YNc(1,ke,3,3,"span",77),t.YNc(2,Ke,3,3,"span",77),t.qZA()}if(2&r){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.contractForDisplay.id),t.xp6(1),t.Q6J("ngIf",i.contractForDisplay.id)}}class gt{constructor(e,i,a,l,u,b,Z,M,P,Y,et,Ct,Tt){this.activatedRoute=e,this.codesService=i,this.unitsService=a,this.contractService=l,this.fb=u,this.localStore=b,this.router=Z,this.global=M,this.translateService=P,this.atlasService=Y,this.settingService=et,this.tenantsService=Ct,this.snackBar=Tt,this.curCOMId=O.N.comid,this.account=new at.n,this.docType_const=(new F.I).OwnershipDocTypes,this.country_const=(new F.I).Countries,this.governorate_const=(new F.I).Governorates,this.city_const=(new F.I).City,this.region_const=(new F.I).Regions,this.buildingFeatures_const=(new F.I).BuildingFeatures,this.passwordHide=!0,this.userPerm=[],this.codeForDefaultOwner=(new F.$).getDefaultOwner(),this.typeOfContractSerial=(new F.$).getTypeOfContractSerial(),this.DocImageToUpload=null,this.defaultDocImage=(new U.P).noImage,this.defaultCusImage=(new U.P).noImage,this.CusImageToUpload=null,this.DocTypes=[],this.parameters=[],this.Countries=[],this.Governorates=[],this.AllBuilding=[],this.AllUnitsForBuilding=[],this.AllRepresentativeForOwner=[],this.AllBranches=[],this.AllOwners=[],this.AllRepresentativeForCustomer=[],this.AllTenants=[]}isBigEnough(e,i,a){return e>=10}ngOnInit(){if(this.userSUb=this.global.user.subscribe(i=>{this.account=i}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;var e=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==e.is_employee,this.isAdmin=e.is_superuser,this.isOwner="T"==e.is_owner,this.ownerKeyForApp=(new F.$).ownerKeyField,this.form=this.fb.group({id:null,RCOCode:[null,m.kI.required],RCOSubCode:1,RCOEjarCode:null,Related_RCOKeyField:null,contractDate:null,contractStartDate:[null,m.kI.required],contractEndDate:[null,m.kI.required],RCOContractStatus:"N",RCOAlarmStartDate:{value:[""],disabled:!0},RCONoOfDaysForAlarm:[null,m.kI.required],RCONoOfDaysForEjarAlarm:[null,m.kI.required],RCOAlarmCounter:{value:0,disabled:!0},contractUnit:this.fb.group({branch_KeyField:{value:null,disabled:0==this.curUserData.periorty},build_KeyField:{value:null,disabled:0==this.curUserData.periorty},unit_KeyField:{value:null,disabled:0==this.curUserData.periorty}}),contractPerson:this.fb.group({owner_KeyField:null,owner_representative_KeyField:null,customer_KeyField:null,customer_representative_KeyField:null,customer_code:null}),contractValues:this.fb.group({RCOContractValue:[null,m.kI.required],RCOPayEveryMonthesNo:[null,m.kI.required],RCOMonthValue:[null,m.kI.required],RCOInsuranceValue:0,RCOSeekingValue:0,RCOMonthlyExpense:0,RCOExpenseDesc:null,RCOOtherValue:0,RCOMonthlyElectricValue:0,RCOElectricCounterReading:null,RCOMonthlyWaterValue:0,RCOWaterCounterReading:null,RCOMonthlyGasValue:0,RCOGasCounterReading:null}),settings:this.fb.group({isActive:null,isDeleted:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),this.isEmployee&&(this.form.controls.RCOEjarCode.setValidators([m.kI.required]),this.form.controls.RCOEjarCode.updateValueAndValidity()),(this.isAdmin||this.isOwner)&&(this.form.controls.RCOEjarCode.clearValidators(),this.form.controls.RCOEjarCode.updateValueAndValidity()),this.getParamValue(this.curCOMId,this.account.periorty,1),this.getParamValue(this.curCOMId,this.account.periorty,2),this.getParamValue(this.curCOMId,this.account.periorty,3),this.getParamValue(this.curCOMId,this.account.periorty,this.codeForDefaultOwner),this.getParamValue(this.curCOMId,this.account.periorty,this.typeOfContractSerial),this.getCountries(this.curCOMId,this.account.periorty),this.getAllOwnerss(this.curCOMId,this.account.periorty),this.getOwnershipDocType(this.curCOMId,this.account.periorty),this.getTenants(),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0),this.activatedRoute.data.subscribe(i=>{this.isRenewContract=i.parentID}),this.sub=this.activatedRoute.params.subscribe(i=>{i.id?(this.id=+i.id,console.log("params['id']:: "+this.id),this.getContractById(this.id)):this.contractForDisplay=new De})}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onFileChange(e){this.DocImageToUpload=e.item(0);var i=new FileReader;i.onload=a=>{this.defaultDocImage=a.target.result},i.readAsDataURL(this.DocImageToUpload)}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=a=>{this.defaultCusImage=a.target.result},i.readAsDataURL(this.CusImageToUpload)}mapFormvalue_to_ContractClass(){this.form.enable();const e=new _.uU("en-GB").transform(this.form.value.contractDate,"dd/MM/yyyy"),i=new _.uU("en-GB").transform(this.form.value.contractStartDate,"dd/MM/yyyy"),a=new _.uU("en-GB").transform(this.form.value.contractEndDate,"dd/MM/yyyy"),l=new _.uU("en-GB").transform(this.form.value.RCOAlarmStartDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,this.contractForDisplay.id=this.form.value.id,this.contractForDisplay.Related_RCOKeyField=this.form.value.Related_RCOKeyField,this.contractForDisplay.RCOCode=this.form.value.RCOCode,this.contractForDisplay.RCOSubCode=this.form.value.RCOSubCode,this.contractForDisplay.RCOEjarCode=this.form.value.RCOEjarCode,null!=this.form.value.contractDate&&(this.contractForDisplay.RCODate=e),null!=this.form.value.contractStartDate&&(this.contractForDisplay.RCOStartDate=i),null!=this.form.value.contractEndDate&&(this.contractForDisplay.RCOEndDate=a),null!=this.form.value.RCOAlarmStartDate&&(this.contractForDisplay.RCOAlarmStartDate=l),this.contractForDisplay.RCOContractStatus=this.form.value.RCOContractStatus,this.contractForDisplay.RCOAlarmCounter=this.form.value.RCOAlarmCounter,this.contractForDisplay.RCONoOfDaysForAlarm=this.form.value.RCONoOfDaysForAlarm,this.contractForDisplay.RCONoOfDaysForEjarAlarm=this.form.value.RCONoOfDaysForEjarAlarm,this.contractForDisplay.branch_KeyField=this.form.value.contractUnit.branch_KeyField,this.contractForDisplay.build_KeyField=this.form.value.contractUnit.build_KeyField,this.contractForDisplay.unit_KeyField=this.form.value.contractUnit.unit_KeyField,this.contractForDisplay.owner_KeyField=this.form.value.contractPerson.owner_KeyField,this.contractForDisplay.owner_representative_KeyField=this.form.value.contractPerson.owner_representative_KeyField,this.contractForDisplay.customer_KeyField=this.form.value.contractPerson.customer_KeyField,this.contractForDisplay.customer_representative_KeyField=this.form.value.contractPerson.customer_representative_KeyField,this.contractForDisplay.RCOContractValue=this.form.value.contractValues.RCOContractValue,this.contractForDisplay.RCOPayEveryMonthesNo=this.form.value.contractValues.RCOPayEveryMonthesNo,this.contractForDisplay.RCOMonthValue=this.form.value.contractValues.RCOMonthValue,this.contractForDisplay.RCOInsuranceValue=this.form.value.contractValues.RCOInsuranceValue,this.contractForDisplay.RCOSeekingValue=this.form.value.contractValues.RCOSeekingValue,this.contractForDisplay.RCOMonthlyExpense=this.form.value.contractValues.RCOMonthlyExpense,this.contractForDisplay.RCOExpenseDesc=this.form.value.contractValues.RCOExpenseDesc,this.contractForDisplay.RCOOtherValue=this.form.value.contractValues.RCOOtherValue,this.contractForDisplay.RCOMonthlyElectricValue=this.form.value.contractValues.RCOMonthlyElectricValue,this.contractForDisplay.RCOElectricCounterReading=this.form.value.contractValues.RCOElectricCounterReading,this.contractForDisplay.RCOMonthlyWaterValue=this.form.value.contractValues.RCOMonthlyWaterValue,this.contractForDisplay.RCOWaterCounterReading=this.form.value.contractValues.RCOWaterCounterReading,this.contractForDisplay.RCOMonthlyGasValue=this.form.value.contractValues.RCOMonthlyGasValue,this.contractForDisplay.RCOGasCounterReading=this.form.value.contractValues.RCOGasCounterReading,this.contractForDisplay.RCOActive=this.tenActive,this.contractForDisplay.RowDelete=this.tenDeleted}getContractById(e){const i=[];this.contractService.getOneContract(e).subscribe(a=>{"T"!=this.isRenewContract&&this.contractService.getOneContractDocs(this.curCOMId,this.account.periorty,e).subscribe(l=>{for(var u of l)i.push({link:u.RCDPic,preview:u.RCDPic})}),this.fillForm(a,i),this.contractForDisplay=a,"T"==this.isRenewContract&&(this.contractForDisplay.id=null)})}fillForm(e,i){this.is_active="T"==e.RCOActive,null!=e.branch_KeyField&&this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.branch_KeyField),null!=e.build_KeyField&&this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,e.build_KeyField,""),null!=e.owner_KeyField&&this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,e.owner_KeyField),null!=e.customer_KeyField&&this.getRepresentativePerCustomer(this.curCOMId,this.account.periorty,e.customer_KeyField),null!=e.RCODate&&(this.s_rcoDate="T"==this.isRenewContract?new Date:e.RCODate),this.is_delete=1==e.RowDelete,this.form.patchValue("T"!=this.isRenewContract?{id:e.id,Related_RCOKeyField:e.Related_RCOKeyField,RCOCode:e.RCOCode,RCOSubCode:e.RCOSubCode,RCOEjarCode:e.RCOEjarCode,contractDate:e.RCODate,contractStartDate:e.RCOStartDate,contractEndDate:e.RCOEndDate,RCOContractStatus:e.RCOContractStatus,RCOAlarmStartDate:e.RCOAlarmStartDate,RCOAlarmCounter:e.RCOAlarmCounter,RCONoOfDaysForAlarm:e.RCONoOfDaysForAlarm,RCONoOfDaysForEjarAlarm:e.RCONoOfDaysForEjarAlarm,contractUnit:{branch_KeyField:e.branch_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField},contractPerson:{owner_KeyField:e.owner_KeyField,owner_representative_KeyField:e.owner_representative_KeyField,customer_KeyField:e.customer_KeyField,customer_representative_KeyField:e.customer_representative_KeyField},contractValues:{RCOContractValue:e.RCOContractValue,RCOPayEveryMonthesNo:e.RCOPayEveryMonthesNo,RCOMonthValue:e.RCOMonthValue,RCOInsuranceValue:e.RCOInsuranceValue,RCOSeekingValue:e.RCOSeekingValue,RCOMonthlyExpense:e.RCOMonthlyExpense,RCOExpenseDesc:e.RCOExpenseDesc,RCOOtherValue:e.RCOOtherValue,RCOMonthlyElectricValue:e.RCOMonthlyElectricValue,RCOElectricCounterReading:e.RCOElectricCounterReading,RCOMonthlyWaterValue:e.RCOMonthlyWaterValue,RCOWaterCounterReading:e.RCOWaterCounterReading,RCOMonthlyGasValue:e.RCOMonthlyGasValue,RCOGasCounterReading:e.RCOGasCounterReading},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}}:{Related_RCOKeyField:e.id,RCOCode:e.RCOCode,RCOSubCode:+e.RCOSubCode+1,RCOEjarCode:e.RCOEjarCode,contractDate:new Date,contractStartDate:this.addDays(e.RCOEndDate,1),RCOContractStatus:e.RCOContractStatus,RCOAlarmCounter:0,RCONoOfDaysForAlarm:e.RCONoOfDaysForAlarm,RCONoOfDaysForEjarAlarm:e.RCONoOfDaysForEjarAlarm,contractUnit:{branch_KeyField:e.branch_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField},contractPerson:{owner_KeyField:e.owner_KeyField,owner_representative_KeyField:e.owner_representative_KeyField,customer_KeyField:e.customer_KeyField,customer_representative_KeyField:e.customer_representative_KeyField},contractValues:{RCOContractValue:e.RCOContractValue,RCOPayEveryMonthesNo:e.RCOPayEveryMonthesNo,RCOMonthValue:e.RCOMonthValue,RCOInsuranceValue:e.RCOInsuranceValue,RCOSeekingValue:e.RCOSeekingValue,RCOMonthlyExpense:e.RCOMonthlyExpense,RCOExpenseDesc:e.RCOExpenseDesc,RCOOtherValue:e.RCOOtherValue,RCOMonthlyElectricValue:e.RCOMonthlyElectricValue,RCOElectricCounterReading:e.RCOElectricCounterReading,RCOMonthlyWaterValue:e.RCOMonthlyWaterValue,RCOWaterCounterReading:e.RCOWaterCounterReading,RCOMonthlyGasValue:e.RCOMonthlyGasValue,RCOGasCounterReading:e.RCOGasCounterReading},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}})}handleInstallment(e){var i=this;return(0,Ne.Z)(function*(){let a=12/e.RCOPayEveryMonthesNo,l=e.RCOPayEveryMonthesNo,u=e.RCOStartDate,b=e.RCOMonthValue;for(let P=0;P<a;P++){if(0==P)var Z=new Date(u);else{const et=new Date(u);Z=i.addMonths(et,P*l)}var M=new Date(new _.uU("en-GB").transform(Z,"yyyy/MM/dd"));let Y={contract_KeyField:e.id,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,INSCode:P+1,INSContractTyps:"I",INSStatus:"N",INSValue:b,INSDueDate:M};yield i.insertInstallment(Y)}})()}insertInstallment(e){this.contractService.addInstallments(e).subscribe(i=>{})}saveUpdate(e){this.mapFormvalue_to_ContractClass(),e?(console.log("==========Edit Contract============"),this.contractService.editContract(this.contractForDisplay).subscribe(i=>{let a={contract_KeyField:i.id,TSTArrange:1,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOContractValue,TSTDate:i.RCOStartDate,TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u0627\u0642\u062f \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.ID};this.contractService.deleteStatementForSubjectID(this.curCOMId,this.account.periorty,"RCONTRACT",i.id).subscribe(l=>{this.contractService.addStatement(a).subscribe(u=>{})}),null!=this.DocImageToUpload&&this.contractService.addContractDocs(this.contractForDisplay.id,this.DocImageToUpload).subscribe(l=>{}),this.contractService.updateCustomerUnitFromContract(this.contractForDisplay.customer_KeyField,this.contractForDisplay.build_KeyField,this.contractForDisplay.unit_KeyField,this.contractForDisplay.id).subscribe(l=>{}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(console.log("=====AddContract======"),this.contractService.addContract(this.contractForDisplay).subscribe(i=>{this.contractService.addStatement({contract_KeyField:i.id,TSTArrange:1,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOContractValue,TSTDate:i.RCOStartDate,TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u0627\u0642\u062f \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id}).subscribe(u=>{}),null!=this.DocImageToUpload&&this.contractService.addContractDocs(i.id,this.DocImageToUpload).subscribe(u=>{}),this.contractService.updateCustomerUnitFromContract(i.customer_KeyField,i.build_KeyField,i.unit_KeyField,i.id).subscribe(u=>{}),this.unitsService.editOneUnit({id:i.unit_KeyField,customer_KeyField:i.customer_KeyField,UNTHousingStatus:"R"}).subscribe(u=>{}),"T"==this.isRenewContract&&this.contractService.editOneContract({id:this.id,RCOContractStatus:"R"}).subscribe(b=>{}),this.handleInstallment(i),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-add/"+i.id+"/"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])}))}close(){}addDays(e,i){var a=new Date(e);return a.setDate(a.getDate()+i),a}addMonths(e,i){var a=new Date(e);return a.setMonth(a.getMonth()+i),a}addMonths2(e,i){var a=e.getDate();return e.setMonth(e.getMonth()+ +i),e.getDate()!=a&&e.setDate(0),e}compareFunction(e,i){return e.username==i.username&&e.code==i.code}getOwnershipDocType(e,i){this.codesService.getSubForParent(e,i,this.docType_const).subscribe(a=>{this.DocTypes=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0646\u0648\u0627\u0639 \u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0644\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onChangeContractValue(e){let a=this.form.value.contractValues.RCOPayEveryMonthesNo;0==a&&(a=1),this.form.patchValue({contractValues:{RCOMonthValue:e.target.value/(12/a)}})}onChangePayEvery(e){let a=e.target.value;0==a&&(a=1),this.form.patchValue({contractValues:{RCOMonthValue:this.form.value.contractValues.RCOContractValue/(12/a)}})}onChangeDays(e){if(new _.uU("en-GB").transform(this.form.value.contractEndDate,"dd/MM/yyyy"),null!=this.form.value.contractEndDate){let a=this.form.value.contractEndDate,l=e.target.value;this.paramValueForCode1=l,this.calcAlarmStartDate(a,l)}}onChangeEndDate(e){let i=e.value;console.log("----event.value:: "+e.value),console.log("----event:: "+e),this.calcAlarmStartDate(i,this.paramValueForCode1),this.form.get("contractEndDate").patchValue(e.value)}subtractDays(e,i){var a=new Date(e);return a.setDate(a.getDate()-i),a}calcAlarmStartDate(e,i){var a=this.subtractDays(e,i);this.calcDate=new _.uU("en-GB").transform(a,"yyyy-MM-dd"),this.form.patchValue({RCONoOfDaysForAlarm:this.paramValueForCode1,RCONoOfDaysForEjarAlarm:this.paramValueForCode2}),this.form.get("RCOAlarmStartDate").patchValue(this.calcDate)}searchByCode(e){console.log("---Search event:: "+e),this.tenantsService.getCustomerPerCode(this.curCOMId,this.account.periorty,+e).subscribe(i=>{i.length>0?(console.log("---id:: "+i[0].id),this.form.patchValue({contractPerson:{customer_KeyField:i[0].id}}),this.readCustumer(i[0].id)):(console.log("---Not---"),this.form.patchValue({contractPerson:{customer_KeyField:null}}))},i=>{console.log("----not found tenant----")})}getParamValue(e,i,a){this.settingService.getValueForCode(e,i,a).subscribe(l=>{this.parameters=l,1==a&&(this.paramValueForCode1=l[0].APAValue),2==a&&(this.paramValueForCode2=l[0].APAValue),3==a&&(this.paramValueForCode3=l[0].APAValue),a==this.codeForDefaultOwner&&(this.defaultOwner=l[0].APAValue,this.form.patchValue({contractPerson:{owner_KeyField:+this.defaultOwner}}),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.defaultOwner)),a==this.typeOfContractSerial&&(this.typeOfContSerialValue=l[0].APAValue,"OWNER"!=this.typeOfContSerialValue.toUpperCase()?this.getMaxContractCode(this.curCOMId,this.account.periorty):this.getMaxContractCodePerOwner(this.curCOMId,this.account.periorty,this.defaultOwner??0))},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxContractCode(e,i){this.contractService.getMaxContractCode(e,i).subscribe(a=>{this.maxContractCode=a.max,this.id||this.form.patchValue({RCOCode:this.maxContractCode})})}getMaxContractCodePerOwner(e,i,a){this.contractService.getMaxContractCodeForOwner(e,i,a).subscribe(l=>{this.maxContractCode=l.max,this.id||this.form.patchValue({RCOCode:this.maxContractCode})})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(a=>{this.Countries=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.value)}getBuildingPerBranch(e,i,a){this.unitsService.getBuildingsPerBranch(e,i,a).subscribe(l=>{this.AllBuilding=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(e){this.unitsService.getOneBuilding(e.value).subscribe(i=>{this.curOwnerId=i.owner_KeyField,console.log("====Cur Owner:: "+this.curOwnerId+"  "+i.owner_FullName),this.form.patchValue({contractPerson:{owner_KeyField:this.curOwnerId}}),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.curOwnerId)},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,e.value,"E")}getUnitsPerBuilding(e,i,a,l){this.unitsService.getAllUnitsPerBuilding(e,i,a,l).subscribe(u=>{this.AllUnitsForBuilding=u},u=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0644\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnit(e){e.value&&this.unitsService.getOneUnit(e.value).subscribe(i=>{this.form.patchValue({contractValues:{RCOContractValue:i.UNTContractValue,RCOPayEveryMonthesNo:i.UNTPayInstallmentEveryMonths,RCOMonthValue:i.UNTContractValue/(12/i.UNTPayInstallmentEveryMonths),RCOInsuranceValue:i.UNTInsuranceValue,RCOSeekingValue:i.UNTSeekingValue,RCOMonthlyExpense:i.UNTMonthlyExpense,RCOExpenseDesc:i.UNTExpenseDesc,RCOOtherValue:i.UNTOtherValue,RCOMonthlyElectricValue:i.UNTMonthlyElectricityFee,RCOElectricCounterReading:i.UNTLastElectricityReading,RCOMonthlyWaterValue:i.UNTMonthlyWaterFee,RCOWaterCounterReading:i.UNTLastWaterReading,RCOMonthlyGasValue:i.UNTMonthlyGasFee,RCOGasCounterReading:i.UNTLastGasReading}})},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnitById(e){e&&this.unitsService.getOneUnit(e).subscribe(i=>{this.form.patchValue({contractValues:{RCOContractValue:i.UNTContractValue,RCOPayEveryMonthesNo:i.UNTPayInstallmentEveryMonths,RCOMonthValue:i.UNTContractValue/(12/i.UNTPayInstallmentEveryMonths),RCOInsuranceValue:i.UNTInsuranceValue,RCOSeekingValue:i.UNTSeekingValue,RCOMonthlyExpense:i.UNTMonthlyExpense,RCOExpenseDesc:i.UNTExpenseDesc,RCOOtherValue:i.UNTOtherValue,RCOMonthlyElectricValue:i.UNTMonthlyElectricityFee,RCOElectricCounterReading:i.UNTLastElectricityReading,RCOMonthlyWaterValue:i.UNTMonthlyWaterFee,RCOWaterCounterReading:i.UNTLastWaterReading,RCOMonthlyGasValue:i.UNTMonthlyGasFee,RCOGasCounterReading:i.UNTLastGasReading}})},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getRepresentativePerOwner(e,i,a){this.contractService.getOwnersPerParent(e,i,a).subscribe(l=>{this.AllRepresentativeForOwner=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0645\u062b\u0644 \u0627\u0644\u0645\u0627\u0644\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readOwner(e){console.log("====Selected readOwner:: "+e.value),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,e.value??0),"OWNER"!=this.typeOfContSerialValue.toUpperCase()||this.getMaxContractCodePerOwner(this.curCOMId,this.account.periorty,e.value??0)}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(a=>{this.AllBranches=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(e,i,a,l){console.log("----is Emp"),this.atlasService.getBranchPerEmp(e,i,a).subscribe(u=>{this.AllBranches=u,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+l),this.atlasService.getOneBranch(l).subscribe(b=>{this.AllBranches=b},b=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},u=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllOwnerss(e,i){this.contractService.getAllOwners(e,i).subscribe(a=>{this.AllOwners=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0644\u0627\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readCustumer(e){console.log("====Selected readCustumer:: "+e),this.tenantsService.getOneCustomer(e).subscribe(i=>{console.log("====Selected branch:: "+i.current_branch),console.log("====Selected building:: "+i.current_building),console.log("====Selected unit:: "+i.current_unit),i.current_unit&&(this.form.patchValue({contractPerson:{customer_code:i.CUSCode},contractUnit:{branch_KeyField:i.current_branch,build_KeyField:i.current_building,unit_KeyField:i.current_unit}}),this.getBuildingPerBranch(this.curCOMId,this.account.periorty,i.current_branch),this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,i.current_building,"E"),this.readUnitById(i.current_unit))},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getRepresentativePerCustomer(this.curCOMId,this.account.periorty,e)}getRepresentativePerCustomer(e,i,a){this.tenantsService.getCustomersPerParent(e,i,a).subscribe(l=>{this.AllRepresentativeForCustomer=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0645\u062b\u0644 \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getTenants(){this.AllTenants=null,this.tenantsService.getCustomersConfirmed(this.curCOMId,this.account.periorty).subscribe(e=>this.AllTenants=e)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e})}}gt.\u0275fac=function(e){return new(e||gt)(t.Y36(V.gz),t.Y36(ce.d),t.Y36(J.X),t.Y36(g.W),t.Y36(m.QS),t.Y36(p.C),t.Y36(V.F0),t.Y36(j.U),t.Y36(w.sK),t.Y36(D.Z),t.Y36(dt.g),t.Y36(E.v),t.Y36(N.ux))},gt.\u0275cmp=t.Xpm({type:gt,selectors:[["app-contract-dialog"]],decls:311,vars:186,consts:[["mat-dialog-title","",4,"ngIf"],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","27.0",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","RCOCode"],["fxFlex","100","fxFlex.gt-sm","22.8",1,"px-1"],["matInput","","formControlName","RCOSubCode"],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["matInput","","formControlName","contractDate",3,"matDatepicker"],["matSuffix","",3,"for"],["contractDate",""],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","contractStartDate",3,"matDatepicker"],["contractStartDate",""],["matInput","","formControlName","contractEndDate",3,"matDatepicker","dateChange"],["contractEndDate",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","RCOContractStatus","id","contStatusOpSel",3,"placeholder"],[3,"value"],["matInput","","formControlName","RCOEjarCode"],["matInput","","type","date","formControlName","RCOAlarmStartDate",1,"form-control"],["matInput","","formControlName","RCONoOfDaysForAlarm","required","",3,"change"],["matInput","","formControlName","RCONoOfDaysForEjarAlarm","required",""],["matInput","","formControlName","RCOAlarmCounter"],["formGroupName","contractPerson",3,"label"],["fxFlex","100","fxFlex.gt-sm","59.8",1,"px-1"],["formControlName","owner_KeyField","id","oneOwnerOpSel",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","39.8",1,"px-1"],["formControlName","owner_representative_KeyField","id","oneOwnerRepresOpSel",3,"placeholder"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["matInput","","formControlName","customer_code",3,"keyup.enter"],["tenCode",""],["appearance","outline","formControlName","customer_KeyField","id","oneCustomOpSel",1,"w-100",3,"placeholder","change"],["fxFlex","100","fxFlex.gt-sm","29.8",1,"px-1"],["formControlName","customer_representative_KeyField","id","CustomRepsOpSel",3,"placeholder"],["formGroupName","contractUnit",3,"label"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],["formControlName","build_KeyField","id","buildOneOpSel",3,"placeholder","selectionChange"],["formControlName","unit_KeyField","id","unitOneOpSel",3,"placeholder","selectionChange"],["formGroupName","contractValues",3,"label"],["matInput","","formControlName","RCOContractValue","required","",3,"change"],["matInput","","formControlName","RCOPayEveryMonthesNo","required","",3,"change"],["matInput","","formControlName","RCOMonthValue","required",""],["fxFlex","100","fxFlex.gt-sm","24.9",1,"px-1"],["matInput","","formControlName","RCOInsuranceValue"],["matInput","","formControlName","RCOSeekingValue"],["matInput","","formControlName","RCOMonthlyExpense"],["matInput","","formControlName","RCOOtherValue"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","RCOExpenseDesc"],["matInput","","formControlName","RCOMonthlyElectricValue"],["matInput","","formControlName","RCOElectricCounterReading"],["matInput","","formControlName","RCOMonthlyWaterValue"],["matInput","","formControlName","RCOWaterCounterReading"],["matInput","","formControlName","RCOMonthlyGasValue"],["matInput","","formControlName","RCOGasCounterReading"],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-dialog-title",""],[4,"ngIf"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e){const a=t.EpF();t.YNc(0,Ue,3,3,"h1",0),t.YNc(1,Se,5,5,"h1",0),t.TgZ(2,"form",1)(3,"mat-tab-group",2)(4,"mat-tab",3),t.ALo(5,"translate"),t.TgZ(6,"div",4)(7,"div",5),t._UZ(8,"mat-label"),t.TgZ(9,"div",6)(10,"div",7)(11,"mat-form-field",8)(12,"mat-label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"input",9),t.qZA()(),t.TgZ(16,"div",10)(17,"mat-form-field",8)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",11),t.qZA()(),t.TgZ(22,"div",12)(23,"mat-form-field",8)(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"input",13)(28,"mat-datepicker-toggle",14)(29,"mat-datepicker",null,15),t.qZA()()()(),t.TgZ(31,"div",6)(32,"div",16)(33,"mat-form-field",8)(34,"mat-label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",17)(38,"mat-datepicker-toggle",14)(39,"mat-datepicker",null,18),t.qZA()(),t.TgZ(41,"div",16)(42,"mat-form-field",8)(43,"mat-label"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"input",19),t.NdJ("dateChange",function(u){return i.onChangeEndDate(u)}),t.qZA(),t._UZ(47,"mat-datepicker-toggle",14)(48,"mat-datepicker",null,20),t.qZA()()(),t.TgZ(50,"div",6)(51,"div",21)(52,"mat-form-field",8)(53,"mat-label"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"mat-select",22),t.ALo(57,"translate"),t.TgZ(58,"mat-option",23),t._uU(59,"-"),t.qZA(),t.TgZ(60,"mat-option",23),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"mat-option",23),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"mat-option",23),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"mat-option",23),t._uU(70),t.ALo(71,"translate"),t.qZA()()()(),t.TgZ(72,"div",21)(73,"mat-form-field",8)(74,"mat-label"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t._UZ(77,"input",24),t.qZA()(),t.TgZ(78,"div",21)(79,"mat-form-field",8)(80,"mat-label"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t._UZ(83,"input",25),t.qZA()()(),t.TgZ(84,"div",6)(85,"div",21)(86,"mat-form-field",8)(87,"mat-label"),t._uU(88),t.ALo(89,"translate"),t.qZA(),t.TgZ(90,"input",26),t.NdJ("change",function(u){return i.onChangeDays(u)}),t.qZA()()(),t.TgZ(91,"div",21)(92,"mat-form-field",8)(93,"mat-label"),t._uU(94),t.ALo(95,"translate"),t.qZA(),t._UZ(96,"input",27),t.qZA()(),t.TgZ(97,"div",21)(98,"mat-form-field",8)(99,"mat-label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t._UZ(102,"input",28),t.qZA()()()()(),t.TgZ(103,"mat-tab",29),t.ALo(104,"translate"),t.TgZ(105,"div",4)(106,"div",5),t._UZ(107,"mat-label"),t.TgZ(108,"div",6)(109,"div",30)(110,"mat-form-field",8)(111,"mat-label"),t._uU(112),t.ALo(113,"translate"),t.qZA(),t.TgZ(114,"mat-select",31),t.NdJ("selectionChange",function(u){return i.readOwner(u)}),t.ALo(115,"translate"),t.TgZ(116,"mat-option",23),t._uU(117,"-"),t.qZA(),t.YNc(118,Fe,2,2,"mat-option",32),t.qZA()()(),t.TgZ(119,"div",33)(120,"mat-form-field",8)(121,"mat-label"),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"mat-select",34),t.ALo(125,"translate"),t.TgZ(126,"mat-option",23),t._uU(127,"-"),t.qZA(),t.YNc(128,Me,2,2,"mat-option",32),t.qZA()()()(),t.TgZ(129,"div",35)(130,"div",36)(131,"mat-form-field",8)(132,"mat-label"),t._uU(133),t.ALo(134,"translate"),t.qZA(),t.TgZ(135,"input",37,38),t.NdJ("keyup.enter",function(){t.CHM(a);const u=t.MAs(136);return t.KtG(i.searchByCode(u.value))}),t.qZA()()(),t.TgZ(137,"div",16)(138,"label"),t._uU(139),t.ALo(140,"translate"),t.qZA(),t.TgZ(141,"ng-select",39),t.NdJ("change",function(u){return i.readCustumer(u)}),t.ALo(142,"translate"),t.YNc(143,Ee,2,2,"ng-option",32),t.qZA()(),t.TgZ(144,"div",40)(145,"mat-form-field",8)(146,"mat-label"),t._uU(147),t.ALo(148,"translate"),t.qZA(),t.TgZ(149,"mat-select",41),t.ALo(150,"translate"),t.TgZ(151,"mat-option",23),t._uU(152,"-"),t.qZA(),t.YNc(153,qe,2,2,"mat-option",32),t.qZA()()()()()()(),t.TgZ(154,"mat-tab",42),t.ALo(155,"translate"),t.TgZ(156,"div",4)(157,"div",5),t._UZ(158,"mat-label"),t.TgZ(159,"div",6)(160,"div",12)(161,"mat-form-field",8)(162,"mat-label"),t._uU(163),t.ALo(164,"translate"),t.qZA(),t.TgZ(165,"mat-select",43),t.NdJ("selectionChange",function(u){return i.getBuildings(u)}),t.ALo(166,"translate"),t.TgZ(167,"mat-option",23),t._uU(168,"-"),t.qZA(),t.YNc(169,Pe,2,2,"mat-option",32),t.qZA()()()(),t.TgZ(170,"div",6)(171,"div",16)(172,"mat-form-field",8)(173,"mat-label"),t._uU(174),t.ALo(175,"translate"),t.qZA(),t.TgZ(176,"mat-select",44),t.NdJ("selectionChange",function(u){return i.readBuilding(u)}),t.ALo(177,"translate"),t.TgZ(178,"mat-option",23),t._uU(179,"-"),t.qZA(),t.YNc(180,Re,2,2,"mat-option",32),t.qZA()()(),t.TgZ(181,"div",16)(182,"mat-form-field",8)(183,"mat-label"),t._uU(184),t.ALo(185,"translate"),t.qZA(),t.TgZ(186,"mat-select",45),t.NdJ("selectionChange",function(u){return i.readUnit(u)}),t.ALo(187,"translate"),t.TgZ(188,"mat-option",23),t._uU(189,"-"),t.qZA(),t.YNc(190,Be,2,2,"mat-option",32),t.qZA()()()()()()(),t.TgZ(191,"mat-tab",46),t.ALo(192,"translate"),t.TgZ(193,"div",4)(194,"div",5),t._UZ(195,"mat-label"),t.TgZ(196,"div",6)(197,"div",21)(198,"mat-form-field",8)(199,"mat-label"),t._uU(200),t.ALo(201,"translate"),t.qZA(),t.TgZ(202,"input",47),t.NdJ("change",function(u){return i.onChangeContractValue(u)}),t.qZA()()(),t.TgZ(203,"div",21)(204,"mat-form-field",8)(205,"mat-label"),t._uU(206),t.ALo(207,"translate"),t.qZA(),t.TgZ(208,"input",48),t.NdJ("change",function(u){return i.onChangePayEvery(u)}),t.qZA()()(),t.TgZ(209,"div",21)(210,"mat-form-field",8)(211,"mat-label"),t._uU(212),t.ALo(213,"translate"),t.qZA(),t._UZ(214,"input",49),t.qZA()()()(),t.TgZ(215,"div",6)(216,"div",50)(217,"mat-form-field",8)(218,"mat-label"),t._uU(219),t.ALo(220,"translate"),t.qZA(),t._UZ(221,"input",51),t.qZA()(),t.TgZ(222,"div",50)(223,"mat-form-field",8)(224,"mat-label"),t._uU(225),t.ALo(226,"translate"),t.qZA(),t._UZ(227,"input",52),t.qZA()(),t.TgZ(228,"div",50)(229,"mat-form-field",8)(230,"mat-label"),t._uU(231),t.ALo(232,"translate"),t.qZA(),t._UZ(233,"input",53),t.qZA()(),t.TgZ(234,"div",50)(235,"mat-form-field",8)(236,"mat-label"),t._uU(237),t.ALo(238,"translate"),t.qZA(),t._UZ(239,"input",54),t.qZA()()(),t.TgZ(240,"div",6)(241,"div",55)(242,"mat-form-field",8)(243,"mat-label"),t._uU(244),t.ALo(245,"translate"),t.qZA(),t._UZ(246,"input",56),t.qZA()()(),t.TgZ(247,"div",6)(248,"div",16)(249,"mat-form-field",8)(250,"mat-label"),t._uU(251),t.ALo(252,"translate"),t.qZA(),t._UZ(253,"input",57),t.qZA()(),t.TgZ(254,"div",16)(255,"mat-form-field",8)(256,"mat-label"),t._uU(257),t.ALo(258,"translate"),t.qZA(),t._UZ(259,"input",58),t.qZA()()(),t.TgZ(260,"div",6)(261,"div",16)(262,"mat-form-field",8)(263,"mat-label"),t._uU(264),t.ALo(265,"translate"),t.qZA(),t._UZ(266,"input",59),t.qZA()(),t.TgZ(267,"div",16)(268,"mat-form-field",8)(269,"mat-label"),t._uU(270),t.ALo(271,"translate"),t.qZA(),t._UZ(272,"input",60),t.qZA()()(),t.TgZ(273,"div",6)(274,"div",16)(275,"mat-form-field",8)(276,"mat-label"),t._uU(277),t.ALo(278,"translate"),t.qZA(),t._UZ(279,"input",61),t.qZA()(),t.TgZ(280,"div",16)(281,"mat-form-field",8)(282,"mat-label"),t._uU(283),t.ALo(284,"translate"),t.qZA(),t._UZ(285,"input",62),t.qZA()()()()(),t.TgZ(286,"mat-tab",63),t.ALo(287,"translate"),t.TgZ(288,"div",4)(289,"mat-checkbox",64),t._uU(290),t.ALo(291,"translate"),t.qZA(),t.TgZ(292,"mat-checkbox",65),t._uU(293),t.ALo(294,"translate"),t.qZA()()(),t.TgZ(295,"mat-tab",66),t.ALo(296,"translate"),t.TgZ(297,"div",67)(298,"div",68),t._UZ(299,"img",69),t.TgZ(300,"input",70,71),t.NdJ("change",function(u){return i.onFileChange(u.target.files)}),t.qZA(),t.TgZ(302,"button",72),t.NdJ("click",function(){t.CHM(a);const u=t.MAs(301);return t.KtG(u.click())}),t._uU(303),t.ALo(304,"translate"),t.qZA()(),t._UZ(305,"mat-divider")(306,"input-file",73),t.qZA()()()(),t._UZ(307,"br"),t.TgZ(308,"div",74)(309,"div",6),t.YNc(310,Ve,3,4,"button",75),t.qZA()()}if(2&e){const a=t.MAs(30),l=t.MAs(40),u=t.MAs(49);t.Q6J("ngIf","T"==i.isRenewContract),t.xp6(1),t.Q6J("ngIf","T"!=i.isRenewContract),t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(5,78,"HTML.TAB_BASIC")),t.xp6(9),t.hij(" ",t.lcZ(14,80,"HTML.CODE"),""),t.xp6(6),t.hij(" ",t.lcZ(20,82,"HTML.SUBCODE"),""),t.xp6(6),t.Oqu(t.lcZ(26,84,"HTML.ContractDate")),t.xp6(2),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(7),t.Oqu(t.lcZ(36,86,"HTML.ContractStartDate")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(6),t.Oqu(t.lcZ(45,88,"HTML.ContractEndDate")),t.xp6(2),t.Q6J("matDatepicker",u),t.xp6(1),t.Q6J("for",u),t.xp6(7),t.Oqu(t.lcZ(55,90,"HTML.ContractStatus")),t.xp6(2),t.s9C("placeholder",t.lcZ(57,92,"HTML.ContractStatus")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(62,94,"OPTIONS.NEW")),t.xp6(2),t.Q6J("value","R"),t.xp6(1),t.Oqu(t.lcZ(65,96,"OPTIONS.ReNew")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(68,98,"OPTIONS.Canceld")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(71,100,"OPTIONS.Finished")),t.xp6(5),t.Oqu(t.lcZ(76,102,"HTML.ContractEjarCode")),t.xp6(6),t.Oqu(t.lcZ(82,104,"HTML.ContractAlarmStartDate")),t.xp6(7),t.hij(" ",t.lcZ(89,106,"HTML.ContractNoOfDaysForAlarm"),""),t.xp6(6),t.hij(" ",t.lcZ(95,108,"HTML.ContractNoOfDaysForEjarAlarm"),""),t.xp6(6),t.hij(" ",t.lcZ(101,110,"HTML.ContractAlarmCounter"),""),t.xp6(3),t.s9C("label",t.lcZ(104,112,"HTML.TAB_ContractPersons")),t.xp6(9),t.hij(" ",t.lcZ(113,114,"HTML.OWNER"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(115,116,"HTML.OWNER")),t.xp6(4),t.Q6J("ngForOf",i.AllOwners),t.xp6(4),t.hij(" ",t.lcZ(123,118,"HTML.OwnerRepresentative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(125,120,"HTML.OwnerRepresentative")),t.xp6(4),t.Q6J("ngForOf",i.AllRepresentativeForOwner),t.xp6(5),t.Oqu(t.lcZ(134,122,"HTML.CODE_TENANT")),t.xp6(6),t.hij(" ",t.lcZ(140,124,"HTML.TENANT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(142,126,"HTML.TENANT")),t.xp6(2),t.Q6J("ngForOf",i.AllTenants),t.xp6(4),t.hij(" ",t.lcZ(148,128,"HTML.TenantRepresentative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(150,130,"HTML.TenantRepresentative")),t.xp6(4),t.Q6J("ngForOf",i.AllRepresentativeForCustomer),t.xp6(1),t.s9C("label",t.lcZ(155,132,"HTML.TAB_ContractUnit")),t.xp6(9),t.hij(" ",t.lcZ(164,134,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(166,136,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(5),t.hij(" ",t.lcZ(175,138,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(177,140,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuilding),t.xp6(4),t.hij(" ",t.lcZ(185,142,"HTML.UNIT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(187,144,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnitsForBuilding),t.xp6(1),t.s9C("label",t.lcZ(192,146,"HTML.TAB_ContractValues")),t.xp6(9),t.Oqu(t.lcZ(201,148,"HTML.ContractValue")),t.xp6(6),t.Oqu(t.lcZ(207,150,"HTML.PayEveryMonthesNo")),t.xp6(6),t.Oqu(t.lcZ(213,152,"HTML.InstallmentValue")),t.xp6(7),t.Oqu(t.lcZ(220,154,"HTML.InsuranceValue")),t.xp6(6),t.Oqu(t.lcZ(226,156,"HTML.SeekingValue")),t.xp6(6),t.Oqu(t.lcZ(232,158,"HTML.MonthlyExpense")),t.xp6(6),t.Oqu(t.lcZ(238,160,"HTML.OtherValue")),t.xp6(7),t.Oqu(t.lcZ(245,162,"HTML.ExpenseDesc")),t.xp6(7),t.Oqu(t.lcZ(252,164,"HTML.MonthlyElectricValue")),t.xp6(6),t.Oqu(t.lcZ(258,166,"HTML.ElectricCounterReading")),t.xp6(7),t.Oqu(t.lcZ(265,168,"HTML.MonthlyWaterValue")),t.xp6(6),t.Oqu(t.lcZ(271,170,"HTML.WaterCounterReading")),t.xp6(7),t.Oqu(t.lcZ(278,172,"HTML.MonthlyGasValue")),t.xp6(6),t.Oqu(t.lcZ(284,174,"HTML.GasCounterReading")),t.xp6(3),t.s9C("label",t.lcZ(287,176,"HTML.TAB_SETTINGS")),t.xp6(4),t.Oqu(t.lcZ(291,178,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(294,180,"HTML.BLOCKED")),t.xp6(2),t.s9C("label",t.lcZ(296,182,"HTML.TAB_DOCS")),t.xp6(4),t.Q6J("src",i.defaultDocImage,t.LSH),t.xp6(4),t.Oqu(t.lcZ(304,184,"HTML.AddPic")),t.xp6(7),t.Q6J("ngIf",i.contractForDisplay.id&&i.can("change_rentcontracts")||!i.contractForDisplay.id&&i.can("add_rentcontracts"))}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,_.sg,_.O5,m.sg,m.u,m.x0,T.xw,T.SQ,T.Wh,T.yH,K.ey,C.lW,oe.oG,W.Mq,W.hl,W.nW,x.ZT,x.uh,x.H8,A.Nt,v.KE,v.hX,v.R9,tt.d,S.gD,At.uX,At.SP,ae.tW,Ut.w9,Ut.jq,w.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}\n"],encapsulation:2});var ue=f(529),He=f(589),We=f(9045),Je=f(7948);class Ye{}var Ge=f(900);function Qe(r,e){if(1&r&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.value),t.xp6(1),t.hij(" ",i.name," ")}}function je(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&r){const i=t.oxw();t.Q6J("disabled",!i.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function $e(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw();return t.KtG(u.remove(l.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&r&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function ze(r,e){if(1&r&&(t.TgZ(0,"div",26)(1,"div",27),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t._uU(4),t.qZA(),t.TgZ(5,"div",27),t._uU(6),t.qZA(),t.TgZ(7,"div",27),t._uU(8),t.qZA(),t.TgZ(9,"div",27),t._uU(10),t.qZA(),t.TgZ(11,"div",27)(12,"div",28),t.YNc(13,$e,4,3,"button",29),t.qZA()()()),2&r){const i=e.$implicit,a=t.oxw();t.xp6(2),t.Oqu(i.CURRelationTypeDisplay),t.xp6(2),t.Oqu(i.CURName),t.xp6(2),t.hij("",i.CURMobile," "),t.xp6(2),t.hij("",i.CURNationalID," "),t.xp6(2),t.hij("",i.CURBirthDate," "),t.xp6(3),t.Q6J("ngIf",a.can("delete_tenantrelative"))}}class Lt{constructor(e,i,a,l,u,b,Z,M,P,Y){this.dialogRef=e,this.dataInjected=i,this.atlasService=a,this._CustomerService=l,this.translateService=u,this.localStore=b,this.appService=Z,this.dialog=M,this.snackBar=P,this.fb=Y,this.passwordHide=!0,this.relatives=[],this.curCOMId=O.N.comid,this.userPerm=[]}ngOnInit(){this.relatives=this.appService.getRelative(),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({customer_KeyField:[null,m.kI.required],CURRelationType:[null,m.kI.required],CURName:[null,m.kI.required],CURMobile:null,CURPic:null,nationalID:null,birthday:null}),console.log(this.dataInjected.custId),this.dataForm.patchValue({customer_KeyField:this.dataInjected.custId}),this.oneRelated=new Ye,this.curPeriority=this.dataInjected.periorty,this.action="Patch",this.getTenantRelated(),this.prepareMsgLanguage()}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getTenantRelated(){this.cusRelated=null,this._CustomerService.getRelatedPerCustomers(this.curCOMId,this.curPeriority,this.dataInjected.custId).subscribe(e=>this.cusRelated=e)}mapFormValue_toTable(){const e=new _.uU("en-GB").transform(this.dataForm.value.birthday,"dd/MM/yyyy");null!=this.dataForm.value.birthday&&(this.oneRelated.CURBirthDate=e),this.oneRelated.customer_KeyField=this.dataInjected.custId,this.oneRelated.CURRelationType=this.dataForm.value.CURRelationType,this.oneRelated.CURName=this.dataForm.value.CURName,this.oneRelated.CURMobile=this.dataForm.value.CURMobile,this.oneRelated.CURNationalID=this.dataForm.value.nationalID}onSave(){this.mapFormValue_toTable(),this._CustomerService.addRelatedForTenant(this.oneRelated).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(e){this.dialog.open(rt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(a=>{a&&this._CustomerService.deleteRelativeForTenant(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}Lt.\u0275fac=function(e){return new(e||Lt)(t.Y36(x.so),t.Y36(x.WI),t.Y36(D.Z),t.Y36(E.v),t.Y36(w.sK),t.Y36(p.C),t.Y36(Ge.z),t.Y36(x.uw),t.Y36(N.ux),t.Y36(m.QS))},Lt.\u0275cmp=t.Xpm({type:Lt,selectors:[["app-cus-related-dialog"]],decls:78,vars:45,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","CURRelationType","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","CURName"],["matInput","","formControlName","CURMobile"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","nationalID"],["matInput","","formControlName","birthday",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],[3,"value"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",6),t.ALo(10,"translate"),t.YNc(11,Qe,2,2,"mat-option",7),t.qZA()()(),t.TgZ(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",8),t.qZA()(),t.TgZ(18,"div",4)(19,"mat-form-field",5)(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"input",9),t.qZA()()(),t.TgZ(24,"div",3)(25,"div",10)(26,"mat-form-field",5)(27,"mat-label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",11),t.qZA()(),t.TgZ(31,"div",10)(32,"mat-form-field",5)(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",12)(37,"mat-datepicker-toggle",13)(38,"mat-datepicker",null,14),t.qZA()()()()(),t.TgZ(40,"div",15)(41,"div",3),t.YNc(42,je,4,4,"button",16),t.TgZ(43,"button",17),t.NdJ("click",function(){return i.close()}),t._uU(44),t.ALo(45,"translate"),t.qZA()()(),t._UZ(46,"mat-divider"),t.TgZ(47,"div",18)(48,"mat-card")(49,"div",19)(50,"h2"),t._uU(51),t.ALo(52,"translate"),t.qZA()(),t._UZ(53,"mat-divider"),t.TgZ(54,"div",20)(55,"div",21)(56,"div",22)(57,"h2"),t._uU(58),t.ALo(59,"translate"),t.qZA()(),t.TgZ(60,"div",22)(61,"h2"),t._uU(62),t.ALo(63,"translate"),t.qZA()(),t.TgZ(64,"div",22)(65,"h2"),t._uU(66),t.ALo(67,"translate"),t.qZA()(),t.TgZ(68,"div",22)(69,"h2"),t._uU(70),t.ALo(71,"translate"),t.qZA()(),t.TgZ(72,"div",22)(73,"h2"),t._uU(74),t.ALo(75,"translate"),t.qZA()(),t._UZ(76,"div",22),t.qZA(),t.YNc(77,ze,14,6,"div",23),t.qZA()()()()),2&e){const a=t.MAs(39);t.Q6J("formGroup",i.dataForm),t.xp6(7),t.hij(" ",t.lcZ(8,19,"HTML.Relative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(10,21,"HTML.Relative")),t.xp6(2),t.Q6J("ngForOf",i.relatives),t.xp6(4),t.Oqu(t.lcZ(16,23,"FIELD.NAME")),t.xp6(6),t.Oqu(t.lcZ(22,25,"HTML.MOBILE")),t.xp6(7),t.Oqu(t.lcZ(29,27,"HTML.IDNUMBER")),t.xp6(6),t.Oqu(t.lcZ(35,29,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(5),t.Q6J("ngIf",i.can("add_tenantrelative")||0==i.curPeriority),t.xp6(2),t.Oqu(t.lcZ(45,31,"BTN.CANCEL")),t.xp6(7),t.Oqu(t.lcZ(52,33,"HTML.Relative")),t.xp6(7),t.hij(" ",t.lcZ(59,35,"HTML.Relative")," "),t.xp6(4),t.hij(" ",t.lcZ(63,37,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(67,39,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(71,41,"HTML.IDNUMBER")," "),t.xp6(4),t.hij(" ",t.lcZ(75,43,"HTML.BIRTH_DATE")," "),t.xp6(3),t.Q6J("ngForOf",i.cusRelated)}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,_.sg,_.O5,m.sg,m.u,T.xw,T.Wh,T.yH,K.ey,C.lW,C.nh,H.a8,W.Mq,W.hl,W.nW,x.xY,x.H8,z.Hw,A.Nt,v.KE,v.hX,v.R9,tt.d,S.gD,pt.gM,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});var de=f(6331),Wt=f(1948);function Xe(r,e){1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function ti(r,e){1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function ei(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Code is required"),t.qZA())}function ii(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Code isn't long enough, minimum of 4 characters"),t.qZA())}function ni(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Password is required"),t.qZA())}function oi(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Password isn't long enough, minimum of 6 characters"),t.qZA())}function ai(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"mat-form-field",57)(1,"mat-label")(2,"mat-icon"),t._uU(3,"vpn_key"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"input",96),t.TgZ(7,"mat-icon",97),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.passwordHide=!l.passwordHide)}),t._uU(8),t.qZA(),t.YNc(9,ni,2,0,"mat-error",1),t.YNc(10,oi,2,0,"mat-error",1),t.qZA()}if(2&r){const i=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,5,"HTML.PASSWORD"),""),t.xp6(2),t.Q6J("type",i.passwordHide?"password":"text"),t.xp6(2),t.Oqu(i.passwordHide?"visibility":"visibility_off"),t.xp6(1),t.Q6J("ngIf",null==i.form.controls.password.errors?null:i.form.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",i.form.controls.password.hasError("minlength"))}}function ri(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"First name is required"),t.qZA())}function si(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Last name is required"),t.qZA())}function li(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Mobile is required"),t.qZA())}function ci(r,e){if(1&r&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function ui(r,e){if(1&r&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function di(r,e){if(1&r&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.UNTUnitNumber," ")}}function mi(r,e){if(1&r&&(t.TgZ(0,"ng-option",40),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName,"")}}function pi(r,e){if(1&r&&(t.TgZ(0,"ng-option",40),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName,"")}}function hi(r,e){if(1&r&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function gi(r,e){if(1&r&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function fi(r,e){if(1&r&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function _i(r,e){if(1&r&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Ci(r,e){1&r&&(t.TgZ(0,"mat-tab",98),t.ALo(1,"translate"),t.TgZ(2,"div",6),t._UZ(3,"mat-label"),t.TgZ(4,"mat-form-field",99)(5,"mat-label"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t._UZ(8,"input",100),t.qZA(),t.TgZ(9,"div",5)(10,"mat-checkbox",101),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"mat-checkbox",102),t._uU(14),t.ALo(15,"translate"),t.qZA()()()()),2&r&&(t.s9C("label",t.lcZ(1,4,"HTML.TAB_SETTINGS")),t.xp6(6),t.Oqu(t.lcZ(7,6,"HTML.TaxNumber")),t.xp6(5),t.Oqu(t.lcZ(12,8,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(15,10,"HTML.BLOCKED")))}function Ti(r,e){1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function bi(r,e){1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function vi(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",103),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.saveUpdate(l.CUS.id))}),t.YNc(1,Ti,3,3,"span",1),t.YNc(2,bi,3,3,"span",1),t.qZA()}if(2&r){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.CUS.id),t.xp6(1),t.Q6J("ngIf",i.CUS.id)}}function xi(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",104),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.customerRelated(l.CUS.id))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&r){const i=t.oxw();t.Q6J("disabled",!i.form.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.Accompany"))}}function Ai(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",104),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.changePassword(l.CUS))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&r){const i=t.oxw();t.Q6J("disabled",!i.form.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.PasswordChange"))}}function yi(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",104),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.confirmData(l.CUS.id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&r){const i=t.oxw();t.Q6J("disabled",!i.form.valid),t.xp6(1),t.Oqu(t.lcZ(2,2,"BTN.SUBMIT"))}}class yt{constructor(e,i,a,l,u,b,Z,M,P,Y,et,Ct,Tt,le,Jn,Yn){this.transferService=e,this.appSettings=i,this.activatedRoute=a,this.codesService=l,this.unitsService=u,this.fb=b,this.localStore=Z,this._CustomerService=M,this.router=P,this.dialog=Y,this.global=et,this.atlasService=Ct,this.settingService=Tt,this.translateService=le,this.contractService=Jn,this.snackBar=Yn,this.curCOMId=O.N.comid,this.account=new at.n,this.country_const=(new F.I).Countries,this.governorate_const=(new F.I).Governorates,this.city_const=(new F.I).City,this.region_const=(new F.I).Regions,this.notificationType_const=(new F.I).NotificationTypes,this.job_const=(new F.I).Jobs,this.workplace_const=(new F.I).WorkPlaces,this.passwordHide=!0,this.tenant=new bt,this.editCode=!0,this.userPerm=[],this.DocImageToUpload=null,this.defaultDocImage=(new U.P).noImage,this.defaultCusImage=(new U.P).noImage,this.CusImageToUpload=null,this.defaultIDImage=(new U.P).noImage,this.IDImageToUpload=null,this.AllBranches=[],this.notificationsObject=new Je.j,this.allowedChar="1234567890",this.lengthOfCode=6,this.Jobs=[],this.WorkPlaces=[],this.Countries=[],this.Governorates=[],this.Cities=[],this.Areas=[],this.AllBuildings=[],this.AllUnits=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.transferService.getMessage.subscribe(e=>{this.editCode="YES"==e.editTenantCode.toUpperCase(),console.log("---2222 this.editCode:: "+this.editCode)}),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.getMaxCodeForCustomers(this.curCOMId,this.account.periorty),this.getCountries(this.curCOMId,this.account.periorty),this.getJobs(this.curCOMId,this.account.periorty),this.getWorkPlaces(this.curCOMId,this.account.periorty),this.getAllBuildings(this.curCOMId,this.account.periorty),this.getNotificationRows(this.curCOMId,this.account.periorty,1),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=+e.id,this.getTenantById(this.id)):this.CUS=new bt;var i=JSON.parse(this.localStore.getItem("account"));console.log("---1111 this.editCode:: "+this.editCode),this.form=this.fb.group({id:null,code:{value:null,disabled:!this.editCode},username:{value:null,disabled:this.id},password:null,firstname:[null,m.kI.required],lastname:[null,m.kI.required],image:null,mobile:null,selftype:"P",CUSEInvoiceType:"G",profile:this.fb.group({birthday:[null,m.kI.required],gender:"M",current_branch:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curbuilding:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curunit:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee}}),work:this.fb.group({company:[null,m.kI.required],position:null,nationalIDType:"F",nationalID:[null,m.kI.required],nationalIDStartDate:null,nationalIDEndDate:null,nationalIDPic:null,WorkPlace_CTTKeyField:null,Job_CTTKeyField:null}),contacts:this.fb.group({email:["",m.kI.compose([m.kI.required,I.Le])],homephone:null,workphone:null,address:null,CUSStreetName:null,CUSBuildingNumber:null,CUSZibCode:null,CUSShortAddress:null,CUSBuildingSubNumber:null,country:null,governorate:null,city:null,area:null}),social:this.fb.group({facebook:null,twitter:null,google:null}),settings:this.fb.group({CUSTaxNumber:null,isActive:null,isDeleted:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0)})}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onFileChange(e){this.DocImageToUpload=e.item(0);var i=new FileReader;i.onload=a=>{this.defaultDocImage=a.target.result},i.readAsDataURL(this.DocImageToUpload)}onFileRemove(e){console.log("====On Remove:: "+e)}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=a=>{this.defaultCusImage=a.target.result},i.readAsDataURL(this.CusImageToUpload)}handelIDImgInput(e){this.IDImageToUpload=e.item(0);var i=new FileReader;i.onload=a=>{this.defaultIDImage=a.target.result,console.log("=====after====="+this.defaultIDImage)},i.readAsDataURL(this.IDImageToUpload)}mapFormvalue_to_CustomerClass(e){this.form.enable(),this.cur_branch=this.form.value.profile.current_branch,this.cur_building=this.form.value.profile.curbuilding,this.cur_unit=this.form.value.profile.curunit,this.form.disable();const i=new _.uU("en-GB").transform(this.form.value.profile.birthday,"dd/MM/yyyy"),a=new _.uU("en-GB").transform(this.form.value.work.nationalIDStartDate,"dd/MM/yyyy"),l=new _.uU("en-GB").transform(this.form.value.work.nationalIDEndDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,null!=this.form.value.profile.birthday&&(this.CUS.CUSBirthDate=i),null!=this.form.value.work.nationalIDStartDate&&(this.CUS.CUSNationalIDStartDate=a),null!=this.form.value.work.nationalIDEndDate&&(this.CUS.CUSNationalIDEndDate=l),this.CUS.CUSCode=+this.form.value.code,this.CUS.CUSFirstName=this.form.value.firstname,this.CUS.CUSLastName=this.form.value.lastname,this.CUS.CUSusername=this.form.value.username,this.CUS.CUSpassword=this.form.value.password,"POST"==e&&(this.CUS.is_create_CustomUser_table="T"),this.CUS.CUSGender=this.form.value.profile.gender,this.CUS.current_branch=this.cur_branch,this.CUS.current_building=this.cur_building,this.CUS.current_unit=this.cur_unit,this.CUS.CUSSelfType=this.form.value.selftype,this.CUS.CUSEInvoiceType=this.form.value.CUSEInvoiceType,this.CUS.CUSPic=this.form.value.image,this.CUS.CUSIDPic=this.form.value.work.nationalIDPic,this.CUS.CUSGuarantor=this.form.value.work.company,this.CUS.CUSJobName=this.form.value.work.position??"",this.CUS.CUSNationalIDType=this.form.value.work.nationalIDType,this.CUS.CUSNationalID=this.form.value.work.nationalID,this.CUS.WorkPlace_CTTKeyField=this.form.value.work.WorkPlace_CTTKeyField,this.CUS.Job_CTTKeyField=this.form.value.work.Job_CTTKeyField,this.CUS.CUSMobile=this.form.value.mobile,this.CUS.CUSEmail=this.form.value.contacts.email,this.CUS.CUSHomePhone=this.form.value.contacts.homephone,this.CUS.CUSWorkPhone=this.form.value.contacts.workphone,this.CUS.CUSAddress=this.form.value.contacts.address??"",this.CUS.CUSStreetName=this.form.value.contacts.CUSStreetName??"",this.CUS.CUSBuildingNumber=this.form.value.contacts.CUSBuildingNumber??"",this.CUS.CUSZibCode=this.form.value.contacts.CUSZibCode??"",this.CUS.CUSShortAddress=this.form.value.contacts.CUSShortAddress??"",this.CUS.CUSBuildingSubNumber=this.form.value.contacts.CUSBuildingSubNumber??"",this.CUS.Country_CTTKeyField=this.form.value.contacts.country,this.CUS.Governorate_CTTKeyField=this.form.value.contacts.governorate,this.CUS.City_CTTKeyField=this.form.value.contacts.city,this.CUS.Area_CTTKeyField=this.form.value.contacts.area,this.CUS.CUSFacebook=this.form.value.social.facebook??"",this.CUS.CUSTwitter=this.form.value.social.twitter??"",this.CUS.CUSGoogle=this.form.value.social.google??"",this.CUS.CUSTaxNumber=this.form.value.settings.CUSTaxNumber??"",this.CUS.CUSActive=this.tenActive,this.CUS.RowDelete=this.tenDeleted}getTenantById(e){const i=[];this._CustomerService.getOneCustomer(e).subscribe(a=>{this._CustomerService.getOneCustomerDocs(this.curCOMId,this.account.periorty,e).subscribe(l=>{for(var u of l)i.push({link:u.CUDPic,preview:u.CUDPic})}),this.fillForm(a,i),this.CUS=a,a.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,a.Country_CTTKeyField),a.Governorate_CTTKeyField&&this.getCityPerGoverno(this.curCOMId,this.account.periorty,a.Governorate_CTTKeyField),a.City_CTTKeyField&&this.getAreaPerCity(this.curCOMId,this.account.periorty,a.City_CTTKeyField)})}fillForm(e,i){this.is_active="T"==e.CUSActive,e.current_building&&this.getAllUnits(this.curCOMId,this.account.periorty,e.current_building),this.defaultCusImage=null!=e.CUSPic?e.CUSPic:(new U.P).noImage,this.defaultIDImage=null!=e.CUSIDPic?e.CUSIDPic:(new U.P).noImage,this.is_delete=1==e.RowDelete,this.form.patchValue({id:e.id,code:e.CUSCode,username:e.CUSusername,password:e.CUSpassword,firstname:e.CUSFirstName,lastname:e.CUSLastName,image:e.CUSPic,selftype:e.CUSSelfType,CUSEInvoiceType:e.CUSEInvoiceType,mobile:e.CUSMobile,profile:{birthday:e.CUSBirthDate,gender:e.CUSGender,current_branch:e.current_branch,curbuilding:e.current_building,curunit:e.current_unit},work:{company:e.CUSGuarantor,position:e.CUSJobName,nationalIDType:e.CUSNationalIDType,nationalID:e.CUSNationalID,nationalIDStartDate:e.CUSNationalIDStartDate,nationalIDEndDate:e.CUSNationalIDEndDate,nationalIDPic:e.CUSIDPic,WorkPlace_CTTKeyField:e.WorkPlace_CTTKeyField,Job_CTTKeyField:e.Job_CTTKeyField},contacts:{email:e.CUSEmail,homephone:e.CUSHomePhone,workphone:e.CUSWorkPhone,address:e.CUSAddress,country:e.Country_CTTKeyField,governorate:e.Governorate_CTTKeyField,city:e.City_CTTKeyField,area:e.Area_CTTKeyField,CUSStreetName:e.CUSStreetName,CUSBuildingNumber:e.CUSBuildingNumber,CUSZibCode:e.CUSZibCode,CUSShortAddress:e.CUSShortAddress,CUSBuildingSubNumber:e.CUSBuildingSubNumber},social:{facebook:e.CUSFacebook,twitter:e.CUSTwitter,google:e.CUSGoogle},settings:{CUSTaxNumber:e.CUSTaxNumber,isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}}),e.current_unit&&this.getUnitFullData(e.current_unit)}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(a=>{this.AllBranches=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(e,i,a,l){console.log("----is Emp"),this.atlasService.getBranchPerEmp(e,i,a).subscribe(u=>{this.AllBranches=u,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+l),this.atlasService.getOneBranch(l).subscribe(b=>{this.AllBranches=b},b=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},u=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getNotificationRows(e,i,a){this.codesService.getSubForParentAndArrange(e,i,this.notificationType_const,a).subscribe(l=>{1==a&&(this.cttNotificationType_TenantData=l[0].id),2==a&&(this.cttNotificationType_EndContract=l[0].id)},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0646\u0648\u0639 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapvaluesToNotificationClass(){this.notificationsObject.notificationType_CTTKeyField=this.cttNotificationType_TenantData,this.notificationsObject.UNOActive="T",this.notificationsObject.UNONotificationFromTenant="T",this.notificationsObject.branch_KeyField=this.cur_branch,this.notificationsObject.UNOTitle="\u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0623\u062c\u0631",this.notificationsObject.build_KeyField=this.cur_building,this.notificationsObject.unit_KeyField=this.cur_unit,this.notificationsObject.customer_KeyField=this.form.value.id,this.notificationsObject.UNOText="\u0628\u0631\u062c\u0627\u0621 \u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631 "+this.form.value.firstname+" "+this.form.value.lastname}readCusCode(e){let a=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({contacts:{email:"E"+a+"@jeddahlake.com"},username:a,password:a})}pad(e,i){let a=e+"";for(;a.length<i;)a="0"+a;return a}createRandomString(e,i){let a="";for(let l=0;l<e;l++)a+=i.charAt(Math.floor(Math.random()*i.length));return a}generateUserName(e,i){return this.pad(e,4)+i}confirmData(e){this._CustomerService.editCustomerConfirm({CUSConfirmed:"T",id:e}).subscribe(a=>{this.snackBar.open("\u062a\u0645 \u0625\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},a=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}customerRelated(e){console.log("=============customerRelated()==============="),this.dialog.open(Lt,{data:{custId:e,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(a=>{})}changePassword(e){this.dialog.open(de.p,{data:{dataRow:e,curUserData:this.curUserData,userPerm:this.userPerm,pk:e.Userid},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(a=>{})}saveUpdate(e){console.log("=============saveUpdate()==============="),e?(this.mapFormvalue_to_CustomerClass("PATCH"),console.log("=============Update data()==============="),this._CustomerService.editCustomer(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.curUserData.is_employee).subscribe(i=>{console.log("res=> "+i),"F"==this.curUserData.is_employee&&(this.mapvaluesToNotificationClass(),this.unitsService.addNotificationForUnits(this.notificationsObject).subscribe(a=>{},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})),null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(this.CUS.id,this.DocImageToUpload).subscribe(a=>{console.log("====yes from update====",a)}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(this.mapFormvalue_to_CustomerClass("POST"),console.log(this.CUS),this._CustomerService.addCustomer(this.CUS,this.CusImageToUpload,this.IDImageToUpload).subscribe(i=>{null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(i.id,this.DocImageToUpload).subscribe(a=>{console.log("====yes from insert====",a)}),this.contractService.addCustomUserFromTenant(i,this.CusImageToUpload).subscribe(a=>{this.contractService.updateCustomerWithUserID(i.id,a.id).subscribe(l=>{},l=>{console.log("ERROR::--\x3e ",l)})}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))}close(){}compareFunction(e,i){return e.username==i.username&&e.code==i.code}getJobs(e,i){this.codesService.getSubForParent(e,i,this.job_const).subscribe(a=>{this.Jobs=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u0638\u0627\u0626\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getWorkPlaces(e,i){this.codesService.getSubForParent(e,i,this.workplace_const).subscribe(a=>{this.WorkPlaces=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0645\u0627\u0643\u0646 \u0627\u0644\u0639\u0645\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxCodeForCustomers(e,i){this.contractService.getMaxCustomerCode(e,i).subscribe(a=>{if(this.maxCustomerCode=a.max,!this.id){let l=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({code:this.maxCustomerCode,username:l,password:l,contacts:{email:"E"+l+"@jeddahlake.com"}})}})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(a=>{this.Countries=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(e){this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,e.value)}getGovernoratePerCountry(e,i,a){this.codesService.getSubForParentAndRelated(e,i,this.governorate_const,a).subscribe(l=>{this.Governorates=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(e){this.getCityPerGoverno(this.curCOMId,this.account.periorty,e.value)}getCityPerGoverno(e,i,a){this.codesService.getSubForParentAndRelated(e,i,this.city_const,a).subscribe(l=>{this.Cities=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(e){this.getAreaPerCity(this.curCOMId,this.account.periorty,e.value)}getAreaPerCity(e,i,a){this.codesService.getSubForParentAndRelated(e,i,this.region_const,a).subscribe(l=>{this.Areas=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllBuildings(e,i){this.unitsService.getAllBuilding(e,i).subscribe(a=>{this.AllBuildings=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuild(e){this.getAllUnits(this.curCOMId,this.account.periorty,e.value)}getAllUnits(e,i,a){this.unitsService.getAllUnitsPerBuilding(e,i,a,"E").subscribe(l=>{this.AllUnits=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitData(e){this.getUnitFullData(e.value)}getUnitFullData(e){this.unitsService.getOneUnit(e).subscribe(i=>{this.electricUnit="null"==i.UNTElectricityNumber?"":i.UNTElectricityNumber,this.waterUnit="null"==i.UNTWaterNumber?"":i.UNTWaterNumber,this.gasUnit="null"==i.UNTGasNumber?"":i.UNTGasNumber},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e})}}yt.\u0275fac=function(e){return new(e||yt)(t.Y36(ut.y),t.Y36(st.d),t.Y36(V.gz),t.Y36(ce.d),t.Y36(J.X),t.Y36(m.QS),t.Y36(p.C),t.Y36(E.v),t.Y36(V.F0),t.Y36(x.uw),t.Y36(j.U),t.Y36(D.Z),t.Y36(dt.g),t.Y36(w.sK),t.Y36(g.W),t.Y36(N.ux))},yt.\u0275cmp=t.Xpm({type:yt,selectors:[["app-customers-details"]],features:[t._Bn([g.W])],decls:349,vars:229,consts:[["mat-dialog-title",""],[4,"ngIf"],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["appearance","outline",1,"w-20"],["matInput","","formControlName","code","required",""],["appearance","outline",1,"w-30"],["matInput","","formControlName","username","required",""],["class","w-45",4,"ngIf"],["appearance","outline",1,"w-50"],["matInput","","formControlName","firstname","required",""],["appearance","outline",1,"w-45"],["matInput","","formControlName","lastname","required",""],["matInput","","formControlName","mobile","required",""],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["formControlName","selftype"],["value","P","labelPosition","after"],["value","C","labelPosition","after"],["value","O","labelPosition","after"],["formControlName","CUSEInvoiceType"],["value","G","labelPosition","after"],["value","B","labelPosition","after"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","image","name","image","id","upload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","profile",3,"label"],["formControlName","gender"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],[1,"w-50"],["matInput","","formControlName","birthday","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","current_branch","id","curbranchContOpSel","required","",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","curbuilding","id","buildOpSel",3,"placeholder","selectionChange"],["formControlName","curunit","id","unitOpSel",3,"placeholder","selectionChange"],["formGroupName","work",3,"label"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline","formControlName","WorkPlace_CTTKeyField","id","workplOpSel",1,"w-100",3,"placeholder"],["appearance","outline","formControlName","Job_CTTKeyField","id","jobsOpSel",1,"w-100",3,"placeholder"],["matInput","","formControlName","company","required",""],["formControlName","nationalIDType"],["value","N","labelPosition","after"],["value","K","labelPosition","after"],["value","S","labelPosition","after"],[1,"w-100"],["matInput","","formControlName","nationalID","required",""],["matInput","","formControlName","nationalIDStartDate",3,"matDatepicker"],["natStartDate",""],[1,"w-45"],["matInput","","formControlName","nationalIDEndDate",3,"matDatepicker"],["natEndDate",""],[2,"width","250px","height","200px",3,"src"],["formControlName","nationalIDPic","id","IDupload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","contacts",3,"label"],["fxLayout","column","fxLayoutGap","10px grid",1,"form-field-outer"],["appearance","outline",1,"w-24"],["matInput","","formControlName","homephone"],["appearance","outline",1,"w-25"],["matInput","","formControlName","workphone"],["matInput","","formControlName","email","required","",3,"placeholder"],["appearance","outline",1,"w-80"],["matInput","","formControlName","address"],["appearance","outline",1,"w-19"],["matInput","","formControlName","CUSShortAddress"],["formControlName","country","id","countrOpSel",3,"placeholder","selectionChange"],["formControlName","governorate","id","governoOpSel",3,"placeholder","selectionChange"],["formControlName","city","id","cityOpSel",3,"placeholder","selectionChange"],["formControlName","area","id","areaOpSel",3,"placeholder"],["appearance","outline",1,"w-40"],["matInput","","formControlName","CUSStreetName"],["matInput","","formControlName","CUSBuildingNumber"],["matInput","","formControlName","CUSZibCode"],["matInput","","formControlName","CUSBuildingSubNumber"],["formGroupName","social",3,"label"],["matInput","","formControlName","facebook"],["matInput","","formControlName","twitter"],["matInput","","formControlName","google"],["formGroupName","settings",3,"label",4,"ngIf"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["matInput","","formControlName","password","required","",3,"type"],["matSuffix","",3,"click"],["formGroupName","settings",3,"label"],["appearance","outline",1,"w-95"],["matInput","","formControlName","CUSTaxNumber"],["formControlName","isActive"],["formControlName","isDeleted"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"h1",0),t.YNc(1,Xe,3,3,"span",1),t.YNc(2,ti,3,3,"span",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"form",2)(6,"mat-tab-group",3)(7,"mat-tab",4),t.ALo(8,"translate"),t.TgZ(9,"div",5)(10,"div",6),t._UZ(11,"mat-label"),t.TgZ(12,"div",7)(13,"mat-form-field",8)(14,"mat-label")(15,"mat-icon"),t._uU(16,"person"),t.qZA(),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",9),t.YNc(20,ei,2,0,"mat-error",1),t.YNc(21,ii,2,0,"mat-error",1),t.qZA(),t.TgZ(22,"mat-form-field",10)(23,"mat-label")(24,"mat-icon"),t._uU(25,"person"),t.qZA(),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",11),t.qZA(),t.YNc(29,ai,11,7,"mat-form-field",12),t.qZA()(),t.TgZ(30,"div",7)(31,"mat-form-field",13)(32,"mat-label")(33,"mat-icon"),t._uU(34,"person"),t.qZA(),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",14),t.YNc(38,ri,2,0,"mat-error",1),t.qZA(),t.TgZ(39,"mat-form-field",15)(40,"mat-label")(41,"mat-icon"),t._uU(42,"person"),t.qZA(),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"input",16),t.YNc(46,si,2,0,"mat-error",1),t.qZA()(),t.TgZ(47,"div",7)(48,"mat-form-field",13)(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"mat-hint"),t._uU(53,"966505602221"),t.qZA(),t._UZ(54,"input",17),t.YNc(55,li,2,0,"mat-error",1),t.qZA()(),t.TgZ(56,"div",7)(57,"div",18)(58,"mat-label"),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"mat-radio-group",19)(62,"mat-radio-button",20),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"mat-radio-button",21),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"mat-radio-button",22),t._uU(69),t.ALo(70,"translate"),t.qZA()()()(),t.TgZ(71,"div",7)(72,"div",18)(73,"mat-label"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"mat-radio-group",23)(77,"mat-radio-button",24),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"mat-radio-button",20),t._uU(81),t.ALo(82,"translate"),t.qZA(),t.TgZ(83,"mat-radio-button",25),t._uU(84),t.ALo(85,"translate"),t.qZA()()()(),t.TgZ(86,"div",26),t._UZ(87,"img",27),t.TgZ(88,"input",28),t.NdJ("change",function(u){return i.handelCUSImgInput(u.target.files)}),t.qZA()()()(),t.TgZ(89,"mat-tab",29),t.ALo(90,"translate"),t.TgZ(91,"div",5)(92,"div",7)(93,"mat-radio-group",30)(94,"mat-radio-button",31),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"mat-radio-button",32),t._uU(98),t.ALo(99,"translate"),t.qZA()(),t.TgZ(100,"mat-form-field",33)(101,"mat-label"),t._uU(102),t.ALo(103,"translate"),t.qZA(),t._UZ(104,"input",34)(105,"mat-datepicker-toggle",35)(106,"mat-datepicker",null,36),t.qZA()(),t.TgZ(108,"div",7)(109,"div",37)(110,"mat-form-field",38)(111,"mat-label"),t._uU(112),t.ALo(113,"translate"),t.qZA(),t.TgZ(114,"mat-select",39),t.ALo(115,"translate"),t.TgZ(116,"mat-option",40),t._uU(117,"-"),t.qZA(),t.YNc(118,ci,2,2,"mat-option",41),t.qZA()()()(),t.TgZ(119,"div",7)(120,"mat-form-field",13)(121,"mat-label"),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"mat-select",42),t.NdJ("selectionChange",function(u){return i.getUnitsPerBuild(u)}),t.ALo(125,"translate"),t.TgZ(126,"mat-option",40),t._uU(127,"-"),t.qZA(),t.YNc(128,ui,2,2,"mat-option",41),t.qZA()(),t.TgZ(129,"mat-form-field",15)(130,"mat-label"),t._uU(131),t.ALo(132,"translate"),t.qZA(),t.TgZ(133,"mat-select",43),t.NdJ("selectionChange",function(u){return i.getUnitData(u)}),t.ALo(134,"translate"),t.TgZ(135,"mat-option",40),t._uU(136,"-"),t.qZA(),t.YNc(137,di,2,2,"mat-option",41),t.qZA()()(),t.TgZ(138,"div",7)(139,"h4"),t._uU(140),t.ALo(141,"translate"),t.qZA(),t.TgZ(142,"h3"),t._uU(143),t.qZA(),t.TgZ(144,"h4"),t._uU(145),t.ALo(146,"translate"),t.qZA(),t.TgZ(147,"h3"),t._uU(148),t.qZA(),t.TgZ(149,"h4"),t._uU(150),t.ALo(151,"translate"),t.qZA(),t.TgZ(152,"h3"),t._uU(153),t.qZA()()()(),t.TgZ(154,"mat-tab",44),t.ALo(155,"translate"),t.TgZ(156,"div",5)(157,"div",6),t._UZ(158,"mat-label"),t.TgZ(159,"div",7)(160,"div",45)(161,"label"),t._uU(162),t.ALo(163,"translate"),t.qZA(),t.TgZ(164,"ng-select",46),t.ALo(165,"translate"),t.YNc(166,mi,2,2,"ng-option",41),t.qZA()(),t.TgZ(167,"div",45)(168,"label"),t._uU(169),t.ALo(170,"translate"),t.qZA(),t.TgZ(171,"ng-select",47),t.ALo(172,"translate"),t.YNc(173,pi,2,2,"ng-option",41),t.qZA()()(),t._UZ(174,"mat-divider")(175,"mat-divider"),t.qZA(),t.TgZ(176,"mat-form-field",38)(177,"mat-label"),t._uU(178),t.ALo(179,"translate"),t.qZA(),t._UZ(180,"input",48),t.qZA(),t.TgZ(181,"mat-radio-group",49)(182,"mat-radio-button",50),t._uU(183),t.ALo(184,"translate"),t.qZA(),t.TgZ(185,"mat-radio-button",32),t._uU(186),t.ALo(187,"translate"),t.qZA(),t.TgZ(188,"mat-radio-button",51),t._uU(189),t.ALo(190,"translate"),t.qZA(),t.TgZ(191,"mat-radio-button",52),t._uU(192),t.ALo(193,"translate"),t.qZA(),t.TgZ(194,"mat-radio-button",22),t._uU(195),t.ALo(196,"translate"),t.qZA()(),t.TgZ(197,"mat-form-field",53)(198,"mat-label"),t._uU(199),t.ALo(200,"translate"),t.qZA(),t._UZ(201,"input",54),t.qZA(),t.TgZ(202,"div",7)(203,"mat-form-field",33)(204,"mat-label"),t._uU(205),t.ALo(206,"translate"),t.qZA(),t._UZ(207,"input",55)(208,"mat-datepicker-toggle",35)(209,"mat-datepicker",null,56),t.qZA(),t.TgZ(211,"mat-form-field",57)(212,"mat-label"),t._uU(213),t.ALo(214,"translate"),t.qZA(),t._UZ(215,"input",58)(216,"mat-datepicker-toggle",35)(217,"mat-datepicker",null,59),t.qZA()()(),t.TgZ(219,"div",26),t._UZ(220,"img",60),t.TgZ(221,"input",61),t.NdJ("change",function(u){return i.handelIDImgInput(u.target.files)}),t.qZA()()(),t.TgZ(222,"mat-tab",62),t.ALo(223,"translate"),t.TgZ(224,"div",63),t._UZ(225,"mat-label"),t.TgZ(226,"div",7)(227,"mat-form-field",64)(228,"mat-label"),t._uU(229),t.ALo(230,"translate"),t.qZA(),t._UZ(231,"input",65),t.qZA(),t.TgZ(232,"mat-form-field",66)(233,"mat-label"),t._uU(234),t.ALo(235,"translate"),t.qZA(),t._UZ(236,"input",67),t.qZA(),t.TgZ(237,"mat-form-field",13)(238,"mat-label"),t._uU(239),t.ALo(240,"translate"),t.qZA(),t._UZ(241,"input",68),t.ALo(242,"translate"),t.qZA()(),t.TgZ(243,"div",7)(244,"mat-form-field",69)(245,"mat-label"),t._uU(246),t.ALo(247,"translate"),t.qZA(),t._UZ(248,"input",70),t.qZA(),t.TgZ(249,"mat-form-field",71)(250,"mat-label"),t._uU(251),t.ALo(252,"translate"),t.qZA(),t._UZ(253,"input",72),t.qZA()(),t.TgZ(254,"div",7)(255,"mat-form-field",66)(256,"mat-label"),t._uU(257),t.ALo(258,"translate"),t.qZA(),t.TgZ(259,"mat-select",73),t.NdJ("selectionChange",function(u){return i.getGovernorate(u)}),t.ALo(260,"translate"),t.TgZ(261,"mat-option",40),t._uU(262,"-"),t.qZA(),t.YNc(263,hi,2,2,"mat-option",41),t.qZA()(),t.TgZ(264,"mat-form-field",66)(265,"mat-label"),t._uU(266),t.ALo(267,"translate"),t.qZA(),t.TgZ(268,"mat-select",74),t.NdJ("selectionChange",function(u){return i.getCity(u)}),t.ALo(269,"translate"),t.TgZ(270,"mat-option",40),t._uU(271,"-"),t.qZA(),t.YNc(272,gi,2,2,"mat-option",41),t.qZA()(),t.TgZ(273,"mat-form-field",64)(274,"mat-label"),t._uU(275),t.ALo(276,"translate"),t.qZA(),t.TgZ(277,"mat-select",75),t.NdJ("selectionChange",function(u){return i.getAria(u)}),t.ALo(278,"translate"),t.TgZ(279,"mat-option",40),t._uU(280,"-"),t.qZA(),t.YNc(281,fi,2,2,"mat-option",41),t.qZA()(),t.TgZ(282,"mat-form-field",66)(283,"mat-label"),t._uU(284),t.ALo(285,"translate"),t.qZA(),t.TgZ(286,"mat-select",76),t.ALo(287,"translate"),t.TgZ(288,"mat-option",40),t._uU(289,"-"),t.qZA(),t.YNc(290,_i,2,2,"mat-option",41),t.qZA()()(),t.TgZ(291,"div",7)(292,"mat-form-field",77)(293,"mat-label"),t._uU(294),t.ALo(295,"translate"),t.qZA(),t._UZ(296,"input",78),t.qZA(),t.TgZ(297,"mat-form-field",8)(298,"mat-label"),t._uU(299),t.ALo(300,"translate"),t.qZA(),t._UZ(301,"input",79),t.qZA(),t.TgZ(302,"mat-form-field",71)(303,"mat-label"),t._uU(304),t.ALo(305,"translate"),t.qZA(),t._UZ(306,"input",80),t.qZA(),t.TgZ(307,"mat-form-field",8)(308,"mat-label"),t._uU(309),t.ALo(310,"translate"),t.qZA(),t._UZ(311,"input",81),t.qZA()()()(),t.TgZ(312,"mat-tab",82),t.ALo(313,"translate"),t.TgZ(314,"div",6),t._UZ(315,"mat-label"),t.TgZ(316,"div",5)(317,"mat-form-field",38)(318,"mat-label"),t._uU(319,"Facebook"),t.qZA(),t._UZ(320,"input",83),t.qZA(),t.TgZ(321,"mat-form-field",38)(322,"mat-label"),t._uU(323,"Twitter"),t.qZA(),t._UZ(324,"input",84),t.qZA(),t.TgZ(325,"mat-form-field",38)(326,"mat-label"),t._uU(327,"Google"),t.qZA(),t._UZ(328,"input",85),t.qZA()()()(),t.YNc(329,Ci,16,12,"mat-tab",86),t.TgZ(330,"mat-tab",87),t.ALo(331,"translate"),t.TgZ(332,"div",88)(333,"div",26),t._UZ(334,"img",27),t.TgZ(335,"input",89,90),t.NdJ("change",function(u){return i.onFileChange(u.target.files)}),t.qZA(),t.TgZ(337,"button",91),t.NdJ("click",function(){t.CHM(a);const u=t.MAs(336);return t.KtG(u.click())}),t._uU(338),t.ALo(339,"translate"),t.qZA()(),t._UZ(340,"mat-divider")(341,"input-file",92),t.qZA()()()(),t._UZ(342,"br"),t.TgZ(343,"div",93)(344,"div",7),t.YNc(345,vi,3,4,"button",94),t.YNc(346,xi,4,4,"button",95),t.YNc(347,Ai,4,4,"button",95),t.YNc(348,yi,3,4,"button",95),t.qZA()()}if(2&e){const a=t.MAs(107),l=t.MAs(210),u=t.MAs(218);t.xp6(1),t.Q6J("ngIf",!i.CUS.id),t.xp6(1),t.Q6J("ngIf",i.CUS.id),t.xp6(1),t.hij(" ",t.lcZ(4,101,"HTML.TENANT"),""),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(8,103,"HTML.TAB_BASIC")),t.xp6(10),t.hij(" ",t.lcZ(18,105,"HTML.CODE"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.code.errors?null:i.form.controls.code.errors.required),t.xp6(1),t.Q6J("ngIf",i.form.controls.code.hasError("minlength")),t.xp6(5),t.hij(" ",t.lcZ(27,107,"HTML.USERNAME"),""),t.xp6(3),t.Q6J("ngIf",!i.CUS.id),t.xp6(6),t.hij(" ",t.lcZ(36,109,"HTML.FIRST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.firstname.errors?null:i.form.controls.firstname.errors.required),t.xp6(5),t.hij(" ",t.lcZ(44,111,"HTML.LAST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.lastname.errors?null:i.form.controls.lastname.errors.required),t.xp6(4),t.Oqu(t.lcZ(51,113,"HTML.MOBILE")),t.xp6(5),t.Q6J("ngIf",null==i.form.controls.mobile.errors?null:i.form.controls.mobile.errors.required),t.xp6(4),t.Oqu(t.lcZ(60,115,"HTML.TENANT_NATURE")),t.xp6(4),t.Oqu(t.lcZ(64,117,"HTML.NATURE_PERSON")),t.xp6(3),t.Oqu(t.lcZ(67,119,"HTML.NATURE_COMPANY")),t.xp6(3),t.Oqu(t.lcZ(70,121,"HTML.NATURE_OTHER")),t.xp6(5),t.Oqu(t.lcZ(75,123,"HTML.EInvoiceType")),t.xp6(4),t.Oqu(t.lcZ(79,125,"HTML.EType_Without")),t.xp6(3),t.Oqu(t.lcZ(82,127,"HTML.EType_Personal")),t.xp6(3),t.Oqu(t.lcZ(85,129,"HTML.EType_Business")),t.xp6(3),t.Q6J("src",i.defaultCusImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(90,131,"HTML.TAB_PERSONAL")),t.xp6(6),t.Oqu(t.lcZ(96,133,"HTML.MALE")),t.xp6(3),t.Oqu(t.lcZ(99,135,"HTML.FEMALE")),t.xp6(4),t.Oqu(t.lcZ(103,137,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(7),t.hij(" ",t.lcZ(113,139,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(115,141,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.Oqu(t.lcZ(123,143,"HTML.BUILDING")),t.xp6(2),t.s9C("placeholder",t.lcZ(125,145,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuildings),t.xp6(3),t.Oqu(t.lcZ(132,147,"HTML.UNIT")),t.xp6(2),t.s9C("placeholder",t.lcZ(134,149,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnits),t.xp6(3),t.hij(" ",t.lcZ(141,151,"HTML.ElectricityCounterNumber")," "),t.xp6(3),t.Oqu(i.electricUnit),t.xp6(2),t.hij(" ",t.lcZ(146,153,"HTML.WaterCounterNumber")," "),t.xp6(3),t.Oqu(i.waterUnit),t.xp6(2),t.hij(" ",t.lcZ(151,155,"HTML.GasCounterNumber")," "),t.xp6(3),t.Oqu(i.gasUnit),t.xp6(1),t.s9C("label",t.lcZ(155,157,"HTML.TAB_ID")),t.xp6(8),t.hij(" ",t.lcZ(163,159,"HTML.WorkPlace"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(165,161,"HTML.WorkPlace")),t.xp6(2),t.Q6J("ngForOf",i.WorkPlaces),t.xp6(3),t.hij(" ",t.lcZ(170,163,"HTML.Job"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(172,165,"HTML.Job")),t.xp6(2),t.Q6J("ngForOf",i.Jobs),t.xp6(5),t.Oqu(t.lcZ(179,167,"HTML.GUARANTOR")),t.xp6(5),t.Oqu(t.lcZ(184,169,"OPTIONS.NATIONAL_ID")),t.xp6(3),t.Oqu(t.lcZ(187,171,"OPTIONS.FOREIGN_ID")),t.xp6(3),t.Oqu(t.lcZ(190,173,"OPTIONS.GULF_ID")),t.xp6(3),t.Oqu(t.lcZ(193,175,"OPTIONS.SPECIAL_EQAMA")),t.xp6(3),t.Oqu(t.lcZ(196,177,"OPTIONS.OTHER")),t.xp6(4),t.Oqu(t.lcZ(200,179,"HTML.IDNUMBER")),t.xp6(6),t.Oqu(t.lcZ(206,181,"HTML.START_DATE")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(5),t.Oqu(t.lcZ(214,183,"HTML.END_DATE")),t.xp6(2),t.Q6J("matDatepicker",u),t.xp6(1),t.Q6J("for",u),t.xp6(4),t.Q6J("src",i.defaultIDImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(223,185,"HTML.TAB_CONTACTS")),t.xp6(7),t.Oqu(t.lcZ(230,187,"HTML.HOME_PHONE")),t.xp6(5),t.Oqu(t.lcZ(235,189,"HTML.WORK_PHONE")),t.xp6(5),t.Oqu(t.lcZ(240,191,"HTML.EMAIL")),t.xp6(2),t.s9C("placeholder",t.lcZ(242,193,"HTML.EMAIL")),t.xp6(5),t.Oqu(t.lcZ(247,195,"HTML.ADDRESS")),t.xp6(5),t.Oqu(t.lcZ(252,197,"HTML.ShortAddress")),t.xp6(6),t.Oqu(t.lcZ(258,199,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(260,201,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(3),t.Oqu(t.lcZ(267,203,"HTML.GOVERN")),t.xp6(2),t.s9C("placeholder",t.lcZ(269,205,"HTML.GOVERN")),t.xp6(4),t.Q6J("ngForOf",i.Governorates),t.xp6(3),t.Oqu(t.lcZ(276,207,"HTML.CITY")),t.xp6(2),t.s9C("placeholder",t.lcZ(278,209,"HTML.CITY")),t.xp6(4),t.Q6J("ngForOf",i.Cities),t.xp6(3),t.Oqu(t.lcZ(285,211,"HTML.REGION")),t.xp6(2),t.s9C("placeholder",t.lcZ(287,213,"HTML.REGION")),t.xp6(4),t.Q6J("ngForOf",i.Areas),t.xp6(4),t.Oqu(t.lcZ(295,215,"HTML.STREET_NAME")),t.xp6(5),t.Oqu(t.lcZ(300,217,"HTML.BUILDING_NUMBER")),t.xp6(5),t.Oqu(t.lcZ(305,219,"HTML.ZIP")),t.xp6(5),t.Oqu(t.lcZ(310,221,"HTML.BUILDING_SubNUMBER")),t.xp6(3),t.s9C("label",t.lcZ(313,223,"HTML.TAB_SOCIAL_LIFE")),t.xp6(17),t.Q6J("ngIf",i.account.periorty>0),t.xp6(1),t.s9C("label",t.lcZ(331,225,"HTML.TAB_DOCS")),t.xp6(4),t.Q6J("src",i.defaultDocImage,t.LSH),t.xp6(4),t.Oqu(t.lcZ(339,227,"HTML.AddPic")),t.xp6(7),t.Q6J("ngIf",i.can("change_tenant")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("view_tenantrelative")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("change_tenant_password")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("confirm_tenant"))}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,_.sg,_.O5,m.sg,m.u,m.x0,T.xw,T.SQ,T.Wh,T.yH,K.ey,C.lW,oe.oG,W.Mq,W.hl,W.nW,x.ZT,x.uh,x.H8,z.Hw,A.Nt,v.KE,v.hX,v.bx,v.TO,v.R9,tt.d,Wt.VQ,Wt.U0,S.gD,At.uX,At.SP,ae.tW,Ut.w9,Ut.jq,w.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}\n"],encapsulation:2});var Zi=f(3609);class wi{}function Oi(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&r){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(2),t.Oqu(t.lcZ(3,3,"BTN.SAVE"))}}class It{constructor(e,i,a,l){this.dialogRef=e,this.data=i,this.localStore=a,this.fb=l,this.userPerm=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.form=this.fb.group({id:null,INSCode:null,INSContractTyps:"I",INSStatus:"N",INSValue:0,INSPayedValue:0,dueDate:null,payDate:null,INSPersonPayName:null,INSNotes:null,RowConfirm:0,RowDelete:0,RowStatus:0,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,customer_KeyField:null}),this.data.cttRow?(console.log("===this.data.cttRow==="),console.log(this.data.cttRow),this.action="Patch",this.form.patchValue({id:this.data.cttRow.id,INSCode:this.data.cttRow.INSCode,dueDate:new Date(this.data.cttRow.INSDueDate),payDate:new Date(this.data.cttRow.INSPayDate),INSPersonPayName:this.data.cttRow.INSPersonPayName,INSNotes:this.data.cttRow.INSNotes,contract_KeyField:this.data.cttRow.contract_KeyField,branch_KeyField:this.data.cttRow.branch_KeyField,owner_KeyField:this.data.cttRow.owner_KeyField,build_KeyField:this.data.cttRow.build_KeyField,unit_KeyField:this.data.cttRow.unit_KeyField,customer_KeyField:this.data.cttRow.customer_KeyField,INSContractTyps:this.data.cttRow.INSContractTyps,INSStatus:this.data.cttRow.INSStatus,INSValue:this.data.cttRow.INSValue,INSPayedValue:this.data.cttRow.INSPayedValue,RowConfirm:this.data.cttRow.RowConfirm,RowDelete:this.data.cttRow.RowDelete,RowStatus:this.data.cttRow.RowStatus})):(console.log("==contract****:: "+this.data.contract),this.action="Post",this.form.patchValue({contract_KeyField:this.data.contract,branch_KeyField:this.data.branch,owner_KeyField:this.data.owner,build_KeyField:this.data.build,unit_KeyField:this.data.unit,customer_KeyField:this.data.customer,INSContractTyps:"I",INSStatus:"N",INSValue:0,INSPayedValue:0,RowConfirm:0,RowDelete:0,RowStatus:0}))}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onSave(){console.log("===***Press Save button***==="),this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value})}close(){console.log("===***Press Close button***==="),this.action="Cancel",this.dialogRef.close({event:this.action})}}It.\u0275fac=function(e){return new(e||It)(t.Y36(x.so),t.Y36(x.WI),t.Y36(p.C),t.Y36(m.QS))},It.\u0275cmp=t.Xpm({type:It,selectors:[["app-installment-dialog"]],decls:74,vars:48,consts:[["mat-dialog-title",""],[1,"user-form",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","INSCode","required",""],["matInput","","formControlName","INSValue","required",""],["matInput","","formControlName","dueDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["dueDate",""],["formControlName","INSStatus","id","instStatusOpSel",3,"placeholder"],[3,"value"],["matInput","","formControlName","INSPayedValue"],["matInput","","formControlName","payDate",3,"matDatepicker"],["payDate",""],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","INSNotes"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",7),t.qZA()(),t.TgZ(13,"div",5)(14,"mat-form-field",6)(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",8),t.qZA()(),t.TgZ(19,"div",5)(20,"mat-form-field",6)(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"input",9)(25,"mat-datepicker-toggle",10)(26,"mat-datepicker",null,11),t.qZA()()(),t.TgZ(28,"div",4)(29,"div",5)(30,"mat-form-field",6)(31,"mat-label"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"mat-select",12),t.ALo(35,"translate"),t.TgZ(36,"mat-option",13),t._uU(37,"-"),t.qZA(),t.TgZ(38,"mat-option",13),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"mat-option",13),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"mat-option",13),t._uU(45),t.ALo(46,"translate"),t.qZA()()()(),t.TgZ(47,"div",5)(48,"mat-form-field",6)(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t._UZ(52,"input",14),t.qZA()(),t.TgZ(53,"div",5)(54,"mat-form-field",6)(55,"mat-label"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t._UZ(58,"input",15)(59,"mat-datepicker-toggle",10)(60,"mat-datepicker",null,16),t.qZA()()(),t.TgZ(62,"div",17)(63,"mat-form-field",6)(64,"mat-label"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t._UZ(67,"input",18),t.qZA()()()(),t.TgZ(68,"div",19)(69,"div",4),t.YNc(70,Oi,4,5,"button",20),t.TgZ(71,"button",21),t.NdJ("click",function(){return i.close()}),t._uU(72),t.ALo(73,"translate"),t.qZA()()()()),2&e){const a=t.MAs(27),l=t.MAs(61);t.xp6(1),t.Oqu(t.lcZ(2,22,"HTML.InstallmentData")),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(7),t.Oqu(t.lcZ(11,24,"HTML.CODE")),t.xp6(6),t.Oqu(t.lcZ(17,26,"HTML.InstallmentValue")),t.xp6(6),t.Oqu(t.lcZ(23,28,"HTML.DueDate")),t.xp6(2),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(7),t.Oqu(t.lcZ(33,30,"HTML.InstallmentStatus")),t.xp6(2),t.s9C("placeholder",t.lcZ(35,32,"HTML.InstallmentStatus")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(40,34,"OPTIONS.NotPayed")),t.xp6(2),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(43,36,"OPTIONS.Payed")),t.xp6(2),t.Q6J("value","T"),t.xp6(1),t.Oqu(t.lcZ(46,38,"OPTIONS.PartialPayed")),t.xp6(5),t.Oqu(t.lcZ(51,40,"HTML.PayedValue")),t.xp6(6),t.Oqu(t.lcZ(57,42,"HTML.PayedDate")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(6),t.Oqu(t.lcZ(66,44,"HTML.Notes")),t.xp6(5),t.Q6J("ngIf",i.can("change_installment")),t.xp6(2),t.Oqu(t.lcZ(73,46,"BTN.CANCEL"))}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,_.O5,m.sg,m.u,T.xw,T.Wh,T.yH,K.ey,C.lW,W.Mq,W.hl,W.nW,x.ZT,x.uh,x.xY,x.H8,A.Nt,v.KE,v.hX,v.R9,S.gD,w.X$]});var me=f(1008);function Ni(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.openCategoryDialog(null))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.AddInstallment")))}function Di(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw();return t.KtG(u.openCategoryDialog(l))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()}2&r&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.EDIT"))}function Ui(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw();return t.KtG(u.remove(l.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&r&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function Li(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw();return t.KtG(u.printEInvoice(l))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()}2&r&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.TaxInvoice"))}function Ii(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw();return t.KtG(u.printEInvoiceRequest(l))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"account_balance_wallet"),t.qZA()()}2&r&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.TaxRequest"))}function Si(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw();return t.KtG(u.createDocumentNumber("S",l))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"key"),t.qZA()()}2&r&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.TaxInvoice"))}function Fi(r,e){if(1&r&&(t.TgZ(0,"div",9)(1,"div",10),t._uU(2),t.qZA(),t.TgZ(3,"div",10),t._uU(4),t.qZA(),t.TgZ(5,"div",10),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"div",10),t._uU(9),t.qZA(),t.TgZ(10,"div",10),t._uU(11),t.qZA(),t.TgZ(12,"div",10)(13,"div",11),t.YNc(14,Di,4,3,"button",12),t.YNc(15,Ui,4,3,"button",13),t.YNc(16,Li,4,3,"button",12),t.YNc(17,Ii,4,3,"button",12),t.YNc(18,Si,4,3,"button",12),t.qZA()()()),2&r){const i=e.$implicit,a=t.oxw();t.xp6(2),t.Oqu(i.INSCode),t.xp6(2),t.Oqu(i.INSValue),t.xp6(2),t.Oqu(t.xi3(7,10,i.INSDueDate,"yyyy-MM-dd")),t.xp6(3),t.Oqu(i.INSStatusDisplay),t.xp6(2),t.Oqu(i.INSPayedValue),t.xp6(3),t.Q6J("ngIf",a.can("view_installment")),t.xp6(1),t.Q6J("ngIf",a.can("delete_installment")),t.xp6(1),t.Q6J("ngIf",("P"==i.customer_EInvoiceType||"B"==i.customer_EInvoiceType)&&a.can("view_installment")),t.xp6(1),t.Q6J("ngIf",("P"==i.customer_EInvoiceType||"B"==i.customer_EInvoiceType)&&a.can("view_installment")),t.xp6(1),t.Q6J("ngIf",("P"==i.customer_EInvoiceType||"B"==i.customer_EInvoiceType)&&a.can("view_installment"))}}function Mi(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"mat-card",18)(3,"pagination-controls",19),t.NdJ("pageChange",function(l){t.CHM(i);const u=t.oxw();return t.KtG(u.onPageChanged(l))}),t.qZA()()()()}}const Ei=function(r,e){return{itemsPerPage:r,currentPage:e}};class St{constructor(e,i,a,l,u,b,Z,M,P,Y,et,Ct,Tt){this.transferService=e,this.localStore=i,this.global=a,this.router=l,this.activatedRoute=u,this._contractService=b,this.invoiceService=Z,this.settingService=M,this.snackBar=P,this.translateService=Y,this.fb=et,this.dialog=Ct,this.appSettings=Tt,this.contractInstallmentsArray=[],this.count=6,this.curCOMId=O.N.comid,this.account=new at.n,this.installmentForDisplay={id:void 0,COMId:void 0,INSCode:void 0,contract_KeyField:void 0,branch_KeyField:void 0,owner_KeyField:void 0,build_KeyField:void 0,unit_KeyField:void 0,customer_KeyField:void 0,INSContractTyps:void 0,INSStatus:void 0,INSValue:void 0,INSDueDate:void 0,INSPayedValue:void 0,INSPayDate:null,INSPersonPayName:void 0,INSNotes:void 0,EntryDate:void 0,EntryUser:void 0,RowConfirm:void 0,RowStatus:void 0,RowDelete:void 0},this.userPerm=[],this.expensesInvoiceCTT=(new F.I).ExpensesInvoice,this.sellInvoiceCTT=(new F.I).SellInvoice,this.addAlarmCTT=(new F.I).AddAlarm,this.discountAlarmCTT=(new F.I).DiscountAlarm,this.requestInvoiceCTT=(new F.I).RequestInvoice,this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=+e.id,this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id),this._contractService.getOneContract(this.id).subscribe(i=>{this.contract_KeyField=i.id,this.branch_KeyField=i.branch_KeyField,this.owner_KeyField=i.owner_KeyField,this.build_KeyField=i.build_KeyField,this.unit_KeyField=i.unit_KeyField,this.customer_KeyField=i.customer_KeyField})):this.Insta=new wi})}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}generateUserName(e,i){return this.pad(e,4)+i}pad(e,i){let a=e+"";for(;a.length<i;)a="0"+a;return a}createDocumentNumber(e,i){var a,l;switch(e){case"X":this.curDocUsed=this.expensesInvoiceCTT;break;case"S":default:this.curDocUsed=this.sellInvoiceCTT;break;case"A":this.curDocUsed=this.addAlarmCTT;break;case"D":this.curDocUsed=this.discountAlarmCTT;break;case"R":this.curDocUsed=this.requestInvoiceCTT}this.filterString="M="+this.curCOMId+"&C="+this.curUserData.periorty+"&usr=all",this.invoiceNumber="",this.settingService.getSerialsPerType(this.curCOMId,this.curUserData.periorty,this.curDocUsed).subscribe(u=>{this.docserialType=u[0].DOSDocSerialType,"P"==this.docserialType?this.settingService.getAllDetaisForSerial(this.curCOMId,this.curUserData.periorty,u[0].id).subscribe(b=>{for(let Z=0;Z<b.length;Z++)if(this.partType=b[Z].DSDPartType,this.partDigitNo=b[Z].DSDNoOfDigits,this.partStartWith=b[Z].DSDPartStartWith??"",this.partStartWith.length==+this.partDigitNo)this.invoiceNumber+=this.partStartWith;else if(this.partStartWith.length>+this.partDigitNo)this.invoiceNumber+=this.partStartWith.substring(0,+this.partDigitNo-1);else if(this.partStartWith.length<+this.partDigitNo)switch(this.invoiceNumber+=this.partStartWith,this.remainderLength=+this.partDigitNo-this.partStartWith.length,this.partType){case"Y":a=(new Date).getFullYear().toString(),l=a,a=a.substring(a.length-+this.remainderLength),this.invoiceNumber+=a,this.filterString+="&year="+l;break;case"M":l=((new Date).getMonth()+1).toString(),a="0"+l.slice(-2),this.invoiceNumber+=a,this.filterString+="&month="+l;break;case"B":a=i.branch_KeyField.length>=+this.remainderLength?i.branch_KeyField.toString().slice(-this.remainderLength):this.pad(i.branch_KeyField,this.remainderLength),this.invoiceNumber+=a,this.filterString+="&branch="+i.branch_KeyField;break;case"O":a=i.owner_KeyField.length>=+this.remainderLength?i.owner_KeyField.toString().slice(-this.remainderLength):this.pad(i.owner_KeyField,this.remainderLength),this.invoiceNumber+=a,this.filterString+="&owner="+i.owner_KeyField;break;case"P":a=i.build_KeyField.length>=+this.remainderLength?i.build_KeyField.toString().slice(-this.remainderLength):this.pad(i.build_KeyField,this.remainderLength),this.invoiceNumber+=a,this.filterString+="&building="+i.build_KeyField;break;case"U":a=i.unit_KeyField.length>=+this.remainderLength?i.unit_KeyField.toString().slice(-this.remainderLength):this.pad(i.unit_KeyField,this.remainderLength),this.invoiceNumber+=a,this.filterString+="&unit="+i.unit_KeyField;break;case"T":a=i.CUSKeyField.length>=+this.remainderLength?i.CUSKeyField.toString().slice(-this.remainderLength):this.pad(i.CUSKeyField,this.remainderLength),this.invoiceNumber+=a,this.filterString+="&customer="+i.CUSKeyField;break;case"C":a=i.contract_KeyField.length>=+this.remainderLength?i.contract_KeyField.toString().slice(-this.remainderLength):this.pad(i.contract_KeyField,this.remainderLength),this.invoiceNumber+=a,this.filterString+="&contract="+i.contract_KeyField;break;case"E":a=i.curUserData.id.length>=+this.remainderLength?i.curUserData.id.toString().slice(-this.remainderLength):this.pad(i.curUserData.id,this.remainderLength),this.invoiceNumber+=a,this.filterString+="&user="+i.curUserData.id;break;case"F":this.invoiceNumber+=a=this.partStartWith;break;case"S":console.log("----++++++++++-------"),console.log("this.filterString:: "+this.filterString),console.log("----++++++++++-------"),this.invoiceService.getInvoicesPerSpecOneString(this.filterString).subscribe(M=>{M.length>0?(this.maxSerial=M[0].INVSerial??0,this.maxSerial+=1,(l=this.maxSerial.toString()).length>=this.partDigitNo?this.invoiceNumber+=a=l:(a=this.pad(l.toString(),this.partDigitNo),this.invoiceNumber+=a),console.log("-------*****PartType=P*after Serial*****---------"),console.log("this.maxSerial:: "+this.maxSerial),console.log("this.invoiceNumber:: "+this.invoiceNumber),console.log("-------***********---------")):(this.maxSerial=1,this.partDigitNo>1?(a=this.pad(1,this.partDigitNo),this.invoiceNumber+=a):this.invoiceNumber+="1",console.log("-------*****PartType=P*after Serial new rows*****---------"),console.log("this.maxSerial:: "+this.maxSerial),console.log("this.invoiceNumber:: "+this.invoiceNumber),console.log("-------***********---------"))})}}):this._contractService.getMaxContractCodeForOwner(this.curCOMId,this.curUserData.periorty,this.curDocUsed).subscribe(b=>{this.maxSerial=b.max,this.invoiceNumber=this.maxSerial.toString(),console.log("-------*****PartType=G******---------"),console.log("this.maxSerial:: "+this.maxSerial),console.log("this.invoiceNumber:: "+this.invoiceNumber),console.log("-------***********---------")})})}createInvoiceNumber(e,i,a){let l=i??0;l+=1;let u=this.pad(l,a);this.newInvNumber=e+u}printEInvoice(e){this.createInvoiceNumber(e.owner_InvMask,+e.owner_LastInvCode,+e.owner_InvCodeLength),this.invType="INV",this.transferService.setMessage({customer_EInvoiceType:e.customer_EInvoiceType,invType:this.invType,ownerID:e.owner_KeyField,tenantID:e.customer_KeyField,ownerTaxNumber:e.owner_TaxNumber,ownerName:e.owner_FullName,ownerAddress:e.owner_Address,ownerCommRegister:e.owner_CommercialRegister,tenantCommRegister:e.customer_CommercialRegister,ownerBankName:e.owner_BankName,ownerBankAccountNumber:e.owner_BankAccountNumber,accountOwnerName:e.owner_BankAccountOwnerName,tenantName:e.customer_Name,tenantAddress:e.customer_Address,tenantTaxNumber:e.customer_TaxNumber,invoiceValue:e.INSValue-e.INSPayedValue,invoiceNumber:this.newInvNumber,intervalStartDate:e.contract_StartDate,intervalEndDate:e.contract_EndDate,ownerLogo:e.owner_LogoPic,ownerLogoBase64:e.owner_LogoBase64}),this.router.navigate(["/contracts/print-einvoice/"])}printEInvoiceRequest(e){this.invType="REQUEST",this.newRequestNumber="R2024000001",this.transferService.setMessage({customer_EInvoiceType:e.customer_EInvoiceType,invType:this.invType,ownerID:e.owner_KeyField,tenantID:e.customer_KeyField,ownerTaxNumber:e.owner_TaxNumber,ownerName:e.owner_FullName,ownerAddress:e.owner_Address,ownerCommRegister:e.owner_CommercialRegister,tenantCommRegister:e.customer_CommercialRegister,ownerBankName:e.owner_BankName,ownerBankAccountNumber:e.owner_BankAccountNumber,accountOwnerName:e.owner_BankAccountOwnerName,tenantName:e.customer_Name,tenantAddress:e.customer_Address,tenantTaxNumber:e.customer_TaxNumber,invoiceValue:e.INSValue-e.INSPayedValue,invoiceNumber:this.newRequestNumber,intervalStartDate:e.contract_StartDate,intervalEndDate:e.contract_EndDate,ownerLogo:e.owner_LogoPic,ownerLogoBase64:e.owner_LogoBase64}),this.router.navigate(["/contracts/print-einvoice/"])}onPageChanged(e){this.page=e,window.scrollTo(0,0)}openCategoryDialog(e){this.dialog.open(It,{data:{cttRow:e,contract:this.contract_KeyField,branch:this.branch_KeyField,owner:this.owner_KeyField,build:this.build_KeyField,unit:this.unit_KeyField,customer:this.customer_KeyField},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(a=>{console.log("=====result.event:: "+a.event),"Cancel"==a.event||("Patch"==a.event?(this.mapFormvalue_to_InstallmentClass(a.data),this.updateInstallment(this.installmentForDisplay)):"Post"==a.event&&(this.mapFormvalue_to_InstallmentClass(a.data),this.addInstallment(this.installmentForDisplay)))})}addInstallment(e){console.log("====inside addInstallment== ==="),this._contractService.addInstallments(e).subscribe(i=>this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id))}updateInstallment(e){console.log("====inside updateInstallment====="),this._contractService.editInstallments(e).subscribe(i=>this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id))}mapFormvalue_to_InstallmentClass(e){if(console.log("====formValue.dueDate:: "+e.dueDate),null!=e.dueDate){const l=new _.uU("en-GB").transform(e.dueDate,"dd/MM/yyyy");new Date(new _.uU("en-GB").transform(new Date(e.dueDate),"yyyy/MM/dd")),this.installmentForDisplay.INSDueDate=l}if(null!=e.payDate){const l=new _.uU("en-GB").transform(e.payDate,"dd/MM/yyyy");new Date(new _.uU("en-GB").transform(new Date(e.payDate),"yyyy/MM/dd")),this.installmentForDisplay.INSPayDate=l}this.installmentForDisplay.id=e.id,this.installmentForDisplay.INSCode=e.INSCode,this.installmentForDisplay.INSContractTyps=e.INSContractTyps,this.installmentForDisplay.INSStatus=e.INSStatus,this.installmentForDisplay.INSValue=e.INSValue,this.installmentForDisplay.INSPayedValue=e.INSPayedValue,this.installmentForDisplay.INSDueDate=e.dueDate,this.installmentForDisplay.INSPayDate=e.payDate,this.installmentForDisplay.INSPersonPayName=e.INSPersonPayName,this.installmentForDisplay.INSNotes=e.INSNotes,this.installmentForDisplay.RowConfirm=e.RowConfirm,this.installmentForDisplay.RowDelete=e.RowDelete,this.installmentForDisplay.RowStatus=e.RowStatus,this.installmentForDisplay.contract_KeyField=e.contract_KeyField,this.installmentForDisplay.branch_KeyField=e.branch_KeyField,this.installmentForDisplay.owner_KeyField=e.owner_KeyField,this.installmentForDisplay.build_KeyField=e.build_KeyField,this.installmentForDisplay.unit_KeyField=e.unit_KeyField,this.installmentForDisplay.customer_KeyField=e.customer_KeyField}getInstallmentsPerContract(e,i,a){this._contractService.getInstallmentsPerContract(e,i,a).subscribe(l=>{this.contractInstallmentsArray=l},l=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}remove(e){this.dialog.open(rt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(a=>{a&&this._contractService.deleteInstallment(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,e)})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}St.\u0275fac=function(e){return new(e||St)(t.Y36(ut.y),t.Y36(p.C),t.Y36(j.U),t.Y36(V.F0),t.Y36(V.gz),t.Y36(g.W),t.Y36(me.q),t.Y36(dt.g),t.Y36(N.ux),t.Y36(w.sK),t.Y36(m.qu),t.Y36(x.uw),t.Y36(st.d))},St.\u0275cmp=t.Xpm({type:St,selectors:[["app-installment"]],decls:34,vars:27,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","click"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"h2"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.YNc(6,Ni,3,3,"button",2),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",3)(9,"div",4)(10,"div",5)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",5)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",5)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",5)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",5)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t._UZ(30,"div",5),t.qZA(),t.YNc(31,Fi,19,13,"div",6),t.ALo(32,"paginate"),t.qZA()(),t.YNc(33,Mi,4,0,"div",7),t.qZA()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,9,"BTN.INSTALLMENT")),t.xp6(2),t.Q6J("ngIf",i.can("add_installment")),t.xp6(6),t.hij(" ",t.lcZ(13,11,"HTML.CODE")," "),t.xp6(4),t.hij(" ",t.lcZ(17,13,"HTML.InstallmentValue")," "),t.xp6(4),t.hij(" ",t.lcZ(21,15,"HTML.DueDate")," "),t.xp6(4),t.hij(" ",t.lcZ(25,17,"HTML.InstallmentStatus")," "),t.xp6(4),t.hij(" ",t.lcZ(29,19,"HTML.PayedValue")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(32,21,i.contractInstallmentsArray,t.WLB(24,Ei,i.count,i.page))),t.xp6(2),t.Q6J("ngIf",i.contractInstallmentsArray.length>0))},dependencies:[$.LS,_.sg,_.O5,T.xw,T.Wh,T.yH,C.lW,C.nh,H.a8,z.Hw,tt.d,pt.gM,$._s,_.uU,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:480px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});var pe=f(6166),qi=f(4159),he=f.n(qi);function Pi(r,e){if(1&r&&(t.TgZ(0,"div",7)(1,"div",10),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"div",10),t._uU(5),t.qZA(),t.TgZ(6,"div",10),t._uU(7),t.qZA(),t.TgZ(8,"div",10),t._uU(9),t.qZA()()),2&r){const i=e.$implicit;t.xp6(2),t.Oqu(t.xi3(3,4,i.TSTDate,"yyyy-MM-dd")),t.xp6(3),t.Oqu(i.TSTDebitValue),t.xp6(2),t.Oqu(i.TSTCreditValue),t.xp6(2),t.Oqu(i.TSTDescription)}}function Ri(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"mat-card",13)(3,"pagination-controls",14),t.NdJ("pageChange",function(l){t.CHM(i);const u=t.oxw();return t.KtG(u.onPageChanged(l))}),t.qZA()()()()}}const Bi=function(r,e){return{itemsPerPage:r,currentPage:e}};class Ft{constructor(e,i,a,l,u,b,Z,M){this.localStore=e,this.global=i,this.router=a,this.activatedRoute=l,this.tenantsService=u,this.snackBar=b,this.translateService=Z,this.appSettings=M,this.tenantStatementArray=[],this.count=10,this.curCOMId=O.N.comid,this.account=new at.n,this.totalDebitValue=0,this.tempDebitValue=0,this.totalCreditValue=0,this.tempCreditValue=0,this.settings=this.appSettings.settings}ngOnInit(){this.emptyString=" ",this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")?(this.global.me=JSON.parse(this.localStore.getItem("account")),this.prepareMsgLanguage(),this.sub=this.activatedRoute.params.subscribe(e=>{e.id&&(this.id=+e.id,this.getCustomer(this.id),this.getStatementsPerCustomer(this.curCOMId,this.account.periorty,this.id))})):this.router.navigate(["/sign-in"])}downloadPDF(){var e=document.getElementById("contentToConvert");he()(e).then(i=>{var u=208*i.height/i.width;const Z=i.toDataURL("image/png");let M=new pe.ZP("p","mm","a4");M.addImage(Z,"PNG",0,0,208,u),M.save("MYPdf.pdf")})}onPageChanged(e){this.page=e,window.scrollTo(0,0)}getStatementsPerCustomer(e,i,a){this.totalDebitValue=0,this.totalCreditValue=0,this.tenantsService.getStatementsPerCustomers(e,i,a).subscribe(l=>{this.tenantStatementArray=l;for(let u=0;u<this.tenantStatementArray.length;u++)this.tempDebitValue=+this.tenantStatementArray[u].TSTDebitValue,this.totalDebitValue+=this.tempDebitValue,this.tempCreditValue=+this.tenantStatementArray[u].TSTCreditValue,this.totalCreditValue+=this.tempCreditValue},l=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCustomer(e){this.tenantsService.getOneCustomer(e).subscribe(i=>{this.cusName=i.CUSName})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e})}}Ft.\u0275fac=function(e){return new(e||Ft)(t.Y36(p.C),t.Y36(j.U),t.Y36(V.F0),t.Y36(V.gz),t.Y36(E.v),t.Y36(N.ux),t.Y36(w.sK),t.Y36(st.d))},Ft.\u0275cmp=t.Xpm({type:Ft,selectors:[["app-tenant-statements"]],decls:43,vars:33,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click"],["id","contentToConvert",1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell","primary-text","notifbold"],["fxLayout","row wrap",4,"ngIf"],[1,"mat-mdc-cell"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"button",2),t.NdJ("click",function(){return i.downloadPDF()}),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t._UZ(6,"mat-divider"),t.TgZ(7,"div",3)(8,"div",1)(9,"h2"),t._uU(10),t.ALo(11,"translate"),t.qZA()(),t._UZ(12,"mat-divider"),t.TgZ(13,"div",4)(14,"div",5)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",5)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",5)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",5)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t.YNc(30,Pi,10,7,"div",6),t.ALo(31,"paginate"),t.TgZ(32,"div",7)(33,"div",8),t._uU(34,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(35,"div",8),t._uU(36),t.qZA(),t.TgZ(37,"div",8),t._uU(38),t.qZA(),t.TgZ(39,"div",8),t._uU(40),t.ALo(41,"translate"),t.qZA()()()(),t.YNc(42,Ri,4,0,"div",9),t.qZA()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,13,"BTN.DownloadPDF")),t.xp6(6),t.AsE("",t.lcZ(11,15,"BTN.Statements")," :: ",i.cusName,""),t.xp6(6),t.hij(" ",t.lcZ(17,17,"HTML.Date")," "),t.xp6(4),t.hij(" ",t.lcZ(21,19,"HTML.Debit")," "),t.xp6(4),t.hij(" ",t.lcZ(25,21,"HTML.Credit")," "),t.xp6(4),t.hij(" ",t.lcZ(29,23,"HTML.Description")," "),t.xp6(2),t.Q6J("ngForOf",t.xi3(31,25,i.tenantStatementArray,t.WLB(30,Bi,i.count,i.page))),t.xp6(6),t.hij(" ",i.totalDebitValue," "),t.xp6(2),t.hij(" ",i.totalCreditValue," "),t.xp6(2),t.AsE(" ",t.lcZ(41,28,"HTML.Balance")," (",i.totalCreditValue-i.totalDebitValue,") "),t.xp6(2),t.Q6J("ngIf",i.tenantStatementArray.length>0))},dependencies:[$.LS,_.sg,_.O5,T.xw,T.Wh,T.yH,C.lW,H.a8,tt.d,$._s,_.uU,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:480px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});class ki{}var ge=f(1481);function Ki(r,e){1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function Vi(r,e){1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Hi(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"First name is required"),t.qZA())}function Wi(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Last name is required"),t.qZA())}function Ji(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"mat-form-field",16)(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"input",62),t.ALo(5,"translate"),t.TgZ(6,"mat-icon",63),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.passwordHide=!l.passwordHide)}),t._uU(7),t.qZA()()}if(2&r){const i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"HTML.PASSWORD")),t.xp6(2),t.s9C("placeholder",t.lcZ(5,6,"HTML.PASSWORD")),t.Q6J("type",i.passwordHide?"password":"text"),t.xp6(3),t.Oqu(i.passwordHide?"visibility":"visibility_off")}}function Yi(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"mat-form-field",16)(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"input",64),t.ALo(5,"translate"),t.TgZ(6,"mat-icon",63),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.confirmpasswordHide=!l.confirmpasswordHide)}),t._uU(7),t.qZA()()}if(2&r){const i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"HTML.ConfirmPassword")),t.xp6(2),t.s9C("placeholder",t.lcZ(5,6,"HTML.ConfirmPassword")),t.Q6J("type",i.confirmpasswordHide?"password":"text"),t.xp6(3),t.Oqu(i.confirmpasswordHide?"visibility":"visibility_off")}}function Gi(r,e){1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function Qi(r,e){1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function ji(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",65),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.onSave())}),t.YNc(1,Gi,3,3,"span",1),t.YNc(2,Qi,3,3,"span",1),t.qZA()}if(2&r){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.oneowner.id),t.xp6(1),t.Q6J("ngIf",i.oneowner.id)}}class ft{constructor(e,i,a,l,u,b,Z){this.dialogRef=e,this.oneowner=i,this.atlasService=a,this.localStore=l,this.sanitizer=u,this.snackBar=b,this.fb=Z,this.passwordHide=!0,this.confirmpasswordHide=!0,this.defaultOwnerImage=(new U.P).noImage,this.defaultOwnerIDImage=(new U.P).noImage,this.defaultOwnerLogo=(new U.P).noImage,this.OwnerImageToUpload=null,this.OwnerIDImageToUpload=null,this.OwnerLogoToUpload=null,this.curCOMId=O.N.comid,this.userPerm=[],this.allowedChar="1234567890",this.lengthOfCode=6}handelOwnerImgInput(e){this.OwnerImageToUpload=e.item(0);var i=new FileReader;i.onload=a=>{this.defaultOwnerImage=a.target.result},i.readAsDataURL(this.OwnerImageToUpload)}handelOwnerIDImgInput(e){this.OwnerIDImageToUpload=e.item(0);var i=new FileReader;i.onload=a=>{this.defaultOwnerIDImage=a.target.result},i.readAsDataURL(this.OwnerIDImageToUpload)}handelOwnerLogo(e){this.OwnerLogoToUpload=e.item(0);var i=new FileReader;i.readAsDataURL(this.OwnerLogoToUpload),i.onload=a=>{this.defaultOwnerLogo=a.target.result,this.fileName=this.OwnerLogoToUpload.name+" "+this.OwnerLogoToUpload.type;const l=i.result.split(",")[1];this.filePreview="data:image/png;base64,"+l,this.form.patchValue({settings:{OWNLogoPicBase64:this.filePreview}})}}sanitize(e){return this.sanitizer.bypassSecurityTrustUrl(e)}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.oneowner&&(this.id=this.oneowner.id),this.form=this.fb.group({id:null,OWNFirstName:["",m.kI.compose([m.kI.required,m.kI.minLength(2)])],OWNLastName:["",m.kI.compose([m.kI.required,m.kI.minLength(2)])],OWNGender:null,OWNSelfType:null,OWNBirthDate:null,OWNPic:null,work:this.fb.group({OWNNationalIDType:null,OWNNationalID:null,OWNNationalIDStartDate:null,OWNNationalIDEndDate:null,OWNIDPic:null}),contacts:this.fb.group({username:{value:null,disabled:this.id},OWNPassword:null,confirmPassword:null,OWNEmail:["",m.kI.compose([m.kI.required,I.Le])],OWNMobile:[null,m.kI.required],OWNMobileWhatsapp:null,OWNHomePhone:null,OWNWorkPhone:null,OWNAddress:null,OWNAddressDescription:null},{validator:(0,I.zi)("OWNPassword","confirmPassword")}),settings:this.fb.group({OWNActive:!1,OWNTaxNumber:null,OWNCommercialRegister:null,OWNBankName:null,OWNBankAccountNumber:null,OWNBankAccountOwnerName:null,OWNLastInvoiceCode:null,OWNInvoiceMask:null,OWNInvoiceNumberLength:null,OWNLogoPic:null,OWNLogoPicBase64:null,EntryDate:null})}),this.oneowner?(this.curPeriority=this.curUserData.periorty,this.action="Patch",this.fillForm(this.oneowner)):(this.curPeriority=0,this.action="Post",this.oneowner=new ki,this.getMaxCodeForCustomers())}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}fillForm(e){this.defaultOwnerImage=null!=e.OWNPic?e.OWNPic:(new U.P).noImage,this.defaultOwnerIDImage=null!=e.OWNIDPic?e.OWNIDPic:(new U.P).noImage,this.defaultOwnerLogo=null!=e.OWNLogoPic?e.OWNLogoPic:(new U.P).noImage,this.form.patchValue({id:e.id,OWNFirstName:e.OWNFirstName,OWNLastName:e.OWNLastName,OWNGender:e.OWNGender,OWNBirthDate:e.OWNBirthDate,OWNSelfType:e.OWNSelfType,OWNPic:e.OWNPic,work:{OWNNationalIDType:e.OWNNationalIDType,OWNNationalID:e.OWNNationalID,OWNNationalIDStartDate:e.OWNNationalIDStartDate,OWNNationalIDEndDate:e.OWNNationalIDEndDate,OWNIDPic:e.OWNIDPic},contacts:{username:e.username,OWNPassword:e.OWNPassword,confirmPassword:e.OWNPassword,OWNEmail:e.OWNEmail,OWNMobile:e.OWNMobile,OWNMobileWhatsapp:e.OWNMobileWhatsapp,OWNHomePhone:e.OWNHomePhone,OWNWorkPhone:e.OWNWorkPhone,OWNAddress:e.OWNAddress,OWNAddressDescription:e.OWNAddressDescription},settings:{OWNActive:e.OWNActive,OWNTaxNumber:e.OWNTaxNumber,OWNCommercialRegister:e.OWNCommercialRegister,OWNBankName:e.OWNBankName,OWNBankAccountNumber:e.OWNBankAccountNumber,OWNBankAccountOwnerName:e.OWNBankAccountOwnerName,OWNLogoPic:e.OWNLogoPic,OWNLogoPicBase64:e.OWNLogoPicBase64,OWNLastInvoiceCode:e.OWNLastInvoiceCode,OWNInvoiceMask:e.OWNInvoiceMask,OWNInvoiceNumberLength:e.OWNInvoiceNumberLength,EntryDate:e.entryDate}}),this.filePreview=e.OWNLogoPicBase64}onSave(){console.log("===***Press Save button***==="),this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value,ownPic:this.OwnerImageToUpload,ownerIDPic:this.OwnerIDImageToUpload,ownerLogo:this.OwnerLogoToUpload})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}createRandomString(e,i){let a="";for(let l=0;l<e;l++)a+=i.charAt(Math.floor(Math.random()*i.length));return a}getMaxCodeForCustomers(){let e=this.createRandomString(this.lengthOfCode,this.allowedChar);console.log(e),this.form.patchValue({contacts:{username:e,OWNPassword:e,confirmPassword:e,OWNEmail:"E"+e+"@jeddahlake.com"}})}}ft.\u0275fac=function(e){return new(e||ft)(t.Y36(x.so),t.Y36(x.WI),t.Y36(D.Z),t.Y36(p.C),t.Y36(ge.H7),t.Y36(N.ux),t.Y36(m.QS))},ft.\u0275cmp=t.Xpm({type:ft,selectors:[["app-owners-dialog"]],decls:242,vars:156,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content",""],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],[1,"w-50"],["matInput","","formControlName","OWNFirstName","required",""],[1,"w-45"],["matInput","","formControlName","OWNLastName","required",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","OWNGender",1,"w-100"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],[1,"w-100"],["matInput","","formControlName","OWNBirthDate",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["formControlName","OWNSelfType","id","selftypeOpSel",3,"placeholder"],[3,"value"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","OWNPic","name","ownPic","id","OwnerPicupload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","work",3,"label"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["formControlName","OWNNationalIDType","id","idTypeOpSel",3,"placeholder"],["matInput","","formControlName","OWNNationalID"],["matInput","","formControlName","OWNNationalIDStartDate",3,"matDatepicker"],["idstartdate",""],["matInput","","formControlName","OWNNationalIDEndDate",3,"matDatepicker"],["idenddate",""],["formControlName","OWNIDPic","name","OWNIDPic","id","OwnerIDPicupload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","contacts",3,"label"],["fxFlex","100","fxFlex.gt-sm","29.9",1,"px-1"],["matInput","","formControlName","username","required","",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","69.8",1,"px-1"],["matInput","","formControlName","OWNEmail","required",""],["class","w-100",4,"ngIf"],["matInput","","formControlName","OWNMobile"],["matInput","","formControlName","OWNMobileWhatsapp"],["matInput","","formControlName","OWNHomePhone"],["matInput","","formControlName","OWNWorkPhone"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","OWNAddress","rows","2"],["matInput","","formControlName","OWNAddressDescription","rows","3"],["formGroupName","settings",3,"label"],["formControlName","OWNActive"],["matInput","","formControlName","OWNTaxNumber"],["matInput","","formControlName","OWNCommercialRegister"],["matInput","","formControlName","OWNBankName"],["matInput","","formControlName","OWNBankAccountNumber"],["matInput","","formControlName","OWNBankAccountOwnerName"],["matInput","","formControlName","OWNLastInvoiceCode"],["matInput","","formControlName","OWNInvoiceMask"],["matInput","","formControlName","OWNInvoiceNumberLength"],["formControlName","OWNLogoPic","name","OWNLogoPic","id","OwnerLogoupload","type","file","accept","image/*",1,"user-img",3,"change"],["width","150","height","150",3,"src"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["matInput","","formControlName","OWNPassword","minlength","6",3,"placeholder","type"],["matSuffix","",3,"click"],["matInput","","formControlName","confirmPassword",3,"placeholder","type"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1",0),t.YNc(1,Ki,3,3,"span",1),t.YNc(2,Vi,3,3,"span",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",2)(6,"form",3)(7,"mat-tab-group",4)(8,"mat-tab",5),t.ALo(9,"translate"),t.TgZ(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label")(14,"mat-icon"),t._uU(15,"person"),t.qZA(),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",9),t.YNc(19,Hi,2,0,"mat-error",1),t.qZA(),t.TgZ(20,"mat-form-field",10)(21,"mat-label")(22,"mat-icon"),t._uU(23,"person"),t.qZA(),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",11),t.YNc(27,Wi,2,0,"mat-error",1),t.qZA()(),t.TgZ(28,"div",7)(29,"div",12)(30,"mat-radio-group",13)(31,"mat-radio-button",14),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"mat-radio-button",15),t._uU(35),t.ALo(36,"translate"),t.qZA()()(),t.TgZ(37,"div",12)(38,"mat-form-field",16)(39,"mat-label"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"input",17)(43,"mat-datepicker-toggle",18)(44,"mat-datepicker",null,19),t.qZA()(),t.TgZ(46,"div",12)(47,"mat-form-field",16)(48,"mat-label"),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"mat-select",20),t.ALo(52,"translate"),t.TgZ(53,"mat-option",21),t._uU(54,"-"),t.qZA(),t.TgZ(55,"mat-option",21),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"mat-option",21),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"mat-option",21),t._uU(62),t.ALo(63,"translate"),t.qZA()()()()(),t.TgZ(64,"div",22),t._UZ(65,"img",23),t.TgZ(66,"input",24),t.NdJ("change",function(l){return i.handelOwnerImgInput(l.target.files)}),t.qZA()()()(),t.TgZ(67,"mat-tab",25),t.ALo(68,"translate"),t.TgZ(69,"div",6)(70,"div",7)(71,"div",26)(72,"mat-form-field",16)(73,"mat-label"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"mat-select",27),t.ALo(77,"translate"),t.TgZ(78,"mat-option",21),t._uU(79,"-"),t.qZA(),t.TgZ(80,"mat-option",21),t._uU(81),t.ALo(82,"translate"),t.qZA(),t.TgZ(83,"mat-option",21),t._uU(84),t.ALo(85,"translate"),t.qZA(),t.TgZ(86,"mat-option",21),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.TgZ(89,"mat-option",21),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"mat-option",21),t._uU(93),t.ALo(94,"translate"),t.qZA()()()(),t.TgZ(95,"div",26)(96,"mat-form-field",16)(97,"mat-label"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t._UZ(100,"input",28),t.qZA()()(),t.TgZ(101,"div",7)(102,"div",26)(103,"mat-form-field",16)(104,"mat-label"),t._uU(105),t.ALo(106,"translate"),t.qZA(),t._UZ(107,"input",29)(108,"mat-datepicker-toggle",18)(109,"mat-datepicker",null,30),t.qZA()(),t.TgZ(111,"div",26)(112,"mat-form-field",16)(113,"mat-label"),t._uU(114),t.ALo(115,"translate"),t.qZA(),t._UZ(116,"input",31)(117,"mat-datepicker-toggle",18)(118,"mat-datepicker",null,32),t.qZA()()(),t.TgZ(120,"div",22),t._UZ(121,"img",23),t.TgZ(122,"input",33),t.NdJ("change",function(l){return i.handelOwnerIDImgInput(l.target.files)}),t.qZA()()()(),t.TgZ(123,"mat-tab",34),t.ALo(124,"translate"),t.TgZ(125,"div",6)(126,"div",7)(127,"div",35)(128,"mat-form-field",16)(129,"mat-label"),t._uU(130),t.ALo(131,"translate"),t.qZA(),t._UZ(132,"input",36),t.ALo(133,"translate"),t.qZA()(),t.TgZ(134,"div",37)(135,"mat-form-field",16)(136,"mat-label"),t._uU(137),t.ALo(138,"translate"),t.qZA(),t._UZ(139,"input",38),t.qZA()()(),t.TgZ(140,"div",7)(141,"div",26),t.YNc(142,Ji,8,8,"mat-form-field",39),t.qZA(),t.TgZ(143,"div",26),t.YNc(144,Yi,8,8,"mat-form-field",39),t.qZA()(),t.TgZ(145,"div",7)(146,"div",26)(147,"mat-form-field",16)(148,"mat-label"),t._uU(149),t.ALo(150,"translate"),t.qZA(),t._UZ(151,"input",40),t.qZA()(),t.TgZ(152,"div",26)(153,"mat-form-field",16)(154,"mat-label"),t._uU(155),t.ALo(156,"translate"),t.qZA(),t._UZ(157,"input",41),t.qZA()()(),t.TgZ(158,"div",7)(159,"div",26)(160,"mat-form-field",16)(161,"mat-label"),t._uU(162),t.ALo(163,"translate"),t.qZA(),t._UZ(164,"input",42),t.qZA()(),t.TgZ(165,"div",26)(166,"mat-form-field",16)(167,"mat-label"),t._uU(168),t.ALo(169,"translate"),t.qZA(),t._UZ(170,"input",43),t.qZA()()(),t.TgZ(171,"div",44)(172,"mat-form-field",16)(173,"mat-label"),t._uU(174),t.ALo(175,"translate"),t.qZA(),t._UZ(176,"textarea",45),t.qZA()(),t.TgZ(177,"div",44)(178,"mat-form-field",16)(179,"mat-label"),t._uU(180),t.ALo(181,"translate"),t.qZA(),t._UZ(182,"textarea",46),t.qZA()()()(),t.TgZ(183,"mat-tab",47),t.ALo(184,"translate"),t.TgZ(185,"div",6)(186,"mat-checkbox",48),t._uU(187,"Active"),t.qZA()(),t.TgZ(188,"div",6)(189,"div",7)(190,"mat-form-field",8)(191,"mat-label"),t._uU(192),t.ALo(193,"translate"),t.qZA(),t._UZ(194,"input",49),t.qZA(),t.TgZ(195,"mat-form-field",10)(196,"mat-label"),t._uU(197),t.ALo(198,"translate"),t.qZA(),t._UZ(199,"input",50),t.qZA()(),t.TgZ(200,"div",7)(201,"mat-form-field",8)(202,"mat-label"),t._uU(203),t.ALo(204,"translate"),t.qZA(),t._UZ(205,"input",51),t.qZA(),t.TgZ(206,"mat-form-field",10)(207,"mat-label"),t._uU(208),t.ALo(209,"translate"),t.qZA(),t._UZ(210,"input",52),t.qZA()(),t.TgZ(211,"div",7)(212,"mat-form-field",8)(213,"mat-label"),t._uU(214),t.ALo(215,"translate"),t.qZA(),t._UZ(216,"input",53),t.qZA(),t.TgZ(217,"mat-form-field",10)(218,"mat-label"),t._uU(219),t.ALo(220,"translate"),t.qZA(),t._UZ(221,"input",54),t.qZA()(),t.TgZ(222,"div",7)(223,"mat-form-field",8)(224,"mat-label"),t._uU(225),t.ALo(226,"translate"),t.qZA(),t._UZ(227,"input",55),t.qZA(),t.TgZ(228,"mat-form-field",10)(229,"mat-label"),t._uU(230),t.ALo(231,"translate"),t.qZA(),t._UZ(232,"input",56),t.qZA()(),t.TgZ(233,"div",22)(234,"input",57),t.NdJ("change",function(l){return i.handelOwnerLogo(l.target.files)}),t.qZA(),t._UZ(235,"img",58),t.qZA()()()()()(),t.TgZ(236,"div",59)(237,"div",7),t.YNc(238,ji,3,4,"button",60),t.TgZ(239,"button",61),t.NdJ("click",function(){return i.close()}),t._uU(240),t.ALo(241,"translate"),t.qZA()()()),2&e){const a=t.MAs(45),l=t.MAs(110),u=t.MAs(119);t.xp6(1),t.Q6J("ngIf",!i.oneowner.id),t.xp6(1),t.Q6J("ngIf",i.oneowner.id),t.xp6(1),t.hij(" ",t.lcZ(4,70,"HTML.OWNER"),""),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(9,72,"HTML.TAB_BASIC")),t.xp6(8),t.hij(" ",t.lcZ(17,74,"HTML.FIRST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.OWNFirstName.errors?null:i.form.controls.OWNFirstName.errors.required),t.xp6(5),t.hij(" ",t.lcZ(25,76,"HTML.LAST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.OWNLastName.errors?null:i.form.controls.OWNLastName.errors.required),t.xp6(5),t.Oqu(t.lcZ(33,78,"HTML.MALE")),t.xp6(3),t.Oqu(t.lcZ(36,80,"HTML.FEMALE")),t.xp6(5),t.Oqu(t.lcZ(41,82,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(6),t.Oqu(t.lcZ(50,84,"HTML.OWNER_SelfType")),t.xp6(2),t.s9C("placeholder",t.lcZ(52,86,"HTML.OWNER_SelfType")),t.xp6(4),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(57,88,"OPTIONS.Person")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(60,90,"OPTIONS.Company")),t.xp6(2),t.Q6J("value","O"),t.xp6(1),t.Oqu(t.lcZ(63,92,"OPTIONS.OTHER")),t.xp6(3),t.Q6J("src",i.defaultOwnerImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(68,94,"HTML.TAB_ID")),t.xp6(7),t.Oqu(t.lcZ(75,96,"HTML.IDTYPE")),t.xp6(2),t.s9C("placeholder",t.lcZ(77,98,"HTML.IDTYPE")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(82,100,"OPTIONS.NATIONAL_ID")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(85,102,"OPTIONS.FOREIGN_ID")),t.xp6(2),t.Q6J("value","K"),t.xp6(1),t.Oqu(t.lcZ(88,104,"OPTIONS.GULF_ID")),t.xp6(2),t.Q6J("value","S"),t.xp6(1),t.Oqu(t.lcZ(91,106,"OPTIONS.SPECIAL_EQAMA")),t.xp6(2),t.Q6J("value","O"),t.xp6(1),t.Oqu(t.lcZ(94,108,"OPTIONS.OTHER")),t.xp6(5),t.Oqu(t.lcZ(99,110,"HTML.IDNUMBER")),t.xp6(7),t.Oqu(t.lcZ(106,112,"HTML.START_DATE")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(6),t.Oqu(t.lcZ(115,114,"HTML.END_DATE")),t.xp6(2),t.Q6J("matDatepicker",u),t.xp6(1),t.Q6J("for",u),t.xp6(4),t.Q6J("src",i.defaultOwnerIDImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(124,116,"HTML.TAB_CONTACTS")),t.xp6(7),t.Oqu(t.lcZ(131,118,"HTML.USERNAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(133,120,"HTML.USERNAME")),t.xp6(5),t.Oqu(t.lcZ(138,122,"HTML.EMAIL")),t.xp6(5),t.Q6J("ngIf",!i.oneowner.id),t.xp6(2),t.Q6J("ngIf",!i.oneowner.id),t.xp6(5),t.Oqu(t.lcZ(150,124,"HTML.MOBILE")),t.xp6(6),t.Oqu(t.lcZ(156,126,"HTML.WHATSAPP")),t.xp6(7),t.Oqu(t.lcZ(163,128,"HTML.HOME_PHONE")),t.xp6(6),t.Oqu(t.lcZ(169,130,"HTML.WORK_PHONE")),t.xp6(6),t.Oqu(t.lcZ(175,132,"HTML.ADDRESS")),t.xp6(6),t.Oqu(t.lcZ(181,134,"HTML.ADDRESS_DESC")),t.xp6(3),t.s9C("label",t.lcZ(184,136,"HTML.TAB_SETTINGS")),t.xp6(9),t.Oqu(t.lcZ(193,138,"HTML.TaxNumber")),t.xp6(5),t.Oqu(t.lcZ(198,140,"HTML.CommercialRegister")),t.xp6(6),t.Oqu(t.lcZ(204,142,"HTML.BankName")),t.xp6(5),t.Oqu(t.lcZ(209,144,"HTML.AccountNumber")),t.xp6(6),t.Oqu(t.lcZ(215,146,"HTML.AccountOwnerName")),t.xp6(5),t.Oqu(t.lcZ(220,148,"HTML.InvoiceLastCode")),t.xp6(6),t.Oqu(t.lcZ(226,150,"HTML.InvoiceMask")),t.xp6(5),t.Oqu(t.lcZ(231,152,"HTML.InvoiceCodeLength")),t.xp6(5),t.Q6J("src",i.sanitize(i.filePreview),t.LSH),t.xp6(3),t.Q6J("ngIf",i.oneowner.id&&i.can("change_propertyowner")||!i.oneowner.id&&i.can("add_propertyowner")),t.xp6(2),t.Oqu(t.lcZ(241,154,"BTN.CANCEL"))}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.wO,_.O5,m.sg,m.u,m.x0,T.xw,T.Wh,T.yH,K.ey,C.lW,oe.oG,W.Mq,W.hl,W.nW,x.ZT,x.uh,x.xY,x.H8,z.Hw,A.Nt,v.KE,v.hX,v.TO,v.R9,Wt.VQ,Wt.U0,S.gD,At.uX,At.SP,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:600px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});var $i=f(4870);function zi(r,e){if(1&r&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function Xi(r,e){if(1&r&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&r){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function tn(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&r){const i=t.oxw();t.Q6J("disabled",!i.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function en(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw();return t.KtG(u.remove(l.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&r&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function nn(r,e){if(1&r&&(t.TgZ(0,"div",20)(1,"div",21),t._uU(2),t.qZA(),t.TgZ(3,"div",21),t._uU(4),t.qZA(),t.TgZ(5,"div",21)(6,"div",22),t.YNc(7,en,4,3,"button",23),t.qZA()()()),2&r){const i=e.$implicit,a=t.oxw();t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.hij("",i.build_Name," "),t.xp6(3),t.Q6J("ngIf",a.can("delete_owner_security_onebuilding"))}}class Mt{constructor(e,i,a,l,u,b,Z,M,P){this.dialogRef=e,this.oneowner=i,this.atlasService=a,this.unitsService=l,this.translateService=u,this.localStore=b,this.dialog=Z,this.snackBar=M,this.fb=P,this.passwordHide=!0,this.curCOMId=O.N.comid,this.userPerm=[],this.AllBranches=[],this.AllBuilding=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({branch_KeyField:[null,m.kI.required],build_KeyField:[null,m.kI.required]}),this.Builds=new $i.x,this.curPeriority=0,this.action="Patch",this.getAllBranches(this.curCOMId,this.curPeriority),this.getOwnerBuilds(),this.prepareMsgLanguage()}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getOwnerBuilds(){this.empBuildings=null,this.unitsService.getAllBuildingForOwner(this.curCOMId,this.curPeriority,this.oneowner.id).subscribe(e=>this.empBuildings=e)}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(a=>{this.AllBranches=a},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.curPeriority,e.value)}getBuildingPerBranch(e,i,a){null==a?(console.log("-----related:: "+a),this.AllBuilding=[]):this.unitsService.getBuildingsPerBranch(e,i,a).subscribe(l=>{this.AllBuilding=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapFormValue_toTable(){this.Builds.owner_KeyField=this.oneowner.id,this.Builds.build_KeyField=this.dataForm.value.build_KeyField,this.Builds.branch_KeyField=this.dataForm.value.branch_KeyField}onSave(){this.mapFormValue_toTable(),this.unitsService.addBuildForOwner(this.Builds).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerBuilds()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(e){this.dialog.open(rt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(a=>{a&&this.unitsService.deleteBuildingForOwner(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerBuilds()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}Mt.\u0275fac=function(e){return new(e||Mt)(t.Y36(x.so),t.Y36(x.WI),t.Y36(D.Z),t.Y36(J.X),t.Y36(w.sK),t.Y36(p.C),t.Y36(x.uw),t.Y36(N.ux),t.Y36(m.QS))},Mt.\u0275cmp=t.Xpm({type:Mt,selectors:[["app-owners-builds-dialog"]],decls:51,vars:29,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","build_KeyField","id","build_OneOpSel",3,"placeholder"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",6),t.NdJ("selectionChange",function(l){return i.getBuildings(l)}),t.ALo(10,"translate"),t.TgZ(11,"mat-option",7),t._uU(12,"-"),t.qZA(),t.YNc(13,zi,2,2,"mat-option",8),t.qZA()()(),t.TgZ(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"mat-select",9),t.ALo(20,"translate"),t.TgZ(21,"mat-option",7),t._uU(22,"-"),t.qZA(),t.YNc(23,Xi,2,2,"mat-option",8),t.qZA()()()()()(),t.TgZ(24,"div",10)(25,"div",3),t.YNc(26,tn,4,4,"button",11),t.TgZ(27,"button",12),t.NdJ("click",function(){return i.close()}),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t._UZ(30,"mat-divider"),t.TgZ(31,"div",13)(32,"mat-dialog-content")(33,"mat-card")(34,"div",14)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"mat-divider"),t.TgZ(39,"div",15)(40,"div",16)(41,"div",17)(42,"h2"),t._uU(43),t.ALo(44,"translate"),t.qZA()(),t.TgZ(45,"div",17)(46,"h2"),t._uU(47),t.ALo(48,"translate"),t.qZA()(),t._UZ(49,"div",17),t.qZA(),t.YNc(50,nn,8,3,"div",18),t.qZA()()()()()),2&e&&(t.Q6J("formGroup",i.dataForm),t.xp6(7),t.hij(" ",t.lcZ(8,13,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(10,15,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.hij(" ",t.lcZ(18,17,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(20,19,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuilding),t.xp6(3),t.Q6J("ngIf",i.can("add_owner_security_onebuilding")),t.xp6(2),t.Oqu(t.lcZ(29,21,"BTN.CANCEL")),t.xp6(8),t.Oqu(t.lcZ(37,23,"HTML.OwnerBuilding")),t.xp6(7),t.hij(" ",t.lcZ(44,25,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(48,27,"HTML.BUILDING")," "),t.xp6(3),t.Q6J("ngForOf",i.empBuildings))},dependencies:[m._Y,m.JJ,m.JL,_.sg,_.O5,m.sg,m.u,T.xw,T.Wh,T.yH,K.ey,C.lW,C.nh,H.a8,x.xY,x.H8,z.Hw,v.KE,v.hX,tt.d,S.gD,pt.gM,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});var on=f(3221),re=f(8255),an=f(455);function rn(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"mat-button-toggle",16),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.openOwnerDialog(null))}),t.TgZ(1,"mat-icon"),t._uU(2,"person_add"),t.qZA()()}}function sn(r,e){if(1&r&&(t.TgZ(0,"h3",39),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.AsE("",i.OWNFirstName," ",i.OWNLastName,"")}}function ln(r,e){1&r&&(t.TgZ(0,"h3",39),t._uU(1,"User blocked"),t.qZA())}function cn(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.openOwnerDialog(l))}),t.TgZ(1,"mat-icon"),t._uU(2,"mode_edit"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&r&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.VIEW")))}function un(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.deleteOwner(l))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&r&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.REMOVE")))}function dn(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.changePassword(l))}),t.TgZ(1,"mat-icon"),t._uU(2,"key"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&r&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.PasswordChange")))}function mn(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.openBuildingDialog(l))}),t.TgZ(1,"mat-icon"),t._uU(2,"business"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&r&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Building")))}function pn(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.openUserPermission(l.Userid))}),t.TgZ(1,"mat-icon"),t._uU(2,"security"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&r&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Security")))}function hn(r,e){if(1&r&&t._UZ(0,"img",41),2&r){const i=t.oxw().$implicit;t.ekj("blocked",1==i.RowDelete),t.Q6J("src",i.OWNPic,t.LSH)}}function gn(r,e){if(1&r&&t._UZ(0,"img",42),2&r){const i=t.oxw().$implicit;t.ekj("blocked",1==i.RowDelete)}}function fn(r,e){1&r&&(t.TgZ(0,"mat-icon",43),t._uU(1,"block"),t.qZA())}function _n(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"div",19)(1,"mat-card")(2,"div",20),t.YNc(3,sn,2,2,"h3",21),t.YNc(4,ln,2,0,"h3",21),t.TgZ(5,"button",22,23)(7,"mat-icon"),t._uU(8,"more_vert"),t.qZA()()(),t.TgZ(9,"mat-menu",24,25)(11,"span",26),t.NdJ("mouseleave",function(){t.CHM(i);const l=t.MAs(6);return t.KtG(l.closeMenu())}),t.YNc(12,cn,6,3,"button",27),t.YNc(13,un,6,3,"button",27),t._UZ(14,"mat-divider"),t.YNc(15,dn,6,3,"button",27),t._UZ(16,"mat-divider"),t.YNc(17,mn,6,3,"button",27),t.YNc(18,pn,6,3,"button",27),t.qZA()(),t.TgZ(19,"div",28)(20,"div",29)(21,"div",30),t.YNc(22,hn,1,3,"img",31),t.YNc(23,gn,1,2,"img",32),t.YNc(24,fn,2,0,"mat-icon",33),t.qZA(),t.TgZ(25,"div",34)(26,"mat-slide-toggle",35),t.NdJ("change",function(){const u=t.CHM(i).$implicit;return t.KtG(u.RowDelete=!u.RowDelete)}),t.qZA()()(),t.TgZ(27,"div",36)(28,"p",37)(29,"mat-icon",38),t._uU(30,"contact_phone"),t.qZA(),t.TgZ(31,"span"),t._uU(32),t.qZA()(),t.TgZ(33,"p",37)(34,"mat-icon",38),t._uU(35,"chat"),t.qZA(),t.TgZ(36,"span"),t._uU(37),t.qZA()(),t.TgZ(38,"p",37)(39,"mat-icon",38),t._uU(40,"mail_outline"),t.qZA(),t.TgZ(41,"span"),t._uU(42),t.qZA()(),t.TgZ(43,"p",37)(44,"mat-icon",38),t._uU(45,"card_membership"),t.qZA(),t.TgZ(46,"span"),t._uU(47),t.qZA()(),t.TgZ(48,"p",37)(49,"mat-icon",38),t._uU(50,"location_on"),t.qZA(),t.TgZ(51,"span"),t._uU(52),t.qZA()()()()()()}if(2&r){const i=e.$implicit,a=t.MAs(10),l=t.oxw(2);t.xp6(3),t.Q6J("ngIf",0==i.RowDelete),t.xp6(1),t.Q6J("ngIf",1==i.RowDelete),t.xp6(1),t.Q6J("matMenuTriggerFor",a),t.xp6(7),t.Q6J("ngIf",l.can("view_oneowner")),t.xp6(1),t.Q6J("ngIf",l.can("delete_propertyowner")),t.xp6(2),t.Q6J("ngIf",l.can("change_owner_password")),t.xp6(2),t.Q6J("ngIf",l.can("view_owner_securitybuildings")),t.xp6(1),t.Q6J("ngIf",l.can("view_emp_securitypermissions")),t.xp6(4),t.Q6J("ngIf",i.OWNPic),t.xp6(1),t.Q6J("ngIf",!i.OWNPic),t.xp6(1),t.Q6J("ngIf",1==i.RowDelete),t.xp6(2),t.Q6J("checked",1==i.RowDelete),t.xp6(1),t.ekj("blocked",1==i.RowDelete),t.xp6(5),t.Oqu(i.OWNMobile),t.xp6(5),t.Oqu(i.OWNMobileWhatsapp),t.xp6(5),t.Oqu(i.OWNEmail),t.xp6(5),t.Oqu(i.OWNSelfTypeDisplay),t.xp6(5),t.Oqu(i.OWNAddress)}}const fe=function(r,e){return{itemsPerPage:r,currentPage:e}};function Cn(r,e){if(1&r&&(t.TgZ(0,"div",17),t.YNc(1,_n,53,19,"div",18),t.ALo(2,"paginate"),t.ALo(3,"OwnerSearchPipe"),t.qZA()),2&r){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.xi3(3,4,i.owners,i.searchText),t.WLB(7,fe,i.count,i.page)))}}function Tn(r,e){if(1&r&&(t.TgZ(0,"h3",39),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.AsE("",i.OWNFirstName," ",i.OWNLastName,"")}}function bn(r,e){1&r&&(t.TgZ(0,"h3",39),t._uU(1,"User blocked"),t.qZA())}function vn(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.openOwnerDialog(l))}),t.TgZ(1,"mat-icon"),t._uU(2,"mode_edit"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&r&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.VIEW")))}function xn(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.deleteOwner(l))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&r&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.REMOVE")))}function An(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.openBuildingDialog(l))}),t.TgZ(1,"mat-icon"),t._uU(2,"business"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&r&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Building")))}function yn(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.openUserPermission(l.Userid))}),t.TgZ(1,"mat-icon"),t._uU(2,"security"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&r&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Security")))}function Zn(r,e){if(1&r&&t._UZ(0,"img",41),2&r){const i=t.oxw().$implicit;t.ekj("blocked",1==i.RowDelete),t.Q6J("src",i.OWNPic,t.LSH)}}function wn(r,e){if(1&r&&t._UZ(0,"img",52),2&r){const i=t.oxw().$implicit;t.ekj("blocked",1==i.RowDelete)}}function On(r,e){1&r&&(t.TgZ(0,"mat-icon",43),t._uU(1,"block"),t.qZA())}function Nn(r,e){1&r&&(t.TgZ(0,"mat-icon",38),t._uU(1,"person_outline"),t.qZA())}function Dn(r,e){1&r&&(t.TgZ(0,"mat-icon",38),t._uU(1,"person"),t.qZA())}function Un(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"div",45)(1,"mat-card")(2,"div",20),t.YNc(3,Tn,2,2,"h3",21),t.YNc(4,bn,2,0,"h3",21),t.TgZ(5,"button",22,23)(7,"mat-icon"),t._uU(8,"more_vert"),t.qZA()()(),t.TgZ(9,"mat-menu",24,25)(11,"span",26),t.NdJ("mouseleave",function(){t.CHM(i);const l=t.MAs(6);return t.KtG(l.closeMenu())}),t.YNc(12,vn,6,3,"button",27),t.YNc(13,xn,6,3,"button",27),t._UZ(14,"mat-divider"),t.YNc(15,An,6,3,"button",27),t.YNc(16,yn,6,3,"button",27),t.qZA()(),t.TgZ(17,"div",28)(18,"div",46)(19,"div",30),t.YNc(20,Zn,1,3,"img",31),t.YNc(21,wn,1,2,"img",47),t.YNc(22,On,2,0,"mat-icon",33),t.qZA(),t.TgZ(23,"div",34)(24,"mat-slide-toggle",35),t.NdJ("change",function(){const u=t.CHM(i).$implicit;return t.KtG(u.RowDelete=!u.RowDelete)}),t.qZA()()(),t.TgZ(25,"div",48)(26,"div",49)(27,"p",37)(28,"mat-icon",38),t._uU(29,"chat-dots"),t.qZA(),t.TgZ(30,"span"),t._uU(31),t.qZA()()(),t.TgZ(32,"div",49)(33,"p",37)(34,"mat-icon",38),t._uU(35,"mail_outline"),t.qZA(),t.TgZ(36,"span"),t._uU(37),t.qZA()(),t.TgZ(38,"p",37)(39,"mat-icon",38),t._uU(40,"contact_phone"),t.qZA(),t.TgZ(41,"span"),t._uU(42),t.qZA()(),t.TgZ(43,"p",37)(44,"mat-icon",38),t._uU(45,"location_on"),t.qZA(),t.TgZ(46,"span"),t._uU(47),t.qZA()()(),t.TgZ(48,"div",50)(49,"p",37)(50,"mat-icon",38),t._uU(51,"event_available"),t.qZA(),t.TgZ(52,"span"),t._uU(53),t.ALo(54,"date"),t.qZA()(),t.TgZ(55,"p",37),t.YNc(56,Nn,2,0,"mat-icon",51),t.YNc(57,Dn,2,0,"mat-icon",51),t.TgZ(58,"span"),t._uU(59),t.qZA()()()()()()()}if(2&r){const i=e.$implicit,a=t.MAs(10),l=t.oxw(2);t.xp6(3),t.Q6J("ngIf",0==i.RowDelete),t.xp6(1),t.Q6J("ngIf",1==i.RowDelete),t.xp6(1),t.Q6J("matMenuTriggerFor",a),t.xp6(7),t.Q6J("ngIf",l.can("view_oneowner")),t.xp6(1),t.Q6J("ngIf",l.can("delete_propertyowner")),t.xp6(2),t.Q6J("ngIf",l.can("view_owner_securitybuildings")),t.xp6(1),t.Q6J("ngIf",l.can("view_emp_securitypermissions")),t.xp6(4),t.Q6J("ngIf",i.OWNPic),t.xp6(1),t.Q6J("ngIf",!i.OWNPic),t.xp6(1),t.Q6J("ngIf",1==i.RowDelete),t.xp6(2),t.Q6J("checked",1==i.RowDelete),t.xp6(1),t.ekj("blocked",1==i.RowDelete),t.xp6(6),t.Oqu(i.OWNMobileWhatsapp),t.xp6(6),t.Oqu(i.OWNEmail),t.xp6(5),t.Oqu(i.OWNMobile),t.xp6(5),t.Oqu(i.OWNAddress),t.xp6(6),t.hij("Registration ",t.xi3(54,21,i.EntryDate,"dd MMMM, yyyy 'at' HH:mm"),""),t.xp6(3),t.Q6J("ngIf",1==i.RowDelete),t.xp6(1),t.Q6J("ngIf",0==i.RowDelete),t.xp6(2),t.Oqu(1==i.RowDelete?"Blocked":"Active")}}function Ln(r,e){if(1&r&&(t.TgZ(0,"div",17),t.YNc(1,Un,60,24,"div",44),t.ALo(2,"paginate"),t.ALo(3,"OwnerSearchPipe"),t.qZA()),2&r){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.xi3(3,4,i.owners,i.searchText),t.WLB(7,fe,i.count,i.page)))}}function In(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"div",17)(1,"div",45)(2,"mat-card",53)(3,"pagination-controls",54),t.NdJ("pageChange",function(l){t.CHM(i);const u=t.oxw();return t.KtG(u.onPageChanged(l))}),t.qZA()()()()}}function Sn(r,e){1&r&&(t.TgZ(0,"div",55),t._UZ(1,"mat-spinner",56),t.qZA())}class Et{constructor(e,i,a,l,u,b,Z){this.appSettings=e,this.dialog=i,this.router=a,this.global=l,this.localStore=u,this.translateService=b,this.contractService=Z,this.count=9,this.curCOMId=O.N.comid,this.account=new at.n,this.userPerm=[],this.ownersForDisplay={id:null,COMId:null,OWNCode:null,OWNName:null,OWNFirstName:null,OWNLastName:null,OWNGender:null,OWNGenderDisplay:null,OWNBirthDate:null,OWNNationalIDStartDate:null,OWNNationalIDEndDate:null,username:null,OWNPassword:null,OWNMobile:null,OWNMobileWhatsapp:null,OWNHomePhone:null,OWNWorkPhone:null,OWNEmail:null,OWNAddress:null,OWNAddressDescription:null,OWNNotes:null,OWNActive:null,OWNActiveDisplay:null,OWNPic:null,OWNIDPic:null,Related_OWNKeyField:null,Country_CTTKeyField:null,Governorate_CTTKeyField:null,OWNNationalIDType:null,OWNNationalIDTypeDisplay:null,OWNNationalID:null,City_CTTKeyField:null,Area_CTTKeyField:null,OWNLangtitude:null,OWNAltitude:null,OWNSelfType:null,OWNSelfTypeDisplay:null,OWNTaxNumber:null,OWNCommercialRegister:null,OWNBankName:null,OWNBankAccountNumber:null,OWNBankAccountOwnerName:null,OWNLogoPic:null,OWNLogoPicBase64:null,OWNLastInvoiceCode:null,OWNInvoiceMask:null,OWNInvoiceNumberLength:null,EntryDate:null,last_updated:null,EntryUser:null,RowConfirm:0,RowDelete:0,RowStatus:0},this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getOwners()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getOwners(){this.owners=null,this.curOwnerId=this.curUserData.owner_KeyField??0,this.curUserData.is_superuser?(console.log("-----SuperUser-----"),this.contractService.getAllOwners(this.curCOMId,this.account.periorty).subscribe(e=>{console.log(e),this.owners=e})):"T"==this.curUserData.is_owner?(console.log("-----Owner-----"),this.contractService.getOwnersPerParent(this.curCOMId,this.account.periorty,this.curOwnerId).subscribe(e=>{console.log(e),this.owners=e})):"T"==this.curUserData.is_employee&&(console.log("-----Employee-----"),console.log("this.curUserData[id]:: "+this.curUserData.id),this.contractService.getOwnersPerEmp(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(e=>{console.log(e),console.log("----After----"),this.owners=e}))}addOwner(e,i,a,l){this.contractService.addOwner(e,i,a,l).subscribe(u=>{this.contractService.addCustomUserFromOwner(u,i).subscribe(b=>{this.contractService.updateOwnerWithUserID(u.id,b.id).subscribe(Z=>{},Z=>{console.log("ERROR::--\x3e ",Z)})}),this.getOwners()})}updateOwner(e,i,a,l){console.log("====inside updateOwner====="),this.contractService.editOwner(e,i,a,l).subscribe(u=>{this.contractService.updateCustomUserFromOwner(u,i).subscribe(b=>{}),this.getOwners()})}changePassword(e){this.dialog.open(de.p,{data:{dataRow:e,curUserData:this.curUserData,userPerm:this.userPerm,pk:e.Userid},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(a=>{})}deleteOwner(e){this.dialog.open(rt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(a=>{a&&this.contractService.deleteOneOwner(e.id).subscribe(l=>this.getOwners())})}onPageChanged(e){this.page=e,this.getOwners(),window.scrollTo(0,0)}openOwnerDialog(e){this.dialog.open(ft,{data:e}).afterClosed().subscribe(a=>{"Cancel"==a.event||("Patch"==a.event?(this.mapFormvalue_to_OwnerClass(a.data,"Patch"),this.updateOwner(this.ownersForDisplay,a.ownPic,a.ownerIDPic,a.ownerLogo)):"Post"==a.event&&(this.mapFormvalue_to_OwnerClass(a.data,"Post"),this.addOwner(this.ownersForDisplay,a.ownPic,a.ownerIDPic,a.ownerLogo)))})}openBuildingDialog(e){this.dialog.open(Mt,{data:e,panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(a=>{})}openSecurityDialog(e){this.dialog.open(on.y,{data:e}).afterClosed().subscribe(a=>{})}openUserPermission(e){this.router.navigate(["/settings/permissions-all/"+e+"/"])}mapFormvalue_to_OwnerClass(e,i){console.log(e),console.log("=================formValue==========================");const a=new _.uU("en-GB").transform(e.OWNBirthDate,"dd/MM/yyyy"),l=new _.uU("en-GB").transform(e.work.OWNNationalIDStartDate,"dd/MM/yyyy"),u=new _.uU("en-GB").transform(e.work.OWNNationalIDEndDate,"dd/MM/yyyy");this.ownersForDisplay.id=e.id,this.ownersForDisplay.OWNFirstName=e.OWNFirstName,this.ownersForDisplay.OWNLastName=e.OWNLastName,this.ownersForDisplay.OWNGender=e.OWNGender,this.ownersForDisplay.OWNSelfType=e.OWNSelfType,null!=e.OWNBirthDate&&(this.ownersForDisplay.OWNBirthDate=a),null!=e.work.OWNNationalIDStartDate&&(this.ownersForDisplay.OWNNationalIDStartDate=l),null!=e.work.OWNNationalIDEndDate&&(this.ownersForDisplay.OWNNationalIDEndDate=u),this.ownersForDisplay.OWNNationalIDType=e.work.OWNNationalIDType,this.ownersForDisplay.OWNNationalID=e.work.OWNNationalID,this.ownersForDisplay.username=e.contacts.username,this.ownersForDisplay.OWNPassword=e.contacts.OWNPassword,this.ownersForDisplay.OWNEmail=e.contacts.OWNEmail,this.ownersForDisplay.OWNMobile=e.contacts.OWNMobile,this.ownersForDisplay.OWNMobileWhatsapp=e.contacts.OWNMobileWhatsapp,this.ownersForDisplay.OWNHomePhone=e.contacts.OWNHomePhone,this.ownersForDisplay.OWNWorkPhone=e.contacts.OWNWorkPhone,this.ownersForDisplay.OWNAddress=e.contacts.OWNAddress,this.ownersForDisplay.OWNAddressDescription=e.contacts.OWNAddressDescription,this.ownersForDisplay.OWNActive=e.settings.OWNActive,this.ownersForDisplay.OWNTaxNumber=e.settings.OWNTaxNumber,this.ownersForDisplay.OWNCommercialRegister=e.settings.OWNCommercialRegister,this.ownersForDisplay.OWNBankName=e.settings.OWNBankName,this.ownersForDisplay.OWNBankAccountNumber=e.settings.OWNBankAccountNumber,this.ownersForDisplay.OWNBankAccountOwnerName=e.settings.OWNBankAccountOwnerName,this.ownersForDisplay.OWNLogoPicBase64=e.settings.OWNLogoPicBase64,this.ownersForDisplay.OWNLastInvoiceCode=e.settings.OWNLastInvoiceCode,this.ownersForDisplay.OWNInvoiceMask=e.settings.OWNInvoiceMask,this.ownersForDisplay.OWNInvoiceNumberLength=e.settings.OWNInvoiceNumberLength}prepareMsgLanguage(){this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}Et.\u0275fac=function(e){return new(e||Et)(t.Y36(st.d),t.Y36(x.uw),t.Y36(V.F0),t.Y36(j.U),t.Y36(p.C),t.Y36(w.sK),t.Y36(g.W))},Et.\u0275cmp=t.Xpm({type:Et,selectors:[["app-owners-list"]],features:[t._Bn([g.W])],decls:25,vars:11,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","grid"],["viewType","matButtonToggleGroup"],["value","grid"],["value","list"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","33.3","fxFlex.md","50","class","p-2",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-md","33.3","fxFlex.md","50",1,"p-2"],["fxLayout","row","fxLayoutAlign","space-between center",1,"bg-primary"],["class","user-name",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["xPosition","before","overlapTrigger","true"],["menu","matMenu"],[3,"mouseleave"],["mat-menu-item","",3,"click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-around center",1,"user-content"],["fxFlex","30","fxLayout","column","fxLayoutAlign","center center"],[1,"user-img"],["class","transition-2",3,"src","blocked",4,"ngIf"],["src","assets/images/others/user.jpg","class","transition-2",3,"blocked",4,"ngIf"],["color","warn",4,"ngIf"],[1,"user-social"],["color","primary",3,"checked","change"],["fxFlex","70","fxLayout","column",1,"user-details","transition-2"],["fxLayout","row","fxLayoutAlign","start center"],[1,"text-muted"],[1,"user-name"],["mat-menu-item","",3,"click"],[1,"transition-2",3,"src"],["src","assets/images/others/user.jpg",1,"transition-2"],["color","warn"],["fxFlex","100","class","p-2",4,"ngFor","ngForOf"],["fxFlex","100",1,"p-2"],["fxFlex","20","fxFlex.xs","30","fxLayout","column","fxLayoutAlign","center center"],["src","assets/img/users/default-user.jpg","class","transition-2",3,"blocked",4,"ngIf"],["fxFlex","80","fxFlex.xs","70","fxLayout","row","fxLayout.xs","column",1,"user-details","transition-2"],["fxFlex","30","fxFlex.xs","100","fxLayout","column"],["fxFlex","40","fxFlex.xs","100","fxLayout","column"],["class","text-muted",4,"ngIf"],["src","assets/img/users/default-user.jpg",1,"transition-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),t.YNc(4,rn,3,0,"mat-button-toggle",4),t.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),t._uU(7,"search"),t.qZA()()()(),t.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),t.NdJ("ngModelChange",function(l){return i.searchText=l}),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),t._uU(17,"view_module"),t.qZA()(),t.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),t._uU(20,"view_list"),t.qZA()()()()(),t.YNc(21,Cn,4,10,"div",14),t.YNc(22,Ln,4,10,"div",14),t.YNc(23,In,4,0,"div",14),t.YNc(24,Sn,2,0,"div",15)),2&e){const a=t.MAs(3),l=t.MAs(14);t.xp6(4),t.Q6J("ngIf",i.can("add_propertyowner")),t.xp6(4),t.ekj("show","search"==a.value),t.xp6(2),t.s9C("placeholder",t.lcZ(11,9,"HTML.SEARCH_Owner")),t.Q6J("ngModel",i.searchText),t.xp6(11),t.Q6J("ngIf","grid"==l.value),t.xp6(1),t.Q6J("ngIf","list"==l.value),t.xp6(1),t.Q6J("ngIf",i.owners),t.xp6(1),t.Q6J("ngIf",!i.owners)}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.On,m.F,$.LS,_.sg,_.O5,T.xw,T.Wh,T.yH,C.RK,mt.A9,mt.Yi,H.a8,z.Hw,A.Nt,v.KE,tt.d,re.VK,re.OP,re.p6,Ot.Ou,an.Rr,$._s,Nt.sp,_.uU,w.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});class se{}var Fn=f(6381),Mn=f(8910);function En(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.saveEditDocData(l.tenantLeaveForDisplay.id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&r){const i=t.oxw();t.Q6J("mat-dialog-close",i.leaveData_Form.value)("disabled",!i.leaveData_Form.valid),t.xp6(1),t.Oqu(t.lcZ(2,3,"BTN.SAVE"))}}class Zt{constructor(e,i,a,l,u,b,Z,M,P,Y,et,Ct,Tt,le){this.transferService=e,this.dataService=i,this.activatedRoute=a,this.localStore=l,this._companyService=u,this.global=b,this.router=Z,this.snackBar=M,this.docsService=P,this.tenantsService=Y,this.contractService=et,this.translateService=Ct,this.fb=Tt,this._formBuilder=le,this.curCOMId=O.N.comid,this.account=new at.n,this.userPerm=[],this.curDocValue=0,this.curDocPayedValue=0}ngOnInit(){if(this.transferService.getMessage.subscribe(e=>{this.contract_KeyField=e.contract_KeyField,this.contEndDate=e.contenddate,this.contValue=e.contvalue,this.contInsurance=e.continsurance,this.leaveID=e.leaveid,this.branch_KeyField=e.branch_KeyField,this.owner_KeyField=e.owner_KeyField,this.build_KeyField=e.build_KeyField,this.unit_KeyField=e.unit_KeyField,this.customer_KeyField=e.customer_KeyField,this.customerName=e.cusName,this.contRemainingInstallments=e.remaining_Installments}),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.leaveData_Form=this.fb.group({id:null,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,customer_KeyField:null,TELCode:null,TELLastElectricityReading:null,TELCurrentElectricityReading:null,TELContractEndDate:null,TELLeaveDate:null,DaysDiff:{value:null,disabled:!0},contractValue:{value:null,disabled:!0},TELDeductionElectricValue:0,TELDeductionInstallmentValue:0,TELDeductionDamageValue:0,TELDeductionMonthlyExpensesValue:0,TELDeductionCutFromAdditionValue:0,TELDeductionOtherValue:0,TELDeductionTotalValue:0,TELAdditionInsuranceValue:0,TELAdditionCutFromRentValue:0,TELAdditionOtherValue:0,TELAdditionTotalValue:0,TELNotes:null,netTotalDiff:{value:0,disabled:!0}}),this.sub=this.activatedRoute.params.subscribe(e=>{null==e.id?(console.log("----NULL--------------\x3e>>>"),this.tenantLeaveForDisplay=new se,this.leaveData_Form.patchValue({contract_KeyField:this.contract_KeyField,TELContractEndDate:this.contEndDate,TELAdditionInsuranceValue:this.contInsurance,TELAdditionTotalValue:this.contInsurance,TELNotes:"",branch_KeyField:this.branch_KeyField,owner_KeyField:this.owner_KeyField,build_KeyField:this.build_KeyField,unit_KeyField:this.unit_KeyField,customer_KeyField:this.customer_KeyField,contractValue:this.contValue,TELDeductionInstallmentValue:this.contRemainingInstallments,TELDeductionTotalValue:this.contRemainingInstallments,netTotalDiff:this.contInsurance-this.contRemainingInstallments})):e.id?(console.log("---param:: "+e.id),this.id=+e.id,this.getLeaveDataById(this.id)):(console.log("----Empty----"),this.tenantLeaveForDisplay=new se)})}else this.router.navigate(["/sign-in"])}onChangeLeaveDate(e){this.calcDays(e.value,this.leaveData_Form.value.TELContractEndDate),this.leaveData_Form.get("TELLeaveDate").patchValue(e.value)}calcDays(e,i){var a=this.calculateDiff(e,i);console.log("---otherDays  "+a);let u=Math.round(this.contValue/365*a*100)/100;null==u&&(u=0),this.leaveData_Form.patchValue({DaysDiff:a,TELAdditionCutFromRentValue:u}),this.calcAdditionTotal()}calculateDiff(e,i){let a=new Date(i);return e=new Date(e),Math.floor((Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())-Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))/864e5)}calcAdditionTotal(){let e=this.leaveData_Form.value.TELAdditionInsuranceValue,i=this.leaveData_Form.value.TELAdditionOtherValue,a=this.leaveData_Form.value.TELAdditionCutFromRentValue;null==e&&(e=0),null==i&&(i=0),null==a&&(a=0),this.leaveData_Form.patchValue({TELAdditionTotalValue:Math.round(100*(+e+ +i+ +a))/100}),this.calcNetTotal()}calcDeductionTotal(){let e=this.leaveData_Form.value.TELDeductionElectricValue,i=this.leaveData_Form.value.TELDeductionInstallmentValue,a=this.leaveData_Form.value.TELDeductionDamageValue,l=this.leaveData_Form.value.TELDeductionMonthlyExpensesValue,u=this.leaveData_Form.value.TELDeductionCutFromAdditionValue,b=this.leaveData_Form.value.TELDeductionOtherValue;null==e&&(e=0),null==i&&(i=0),null==a&&(a=0),null==l&&(l=0),null==u&&(u=0),null==b&&(b=0),this.leaveData_Form.patchValue({TELDeductionTotalValue:Math.round(100*(+e+ +i+ +a+ +l+ +u+ +b))/100}),this.calcNetTotal()}calcNetTotal(){let e=this.leaveData_Form.value.TELAdditionTotalValue,i=this.leaveData_Form.value.TELDeductionTotalValue;null==e&&(e=0),null==i&&(i=0),this.leaveData_Form.patchValue({netTotalDiff:Math.round(100*(+e-+i))/100})}readAddInsuranceValue(e){let i=e.target.value;if(i>0){let a=this.leaveData_Form.value.TELAdditionCutFromRentValue,l=this.leaveData_Form.value.TELAdditionOtherValue;null==a&&(a=0),null==l&&(l=0),this.leaveData_Form.patchValue({TELAdditionTotalValue:+i+ +a+ +l})}}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getLeaveDataById(e){console.log("---inside getLeaveDataById -----"),this.contractService.getLeaveData(e).subscribe(i=>{this.fillForm(i),this.tenantLeaveForDisplay=i},i=>{this.tenantLeaveForDisplay=new se,console.log("---getLeaveDataById  not found Leave data")})}fillForm(e){null!=e.TELContractEndDate&&(this.contra_endDate=e.TELContractEndDate),null!=e.TELLeaveDate&&(this.contra_leaveDate=e.TELLeaveDate),console.log("---11------"),this.calculateDiffDays=this.calculateDiff(e.TELLeaveDate,e.TELContractEndDate),console.log("---this.calculateDiffDays:: "+this.calculateDiffDays),this.leaveData_Form.patchValue({id:e.id,contract_KeyField:e.contract_KeyField,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,TELCode:e.TELCode,TELLastElectricityReading:e.TELLastElectricityReading,TELCurrentElectricityReading:e.TELCurrentElectricityReading,TELContractEndDate:e.TELContractEndDate,TELLeaveDate:e.TELLeaveDate,TELDeductionElectricValue:e.TELDeductionElectricValue,TELDeductionInstallmentValue:e.TELDeductionInstallmentValue,TELDeductionDamageValue:e.TELDeductionDamageValue,TELDeductionMonthlyExpensesValue:e.TELDeductionMonthlyExpensesValue,TELDeductionCutFromAdditionValue:e.TELDeductionCutFromAdditionValue,TELDeductionOtherValue:e.TELDeductionOtherValue,TELDeductionTotalValue:e.TELDeductionTotalValue,TELAdditionInsuranceValue:e.TELAdditionInsuranceValue,TELAdditionCutFromRentValue:e.TELAdditionCutFromRentValue,TELAdditionOtherValue:e.TELAdditionOtherValue,TELAdditionTotalValue:e.TELAdditionTotalValue,TELNotes:e.TELNotes,netTotalDiff:e.TELAdditionTotalValue-e.TELDeductionTotalValue,contractValue:this.contValue,DaysDiff:this.calculateDiffDays}),console.log("---22------")}mappingFormValue_ToPayDocClass(){const e=new _.uU("en-GB").transform(this.leaveData_Form.value.TELContractEndDate,"dd/MM/yyyy"),i=new _.uU("en-GB").transform(this.leaveData_Form.value.TELLeaveDate,"dd/MM/yyyy");this.tenantLeaveForDisplay.id=this.leaveData_Form.value.id,this.tenantLeaveForDisplay.contract_KeyField=this.leaveData_Form.value.contract_KeyField,this.tenantLeaveForDisplay.branch_KeyField=this.leaveData_Form.value.branch_KeyField,this.tenantLeaveForDisplay.owner_KeyField=this.leaveData_Form.value.owner_KeyField,this.tenantLeaveForDisplay.build_KeyField=this.leaveData_Form.value.build_KeyField,this.tenantLeaveForDisplay.unit_KeyField=this.leaveData_Form.value.unit_KeyField,this.tenantLeaveForDisplay.customer_KeyField=this.leaveData_Form.value.customer_KeyField,null!=this.leaveData_Form.value.TELContractEndDate&&(this.tenantLeaveForDisplay.TELContractEndDate=e),null!=this.leaveData_Form.value.TELLeaveDate&&(this.tenantLeaveForDisplay.TELLeaveDate=i),this.tenantLeaveForDisplay.TELCode=this.leaveData_Form.value.TELCode,this.tenantLeaveForDisplay.TELLastElectricityReading=this.leaveData_Form.value.TELLastElectricityReading,this.tenantLeaveForDisplay.TELCurrentElectricityReading=this.leaveData_Form.value.TELCurrentElectricityReading,this.tenantLeaveForDisplay.TELDeductionElectricValue=this.leaveData_Form.value.TELDeductionElectricValue,this.tenantLeaveForDisplay.TELDeductionInstallmentValue=this.leaveData_Form.value.TELDeductionInstallmentValue,this.tenantLeaveForDisplay.TELDeductionDamageValue=this.leaveData_Form.value.TELDeductionDamageValue,this.tenantLeaveForDisplay.TELDeductionMonthlyExpensesValue=this.leaveData_Form.value.TELDeductionMonthlyExpensesValue,this.tenantLeaveForDisplay.TELDeductionCutFromAdditionValue=this.leaveData_Form.value.TELDeductionCutFromAdditionValue,this.tenantLeaveForDisplay.TELDeductionOtherValue=this.leaveData_Form.value.TELDeductionOtherValue,this.tenantLeaveForDisplay.TELDeductionTotalValue=this.leaveData_Form.value.TELDeductionTotalValue,this.tenantLeaveForDisplay.TELAdditionInsuranceValue=this.leaveData_Form.value.TELAdditionInsuranceValue,this.tenantLeaveForDisplay.TELAdditionCutFromRentValue=this.leaveData_Form.value.TELAdditionCutFromRentValue,this.tenantLeaveForDisplay.TELAdditionOtherValue=this.leaveData_Form.value.TELAdditionOtherValue,this.tenantLeaveForDisplay.TELAdditionTotalValue=this.leaveData_Form.value.TELAdditionTotalValue,this.tenantLeaveForDisplay.TELNotes=this.leaveData_Form.value.TELNotes}saveEditDocData(e){this.mappingFormValue_ToPayDocClass(),e?this.contractService.editTenantLeave(this.tenantLeaveForDisplay).subscribe(i=>{let a={contract_KeyField:i.contract_KeyField,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,customer_KeyField:i.customer_KeyField,TSTCreditValue:i.TELAdditionTotalValue,TSTDebitValue:i.TELDeductionTotalValue,TSTDate:i.TELLeaveDate,TSTDescription:"\u0646\u062a\u064a\u062c\u0629 \u0645\u0633\u062a\u0646\u062f \u0627\u0644\u0625\u062e\u0644\u0627\u0621 \u0631\u0642\u0645 "+i.TELCode,TSTSubject:"LEAVE",TSTSubjectID:i.id};console.log("------Start to Deleted--------"),this.contractService.getStatementsIDPerSubjectID(this.curCOMId,this.account.periorty,"LEAVE",i.id).subscribe(l=>{this.stateID=l[0].id,console.log("this.stateID:: "+this.stateID),this.contractService.deleteStatement(this.stateID).subscribe(u=>{console.log("Statment Deleted"),this.contractService.addStatement(a).subscribe(b=>{console.log("Statment Added after deleted")})})}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):this.contractService.addTenantLeave(this.tenantLeaveForDisplay).subscribe(i=>{this.contractService.editContractWithDic({RCOTenantLeaveID:i.id,RCOContractStatus:"F"},i.contract_KeyField).subscribe(u=>{console.log("editContractWithDic Done")},u=>{console.log("editContractWithDic Error:: "+u)});let l={contract_KeyField:i.contract_KeyField,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,customer_KeyField:i.customer_KeyField,TSTCreditValue:i.TELAdditionTotalValue,TSTDebitValue:i.TELDeductionTotalValue,TSTDate:i.TELLeaveDate,TSTDescription:"\u0646\u062a\u064a\u062c\u0629 \u0645\u0633\u062a\u0646\u062f \u0627\u0644\u0625\u062e\u0644\u0627\u0621 \u0631\u0642\u0645 "+i.TELCode,TSTSubject:"LEAVE",TSTSubjectID:i.id};console.log("--tenantStatementData:: "+l),this.contractService.addStatement(l).subscribe(u=>{console.log("addStatement Done")},u=>{console.log("addStatement Error:: "+u)}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e})}}Zt.\u0275fac=function(e){return new(e||Zt)(t.Y36(ut.y),t.Y36(y.n),t.Y36(V.gz),t.Y36(p.C),t.Y36(Fn.J),t.Y36(j.U),t.Y36(V.F0),t.Y36(N.ux),t.Y36(Mn.c),t.Y36(E.v),t.Y36(g.W),t.Y36(w.sK),t.Y36(m.qu),t.Y36(m.qu))},Zt.\u0275cmp=t.Xpm({type:Zt,selectors:[["app-tenant-leave"]],decls:145,vars:71,consts:[[1,"p-2"],[1,"pt-3"],["autocomplete","off","fxLayout","row wrap",3,"formGroup"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","29.9",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","TELContractEndDate"],["matInput","","formControlName","TELLeaveDate",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["contractleaveDate",""],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["matInput","","formControlName","contractValue"],["fxFlex","100","fxFlex.gt-sm","19.8",1,"px-1"],["matInput","","formControlName","DaysDiff"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","TELLastElectricityReading"],["matInput","","formControlName","TELCurrentElectricityReading"],["fxFlex","100","fxFlex.gt-sm","40",1,"px-2"],["vertical","",2,"height","10px"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-1"],["matInput","","formControlName","TELAdditionInsuranceValue",3,"change"],["matInput","","formControlName","TELAdditionCutFromRentValue",3,"change"],["matInput","","formControlName","TELAdditionOtherValue",3,"change"],["matInput","","formControlName","TELAdditionTotalValue"],["fxFlex","100","fxFlex.gt-sm","10",1,"px-2"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-2"],["matInput","","formControlName","TELDeductionElectricValue",3,"change"],["matInput","","formControlName","TELDeductionInstallmentValue",3,"change"],["matInput","","formControlName","TELDeductionDamageValue",3,"change"],["matInput","","formControlName","TELDeductionMonthlyExpensesValue",3,"change"],["matInput","","formControlName","TELDeductionCutFromAdditionValue",3,"change"],["matInput","","formControlName","TELDeductionOtherValue",3,"change"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","TELDeductionTotalValue"],["fxFlex","100","fxFlex.gt-sm","24.9",1,"px-1"],["matInput","","formControlName","netTotalDiff"],["fxFlex","100","fxFlex.gt-sm","74.9",1,"px-1"],["matInput","","formControlName","TELNotes","rows","3"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"mat-card-content",1)(8,"form",2),t._UZ(9,"mat-label"),t.TgZ(10,"div",3)(11,"div",4)(12,"mat-form-field",5)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",6),t.qZA()(),t.TgZ(17,"div",4)(18,"mat-form-field",5)(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"input",7),t.NdJ("dateChange",function(l){return i.onChangeLeaveDate(l)}),t.qZA(),t._UZ(23,"mat-datepicker-toggle",8)(24,"mat-datepicker",null,9),t.qZA()(),t.TgZ(26,"div",10)(27,"mat-form-field",5)(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",11),t.qZA()(),t.TgZ(32,"div",12)(33,"mat-form-field",5)(34,"mat-label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",13),t.qZA()()(),t.TgZ(38,"div",3)(39,"div",14)(40,"mat-form-field",5)(41,"mat-label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",15),t.qZA()(),t.TgZ(45,"div",14)(46,"mat-form-field",5)(47,"mat-label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._UZ(50,"input",16),t.qZA()()(),t.TgZ(51,"div",17)(52,"p"),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"mat-divider",18),t.TgZ(56,"div",19)(57,"div",20)(58,"mat-form-field",5)(59,"mat-label"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"input",21),t.NdJ("change",function(){return i.calcAdditionTotal()}),t.qZA()()(),t.TgZ(63,"div",20)(64,"mat-form-field",5)(65,"mat-label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"input",22),t.NdJ("change",function(){return i.calcAdditionTotal()}),t.qZA()()(),t.TgZ(69,"div",20)(70,"mat-form-field",5)(71,"mat-label"),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"input",23),t.NdJ("change",function(){return i.calcAdditionTotal()}),t.qZA()()(),t.TgZ(75,"div",20)(76,"mat-form-field",5)(77,"mat-label"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t._UZ(80,"input",24),t.qZA()()()(),t._UZ(81,"div",25),t.TgZ(82,"div",26)(83,"p"),t._uU(84),t.ALo(85,"translate"),t.qZA(),t._UZ(86,"mat-divider",18),t.TgZ(87,"div",19)(88,"div",20)(89,"mat-form-field",5)(90,"mat-label"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t.TgZ(93,"input",27),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(94,"div",20)(95,"mat-form-field",5)(96,"mat-label"),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.TgZ(99,"input",28),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(100,"div",20)(101,"mat-form-field",5)(102,"mat-label"),t._uU(103),t.ALo(104,"translate"),t.qZA(),t.TgZ(105,"input",29),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(106,"div",20)(107,"mat-form-field",5)(108,"mat-label"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"input",30),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(112,"div",20)(113,"mat-form-field",5)(114,"mat-label"),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"input",31),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(118,"div",20)(119,"mat-form-field",5)(120,"mat-label"),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"input",32),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(124,"div",33)(125,"mat-form-field",5)(126,"mat-label"),t._uU(127),t.ALo(128,"translate"),t.qZA(),t._UZ(129,"input",34),t.qZA()()()(),t.TgZ(130,"div",3)(131,"div",35)(132,"mat-form-field",5)(133,"mat-label"),t._uU(134),t.ALo(135,"translate"),t.qZA(),t._UZ(136,"input",36),t.qZA()(),t.TgZ(137,"div",37)(138,"mat-form-field",5)(139,"mat-label"),t._uU(140),t.ALo(141,"translate"),t.qZA(),t._UZ(142,"textarea",38),t.qZA()()(),t.TgZ(143,"div",3),t.YNc(144,En,3,5,"button",39),t.qZA()()()()()),2&e){const a=t.MAs(25);t.xp6(5),t.AsE("",t.lcZ(6,27,"HTML.TenantLeave"),": ",i.customerName,""),t.xp6(3),t.Q6J("formGroup",i.leaveData_Form),t.xp6(6),t.hij(" ",t.lcZ(15,29,"HTML.ContractEndDate"),""),t.xp6(6),t.Oqu(t.lcZ(21,31,"HTML.ContractLeaveDate")),t.xp6(2),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(6),t.hij(" ",t.lcZ(30,33,"HTML.ContractValue"),""),t.xp6(6),t.hij(" ",t.lcZ(36,35,"HTML.DaysDiff"),""),t.xp6(7),t.hij(" ",t.lcZ(43,37,"HTML.LastElectricityReading"),""),t.xp6(6),t.hij(" ",t.lcZ(49,39,"HTML.ElectricCounterReading"),""),t.xp6(5),t.Oqu(t.lcZ(54,41,"HTML.Addition")),t.xp6(7),t.Oqu(t.lcZ(61,43,"HTML.AdditionInsuranceValue")),t.xp6(6),t.Oqu(t.lcZ(67,45,"HTML.AdditionCutFromRentValue")),t.xp6(6),t.Oqu(t.lcZ(73,47,"HTML.AdditionOtherValue")),t.xp6(6),t.Oqu(t.lcZ(79,49,"HTML.AdditionTotalValue")),t.xp6(6),t.Oqu(t.lcZ(85,51,"HTML.Deduction")),t.xp6(7),t.Oqu(t.lcZ(92,53,"HTML.DeductionElectricValue")),t.xp6(6),t.Oqu(t.lcZ(98,55,"HTML.DeductionInstallmentValue")),t.xp6(6),t.Oqu(t.lcZ(104,57,"HTML.DeductionDamageValue")),t.xp6(6),t.Oqu(t.lcZ(110,59,"HTML.DeductionMonthlyExpensesValue")),t.xp6(6),t.Oqu(t.lcZ(116,61,"HTML.DeductionCutFromAdditionValue")),t.xp6(6),t.Oqu(t.lcZ(122,63,"HTML.DeductionOtherValue")),t.xp6(6),t.Oqu(t.lcZ(128,65,"HTML.DeductionTotalValue")),t.xp6(7),t.hij(" ",t.lcZ(135,67,"HTML.NetValue"),""),t.xp6(6),t.Oqu(t.lcZ(141,69,"HTML.Notes")),t.xp6(4),t.Q6J("ngIf",i.can("doing_tenantleave"))}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,_.O5,m.sg,m.u,T.xw,T.Wh,T.yH,C.lW,H.a8,H.dn,H.dk,H.n5,W.Mq,W.hl,W.nW,x.ZT,A.Nt,v.KE,v.hX,v.R9,tt.d,w.X$]});var _t=f(3172),_e=f(100);const nt_TAG_1="01",nt_TAG_2="02",nt_TAG_3="03",nt_TAG_4="04",nt_TAG_5="05";class qt{constructor(e){this.invoiceService=e,this.formData={InvoiceID:1,NameOfSeller:"\u0627\u0644\u0645\u0628\u0631\u0645\u062c \u0627\u0644\u0639\u0631\u0628\u064a",VatRNumber:"3002011109990663",RealTime:qn(),InvoiceTWVat:"2300.00",VatTotal:"300.00"},this.allOfInvoice=[],this.finalCode=""}ngOnChanges(e){e.formData.currentValue&&(this.formData={InvoiceID:e.formData.currentValue.invid,NameOfSeller:e.formData.currentValue.sellerName,VatRNumber:e.formData.currentValue.vatRegNum,RealTime:e.formData.currentValue.time,InvoiceTWVat:e.formData.currentValue.totalWithVat,VatTotal:e.formData.currentValue.totalVat},this.generateQR(),console.log("-----changes[formData].currentValue.invid:: "+e.formData.currentValue.invid),console.log("----this.finalCode:: "+this.finalCode),this.invoiceService.editInvoice({INVQRString:this.finalCode},e.formData.currentValue.invid).subscribe(a=>{console.log("qrString Saved")},a=>{console.log("Error! qrString not Saved")}))}generateQR(){this.formData&&(function Pn(r,e){if(r.split("").every(i=>i.charCodeAt(0)<128)){let i=r.length.toString(16);i=1===i.length?nt_TAG_1+"0"+i:nt_TAG_1+i,e.push(i),e.push(_t.lW.from(r,"utf-8").toString("hex"))}else{let i=_t.lW.from(r,"utf-8"),a=i.length.toString(16);a=1===a.length?nt_TAG_1+"0"+a:nt_TAG_1+a,e.push(a),e.push(i.toString("hex"))}}(this.formData.NameOfSeller,this.allOfInvoice),function Rn(r,e){let i=r.length.toString(16);i=1===i.length?nt_TAG_2+"0"+i:nt_TAG_2+i,e.push(i),e.push(_t.lW.from(r,"utf-8").toString("hex"))}(this.formData.VatRNumber,this.allOfInvoice),function Bn(r,e){let i=r.length.toString(16);i=1===i.length?nt_TAG_3+"0"+i:nt_TAG_3+i,e.push(i),e.push(_t.lW.from(r,"utf-8").toString("hex"))}(this.formData.RealTime,this.allOfInvoice),function kn(r,e){let i=r.length.toString(16);i=1===i.length?nt_TAG_4+"0"+i:nt_TAG_4+i,e.push(i),e.push(_t.lW.from(r,"utf-8").toString("hex"))}(this.formData.InvoiceTWVat,this.allOfInvoice),function Kn(r,e){let i=r.length.toString(16);i=1===i.length?nt_TAG_5+"0"+i:nt_TAG_5+i,e.push(i),e.push(_t.lW.from(r,"utf-8").toString("hex"))}(this.formData.VatTotal,this.allOfInvoice),this.finalCode=_t.lW.from(this.allOfInvoice.join(""),"hex").toString("base64"))}}function qn(r=new Date){let e=String(r.getFullYear()),i=String(r.getMonth()+1),a=String(r.getDate()),l=String(r.getHours()),u=String(r.getMinutes()),b=String(r.getSeconds());return e.length<4&&(e="20"+e),i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),l.length<2&&(l="0"+l),u.length<2&&(u="0"+u),b.length<2&&(b="0"+b),`${e}-${i}-${a}T${l}:${u}:${b}Z`}function Vn(r,e){if(1&r&&(t.TgZ(0,"div")(1,"p",14),t._uU(2,"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u0644\u0633\u0644\u064a"),t.qZA(),t.TgZ(3,"p",15),t._uU(4),t.qZA()()),2&r){const i=t.oxw();t.xp6(4),t.Oqu(i.invoiceNumber)}}function Hn(r,e){if(1&r&&(t.TgZ(0,"td",21),t._UZ(1,"app-qrlevelone",47),t.qZA()),2&r){const i=t.oxw();t.xp6(1),t.Q6J("formData",i.formDataSent)}}function Wn(r,e){1&r&&(t.TgZ(0,"div",22)(1,"p",45),t._uU(2,"\u0645\u0644\u0627\u062d\u0638\u0629"),t.qZA(),t.TgZ(3,"p",48),t._uU(4,"\u062a\u0639\u062a\u0628\u0631 \u0647\u0630\u0647 \u0627\u0644\u0648\u0631\u0642\u0629 \u0645\u0637\u0627\u0644\u0628\u0629 \u0648\u0644\u0627 \u064a\u0639\u062a\u0645\u062f \u0628\u0647\u0627 \u0623\u0645\u0627\u0645 \u0627\u0644\u0632\u0643\u0627\u0629 \u0648\u0627\u0644\u062f\u062e\u0644 \u0623\u0648 \u0627\u064a\u0629 \u062c\u0647\u0629 \u062d\u0643\u0648\u0645\u064a\u0629 \u0627\u062e\u0631\u0649 \u0648\u0633\u064a\u062a\u0645 \u0625\u0635\u062f\u0627\u0631 \u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629 \u0628\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0633\u062a\u062d\u0642."),t.qZA(),t.TgZ(5,"p"),t._uU(6," .......... \u0648\u0644\u0643\u0645 \u062c\u0632\u064a \u0627\u0644\u0634\u0643\u0631 .........."),t.qZA()())}qt.\u0275fac=function(e){return new(e||qt)(t.Y36(me.q))},qt.\u0275cmp=t.Xpm({type:qt,selectors:[["app-qrlevelone"]],inputs:{formData:"formData"},features:[t.TTD],decls:1,vars:5,consts:[[3,"qrdata","width","errorCorrectionLevel","allowEmptyString"]],template:function(e,i){1&e&&t._UZ(0,"qrcode",0),2&e&&t.Q6J("qrdata",i.finalCode)("width",256)("errorCorrectionLevel","M")("width",130)("allowEmptyString",!0)},dependencies:[_e.V]});class Pt{constructor(e,i,a,l,u,b){this.transferService=e,this.appSettings=i,this.datePipe=a,this.http=l,this._sanitizer=u,this.settingService=b,this.getBase64StringFromDataURL=Z=>Z.replace("data:","").replace(/^.+,/,""),this.settings=this.appSettings.settings}ngOnInit(){this.transferService.getMessage.subscribe(u=>{this.invoiceID=u.invId,this.ownerid=u.ownerID,this.tenantid=u.tenantID,this.ownerTaxNumber=u.ownerTaxNumber,this.ownerName=u.ownerName,this.ownerCommRegister=u.ownerCommRegister,this.ownerAddress=u.ownerAddress,this.ownerBankName=u.ownerBankName,this.ownerBankAccountNumber=u.ownerBankAccountNumber,this.accountOwnerName=u.accountOwnerName,this.tenantAddress=u.tenantAddress,this.tenantName=u.tenantName,this.tenantTaxNumber=u.tenantTaxNumber,this.tenantCommRegister=u.tenantCommRegister,this.invoiceValue=u.invoiceValue,this.invoiceNumber=u.invoiceNumber,this.intervalStartDate=u.intervalStartDate,this.intervalEndDate=u.intervalEndDate,this.ownerLogo=u.ownerLogo,this.ownerLogoBase64=u.ownerLogoBase64,this.CusEInvType=u.customer_EInvoiceType,this.invType=u.invType,this.invDate=u.invDate,this.invDateString=u.invDateString,this.invFromDate=u.invFrom,this.invToDate=u.invTo,console.log("-*-*-*this.invType:: "+this.invType+"*-*-*-"),console.log("-*-*-*this.invoiceValue:: "+this.invoiceValue+"*-*-*-"),"S"==this.invType?"B"==this.CusEInvType?this.invTypeText="\u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629":"P"==this.CusEInvType&&(this.invTypeText="\u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629 \u0645\u0628\u0633\u0637\u0629"):"R"==this.invType&&(this.invTypeText="\u0645\u0637\u0627\u0644\u0628\u0640\u0629 \u0645\u0627\u0644\u064a\u0640\u0629")}),this.invoiceValue=parseFloat(this.invoiceValue).toFixed(2),this.taxValue=(.15*this.invoiceValue).toFixed(2),this.netValue=(1.15*this.invoiceValue).toFixed(2);var e=(new Date).setSeconds(0,0),i=new Date(e).toISOString(),a=new Date(this.invDate).setSeconds(0,0),l=new Date(a).toISOString();console.log("---dt:: "+i),console.log("---this.invDate:: "+this.invDate),console.log("---efgh:: "+l),this.curDateTime=i,this.curDate=new Date(this.invDate),this.curDate=this.datePipe.transform(this.curDate,"yyyy-MM-dd"),this.formDataSent={invid:this.invoiceID,sellerName:this.ownerName,vatRegNum:this.ownerTaxNumber,time:this.invDateString,totalWithVat:parseFloat(this.netValue).toFixed(2),totalVat:parseFloat(this.taxValue).toFixed(2)}}sanitize(e){return this._sanitizer.bypassSecurityTrustUrl(e)}testPDF(){}downloadPDF(){var e=document.getElementById("contentToConvert");he()(e,{scale:2}).then(i=>{var u=208*i.height/i.width;const Z=i.toDataURL("image/jpeg",.5),M=this.getBase64StringFromDataURL(Z);let P=new pe.kH("p","mm","a4");P.addImage(M,"PNG",0,0,208,u),P.save(this.curDateTime.toString()+".pdf")})}printinv(){let e,i;e=document.getElementById("contentToConvert").innerHTML,i=window.open("","_blank","top=0,left=0,height=100%,width=auto"),i.document.open(),i.document.write(`\n      <html>\n        <head>\n          <title>Print tab</title>\n          <style>          \n          // -----------------------------------------------------------------------\n          \n          *,\n          ::before,\n          ::after {\n            box-sizing: border-box;\n            /* 1 */\n            border-width: 0;\n            /* 2 */\n            border-style: solid;\n            /* 2 */\n            border-color: #e5e7eb;\n            /* 2 */\n          }\n          \n          ::before,\n          ::after {\n            --tw-content: '';\n          }\n          \n          html {\n            line-height: 1.5;\n            /* 1 */\n            -webkit-text-size-adjust: 100%;\n            /* 2 */\n            -moz-tab-size: 4;\n            /* 3 */\n            tab-size: 4;\n            /* 3 */\n            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n            /* 4 */\n            font-feature-settings: normal;\n            /* 5 */\n            font-variation-settings: normal;\n            /* 6 */\n          }\n          \n          body {\n            margin: 0;\n            /* 1 */\n            line-height: inherit;\n            /* 2 */\n          }\n          \n          /*\n          1. Add the correct height in Firefox.\n          2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n          3. Ensure horizontal rules are visible by default.\n          */\n          \n          hr {\n            height: 0;\n            /* 1 */\n            color: inherit;\n            /* 2 */\n            border-top-width: 1px;\n            /* 3 */\n          }\n          \n          /*\n          Add the correct text decoration in Chrome, Edge, and Safari.\n          */\n          \n          abbr:where([title]) {\n            -webkit-text-decoration: underline dotted;\n                    text-decoration: underline dotted;\n          }\n          \n          /*\n          Remove the default font size and weight for headings.\n          */\n          \n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6 {\n            font-size: inherit;\n            font-weight: inherit;\n          }\n          \n          /*\n          Reset links to optimize for opt-in styling instead of opt-out.\n          */\n          \n          a {\n            color: inherit;\n            text-decoration: inherit;\n          }\n          \n          /*\n          Add the correct font weight in Edge and Safari.\n          */\n          \n          b,\n          strong {\n            font-weight: bolder;\n          }\n          \n          code,\n          kbd,\n          samp,\n          pre {\n            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n            /* 1 */\n            font-size: 1em;\n            /* 2 */\n          }\n          \n          /*\n          Add the correct font size in all browsers.\n          */\n          \n          small {\n            font-size: 80%;\n          }\n          \n          sub,\n          sup {\n            font-size: 75%;\n            line-height: 0;\n            position: relative;\n            vertical-align: baseline;\n          }\n          \n          sub {\n            bottom: -0.25em;\n          }\n          \n          sup {\n            top: -0.5em;\n          }\n          \n          /*\n          1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n          2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n          3. Remove gaps between table borders by default.\n          */\n          \n          table {\n            text-indent: 0;\n            /* 1 */\n            border-color: inherit;\n            /* 2 */\n            border-collapse: collapse;\n            /* 3 */\n          }\n          \n          /*\n          1. Change the font styles in all browsers.\n          2. Remove the margin in Firefox and Safari.\n          3. Remove default padding in all browsers.\n          */\n          \n          button,\n          input,\n          optgroup,\n          select,\n          textarea {\n            font-family: inherit;\n            /* 1 */\n            font-feature-settings: inherit;\n            /* 1 */\n            font-variation-settings: inherit;\n            /* 1 */\n            font-size: 100%;\n            /* 1 */\n            font-weight: inherit;\n            /* 1 */\n            line-height: inherit;\n            /* 1 */\n            color: inherit;\n            /* 1 */\n            margin: 0;\n            /* 2 */\n            padding: 0;\n            /* 3 */\n          }\n          \n          /*\n          Remove the inheritance of text transform in Edge and Firefox.\n          */\n          \n          button,\n          select {\n            text-transform: none;\n          }\n          \n          /*\n          1. Correct the inability to style clickable types in iOS and Safari.\n          2. Remove default button styles.\n          */\n          \n          button,\n          [type='button'],\n          [type='reset'],\n          [type='submit'] {\n            -webkit-appearance: button;\n            /* 1 */\n            background-color: transparent;\n            /* 2 */\n            background-image: none;\n            /* 2 */\n          }\n          \n          /*\n          Use the modern Firefox focus style for all focusable elements.\n          */\n          \n          :-moz-focusring {\n            outline: auto;\n          }\n          \n          :-moz-ui-invalid {\n            box-shadow: none;\n          }\n          \n          /*\n          Add the correct vertical alignment in Chrome and Firefox.\n          */\n          \n          progress {\n            vertical-align: baseline;\n          }\n          \n          /*\n          Correct the cursor style of increment and decrement buttons in Safari.\n          */\n          \n          ::-webkit-inner-spin-button,\n          ::-webkit-outer-spin-button {\n            height: auto;\n          }\n          \n          /*\n          1. Correct the odd appearance in Chrome and Safari.\n          2. Correct the outline style in Safari.\n          */\n          \n          [type='search'] {\n            -webkit-appearance: textfield;\n            /* 1 */\n            outline-offset: -2px;\n            /* 2 */\n          }\n          \n          /*\n          Remove the inner padding in Chrome and Safari on macOS.\n          */\n          \n          ::-webkit-search-decoration {\n            -webkit-appearance: none;\n          }\n          \n          ::-webkit-file-upload-button {\n            -webkit-appearance: button;\n            /* 1 */\n            font: inherit;\n            /* 2 */\n          }\n          \n          /*\n          Add the correct display in Chrome and Safari.\n          */\n          \n          summary {\n            display: list-item;\n          }\n          \n          /*\n          Removes the default spacing and border for appropriate elements.\n          */\n          \n          blockquote,\n          dl,\n          dd,\n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6,\n          hr,\n          figure,\n          p,\n          pre {\n            margin: 0;\n          }\n          \n          fieldset {\n            margin: 0;\n            padding: 0;\n          }\n          \n          legend {\n            padding: 0;\n          }\n          \n          ol,\n          ul,\n          menu {\n            list-style: none;\n            margin: 0;\n            padding: 0;\n          }\n          \n          /*\n          Reset default styling for dialogs.\n          */\n          \n          dialog {\n            padding: 0;\n          }\n          \n          /*\n          Prevent resizing textareas horizontally by default.\n          */\n          \n          textarea {\n            resize: vertical;\n          }\n          \n          /*\n          1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n          2. Set the default placeholder color to the user's configured gray 400 color.\n          */\n          \n          input::placeholder,\n          textarea::placeholder {\n            opacity: 1;\n            /* 1 */\n            color: #9ca3af;\n            /* 2 */\n          }\n          \n          /*\n          Set the default cursor for buttons.\n          */\n          \n          button,\n          [role="button"] {\n            cursor: pointer;\n          }\n          \n          /*\n          Make sure disabled buttons don't get the pointer cursor.\n          */\n          \n          :disabled {\n            cursor: default;\n          }\n          \n          img,\n          svg,\n          video,\n          canvas,\n          audio,\n          iframe,\n          embed,\n          object {\n            display: block;\n            /* 1 */\n            vertical-align: middle;\n            /* 2 */\n          }\n          \n          /*\n          Constrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n          */\n          \n          img,\n          video {\n            max-width: 100%;\n            height: auto;\n          }\n          \n          /* Make elements with the HTML hidden attribute stay hidden by default */\n          \n          [hidden] {\n            display: none;\n          }\n          \n          *, ::before, ::after{\n            --tw-border-spacing-x: 0;\n            --tw-border-spacing-y: 0;\n            --tw-translate-x: 0;\n            --tw-translate-y: 0;\n            --tw-rotate: 0;\n            --tw-skew-x: 0;\n            --tw-skew-y: 0;\n            --tw-scale-x: 1;\n            --tw-scale-y: 1;\n            --tw-pan-x:  ;\n            --tw-pan-y:  ;\n            --tw-pinch-zoom:  ;\n            --tw-scroll-snap-strictness: proximity;\n            --tw-gradient-from-position:  ;\n            --tw-gradient-via-position:  ;\n            --tw-gradient-to-position:  ;\n            --tw-ordinal:  ;\n            --tw-slashed-zero:  ;\n            --tw-numeric-figure:  ;\n            --tw-numeric-spacing:  ;\n            --tw-numeric-fraction:  ;\n            --tw-ring-inset:  ;\n            --tw-ring-offset-width: 0px;\n            --tw-ring-offset-color: #fff;\n            --tw-ring-color: rgb(59 130 246 / 0.5);\n            --tw-ring-offset-shadow: 0 0 #0000;\n            --tw-ring-shadow: 0 0 #0000;\n            --tw-shadow: 0 0 #0000;\n            --tw-shadow-colored: 0 0 #0000;\n            --tw-blur:  ;\n            --tw-brightness:  ;\n            --tw-contrast:  ;\n            --tw-grayscale:  ;\n            --tw-hue-rotate:  ;\n            --tw-invert:  ;\n            --tw-saturate:  ;\n            --tw-sepia:  ;\n            --tw-drop-shadow:  ;\n            --tw-backdrop-blur:  ;\n            --tw-backdrop-brightness:  ;\n            --tw-backdrop-contrast:  ;\n            --tw-backdrop-grayscale:  ;\n            --tw-backdrop-hue-rotate:  ;\n            --tw-backdrop-invert:  ;\n            --tw-backdrop-opacity:  ;\n            --tw-backdrop-saturate:  ;\n            --tw-backdrop-sepia:  ;\n          }\n          \n          ::backdrop{\n            --tw-border-spacing-x: 0;\n            --tw-border-spacing-y: 0;\n            --tw-translate-x: 0;\n            --tw-translate-y: 0;\n            --tw-rotate: 0;\n            --tw-skew-x: 0;\n            --tw-skew-y: 0;\n            --tw-scale-x: 1;\n            --tw-scale-y: 1;\n            --tw-pan-x:  ;\n            --tw-pan-y:  ;\n            --tw-pinch-zoom:  ;\n            --tw-scroll-snap-strictness: proximity;\n            --tw-gradient-from-position:  ;\n            --tw-gradient-via-position:  ;\n            --tw-gradient-to-position:  ;\n            --tw-ordinal:  ;\n            --tw-slashed-zero:  ;\n            --tw-numeric-figure:  ;\n            --tw-numeric-spacing:  ;\n            --tw-numeric-fraction:  ;\n            --tw-ring-inset:  ;\n            --tw-ring-offset-width: 0px;\n            --tw-ring-offset-color: #fff;\n            --tw-ring-color: rgb(59 130 246 / 0.5);\n            --tw-ring-offset-shadow: 0 0 #0000;\n            --tw-ring-shadow: 0 0 #0000;\n            --tw-shadow: 0 0 #0000;\n            --tw-shadow-colored: 0 0 #0000;\n            --tw-blur:  ;\n            --tw-brightness:  ;\n            --tw-contrast:  ;\n            --tw-grayscale:  ;\n            --tw-hue-rotate:  ;\n            --tw-invert:  ;\n            --tw-saturate:  ;\n            --tw-sepia:  ;\n            --tw-drop-shadow:  ;\n            --tw-backdrop-blur:  ;\n            --tw-backdrop-brightness:  ;\n            --tw-backdrop-contrast:  ;\n            --tw-backdrop-grayscale:  ;\n            --tw-backdrop-hue-rotate:  ;\n            --tw-backdrop-invert:  ;\n            --tw-backdrop-opacity:  ;\n            --tw-backdrop-saturate:  ;\n            --tw-backdrop-sepia:  ;\n          }\n          \n          .fixed{\n            position: fixed;\n          }\n          \n          .bottom-0{\n            bottom: 0px;\n          }\n          \n          .left-0{\n            left: 0px;\n          }\n          \n          .table{\n            display: table;\n          }\n          \n          .h-12{\n            height: 3rem;\n          }\n          \n          .w-1/2{\n            width: 50%;\n          }\n          \n          .w-full{\n            width: 100%;\n          }\n          \n          .border-collapse{\n            border-collapse: collapse;\n          }\n          \n          .border-spacing-0{\n            --tw-border-spacing-x: 0px;\n            --tw-border-spacing-y: 0px;\n            border-spacing: var(--tw-border-spacing-x) var(--tw-border-spacing-y);\n          }\n          \n          .whitespace-nowrap{\n            white-space: nowrap;\n          }\n          \n          .border-b{\n            border-bottom-width: 1px;\n          }\n          \n          .border-b-2{\n            border-bottom-width: 2px;\n          }\n          \n          .border-r{\n            border-right-width: 1px;\n          }\n          \n          .border-main{\n            border-color: #5c6ac4;\n          }\n          \n          .bg-main{\n            background-color: #5c6ac4;\n          }\n          \n          .bg-slate-100{\n            background-color: #f1f5f9;\n          }\n          \n          .p-3{\n            padding: 0.75rem;\n          }\n          \n          .p-4{\n              padding: 1.25rem;\n            }\n          \n          .px-14{\n            padding-left: 3.5rem;\n            padding-right: 3.5rem;\n          }\n          \n          .px-2{\n            padding-left: 0.5rem;\n            padding-right: 0.5rem;\n          }\n          \n          .py-10{\n            padding-top: 2.5rem;\n            padding-bottom: 2.5rem;\n          }\n          \n          .py-3{\n            padding-top: 0.75rem;\n            padding-bottom: 0.75rem;\n          }\n          \n          .py-4{\n            padding-top: 1rem;\n            padding-bottom: 1rem;\n          }\n          \n          .py-6{\n            padding-top: 1.5rem;\n            padding-bottom: 1.5rem;\n          }\n          \n          .pb-3{\n            padding-bottom: 0.75rem;\n          }\n          \n          .pl-2{\n            padding-left: 0.5rem;\n          }\n          \n          .pl-3{\n            padding-left: 0.75rem;\n          }\n          \n          .pl-4{\n            padding-left: 1rem;\n          }\n          \n          .pr-3{\n            padding-right: 0.75rem;\n          }\n          \n          .pr-4{\n            padding-right: 1rem;\n          }\n          \n          .pr-6{\n              padding-right: 6rem;\n            }\n          \n          .text-center{\n            text-align: center;\n          }\n          \n          .text-right{\n            text-align: right;\n          }\n          \n          .align-top{\n            vertical-align: top;\n          }\n          \n          .text-sm{\n            font-size: 0.875rem;\n            line-height: 1.25rem;\n          }\n          \n          .text-xs{\n            font-size: 0.75rem;\n            line-height: 1rem;\n          }\n          \n          .font-bold{\n            font-weight: 700;\n          }\n          .font-bold40{\n              font-weight: 700;\n              font-size: 40px;\n            }\n          .font-bold30{\n              font-weight: 700;\n              font-size: 30px;\n          }\n          \n          \n          .italic{\n            font-style: italic;\n          }\n          \n          .text-main{\n            color: #5c6ac4;\n          }\n          \n          .text-neutral-600{\n            color: #525252;\n          }\n          \n          .text-neutral-700{\n            color: #404040;\n          }\n          \n          .text-slate-300{\n            color: #cbd5e1;\n          }\n          \n          .text-slate-400{\n            color: #94a3b8;\n          }\n          \n          .text-white{\n            color: #fff;\n          }\n          \n          @page {\n            margin: 0;\n          }\n          \n          @media print {\n            body {\n              -webkit-print-color-adjust: exact;\n            }\n          }  \n          \n          // -----------------------------------------------------------------------\n.text-head{\n  font-size: 24px;\n  font-weight: bold;\n  color: #111;\n  text-align: center;\n  }\n.text-headdate{\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n  }\n.net{\n  font-size: 14px;\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n  }\n.text-rtl{\n  text-align: right;\n  }\n.msg {\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\n  font-size: 14px;\n  width: 100%;\n  text-align: right;\n}\n.bankdata {\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\n  font-size: 12px;\n  width: 100%;\n  text-align: right;\n}\n.footermsg {\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\n  font-size: 10px;\n  width: 100%;\n  text-align: right;\n}\n.text-headcustomer{\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n  }\n.invoice-box {\n  max-width: 800px;\n  margin: auto;\n  padding: 30px;\n  border: 1px solid #eee;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\n  font-size: 14px;\n  line-height: 24px;\n  font-family: 'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.invoice-box table {\n  width: 100%;\n  line-height: inherit;\n  text-align: left;\n}\n\n.invoice-box table td {\n  padding: 5px;\n  vertical-align: top;\n}\n\n.invoice-box table tr td:nth-child(2) {\n  text-align: right;\n}\n\n.invoice-box table tr.top table td {\n  padding-bottom: 20px;\n}\n\n.invoice-box table tr.top table td.title {\n  font-size: 45px;\n  line-height: 45px;\n  color: #333;\n}\n\n.invoice-box table tr.information table td {\n  padding-bottom: 40px;\n}\n\n.invoice-box table tr.heading td {\n  background: #eee;\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\t\n  text-align: right;\t\t\t\n}\n\n.invoice-box table tr.details td {\n  padding-bottom: 20px;\n  border-bottom: 1px solid #eee;\n}\n\n.invoice-box table tr.item td {\n  border-bottom: 1px solid #eee;\n}\n\n.invoice-box table tr.item.last td {\n  border-bottom: none;\n}\n\n.invoice-box table tr.total td:nth-child(2) {\n  border-top: 2px solid #111;\n  font-weight: bold;\n  font-size: 20px;\n}\n\n@media only screen and (max-width: 600px) {\n  .invoice-box table tr.top table td {\n      width: 100%;\n      display: block;\n      text-align: center;\n  }\n\n  .invoice-box table tr.information table td {\n      width: 100%;\n      display: block;\n      text-align: center;\n  }\n}\n\n/** RTL **/\n.invoice-box.rtl {\n  direction: rtl;\n  font-family: Tahoma, 'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;\n}\n\n.invoice-box.rtl table {\n  text-align: right;\n}\n\n.invoice-box.rtl table tr td:nth-child(2) {\n  text-align: left;\n}\n  \n          </style>\n          <script>\n            var global = global || window;\n          <\/script>\n\n        </head>\n    <body onload="window.print();window.close()">${e}</body>\n      </html>`),i.document.close()}}Pt.\u0275fac=function(e){return new(e||Pt)(t.Y36(ut.y),t.Y36(st.d),t.Y36(_.uU),t.Y36(ue.eN),t.Y36(ge.H7),t.Y36(dt.g))},Pt.\u0275cmp=t.Xpm({type:Pt,selectors:[["app-print-einvoice"]],features:[t._Bn([_.uU])],decls:151,vars:27,consts:[["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click"],["id","contentToConvert",1,"py-4"],[1,"px-14","py-6"],[1,"w-full","border-collapse","border-spacing-0"],[1,"w-full","align-top"],["width","150","height","150",3,"src"],[1,"align-top"],[1,"text-sm"],[1,"border-collapse","border-spacing-0"],[1,"pl-4"],[1,"whitespace-nowrap","font-bold30","text-main","text-right"],[1,"border-r","pr-4"],[4,"ngIf"],[1,"whitespace-nowrap","text-slate-400","text-right"],[1,"whitespace-nowrap","font-bold","text-main","text-right"],["class","border-r pr-6",4,"ngIf"],[1,"bg-slate-100","px-14","py-6","text-sm"],[1,"w-1/2","align-top"],[1,"text-sm","text-neutral-600"],[1,"font-bold"],[1,"border-r","pr-6"],[1,"px-14","py-10","text-sm","text-neutral-700"],[1,"border-b-2","border-main","pb-3","pl-3","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","text-right","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","text-center","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","pr-3","text-right","font-bold","text-main"],[1,"border-b","py-3","pl-3"],[1,"border-b","py-3","pl-2"],[1,"border-b","py-3","pl-2","text-right"],[1,"border-b","py-3","pl-2","text-center"],[1,"border-b","py-3","pl-2","pr-3","text-right"],["colspan","7"],[1,"w-full"],[1,"border-b","p-3"],[1,"whitespace-nowrap","text-slate-400"],[1,"border-b","p-3","text-right"],[1,"whitespace-nowrap","font-bold","text-main"],[1,"p-3"],[1,"p-3","text-right"],[1,"bg-main","p-3"],[1,"whitespace-nowrap","font-bold","text-white"],[1,"bg-main","p-3","text-right"],[1,"px-14","text-sm","text-neutral-700"],[1,"text-main","font-bold"],["class","px-14 py-10 text-sm text-neutral-700",4,"ngIf"],[3,"formData"],[1,"italic"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"button",1),t.NdJ("click",function(){return i.downloadPDF()}),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t._UZ(5,"mat-divider"),t.TgZ(6,"div")(7,"div",2)(8,"div",3)(9,"table",4)(10,"tbody")(11,"tr")(12,"td",5)(13,"div"),t._UZ(14,"img",6),t.qZA()()(),t.TgZ(15,"tr")(16,"td",7)(17,"div",8)(18,"table",9)(19,"tbody")(20,"tr")(21,"td",10),t._UZ(22,"div"),t.qZA(),t.TgZ(23,"td",10),t._UZ(24,"div"),t.qZA(),t.TgZ(25,"td",10)(26,"div")(27,"p",11),t._uU(28),t.qZA()()(),t.TgZ(29,"td",12),t.YNc(30,Vn,5,1,"div",13),t.TgZ(31,"div")(32,"p",14),t._uU(33,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"),t.qZA(),t.TgZ(34,"p",15),t._uU(35),t.qZA()()(),t.YNc(36,Hn,2,1,"td",16),t.qZA()()()()()()()()(),t.TgZ(37,"div",17)(38,"table",4)(39,"tbody")(40,"tr")(41,"td",10),t._UZ(42,"div"),t.qZA(),t.TgZ(43,"td",18)(44,"div",19)(45,"p",20),t._uU(46,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u0643"),t.qZA(),t.TgZ(47,"p",20),t._uU(48),t.qZA(),t.TgZ(49,"p"),t._uU(50),t.qZA(),t.TgZ(51,"p"),t._uU(52),t.qZA(),t.TgZ(53,"p"),t._uU(54),t.qZA()()(),t.TgZ(55,"td",21)(56,"div",19)(57,"p",20),t._uU(58,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644"),t.qZA(),t.TgZ(59,"p",20),t._uU(60),t.qZA(),t.TgZ(61,"p"),t._uU(62),t.qZA(),t.TgZ(63,"p"),t._uU(64),t.qZA(),t.TgZ(65,"p"),t._uU(66),t.qZA()()()()()()(),t.TgZ(67,"div",22)(68,"table",4)(69,"thead")(70,"tr")(71,"td",23),t._uU(72,"#"),t.qZA(),t.TgZ(73,"td",24),t._uU(74,"\u0627\u0644\u0635\u0646\u0641"),t.qZA(),t.TgZ(75,"td",25),t._uU(76,"\u0627\u0644\u0642\u064a\u0645\u0629"),t.qZA(),t.TgZ(77,"td",26),t._uU(78,"\u0627\u0644\u0643\u0645\u064a\u0629."),t.qZA(),t.TgZ(79,"td",25),t._uU(80,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(81,"td",26),t._uU(82,"\u0646\u0633\u0628\u0629 \u0627\u0644\u0636\u0631\u064a\u0628\u0629"),t.qZA(),t.TgZ(83,"td",26),t._uU(84,"\u0627\u0644\u0636\u0631\u064a\u0628\u0629"),t.qZA(),t.TgZ(85,"td",27),t._uU(86,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a \u0645\u0639 \u0627\u0644\u0636\u0631\u064a\u0628\u0629"),t.qZA()()(),t.TgZ(87,"tbody")(88,"tr")(89,"td",28),t._uU(90,"1."),t.qZA(),t.TgZ(91,"td",29),t._uU(92,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0625\u064a\u062c\u0627\u0631"),t.qZA(),t.TgZ(93,"td",30),t._uU(94),t.qZA(),t.TgZ(95,"td",31),t._uU(96,"1"),t.qZA(),t.TgZ(97,"td",31),t._uU(98),t.qZA(),t.TgZ(99,"td",31),t._uU(100,"%15"),t.qZA(),t.TgZ(101,"td",30),t._uU(102),t.qZA(),t.TgZ(103,"td",32),t._uU(104),t.qZA()(),t.TgZ(105,"tr")(106,"td",33)(107,"table",4)(108,"tbody")(109,"tr"),t._UZ(110,"td",34),t.TgZ(111,"td")(112,"table",4)(113,"tbody")(114,"tr")(115,"td",35)(116,"div",36),t._uU(117,"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0628\u062f\u0648\u0646 \u0636\u0631\u064a\u0628\u0629:"),t.qZA()(),t.TgZ(118,"td",37)(119,"div",38),t._uU(120),t.qZA()()(),t.TgZ(121,"tr")(122,"td",39)(123,"div",36),t._uU(124,"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0636\u0631\u064a\u0628\u0629:"),t.qZA()(),t.TgZ(125,"td",40)(126,"div",38),t._uU(127),t.qZA()()(),t.TgZ(128,"tr")(129,"td",41)(130,"div",42),t._uU(131,"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0645\u0639 \u0627\u0644\u0636\u0631\u064a\u0628\u0629:"),t.qZA()(),t.TgZ(132,"td",43)(133,"div",42),t._uU(134),t.qZA()()()()()()()()()()()()()(),t.TgZ(135,"div",44)(136,"p",45),t._uU(137,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062a\u062d\u0648\u064a\u0644"),t.qZA(),t.TgZ(138,"p"),t._uU(139," \u0627\u0633\u0645 \u0627\u0644\u0628\u0646\u0643 : "),t.TgZ(140,"b"),t._uU(141),t.qZA()(),t.TgZ(142,"p"),t._uU(143," \u0631\u0642\u0645 \u0627\u0644\u062d\u0633\u0627\u0628: "),t.TgZ(144,"b"),t._uU(145),t.qZA()(),t.TgZ(146,"p"),t._uU(147," \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f : "),t.TgZ(148,"b"),t._uU(149),t.qZA()()(),t.YNc(150,Wn,7,0,"div",46),t.qZA()()()),2&e){let a,l;t.xp6(3),t.Oqu(t.lcZ(4,25,"BTN.DownloadPDF")),t.xp6(11),t.Q6J("src",i.sanitize(i.ownerLogoBase64),t.LSH),t.xp6(14),t.hij("",i.invTypeText," "),t.xp6(2),t.Q6J("ngIf","S"==i.invType),t.xp6(5),t.Oqu(i.curDate),t.xp6(1),t.Q6J("ngIf","S"==i.invType),t.xp6(12),t.Oqu(null!==(a=i.ownerName)&&void 0!==a?a:"Supplier Company INC"),t.xp6(2),t.hij("\u0627\u0644\u0639\u0646\u0648\u0627\u0646: ",i.ownerAddress,""),t.xp6(2),t.hij("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a: ",i.ownerTaxNumber,""),t.xp6(2),t.hij(":\u0631\u0642\u0645 \u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a ",i.ownerCommRegister,""),t.xp6(6),t.Oqu(null!==(l=i.tenantName)&&void 0!==l?l:"Customer Company"),t.xp6(2),t.hij("\u0627\u0644\u0639\u0646\u0648\u0627\u0646: ",i.tenantAddress,""),t.xp6(2),t.hij("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a: ",i.tenantTaxNumber,""),t.xp6(2),t.hij(":\u0631\u0642\u0645 \u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a ",i.tenantCommRegister,""),t.xp6(28),t.hij("",i.invoiceValue," \u0631\u0633"),t.xp6(4),t.hij("",i.invoiceValue," \u0631\u0633"),t.xp6(4),t.hij("",i.taxValue," \u0631\u0633"),t.xp6(2),t.hij("",i.netValue," \u0631\u0633"),t.xp6(16),t.hij("",i.invoiceValue," \u0631\u0633"),t.xp6(7),t.hij("",i.taxValue," \u0631\u0633"),t.xp6(7),t.hij("",i.netValue," \u0631\u0633"),t.xp6(7),t.Oqu(i.ownerBankName),t.xp6(4),t.Oqu(i.ownerBankAccountNumber),t.xp6(4),t.Oqu(i.accountOwnerName),t.xp6(1),t.Q6J("ngIf","REQUEST"==i.invType)}},dependencies:[_.O5,T.xw,T.Wh,C.lW,H.a8,tt.d,qt,w.X$],styles:['.text-head[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#111;text-align:center}.text-headdate[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;text-align:right}.net[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333;text-align:right}.text-rtl[_ngcontent-%COMP%]{text-align:right}.msg[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-weight:700;font-size:22px;width:100%;text-align:right}.bankdata[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-weight:700;font-size:18px;width:100%;text-align:right}.footermsg[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-weight:700;font-size:16px;width:100%;text-align:right}.text-headcustomer[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#111;text-align:right}.invoice-box[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:30px;border:1px solid #eee;box-shadow:0 0 10px #00000026;font-size:16px;line-height:24px;font-family:Helvetica Neue,Helvetica,Helvetica,Arial,sans-serif;color:#555}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;line-height:inherit;text-align:left}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px;vertical-align:top}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:right}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.top[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:20px}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.top[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.title[_ngcontent-%COMP%]{font-size:45px;line-height:45px;color:#333}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.information[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:40px}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.heading[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#eee;border-bottom:1px solid #ddd;font-weight:700;text-align:right}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:20px;border-bottom:1px solid #eee}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #eee}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.item.last[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:none}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){border-top:2px solid #111;font-weight:700;font-size:20px}@media only screen and (max-width: 600px){.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.top[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.information[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:100%;display:block;text-align:center}}.invoice-box.rtl[_ngcontent-%COMP%]{direction:rtl;font-family:Tahoma,Helvetica Neue,Helvetica,Helvetica,Arial,sans-serif}.invoice-box.rtl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{text-align:right}.invoice-box.rtl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:left}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}[_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{--tw-content: ""}html[_ngcontent-%COMP%]{line-height:1.5;-webkit-text-size-adjust:100%;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal}body[_ngcontent-%COMP%]{margin:0;line-height:inherit}hr[_ngcontent-%COMP%]{height:0;color:inherit;border-top-width:1px}abbr[_ngcontent-%COMP%]:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-size:inherit;font-weight:inherit}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}b[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{font-weight:bolder}code[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], samp[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small[_ngcontent-%COMP%]{font-size:80%}sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%]{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub[_ngcontent-%COMP%]{bottom:-.25em}sup[_ngcontent-%COMP%]{top:-.5em}table[_ngcontent-%COMP%]{text-indent:0;border-color:inherit;border-collapse:collapse}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{text-transform:none}button[_ngcontent-%COMP%], [type=button][_ngcontent-%COMP%], [type=reset][_ngcontent-%COMP%], [type=submit][_ngcontent-%COMP%]{-webkit-appearance:button;background-color:transparent;background-image:none}[_ngcontent-%COMP%]:-moz-focusring{outline:auto}[_ngcontent-%COMP%]:-moz-ui-invalid{box-shadow:none}progress[_ngcontent-%COMP%]{vertical-align:baseline}[_ngcontent-%COMP%]::-webkit-inner-spin-button, [_ngcontent-%COMP%]::-webkit-outer-spin-button{height:auto}[type=search][_ngcontent-%COMP%]{-webkit-appearance:textfield;outline-offset:-2px}[_ngcontent-%COMP%]::-webkit-search-decoration{-webkit-appearance:none}[_ngcontent-%COMP%]::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary[_ngcontent-%COMP%]{display:list-item}blockquote[_ngcontent-%COMP%], dl[_ngcontent-%COMP%], dd[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], hr[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], p[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{margin:0}fieldset[_ngcontent-%COMP%]{margin:0;padding:0}legend[_ngcontent-%COMP%]{padding:0}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%], menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}dialog[_ngcontent-%COMP%]{padding:0}textarea[_ngcontent-%COMP%]{resize:vertical}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{opacity:1;color:#9ca3af}button[_ngcontent-%COMP%], [role=button][_ngcontent-%COMP%]{cursor:pointer}[_ngcontent-%COMP%]:disabled{cursor:default}img[_ngcontent-%COMP%], svg[_ngcontent-%COMP%], video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], audio[_ngcontent-%COMP%], iframe[_ngcontent-%COMP%], embed[_ngcontent-%COMP%], object[_ngcontent-%COMP%]{display:block;vertical-align:middle}img[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{max-width:100%;height:auto}[hidden][_ngcontent-%COMP%]{display:none}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }[_ngcontent-%COMP%]::-webkit-backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }[_ngcontent-%COMP%]::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.fixed[_ngcontent-%COMP%]{position:fixed}.bottom-0[_ngcontent-%COMP%]{bottom:0}.left-0[_ngcontent-%COMP%]{left:0}.table[_ngcontent-%COMP%]{display:table}.h-12[_ngcontent-%COMP%]{height:3rem}.w-1\\/2[_ngcontent-%COMP%]{width:50%}.w-full[_ngcontent-%COMP%]{width:100%}.border-collapse[_ngcontent-%COMP%]{border-collapse:collapse}.border-spacing-0[_ngcontent-%COMP%]{--tw-border-spacing-x: 0px;--tw-border-spacing-y: 0px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y)}.whitespace-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.border-b[_ngcontent-%COMP%]{border-bottom-width:1px}.border-b-2[_ngcontent-%COMP%]{border-bottom-width:2px}.border-r[_ngcontent-%COMP%]{border-right-width:1px}.border-main[_ngcontent-%COMP%]{border-color:#5c6ac4}.bg-main[_ngcontent-%COMP%]{background-color:#5c6ac4}.bg-slate-100[_ngcontent-%COMP%]{background-color:#f1f5f9}.p-3[_ngcontent-%COMP%]{padding:.75rem}.p-4[_ngcontent-%COMP%]{padding:1.25rem}.px-14[_ngcontent-%COMP%]{padding-left:3.5rem;padding-right:3.5rem}.px-2[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.py-10[_ngcontent-%COMP%]{padding-top:2.5rem;padding-bottom:2.5rem}.py-3[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}.py-4[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.py-6[_ngcontent-%COMP%]{padding-top:1.5rem;padding-bottom:1.5rem}.pb-3[_ngcontent-%COMP%]{padding-bottom:.75rem}.pl-2[_ngcontent-%COMP%]{padding-left:.5rem}.pl-3[_ngcontent-%COMP%]{padding-left:.75rem}.pl-4[_ngcontent-%COMP%]{padding-left:1rem}.pr-3[_ngcontent-%COMP%]{padding-right:.75rem}.pr-4[_ngcontent-%COMP%]{padding-right:1rem}.pr-6[_ngcontent-%COMP%]{padding-right:6rem}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.align-top[_ngcontent-%COMP%]{vertical-align:top}.text-sm[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.text-xs[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.font-bold40[_ngcontent-%COMP%]{font-weight:700;font-size:40px}.font-bold30[_ngcontent-%COMP%]{font-weight:700;font-size:30px}.italic[_ngcontent-%COMP%]{font-style:italic}.text-main[_ngcontent-%COMP%]{color:#5c6ac4}.text-neutral-600[_ngcontent-%COMP%]{color:#525252}.text-neutral-700[_ngcontent-%COMP%]{color:#404040}.text-slate-300[_ngcontent-%COMP%]{color:#cbd5e1}.text-slate-400[_ngcontent-%COMP%]{color:#94a3b8}.text-white[_ngcontent-%COMP%]{color:#fff}@page{margin:0}@media print{body[_ngcontent-%COMP%]{-webkit-print-color-adjust:exact}}']});const Ce=[{path:"",redirectTo:"tenant-list",pathMatch:"full"},{path:"tenant-list",component:h,data:{breadcrumb:"Tenants"}},{path:"tenant-add",component:yt,data:{breadcrumb:"AddTenant"}},{path:"tenant-add/:id",component:yt,data:{breadcrumb:"EditTenant"}},{path:"owner-list",component:Et,data:{breadcrumb:"Owners"}},{path:"owner-add",component:ft,data:{breadcrumb:"AddOwner"}},{path:"owner-add/:id",component:ft,data:{breadcrumb:"EditOwner"}},{path:"contract-list",component:xt,data:{breadcrumb:"RentContracts"}},{path:"contract-list/:tenantid",component:xt,data:{breadcrumb:"RentContractsForTenant"}},{path:"contract-add",component:gt,data:{breadcrumb:"AddContract"}},{path:"contract-add/:id",component:gt,data:{breadcrumb:"EditContract"}},{path:"contract-add/renew/:id",component:gt,data:{breadcrumb:"RenewContract",parentID:"T"}},{path:"installment-list/:id",component:St,data:{breadcrumb:"ContractInstallments"}},{path:"statements-list/:id",component:Ft,data:{breadcrumb:"TenantStatements"}},{path:"tenant-leave",component:Zt,data:{breadcrumb:"AddTenantLeave"}},{path:"tenant-leave/:id",component:Zt,data:{breadcrumb:"EditTenantLeave"}},{path:"print-einvoice",component:Pt,data:{breadcrumb:"E-Invoice"}}];class wt{}wt.\u0275fac=function(e){return new(e||wt)},wt.\u0275mod=t.oAB({type:wt}),wt.\u0275inj=t.cJS({imports:[ue.JF,m.u5,$.JX,We.D,_e.N,_.ez,V.Bz.forChild(Ce),m.UX,He.m,$.JX,Zi.kz,ae.Y$,Ut.A0]})},5343:(Jt,X)=>{"use strict";X.byteLength=function D(C){var A=t(C),S=A[1];return 3*(A[0]+S)/4-S},X.toByteArray=function J(C){var A,Q,v=t(C),S=v[0],w=v[1],k=new x(function p(C,A,v){return 3*(A+v)/4-v}(0,S,w)),G=0,ot=w>0?S-4:S;for(Q=0;Q<ot;Q+=4)A=_[C.charCodeAt(Q)]<<18|_[C.charCodeAt(Q+1)]<<12|_[C.charCodeAt(Q+2)]<<6|_[C.charCodeAt(Q+3)],k[G++]=A>>16&255,k[G++]=A>>8&255,k[G++]=255&A;return 2===w&&(A=_[C.charCodeAt(Q)]<<2|_[C.charCodeAt(Q+1)]>>4,k[G++]=255&A),1===w&&(A=_[C.charCodeAt(Q)]<<10|_[C.charCodeAt(Q+1)]<<4|_[C.charCodeAt(Q+2)]>>2,k[G++]=A>>8&255,k[G++]=255&A),k},X.fromByteArray=function K(C){for(var A,v=C.length,S=v%3,w=[],k=16383,G=0,ot=v-S;G<ot;G+=k)w.push(T(C,G,G+k>ot?ot:G+k));return 1===S?w.push(f[(A=C[v-1])>>2]+f[A<<4&63]+"=="):2===S&&w.push(f[(A=(C[v-2]<<8)+C[v-1])>>10]+f[A>>4&63]+f[A<<2&63]+"="),w.join("")};for(var f=[],_=[],x=typeof Uint8Array<"u"?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=0,O=m.length;I<O;++I)f[I]=m[I],_[m.charCodeAt(I)]=I;function t(C){var A=C.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=C.indexOf("=");return-1===v&&(v=A),[v,v===A?0:4-v%4]}function N(C){return f[C>>18&63]+f[C>>12&63]+f[C>>6&63]+f[63&C]}function T(C,A,v){for(var w=[],k=A;k<v;k+=3)w.push(N((C[k]<<16&16711680)+(C[k+1]<<8&65280)+(255&C[k+2])));return w.join("")}_["-".charCodeAt(0)]=62,_["_".charCodeAt(0)]=63},3172:(Jt,X,f)=>{"use strict";const x=f(5343),m=f(8461),I="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;X.lW=p,X.h2=50;const O=2147483647;function D(s){if(s>O)throw new RangeError('The value "'+s+'" is invalid for option "size"');const n=new Uint8Array(s);return Object.setPrototypeOf(n,p.prototype),n}function p(s,n,o){if("number"==typeof s){if("string"==typeof n)throw new TypeError('The "string" argument must be of type string. Received type number');return K(s)}return J(s,n,o)}function J(s,n,o){if("string"==typeof s)return function C(s,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!p.isEncoding(n))throw new TypeError("Unknown encoding: "+n);const o=0|ot(s,n);let c=D(o);const d=c.write(s,n);return d!==o&&(c=c.slice(0,d)),c}(s,n);if(ArrayBuffer.isView(s))return function v(s){if(it(s,Uint8Array)){const n=new Uint8Array(s);return S(n.buffer,n.byteOffset,n.byteLength)}return A(s)}(s);if(null==s)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s);if(it(s,ArrayBuffer)||s&&it(s.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(it(s,SharedArrayBuffer)||s&&it(s.buffer,SharedArrayBuffer)))return S(s,n,o);if("number"==typeof s)throw new TypeError('The "value" argument must not be of type number. Received type number');const c=s.valueOf&&s.valueOf();if(null!=c&&c!==s)return p.from(c,n,o);const d=function w(s){if(p.isBuffer(s)){const n=0|k(s.length),o=D(n);return 0===o.length||s.copy(o,0,0,n),o}return void 0!==s.length?"number"!=typeof s.length||Dt(s.length)?D(0):A(s):"Buffer"===s.type&&Array.isArray(s.data)?A(s.data):void 0}(s);if(d)return d;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof s[Symbol.toPrimitive])return p.from(s[Symbol.toPrimitive]("string"),n,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s)}function N(s){if("number"!=typeof s)throw new TypeError('"size" argument must be of type number');if(s<0)throw new RangeError('The value "'+s+'" is invalid for option "size"')}function K(s){return N(s),D(s<0?0:0|k(s))}function A(s){const n=s.length<0?0:0|k(s.length),o=D(n);for(let c=0;c<n;c+=1)o[c]=255&s[c];return o}function S(s,n,o){if(n<0||s.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(s.byteLength<n+(o||0))throw new RangeError('"length" is outside of buffer bounds');let c;return c=void 0===n&&void 0===o?new Uint8Array(s):void 0===o?new Uint8Array(s,n):new Uint8Array(s,n,o),Object.setPrototypeOf(c,p.prototype),c}function k(s){if(s>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return 0|s}function ot(s,n){if(p.isBuffer(s))return s.length;if(ArrayBuffer.isView(s)||it(s,ArrayBuffer))return s.byteLength;if("string"!=typeof s)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof s);const o=s.length,c=arguments.length>2&&!0===arguments[2];if(!c&&0===o)return 0;let d=!1;for(;;)switch(n){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return pt(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return Ht(s).length;default:if(d)return c?-1:pt(s).length;n=(""+n).toLowerCase(),d=!0}}function Q(s,n,o){let c=!1;if((void 0===n||n<0)&&(n=0),n>this.length||((void 0===o||o>this.length)&&(o=this.length),o<=0)||(o>>>=0)<=(n>>>=0))return"";for(s||(s="utf8");;)switch(s){case"hex":return bt(this,n,o);case"utf8":case"utf-8":return kt(this,n,o);case"ascii":return te(this,n,o);case"latin1":case"binary":return ht(this,n,o);case"base64":return zt(this,n,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return at(this,n,o);default:if(c)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),c=!0}}function ct(s,n,o){const c=s[n];s[n]=s[o],s[o]=c}function Rt(s,n,o,c,d){if(0===s.length)return-1;if("string"==typeof o?(c=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),Dt(o=+o)&&(o=d?0:s.length-1),o<0&&(o=s.length+o),o>=s.length){if(d)return-1;o=s.length-1}else if(o<0){if(!d)return-1;o=0}if("string"==typeof n&&(n=p.from(n,c)),p.isBuffer(n))return 0===n.length?-1:Bt(s,n,o,c,d);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?d?Uint8Array.prototype.indexOf.call(s,n,o):Uint8Array.prototype.lastIndexOf.call(s,n,o):Bt(s,[n],o,c,d);throw new TypeError("val must be string, number or Buffer")}function Bt(s,n,o,c,d){let q,h=1,g=s.length,y=n.length;if(void 0!==c&&("ucs2"===(c=String(c).toLowerCase())||"ucs-2"===c||"utf16le"===c||"utf-16le"===c)){if(s.length<2||n.length<2)return-1;h=2,g/=2,y/=2,o/=2}function R(B,L){return 1===h?B[L]:B.readUInt16BE(L*h)}if(d){let B=-1;for(q=o;q<g;q++)if(R(s,q)===R(n,-1===B?0:q-B)){if(-1===B&&(B=q),q-B+1===y)return B*h}else-1!==B&&(q-=q-B),B=-1}else for(o+y>g&&(o=g-y),q=o;q>=0;q--){let B=!0;for(let L=0;L<y;L++)if(R(s,q+L)!==R(n,L)){B=!1;break}if(B)return q}return-1}function Yt(s,n,o,c){o=Number(o)||0;const d=s.length-o;c?(c=Number(c))>d&&(c=d):c=d;const h=n.length;let g;for(c>h/2&&(c=h/2),g=0;g<c;++g){const y=parseInt(n.substr(2*g,2),16);if(Dt(y))return g;s[o+g]=y}return g}function Gt(s,n,o,c){return vt(pt(n,s.length-o),s,o,c)}function Qt(s,n,o,c){return vt(function Nt(s){const n=[];for(let o=0;o<s.length;++o)n.push(255&s.charCodeAt(o));return n}(n),s,o,c)}function jt(s,n,o,c){return vt(Ht(n),s,o,c)}function $t(s,n,o,c){return vt(function ee(s,n){let o,c,d;const h=[];for(let g=0;g<s.length&&!((n-=2)<0);++g)o=s.charCodeAt(g),c=o>>8,d=o%256,h.push(d),h.push(c);return h}(n,s.length-o),s,o,c)}function zt(s,n,o){return x.fromByteArray(0===n&&o===s.length?s:s.slice(n,o))}function kt(s,n,o){o=Math.min(s.length,o);const c=[];let d=n;for(;d<o;){const h=s[d];let g=null,y=h>239?4:h>223?3:h>191?2:1;if(d+y<=o){let R,q,B,L;switch(y){case 1:h<128&&(g=h);break;case 2:R=s[d+1],128==(192&R)&&(L=(31&h)<<6|63&R,L>127&&(g=L));break;case 3:R=s[d+1],q=s[d+2],128==(192&R)&&128==(192&q)&&(L=(15&h)<<12|(63&R)<<6|63&q,L>2047&&(L<55296||L>57343)&&(g=L));break;case 4:R=s[d+1],q=s[d+2],B=s[d+3],128==(192&R)&&128==(192&q)&&128==(192&B)&&(L=(15&h)<<18|(63&R)<<12|(63&q)<<6|63&B,L>65535&&L<1114112&&(g=L))}}null===g?(g=65533,y=1):g>65535&&(g-=65536,c.push(g>>>10&1023|55296),g=56320|1023&g),c.push(g),d+=y}return function Xt(s){const n=s.length;if(n<=Kt)return String.fromCharCode.apply(String,s);let o="",c=0;for(;c<n;)o+=String.fromCharCode.apply(String,s.slice(c,c+=Kt));return o}(c)}!(p.TYPED_ARRAY_SUPPORT=function t(){try{const s=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(s,n),42===s.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(s,n,o){return J(s,n,o)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(s,n,o){return function T(s,n,o){return N(s),s<=0?D(s):void 0!==n?"string"==typeof o?D(s).fill(n,o):D(s).fill(n):D(s)}(s,n,o)},p.allocUnsafe=function(s){return K(s)},p.allocUnsafeSlow=function(s){return K(s)},p.isBuffer=function(n){return null!=n&&!0===n._isBuffer&&n!==p.prototype},p.compare=function(n,o){if(it(n,Uint8Array)&&(n=p.from(n,n.offset,n.byteLength)),it(o,Uint8Array)&&(o=p.from(o,o.offset,o.byteLength)),!p.isBuffer(n)||!p.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===o)return 0;let c=n.length,d=o.length;for(let h=0,g=Math.min(c,d);h<g;++h)if(n[h]!==o[h]){c=n[h],d=o[h];break}return c<d?-1:d<c?1:0},p.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(n,o){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(0===n.length)return p.alloc(0);let c;if(void 0===o)for(o=0,c=0;c<n.length;++c)o+=n[c].length;const d=p.allocUnsafe(o);let h=0;for(c=0;c<n.length;++c){let g=n[c];if(it(g,Uint8Array))h+g.length>d.length?(p.isBuffer(g)||(g=p.from(g)),g.copy(d,h)):Uint8Array.prototype.set.call(d,g,h);else{if(!p.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(d,h)}h+=g.length}return d},p.byteLength=ot,p.prototype._isBuffer=!0,p.prototype.swap16=function(){const n=this.length;if(n%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let o=0;o<n;o+=2)ct(this,o,o+1);return this},p.prototype.swap32=function(){const n=this.length;if(n%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let o=0;o<n;o+=4)ct(this,o,o+3),ct(this,o+1,o+2);return this},p.prototype.swap64=function(){const n=this.length;if(n%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let o=0;o<n;o+=8)ct(this,o,o+7),ct(this,o+1,o+6),ct(this,o+2,o+5),ct(this,o+3,o+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){const n=this.length;return 0===n?"":0===arguments.length?kt(this,0,n):Q.apply(this,arguments)},p.prototype.equals=function(n){if(!p.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n||0===p.compare(this,n)},p.prototype.inspect=function(){let n="";const o=X.h2;return n=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(n+=" ... "),"<Buffer "+n+">"},I&&(p.prototype[I]=p.prototype.inspect),p.prototype.compare=function(n,o,c,d,h){if(it(n,Uint8Array)&&(n=p.from(n,n.offset,n.byteLength)),!p.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(void 0===o&&(o=0),void 0===c&&(c=n?n.length:0),void 0===d&&(d=0),void 0===h&&(h=this.length),o<0||c>n.length||d<0||h>this.length)throw new RangeError("out of range index");if(d>=h&&o>=c)return 0;if(d>=h)return-1;if(o>=c)return 1;if(this===n)return 0;let g=(h>>>=0)-(d>>>=0),y=(c>>>=0)-(o>>>=0);const R=Math.min(g,y),q=this.slice(d,h),B=n.slice(o,c);for(let L=0;L<R;++L)if(q[L]!==B[L]){g=q[L],y=B[L];break}return g<y?-1:y<g?1:0},p.prototype.includes=function(n,o,c){return-1!==this.indexOf(n,o,c)},p.prototype.indexOf=function(n,o,c){return Rt(this,n,o,c,!0)},p.prototype.lastIndexOf=function(n,o,c){return Rt(this,n,o,c,!1)},p.prototype.write=function(n,o,c,d){if(void 0===o)d="utf8",c=this.length,o=0;else if(void 0===c&&"string"==typeof o)d=o,c=this.length,o=0;else{if(!isFinite(o))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");o>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}const h=this.length-o;if((void 0===c||c>h)&&(c=h),n.length>0&&(c<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let g=!1;for(;;)switch(d){case"hex":return Yt(this,n,o,c);case"utf8":case"utf-8":return Gt(this,n,o,c);case"ascii":case"latin1":case"binary":return Qt(this,n,o,c);case"base64":return jt(this,n,o,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $t(this,n,o,c);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Kt=4096;function te(s,n,o){let c="";o=Math.min(s.length,o);for(let d=n;d<o;++d)c+=String.fromCharCode(127&s[d]);return c}function ht(s,n,o){let c="";o=Math.min(s.length,o);for(let d=n;d<o;++d)c+=String.fromCharCode(s[d]);return c}function bt(s,n,o){const c=s.length;(!n||n<0)&&(n=0),(!o||o<0||o>c)&&(o=c);let d="";for(let h=n;h<o;++h)d+=ie[s[h]];return d}function at(s,n,o){const c=s.slice(n,o);let d="";for(let h=0;h<c.length-1;h+=2)d+=String.fromCharCode(c[h]+256*c[h+1]);return d}function E(s,n,o){if(s%1!=0||s<0)throw new RangeError("offset is not uint");if(s+n>o)throw new RangeError("Trying to access beyond buffer length")}function U(s,n,o,c,d,h){if(!p.isBuffer(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>d||n<h)throw new RangeError('"value" argument is out of bounds');if(o+c>s.length)throw new RangeError("Index out of range")}function rt(s,n,o,c,d){mt(n,c,d,s,o,7);let h=Number(n&BigInt(4294967295));s[o++]=h,h>>=8,s[o++]=h,h>>=8,s[o++]=h,h>>=8,s[o++]=h;let g=Number(n>>BigInt(32)&BigInt(4294967295));return s[o++]=g,g>>=8,s[o++]=g,g>>=8,s[o++]=g,g>>=8,s[o++]=g,o}function F(s,n,o,c,d){mt(n,c,d,s,o,7);let h=Number(n&BigInt(4294967295));s[o+7]=h,h>>=8,s[o+6]=h,h>>=8,s[o+5]=h,h>>=8,s[o+4]=h;let g=Number(n>>BigInt(32)&BigInt(4294967295));return s[o+3]=g,g>>=8,s[o+2]=g,g>>=8,s[o+1]=g,g>>=8,s[o]=g,o+8}function ut(s,n,o,c,d,h){if(o+c>s.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function st(s,n,o,c,d){return n=+n,o>>>=0,d||ut(s,0,o,4),m.write(s,n,o,c,23,4),o+4}function V(s,n,o,c,d){return n=+n,o>>>=0,d||ut(s,0,o,8),m.write(s,n,o,c,52,8),o+8}p.prototype.slice=function(n,o){const c=this.length;(n=~~n)<0?(n+=c)<0&&(n=0):n>c&&(n=c),(o=void 0===o?c:~~o)<0?(o+=c)<0&&(o=0):o>c&&(o=c),o<n&&(o=n);const d=this.subarray(n,o);return Object.setPrototypeOf(d,p.prototype),d},p.prototype.readUintLE=p.prototype.readUIntLE=function(n,o,c){n>>>=0,o>>>=0,c||E(n,o,this.length);let d=this[n],h=1,g=0;for(;++g<o&&(h*=256);)d+=this[n+g]*h;return d},p.prototype.readUintBE=p.prototype.readUIntBE=function(n,o,c){n>>>=0,o>>>=0,c||E(n,o,this.length);let d=this[n+--o],h=1;for(;o>0&&(h*=256);)d+=this[n+--o]*h;return d},p.prototype.readUint8=p.prototype.readUInt8=function(n,o){return n>>>=0,o||E(n,1,this.length),this[n]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(n,o){return n>>>=0,o||E(n,2,this.length),this[n]|this[n+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(n,o){return n>>>=0,o||E(n,2,this.length),this[n]<<8|this[n+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(n,o){return n>>>=0,o||E(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+16777216*this[n+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(n,o){return n>>>=0,o||E(n,4,this.length),16777216*this[n]+(this[n+1]<<16|this[n+2]<<8|this[n+3])},p.prototype.readBigUInt64LE=lt(function(n){H(n>>>=0,"offset");const o=this[n],c=this[n+7];(void 0===o||void 0===c)&&z(n,this.length-8);const d=o+256*this[++n]+65536*this[++n]+this[++n]*2**24,h=this[++n]+256*this[++n]+65536*this[++n]+c*2**24;return BigInt(d)+(BigInt(h)<<BigInt(32))}),p.prototype.readBigUInt64BE=lt(function(n){H(n>>>=0,"offset");const o=this[n],c=this[n+7];(void 0===o||void 0===c)&&z(n,this.length-8);const d=o*2**24+65536*this[++n]+256*this[++n]+this[++n],h=this[++n]*2**24+65536*this[++n]+256*this[++n]+c;return(BigInt(d)<<BigInt(32))+BigInt(h)}),p.prototype.readIntLE=function(n,o,c){n>>>=0,o>>>=0,c||E(n,o,this.length);let d=this[n],h=1,g=0;for(;++g<o&&(h*=256);)d+=this[n+g]*h;return h*=128,d>=h&&(d-=Math.pow(2,8*o)),d},p.prototype.readIntBE=function(n,o,c){n>>>=0,o>>>=0,c||E(n,o,this.length);let d=o,h=1,g=this[n+--d];for(;d>0&&(h*=256);)g+=this[n+--d]*h;return h*=128,g>=h&&(g-=Math.pow(2,8*o)),g},p.prototype.readInt8=function(n,o){return n>>>=0,o||E(n,1,this.length),128&this[n]?-1*(255-this[n]+1):this[n]},p.prototype.readInt16LE=function(n,o){n>>>=0,o||E(n,2,this.length);const c=this[n]|this[n+1]<<8;return 32768&c?4294901760|c:c},p.prototype.readInt16BE=function(n,o){n>>>=0,o||E(n,2,this.length);const c=this[n+1]|this[n]<<8;return 32768&c?4294901760|c:c},p.prototype.readInt32LE=function(n,o){return n>>>=0,o||E(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},p.prototype.readInt32BE=function(n,o){return n>>>=0,o||E(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},p.prototype.readBigInt64LE=lt(function(n){H(n>>>=0,"offset");const o=this[n],c=this[n+7];return(void 0===o||void 0===c)&&z(n,this.length-8),(BigInt(this[n+4]+256*this[n+5]+65536*this[n+6]+(c<<24))<<BigInt(32))+BigInt(o+256*this[++n]+65536*this[++n]+this[++n]*2**24)}),p.prototype.readBigInt64BE=lt(function(n){H(n>>>=0,"offset");const o=this[n],c=this[n+7];(void 0===o||void 0===c)&&z(n,this.length-8);const d=(o<<24)+65536*this[++n]+256*this[++n]+this[++n];return(BigInt(d)<<BigInt(32))+BigInt(this[++n]*2**24+65536*this[++n]+256*this[++n]+c)}),p.prototype.readFloatLE=function(n,o){return n>>>=0,o||E(n,4,this.length),m.read(this,n,!0,23,4)},p.prototype.readFloatBE=function(n,o){return n>>>=0,o||E(n,4,this.length),m.read(this,n,!1,23,4)},p.prototype.readDoubleLE=function(n,o){return n>>>=0,o||E(n,8,this.length),m.read(this,n,!0,52,8)},p.prototype.readDoubleBE=function(n,o){return n>>>=0,o||E(n,8,this.length),m.read(this,n,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(n,o,c,d){n=+n,o>>>=0,c>>>=0,d||U(this,n,o,c,Math.pow(2,8*c)-1,0);let h=1,g=0;for(this[o]=255&n;++g<c&&(h*=256);)this[o+g]=n/h&255;return o+c},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(n,o,c,d){n=+n,o>>>=0,c>>>=0,d||U(this,n,o,c,Math.pow(2,8*c)-1,0);let h=c-1,g=1;for(this[o+h]=255&n;--h>=0&&(g*=256);)this[o+h]=n/g&255;return o+c},p.prototype.writeUint8=p.prototype.writeUInt8=function(n,o,c){return n=+n,o>>>=0,c||U(this,n,o,1,255,0),this[o]=255&n,o+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(n,o,c){return n=+n,o>>>=0,c||U(this,n,o,2,65535,0),this[o]=255&n,this[o+1]=n>>>8,o+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(n,o,c){return n=+n,o>>>=0,c||U(this,n,o,2,65535,0),this[o]=n>>>8,this[o+1]=255&n,o+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(n,o,c){return n=+n,o>>>=0,c||U(this,n,o,4,4294967295,0),this[o+3]=n>>>24,this[o+2]=n>>>16,this[o+1]=n>>>8,this[o]=255&n,o+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(n,o,c){return n=+n,o>>>=0,c||U(this,n,o,4,4294967295,0),this[o]=n>>>24,this[o+1]=n>>>16,this[o+2]=n>>>8,this[o+3]=255&n,o+4},p.prototype.writeBigUInt64LE=lt(function(n,o=0){return rt(this,n,o,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=lt(function(n,o=0){return F(this,n,o,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(n,o,c,d){if(n=+n,o>>>=0,!d){const R=Math.pow(2,8*c-1);U(this,n,o,c,R-1,-R)}let h=0,g=1,y=0;for(this[o]=255&n;++h<c&&(g*=256);)n<0&&0===y&&0!==this[o+h-1]&&(y=1),this[o+h]=(n/g>>0)-y&255;return o+c},p.prototype.writeIntBE=function(n,o,c,d){if(n=+n,o>>>=0,!d){const R=Math.pow(2,8*c-1);U(this,n,o,c,R-1,-R)}let h=c-1,g=1,y=0;for(this[o+h]=255&n;--h>=0&&(g*=256);)n<0&&0===y&&0!==this[o+h+1]&&(y=1),this[o+h]=(n/g>>0)-y&255;return o+c},p.prototype.writeInt8=function(n,o,c){return n=+n,o>>>=0,c||U(this,n,o,1,127,-128),n<0&&(n=255+n+1),this[o]=255&n,o+1},p.prototype.writeInt16LE=function(n,o,c){return n=+n,o>>>=0,c||U(this,n,o,2,32767,-32768),this[o]=255&n,this[o+1]=n>>>8,o+2},p.prototype.writeInt16BE=function(n,o,c){return n=+n,o>>>=0,c||U(this,n,o,2,32767,-32768),this[o]=n>>>8,this[o+1]=255&n,o+2},p.prototype.writeInt32LE=function(n,o,c){return n=+n,o>>>=0,c||U(this,n,o,4,2147483647,-2147483648),this[o]=255&n,this[o+1]=n>>>8,this[o+2]=n>>>16,this[o+3]=n>>>24,o+4},p.prototype.writeInt32BE=function(n,o,c){return n=+n,o>>>=0,c||U(this,n,o,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[o]=n>>>24,this[o+1]=n>>>16,this[o+2]=n>>>8,this[o+3]=255&n,o+4},p.prototype.writeBigInt64LE=lt(function(n,o=0){return rt(this,n,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=lt(function(n,o=0){return F(this,n,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(n,o,c){return st(this,n,o,!0,c)},p.prototype.writeFloatBE=function(n,o,c){return st(this,n,o,!1,c)},p.prototype.writeDoubleLE=function(n,o,c){return V(this,n,o,!0,c)},p.prototype.writeDoubleBE=function(n,o,c){return V(this,n,o,!1,c)},p.prototype.copy=function(n,o,c,d){if(!p.isBuffer(n))throw new TypeError("argument should be a Buffer");if(c||(c=0),!d&&0!==d&&(d=this.length),o>=n.length&&(o=n.length),o||(o=0),d>0&&d<c&&(d=c),d===c||0===n.length||0===this.length)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),n.length-o<d-c&&(d=n.length-o+c);const h=d-c;return this===n&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(o,c,d):Uint8Array.prototype.set.call(n,this.subarray(c,d),o),h},p.prototype.fill=function(n,o,c,d){if("string"==typeof n){if("string"==typeof o?(d=o,o=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!p.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(1===n.length){const g=n.charCodeAt(0);("utf8"===d&&g<128||"latin1"===d)&&(n=g)}}else"number"==typeof n?n&=255:"boolean"==typeof n&&(n=Number(n));if(o<0||this.length<o||this.length<c)throw new RangeError("Out of range index");if(c<=o)return this;let h;if(o>>>=0,c=void 0===c?this.length:c>>>0,n||(n=0),"number"==typeof n)for(h=o;h<c;++h)this[h]=n;else{const g=p.isBuffer(n)?n:p.from(n,d),y=g.length;if(0===y)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(h=0;h<c-o;++h)this[h+o]=g[h%y]}return this};const j={};function dt(s,n,o){j[s]=class extends o{constructor(){super(),Object.defineProperty(this,"message",{value:n.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${s}]`,delete this.name}get code(){return s}set code(d){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:d,writable:!0})}toString(){return`${this.name} [${s}]: ${this.message}`}}}function Vt(s){let n="",o=s.length;const c="-"===s[0]?1:0;for(;o>=c+4;o-=3)n=`_${s.slice(o-3,o)}${n}`;return`${s.slice(0,o)}${n}`}function mt(s,n,o,c,d,h){if(s>o||s<n){const g="bigint"==typeof n?"n":"";let y;throw y=h>3?0===n||n===BigInt(0)?`>= 0${g} and < 2${g} ** ${8*(h+1)}${g}`:`>= -(2${g} ** ${8*(h+1)-1}${g}) and < 2 ** ${8*(h+1)-1}${g}`:`>= ${n}${g} and <= ${o}${g}`,new j.ERR_OUT_OF_RANGE("value",y,s)}!function $(s,n,o){H(n,"offset"),(void 0===s[n]||void 0===s[n+o])&&z(n,s.length-(o+1))}(c,d,h)}function H(s,n){if("number"!=typeof s)throw new j.ERR_INVALID_ARG_TYPE(n,"number",s)}function z(s,n,o){throw Math.floor(s)!==s?(H(s,o),new j.ERR_OUT_OF_RANGE(o||"offset","an integer",s)):n<0?new j.ERR_BUFFER_OUT_OF_BOUNDS:new j.ERR_OUT_OF_RANGE(o||"offset",`>= ${o?1:0} and <= ${n}`,s)}dt("ERR_BUFFER_OUT_OF_BOUNDS",function(s){return s?`${s} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),dt("ERR_INVALID_ARG_TYPE",function(s,n){return`The "${s}" argument must be of type number. Received type ${typeof n}`},TypeError),dt("ERR_OUT_OF_RANGE",function(s,n,o){let c=`The value of "${s}" is out of range.`,d=o;return Number.isInteger(o)&&Math.abs(o)>2**32?d=Vt(String(o)):"bigint"==typeof o&&(d=String(o),(o>BigInt(2)**BigInt(32)||o<-(BigInt(2)**BigInt(32)))&&(d=Vt(d)),d+="n"),c+=` It must be ${n}. Received ${d}`,c},RangeError);const tt=/[^+/0-9A-Za-z-_]/g;function pt(s,n){let o;n=n||1/0;const c=s.length;let d=null;const h=[];for(let g=0;g<c;++g){if(o=s.charCodeAt(g),o>55295&&o<57344){if(!d){if(o>56319){(n-=3)>-1&&h.push(239,191,189);continue}if(g+1===c){(n-=3)>-1&&h.push(239,191,189);continue}d=o;continue}if(o<56320){(n-=3)>-1&&h.push(239,191,189),d=o;continue}o=65536+(d-55296<<10|o-56320)}else d&&(n-=3)>-1&&h.push(239,191,189);if(d=null,o<128){if((n-=1)<0)break;h.push(o)}else if(o<2048){if((n-=2)<0)break;h.push(o>>6|192,63&o|128)}else if(o<65536){if((n-=3)<0)break;h.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;h.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return h}function Ht(s){return x.toByteArray(function Ot(s){if((s=(s=s.split("=")[0]).trim().replace(tt,"")).length<2)return"";for(;s.length%4!=0;)s+="=";return s}(s))}function vt(s,n,o,c){let d;for(d=0;d<c&&!(d+o>=n.length||d>=s.length);++d)n[d+o]=s[d];return d}function it(s,n){return s instanceof n||null!=s&&null!=s.constructor&&null!=s.constructor.name&&s.constructor.name===n.name}function Dt(s){return s!=s}const ie=function(){const s="0123456789abcdef",n=new Array(256);for(let o=0;o<16;++o){const c=16*o;for(let d=0;d<16;++d)n[c+d]=s[o]+s[d]}return n}();function lt(s){return typeof BigInt>"u"?ne:s}function ne(){throw new Error("BigInt not supported")}},8461:(Jt,X)=>{X.read=function(f,_,x,m,I){var O,t,D=8*I-m-1,p=(1<<D)-1,J=p>>1,N=-7,T=x?I-1:0,K=x?-1:1,C=f[_+T];for(T+=K,O=C&(1<<-N)-1,C>>=-N,N+=D;N>0;O=256*O+f[_+T],T+=K,N-=8);for(t=O&(1<<-N)-1,O>>=-N,N+=m;N>0;t=256*t+f[_+T],T+=K,N-=8);if(0===O)O=1-J;else{if(O===p)return t?NaN:1/0*(C?-1:1);t+=Math.pow(2,m),O-=J}return(C?-1:1)*t*Math.pow(2,O-m)},X.write=function(f,_,x,m,I,O){var t,D,p,J=8*O-I-1,N=(1<<J)-1,T=N>>1,K=23===I?Math.pow(2,-24)-Math.pow(2,-77):0,C=m?0:O-1,A=m?1:-1,v=_<0||0===_&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(D=isNaN(_)?1:0,t=N):(t=Math.floor(Math.log(_)/Math.LN2),_*(p=Math.pow(2,-t))<1&&(t--,p*=2),(_+=t+T>=1?K/p:K*Math.pow(2,1-T))*p>=2&&(t++,p/=2),t+T>=N?(D=0,t=N):t+T>=1?(D=(_*p-1)*Math.pow(2,I),t+=T):(D=_*Math.pow(2,T-1)*Math.pow(2,I),t=0));I>=8;f[x+C]=255&D,C+=A,D/=256,I-=8);for(t=t<<I|D,J+=I;J>0;f[x+C]=255&t,C+=A,t/=256,J-=8);f[x+C-A]|=128*v}}}]);