"use strict";(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[592],{5346:(f,m,s)=>{s.d(m,{n:()=>t});var n=s(7579),r=s(4650);class t{constructor(){this.totalInfo=new n.x}setInfo(l){this.totalInfo.next(l)}}t.\u0275fac=function(l){return new(l||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})},3221:(f,m,s)=>{s.d(m,{y:()=>C});var n=s(2340),r=s(5783),t=s(4650),o=s(4006),l=s(9132),P=s(7009),g=s(3071),p=s(5298),u=s(7465),_=s(3081),O=s(5412),M=s(4165),b=s(1182),v=s(6895),x=s(4333),E=s(1576),D=s(4859),A=s(3546),T=s(7392),U=s(266);function y(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(i);const d=t.oxw(2);return t.KtG(d.onClickUsed())}),t.TgZ(1,"mat-icon"),t._uU(2,"vpn_key"),t.qZA()()}}function I(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(i);const d=t.oxw().$implicit,h=t.oxw();return t.KtG(h.onClickSendItToUser(h.AllPermissionsDisplayed,d.codename))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"lock"),t.qZA()()}2&a&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.Transfer"))}function Z(a,e){if(1&a&&(t.TgZ(0,"div",10)(1,"div",11),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",12),t._uU(5),t.qZA(),t.TgZ(6,"div",11)(7,"div",13),t.YNc(8,y,3,0,"button",14),t.YNc(9,I,4,3,"button",15),t.qZA()()()),2&a){const i=e.$implicit,c=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"SECURITY."+i.codename)),t.xp6(3),t.Oqu(i.codename),t.xp6(3),t.Q6J("ngIf",c.can("add_emp_security_onepermission")&&c.userPerm.indexOf(i.codename)>-1),t.xp6(1),t.Q6J("ngIf",c.can("add_emp_security_onepermission")&&-1==c.userPerm.indexOf(i.codename))}}function L(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div")(1,"div",18)(2,"mat-card",19)(3,"pagination-controls",20),t.NdJ("pageChange",function(d){t.CHM(i);const h=t.oxw();return t.KtG(h.onPageChanged(d))}),t.qZA()()()()}}function S(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(i);const d=t.oxw().$implicit,h=t.oxw();return t.KtG(h.onClickDeletePerm(d.codename))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&a&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function R(a,e){if(1&a&&(t.TgZ(0,"div",10)(1,"div",21),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",11)(5,"div",13),t.YNc(6,S,4,3,"button",15),t.qZA()()()),2&a){const i=e.$implicit,c=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,2,"SECURITY."+i.codename)," "),t.xp6(4),t.Q6J("ngIf",c.can("delete_emp_security_onepermission"))}}function w(a,e){if(1&a){const i=t.EpF();t.TgZ(0,"div")(1,"div",18)(2,"mat-card",19)(3,"pagination-controls",22),t.NdJ("pageChange",function(d){t.CHM(i);const h=t.oxw();return t.KtG(h.onUserPageChanged(d))}),t.qZA()()()()}}class C{constructor(e,i,c,d,h,B,K,k,F,W,Y,N){this.formBuilder=e,this.router=i,this.snackBar=c,this.userService=d,this.activatedRoute=h,this.localStore=B,this.global=K,this.translateService=k,this.fb=F,this.dialog=W,this.settingService=Y,this.appSettings=N,this.countAll=6,this.countPerUser=6,this.curCOMId=n.N.comid,this.account=new r.n,this.tempuserPerm=[],this.AllPermissions=[],this.AllPermissionsDisplayed=[],this.tempDisplayed=[],this.UserPermissions=[],this.userPerm=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.tempuserPerm[e]=this.curUserPermissions[e].codename;this.getAllPermissions()}this.sub=this.activatedRoute.params.subscribe(e=>{e.id&&(this.id=+e.id,console.log("params['id']:: "+this.id),this.getUserPermissions(+this.id))})}can(e){return!(!this.curUserData.is_superuser&&!this.tempuserPerm.includes(e))}refreshDisplayed(e){this.AllPermissionsDisplayed=e,this.config={id:"basicPaginate",itemsPerPage:this.countAll,currentPage:1,totalItems:this.AllPermissionsDisplayed.length}}getAllPermissions(){this.userService.getAllPermission().subscribe(e=>{this.AllPermissions=e,this.refreshDisplayed(this.AllPermissions),this.tempDisplayed=e,this.config={id:"basicPaginate",itemsPerPage:this.countAll,currentPage:1,totalItems:this.AllPermissions.length}},e=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUserPermissions(e){this.userService.getUserPermission(e).subscribe(i=>{this.UserPermissions=i.user_permissions,this.userConfig={id:"userPaginate",itemsPerPage:this.countPerUser,currentPage:1,totalItems:this.UserPermissions.length},this.userPermInArray()},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}userPermInArray(){for(let e=0;e<this.UserPermissions.length;e++)this.userPerm[e]=this.UserPermissions[e].codename,console.log("this.userPerm[i]:: "+this.userPerm[e])}manageAllPermissionsDisplayed(){console.log("this.userPerm:: "+this.userPerm),this.tempDisplayed.forEach((e,i)=>{this.userPerm.includes(this.tempDisplayed[i].codename)&&(console.log("**included:: "+this.tempDisplayed[i].codename),delete this.tempDisplayed[i])}),this.refreshDisplayed(this.tempDisplayed)}onClickSendItToUser(e,i){console.log("----// Add it to Table  ----//"),this.userService.addUserPerm(this.id,i).subscribe(c=>{this.refreshDisplayed(e),this.getUserPermissions(this.id)})}onClickDeletePerm(e){console.log("----// Remove Perm from Table  ----//"),this.userService.removeUserPerm(this.id,e).subscribe(i=>{this.getUserPermissions(this.id)})}onClickUsed(){console.log("--** it is used so, will not do anything **--")}onPageChanged(e){this.config.currentPage=e}onUserPageChanged(e){this.userConfig.currentPage=e}onLoginFormSubmit(e){}onRegisterFormSubmit(e){}}C.\u0275fac=function(e){return new(e||C)(t.Y36(o.QS),t.Y36(l.F0),t.Y36(P.ux),t.Y36(g.K),t.Y36(l.gz),t.Y36(p.C),t.Y36(u.U),t.Y36(_.sK),t.Y36(o.qu),t.Y36(O.uw),t.Y36(M.g),t.Y36(b.d))},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-emp-security-dialog"]],decls:29,vars:19,consts:[[1,"p-4"],["fxLayout","row"],["fxFlex","100","fxFlex.gt-sm","50",1,"p-3"],[1,"mat-mdc-table","permission-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","10",1,"p-3"],["fxFlex","100","fxFlex.gt-sm","35",1,"p-3"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"mat-mdc-cell","primary-text","notifbold"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxFlex","100"],[1,"p-0","text-center"],["id","basicPaginate","autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],[1,"mat-mdc-cell","selectedbold"],["id","userPaginate","autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"div",5)(10,"h2"),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t._UZ(13,"div",5),t.qZA(),t.YNc(14,Z,10,6,"div",6),t.ALo(15,"paginate"),t.qZA(),t.YNc(16,L,4,0,"div",7),t.qZA(),t._UZ(17,"div",8),t.TgZ(18,"div",9)(19,"div",3)(20,"div",4)(21,"div",5)(22,"h2"),t._uU(23),t.ALo(24,"translate"),t.qZA()(),t._UZ(25,"div",5),t.qZA(),t.YNc(26,R,7,4,"div",6),t.ALo(27,"paginate"),t.qZA(),t.YNc(28,w,4,0,"div",7),t.qZA()()()),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,7,"HTML.Description")," "),t.xp6(4),t.hij(" ",t.lcZ(12,9,"HTML.CODE")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(15,11,i.AllPermissionsDisplayed,i.config)),t.xp6(2),t.Q6J("ngIf",i.AllPermissionsDisplayed.length>0),t.xp6(7),t.hij(" ",t.lcZ(24,14,"HTML.CODE")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(27,16,i.UserPermissions,i.userConfig)),t.xp6(2),t.Q6J("ngIf",i.UserPermissions.length>0))},dependencies:[v.sg,v.O5,x.LS,E.xw,E.yH,D.nh,A.a8,T.Hw,U.gM,x._s,_.X$],styles:[".auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}.notifbold[_ngcontent-%COMP%]{font-weight:700}.selectedbold[_ngcontent-%COMP%]{font-weight:700;color:green}.permission-table.mat-mdc-table[_ngcontent-%COMP%]{display:block;overflow-x:auto}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-row[_ngcontent-%COMP%], .permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%]{display:flex;border-bottom-width:1px;border-bottom-style:solid;align-items:center;min-height:48px;padding:0 16px}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%], .permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{flex:1;overflow:hidden;word-wrap:break-word;padding:0 8px}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell.image[_ngcontent-%COMP%], .permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell.image[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0;flex-basis:60px}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;border-radius:50%;margin:4px 0}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell.status[_ngcontent-%COMP%], .permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell.status[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0;flex-basis:32px}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell.ratings[_ngcontent-%COMP%], .permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell.ratings[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0;flex-basis:80px}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:14px}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{text-align:right}.permission-table.mat-mdc-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 4px}.permission-table.mat-mdc-table.header-sm[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%]{min-height:36px}.permission-table.mat-mdc-table.truncated[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%], .permission-table.mat-mdc-table.truncated[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis}"]})},7288:(f,m,s)=>{s.d(m,{j:()=>n});class n{}},9515:(f,m,s)=>{s.d(m,{A:()=>g});var n=s(4650),r=s(6895),t=s(1576),o=s(7392);function l(p,u){if(1&p){const _=n.EpF();n.TgZ(0,"mat-icon",4),n.NdJ("click",function(){const b=n.CHM(_).index,v=n.oxw();return n.KtG(v.rate(b))}),n._uU(1),n.qZA()}if(2&p){const _=u.$implicit;n.xp6(1),n.Oqu(_)}}function P(p,u){if(1&p&&(n.TgZ(0,"p",5),n._uU(1),n.qZA()),2&p){const _=n.oxw();n.xp6(1),n.hij("",_.ratingsCount," ratings")}}class g{constructor(){this.showText=!0}ngDoCheck(){this.ratingsCount&&this.ratingsValue&&!this.avg&&this.calculateAvgValue()}rate(u){}calculateAvgValue(){switch(this.avg=this.ratingsValue/this.ratingsCount,!0){case this.avg>0&&this.avg<20:this.stars=["star_half","star_border","star_border","star_border","star_border"];break;case 20==this.avg:this.stars=["star","star_border","star_border","star_border","star_border"];break;case this.avg>20&&this.avg<40:this.stars=["star","star_half","star_border","star_border","star_border"];break;case 40==this.avg:this.stars=["star","star","star_border","star_border","star_border"];break;case this.avg>40&&this.avg<60:this.stars=["star","star","star_half","star_border","star_border"];break;case 60==this.avg:this.stars=["star","star","star","star_border","star_border"];break;case this.avg>60&&this.avg<80:this.stars=["star","star","star","star_half","star_border"];break;case 80==this.avg:this.stars=["star","star","star","star","star_border"];break;case this.avg>80&&this.avg<100:this.stars=["star","star","star","star","star_half"];break;case this.avg>=100:this.stars=["star","star","star","star","star"];break;default:this.stars=["star_border","star_border","star_border","star_border","star_border"]}}}g.\u0275fac=function(u){return new(u||g)},g.\u0275cmp=n.Xpm({type:g,selectors:[["app-rating"]],inputs:{ratingsCount:"ratingsCount",ratingsValue:"ratingsValue",direction:"direction",showText:"showText"},decls:4,vars:4,consts:[[3,"fxLayout","fxLayoutAlign"],[1,"ratings"],["class","mat-icon-xs",3,"click",4,"ngFor","ngForOf"],["class","ratings-count text-muted",4,"ngIf"],[1,"mat-icon-xs",3,"click"],[1,"ratings-count","text-muted"]],template:function(u,_){1&u&&(n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,l,2,1,"mat-icon",2),n.qZA(),n.YNc(3,P,2,1,"p",3),n.qZA()),2&u&&(n.Q6J("fxLayout",_.direction)("fxLayoutAlign","row"==_.direction?"start center":"center end"),n.xp6(2),n.Q6J("ngForOf",_.stars),n.xp6(1),n.Q6J("ngIf",_.showText))},dependencies:[r.sg,r.O5,t.xw,t.Wh,o.Hw],styles:[".ratings[_ngcontent-%COMP%]{color:#fbc02d}.ratings-count[_ngcontent-%COMP%]{margin-left:12px;font-weight:500}"]})},6660:(f,m,s)=>{s.d(m,{H:()=>r});var n=s(4650);class r{transform(o,l){return o.filter(P=>P.id==l)[0]}}r.\u0275fac=function(o){return new(o||r)},r.\u0275pipe=n.Yjl({name:"filterById",type:r,pure:!0})},8955:(f,m,s)=>{function n(t){if(t.value&&!/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$/.test(t.value))return{invalidEmail:!0}}function r(t,o){return l=>{let g=l.controls[o];if(l.controls[t].value!==g.value)return g.setErrors({mismatchedPasswords:!0})}}s.d(m,{L:()=>n,z:()=>r})}}]);