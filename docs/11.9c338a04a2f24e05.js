"use strict";(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[11],{2011:(z,g,s)=>{s.r(g),s.d(g,{SignInModule:()=>a,routes:()=>A});var c=s(6895),p=s(9132),n=s(4006),I=s(5494),d=s(8955),f=s(3071),h=s(2340),L=s(5783),r=s(4650),T=s(7009),S=s(5298),M=s(7465),v=s(2854),Z=s(3081),l=s(1576),E=s(5829),x=s(4859),F=s(3546),q=s(7392),U=s(4144),m=s(9549);function C(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"HTML.USERNAMEREQ")))}function O(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"MESSAGE.MinLength")))}function N(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"HTML.PasswordREQ")))}function w(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"MESSAGE.MinLength6")))}function _(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"HTML.USERNAMEREQ")))}function R(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"MESSAGE.MinLength")))}function b(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"HTML.FirstNameREQ")))}function P(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"MESSAGE.MinLength")))}function H(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"HTML.EmailREQ")))}function Q(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"HTML.InvalidEmail")))}function Y(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"HTML.PasswordREQ")))}function J(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"MESSAGE.MinLength6")))}function G(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"HTML.ConfirmPasswordREQ")))}function y(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"HTML.MismatchPassword")))}class i{constructor(t,o,u,B,k,D,K,W){this.formBuilder=t,this.router=o,this.snackBar=u,this.localStore=B,this.userService=k,this.global=D,this.staff=K,this.translateService=W,this.curCOMId=h.N.comid,this.curBraId=h.N.braid,this.account=new L.n}ngOnInit(){this.loginForm=this.formBuilder.group({username:["",n.kI.compose([n.kI.required,n.kI.minLength(3)])],password:["",n.kI.compose([n.kI.required,n.kI.minLength(6)])]}),this.registerForm=this.formBuilder.group({username:["",n.kI.compose([n.kI.required,n.kI.minLength(3)])],first_name:["",n.kI.compose([n.kI.required,n.kI.minLength(3)])],email:["",n.kI.compose([n.kI.required,d.L])],password:["",n.kI.required],confirmPassword:["",n.kI.required]},{validator:(0,d.z)("password","confirmPassword")}),this.prepareMsgLanguage(),this.setInitialValues()}prepareMsgLanguage(){this.translateService.get("MESSAGE.LOGGEDIN").subscribe(t=>{this.loggedInMsg=t}),this.translateService.get("MESSAGE.NOTLOGGEDIN").subscribe(t=>{this.notLoggedInMsg=t}),this.translateService.get("MESSAGE.REGISTERD").subscribe(t=>{this.registeredMsg=t}),this.translateService.get("MESSAGE.NOTREGISTERD").subscribe(t=>{this.notRegisteredMsg=t})}getOneUser(t){console.log("**** sign-in.component line 103 *****getOneUser::: "+t),this.staff.getOneUserbyId(t).subscribe(o=>{this.global.me=o,console.log(o.userPicture)})}onLoginFormSubmit(t){this.loginForm.valid&&this.userService.login(this.loginForm).subscribe(o=>{this.localStore.setItem("token",o.token),this.global.me=o.user,this.global.userLoggedIn=!0,console.log("**** =====Start===this.global.me======= ****"),console.log(o.user),console.log("**** ========this.global.me===End==== ****"),this.prepareMsgLanguage(),this.snackBar.open(this.loggedInMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["/"]).then(()=>{window.location.reload()})},o=>{this.global.userLoggedIn=!1,this.prepareMsgLanguage(),this.snackBar.open(this.notLoggedInMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3}),this.router.navigate(["/sign-in"])})}onRegisterFormSubmit(t){console.log("************************************************"),console.log("=====values[username]"+t.username),console.log("=====values[email]"+t.email),this.registerForm.valid?this.userService.registerUser(this.registerForm).subscribe(o=>{this.snackBar.open(this.registeredMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["/units/unit"])},o=>{console.log("error",o),this.snackBar.open(this.notRegisteredMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):(console.log("this.registerForm not valid"),this.snackBar.open(this.notRegisteredMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3}))}setInitialValues(){this.newUser={id:null,username:"",UserCode:null,first_name:"",last_name:"",UserBirthDate:null,EntryDate:null,joinedDate:null,UserMobile:"",email:"",is_superuser:!1,is_staff:!1,is_active:!0,is_employee:"T",periorty:0,COMId:this.curCOMId,branch_KeyField:null,userPicture:null,gender:"",password:"",repassword:"",is_teacher:"F",RowDelete:0,LoginFrom:"N",userJobName:"",userFacebook:"",userTwitter:"",userGoogle:"",userAddress:""}}mapRegisterFormTo_UserClass(){this.newUser.username=this.registerForm.value.username,this.newUser.email=this.registerForm.value.email,this.newUser.password=this.registerForm.value.password,this.newUser.repassword=this.registerForm.value.confirmPassword}mapToOneUser(){this.oneuser.username=this.registerForm.value.username,this.oneuser.email=this.registerForm.value.email}}i.\u0275fac=function(t){return new(t||i)(r.Y36(n.QS),r.Y36(p.F0),r.Y36(T.ux),r.Y36(S.C),r.Y36(f.K),r.Y36(M.U),r.Y36(v.x),r.Y36(Z.sK))},i.\u0275cmp=r.Xpm({type:i,selectors:[["app-sign-in"]],features:[r._Bn([f.K])],decls:82,vars:67,consts:[[1,"p-4"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","50",1,"p-3"],[1,"text-muted","text-center","mb-3"],[3,"formGroup"],["appearance","outline",1,"w-100","mt-2"],["matInput","","formControlName","username","required","",3,"placeholder"],[4,"ngIf"],["appearance","outline",1,"w-100","mt-1"],["matInput","","formControlName","password","type","password","required","",3,"placeholder"],[1,"text-center","mt-2"],["mat-fab","","color","primary",1,"mat-elevation-z6",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mt-3"],[1,"divider","w-100"],[1,"text-muted","auth"],["fxFlex","100","fxFlex.gt-sm","50","ngClass.sm","mt-3","ngClass.xs","mt-3",1,"p-3"],["matInput","","formControlName","first_name","required","",3,"placeholder"],["matInput","","formControlName","email","required","",3,"placeholder"],["matInput","","formControlName","password","type","password","minlength","6","required","",3,"placeholder"],["matInput","","formControlName","confirmPassword","type","password","required","",3,"placeholder"]],template:function(t,o){1&t&&(r.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),r._uU(4),r.ALo(5,"translate"),r.qZA(),r.TgZ(6,"form",4)(7,"mat-form-field",5)(8,"mat-label"),r._uU(9),r.ALo(10,"translate"),r.qZA(),r._UZ(11,"input",6),r.ALo(12,"translate"),r.YNc(13,C,3,3,"mat-error",7),r.YNc(14,O,3,3,"mat-error",7),r.qZA(),r.TgZ(15,"mat-form-field",8)(16,"mat-label"),r._uU(17),r.ALo(18,"translate"),r.qZA(),r._UZ(19,"input",9),r.ALo(20,"translate"),r.YNc(21,N,3,3,"mat-error",7),r.YNc(22,w,3,3,"mat-error",7),r.qZA(),r.TgZ(23,"div",10)(24,"button",11),r.NdJ("click",function(){return o.onLoginFormSubmit(o.loginForm.value)}),r.TgZ(25,"mat-icon"),r._uU(26,"exit_to_app"),r.qZA()()(),r.TgZ(27,"div",12),r._UZ(28,"div",13),r.TgZ(29,"h3",14),r._uU(30),r.ALo(31,"translate"),r.qZA(),r._UZ(32,"div",13),r.qZA()()(),r.TgZ(33,"div",15)(34,"h2",3),r._uU(35),r.ALo(36,"translate"),r.qZA(),r.TgZ(37,"form",4)(38,"mat-form-field",5)(39,"mat-label"),r._uU(40),r.ALo(41,"translate"),r.qZA(),r._UZ(42,"input",6),r.ALo(43,"translate"),r.YNc(44,_,3,3,"mat-error",7),r.YNc(45,R,3,3,"mat-error",7),r.qZA(),r.TgZ(46,"mat-form-field",5)(47,"mat-label"),r._uU(48),r.ALo(49,"translate"),r.qZA(),r._UZ(50,"input",16),r.ALo(51,"translate"),r.YNc(52,b,3,3,"mat-error",7),r.YNc(53,P,3,3,"mat-error",7),r.qZA(),r.TgZ(54,"mat-form-field",8)(55,"mat-label"),r._uU(56),r.ALo(57,"translate"),r.qZA(),r._UZ(58,"input",17),r.ALo(59,"translate"),r.YNc(60,H,3,3,"mat-error",7),r.YNc(61,Q,3,3,"mat-error",7),r.qZA(),r.TgZ(62,"mat-form-field",8)(63,"mat-label"),r._uU(64),r.ALo(65,"translate"),r.qZA(),r._UZ(66,"input",18),r.ALo(67,"translate"),r.YNc(68,Y,3,3,"mat-error",7),r.YNc(69,J,3,3,"mat-error",7),r.qZA(),r.TgZ(70,"mat-form-field",8)(71,"mat-label"),r._uU(72),r.ALo(73,"translate"),r.qZA(),r._UZ(74,"input",19),r.ALo(75,"translate"),r.YNc(76,G,3,3,"mat-error",7),r.YNc(77,y,3,3,"mat-error",7),r.qZA(),r.TgZ(78,"div",10)(79,"button",11),r.NdJ("click",function(){return o.onRegisterFormSubmit(o.registerForm.value)}),r.TgZ(80,"mat-icon"),r._uU(81,"person_add"),r.qZA()()()()()()()),2&t&&(r.xp6(4),r.Oqu(r.lcZ(5,33,"HTML.SIGNIN")),r.xp6(2),r.Q6J("formGroup",o.loginForm),r.xp6(3),r.Oqu(r.lcZ(10,35,"HTML.USERNAME")),r.xp6(2),r.s9C("placeholder",r.lcZ(12,37,"HTML.USERNAME")),r.xp6(2),r.Q6J("ngIf",null==o.loginForm.controls.username.errors?null:o.loginForm.controls.username.errors.required),r.xp6(1),r.Q6J("ngIf",o.loginForm.controls.username.hasError("minlength")),r.xp6(3),r.Oqu(r.lcZ(18,39,"HTML.PASSWORD")),r.xp6(2),r.s9C("placeholder",r.lcZ(20,41,"HTML.PASSWORD")),r.xp6(2),r.Q6J("ngIf",null==o.loginForm.controls.password.errors?null:o.loginForm.controls.password.errors.required),r.xp6(1),r.Q6J("ngIf",o.loginForm.controls.password.hasError("minlength")),r.xp6(8),r.Oqu(r.lcZ(31,43,"COMPANY.NAME")),r.xp6(5),r.Oqu(r.lcZ(36,45,"MESSAGE.RegisterMsg")),r.xp6(2),r.Q6J("formGroup",o.registerForm),r.xp6(3),r.Oqu(r.lcZ(41,47,"HTML.USERNAME")),r.xp6(2),r.s9C("placeholder",r.lcZ(43,49,"HTML.USERNAME")),r.xp6(2),r.Q6J("ngIf",null==o.registerForm.controls.username.errors?null:o.registerForm.controls.username.errors.required),r.xp6(1),r.Q6J("ngIf",o.registerForm.controls.username.hasError("minlength")),r.xp6(3),r.Oqu(r.lcZ(49,51,"HTML.FIRST_NAME")),r.xp6(2),r.s9C("placeholder",r.lcZ(51,53,"HTML.FIRST_NAME")),r.xp6(2),r.Q6J("ngIf",null==o.registerForm.controls.first_name.errors?null:o.registerForm.controls.first_name.errors.required),r.xp6(1),r.Q6J("ngIf",o.registerForm.controls.first_name.hasError("minlength")),r.xp6(3),r.Oqu(r.lcZ(57,55,"HTML.EMAIL")),r.xp6(2),r.s9C("placeholder",r.lcZ(59,57,"HTML.EMAIL")),r.xp6(2),r.Q6J("ngIf",null==o.registerForm.controls.email.errors?null:o.registerForm.controls.email.errors.required),r.xp6(1),r.Q6J("ngIf",o.registerForm.controls.email.hasError("invalidEmail")),r.xp6(3),r.Oqu(r.lcZ(65,59,"HTML.PASSWORD")),r.xp6(2),r.s9C("placeholder",r.lcZ(67,61,"HTML.PASSWORD")),r.xp6(2),r.Q6J("ngIf",null==o.registerForm.controls.password.errors?null:o.registerForm.controls.password.errors.required),r.xp6(1),r.Q6J("ngIf",o.registerForm.controls.password.hasError("minlength")),r.xp6(3),r.Oqu(r.lcZ(73,63,"HTML.ConfirmPassword")),r.xp6(2),r.s9C("placeholder",r.lcZ(75,65,"HTML.ConfirmPassword")),r.xp6(2),r.Q6J("ngIf",null==o.registerForm.controls.confirmPassword.errors?null:o.registerForm.controls.confirmPassword.errors.required),r.xp6(1),r.Q6J("ngIf",o.registerForm.controls.confirmPassword.hasError("mismatchedPasswords")))},dependencies:[c.O5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.wO,n.sg,n.u,l.xw,l.Wh,l.yH,E.oO,x.cs,F.a8,q.Hw,U.Nt,m.KE,m.hX,m.TO,Z.X$],styles:[".auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});const A=[{path:"",component:i,pathMatch:"full"}];class a{}a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[c.ez,p.Bz.forChild(A),n.UX,I.m]})}}]);