"use strict";(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[455],{1455:(Ti,Ct,l)=>{l.r(Ct),l.d(Ct,{ContractsModule:()=>$,routes:()=>bt});var c=l(6895),d=l(5412),s=l(4006),lt=l(8955),y=l(2340),t=l(4650),B=l(6002),Z=l(5298),ct=l(3705),x=l(7009),u=l(1576),q=l(3238),T=l(4859),N=l(4144),p=l(9549),M=l(4385),g=l(3081);function yt(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.USERNAMEREQ")))}function Ot(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength")))}function Dt(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.EmailREQ")))}function xt(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.InvalidEmail")))}function Lt(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.FirstNameREQ")))}function Nt(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength")))}function It(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.LastNameREQ")))}function Ut(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength")))}function Ft(i,e){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.BRAArbName," ")}}function St(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Mobile is required"),t.qZA())}function wt(i,e){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.BUIName," ")}}function qt(i,e){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.UNTUnitNumber," ")}}function Mt(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.PasswordREQ")))}function Et(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength6")))}function Rt(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.ConfirmPasswordREQ")))}function Pt(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.MismatchPassword")))}function kt(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const a=t.oxw();t.Q6J("mat-dialog-close",a.registerForm.value)("disabled",!a.registerForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,3,"BTN.SAVE"))}}class H{constructor(e,a,n,o,r,m,h){this.dialogRef=e,this.data=a,this.atlasService=n,this.localStore=o,this.unitsService=r,this.snackBar=m,this.fb=h,this.curCOMId=y.N.comid,this.userPerm=[],this.AllBranches=[],this.AllBuilding=[],this.AllUnitsForBuilding=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.curperiorty=this.data.periorty,this.registerForm=this.fb.group({username:["",s.kI.compose([s.kI.required,s.kI.minLength(3)])],first_name:["",s.kI.compose([s.kI.required,s.kI.minLength(2)])],last_name:["",s.kI.compose([s.kI.required,s.kI.minLength(2)])],email:["",s.kI.compose([s.kI.required,lt.Le])],branch_KeyField:[null,s.kI.required],UserMobile:[null,s.kI.required],build_KeyField:[null,s.kI.required],unit_KeyField:[null,s.kI.required],is_customer:"T",password:["",s.kI.required],confirmPassword:["",s.kI.required]},{validator:(0,lt.zi)("password","confirmPassword")}),this.getAllBranches(this.curCOMId,this.curperiorty)}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getAllBranches(e,a){this.atlasService.getAllBranch(e,a).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.curperiorty,e.value)}getBuildingPerBranch(e,a,n){this.unitsService.getBuildingsPerBranch(e,a,n).subscribe(o=>{this.AllBuilding=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(e){this.unitsService.getOneBuilding(e.value).subscribe(a=>{this.getUnitsPerBuilding(this.curCOMId,this.curperiorty,e.value,"E")},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuilding(e,a,n,o){this.unitsService.getAllUnitsPerBuilding(e,a,n,o).subscribe(r=>{this.AllUnitsForBuilding=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0644\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onSave(){console.log("===***Press Save button***==="),this.action="Post",this.registerForm.valid&&this.dialogRef.close({event:this.action,data:this.registerForm})}close(){console.log("===***Press Close button***==="),this.action="Cancel",this.dialogRef.close({event:this.action})}}H.\u0275fac=function(e){return new(e||H)(t.Y36(d.so),t.Y36(d.WI),t.Y36(B.Z),t.Y36(Z.C),t.Y36(ct.X),t.Y36(x.ux),t.Y36(s.QS))},H.\u0275cmp=t.Xpm({type:H,selectors:[["app-customers-dialog"]],decls:110,vars:81,consts:[["mat-dialog-title",""],[1,"user-form",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","username","required","",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","email","required","",3,"placeholder"],["matInput","","formControlName","first_name","required","",3,"placeholder"],["matInput","","formControlName","last_name","required","",3,"placeholder"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","UserMobile","required",""],["formControlName","build_KeyField","id","build_OneOpSel",3,"placeholder","selectionChange"],["formControlName","unit_KeyField","id","unit_OneOpSel",3,"placeholder"],["matInput","","formControlName","password","type","password","minlength","6","required","",3,"placeholder"],["matInput","","formControlName","confirmPassword","type","password","required","",3,"placeholder"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,a){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",7),t.ALo(13,"translate"),t.YNc(14,yt,3,3,"mat-error",8),t.YNc(15,Ot,3,3,"mat-error",8),t.qZA()(),t.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",9),t.ALo(22,"translate"),t.YNc(23,Dt,3,3,"mat-error",8),t.YNc(24,xt,3,3,"mat-error",8),t.qZA()()(),t.TgZ(25,"div",4)(26,"div",5)(27,"mat-form-field",6)(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",10),t.ALo(32,"translate"),t.YNc(33,Lt,3,3,"mat-error",8),t.YNc(34,Nt,3,3,"mat-error",8),t.qZA()(),t.TgZ(35,"div",5)(36,"mat-form-field",6)(37,"mat-label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"input",11),t.ALo(41,"translate"),t.YNc(42,It,3,3,"mat-error",8),t.YNc(43,Ut,3,3,"mat-error",8),t.qZA()()(),t.TgZ(44,"div",4)(45,"div",5)(46,"mat-form-field",6)(47,"mat-label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"mat-select",12),t.NdJ("selectionChange",function(o){return a.getBuildings(o)}),t.ALo(51,"translate"),t.TgZ(52,"mat-option",13),t._uU(53,"-"),t.qZA(),t.YNc(54,Ft,2,2,"mat-option",14),t.qZA()()(),t.TgZ(55,"div",5)(56,"mat-form-field",6)(57,"mat-label"),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"mat-hint"),t._uU(61,"966505602221"),t.qZA(),t._UZ(62,"input",15),t.YNc(63,St,2,0,"mat-error",8),t.qZA()()(),t.TgZ(64,"div",4)(65,"div",5)(66,"mat-form-field",6)(67,"mat-label"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"mat-select",16),t.NdJ("selectionChange",function(o){return a.readBuilding(o)}),t.ALo(71,"translate"),t.TgZ(72,"mat-option",13),t._uU(73,"-"),t.qZA(),t.YNc(74,wt,2,2,"mat-option",14),t.qZA()()(),t.TgZ(75,"div",5)(76,"mat-form-field",6)(77,"mat-label"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"mat-select",17),t.ALo(81,"translate"),t.TgZ(82,"mat-option",13),t._uU(83,"-"),t.qZA(),t.YNc(84,qt,2,2,"mat-option",14),t.qZA()()()(),t.TgZ(85,"div",4)(86,"div",5)(87,"mat-form-field",6)(88,"mat-label"),t._uU(89),t.ALo(90,"translate"),t.qZA(),t._UZ(91,"input",18),t.ALo(92,"translate"),t.YNc(93,Mt,3,3,"mat-error",8),t.YNc(94,Et,3,3,"mat-error",8),t.qZA()(),t.TgZ(95,"div",5)(96,"mat-form-field",6)(97,"mat-label"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t._UZ(100,"input",19),t.ALo(101,"translate"),t.YNc(102,Rt,3,3,"mat-error",8),t.YNc(103,Pt,3,3,"mat-error",8),t.qZA()()()()(),t.TgZ(104,"div",20)(105,"div",4),t.YNc(106,kt,4,5,"button",21),t.TgZ(107,"button",22),t.NdJ("click",function(){return a.close()}),t._uU(108),t.ALo(109,"translate"),t.qZA()()()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,39,"MESSAGE.RegisterMsg")),t.xp6(2),t.Q6J("formGroup",a.registerForm),t.xp6(7),t.Oqu(t.lcZ(11,41,"HTML.USERNAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(13,43,"HTML.USERNAME")),t.xp6(2),t.Q6J("ngIf",null==a.registerForm.controls.username.errors?null:a.registerForm.controls.username.errors.required),t.xp6(1),t.Q6J("ngIf",a.registerForm.controls.username.hasError("minlength")),t.xp6(4),t.Oqu(t.lcZ(20,45,"HTML.EMAIL")),t.xp6(2),t.s9C("placeholder",t.lcZ(22,47,"HTML.EMAIL")),t.xp6(2),t.Q6J("ngIf",null==a.registerForm.controls.email.errors?null:a.registerForm.controls.email.errors.required),t.xp6(1),t.Q6J("ngIf",a.registerForm.controls.email.hasError("invalidEmail")),t.xp6(5),t.Oqu(t.lcZ(30,49,"HTML.FIRST_NAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(32,51,"HTML.FIRST_NAME")),t.xp6(2),t.Q6J("ngIf",null==a.registerForm.controls.first_name.errors?null:a.registerForm.controls.first_name.errors.required),t.xp6(1),t.Q6J("ngIf",a.registerForm.controls.first_name.hasError("minlength")),t.xp6(4),t.Oqu(t.lcZ(39,53,"HTML.LAST_NAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(41,55,"HTML.LAST_NAME")),t.xp6(2),t.Q6J("ngIf",null==a.registerForm.controls.last_name.errors?null:a.registerForm.controls.last_name.errors.required),t.xp6(1),t.Q6J("ngIf",a.registerForm.controls.last_name.hasError("minlength")),t.xp6(5),t.hij(" ",t.lcZ(49,57,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(51,59,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",a.AllBranches),t.xp6(4),t.Oqu(t.lcZ(59,61,"HTML.MOBILE")),t.xp6(5),t.Q6J("ngIf",null==a.registerForm.controls.UserMobile.errors?null:a.registerForm.controls.UserMobile.errors.required),t.xp6(5),t.hij(" ",t.lcZ(69,63,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(71,65,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",a.AllBuilding),t.xp6(4),t.hij(" ",t.lcZ(79,67,"HTML.UNIT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(81,69,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",a.AllUnitsForBuilding),t.xp6(5),t.Oqu(t.lcZ(90,71,"HTML.PASSWORD")),t.xp6(2),t.s9C("placeholder",t.lcZ(92,73,"HTML.PASSWORD")),t.xp6(2),t.Q6J("ngIf",null==a.registerForm.controls.password.errors?null:a.registerForm.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",a.registerForm.controls.password.hasError("minlength")),t.xp6(4),t.Oqu(t.lcZ(99,75,"HTML.ConfirmPassword")),t.xp6(2),t.s9C("placeholder",t.lcZ(101,77,"HTML.ConfirmPassword")),t.xp6(2),t.Q6J("ngIf",null==a.registerForm.controls.confirmPassword.errors?null:a.registerForm.controls.confirmPassword.errors.required),t.xp6(1),t.Q6J("ngIf",a.registerForm.controls.confirmPassword.hasError("mismatchedPasswords")),t.xp6(3),t.Q6J("ngIf",a.can("add_tenant")),t.xp6(2),t.Oqu(t.lcZ(109,79,"BTN.CANCEL")))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.wO,c.sg,c.O5,s.sg,s.u,u.xw,u.Wh,u.yH,q.ey,T.lW,d.ZT,d.uh,d.xY,d.H8,N.Nt,p.KE,p.hX,p.bx,p.TO,M.gD,g.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:280px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});class ut{}var F=l(5783),E=l(5726),O=l(5521),R=l(2887),A=l(4459),V=l(1182),C=l(9132),S=l(7465),Kt=l(3071),D=l(4333),W=l(811),L=l(3546),w=l(7392),I=l(4850),mt=l(1572),X=l(266),pt=l(1419);function Jt(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"mat-button-toggle",22),t.NdJ("click",function(){t.CHM(a);const o=t.oxw(2);return t.KtG(o.gotoNewTenant())}),t.TgZ(1,"mat-icon"),t._uU(2,"person_add"),t.qZA()()}}function Bt(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"mat-button-toggle-group",10,11),t.YNc(5,Jt,3,0,"mat-button-toggle",12),t.TgZ(6,"mat-button-toggle",13)(7,"mat-icon"),t._uU(8,"search"),t.qZA()()()(),t.TgZ(9,"form",14)(10,"mat-form-field",15)(11,"input",16),t.NdJ("ngModelChange",function(o){t.CHM(a);const r=t.oxw();return t.KtG(r.searchText=o)}),t.ALo(12,"translate"),t.qZA()()(),t.TgZ(13,"div",17)(14,"mat-button-toggle-group",18,19)(16,"mat-button-toggle",20)(17,"mat-icon"),t._uU(18,"view_list"),t.qZA()(),t.TgZ(19,"mat-button-toggle",21)(20,"mat-icon"),t._uU(21,"view_module"),t.qZA()()()()()()}if(2&i){const a=t.MAs(4),n=t.oxw();t.xp6(5),t.Q6J("ngIf",n.can("add_tenant")),t.xp6(4),t.ekj("show","search"==a.value),t.xp6(2),t.s9C("placeholder",t.lcZ(12,5,"HTML.SEARCH_TENANT_AnyValue")),t.Q6J("ngModel",n.searchText)}}const Ht=function(i){return["/contracts/tenant-add/",i]};function Vt(i,e){if(1&i&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&i){const a=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,Ht,a.id))}}function Wt(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.removeTenant(o.id,o.Userid))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&i&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}const Yt=function(i){return["/contracts/statements-list/",i]};function Qt(i,e){if(1&i&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&i){const a=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.Statements")),t.Q6J("routerLink",t.VKq(4,Yt,a.id))}}const Gt=function(i){return["/contracts/contract-list/",i]};function jt(i,e){if(1&i&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"auto_stories"),t.qZA()()),2&i){const a=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.ContractForTenant")),t.Q6J("routerLink",t.VKq(4,Gt,a.id))}}function $t(i,e){if(1&i&&(t.TgZ(0,"div",23)(1,"div",24),t._uU(2),t.qZA(),t.TgZ(3,"div",24),t._uU(4),t.qZA(),t.TgZ(5,"div",24),t._uU(6),t.qZA(),t.TgZ(7,"div",24),t._uU(8),t.qZA(),t.TgZ(9,"div",24),t._uU(10),t.qZA(),t.TgZ(11,"div",24),t._uU(12),t.qZA(),t.TgZ(13,"div",24)(14,"mat-icon",25),t._uU(15),t.qZA()(),t.TgZ(16,"div",24)(17,"div",26),t.YNc(18,Vt,4,6,"a",27),t.YNc(19,Wt,4,3,"button",28),t.YNc(20,Qt,4,6,"a",27),t.YNc(21,jt,4,6,"a",27),t.qZA()()()),2&i){const a=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(a.CUSName),t.xp6(2),t.Oqu(a.CUSMobile),t.xp6(2),t.hij(" ",a.build_Name," "),t.xp6(2),t.hij(" ",a.unit_Name," "),t.xp6(2),t.hij(" ",a.job_Name," "),t.xp6(2),t.hij(" ",a.workplace_Name," "),t.xp6(3),t.Oqu("T"==a.CUSActive?"check_box":"check_box_outline_blank"),t.xp6(3),t.Q6J("ngIf",n.can("change_tenant")||n.can("view_onetenant")||0==n.account.periorty&&"T"!==n.account.userDataConfirmed),t.xp6(1),t.Q6J("ngIf",n.can("delete_tenant")),t.xp6(1),t.Q6J("ngIf",n.can("view_tenantstatements")),t.xp6(1),t.Q6J("ngIf",n.can("view_contractfortenant"))}}function Xt(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"div",31)(1,"div",32)(2,"mat-card",33)(3,"pagination-controls",34),t.NdJ("pageChange",function(o){t.CHM(a);const r=t.oxw();return t.KtG(r.onPageChanged(o))}),t.qZA()()()()}}function zt(i,e){1&i&&(t.TgZ(0,"div",35),t._UZ(1,"mat-spinner",36),t.qZA())}const te=function(i,e){return{itemsPerPage:i,currentPage:e}};class z{constructor(e,a,n,o,r,m,h,f,_){this.appSettings=e,this.dialog=a,this.usersService=n,this.router=o,this.global=r,this.localStore=m,this.snackBar=h,this.translateService=f,this.userService=_,this.curTenant=new ut,this.curCOMId=y.N.comid,this.account=new F.n,this.count=8,this.defaultCusImage=(new O.P).noImage,this.CusImageToUpload=null,this.userPerm=[],this.settings=this.appSettings.settings}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var a=new FileReader;a.onload=n=>{this.defaultCusImage=n.target.result},a.readAsDataURL(this.CusImageToUpload)}ngOnInit(){if(this.securityForApp=(new A.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getTenants()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getTenants(){this.users=null,this.curUserData.is_superuser?this.usersService.getCustomerPerSpec(this.curCOMId,this.account.periorty).subscribe(e=>this.users=e):0==this.curUserData.periorty?this.usersService.getCustomerPerUser(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(e=>this.users=e):("N"==this.securityForApp&&(this.curBranchID=this.curUserData.branch_KeyField??0,this.usersService.getCustomersPerBranch(this.curCOMId,this.account.periorty,this.curBranchID).subscribe(e=>this.users=e)),"D"==this.securityForApp&&this.usersService.getCustomersPerEmployee(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(e=>this.users=e))}addTenant(e){this.usersService.addOneCustomer(e).subscribe(a=>this.getTenants())}updateTenant(e){this.usersService.editCustomer(e,this.CusImageToUpload,this.CusImageToUpload,this.curUserData.is_employee).subscribe(a=>this.getTenants())}deleteTenant(e){this.dialog.open(R.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.usersService.deleteCustomer(e.id).subscribe(o=>this.getTenants())})}removeTenant(e,a){this.dialog.open(R.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(o=>{o&&this.usersService.deleteCustomer(e).subscribe(r=>{this.userService.deleteOneUser(a).subscribe(m=>{}),this.getTenants()})})}onPageChanged(e){this.page=e,this.getTenants(),window.scrollTo(0,0)}gotoTenantDisplay(e){console.log("===**gotoTenantDisplay**=== "+e),this.router.navigate(["/contracts/tenant-add/"+e])}gotoNewTenant(){this.dialog.open(H,{data:{periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(a=>{console.log("=====result.event:: "+a.event),"Cancel"==a.event||"Post"==a.event&&this.userService.registerTenant_with_lastName(a.data).subscribe(n=>{console.log("TenantID:: "+n.id),this.getTenants(),this.snackBar.open(this.registeredMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.can("view_onetenant")&&this.gotoTenantDisplay(n.id)},n=>{console.log("error",n),this.snackBar.open(this.notRegisteredMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})})}openTenantDialog(e){this.dialog.open(H,{data:e}).afterClosed().subscribe(n=>{n?(console.log("=====if user True:: =============="),console.log(n),this.curTenant=new ut,console.log(this.curTenant),this.fromUserToCustomer(n),console.log(this.curTenant),n.id?this.updateTenant(this.curTenant):this.addTenant(this.curTenant)):console.log("=====if user False:: ==============")})}fromUserToCustomer(e){this.curTenant.id=e.id,this.curTenant.RowDelete=e.settings.isDeleted?1:0,this.curTenant.CUSCode=e.code,this.curTenant.CUSPic=e.image,this.curTenant.CUSGender=e.profile.gender,console.log("====Date===="),console.log(e.profile.birthday),this.curTenant.CUSBirthDate=e.profile.birthday,this.curTenant.CUSMobile=e.mobile,this.curTenant.CUSEmail=e.contacts.email,this.curTenant.CUSActive=e.settings.isActive?"T":"F",this.curTenant.CUSAddress=e.contacts.address,this.curTenant.Country_CTTKeyField=e.contacts.country,this.curTenant.CUSusername=e.username,this.curTenant.CUSFirstName=e.firstname,this.curTenant.CUSLastName=e.lastname}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e}),this.translateService.get("MESSAGE.REGISTERD").subscribe(e=>{this.registeredMsg=e}),this.translateService.get("MESSAGE.NOTREGISTERD").subscribe(e=>{this.notRegisteredMsg=e})}}z.\u0275fac=function(e){return new(e||z)(t.Y36(V.d),t.Y36(d.uw),t.Y36(E.v),t.Y36(C.F0),t.Y36(S.U),t.Y36(Z.C),t.Y36(x.ux),t.Y36(g.sK),t.Y36(Kt.K))},z.\u0275cmp=t.Xpm({type:z,selectors:[["app-customers-list"]],features:[t._Bn([E.v])],decls:44,vars:37,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"text-muted"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,a){1&e&&(t.YNc(0,Bt,22,7,"div",0),t._UZ(1,"mat-divider"),t.TgZ(2,"mat-card")(3,"div",1)(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",2)(9,"div",3)(10,"div",4)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",4)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",4)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",4)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",4)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",4)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",4)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",4),t.qZA(),t.YNc(39,$t,22,11,"div",5),t.ALo(40,"paginate"),t.ALo(41,"TenantSearchPipe"),t.qZA()(),t.YNc(42,Xt,4,0,"div",6),t.YNc(43,zt,2,0,"div",7)),2&e&&(t.Q6J("ngIf",a.account.periorty>0),t.xp6(5),t.hij("",t.lcZ(6,12,"HTML.TENANTS_LIST")," "),t.xp6(7),t.hij(" ",t.lcZ(13,14,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(17,16,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(21,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(25,20,"HTML.UNIT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,22,"HTML.Job")," "),t.xp6(4),t.hij(" ",t.lcZ(33,24,"HTML.WorkPlace")," "),t.xp6(4),t.hij(" ",t.lcZ(37,26,"HTML.ACTIVATED")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(40,28,t.xi3(41,31,a.users,a.searchText),t.WLB(34,te,a.count,a.page))),t.xp6(3),t.Q6J("ngIf",a.users),t.xp6(1),t.Q6J("ngIf",!a.users))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,D.LS,c.sg,c.O5,C.rH,u.xw,u.Wh,u.yH,T.Tq,T.nh,W.A9,W.Yi,L.a8,w.Hw,N.Nt,p.KE,I.d,mt.Ou,X.gM,D._s,pt.DA,g.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});var P=l(8959),ee=l(1135);class k{constructor(){this.inivalue={},this.msg=new ee.X(this.inivalue),this.getMessage=this.msg.asObservable()}setMessage(e){this.msg.next(e)}}k.\u0275fac=function(e){return new(e||k)},k.\u0275prov=t.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"});var vt=l(5346);function ae(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"mat-button-toggle",21),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.gotoNewContract())}),t.TgZ(1,"mat-icon"),t._uU(2,"note_add"),t.qZA()()}}const ie=function(i){return["/contracts/contract-add/",i]};function ne(i,e){if(1&i&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&i){const a=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,ie,a.id))}}function oe(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.removeContract(o.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&i&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}const re=function(i){return["/contracts/installment-list/",i]};function se(i,e){if(1&i&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&i){const a=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,re,a.id))}}const le=function(i){return["/contracts/contract-add/renew/",i]};function ce(i,e){if(1&i&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"autorenew"),t.qZA()()),2&i){const a=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.ReNewContract")),t.Q6J("routerLink",t.VKq(4,le,a.id))}}function ue(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.leaveTenant(o,o.customer_Name))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"airport_shuttle"),t.qZA()()}2&i&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.LEAVE"))}function de(i,e){if(1&i&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t._UZ(3,"br"),t._uU(4),t.qZA(),t.TgZ(5,"div",23),t._uU(6),t.qZA(),t.TgZ(7,"div",23),t._uU(8),t.qZA(),t.TgZ(9,"div",23),t._uU(10),t.qZA(),t.TgZ(11,"div",23),t._uU(12),t.qZA(),t.TgZ(13,"div",23),t._uU(14),t.qZA(),t.TgZ(15,"div",23),t._uU(16),t.qZA(),t.TgZ(17,"div",23)(18,"div",24),t.YNc(19,ne,4,6,"a",25),t.YNc(20,oe,4,3,"button",26),t.YNc(21,se,4,6,"a",25),t.YNc(22,ce,4,6,"a",25),t.YNc(23,ue,4,3,"button",26),t.qZA()()()),2&i){const a=e.$implicit,n=t.oxw();t.Tol(n.statusColor[a.RCOContractStatus]),t.xp6(2),t.Oqu(a.build_Name),t.xp6(2),t.Oqu(a.branch_ArbName),t.xp6(2),t.Oqu(a.unit_UnitNumber),t.xp6(2),t.hij(" ",a.customer_Name," "),t.xp6(2),t.hij(" ",a.customer_Mobile," "),t.xp6(2),t.hij(" ",a.RCOEndDate," "),t.xp6(2),t.AsE(" (",a.RCOCode," / ",a.RCOSubCode,") "),t.xp6(2),t.hij(" ",a.RCOEjarCode," "),t.xp6(3),t.Q6J("ngIf",n.can("view_onecontract")||0==n.account.periorty),t.xp6(1),t.Q6J("ngIf",n.can("delete_rentcontracts")),t.xp6(1),t.Q6J("ngIf",n.can("view_contractinstallments")||0==n.account.periorty),t.xp6(1),t.Q6J("ngIf",n.can("view_renewcontract")&&"N"==a.RCOContractStatus),t.xp6(1),t.Q6J("ngIf",n.can("view_tenantleave"))}}function me(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"div",29)(1,"div",30)(2,"mat-card",31)(3,"pagination-controls",32),t.NdJ("pageChange",function(o){t.CHM(a);const r=t.oxw();return t.KtG(r.onPageChanged(o))}),t.qZA()()()()}}function pe(i,e){1&i&&(t.TgZ(0,"div",33),t._UZ(1,"mat-spinner",34),t.qZA())}const he=function(i,e){return{itemsPerPage:i,currentPage:e}};class Y{constructor(e,a,n,o,r,m,h,f,_,b,U){this.transferService=e,this.dataService=a,this.appSettings=n,this.activatedRoute=o,this.dialog=r,this.contractService=m,this.router=h,this.global=f,this.localStore=_,this.translateService=b,this.snackBar=U,this.statusColor={N:"make-white",R:"make-gold",F:"make-yellowgreen",C:"make-yellow"},this.curCOMId=y.N.comid,this.account=new F.n,this.count=4,this.userPerm=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.securityForApp=(new A.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.contForTenant=this.activatedRoute.params.subscribe(e=>{e.tenantid?(this.idForTenant=+e.tenantid,console.log("params['tenantid']:: "+this.idForTenant)):this.idForTenant=0}),console.log("line 85 this.idForTenant:: "+this.idForTenant),this.prepareMsgLanguage(),this.getContracts()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getAllContracts(this.curCOMId,this.account.periorty).subscribe(e=>this.contractsAll=e):0==this.curUserData.periorty?(this.curCustomerID=this.account.customer_KeyField??0,this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.curCustomerID).subscribe(e=>this.contractsAll=e)):1==this.curUserData.periorty&&("N"==this.securityForApp&&(this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerBranch(this.curCOMId,this.account.periorty,this.account.branch_KeyField).subscribe(e=>this.contractsAll=e)),"D"==this.securityForApp&&(this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerEmp(this.curCOMId,this.account.periorty,this.account.id).subscribe(e=>this.contractsAll=e)))}renewContract(e){console.log("===========renewContract")}leaveTenant(e,a){this.transferService.setMessage({contract_KeyField:e.id,remaining_Installments:e.remaining_Installments,contenddate:e.RCOEndDate,contvalue:e.RCOContractValue,continsurance:e.RCOInsuranceValue,leaveid:e.RCOTenantLeaveID,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,cusName:a}),console.log("----Before info---"),null==e.RCOTenantLeaveID?(console.log("--contractRow.RCOTenantLeaveID == null--"),this.router.navigate(["contracts/tenant-leave/"])):(console.log("---ELSE-----"),this.router.navigate(["contracts/tenant-leave/"+e.RCOTenantLeaveID+"/"]))}removeContract(e){this.dialog.open(R.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.contractService.deleteContract(e).subscribe(o=>this.getContracts())})}contractInstallments(e){}onPageChanged(e){this.page=e,this.getContracts(),window.scrollTo(0,0)}gotoNewContract(){this.router.navigate(["/contracts/contract-add/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}Y.\u0275fac=function(e){return new(e||Y)(t.Y36(k),t.Y36(vt.n),t.Y36(V.d),t.Y36(C.gz),t.Y36(d.uw),t.Y36(P.W),t.Y36(C.F0),t.Y36(S.U),t.Y36(Z.C),t.Y36(g.sK),t.Y36(x.ux))},Y.\u0275cmp=t.Xpm({type:Y,selectors:[["app-contract-list"]],features:[t._Bn([P.W])],decls:64,vars:43,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",3,"class",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),t.YNc(4,ae,3,0,"mat-button-toggle",4),t.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),t._uU(7,"search"),t.qZA()()()(),t.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),t.NdJ("ngModelChange",function(o){return a.searchText=o}),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),t._uU(17,"view_list"),t.qZA()(),t.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),t._uU(20,"view_module"),t.qZA()()()()(),t._UZ(21,"mat-divider"),t.TgZ(22,"mat-card")(23,"div",14)(24,"h2"),t._uU(25),t.ALo(26,"translate"),t.qZA()(),t._UZ(27,"mat-divider"),t.TgZ(28,"div",15)(29,"div",16)(30,"div",17)(31,"h3"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",17)(35,"h3"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",17)(39,"h3"),t._uU(40),t.ALo(41,"translate"),t.qZA()(),t.TgZ(42,"div",17)(43,"h3"),t._uU(44),t.ALo(45,"translate"),t.qZA()(),t.TgZ(46,"div",17)(47,"h3"),t._uU(48),t.ALo(49,"translate"),t.qZA()(),t.TgZ(50,"div",17)(51,"h3"),t._uU(52),t.ALo(53,"translate"),t.qZA()(),t.TgZ(54,"div",17)(55,"h3"),t._uU(56),t.ALo(57,"translate"),t.qZA()(),t._UZ(58,"div",17),t.qZA(),t.YNc(59,de,24,16,"div",18),t.ALo(60,"paginate"),t.ALo(61,"ContractSearchPipe"),t.qZA()(),t.YNc(62,me,4,0,"div",19),t.YNc(63,pe,2,0,"div",20)),2&e){const n=t.MAs(3);t.xp6(4),t.Q6J("ngIf",a.can("add_rentcontracts")),t.xp6(4),t.ekj("show","search"==n.value),t.xp6(2),t.s9C("placeholder",t.lcZ(11,16,"HTML.SEARCH_CONTRACT")),t.Q6J("ngModel",a.searchText),t.xp6(15),t.Oqu(t.lcZ(26,18,"HTML.Contract_List")),t.xp6(7),t.hij(" ",t.lcZ(33,20,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(37,22,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(41,24,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(45,26,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(49,28,"HTML.ContractEndDate")," "),t.xp6(4),t.hij(" ",t.lcZ(53,30,"HTML.ContractCode")," "),t.xp6(4),t.hij(" ",t.lcZ(57,32,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(60,34,t.xi3(61,37,a.contractsAll,a.searchText),t.WLB(40,he,a.count,a.page))),t.xp6(3),t.Q6J("ngIf",a.contractsAll),t.xp6(1),t.Q6J("ngIf",!a.contractsAll)}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,D.LS,c.sg,c.O5,C.rH,u.xw,u.Wh,u.yH,T.Tq,T.nh,W.A9,W.Yi,L.a8,w.Hw,N.Nt,p.KE,I.d,mt.Ou,X.gM,D._s,pt.JQ,g.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}table{width:100%}.make-gold{background-color:#fbea96}.make-yellow{background-color:#ff4500}.make-yellowgreen{background-color:#ad7020}.make-white{background-color:#fff}\n"],encapsulation:2});var ge=l(5861);class _e{}var Zt=l(6838),fe=l(4165),ht=l(6709),v=l(9602),Q=l(3848),gt=l(1596),_t=l(8796);function Te(i,e){1&i&&(t.TgZ(0,"h1",72),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"RenewContract")," "))}function Ce(i,e){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function ve(i,e){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Ze(i,e){if(1&i&&(t.TgZ(0,"h1",72),t.YNc(1,Ce,3,3,"span",73),t.YNc(2,ve,3,3,"span",73),t._uU(3),t.ALo(4,"translate"),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.Q6J("ngIf",!a.contractForDisplay.id),t.xp6(1),t.Q6J("ngIf",a.contractForDisplay.id),t.xp6(1),t.hij(" ",t.lcZ(4,3,"HTML.RentContract"),"")}}function Ae(i,e){if(1&i&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.OWNName," ")}}function be(i,e){if(1&i&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.OWNName," ")}}function ye(i,e){if(1&i&&(t.TgZ(0,"ng-option",23),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.CUSName,"")}}function Oe(i,e){if(1&i&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.CUSName," ")}}function De(i,e){if(1&i&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.BRAArbName," ")}}function xe(i,e){if(1&i&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.BUIName," ")}}function Le(i,e){if(1&i&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.UNTUnitNumber," ")}}function Ne(i,e){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function Ie(i,e){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Ue(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",74),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.saveUpdate(o.contractForDisplay.id))}),t.YNc(1,Ne,3,3,"span",73),t.YNc(2,Ie,3,3,"span",73),t.qZA()}if(2&i){const a=t.oxw();t.Q6J("mat-dialog-close",a.form.value)("disabled",!a.form.valid),t.xp6(1),t.Q6J("ngIf",!a.contractForDisplay.id),t.xp6(1),t.Q6J("ngIf",a.contractForDisplay.id)}}class K{constructor(e,a,n,o,r,m,h,f,_,b,U,rt,st){this.activatedRoute=e,this.codesService=a,this.unitsService=n,this.contractService=o,this.fb=r,this.localStore=m,this.router=h,this.global=f,this.translateService=_,this.atlasService=b,this.settingService=U,this.tenantsService=rt,this.snackBar=st,this.curCOMId=y.N.comid,this.account=new F.n,this.docType_const=(new A.I).OwnershipDocTypes,this.country_const=(new A.I).Countries,this.governorate_const=(new A.I).Governorates,this.city_const=(new A.I).City,this.region_const=(new A.I).Regions,this.buildingFeatures_const=(new A.I).BuildingFeatures,this.passwordHide=!0,this.userPerm=[],this.DocImageToUpload=null,this.defaultDocImage=(new O.P).noImage,this.defaultCusImage=(new O.P).noImage,this.CusImageToUpload=null,this.DocTypes=[],this.parameters=[],this.Countries=[],this.Governorates=[],this.AllBuilding=[],this.AllUnitsForBuilding=[],this.AllRepresentativeForOwner=[],this.AllBranches=[],this.AllOwners=[],this.AllRepresentativeForCustomer=[],this.AllTenants=[]}isBigEnough(e,a,n){return e>=10}ngOnInit(){if(this.userSUb=this.global.user.subscribe(a=>{this.account=a}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let a=0;a<this.curUserPermissions.length;a++)this.userPerm[a]=this.curUserPermissions[a].codename;var e=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==e.is_employee,this.getParamValue(this.curCOMId,this.account.periorty,1),this.getParamValue(this.curCOMId,this.account.periorty,2),this.getParamValue(this.curCOMId,this.account.periorty,3),this.ownerKeyForApp=(new A.$).ownerKeyField,this.form=this.fb.group({id:null,RCOCode:{value:null,disabled:!0},RCOSubCode:{value:null,disabled:!0},RCOEjarCode:null,Related_RCOKeyField:null,contractDate:null,contractStartDate:[null,s.kI.required],contractEndDate:[null,s.kI.required],RCOContractStatus:"N",RCOAlarmStartDate:{value:[""],disabled:!0},RCONoOfDaysForAlarm:[null,s.kI.required],RCONoOfDaysForEjarAlarm:[null,s.kI.required],RCOAlarmCounter:{value:0,disabled:!0},contractUnit:this.fb.group({branch_KeyField:{value:null,disabled:0==this.curUserData.periorty},build_KeyField:{value:null,disabled:0==this.curUserData.periorty},unit_KeyField:{value:null,disabled:0==this.curUserData.periorty}}),contractPerson:this.fb.group({owner_KeyField:this.ownerKeyForApp,owner_representative_KeyField:null,customer_KeyField:null,customer_representative_KeyField:null}),contractValues:this.fb.group({RCOContractValue:[null,s.kI.required],RCOPayEveryMonthesNo:[null,s.kI.required],RCOMonthValue:[null,s.kI.required],RCOInsuranceValue:0,RCOSeekingValue:0,RCOMonthlyExpense:0,RCOExpenseDesc:null,RCOOtherValue:0,RCOMonthlyElectricValue:0,RCOElectricCounterReading:null,RCOMonthlyWaterValue:0,RCOWaterCounterReading:null,RCOMonthlyGasValue:0,RCOGasCounterReading:null}),settings:this.fb.group({isActive:null,isDeleted:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),this.getCountries(this.curCOMId,this.account.periorty),this.getAllBranches(this.curCOMId,this.account.periorty),this.getAllOwnerss(this.curCOMId,this.account.periorty),this.getOwnershipDocType(this.curCOMId,this.account.periorty),this.getTenants(),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.ownerKeyForApp),this.activatedRoute.data.subscribe(a=>{this.isRenewContract=a.parentID}),this.sub=this.activatedRoute.params.subscribe(a=>{a.id?(this.id=+a.id,console.log("params['id']:: "+this.id),this.getContractById(this.id)):this.contractForDisplay=new _e})}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onFileChange(e){this.DocImageToUpload=e.item(0);var a=new FileReader;a.onload=n=>{this.defaultDocImage=n.target.result},a.readAsDataURL(this.DocImageToUpload)}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var a=new FileReader;a.onload=n=>{this.defaultCusImage=n.target.result},a.readAsDataURL(this.CusImageToUpload)}mapFormvalue_to_ContractClass(){this.form.enable();const e=new c.uU("en-GB").transform(this.form.value.contractDate,"dd/MM/yyyy"),a=new c.uU("en-GB").transform(this.form.value.contractStartDate,"dd/MM/yyyy"),n=new c.uU("en-GB").transform(this.form.value.contractEndDate,"dd/MM/yyyy"),o=new c.uU("en-GB").transform(this.form.value.RCOAlarmStartDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,this.contractForDisplay.id=this.form.value.id,this.contractForDisplay.Related_RCOKeyField=this.form.value.Related_RCOKeyField,this.contractForDisplay.RCOCode=this.form.value.RCOCode,this.contractForDisplay.RCOSubCode=this.form.value.RCOSubCode,this.contractForDisplay.RCOEjarCode=this.form.value.RCOEjarCode,null!=this.form.value.contractDate&&(this.contractForDisplay.RCODate=e),null!=this.form.value.contractStartDate&&(this.contractForDisplay.RCOStartDate=a),null!=this.form.value.contractEndDate&&(this.contractForDisplay.RCOEndDate=n),null!=this.form.value.RCOAlarmStartDate&&(this.contractForDisplay.RCOAlarmStartDate=o),this.contractForDisplay.RCOContractStatus=this.form.value.RCOContractStatus,this.contractForDisplay.RCOAlarmCounter=this.form.value.RCOAlarmCounter,this.contractForDisplay.RCONoOfDaysForAlarm=this.form.value.RCONoOfDaysForAlarm,this.contractForDisplay.RCONoOfDaysForEjarAlarm=this.form.value.RCONoOfDaysForEjarAlarm,this.contractForDisplay.branch_KeyField=this.form.value.contractUnit.branch_KeyField,this.contractForDisplay.build_KeyField=this.form.value.contractUnit.build_KeyField,this.contractForDisplay.unit_KeyField=this.form.value.contractUnit.unit_KeyField,this.contractForDisplay.owner_KeyField=this.form.value.contractPerson.owner_KeyField,this.contractForDisplay.owner_representative_KeyField=this.form.value.contractPerson.owner_representative_KeyField,this.contractForDisplay.customer_KeyField=this.form.value.contractPerson.customer_KeyField,this.contractForDisplay.customer_representative_KeyField=this.form.value.contractPerson.customer_representative_KeyField,this.contractForDisplay.RCOContractValue=this.form.value.contractValues.RCOContractValue,this.contractForDisplay.RCOPayEveryMonthesNo=this.form.value.contractValues.RCOPayEveryMonthesNo,this.contractForDisplay.RCOMonthValue=this.form.value.contractValues.RCOMonthValue,this.contractForDisplay.RCOInsuranceValue=this.form.value.contractValues.RCOInsuranceValue,this.contractForDisplay.RCOSeekingValue=this.form.value.contractValues.RCOSeekingValue,this.contractForDisplay.RCOMonthlyExpense=this.form.value.contractValues.RCOMonthlyExpense,this.contractForDisplay.RCOExpenseDesc=this.form.value.contractValues.RCOExpenseDesc,this.contractForDisplay.RCOOtherValue=this.form.value.contractValues.RCOOtherValue,this.contractForDisplay.RCOMonthlyElectricValue=this.form.value.contractValues.RCOMonthlyElectricValue,this.contractForDisplay.RCOElectricCounterReading=this.form.value.contractValues.RCOElectricCounterReading,this.contractForDisplay.RCOMonthlyWaterValue=this.form.value.contractValues.RCOMonthlyWaterValue,this.contractForDisplay.RCOWaterCounterReading=this.form.value.contractValues.RCOWaterCounterReading,this.contractForDisplay.RCOMonthlyGasValue=this.form.value.contractValues.RCOMonthlyGasValue,this.contractForDisplay.RCOGasCounterReading=this.form.value.contractValues.RCOGasCounterReading,this.contractForDisplay.RCOActive=this.tenActive,this.contractForDisplay.RowDelete=this.tenDeleted}getContractById(e){const a=[];this.contractService.getOneContract(e).subscribe(n=>{"T"!=this.isRenewContract&&this.contractService.getOneContractDocs(this.curCOMId,this.account.periorty,e).subscribe(o=>{for(var r of o)a.push({link:r.RCDPic,preview:r.RCDPic})}),this.fillForm(n,a),this.contractForDisplay=n,"T"==this.isRenewContract&&(this.contractForDisplay.id=null)})}fillForm(e,a){this.is_active="T"==e.RCOActive,null!=e.branch_KeyField&&this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.branch_KeyField),null!=e.build_KeyField&&this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,e.build_KeyField,""),null!=e.owner_KeyField&&this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,e.owner_KeyField),null!=e.customer_KeyField&&this.getRepresentativePerCustomer(this.curCOMId,this.account.periorty,e.customer_KeyField),null!=e.RCODate&&(this.s_rcoDate="T"==this.isRenewContract?new Date:e.RCODate),this.is_delete=1==e.RowDelete,this.form.patchValue("T"!=this.isRenewContract?{id:e.id,Related_RCOKeyField:e.Related_RCOKeyField,RCOCode:e.RCOCode,RCOSubCode:e.RCOSubCode,RCOEjarCode:e.RCOEjarCode,contractDate:e.RCODate,contractStartDate:e.RCOStartDate,contractEndDate:e.RCOEndDate,RCOContractStatus:e.RCOContractStatus,RCOAlarmStartDate:e.RCOAlarmStartDate,RCOAlarmCounter:e.RCOAlarmCounter,RCONoOfDaysForAlarm:e.RCONoOfDaysForAlarm,RCONoOfDaysForEjarAlarm:e.RCONoOfDaysForEjarAlarm,contractUnit:{branch_KeyField:e.branch_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField},contractPerson:{owner_KeyField:e.owner_KeyField,owner_representative_KeyField:e.owner_representative_KeyField,customer_KeyField:e.customer_KeyField,customer_representative_KeyField:e.customer_representative_KeyField},contractValues:{RCOContractValue:e.RCOContractValue,RCOPayEveryMonthesNo:e.RCOPayEveryMonthesNo,RCOMonthValue:e.RCOMonthValue,RCOInsuranceValue:e.RCOInsuranceValue,RCOSeekingValue:e.RCOSeekingValue,RCOMonthlyExpense:e.RCOMonthlyExpense,RCOExpenseDesc:e.RCOExpenseDesc,RCOOtherValue:e.RCOOtherValue,RCOMonthlyElectricValue:e.RCOMonthlyElectricValue,RCOElectricCounterReading:e.RCOElectricCounterReading,RCOMonthlyWaterValue:e.RCOMonthlyWaterValue,RCOWaterCounterReading:e.RCOWaterCounterReading,RCOMonthlyGasValue:e.RCOMonthlyGasValue,RCOGasCounterReading:e.RCOGasCounterReading},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:a}}:{Related_RCOKeyField:e.id,RCOCode:e.RCOCode,RCOSubCode:+e.RCOSubCode+1,RCOEjarCode:e.RCOEjarCode,contractDate:new Date,contractStartDate:this.addDays(e.RCOEndDate,1),RCOContractStatus:e.RCOContractStatus,RCOAlarmCounter:0,RCONoOfDaysForAlarm:e.RCONoOfDaysForAlarm,RCONoOfDaysForEjarAlarm:e.RCONoOfDaysForEjarAlarm,contractUnit:{branch_KeyField:e.branch_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField},contractPerson:{owner_KeyField:e.owner_KeyField,owner_representative_KeyField:e.owner_representative_KeyField,customer_KeyField:e.customer_KeyField,customer_representative_KeyField:e.customer_representative_KeyField},contractValues:{RCOContractValue:e.RCOContractValue,RCOPayEveryMonthesNo:e.RCOPayEveryMonthesNo,RCOMonthValue:e.RCOMonthValue,RCOInsuranceValue:e.RCOInsuranceValue,RCOSeekingValue:e.RCOSeekingValue,RCOMonthlyExpense:e.RCOMonthlyExpense,RCOExpenseDesc:e.RCOExpenseDesc,RCOOtherValue:e.RCOOtherValue,RCOMonthlyElectricValue:e.RCOMonthlyElectricValue,RCOElectricCounterReading:e.RCOElectricCounterReading,RCOMonthlyWaterValue:e.RCOMonthlyWaterValue,RCOWaterCounterReading:e.RCOWaterCounterReading,RCOMonthlyGasValue:e.RCOMonthlyGasValue,RCOGasCounterReading:e.RCOGasCounterReading},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:a}})}handleInstallment(e){var a=this;return(0,ge.Z)(function*(){let n=12/e.RCOPayEveryMonthesNo,o=e.RCOPayEveryMonthesNo,r=e.RCOStartDate,m=e.RCOMonthValue;for(let _=0;_<n;_++){if(0==_)var h=new Date(r);else{const U=new Date(r);h=a.addMonths(U,_*o)}var f=new Date(new c.uU("en-GB").transform(h,"yyyy/MM/dd"));let b={contract_KeyField:e.id,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,INSCode:_+1,INSContractTyps:"I",INSStatus:"N",INSValue:m,INSDueDate:f};yield a.insertInstallment(b)}})()}insertInstallment(e){this.contractService.addInstallments(e).subscribe(a=>{})}saveUpdate(e){this.mapFormvalue_to_ContractClass(),e?(console.log("==========Edit Contract============"),this.contractService.editContract(this.contractForDisplay).subscribe(a=>{let n={contract_KeyField:a.id,TSTArrange:1,branch_KeyField:a.branch_KeyField,owner_KeyField:a.owner_KeyField,build_KeyField:a.build_KeyField,unit_KeyField:a.unit_KeyField,installment_KeyField:null,customer_KeyField:a.customer_KeyField,TSTCreditValue:0,TSTDebitValue:a.RCOContractValue,TSTDate:a.RCOStartDate,TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u0627\u0642\u062f \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+a.RCOCode+"/"+a.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:a.ID};this.contractService.deleteStatementForSubjectID(this.curCOMId,this.account.periorty,"RCONTRACT",a.id).subscribe(o=>{this.contractService.addStatement(n).subscribe(r=>{})}),null!=this.DocImageToUpload&&this.contractService.addContractDocs(this.contractForDisplay.id,this.DocImageToUpload).subscribe(o=>{}),this.contractService.updateCustomerUnitFromContract(this.contractForDisplay.customer_KeyField,this.contractForDisplay.build_KeyField,this.contractForDisplay.unit_KeyField,this.contractForDisplay.id).subscribe(o=>{}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},a=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(console.log("=====AddContract======"),this.contractService.addContract(this.contractForDisplay).subscribe(a=>{this.contractService.addStatement({contract_KeyField:a.id,TSTArrange:1,branch_KeyField:a.branch_KeyField,owner_KeyField:a.owner_KeyField,build_KeyField:a.build_KeyField,unit_KeyField:a.unit_KeyField,installment_KeyField:null,customer_KeyField:a.customer_KeyField,TSTCreditValue:0,TSTDebitValue:a.RCOContractValue,TSTDate:a.RCOStartDate,TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u0627\u0642\u062f \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+a.RCOCode+"/"+a.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:a.id}).subscribe(r=>{}),null!=this.DocImageToUpload&&this.contractService.addContractDocs(a.id,this.DocImageToUpload).subscribe(r=>{}),this.contractService.updateCustomerUnitFromContract(a.customer_KeyField,a.build_KeyField,a.unit_KeyField,a.id).subscribe(r=>{}),this.unitsService.editOneUnit({id:a.unit_KeyField,customer_KeyField:a.customer_KeyField,UNTHousingStatus:"R"}).subscribe(r=>{}),"T"==this.isRenewContract&&this.contractService.editOneContract({id:this.id,RCOContractStatus:"R"}).subscribe(m=>{}),this.handleInstallment(a),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-add/"+a.id+"/"])},a=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])}))}close(){}addDays(e,a){var n=new Date(e);return n.setDate(n.getDate()+a),n}addMonths(e,a){var n=new Date(e);return n.setMonth(n.getMonth()+a),n}addMonths2(e,a){var n=e.getDate();return e.setMonth(e.getMonth()+ +a),e.getDate()!=n&&e.setDate(0),e}compareFunction(e,a){return e.username==a.username&&e.code==a.code}getOwnershipDocType(e,a){this.codesService.getSubForParent(e,a,this.docType_const).subscribe(n=>{this.DocTypes=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0646\u0648\u0627\u0639 \u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0644\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onChangeContractValue(e){let n=this.form.value.contractValues.RCOPayEveryMonthesNo;0==n&&(n=1),this.form.patchValue({contractValues:{RCOMonthValue:e.target.value/(12/n)}})}onChangePayEvery(e){let n=e.target.value;0==n&&(n=1),this.form.patchValue({contractValues:{RCOMonthValue:this.form.value.contractValues.RCOContractValue/(12/n)}})}onChangeDays(e){if(new c.uU("en-GB").transform(this.form.value.contractEndDate,"dd/MM/yyyy"),null!=this.form.value.contractEndDate){let n=this.form.value.contractEndDate,o=e.target.value;this.paramValueForCode1=o,this.calcAlarmStartDate(n,o)}}onChangeEndDate(e){this.calcAlarmStartDate(e.value,this.paramValueForCode1),this.form.get("contractEndDate").patchValue(e.value)}subtractDays(e,a){var n=new Date(e);return n.setDate(n.getDate()-a),n}calcAlarmStartDate(e,a){var n=this.subtractDays(e,a);this.calcDate=new c.uU("en-GB").transform(n,"yyyy-MM-dd"),this.form.patchValue({RCONoOfDaysForAlarm:this.paramValueForCode1,RCONoOfDaysForEjarAlarm:this.paramValueForCode2}),this.form.get("RCOAlarmStartDate").patchValue(this.calcDate)}getParamValue(e,a,n){this.settingService.getValueForCode(e,a,n).subscribe(o=>{this.parameters=o,1==n&&(this.paramValueForCode1=o[0].APAValue),2==n&&(this.paramValueForCode2=o[0].APAValue),3==n&&(this.paramValueForCode3=o[0].APAValue)},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCountries(e,a){this.codesService.getSubForParent(e,a,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.value)}getBuildingPerBranch(e,a,n){this.unitsService.getBuildingsPerBranch(e,a,n).subscribe(o=>{this.AllBuilding=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(e){this.unitsService.getOneBuilding(e.value).subscribe(a=>{this.curOwnerId=a.owner_KeyField,console.log("====Cur Owner:: "+this.curOwnerId+"  "+a.owner_FullName),this.form.patchValue({contractPerson:{owner_KeyField:this.curOwnerId}}),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.curOwnerId)},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,e.value,"E")}getUnitsPerBuilding(e,a,n,o){this.unitsService.getAllUnitsPerBuilding(e,a,n,o).subscribe(r=>{this.AllUnitsForBuilding=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0644\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnit(e){e.value&&this.unitsService.getOneUnit(e.value).subscribe(a=>{this.form.patchValue({contractValues:{RCOContractValue:a.UNTContractValue,RCOPayEveryMonthesNo:a.UNTPayInstallmentEveryMonths,RCOMonthValue:a.UNTContractValue/(12/a.UNTPayInstallmentEveryMonths),RCOInsuranceValue:a.UNTInsuranceValue,RCOSeekingValue:a.UNTSeekingValue,RCOMonthlyExpense:a.UNTMonthlyExpense,RCOExpenseDesc:a.UNTExpenseDesc,RCOOtherValue:a.UNTOtherValue,RCOMonthlyElectricValue:a.UNTMonthlyElectricityFee,RCOElectricCounterReading:a.UNTLastElectricityReading,RCOMonthlyWaterValue:a.UNTMonthlyWaterFee,RCOWaterCounterReading:a.UNTLastWaterReading,RCOMonthlyGasValue:a.UNTMonthlyGasFee,RCOGasCounterReading:a.UNTLastGasReading}})},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnitById(e){e&&this.unitsService.getOneUnit(e).subscribe(a=>{this.form.patchValue({contractValues:{RCOContractValue:a.UNTContractValue,RCOPayEveryMonthesNo:a.UNTPayInstallmentEveryMonths,RCOMonthValue:a.UNTContractValue/(12/a.UNTPayInstallmentEveryMonths),RCOInsuranceValue:a.UNTInsuranceValue,RCOSeekingValue:a.UNTSeekingValue,RCOMonthlyExpense:a.UNTMonthlyExpense,RCOExpenseDesc:a.UNTExpenseDesc,RCOOtherValue:a.UNTOtherValue,RCOMonthlyElectricValue:a.UNTMonthlyElectricityFee,RCOElectricCounterReading:a.UNTLastElectricityReading,RCOMonthlyWaterValue:a.UNTMonthlyWaterFee,RCOWaterCounterReading:a.UNTLastWaterReading,RCOMonthlyGasValue:a.UNTMonthlyGasFee,RCOGasCounterReading:a.UNTLastGasReading}})},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getRepresentativePerOwner(e,a,n){this.contractService.getOwnersPerParent(e,a,n).subscribe(o=>{this.AllRepresentativeForOwner=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0645\u062b\u0644 \u0627\u0644\u0645\u0627\u0644\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readOwner(e){console.log("====Selected readOwner:: "+e.value),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,e.value)}getAllBranches(e,a){this.atlasService.getAllBranch(e,a).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllOwnerss(e,a){this.contractService.getAllOwners(e,a).subscribe(n=>{this.AllOwners=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0644\u0627\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readCustumer(e){console.log("====Selected readCustumer:: "+e),this.tenantsService.getOneCustomer(e).subscribe(a=>{console.log("====Selected branch:: "+a.current_branch),console.log("====Selected building:: "+a.current_building),console.log("====Selected unit:: "+a.current_unit),a.current_unit&&(this.form.patchValue({contractUnit:{branch_KeyField:a.current_branch,build_KeyField:a.current_building,unit_KeyField:a.current_unit}}),this.getBuildingPerBranch(this.curCOMId,this.account.periorty,a.current_branch),this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,a.current_building,"E"),this.readUnitById(a.current_unit))},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getRepresentativePerCustomer(this.curCOMId,this.account.periorty,e)}getRepresentativePerCustomer(e,a,n){this.tenantsService.getCustomersPerParent(e,a,n).subscribe(o=>{this.AllRepresentativeForCustomer=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0645\u062b\u0644 \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getTenants(){this.AllTenants=null,this.tenantsService.getCustomersConfirmed(this.curCOMId,this.account.periorty).subscribe(e=>this.AllTenants=e)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e})}}K.\u0275fac=function(e){return new(e||K)(t.Y36(C.gz),t.Y36(Zt.d),t.Y36(ct.X),t.Y36(P.W),t.Y36(s.QS),t.Y36(Z.C),t.Y36(C.F0),t.Y36(S.U),t.Y36(g.sK),t.Y36(B.Z),t.Y36(fe.g),t.Y36(E.v),t.Y36(x.ux))},K.\u0275cmp=t.Xpm({type:K,selectors:[["app-contract-dialog"]],decls:304,vars:183,consts:[["mat-dialog-title","",4,"ngIf"],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","27.0",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","RCOCode"],["fxFlex","100","fxFlex.gt-sm","22.8",1,"px-1"],["matInput","","formControlName","RCOSubCode"],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["matInput","","formControlName","contractDate",3,"matDatepicker"],["matSuffix","",3,"for"],["contractDate",""],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","contractStartDate",3,"matDatepicker"],["contractStartDate",""],["matInput","","formControlName","contractEndDate",3,"matDatepicker","dateChange"],["contractEndDate",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","RCOContractStatus","id","contStatusOpSel",3,"placeholder"],[3,"value"],["matInput","","formControlName","RCOEjarCode"],["matInput","","type","date","formControlName","RCOAlarmStartDate",1,"form-control"],["matInput","","formControlName","RCONoOfDaysForAlarm","required","",3,"change"],["matInput","","formControlName","RCONoOfDaysForEjarAlarm","required",""],["matInput","","formControlName","RCOAlarmCounter"],["formGroupName","contractPerson",3,"label"],["fxFlex","100","fxFlex.gt-sm","59.8",1,"px-1"],["formControlName","owner_KeyField","id","oneOwnerOpSel",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","39.8",1,"px-1"],["formControlName","owner_representative_KeyField","id","oneOwnerRepresOpSel",3,"placeholder"],["fxLayout","row wrap"],["appearance","outline","formControlName","customer_KeyField","id","oneCustomOpSel",1,"w-100",3,"placeholder","change"],["formControlName","customer_representative_KeyField","id","CustomRepsOpSel",3,"placeholder"],["formGroupName","contractUnit",3,"label"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],["formControlName","build_KeyField","id","buildOneOpSel",3,"placeholder","selectionChange"],["formControlName","unit_KeyField","id","unitOneOpSel",3,"placeholder","selectionChange"],["formGroupName","contractValues",3,"label"],["matInput","","formControlName","RCOContractValue","required","",3,"change"],["matInput","","formControlName","RCOPayEveryMonthesNo","required","",3,"change"],["matInput","","formControlName","RCOMonthValue","required",""],["fxFlex","100","fxFlex.gt-sm","24.9",1,"px-1"],["matInput","","formControlName","RCOInsuranceValue"],["matInput","","formControlName","RCOSeekingValue"],["matInput","","formControlName","RCOMonthlyExpense"],["matInput","","formControlName","RCOOtherValue"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","RCOExpenseDesc"],["matInput","","formControlName","RCOMonthlyElectricValue"],["matInput","","formControlName","RCOElectricCounterReading"],["matInput","","formControlName","RCOMonthlyWaterValue"],["matInput","","formControlName","RCOWaterCounterReading"],["matInput","","formControlName","RCOMonthlyGasValue"],["matInput","","formControlName","RCOGasCounterReading"],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-dialog-title",""],[4,"ngIf"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,a){if(1&e){const n=t.EpF();t.YNc(0,Te,3,3,"h1",0),t.YNc(1,Ze,5,5,"h1",0),t.TgZ(2,"form",1)(3,"mat-tab-group",2)(4,"mat-tab",3),t.ALo(5,"translate"),t.TgZ(6,"div",4)(7,"div",5),t._UZ(8,"mat-label"),t.TgZ(9,"div",6)(10,"div",7)(11,"mat-form-field",8)(12,"mat-label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"input",9),t.qZA()(),t.TgZ(16,"div",10)(17,"mat-form-field",8)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",11),t.qZA()(),t.TgZ(22,"div",12)(23,"mat-form-field",8)(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"input",13)(28,"mat-datepicker-toggle",14)(29,"mat-datepicker",null,15),t.qZA()()()(),t.TgZ(31,"div",6)(32,"div",16)(33,"mat-form-field",8)(34,"mat-label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",17)(38,"mat-datepicker-toggle",14)(39,"mat-datepicker",null,18),t.qZA()(),t.TgZ(41,"div",16)(42,"mat-form-field",8)(43,"mat-label"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"input",19),t.NdJ("dateChange",function(r){return a.onChangeEndDate(r)}),t.qZA(),t._UZ(47,"mat-datepicker-toggle",14)(48,"mat-datepicker",null,20),t.qZA()()(),t.TgZ(50,"div",6)(51,"div",21)(52,"mat-form-field",8)(53,"mat-label"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"mat-select",22),t.ALo(57,"translate"),t.TgZ(58,"mat-option",23),t._uU(59,"-"),t.qZA(),t.TgZ(60,"mat-option",23),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"mat-option",23),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"mat-option",23),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"mat-option",23),t._uU(70),t.ALo(71,"translate"),t.qZA()()()(),t.TgZ(72,"div",21)(73,"mat-form-field",8)(74,"mat-label"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t._UZ(77,"input",24),t.qZA()(),t.TgZ(78,"div",21)(79,"mat-form-field",8)(80,"mat-label"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t._UZ(83,"input",25),t.qZA()()(),t.TgZ(84,"div",6)(85,"div",21)(86,"mat-form-field",8)(87,"mat-label"),t._uU(88),t.ALo(89,"translate"),t.qZA(),t.TgZ(90,"input",26),t.NdJ("change",function(r){return a.onChangeDays(r)}),t.qZA()()(),t.TgZ(91,"div",21)(92,"mat-form-field",8)(93,"mat-label"),t._uU(94),t.ALo(95,"translate"),t.qZA(),t._UZ(96,"input",27),t.qZA()(),t.TgZ(97,"div",21)(98,"mat-form-field",8)(99,"mat-label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t._UZ(102,"input",28),t.qZA()()()()(),t.TgZ(103,"mat-tab",29),t.ALo(104,"translate"),t.TgZ(105,"div",4)(106,"div",5),t._UZ(107,"mat-label"),t.TgZ(108,"div",6)(109,"div",30)(110,"mat-form-field",8)(111,"mat-label"),t._uU(112),t.ALo(113,"translate"),t.qZA(),t.TgZ(114,"mat-select",31),t.NdJ("selectionChange",function(r){return a.readOwner(r)}),t.ALo(115,"translate"),t.TgZ(116,"mat-option",23),t._uU(117,"-"),t.qZA(),t.YNc(118,Ae,2,2,"mat-option",32),t.qZA()()(),t.TgZ(119,"div",33)(120,"mat-form-field",8)(121,"mat-label"),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"mat-select",34),t.ALo(125,"translate"),t.TgZ(126,"mat-option",23),t._uU(127,"-"),t.qZA(),t.YNc(128,be,2,2,"mat-option",32),t.qZA()()()(),t.TgZ(129,"div",35)(130,"div",30)(131,"label"),t._uU(132),t.ALo(133,"translate"),t.qZA(),t.TgZ(134,"ng-select",36),t.NdJ("change",function(r){return a.readCustumer(r)}),t.ALo(135,"translate"),t.YNc(136,ye,2,2,"ng-option",32),t.qZA()(),t.TgZ(137,"div",33)(138,"mat-form-field",8)(139,"mat-label"),t._uU(140),t.ALo(141,"translate"),t.qZA(),t.TgZ(142,"mat-select",37),t.ALo(143,"translate"),t.TgZ(144,"mat-option",23),t._uU(145,"-"),t.qZA(),t.YNc(146,Oe,2,2,"mat-option",32),t.qZA()()()()()()(),t.TgZ(147,"mat-tab",38),t.ALo(148,"translate"),t.TgZ(149,"div",4)(150,"div",5),t._UZ(151,"mat-label"),t.TgZ(152,"div",6)(153,"div",12)(154,"mat-form-field",8)(155,"mat-label"),t._uU(156),t.ALo(157,"translate"),t.qZA(),t.TgZ(158,"mat-select",39),t.NdJ("selectionChange",function(r){return a.getBuildings(r)}),t.ALo(159,"translate"),t.TgZ(160,"mat-option",23),t._uU(161,"-"),t.qZA(),t.YNc(162,De,2,2,"mat-option",32),t.qZA()()()(),t.TgZ(163,"div",6)(164,"div",16)(165,"mat-form-field",8)(166,"mat-label"),t._uU(167),t.ALo(168,"translate"),t.qZA(),t.TgZ(169,"mat-select",40),t.NdJ("selectionChange",function(r){return a.readBuilding(r)}),t.ALo(170,"translate"),t.TgZ(171,"mat-option",23),t._uU(172,"-"),t.qZA(),t.YNc(173,xe,2,2,"mat-option",32),t.qZA()()(),t.TgZ(174,"div",16)(175,"mat-form-field",8)(176,"mat-label"),t._uU(177),t.ALo(178,"translate"),t.qZA(),t.TgZ(179,"mat-select",41),t.NdJ("selectionChange",function(r){return a.readUnit(r)}),t.ALo(180,"translate"),t.TgZ(181,"mat-option",23),t._uU(182,"-"),t.qZA(),t.YNc(183,Le,2,2,"mat-option",32),t.qZA()()()()()()(),t.TgZ(184,"mat-tab",42),t.ALo(185,"translate"),t.TgZ(186,"div",4)(187,"div",5),t._UZ(188,"mat-label"),t.TgZ(189,"div",6)(190,"div",21)(191,"mat-form-field",8)(192,"mat-label"),t._uU(193),t.ALo(194,"translate"),t.qZA(),t.TgZ(195,"input",43),t.NdJ("change",function(r){return a.onChangeContractValue(r)}),t.qZA()()(),t.TgZ(196,"div",21)(197,"mat-form-field",8)(198,"mat-label"),t._uU(199),t.ALo(200,"translate"),t.qZA(),t.TgZ(201,"input",44),t.NdJ("change",function(r){return a.onChangePayEvery(r)}),t.qZA()()(),t.TgZ(202,"div",21)(203,"mat-form-field",8)(204,"mat-label"),t._uU(205),t.ALo(206,"translate"),t.qZA(),t._UZ(207,"input",45),t.qZA()()()(),t.TgZ(208,"div",6)(209,"div",46)(210,"mat-form-field",8)(211,"mat-label"),t._uU(212),t.ALo(213,"translate"),t.qZA(),t._UZ(214,"input",47),t.qZA()(),t.TgZ(215,"div",46)(216,"mat-form-field",8)(217,"mat-label"),t._uU(218),t.ALo(219,"translate"),t.qZA(),t._UZ(220,"input",48),t.qZA()(),t.TgZ(221,"div",46)(222,"mat-form-field",8)(223,"mat-label"),t._uU(224),t.ALo(225,"translate"),t.qZA(),t._UZ(226,"input",49),t.qZA()(),t.TgZ(227,"div",46)(228,"mat-form-field",8)(229,"mat-label"),t._uU(230),t.ALo(231,"translate"),t.qZA(),t._UZ(232,"input",50),t.qZA()()(),t.TgZ(233,"div",6)(234,"div",51)(235,"mat-form-field",8)(236,"mat-label"),t._uU(237),t.ALo(238,"translate"),t.qZA(),t._UZ(239,"input",52),t.qZA()()(),t.TgZ(240,"div",6)(241,"div",16)(242,"mat-form-field",8)(243,"mat-label"),t._uU(244),t.ALo(245,"translate"),t.qZA(),t._UZ(246,"input",53),t.qZA()(),t.TgZ(247,"div",16)(248,"mat-form-field",8)(249,"mat-label"),t._uU(250),t.ALo(251,"translate"),t.qZA(),t._UZ(252,"input",54),t.qZA()()(),t.TgZ(253,"div",6)(254,"div",16)(255,"mat-form-field",8)(256,"mat-label"),t._uU(257),t.ALo(258,"translate"),t.qZA(),t._UZ(259,"input",55),t.qZA()(),t.TgZ(260,"div",16)(261,"mat-form-field",8)(262,"mat-label"),t._uU(263),t.ALo(264,"translate"),t.qZA(),t._UZ(265,"input",56),t.qZA()()(),t.TgZ(266,"div",6)(267,"div",16)(268,"mat-form-field",8)(269,"mat-label"),t._uU(270),t.ALo(271,"translate"),t.qZA(),t._UZ(272,"input",57),t.qZA()(),t.TgZ(273,"div",16)(274,"mat-form-field",8)(275,"mat-label"),t._uU(276),t.ALo(277,"translate"),t.qZA(),t._UZ(278,"input",58),t.qZA()()()()(),t.TgZ(279,"mat-tab",59),t.ALo(280,"translate"),t.TgZ(281,"div",4)(282,"mat-checkbox",60),t._uU(283),t.ALo(284,"translate"),t.qZA(),t.TgZ(285,"mat-checkbox",61),t._uU(286),t.ALo(287,"translate"),t.qZA()()(),t.TgZ(288,"mat-tab",62),t.ALo(289,"translate"),t.TgZ(290,"div",63)(291,"div",64),t._UZ(292,"img",65),t.TgZ(293,"input",66,67),t.NdJ("change",function(r){return a.onFileChange(r.target.files)}),t.qZA(),t.TgZ(295,"button",68),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(294);return t.KtG(r.click())}),t._uU(296),t.ALo(297,"translate"),t.qZA()(),t._UZ(298,"mat-divider")(299,"input-file",69),t.qZA()()()(),t._UZ(300,"br"),t.TgZ(301,"div",70)(302,"div",6),t.YNc(303,Ue,3,4,"button",71),t.qZA()()}if(2&e){const n=t.MAs(30),o=t.MAs(40),r=t.MAs(49);t.Q6J("ngIf","T"==a.isRenewContract),t.xp6(1),t.Q6J("ngIf","T"!=a.isRenewContract),t.xp6(1),t.Q6J("formGroup",a.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(5,77,"HTML.TAB_BASIC")),t.xp6(9),t.hij(" ",t.lcZ(14,79,"HTML.CODE"),""),t.xp6(6),t.hij(" ",t.lcZ(20,81,"HTML.SUBCODE"),""),t.xp6(6),t.Oqu(t.lcZ(26,83,"HTML.ContractDate")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(7),t.Oqu(t.lcZ(36,85,"HTML.ContractStartDate")),t.xp6(2),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(6),t.Oqu(t.lcZ(45,87,"HTML.ContractEndDate")),t.xp6(2),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(7),t.Oqu(t.lcZ(55,89,"HTML.ContractStatus")),t.xp6(2),t.s9C("placeholder",t.lcZ(57,91,"HTML.ContractStatus")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(62,93,"OPTIONS.NEW")),t.xp6(2),t.Q6J("value","R"),t.xp6(1),t.Oqu(t.lcZ(65,95,"OPTIONS.ReNew")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(68,97,"OPTIONS.Canceld")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(71,99,"OPTIONS.Finished")),t.xp6(5),t.Oqu(t.lcZ(76,101,"HTML.ContractEjarCode")),t.xp6(6),t.Oqu(t.lcZ(82,103,"HTML.ContractAlarmStartDate")),t.xp6(7),t.hij(" ",t.lcZ(89,105,"HTML.ContractNoOfDaysForAlarm"),""),t.xp6(6),t.hij(" ",t.lcZ(95,107,"HTML.ContractNoOfDaysForEjarAlarm"),""),t.xp6(6),t.hij(" ",t.lcZ(101,109,"HTML.ContractAlarmCounter"),""),t.xp6(3),t.s9C("label",t.lcZ(104,111,"HTML.TAB_ContractPersons")),t.xp6(9),t.hij(" ",t.lcZ(113,113,"HTML.OWNER"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(115,115,"HTML.OWNER")),t.xp6(4),t.Q6J("ngForOf",a.AllOwners),t.xp6(4),t.hij(" ",t.lcZ(123,117,"HTML.OwnerRepresentative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(125,119,"HTML.OwnerRepresentative")),t.xp6(4),t.Q6J("ngForOf",a.AllRepresentativeForOwner),t.xp6(4),t.hij(" ",t.lcZ(133,121,"HTML.TENANT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(135,123,"HTML.TENANT")),t.xp6(2),t.Q6J("ngForOf",a.AllTenants),t.xp6(4),t.hij(" ",t.lcZ(141,125,"HTML.TenantRepresentative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(143,127,"HTML.TenantRepresentative")),t.xp6(4),t.Q6J("ngForOf",a.AllRepresentativeForCustomer),t.xp6(1),t.s9C("label",t.lcZ(148,129,"HTML.TAB_ContractUnit")),t.xp6(9),t.hij(" ",t.lcZ(157,131,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(159,133,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",a.AllBranches),t.xp6(5),t.hij(" ",t.lcZ(168,135,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(170,137,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",a.AllBuilding),t.xp6(4),t.hij(" ",t.lcZ(178,139,"HTML.UNIT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(180,141,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",a.AllUnitsForBuilding),t.xp6(1),t.s9C("label",t.lcZ(185,143,"HTML.TAB_ContractValues")),t.xp6(9),t.Oqu(t.lcZ(194,145,"HTML.ContractValue")),t.xp6(6),t.Oqu(t.lcZ(200,147,"HTML.PayEveryMonthesNo")),t.xp6(6),t.Oqu(t.lcZ(206,149,"HTML.InstallmentValue")),t.xp6(7),t.Oqu(t.lcZ(213,151,"HTML.InsuranceValue")),t.xp6(6),t.Oqu(t.lcZ(219,153,"HTML.SeekingValue")),t.xp6(6),t.Oqu(t.lcZ(225,155,"HTML.MonthlyExpense")),t.xp6(6),t.Oqu(t.lcZ(231,157,"HTML.OtherValue")),t.xp6(7),t.Oqu(t.lcZ(238,159,"HTML.ExpenseDesc")),t.xp6(7),t.Oqu(t.lcZ(245,161,"HTML.MonthlyElectricValue")),t.xp6(6),t.Oqu(t.lcZ(251,163,"HTML.ElectricCounterReading")),t.xp6(7),t.Oqu(t.lcZ(258,165,"HTML.MonthlyWaterValue")),t.xp6(6),t.Oqu(t.lcZ(264,167,"HTML.WaterCounterReading")),t.xp6(7),t.Oqu(t.lcZ(271,169,"HTML.MonthlyGasValue")),t.xp6(6),t.Oqu(t.lcZ(277,171,"HTML.GasCounterReading")),t.xp6(3),t.s9C("label",t.lcZ(280,173,"HTML.TAB_SETTINGS")),t.xp6(4),t.Oqu(t.lcZ(284,175,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(287,177,"HTML.BLOCKED")),t.xp6(2),t.s9C("label",t.lcZ(289,179,"HTML.TAB_DOCS")),t.xp6(4),t.Q6J("src",a.defaultDocImage,t.LSH),t.xp6(4),t.Oqu(t.lcZ(297,181,"HTML.AddPic")),t.xp6(7),t.Q6J("ngIf",a.contractForDisplay.id&&a.can("change_rentcontracts")||!a.contractForDisplay.id&&a.can("add_rentcontracts"))}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.Q7,c.sg,c.O5,s.sg,s.u,s.x0,u.xw,u.SQ,u.Wh,u.yH,q.ey,T.lW,ht.oG,v.Mq,v.hl,v.nW,d.ZT,d.uh,d.H8,N.Nt,p.KE,p.hX,p.R9,I.d,M.gD,Q.uX,Q.SP,gt.tW,_t.w9,_t.jq,g.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}\n"],encapsulation:2});var Fe=l(529),Se=l(589),we=l(9045),qe=l(7948);class Me{}var Ee=l(900);function Re(i,e){if(1&i&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.value),t.xp6(1),t.hij(" ",a.name," ")}}function Pe(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const a=t.oxw();t.Q6J("disabled",!a.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function ke(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.remove(o.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&i&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function Ke(i,e){if(1&i&&(t.TgZ(0,"div",21)(1,"div",22),t._uU(2),t.qZA(),t.TgZ(3,"div",22),t._uU(4),t.qZA(),t.TgZ(5,"div",22),t._uU(6),t.qZA(),t.TgZ(7,"div",22)(8,"div",23),t.YNc(9,ke,4,3,"button",24),t.qZA()()()),2&i){const a=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(a.CURRelationTypeDisplay),t.xp6(2),t.Oqu(a.CURName),t.xp6(2),t.hij("",a.CURMobile," "),t.xp6(3),t.Q6J("ngIf",n.can("delete_tenantrelative"))}}class tt{constructor(e,a,n,o,r,m,h,f,_,b){this.dialogRef=e,this.dataInjected=a,this.atlasService=n,this._CustomerService=o,this.translateService=r,this.localStore=m,this.appService=h,this.dialog=f,this.snackBar=_,this.fb=b,this.passwordHide=!0,this.relatives=[],this.curCOMId=y.N.comid,this.userPerm=[]}ngOnInit(){this.relatives=this.appService.getRelative(),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({customer_KeyField:[null,s.kI.required],CURRelationType:[null,s.kI.required],CURName:[null,s.kI.required],CURMobile:null,CURPic:null}),console.log(this.dataInjected.custId),this.dataForm.patchValue({customer_KeyField:this.dataInjected.custId}),this.oneRelated=new Me,this.curPeriority=this.dataInjected.periorty,this.action="Patch",this.getTenantRelated(),this.prepareMsgLanguage()}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getTenantRelated(){this.cusRelated=null,this._CustomerService.getRelatedPerCustomers(this.curCOMId,this.curPeriority,this.dataInjected.custId).subscribe(e=>this.cusRelated=e)}mapFormValue_toTable(){this.oneRelated.customer_KeyField=this.dataInjected.custId,this.oneRelated.CURRelationType=this.dataForm.value.CURRelationType,this.oneRelated.CURName=this.dataForm.value.CURName,this.oneRelated.CURMobile=this.dataForm.value.CURMobile}onSave(){this.mapFormValue_toTable(),this._CustomerService.addRelatedForTenant(this.oneRelated).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(e){this.dialog.open(R.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this._CustomerService.deleteRelativeForTenant(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}tt.\u0275fac=function(e){return new(e||tt)(t.Y36(d.so),t.Y36(d.WI),t.Y36(B.Z),t.Y36(E.v),t.Y36(g.sK),t.Y36(Z.C),t.Y36(Ee.z),t.Y36(d.uw),t.Y36(x.ux),t.Y36(s.QS))},tt.\u0275cmp=t.Xpm({type:tt,selectors:[["app-cus-related-dialog"]],decls:54,vars:31,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","CURRelationType","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","CURName"],["matInput","","formControlName","CURMobile"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],[3,"value"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",6),t.ALo(10,"translate"),t.YNc(11,Re,2,2,"mat-option",7),t.qZA()()(),t.TgZ(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",8),t.qZA()(),t.TgZ(18,"div",4)(19,"mat-form-field",5)(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"input",9),t.qZA()()()()(),t.TgZ(24,"div",10)(25,"div",3),t.YNc(26,Pe,4,4,"button",11),t.TgZ(27,"button",12),t.NdJ("click",function(){return a.close()}),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t._UZ(30,"mat-divider"),t.TgZ(31,"div",13)(32,"mat-card")(33,"div",14)(34,"h2"),t._uU(35),t.ALo(36,"translate"),t.qZA()(),t._UZ(37,"mat-divider"),t.TgZ(38,"div",15)(39,"div",16)(40,"div",17)(41,"h2"),t._uU(42),t.ALo(43,"translate"),t.qZA()(),t.TgZ(44,"div",17)(45,"h2"),t._uU(46),t.ALo(47,"translate"),t.qZA()(),t.TgZ(48,"div",17)(49,"h2"),t._uU(50),t.ALo(51,"translate"),t.qZA()(),t._UZ(52,"div",17),t.qZA(),t.YNc(53,Ke,10,4,"div",18),t.qZA()()()()),2&e&&(t.Q6J("formGroup",a.dataForm),t.xp6(7),t.hij(" ",t.lcZ(8,13,"HTML.Relative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(10,15,"HTML.Relative")),t.xp6(2),t.Q6J("ngForOf",a.relatives),t.xp6(4),t.Oqu(t.lcZ(16,17,"FIELD.NAME")),t.xp6(6),t.Oqu(t.lcZ(22,19,"HTML.MOBILE")),t.xp6(5),t.Q6J("ngIf",a.can("add_tenantrelative")||0==a.curPeriority),t.xp6(2),t.Oqu(t.lcZ(29,21,"BTN.CANCEL")),t.xp6(7),t.Oqu(t.lcZ(36,23,"HTML.Relative")),t.xp6(7),t.hij(" ",t.lcZ(43,25,"HTML.Relative")," "),t.xp6(4),t.hij(" ",t.lcZ(47,27,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(51,29,"HTML.MOBILE")," "),t.xp6(3),t.Q6J("ngForOf",a.cusRelated))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.Q7,c.sg,c.O5,s.sg,s.u,u.xw,u.Wh,u.yH,q.ey,T.lW,T.nh,L.a8,d.xY,d.H8,w.Hw,N.Nt,p.KE,p.hX,I.d,M.gD,X.gM,g.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});var dt=l(1948);function Je(i,e){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function Be(i,e){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function He(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Code is required"),t.qZA())}function Ve(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Code isn't long enough, minimum of 4 characters"),t.qZA())}function We(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Password is required"),t.qZA())}function Ye(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Password isn't long enough, minimum of 6 characters"),t.qZA())}function Qe(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"mat-form-field",52)(1,"mat-label")(2,"mat-icon"),t._uU(3,"vpn_key"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"input",77),t.TgZ(7,"mat-icon",78),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.passwordHide=!o.passwordHide)}),t._uU(8),t.qZA(),t.YNc(9,We,2,0,"mat-error",1),t.YNc(10,Ye,2,0,"mat-error",1),t.qZA()}if(2&i){const a=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,5,"HTML.PASSWORD"),""),t.xp6(2),t.Q6J("type",a.passwordHide?"password":"text"),t.xp6(2),t.Oqu(a.passwordHide?"visibility":"visibility_off"),t.xp6(1),t.Q6J("ngIf",null==a.form.controls.password.errors?null:a.form.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",a.form.controls.password.hasError("minlength"))}}function Ge(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"First name is required"),t.qZA())}function je(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Last name is required"),t.qZA())}function $e(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Mobile is required"),t.qZA())}function Xe(i,e){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.BRAArbName," ")}}function ze(i,e){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.BUIName," ")}}function ta(i,e){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.UNTUnitNumber," ")}}function ea(i,e){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.CTTSubjectName," ")}}function aa(i,e){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.CTTSubjectName," ")}}function ia(i,e){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.CTTSubjectName," ")}}function na(i,e){1&i&&(t.TgZ(0,"mat-tab",79),t.ALo(1,"translate"),t.TgZ(2,"div",5)(3,"mat-checkbox",80),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-checkbox",81),t._uU(7),t.ALo(8,"translate"),t.qZA()()()),2&i&&(t.s9C("label",t.lcZ(1,3,"HTML.TAB_SETTINGS")),t.xp6(4),t.Oqu(t.lcZ(5,5,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(8,7,"HTML.BLOCKED")))}function oa(i,e){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function ra(i,e){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function sa(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",82),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.saveUpdate(o.CUS.id))}),t.YNc(1,oa,3,3,"span",1),t.YNc(2,ra,3,3,"span",1),t.qZA()}if(2&i){const a=t.oxw();t.Q6J("mat-dialog-close",a.form.value)("disabled",!a.form.valid),t.xp6(1),t.Q6J("ngIf",!a.CUS.id),t.xp6(1),t.Q6J("ngIf",a.CUS.id)}}function la(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.customerRelated(o.CUS.id))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const a=t.oxw();t.Q6J("disabled",!a.form.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.Accompany"))}}function ca(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.confirmData(o.CUS.id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const a=t.oxw();t.Q6J("disabled",!a.form.valid),t.xp6(1),t.Oqu(t.lcZ(2,2,"BTN.SUBMIT"))}}class G{constructor(e,a,n,o,r,m,h,f,_,b,U,rt,st){this.appSettings=e,this.activatedRoute=a,this.codesService=n,this.unitsService=o,this.fb=r,this.localStore=m,this._CustomerService=h,this.router=f,this.dialog=_,this.global=b,this.atlasService=U,this.translateService=rt,this.snackBar=st,this.curCOMId=y.N.comid,this.account=new F.n,this.country_const=(new A.I).Countries,this.notificationType_const=(new A.I).NotificationTypes,this.job_const=(new A.I).Jobs,this.workplace_const=(new A.I).WorkPlaces,this.passwordHide=!0,this.tenant=new ut,this.userPerm=[],this.DocImageToUpload=null,this.defaultDocImage=(new O.P).noImage,this.defaultCusImage=(new O.P).noImage,this.CusImageToUpload=null,this.defaultIDImage=(new O.P).noImage,this.IDImageToUpload=null,this.AllBranches=[],this.notificationsObject=new qe.j,this.Jobs=[],this.WorkPlaces=[],this.Countries=[],this.AllBuildings=[],this.AllUnits=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.getCountries(this.curCOMId,this.account.periorty),this.getJobs(this.curCOMId,this.account.periorty),this.getWorkPlaces(this.curCOMId,this.account.periorty),this.getAllBuildings(this.curCOMId,this.account.periorty),this.getNotificationRows(this.curCOMId,this.account.periorty,1),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=+e.id,this.getTenantById(this.id)):this.CUS=new ut;var a=JSON.parse(this.localStore.getItem("account"));console.log(a.first_name),console.log(a.branch_KeyField),console.log(a.is_employee),console.log(a.RowConfirm),this.form=this.fb.group({id:null,code:[null,s.kI.required],username:{value:null,disabled:this.id},password:null,firstname:[null,s.kI.compose([s.kI.required,s.kI.minLength(3)])],lastname:[null,s.kI.compose([s.kI.required,s.kI.minLength(3)])],image:null,mobile:null,selftype:"P",profile:this.fb.group({birthday:[null,s.kI.required],gender:"M",current_branch:{value:null,disabled:"T"!=a.is_employee},curbuilding:{value:null,disabled:"T"!=a.is_employee},curunit:{value:null,disabled:"T"!=a.is_employee}}),work:this.fb.group({company:[null,s.kI.required],position:null,nationalIDType:"F",nationalID:[null,s.kI.required],nationalIDStartDate:null,nationalIDEndDate:null,nationalIDPic:null,WorkPlace_CTTKeyField:null,Job_CTTKeyField:null}),contacts:this.fb.group({email:null,homephone:null,workphone:null,address:null,country:[{value:null}],governorate:[{value:null,disabled:!0}],city:[{value:null,disabled:!0}],area:[{value:null,disabled:!0}]}),social:this.fb.group({facebook:null,twitter:null,google:null}),settings:this.fb.group({isActive:null,isDeleted:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),this.getAllBranches(this.curCOMId,this.account.periorty)})}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onFileChange(e){this.DocImageToUpload=e.item(0);var a=new FileReader;a.onload=n=>{this.defaultDocImage=n.target.result},a.readAsDataURL(this.DocImageToUpload)}onFileRemove(e){console.log("====On Remove:: "+e)}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var a=new FileReader;a.onload=n=>{this.defaultCusImage=n.target.result},a.readAsDataURL(this.CusImageToUpload)}handelIDImgInput(e){this.IDImageToUpload=e.item(0);var a=new FileReader;a.onload=n=>{console.log("=====before====="+this.defaultIDImage),this.defaultIDImage=n.target.result,console.log("=====after====="+this.defaultIDImage)},a.readAsDataURL(this.IDImageToUpload)}mapFormvalue_to_CustomerClass(e){this.form.enable(),this.cur_branch=this.form.value.profile.current_branch,this.cur_building=this.form.value.profile.curbuilding,this.cur_unit=this.form.value.profile.curunit,this.form.disable(),console.log("cur_branch11:: "+this.cur_branch),console.log("cur_building11:: "+this.cur_building),console.log("cur_unit11:: "+this.cur_unit);const a=new c.uU("en-GB").transform(this.form.value.profile.birthday,"dd/MM/yyyy"),n=new c.uU("en-GB").transform(this.form.value.work.nationalIDStartDate,"dd/MM/yyyy"),o=new c.uU("en-GB").transform(this.form.value.work.nationalIDEndDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,null!=this.form.value.profile.birthday&&(this.CUS.CUSBirthDate=a),null!=this.form.value.work.nationalIDStartDate&&(this.CUS.CUSNationalIDStartDate=n),null!=this.form.value.work.nationalIDEndDate&&(this.CUS.CUSNationalIDEndDate=o),this.CUS.CUSCode=+this.form.value.code,this.CUS.CUSFirstName=this.form.value.firstname,this.CUS.CUSLastName=this.form.value.lastname,this.CUS.CUSusername=this.form.value.username,this.CUS.CUSpassword=this.form.value.password,"POST"==e&&(this.CUS.is_create_CustomUser_table="T"),this.CUS.CUSGender=this.form.value.profile.gender,this.CUS.current_branch=this.cur_branch,this.CUS.current_building=this.cur_building,this.CUS.current_unit=this.cur_unit,this.CUS.CUSSelfType=this.form.value.selftype,this.CUS.CUSPic=this.form.value.image,this.CUS.CUSIDPic=this.form.value.work.nationalIDPic,this.CUS.CUSGuarantor=this.form.value.work.company,this.CUS.CUSJobName=this.form.value.work.position,this.CUS.CUSNationalIDType=this.form.value.work.nationalIDType,this.CUS.CUSNationalID=this.form.value.work.nationalID,this.CUS.WorkPlace_CTTKeyField=this.form.value.work.WorkPlace_CTTKeyField,this.CUS.Job_CTTKeyField=this.form.value.work.Job_CTTKeyField,this.CUS.CUSMobile=this.form.value.mobile,this.CUS.CUSEmail=this.form.value.contacts.email,this.CUS.CUSHomePhone=this.form.value.contacts.homephone,this.CUS.CUSWorkPhone=this.form.value.contacts.workphone,this.CUS.CUSAddress=this.form.value.contacts.address,this.CUS.Country_CTTKeyField=this.form.value.contacts.country,this.CUS.Governorate_CTTKeyField=this.form.value.contacts.governorate,this.CUS.City_CTTKeyField=this.form.value.contacts.city,this.CUS.Area_CTTKeyField=this.form.value.contacts.area,this.CUS.CUSFacebook=this.form.value.social.facebook,this.CUS.CUSTwitter=this.form.value.social.twitter,this.CUS.CUSGoogle=this.form.value.social.google,this.CUS.CUSActive=this.tenActive,this.CUS.RowDelete=this.tenDeleted}getTenantById(e){const a=[];this._CustomerService.getOneCustomer(e).subscribe(n=>{this._CustomerService.getOneCustomerDocs(this.curCOMId,this.account.periorty,e).subscribe(o=>{for(var r of o)a.push({link:r.CUDPic,preview:r.CUDPic})}),this.fillForm(n,a),this.CUS=n})}fillForm(e,a){this.is_active="T"==e.CUSActive,null!=e.current_building&&this.getAllUnits(this.curCOMId,this.account.periorty,e.current_building),this.defaultCusImage=null!=e.CUSPic?e.CUSPic:(new O.P).noImage,this.defaultIDImage=null!=e.CUSIDPic?e.CUSIDPic:(new O.P).noImage,this.is_delete=1==e.RowDelete,this.form.patchValue({id:e.id,code:e.CUSCode,username:e.CUSusername,password:e.CUSpassword,firstname:e.CUSFirstName,lastname:e.CUSLastName,image:e.CUSPic,selftype:e.CUSSelfType,mobile:e.CUSMobile,profile:{birthday:e.CUSBirthDate,gender:e.CUSGender,current_branch:e.current_branch,curbuilding:e.current_building,curunit:e.current_unit},work:{company:e.CUSGuarantor,position:e.CUSJobName,nationalIDType:e.CUSNationalIDType,nationalID:e.CUSNationalID,nationalIDStartDate:e.CUSNationalIDStartDate,nationalIDEndDate:e.CUSNationalIDEndDate,nationalIDPic:e.CUSIDPic,WorkPlace_CTTKeyField:e.WorkPlace_CTTKeyField,Job_CTTKeyField:e.Job_CTTKeyField},contacts:{email:e.CUSEmail,homephone:e.CUSHomePhone,workphone:e.CUSWorkPhone,address:e.CUSAddress,country:e.Country_CTTKeyField,governorate:e.Governorate_CTTKeyField,city:e.City_CTTKeyField,area:e.Area_CTTKeyField},social:{facebook:e.CUSFacebook,twitter:e.CUSTwitter,google:e.CUSGoogle},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:a}}),this.getUnitFullData(e.current_unit)}getAllBranches(e,a){this.atlasService.getAllBranch(e,a).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getNotificationRows(e,a,n){this.codesService.getSubForParentAndArrange(e,a,this.notificationType_const,n).subscribe(o=>{1==n&&(this.cttNotificationType_TenantData=o[0].id),2==n&&(this.cttNotificationType_EndContract=o[0].id)},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0646\u0648\u0639 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapvaluesToNotificationClass(){this.notificationsObject.notificationType_CTTKeyField=this.cttNotificationType_TenantData,this.notificationsObject.UNOActive="T",this.notificationsObject.UNONotificationFromTenant="T",this.notificationsObject.branch_KeyField=this.cur_branch,this.notificationsObject.UNOTitle="\u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0623\u062c\u0631",this.notificationsObject.build_KeyField=this.cur_building,this.notificationsObject.unit_KeyField=this.cur_unit,this.notificationsObject.customer_KeyField=this.form.value.id,this.notificationsObject.UNOText="\u0628\u0631\u062c\u0627\u0621 \u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631 "+this.form.value.firstname+" "+this.form.value.lastname}confirmData(e){this._CustomerService.editCustomerConfirm({CUSConfirmed:"T",id:e}).subscribe(n=>{this.snackBar.open("\u062a\u0645 \u0625\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},n=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}customerRelated(e){console.log("=============customerRelated()==============="),this.dialog.open(tt,{data:{custId:e,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}saveUpdate(e){console.log("=============saveUpdate()==============="),e?(this.mapFormvalue_to_CustomerClass("PATCH"),console.log("=============Update data()==============="),this._CustomerService.editCustomer(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.curUserData.is_employee).subscribe(a=>{console.log("res=> "+a),"F"==this.curUserData.is_employee&&(this.mapvaluesToNotificationClass(),this.unitsService.addNotificationForUnits(this.notificationsObject).subscribe(n=>{},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})),null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(this.CUS.id,this.DocImageToUpload).subscribe(n=>{console.log("====yes from update====",n)}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},a=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(this.mapFormvalue_to_CustomerClass("POST"),console.log(this.CUS),this._CustomerService.addCustomer(this.CUS,this.CusImageToUpload,this.IDImageToUpload).subscribe(a=>{null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(a.id,this.DocImageToUpload).subscribe(n=>{console.log("====yes from insert====",n)}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},a=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))}close(){}getGovernorate(){}compareFunction(e,a){return e.username==a.username&&e.code==a.code}getJobs(e,a){this.codesService.getSubForParent(e,a,this.job_const).subscribe(n=>{this.Jobs=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u0638\u0627\u0626\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getWorkPlaces(e,a){this.codesService.getSubForParent(e,a,this.workplace_const).subscribe(n=>{this.WorkPlaces=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0645\u0627\u0643\u0646 \u0627\u0644\u0639\u0645\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCountries(e,a){this.codesService.getSubForParent(e,a,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllBuildings(e,a){this.unitsService.getAllBuilding(e,a).subscribe(n=>{this.AllBuildings=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuild(e){this.getAllUnits(this.curCOMId,this.account.periorty,e.value)}getAllUnits(e,a,n){this.unitsService.getAllUnitsPerBuilding(e,a,n,"").subscribe(o=>{this.AllUnits=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitData(e){this.getUnitFullData(e.value)}getUnitFullData(e){this.unitsService.getOneUnit(e).subscribe(a=>{this.electricUnit=a.UNTElectricityNumber,this.waterUnit=a.UNTWaterNumber,this.gasUnit=a.UNTGasNumber},a=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e})}}G.\u0275fac=function(e){return new(e||G)(t.Y36(V.d),t.Y36(C.gz),t.Y36(Zt.d),t.Y36(ct.X),t.Y36(s.QS),t.Y36(Z.C),t.Y36(E.v),t.Y36(C.F0),t.Y36(d.uw),t.Y36(S.U),t.Y36(B.Z),t.Y36(g.sK),t.Y36(x.ux))},G.\u0275cmp=t.Xpm({type:G,selectors:[["app-customers-details"]],decls:272,vars:174,consts:[["mat-dialog-title",""],[4,"ngIf"],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["appearance","outline",1,"w-20"],["matInput","","formControlName","code","required",""],["appearance","outline",1,"w-30"],["matInput","","formControlName","username","required",""],["class","w-45",4,"ngIf"],["appearance","outline",1,"w-50"],["matInput","","formControlName","firstname","required",""],["appearance","outline",1,"w-45"],["matInput","","formControlName","lastname","required",""],["matInput","","formControlName","mobile","required",""],["formControlName","selftype"],["value","P","labelPosition","after"],["value","C","labelPosition","after"],["value","O","labelPosition","after"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","image","name","image","id","upload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","profile",3,"label"],["formControlName","gender"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],[1,"w-50"],["matInput","","formControlName","birthday","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","current_branch","id","curbranchContOpSel","required","",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","curbuilding","id","buildOpSel",3,"placeholder","selectionChange"],["formControlName","curunit","id","unitOpSel",3,"placeholder","selectionChange"],["formGroupName","work",3,"label"],["formControlName","WorkPlace_CTTKeyField","id","workplOpSel",3,"placeholder"],["formControlName","Job_CTTKeyField","id","jobsOpSel",3,"placeholder"],["matInput","","formControlName","company","required",""],["formControlName","nationalIDType"],["value","N","labelPosition","after"],["value","K","labelPosition","after"],["value","S","labelPosition","after"],[1,"w-100"],["matInput","","formControlName","nationalID","required",""],["matInput","","formControlName","nationalIDStartDate",3,"matDatepicker"],["natStartDate",""],[1,"w-45"],["matInput","","formControlName","nationalIDEndDate",3,"matDatepicker"],["natEndDate",""],[2,"width","250px","height","200px",3,"src"],["formControlName","nationalIDPic","id","IDupload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","contacts",3,"label"],["matInput","","formControlName","homephone"],["matInput","","formControlName","workphone"],["matInput","","formControlName","email","required",""],["matInput","","formControlName","address"],["formControlName","country",3,"placeholder"],["formGroupName","social",3,"label"],["matInput","","formControlName","facebook"],["matInput","","formControlName","twitter"],["matInput","","formControlName","google"],["formGroupName","settings",3,"label",4,"ngIf"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["matInput","","formControlName","password","required","",3,"type"],["matSuffix","",3,"click"],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"h1",0),t.YNc(1,Je,3,3,"span",1),t.YNc(2,Be,3,3,"span",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"form",2)(6,"mat-tab-group",3)(7,"mat-tab",4),t.ALo(8,"translate"),t.TgZ(9,"div",5)(10,"div",6),t._UZ(11,"mat-label"),t.TgZ(12,"div",7)(13,"mat-form-field",8)(14,"mat-label")(15,"mat-icon"),t._uU(16,"person"),t.qZA(),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",9),t.YNc(20,He,2,0,"mat-error",1),t.YNc(21,Ve,2,0,"mat-error",1),t.qZA(),t.TgZ(22,"mat-form-field",10)(23,"mat-label")(24,"mat-icon"),t._uU(25,"person"),t.qZA(),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",11),t.qZA(),t.YNc(29,Qe,11,7,"mat-form-field",12),t.qZA()(),t.TgZ(30,"div",7)(31,"mat-form-field",13)(32,"mat-label")(33,"mat-icon"),t._uU(34,"person"),t.qZA(),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",14),t.YNc(38,Ge,2,0,"mat-error",1),t.qZA(),t.TgZ(39,"mat-form-field",15)(40,"mat-label")(41,"mat-icon"),t._uU(42,"person"),t.qZA(),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"input",16),t.YNc(46,je,2,0,"mat-error",1),t.qZA()(),t.TgZ(47,"div",7)(48,"mat-form-field",13)(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"mat-hint"),t._uU(53,"sample 0505602221"),t.qZA(),t._UZ(54,"input",17),t.YNc(55,$e,2,0,"mat-error",1),t.qZA()(),t.TgZ(56,"div",7)(57,"mat-radio-group",18)(58,"mat-radio-button",19),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"mat-radio-button",20),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"mat-radio-button",21),t._uU(65),t.ALo(66,"translate"),t.qZA()()(),t.TgZ(67,"div",22),t._UZ(68,"img",23),t.TgZ(69,"input",24),t.NdJ("change",function(r){return a.handelCUSImgInput(r.target.files)}),t.qZA()()()(),t.TgZ(70,"mat-tab",25),t.ALo(71,"translate"),t.TgZ(72,"div",5)(73,"div",7)(74,"mat-radio-group",26)(75,"mat-radio-button",27),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"mat-radio-button",28),t._uU(79),t.ALo(80,"translate"),t.qZA()(),t.TgZ(81,"mat-form-field",29)(82,"mat-label"),t._uU(83),t.ALo(84,"translate"),t.qZA(),t._UZ(85,"input",30)(86,"mat-datepicker-toggle",31)(87,"mat-datepicker",null,32),t.qZA()(),t.TgZ(89,"div",7)(90,"div",33)(91,"mat-form-field",34)(92,"mat-label"),t._uU(93),t.ALo(94,"translate"),t.qZA(),t.TgZ(95,"mat-select",35),t.ALo(96,"translate"),t.TgZ(97,"mat-option",36),t._uU(98,"-"),t.qZA(),t.YNc(99,Xe,2,2,"mat-option",37),t.qZA()()()(),t.TgZ(100,"div",7)(101,"mat-form-field",13)(102,"mat-label"),t._uU(103),t.ALo(104,"translate"),t.qZA(),t.TgZ(105,"mat-select",38),t.NdJ("selectionChange",function(r){return a.getUnitsPerBuild(r)}),t.ALo(106,"translate"),t.TgZ(107,"mat-option",36),t._uU(108,"-"),t.qZA(),t.YNc(109,ze,2,2,"mat-option",37),t.qZA()(),t.TgZ(110,"mat-form-field",15)(111,"mat-label"),t._uU(112),t.ALo(113,"translate"),t.qZA(),t.TgZ(114,"mat-select",39),t.NdJ("selectionChange",function(r){return a.getUnitData(r)}),t.ALo(115,"translate"),t.TgZ(116,"mat-option",36),t._uU(117,"-"),t.qZA(),t.YNc(118,ta,2,2,"mat-option",37),t.qZA()()(),t.TgZ(119,"div",7)(120,"h4"),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"h3"),t._uU(124),t.qZA(),t.TgZ(125,"h4"),t._uU(126),t.ALo(127,"translate"),t.qZA(),t.TgZ(128,"h3"),t._uU(129),t.qZA(),t.TgZ(130,"h4"),t._uU(131),t.ALo(132,"translate"),t.qZA(),t.TgZ(133,"h3"),t._uU(134),t.qZA()()()(),t.TgZ(135,"mat-tab",40),t.ALo(136,"translate"),t.TgZ(137,"div",5)(138,"div",6),t._UZ(139,"mat-label"),t.TgZ(140,"div",7)(141,"mat-form-field",13)(142,"mat-label"),t._uU(143),t.ALo(144,"translate"),t.qZA(),t.TgZ(145,"mat-select",41),t.ALo(146,"translate"),t.TgZ(147,"mat-option",36),t._uU(148,"-"),t.qZA(),t.YNc(149,ea,2,2,"mat-option",37),t.qZA()(),t.TgZ(150,"mat-form-field",15)(151,"mat-label"),t._uU(152),t.ALo(153,"translate"),t.qZA(),t.TgZ(154,"mat-select",42),t.ALo(155,"translate"),t.TgZ(156,"mat-option",36),t._uU(157,"-"),t.qZA(),t.YNc(158,aa,2,2,"mat-option",37),t.qZA()()()(),t.TgZ(159,"mat-form-field",34)(160,"mat-label"),t._uU(161),t.ALo(162,"translate"),t.qZA(),t._UZ(163,"input",43),t.qZA(),t.TgZ(164,"mat-radio-group",44)(165,"mat-radio-button",45),t._uU(166),t.ALo(167,"translate"),t.qZA(),t.TgZ(168,"mat-radio-button",28),t._uU(169),t.ALo(170,"translate"),t.qZA(),t.TgZ(171,"mat-radio-button",46),t._uU(172),t.ALo(173,"translate"),t.qZA(),t.TgZ(174,"mat-radio-button",47),t._uU(175),t.ALo(176,"translate"),t.qZA(),t.TgZ(177,"mat-radio-button",21),t._uU(178),t.ALo(179,"translate"),t.qZA()(),t.TgZ(180,"mat-form-field",48)(181,"mat-label"),t._uU(182),t.ALo(183,"translate"),t.qZA(),t._UZ(184,"input",49),t.qZA(),t.TgZ(185,"div",7)(186,"mat-form-field",29)(187,"mat-label"),t._uU(188),t.ALo(189,"translate"),t.qZA(),t._UZ(190,"input",50)(191,"mat-datepicker-toggle",31)(192,"mat-datepicker",null,51),t.qZA(),t.TgZ(194,"mat-form-field",52)(195,"mat-label"),t._uU(196),t.ALo(197,"translate"),t.qZA(),t._UZ(198,"input",53)(199,"mat-datepicker-toggle",31)(200,"mat-datepicker",null,54),t.qZA()()(),t.TgZ(202,"div",22),t._UZ(203,"img",55),t.TgZ(204,"input",56),t.NdJ("change",function(r){return a.handelIDImgInput(r.target.files)}),t.qZA()()(),t.TgZ(205,"mat-tab",57),t.ALo(206,"translate"),t.TgZ(207,"div",5)(208,"div",7)(209,"mat-form-field",29)(210,"mat-label"),t._uU(211),t.ALo(212,"translate"),t.qZA(),t._UZ(213,"input",58),t.qZA(),t.TgZ(214,"mat-form-field",52)(215,"mat-label"),t._uU(216),t.ALo(217,"translate"),t.qZA(),t._UZ(218,"input",59),t.qZA()(),t.TgZ(219,"mat-form-field",48)(220,"mat-label"),t._uU(221),t.ALo(222,"translate"),t.qZA(),t._UZ(223,"input",60),t.qZA(),t.TgZ(224,"mat-form-field",48)(225,"mat-label"),t._uU(226),t.ALo(227,"translate"),t.qZA(),t._UZ(228,"input",61),t.qZA(),t.TgZ(229,"mat-form-field",34)(230,"mat-label"),t._uU(231),t.ALo(232,"translate"),t.qZA(),t.TgZ(233,"mat-select",62),t.ALo(234,"translate"),t.TgZ(235,"mat-option",36),t._uU(236,"-"),t.qZA(),t.YNc(237,ia,2,2,"mat-option",37),t.qZA()()()(),t.TgZ(238,"mat-tab",63),t.ALo(239,"translate"),t.TgZ(240,"div",5)(241,"mat-form-field",48)(242,"mat-label"),t._uU(243,"Facebook"),t.qZA(),t._UZ(244,"input",64),t.qZA(),t.TgZ(245,"mat-form-field",48)(246,"mat-label"),t._uU(247,"Twitter"),t.qZA(),t._UZ(248,"input",65),t.qZA(),t.TgZ(249,"mat-form-field",48)(250,"mat-label"),t._uU(251,"Google"),t.qZA(),t._UZ(252,"input",66),t.qZA()()(),t.YNc(253,na,9,9,"mat-tab",67),t.TgZ(254,"mat-tab",68),t.ALo(255,"translate"),t.TgZ(256,"div",69)(257,"div",22),t._UZ(258,"img",23),t.TgZ(259,"input",70,71),t.NdJ("change",function(r){return a.onFileChange(r.target.files)}),t.qZA(),t.TgZ(261,"button",72),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(260);return t.KtG(r.click())}),t._uU(262),t.ALo(263,"translate"),t.qZA()(),t._UZ(264,"mat-divider")(265,"input-file",73),t.qZA()()()(),t._UZ(266,"br"),t.TgZ(267,"div",74)(268,"div",7),t.YNc(269,sa,3,4,"button",75),t.YNc(270,la,4,4,"button",76),t.YNc(271,ca,3,4,"button",76),t.qZA()()}if(2&e){const n=t.MAs(88),o=t.MAs(193),r=t.MAs(201);t.xp6(1),t.Q6J("ngIf",!a.CUS.id),t.xp6(1),t.Q6J("ngIf",a.CUS.id),t.xp6(1),t.hij(" ",t.lcZ(4,80,"HTML.TENANT"),""),t.xp6(2),t.Q6J("formGroup",a.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(8,82,"HTML.TAB_BASIC")),t.xp6(10),t.hij(" ",t.lcZ(18,84,"HTML.CODE"),""),t.xp6(3),t.Q6J("ngIf",null==a.form.controls.code.errors?null:a.form.controls.code.errors.required),t.xp6(1),t.Q6J("ngIf",a.form.controls.code.hasError("minlength")),t.xp6(5),t.hij(" ",t.lcZ(27,86,"HTML.USERNAME"),""),t.xp6(3),t.Q6J("ngIf",!a.CUS.id),t.xp6(6),t.hij(" ",t.lcZ(36,88,"HTML.FIRST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==a.form.controls.firstname.errors?null:a.form.controls.firstname.errors.required),t.xp6(5),t.hij(" ",t.lcZ(44,90,"HTML.LAST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==a.form.controls.lastname.errors?null:a.form.controls.lastname.errors.required),t.xp6(4),t.Oqu(t.lcZ(51,92,"HTML.MOBILE")),t.xp6(5),t.Q6J("ngIf",null==a.form.controls.mobile.errors?null:a.form.controls.mobile.errors.required),t.xp6(4),t.Oqu(t.lcZ(60,94,"HTML.NATURE_PERSON")),t.xp6(3),t.Oqu(t.lcZ(63,96,"HTML.NATURE_COMPANY")),t.xp6(3),t.Oqu(t.lcZ(66,98,"HTML.NATURE_OTHER")),t.xp6(3),t.Q6J("src",a.defaultCusImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(71,100,"HTML.TAB_PERSONAL")),t.xp6(6),t.Oqu(t.lcZ(77,102,"HTML.MALE")),t.xp6(3),t.Oqu(t.lcZ(80,104,"HTML.FEMALE")),t.xp6(4),t.Oqu(t.lcZ(84,106,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(7),t.hij(" ",t.lcZ(94,108,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(96,110,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",a.AllBranches),t.xp6(4),t.Oqu(t.lcZ(104,112,"HTML.BUILDING")),t.xp6(2),t.s9C("placeholder",t.lcZ(106,114,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",a.AllBuildings),t.xp6(3),t.Oqu(t.lcZ(113,116,"HTML.UNIT")),t.xp6(2),t.s9C("placeholder",t.lcZ(115,118,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",a.AllUnits),t.xp6(3),t.hij(" ",t.lcZ(122,120,"HTML.ElectricityCounterNumber")," "),t.xp6(3),t.Oqu(a.electricUnit),t.xp6(2),t.hij(" ",t.lcZ(127,122,"HTML.WaterCounterNumber")," "),t.xp6(3),t.Oqu(a.waterUnit),t.xp6(2),t.hij(" ",t.lcZ(132,124,"HTML.GasCounterNumber")," "),t.xp6(3),t.Oqu(a.gasUnit),t.xp6(1),t.s9C("label",t.lcZ(136,126,"HTML.TAB_ID")),t.xp6(8),t.Oqu(t.lcZ(144,128,"HTML.WorkPlace")),t.xp6(2),t.s9C("placeholder",t.lcZ(146,130,"HTML.WorkPlace")),t.xp6(4),t.Q6J("ngForOf",a.WorkPlaces),t.xp6(3),t.Oqu(t.lcZ(153,132,"HTML.Job")),t.xp6(2),t.s9C("placeholder",t.lcZ(155,134,"HTML.Job")),t.xp6(4),t.Q6J("ngForOf",a.Jobs),t.xp6(3),t.Oqu(t.lcZ(162,136,"HTML.GUARANTOR")),t.xp6(5),t.Oqu(t.lcZ(167,138,"OPTIONS.NATIONAL_ID")),t.xp6(3),t.Oqu(t.lcZ(170,140,"OPTIONS.FOREIGN_ID")),t.xp6(3),t.Oqu(t.lcZ(173,142,"OPTIONS.GULF_ID")),t.xp6(3),t.Oqu(t.lcZ(176,144,"OPTIONS.SPECIAL_EQAMA")),t.xp6(3),t.Oqu(t.lcZ(179,146,"OPTIONS.OTHER")),t.xp6(4),t.Oqu(t.lcZ(183,148,"HTML.IDNUMBER")),t.xp6(6),t.Oqu(t.lcZ(189,150,"HTML.START_DATE")),t.xp6(2),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(5),t.Oqu(t.lcZ(197,152,"HTML.END_DATE")),t.xp6(2),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(4),t.Q6J("src",a.defaultIDImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(206,154,"HTML.TAB_CONTACTS")),t.xp6(6),t.Oqu(t.lcZ(212,156,"HTML.HOME_PHONE")),t.xp6(5),t.Oqu(t.lcZ(217,158,"HTML.WORK_PHONE")),t.xp6(5),t.Oqu(t.lcZ(222,160,"HTML.EMAIL")),t.xp6(5),t.Oqu(t.lcZ(227,162,"HTML.ADDRESS")),t.xp6(5),t.Oqu(t.lcZ(232,164,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(234,166,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",a.Countries),t.xp6(1),t.s9C("label",t.lcZ(239,168,"HTML.TAB_SOCIAL_LIFE")),t.xp6(15),t.Q6J("ngIf",a.account.periorty>0),t.xp6(1),t.s9C("label",t.lcZ(255,170,"HTML.TAB_DOCS")),t.xp6(4),t.Q6J("src",a.defaultDocImage,t.LSH),t.xp6(4),t.Oqu(t.lcZ(263,172,"HTML.AddPic")),t.xp6(7),t.Q6J("ngIf",a.can("change_tenant")||0==a.account.periorty),t.xp6(1),t.Q6J("ngIf",a.can("view_tenantrelative")||0==a.account.periorty),t.xp6(1),t.Q6J("ngIf",a.can("confirm_tenant"))}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.Q7,c.sg,c.O5,s.sg,s.u,s.x0,u.xw,u.SQ,u.Wh,u.yH,q.ey,T.lW,ht.oG,v.Mq,v.hl,v.nW,d.ZT,d.uh,d.H8,w.Hw,N.Nt,p.KE,p.hX,p.bx,p.TO,p.R9,I.d,dt.VQ,dt.U0,M.gD,Q.uX,Q.SP,gt.tW,g.X$],styles:[".user-form .form-field-outer{width:480px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}\n"],encapsulation:2});var ua=l(3609);class da{}function ma(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const a=t.oxw();t.Q6J("mat-dialog-close",a.form.value)("disabled",!a.form.valid),t.xp6(2),t.Oqu(t.lcZ(3,3,"BTN.SAVE"))}}class et{constructor(e,a,n,o){this.dialogRef=e,this.data=a,this.localStore=n,this.fb=o,this.userPerm=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.form=this.fb.group({id:null,INSCode:null,INSContractTyps:"I",INSStatus:"N",INSValue:0,INSPayedValue:0,dueDate:null,payDate:null,INSPersonPayName:null,INSNotes:null,RowConfirm:0,RowDelete:0,RowStatus:0,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,customer_KeyField:null}),this.data.cttRow?(console.log("===this.data.cttRow==="),console.log(this.data.cttRow),this.action="Patch",this.form.patchValue({id:this.data.cttRow.id,INSCode:this.data.cttRow.INSCode,dueDate:new Date(this.data.cttRow.INSDueDate),payDate:new Date(this.data.cttRow.INSPayDate),INSPersonPayName:this.data.cttRow.INSPersonPayName,INSNotes:this.data.cttRow.INSNotes,contract_KeyField:this.data.cttRow.contract_KeyField,branch_KeyField:this.data.cttRow.branch_KeyField,owner_KeyField:this.data.cttRow.owner_KeyField,build_KeyField:this.data.cttRow.build_KeyField,unit_KeyField:this.data.cttRow.unit_KeyField,customer_KeyField:this.data.cttRow.customer_KeyField,INSContractTyps:this.data.cttRow.INSContractTyps,INSStatus:this.data.cttRow.INSStatus,INSValue:this.data.cttRow.INSValue,INSPayedValue:this.data.cttRow.INSPayedValue,RowConfirm:this.data.cttRow.RowConfirm,RowDelete:this.data.cttRow.RowDelete,RowStatus:this.data.cttRow.RowStatus})):(console.log("==contract****:: "+this.data.contract),this.action="Post",this.form.patchValue({contract_KeyField:this.data.contract,branch_KeyField:this.data.branch,owner_KeyField:this.data.owner,build_KeyField:this.data.build,unit_KeyField:this.data.unit,customer_KeyField:this.data.customer,INSContractTyps:"I",INSStatus:"N",INSValue:0,INSPayedValue:0,RowConfirm:0,RowDelete:0,RowStatus:0}))}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onSave(){console.log("===***Press Save button***==="),this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value})}close(){console.log("===***Press Close button***==="),this.action="Cancel",this.dialogRef.close({event:this.action})}}function pa(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.openCategoryDialog(null))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.AddInstallment")))}function ha(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.openCategoryDialog(o))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()}2&i&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.EDIT"))}function ga(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.remove(o.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&i&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function _a(i,e){if(1&i&&(t.TgZ(0,"div",9)(1,"div",10),t._uU(2),t.qZA(),t.TgZ(3,"div",10),t._uU(4),t.qZA(),t.TgZ(5,"div",10),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"div",10),t._uU(9),t.qZA(),t.TgZ(10,"div",10),t._uU(11),t.qZA(),t.TgZ(12,"div",10)(13,"div",11),t.YNc(14,ha,4,3,"button",12),t.YNc(15,ga,4,3,"button",13),t.qZA()()()),2&i){const a=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(a.INSCode),t.xp6(2),t.Oqu(a.INSValue),t.xp6(2),t.Oqu(t.xi3(7,7,a.INSDueDate,"yyyy-MM-dd")),t.xp6(3),t.Oqu(a.INSStatusDisplay),t.xp6(2),t.Oqu(a.INSPayedValue),t.xp6(3),t.Q6J("ngIf",n.can("view_installment")),t.xp6(1),t.Q6J("ngIf",n.can("delete_installment"))}}function fa(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"mat-card",18)(3,"pagination-controls",19),t.NdJ("pageChange",function(o){t.CHM(a);const r=t.oxw();return t.KtG(r.onPageChanged(o))}),t.qZA()()()()}}et.\u0275fac=function(e){return new(e||et)(t.Y36(d.so),t.Y36(d.WI),t.Y36(Z.C),t.Y36(s.QS))},et.\u0275cmp=t.Xpm({type:et,selectors:[["app-installment-dialog"]],decls:74,vars:48,consts:[["mat-dialog-title",""],[1,"user-form",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","INSCode","required",""],["matInput","","formControlName","INSValue","required",""],["matInput","","formControlName","dueDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["dueDate",""],["formControlName","INSStatus","id","instStatusOpSel",3,"placeholder"],[3,"value"],["matInput","","formControlName","INSPayedValue"],["matInput","","formControlName","payDate",3,"matDatepicker"],["payDate",""],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","INSNotes"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,a){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",7),t.qZA()(),t.TgZ(13,"div",5)(14,"mat-form-field",6)(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",8),t.qZA()(),t.TgZ(19,"div",5)(20,"mat-form-field",6)(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"input",9)(25,"mat-datepicker-toggle",10)(26,"mat-datepicker",null,11),t.qZA()()(),t.TgZ(28,"div",4)(29,"div",5)(30,"mat-form-field",6)(31,"mat-label"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"mat-select",12),t.ALo(35,"translate"),t.TgZ(36,"mat-option",13),t._uU(37,"-"),t.qZA(),t.TgZ(38,"mat-option",13),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"mat-option",13),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"mat-option",13),t._uU(45),t.ALo(46,"translate"),t.qZA()()()(),t.TgZ(47,"div",5)(48,"mat-form-field",6)(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t._UZ(52,"input",14),t.qZA()(),t.TgZ(53,"div",5)(54,"mat-form-field",6)(55,"mat-label"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t._UZ(58,"input",15)(59,"mat-datepicker-toggle",10)(60,"mat-datepicker",null,16),t.qZA()()(),t.TgZ(62,"div",17)(63,"mat-form-field",6)(64,"mat-label"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t._UZ(67,"input",18),t.qZA()()()(),t.TgZ(68,"div",19)(69,"div",4),t.YNc(70,ma,4,5,"button",20),t.TgZ(71,"button",21),t.NdJ("click",function(){return a.close()}),t._uU(72),t.ALo(73,"translate"),t.qZA()()()()),2&e){const n=t.MAs(27),o=t.MAs(61);t.xp6(1),t.Oqu(t.lcZ(2,22,"HTML.InstallmentData")),t.xp6(2),t.Q6J("formGroup",a.form),t.xp6(7),t.Oqu(t.lcZ(11,24,"HTML.CODE")),t.xp6(6),t.Oqu(t.lcZ(17,26,"HTML.InstallmentValue")),t.xp6(6),t.Oqu(t.lcZ(23,28,"HTML.DueDate")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(7),t.Oqu(t.lcZ(33,30,"HTML.InstallmentStatus")),t.xp6(2),t.s9C("placeholder",t.lcZ(35,32,"HTML.InstallmentStatus")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(40,34,"OPTIONS.NotPayed")),t.xp6(2),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(43,36,"OPTIONS.Payed")),t.xp6(2),t.Q6J("value","T"),t.xp6(1),t.Oqu(t.lcZ(46,38,"OPTIONS.PartialPayed")),t.xp6(5),t.Oqu(t.lcZ(51,40,"HTML.PayedValue")),t.xp6(6),t.Oqu(t.lcZ(57,42,"HTML.PayedDate")),t.xp6(2),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(6),t.Oqu(t.lcZ(66,44,"HTML.Notes")),t.xp6(5),t.Q6J("ngIf",a.can("change_installment")),t.xp6(2),t.Oqu(t.lcZ(73,46,"BTN.CANCEL"))}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.Q7,c.O5,s.sg,s.u,u.xw,u.Wh,u.yH,q.ey,T.lW,v.Mq,v.hl,v.nW,d.ZT,d.uh,d.xY,d.H8,N.Nt,p.KE,p.hX,p.R9,M.gD,g.X$]});const Ta=function(i,e){return{itemsPerPage:i,currentPage:e}};class at{constructor(e,a,n,o,r,m,h,f,_,b){this.localStore=e,this.global=a,this.router=n,this.activatedRoute=o,this._contractService=r,this.snackBar=m,this.translateService=h,this.fb=f,this.dialog=_,this.appSettings=b,this.contractInstallmentsArray=[],this.count=6,this.curCOMId=y.N.comid,this.account=new F.n,this.installmentForDisplay={id:void 0,COMId:void 0,INSCode:void 0,contract_KeyField:void 0,branch_KeyField:void 0,owner_KeyField:void 0,build_KeyField:void 0,unit_KeyField:void 0,customer_KeyField:void 0,INSContractTyps:void 0,INSStatus:void 0,INSValue:void 0,INSDueDate:void 0,INSPayedValue:void 0,INSPayDate:null,INSPersonPayName:void 0,INSNotes:void 0,EntryDate:void 0,EntryUser:void 0,RowConfirm:void 0,RowStatus:void 0,RowDelete:void 0},this.userPerm=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=+e.id,this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id),this._contractService.getOneContract(this.id).subscribe(a=>{this.contract_KeyField=a.id,this.branch_KeyField=a.branch_KeyField,this.owner_KeyField=a.owner_KeyField,this.build_KeyField=a.build_KeyField,this.unit_KeyField=a.unit_KeyField,this.customer_KeyField=a.customer_KeyField})):this.Insta=new da})}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onPageChanged(e){this.page=e,window.scrollTo(0,0)}openCategoryDialog(e){this.dialog.open(et,{data:{cttRow:e,contract:this.contract_KeyField,branch:this.branch_KeyField,owner:this.owner_KeyField,build:this.build_KeyField,unit:this.unit_KeyField,customer:this.customer_KeyField},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{console.log("=====result.event:: "+n.event),"Cancel"==n.event||("Patch"==n.event?(this.mapFormvalue_to_InstallmentClass(n.data),this.updateInstallment(this.installmentForDisplay)):"Post"==n.event&&(this.mapFormvalue_to_InstallmentClass(n.data),this.addInstallment(this.installmentForDisplay)))})}addInstallment(e){console.log("====inside addInstallment== ==="),this._contractService.addInstallments(e).subscribe(a=>this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id))}updateInstallment(e){console.log("====inside updateInstallment====="),this._contractService.editInstallments(e).subscribe(a=>this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id))}mapFormvalue_to_InstallmentClass(e){if(console.log("====formValue.dueDate:: "+e.dueDate),null!=e.dueDate){const o=new c.uU("en-GB").transform(e.dueDate,"dd/MM/yyyy");new Date(new c.uU("en-GB").transform(new Date(e.dueDate),"yyyy/MM/dd")),this.installmentForDisplay.INSDueDate=o}if(null!=e.payDate){const o=new c.uU("en-GB").transform(e.payDate,"dd/MM/yyyy");new Date(new c.uU("en-GB").transform(new Date(e.payDate),"yyyy/MM/dd")),this.installmentForDisplay.INSPayDate=o}this.installmentForDisplay.id=e.id,this.installmentForDisplay.INSCode=e.INSCode,this.installmentForDisplay.INSContractTyps=e.INSContractTyps,this.installmentForDisplay.INSStatus=e.INSStatus,this.installmentForDisplay.INSValue=e.INSValue,this.installmentForDisplay.INSPayedValue=e.INSPayedValue,this.installmentForDisplay.INSDueDate=e.dueDate,this.installmentForDisplay.INSPayDate=e.payDate,this.installmentForDisplay.INSPersonPayName=e.INSPersonPayName,this.installmentForDisplay.INSNotes=e.INSNotes,this.installmentForDisplay.RowConfirm=e.RowConfirm,this.installmentForDisplay.RowDelete=e.RowDelete,this.installmentForDisplay.RowStatus=e.RowStatus,this.installmentForDisplay.contract_KeyField=e.contract_KeyField,this.installmentForDisplay.branch_KeyField=e.branch_KeyField,this.installmentForDisplay.owner_KeyField=e.owner_KeyField,this.installmentForDisplay.build_KeyField=e.build_KeyField,this.installmentForDisplay.unit_KeyField=e.unit_KeyField,this.installmentForDisplay.customer_KeyField=e.customer_KeyField}getInstallmentsPerContract(e,a,n){this._contractService.getInstallmentsPerContract(e,a,n).subscribe(o=>{this.contractInstallmentsArray=o},o=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}remove(e){this.dialog.open(R.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this._contractService.deleteInstallment(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,e)})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}at.\u0275fac=function(e){return new(e||at)(t.Y36(Z.C),t.Y36(S.U),t.Y36(C.F0),t.Y36(C.gz),t.Y36(P.W),t.Y36(x.ux),t.Y36(g.sK),t.Y36(s.qu),t.Y36(d.uw),t.Y36(V.d))},at.\u0275cmp=t.Xpm({type:at,selectors:[["app-installment"]],decls:34,vars:27,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","click"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"h2"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.YNc(6,pa,3,3,"button",2),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",3)(9,"div",4)(10,"div",5)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",5)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",5)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",5)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",5)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t._UZ(30,"div",5),t.qZA(),t.YNc(31,_a,16,10,"div",6),t.ALo(32,"paginate"),t.qZA()(),t.YNc(33,fa,4,0,"div",7),t.qZA()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,9,"BTN.INSTALLMENT")),t.xp6(2),t.Q6J("ngIf",a.can("add_installment")),t.xp6(6),t.hij(" ",t.lcZ(13,11,"HTML.CODE")," "),t.xp6(4),t.hij(" ",t.lcZ(17,13,"HTML.InstallmentValue")," "),t.xp6(4),t.hij(" ",t.lcZ(21,15,"HTML.DueDate")," "),t.xp6(4),t.hij(" ",t.lcZ(25,17,"HTML.InstallmentStatus")," "),t.xp6(4),t.hij(" ",t.lcZ(29,19,"HTML.PayedValue")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(32,21,a.contractInstallmentsArray,t.WLB(24,Ta,a.count,a.page))),t.xp6(2),t.Q6J("ngIf",a.contractInstallmentsArray.length>0))},dependencies:[D.LS,c.sg,c.O5,u.xw,u.Wh,u.yH,T.lW,T.nh,L.a8,w.Hw,I.d,X.gM,D._s,c.uU,g.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:480px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});var Ca=l(6166),va=l(4159),Za=l.n(va);function Aa(i,e){if(1&i&&(t.TgZ(0,"div",7)(1,"div",10),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"div",10),t._uU(5),t.qZA(),t.TgZ(6,"div",10),t._uU(7),t.qZA(),t.TgZ(8,"div",10),t._uU(9),t.qZA()()),2&i){const a=e.$implicit;t.xp6(2),t.Oqu(t.xi3(3,4,a.TSTDate,"yyyy-MM-dd")),t.xp6(3),t.Oqu(a.TSTDebitValue),t.xp6(2),t.Oqu(a.TSTCreditValue),t.xp6(2),t.Oqu(a.TSTDescription)}}function ba(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"mat-card",13)(3,"pagination-controls",14),t.NdJ("pageChange",function(o){t.CHM(a);const r=t.oxw();return t.KtG(r.onPageChanged(o))}),t.qZA()()()()}}const ya=function(i,e){return{itemsPerPage:i,currentPage:e}};class it{constructor(e,a,n,o,r,m,h,f){this.localStore=e,this.global=a,this.router=n,this.activatedRoute=o,this.tenantsService=r,this.snackBar=m,this.translateService=h,this.appSettings=f,this.tenantStatementArray=[],this.count=10,this.curCOMId=y.N.comid,this.account=new F.n,this.totalDebitValue=0,this.tempDebitValue=0,this.totalCreditValue=0,this.tempCreditValue=0,this.settings=this.appSettings.settings}ngOnInit(){this.emptyString=" ",this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")?(this.global.me=JSON.parse(this.localStore.getItem("account")),this.prepareMsgLanguage(),this.sub=this.activatedRoute.params.subscribe(e=>{e.id&&(this.id=+e.id,this.getCustomer(this.id),this.getStatementsPerCustomer(this.curCOMId,this.account.periorty,this.id))})):this.router.navigate(["/sign-in"])}downloadPDF(){var e=document.getElementById("contentToConvert");Za()(e).then(a=>{var r=208*a.height/a.width;const h=a.toDataURL("image/png");let f=new Ca.ZP("p","mm","a4");f.addImage(h,"PNG",0,0,208,r),f.save("MYPdf.pdf")})}onPageChanged(e){this.page=e,window.scrollTo(0,0)}getStatementsPerCustomer(e,a,n){this.totalDebitValue=0,this.totalCreditValue=0,this.tenantsService.getStatementsPerCustomers(e,a,n).subscribe(o=>{this.tenantStatementArray=o;for(let r=0;r<this.tenantStatementArray.length;r++)this.tempDebitValue=+this.tenantStatementArray[r].TSTDebitValue,this.totalDebitValue+=this.tempDebitValue,this.tempCreditValue=+this.tenantStatementArray[r].TSTCreditValue,this.totalCreditValue+=this.tempCreditValue},o=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCustomer(e){this.tenantsService.getOneCustomer(e).subscribe(a=>{this.cusName=a.CUSName})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e})}}it.\u0275fac=function(e){return new(e||it)(t.Y36(Z.C),t.Y36(S.U),t.Y36(C.F0),t.Y36(C.gz),t.Y36(E.v),t.Y36(x.ux),t.Y36(g.sK),t.Y36(V.d))},it.\u0275cmp=t.Xpm({type:it,selectors:[["app-tenant-statements"]],decls:43,vars:33,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click"],["id","contentToConvert",1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell","primary-text","notifbold"],["fxLayout","row wrap",4,"ngIf"],[1,"mat-mdc-cell"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"button",2),t.NdJ("click",function(){return a.downloadPDF()}),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t._UZ(6,"mat-divider"),t.TgZ(7,"div",3)(8,"div",1)(9,"h2"),t._uU(10),t.ALo(11,"translate"),t.qZA()(),t._UZ(12,"mat-divider"),t.TgZ(13,"div",4)(14,"div",5)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",5)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",5)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",5)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t.YNc(30,Aa,10,7,"div",6),t.ALo(31,"paginate"),t.TgZ(32,"div",7)(33,"div",8),t._uU(34,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(35,"div",8),t._uU(36),t.qZA(),t.TgZ(37,"div",8),t._uU(38),t.qZA(),t.TgZ(39,"div",8),t._uU(40),t.ALo(41,"translate"),t.qZA()()()(),t.YNc(42,ba,4,0,"div",9),t.qZA()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,13,"BTN.DownloadPDF")),t.xp6(6),t.AsE("",t.lcZ(11,15,"BTN.Statements")," :: ",a.cusName,""),t.xp6(6),t.hij(" ",t.lcZ(17,17,"HTML.Date")," "),t.xp6(4),t.hij(" ",t.lcZ(21,19,"HTML.Debit")," "),t.xp6(4),t.hij(" ",t.lcZ(25,21,"HTML.Credit")," "),t.xp6(4),t.hij(" ",t.lcZ(29,23,"HTML.Description")," "),t.xp6(2),t.Q6J("ngForOf",t.xi3(31,25,a.tenantStatementArray,t.WLB(30,ya,a.count,a.page))),t.xp6(6),t.hij(" ",a.totalDebitValue," "),t.xp6(2),t.hij(" ",a.totalCreditValue," "),t.xp6(2),t.AsE(" ",t.lcZ(41,28,"HTML.Balance")," (",a.totalCreditValue-a.totalDebitValue,") "),t.xp6(2),t.Q6J("ngIf",a.tenantStatementArray.length>0))},dependencies:[D.LS,c.sg,c.O5,u.xw,u.Wh,u.yH,T.lW,L.a8,I.d,D._s,c.uU,g.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:480px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});class Oa{}function Da(i,e){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function xa(i,e){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function La(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"First name is required"),t.qZA())}function Na(i,e){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Last name is required"),t.qZA())}function Ia(i,e){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function Ua(i,e){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Fa(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onSave())}),t.YNc(1,Ia,3,3,"span",1),t.YNc(2,Ua,3,3,"span",1),t.qZA()}if(2&i){const a=t.oxw();t.Q6J("mat-dialog-close",a.form.value)("disabled",!a.form.valid),t.xp6(1),t.Q6J("ngIf",!a.oneowner.id),t.xp6(1),t.Q6J("ngIf",a.oneowner.id)}}class J{constructor(e,a,n,o,r,m){this.dialogRef=e,this.oneowner=a,this.atlasService=n,this.localStore=o,this.snackBar=r,this.fb=m,this.passwordHide=!0,this.defaultOwnerImage=(new O.P).noImage,this.defaultOwnerIDImage=(new O.P).noImage,this.OwnerImageToUpload=null,this.OwnerIDImageToUpload=null,this.curCOMId=y.N.comid,this.userPerm=[]}handelOwnerImgInput(e){this.OwnerImageToUpload=e.item(0);var a=new FileReader;a.onload=n=>{this.defaultOwnerImage=n.target.result},a.readAsDataURL(this.OwnerImageToUpload)}handelOwnerIDImgInput(e){this.OwnerIDImageToUpload=e.item(0);var a=new FileReader;a.onload=n=>{this.defaultOwnerIDImage=n.target.result},a.readAsDataURL(this.OwnerIDImageToUpload)}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.form=this.fb.group({id:null,OWNFirstName:["",s.kI.compose([s.kI.required,s.kI.minLength(2)])],OWNLastName:["",s.kI.compose([s.kI.required,s.kI.minLength(2)])],OWNGender:null,OWNSelfType:null,OWNBirthDate:null,OWNPic:null,work:this.fb.group({OWNNationalIDType:null,OWNNationalID:null,OWNNationalIDStartDate:null,OWNNationalIDEndDate:null,OWNIDPic:null}),contacts:this.fb.group({username:["",s.kI.compose([s.kI.required,s.kI.minLength(3)])],OWNPassword:null,confirmPassword:null,OWNEmail:["",s.kI.compose([s.kI.required,lt.Le])],OWNMobile:[null,s.kI.required],OWNMobileWhatsapp:null,OWNHomePhone:null,OWNWorkPhone:null,OWNAddress:null,OWNAddressDescription:null},{validator:(0,lt.zi)("OWNPassword","confirmPassword")}),settings:this.fb.group({OWNActive:!1,EntryDate:null})}),this.oneowner?(console.log("-----Start Found Owner Data--99999----"),console.log(this.oneowner),console.log("-----End Found Owner Data----99999--"),this.curPeriority=this.curUserData.periorty,this.action="Patch",this.fillForm(this.oneowner)):(console.log("-----Empty Owner------"),this.curPeriority=0,this.action="Post",this.oneowner=new Oa)}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}fillForm(e){this.defaultOwnerImage=null!=e.OWNPic?e.OWNPic:(new O.P).noImage,this.defaultOwnerIDImage=null!=e.OWNIDPic?e.OWNIDPic:(new O.P).noImage,this.form.patchValue({id:e.id,OWNFirstName:e.OWNFirstName,OWNLastName:e.OWNLastName,OWNGender:e.OWNGender,OWNBirthDate:e.OWNBirthDate,OWNSelfType:e.OWNSelfType,OWNPic:e.OWNPic,work:{OWNNationalIDType:e.OWNNationalIDType,OWNNationalID:e.OWNNationalID,OWNNationalIDStartDate:e.OWNNationalIDStartDate,OWNNationalIDEndDate:e.OWNNationalIDEndDate,OWNIDPic:e.OWNIDPic},contacts:{username:e.username,OWNPassword:e.OWNPassword,OWNEmail:e.OWNEmail,OWNMobile:e.OWNMobile,OWNMobileWhatsapp:e.OWNMobileWhatsapp,OWNHomePhone:e.OWNHomePhone,OWNWorkPhone:e.OWNWorkPhone,OWNAddress:e.OWNAddress,OWNAddressDescription:e.OWNAddressDescription},settings:{OWNActive:e.OWNActive,EntryDate:e.entryDate}})}onSave(){console.log("===***Press Save button***==="),this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value,ownPic:this.OwnerImageToUpload,ownerIDPic:this.OwnerIDImageToUpload})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}}J.\u0275fac=function(e){return new(e||J)(t.Y36(d.so),t.Y36(d.WI),t.Y36(B.Z),t.Y36(Z.C),t.Y36(x.ux),t.Y36(s.QS))},J.\u0275cmp=t.Xpm({type:J,selectors:[["app-owners-dialog"]],decls:204,vars:141,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content",""],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],[1,"w-50"],["matInput","","formControlName","OWNFirstName","required",""],[1,"w-45"],["matInput","","formControlName","OWNLastName","required",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","OWNGender",1,"w-100"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],[1,"w-100"],["matInput","","formControlName","OWNBirthDate",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["formControlName","OWNSelfType","id","selftypeOpSel",3,"placeholder"],[3,"value"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","OWNPic","name","ownPic","id","OwnerPicupload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","work",3,"label"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["formControlName","OWNNationalIDType","id","idTypeOpSel",3,"placeholder"],["matInput","","formControlName","OWNNationalID"],["matInput","","formControlName","OWNNationalIDStartDate",3,"matDatepicker"],["idstartdate",""],["matInput","","formControlName","OWNNationalIDEndDate",3,"matDatepicker"],["idenddate",""],["formControlName","OWNIDPic","name","OWNIDPic","id","OwnerIDPicupload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","contacts",3,"label"],["fxFlex","100","fxFlex.gt-sm","29.9",1,"px-1"],["matInput","","formControlName","username","required","",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","69.8",1,"px-1"],["matInput","","formControlName","OWNEmail","required",""],["matInput","","formControlName","OWNPassword","type","password","minlength","6",3,"placeholder"],["matInput","","formControlName","confirmPassword","type","password",3,"placeholder"],["matInput","","formControlName","OWNMobile"],["matInput","","formControlName","OWNMobileWhatsapp"],["matInput","","formControlName","OWNHomePhone"],["matInput","","formControlName","OWNWorkPhone"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","OWNAddress","rows","2"],["matInput","","formControlName","OWNAddressDescription","rows","3"],["formGroupName","settings",3,"label"],["formControlName","OWNActive"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,a){if(1&e&&(t.TgZ(0,"h1",0),t.YNc(1,Da,3,3,"span",1),t.YNc(2,xa,3,3,"span",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",2)(6,"form",3)(7,"mat-tab-group",4)(8,"mat-tab",5),t.ALo(9,"translate"),t.TgZ(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label")(14,"mat-icon"),t._uU(15,"person"),t.qZA(),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",9),t.YNc(19,La,2,0,"mat-error",1),t.qZA(),t.TgZ(20,"mat-form-field",10)(21,"mat-label")(22,"mat-icon"),t._uU(23,"person"),t.qZA(),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",11),t.YNc(27,Na,2,0,"mat-error",1),t.qZA()(),t.TgZ(28,"div",7)(29,"div",12)(30,"mat-radio-group",13)(31,"mat-radio-button",14),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"mat-radio-button",15),t._uU(35),t.ALo(36,"translate"),t.qZA()()(),t.TgZ(37,"div",12)(38,"mat-form-field",16)(39,"mat-label"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"input",17)(43,"mat-datepicker-toggle",18)(44,"mat-datepicker",null,19),t.qZA()(),t.TgZ(46,"div",12)(47,"mat-form-field",16)(48,"mat-label"),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"mat-select",20),t.ALo(52,"translate"),t.TgZ(53,"mat-option",21),t._uU(54,"-"),t.qZA(),t.TgZ(55,"mat-option",21),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"mat-option",21),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"mat-option",21),t._uU(62),t.ALo(63,"translate"),t.qZA()()()()(),t.TgZ(64,"div",22),t._UZ(65,"img",23),t.TgZ(66,"input",24),t.NdJ("change",function(o){return a.handelOwnerImgInput(o.target.files)}),t.qZA()()()(),t.TgZ(67,"mat-tab",25),t.ALo(68,"translate"),t.TgZ(69,"div",6)(70,"div",7)(71,"div",26)(72,"mat-form-field",16)(73,"mat-label"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"mat-select",27),t.ALo(77,"translate"),t.TgZ(78,"mat-option",21),t._uU(79,"-"),t.qZA(),t.TgZ(80,"mat-option",21),t._uU(81),t.ALo(82,"translate"),t.qZA(),t.TgZ(83,"mat-option",21),t._uU(84),t.ALo(85,"translate"),t.qZA(),t.TgZ(86,"mat-option",21),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.TgZ(89,"mat-option",21),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"mat-option",21),t._uU(93),t.ALo(94,"translate"),t.qZA()()()(),t.TgZ(95,"div",26)(96,"mat-form-field",16)(97,"mat-label"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t._UZ(100,"input",28),t.qZA()()(),t.TgZ(101,"div",7)(102,"div",26)(103,"mat-form-field",16)(104,"mat-label"),t._uU(105),t.ALo(106,"translate"),t.qZA(),t._UZ(107,"input",29)(108,"mat-datepicker-toggle",18)(109,"mat-datepicker",null,30),t.qZA()(),t.TgZ(111,"div",26)(112,"mat-form-field",16)(113,"mat-label"),t._uU(114),t.ALo(115,"translate"),t.qZA(),t._UZ(116,"input",31)(117,"mat-datepicker-toggle",18)(118,"mat-datepicker",null,32),t.qZA()()(),t.TgZ(120,"div",22),t._UZ(121,"img",23),t.TgZ(122,"input",33),t.NdJ("change",function(o){return a.handelOwnerIDImgInput(o.target.files)}),t.qZA()()()(),t.TgZ(123,"mat-tab",34),t.ALo(124,"translate"),t.TgZ(125,"div",6)(126,"div",7)(127,"div",35)(128,"mat-form-field",16)(129,"mat-label"),t._uU(130),t.ALo(131,"translate"),t.qZA(),t._UZ(132,"input",36),t.ALo(133,"translate"),t.qZA()(),t.TgZ(134,"div",37)(135,"mat-form-field",16)(136,"mat-label"),t._uU(137),t.ALo(138,"translate"),t.qZA(),t._UZ(139,"input",38),t.qZA()()(),t.TgZ(140,"div",7)(141,"div",26)(142,"mat-form-field",16)(143,"mat-label"),t._uU(144),t.ALo(145,"translate"),t.qZA(),t._UZ(146,"input",39),t.ALo(147,"translate"),t.qZA()(),t.TgZ(148,"div",26)(149,"mat-form-field",16)(150,"mat-label"),t._uU(151),t.ALo(152,"translate"),t.qZA(),t._UZ(153,"input",40),t.ALo(154,"translate"),t.qZA()()(),t.TgZ(155,"div",7)(156,"div",26)(157,"mat-form-field",16)(158,"mat-label"),t._uU(159),t.ALo(160,"translate"),t.qZA(),t._UZ(161,"input",41),t.qZA()(),t.TgZ(162,"div",26)(163,"mat-form-field",16)(164,"mat-label"),t._uU(165),t.ALo(166,"translate"),t.qZA(),t._UZ(167,"input",42),t.qZA()()(),t.TgZ(168,"div",7)(169,"div",26)(170,"mat-form-field",16)(171,"mat-label"),t._uU(172),t.ALo(173,"translate"),t.qZA(),t._UZ(174,"input",43),t.qZA()(),t.TgZ(175,"div",26)(176,"mat-form-field",16)(177,"mat-label"),t._uU(178),t.ALo(179,"translate"),t.qZA(),t._UZ(180,"input",44),t.qZA()()(),t.TgZ(181,"div",45)(182,"mat-form-field",16)(183,"mat-label"),t._uU(184),t.ALo(185,"translate"),t.qZA(),t._UZ(186,"textarea",46),t.qZA()(),t.TgZ(187,"div",45)(188,"mat-form-field",16)(189,"mat-label"),t._uU(190),t.ALo(191,"translate"),t.qZA(),t._UZ(192,"textarea",47),t.qZA()()()(),t.TgZ(193,"mat-tab",48),t.ALo(194,"translate"),t.TgZ(195,"div",6)(196,"mat-checkbox",49),t._uU(197,"Active"),t.qZA()()()()()(),t.TgZ(198,"div",50)(199,"div",7),t.YNc(200,Fa,3,4,"button",51),t.TgZ(201,"button",52),t.NdJ("click",function(){return a.close()}),t._uU(202),t.ALo(203,"translate"),t.qZA()()()),2&e){const n=t.MAs(45),o=t.MAs(110),r=t.MAs(119);t.xp6(1),t.Q6J("ngIf",!a.oneowner.id),t.xp6(1),t.Q6J("ngIf",a.oneowner.id),t.xp6(1),t.hij(" ",t.lcZ(4,63,"HTML.OWNER"),""),t.xp6(3),t.Q6J("formGroup",a.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(9,65,"HTML.TAB_BASIC")),t.xp6(8),t.hij(" ",t.lcZ(17,67,"HTML.FIRST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==a.form.controls.OWNFirstName.errors?null:a.form.controls.OWNFirstName.errors.required),t.xp6(5),t.hij(" ",t.lcZ(25,69,"HTML.LAST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==a.form.controls.OWNLastName.errors?null:a.form.controls.OWNLastName.errors.required),t.xp6(5),t.Oqu(t.lcZ(33,71,"HTML.MALE")),t.xp6(3),t.Oqu(t.lcZ(36,73,"HTML.FEMALE")),t.xp6(5),t.Oqu(t.lcZ(41,75,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(50,77,"HTML.OWNER_SelfType")),t.xp6(2),t.s9C("placeholder",t.lcZ(52,79,"HTML.OWNER_SelfType")),t.xp6(4),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(57,81,"OPTIONS.Person")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(60,83,"OPTIONS.Company")),t.xp6(2),t.Q6J("value","O"),t.xp6(1),t.Oqu(t.lcZ(63,85,"OPTIONS.OTHER")),t.xp6(3),t.Q6J("src",a.defaultOwnerImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(68,87,"HTML.TAB_ID")),t.xp6(7),t.Oqu(t.lcZ(75,89,"HTML.IDTYPE")),t.xp6(2),t.s9C("placeholder",t.lcZ(77,91,"HTML.IDTYPE")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(82,93,"OPTIONS.NATIONAL_ID")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(85,95,"OPTIONS.FOREIGN_ID")),t.xp6(2),t.Q6J("value","K"),t.xp6(1),t.Oqu(t.lcZ(88,97,"OPTIONS.GULF_ID")),t.xp6(2),t.Q6J("value","S"),t.xp6(1),t.Oqu(t.lcZ(91,99,"OPTIONS.SPECIAL_EQAMA")),t.xp6(2),t.Q6J("value","O"),t.xp6(1),t.Oqu(t.lcZ(94,101,"OPTIONS.OTHER")),t.xp6(5),t.Oqu(t.lcZ(99,103,"HTML.IDNUMBER")),t.xp6(7),t.Oqu(t.lcZ(106,105,"HTML.START_DATE")),t.xp6(2),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(6),t.Oqu(t.lcZ(115,107,"HTML.END_DATE")),t.xp6(2),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(4),t.Q6J("src",a.defaultOwnerIDImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(124,109,"HTML.TAB_CONTACTS")),t.xp6(7),t.Oqu(t.lcZ(131,111,"HTML.USERNAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(133,113,"HTML.USERNAME")),t.xp6(5),t.Oqu(t.lcZ(138,115,"HTML.EMAIL")),t.xp6(7),t.Oqu(t.lcZ(145,117,"HTML.PASSWORD")),t.xp6(2),t.s9C("placeholder",t.lcZ(147,119,"HTML.PASSWORD")),t.xp6(5),t.Oqu(t.lcZ(152,121,"HTML.ConfirmPassword")),t.xp6(2),t.s9C("placeholder",t.lcZ(154,123,"HTML.ConfirmPassword")),t.xp6(6),t.Oqu(t.lcZ(160,125,"HTML.MOBILE")),t.xp6(6),t.Oqu(t.lcZ(166,127,"HTML.WHATSAPP")),t.xp6(7),t.Oqu(t.lcZ(173,129,"HTML.HOME_PHONE")),t.xp6(6),t.Oqu(t.lcZ(179,131,"HTML.WORK_PHONE")),t.xp6(6),t.Oqu(t.lcZ(185,133,"HTML.ADDRESS")),t.xp6(6),t.Oqu(t.lcZ(191,135,"HTML.ADDRESS_DESC")),t.xp6(3),t.s9C("label",t.lcZ(194,137,"HTML.TAB_SETTINGS")),t.xp6(7),t.Q6J("ngIf",a.oneowner.id&&a.can("change_propertyowner")||!a.oneowner.id&&a.can("add_propertyowner")),t.xp6(2),t.Oqu(t.lcZ(203,139,"BTN.CANCEL"))}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.wO,c.O5,s.sg,s.u,s.x0,u.xw,u.Wh,u.yH,q.ey,T.lW,ht.oG,v.Mq,v.hl,v.nW,d.ZT,d.uh,d.xY,d.H8,w.Hw,N.Nt,p.KE,p.hX,p.TO,p.R9,dt.VQ,dt.U0,M.gD,Q.uX,Q.SP,g.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:600px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});var Sa=l(4870);function wa(i,e){if(1&i&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.BRAArbName," ")}}function qa(i,e){if(1&i&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&i){const a=e.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.BUIName," ")}}function Ma(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const a=t.oxw();t.Q6J("disabled",!a.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function Ea(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.remove(o.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&i&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function Ra(i,e){if(1&i&&(t.TgZ(0,"div",20)(1,"div",21),t._uU(2),t.qZA(),t.TgZ(3,"div",21),t._uU(4),t.qZA(),t.TgZ(5,"div",21)(6,"div",22),t.YNc(7,Ea,4,3,"button",23),t.qZA()()()),2&i){const a=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(a.branch_ArbName),t.xp6(2),t.hij("",a.build_Name," "),t.xp6(3),t.Q6J("ngIf",n.can("delete_owner_security_onebuilding"))}}class nt{constructor(e,a,n,o,r,m,h,f,_){this.dialogRef=e,this.oneowner=a,this.atlasService=n,this.unitsService=o,this.translateService=r,this.localStore=m,this.dialog=h,this.snackBar=f,this.fb=_,this.passwordHide=!0,this.curCOMId=y.N.comid,this.userPerm=[],this.AllBranches=[],this.AllBuilding=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({branch_KeyField:[null,s.kI.required],build_KeyField:[null,s.kI.required]}),this.Builds=new Sa.x,this.curPeriority=0,this.action="Patch",this.getAllBranches(this.curCOMId,this.curPeriority),this.getOwnerBuilds(),this.prepareMsgLanguage()}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getOwnerBuilds(){this.empBuildings=null,this.unitsService.getAllBuildingForOwner(this.curCOMId,this.curPeriority,this.oneowner.id).subscribe(e=>this.empBuildings=e)}getAllBranches(e,a){this.atlasService.getAllBranch(e,a).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.curPeriority,e.value)}getBuildingPerBranch(e,a,n){this.unitsService.getBuildingsPerBranch(e,a,n).subscribe(o=>{this.AllBuilding=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapFormValue_toTable(){this.Builds.owner_KeyField=this.oneowner.id,this.Builds.build_KeyField=this.dataForm.value.build_KeyField,this.Builds.branch_KeyField=this.dataForm.value.branch_KeyField}onSave(){this.mapFormValue_toTable(),this.unitsService.addBuildForOwner(this.Builds).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerBuilds()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(e){this.dialog.open(R.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.unitsService.deleteBuildingForOwner(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerBuilds()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}nt.\u0275fac=function(e){return new(e||nt)(t.Y36(d.so),t.Y36(d.WI),t.Y36(B.Z),t.Y36(ct.X),t.Y36(g.sK),t.Y36(Z.C),t.Y36(d.uw),t.Y36(x.ux),t.Y36(s.QS))},nt.\u0275cmp=t.Xpm({type:nt,selectors:[["app-owners-builds-dialog"]],decls:50,vars:29,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","build_KeyField","id","build_OneOpSel",3,"placeholder"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",6),t.NdJ("selectionChange",function(o){return a.getBuildings(o)}),t.ALo(10,"translate"),t.TgZ(11,"mat-option",7),t._uU(12,"-"),t.qZA(),t.YNc(13,wa,2,2,"mat-option",8),t.qZA()()(),t.TgZ(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"mat-select",9),t.ALo(20,"translate"),t.TgZ(21,"mat-option",7),t._uU(22,"-"),t.qZA(),t.YNc(23,qa,2,2,"mat-option",8),t.qZA()()()()()(),t.TgZ(24,"div",10)(25,"div",3),t.YNc(26,Ma,4,4,"button",11),t.TgZ(27,"button",12),t.NdJ("click",function(){return a.close()}),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t._UZ(30,"mat-divider"),t.TgZ(31,"div",13)(32,"mat-card")(33,"div",14)(34,"h2"),t._uU(35),t.ALo(36,"translate"),t.qZA()(),t._UZ(37,"mat-divider"),t.TgZ(38,"div",15)(39,"div",16)(40,"div",17)(41,"h2"),t._uU(42),t.ALo(43,"translate"),t.qZA()(),t.TgZ(44,"div",17)(45,"h2"),t._uU(46),t.ALo(47,"translate"),t.qZA()(),t._UZ(48,"div",17),t.qZA(),t.YNc(49,Ra,8,3,"div",18),t.qZA()()()()),2&e&&(t.Q6J("formGroup",a.dataForm),t.xp6(7),t.hij(" ",t.lcZ(8,13,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(10,15,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",a.AllBranches),t.xp6(4),t.hij(" ",t.lcZ(18,17,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(20,19,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",a.AllBuilding),t.xp6(3),t.Q6J("ngIf",a.can("add_owner_security_onebuilding")),t.xp6(2),t.Oqu(t.lcZ(29,21,"BTN.CANCEL")),t.xp6(7),t.Oqu(t.lcZ(36,23,"HTML.OwnerBuilding")),t.xp6(7),t.hij(" ",t.lcZ(43,25,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(47,27,"HTML.BUILDING")," "),t.xp6(3),t.Q6J("ngForOf",a.empBuildings))},dependencies:[s._Y,s.JJ,s.JL,c.sg,c.O5,s.sg,s.u,u.xw,u.Wh,u.yH,q.ey,T.lW,T.nh,L.a8,d.xY,d.H8,w.Hw,p.KE,p.hX,I.d,M.gD,X.gM,g.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});var Pa=l(3221),ft=l(8255),ka=l(455);function Ka(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"mat-button-toggle",16),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.openOwnerDialog(null))}),t.TgZ(1,"mat-icon"),t._uU(2,"person_add"),t.qZA()()}}function Ja(i,e){if(1&i&&(t.TgZ(0,"h3",39),t._uU(1),t.qZA()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.AsE("",a.OWNFirstName," ",a.OWNLastName,"")}}function Ba(i,e){1&i&&(t.TgZ(0,"h3",39),t._uU(1,"User blocked"),t.qZA())}function Ha(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openOwnerDialog(o))}),t.TgZ(1,"mat-icon"),t._uU(2,"mode_edit"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.VIEW")))}function Va(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.deleteOwner(o))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.REMOVE")))}function Wa(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openBuildingDialog(o))}),t.TgZ(1,"mat-icon"),t._uU(2,"business"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Building")))}function Ya(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openUserPermission(o.Userid))}),t.TgZ(1,"mat-icon"),t._uU(2,"security"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Security")))}function Qa(i,e){if(1&i&&t._UZ(0,"img",41),2&i){const a=t.oxw().$implicit;t.ekj("blocked",1==a.RowDelete),t.Q6J("src",a.OWNPic,t.LSH)}}function Ga(i,e){if(1&i&&t._UZ(0,"img",42),2&i){const a=t.oxw().$implicit;t.ekj("blocked",1==a.RowDelete)}}function ja(i,e){1&i&&(t.TgZ(0,"mat-icon",43),t._uU(1,"block"),t.qZA())}function $a(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"div",19)(1,"mat-card")(2,"div",20),t.YNc(3,Ja,2,2,"h3",21),t.YNc(4,Ba,2,0,"h3",21),t.TgZ(5,"button",22,23)(7,"mat-icon"),t._uU(8,"more_vert"),t.qZA()()(),t.TgZ(9,"mat-menu",24,25)(11,"span",26),t.NdJ("mouseleave",function(){t.CHM(a);const o=t.MAs(6);return t.KtG(o.closeMenu())}),t.YNc(12,Ha,6,3,"button",27),t.YNc(13,Va,6,3,"button",27),t._UZ(14,"mat-divider"),t.YNc(15,Wa,6,3,"button",27),t.YNc(16,Ya,6,3,"button",27),t.qZA()(),t.TgZ(17,"div",28)(18,"div",29)(19,"div",30),t.YNc(20,Qa,1,3,"img",31),t.YNc(21,Ga,1,2,"img",32),t.YNc(22,ja,2,0,"mat-icon",33),t.qZA(),t.TgZ(23,"div",34)(24,"mat-slide-toggle",35),t.NdJ("change",function(){const r=t.CHM(a).$implicit;return t.KtG(r.RowDelete=!r.RowDelete)}),t.qZA()()(),t.TgZ(25,"div",36)(26,"p",37)(27,"mat-icon",38),t._uU(28,"contact_phone"),t.qZA(),t.TgZ(29,"span"),t._uU(30),t.qZA()(),t.TgZ(31,"p",37)(32,"mat-icon",38),t._uU(33,"chat"),t.qZA(),t.TgZ(34,"span"),t._uU(35),t.qZA()(),t.TgZ(36,"p",37)(37,"mat-icon",38),t._uU(38,"mail_outline"),t.qZA(),t.TgZ(39,"span"),t._uU(40),t.qZA()(),t.TgZ(41,"p",37)(42,"mat-icon",38),t._uU(43,"card_membership"),t.qZA(),t.TgZ(44,"span"),t._uU(45),t.qZA()(),t.TgZ(46,"p",37)(47,"mat-icon",38),t._uU(48,"location_on"),t.qZA(),t.TgZ(49,"span"),t._uU(50),t.qZA()()()()()()}if(2&i){const a=e.$implicit,n=t.MAs(10),o=t.oxw(2);t.xp6(3),t.Q6J("ngIf",0==a.RowDelete),t.xp6(1),t.Q6J("ngIf",1==a.RowDelete),t.xp6(1),t.Q6J("matMenuTriggerFor",n),t.xp6(7),t.Q6J("ngIf",o.can("view_oneowner")),t.xp6(1),t.Q6J("ngIf",o.can("delete_propertyowner")),t.xp6(2),t.Q6J("ngIf",o.can("view_owner_securitybuildings")),t.xp6(1),t.Q6J("ngIf",o.can("view_emp_securitypermissions")),t.xp6(4),t.Q6J("ngIf",a.OWNPic),t.xp6(1),t.Q6J("ngIf",!a.OWNPic),t.xp6(1),t.Q6J("ngIf",1==a.RowDelete),t.xp6(2),t.Q6J("checked",1==a.RowDelete),t.xp6(1),t.ekj("blocked",1==a.RowDelete),t.xp6(5),t.Oqu(a.OWNMobile),t.xp6(5),t.Oqu(a.OWNMobileWhatsapp),t.xp6(5),t.Oqu(a.OWNEmail),t.xp6(5),t.Oqu(a.OWNSelfTypeDisplay),t.xp6(5),t.Oqu(a.OWNAddress)}}const At=function(i,e){return{itemsPerPage:i,currentPage:e}};function Xa(i,e){if(1&i&&(t.TgZ(0,"div",17),t.YNc(1,$a,51,18,"div",18),t.ALo(2,"paginate"),t.ALo(3,"OwnerSearchPipe"),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.xi3(3,4,a.owners,a.searchText),t.WLB(7,At,a.count,a.page)))}}function za(i,e){if(1&i&&(t.TgZ(0,"h3",39),t._uU(1),t.qZA()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.AsE("",a.OWNFirstName," ",a.OWNLastName,"")}}function ti(i,e){1&i&&(t.TgZ(0,"h3",39),t._uU(1,"User blocked"),t.qZA())}function ei(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openOwnerDialog(o))}),t.TgZ(1,"mat-icon"),t._uU(2,"mode_edit"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.VIEW")))}function ai(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.deleteOwner(o))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.REMOVE")))}function ii(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openBuildingDialog(o))}),t.TgZ(1,"mat-icon"),t._uU(2,"business"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Building")))}function ni(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openUserPermission(o.Userid))}),t.TgZ(1,"mat-icon"),t._uU(2,"security"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Security")))}function oi(i,e){if(1&i&&t._UZ(0,"img",41),2&i){const a=t.oxw().$implicit;t.ekj("blocked",1==a.RowDelete),t.Q6J("src",a.OWNPic,t.LSH)}}function ri(i,e){if(1&i&&t._UZ(0,"img",52),2&i){const a=t.oxw().$implicit;t.ekj("blocked",1==a.RowDelete)}}function si(i,e){1&i&&(t.TgZ(0,"mat-icon",43),t._uU(1,"block"),t.qZA())}function li(i,e){1&i&&(t.TgZ(0,"mat-icon",38),t._uU(1,"person_outline"),t.qZA())}function ci(i,e){1&i&&(t.TgZ(0,"mat-icon",38),t._uU(1,"person"),t.qZA())}function ui(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"div",45)(1,"mat-card")(2,"div",20),t.YNc(3,za,2,2,"h3",21),t.YNc(4,ti,2,0,"h3",21),t.TgZ(5,"button",22,23)(7,"mat-icon"),t._uU(8,"more_vert"),t.qZA()()(),t.TgZ(9,"mat-menu",24,25)(11,"span",26),t.NdJ("mouseleave",function(){t.CHM(a);const o=t.MAs(6);return t.KtG(o.closeMenu())}),t.YNc(12,ei,6,3,"button",27),t.YNc(13,ai,6,3,"button",27),t._UZ(14,"mat-divider"),t.YNc(15,ii,6,3,"button",27),t.YNc(16,ni,6,3,"button",27),t.qZA()(),t.TgZ(17,"div",28)(18,"div",46)(19,"div",30),t.YNc(20,oi,1,3,"img",31),t.YNc(21,ri,1,2,"img",47),t.YNc(22,si,2,0,"mat-icon",33),t.qZA(),t.TgZ(23,"div",34)(24,"mat-slide-toggle",35),t.NdJ("change",function(){const r=t.CHM(a).$implicit;return t.KtG(r.RowDelete=!r.RowDelete)}),t.qZA()()(),t.TgZ(25,"div",48)(26,"div",49)(27,"p",37)(28,"mat-icon",38),t._uU(29,"chat-dots"),t.qZA(),t.TgZ(30,"span"),t._uU(31),t.qZA()()(),t.TgZ(32,"div",49)(33,"p",37)(34,"mat-icon",38),t._uU(35,"mail_outline"),t.qZA(),t.TgZ(36,"span"),t._uU(37),t.qZA()(),t.TgZ(38,"p",37)(39,"mat-icon",38),t._uU(40,"contact_phone"),t.qZA(),t.TgZ(41,"span"),t._uU(42),t.qZA()(),t.TgZ(43,"p",37)(44,"mat-icon",38),t._uU(45,"location_on"),t.qZA(),t.TgZ(46,"span"),t._uU(47),t.qZA()()(),t.TgZ(48,"div",50)(49,"p",37)(50,"mat-icon",38),t._uU(51,"event_available"),t.qZA(),t.TgZ(52,"span"),t._uU(53),t.ALo(54,"date"),t.qZA()(),t.TgZ(55,"p",37),t.YNc(56,li,2,0,"mat-icon",51),t.YNc(57,ci,2,0,"mat-icon",51),t.TgZ(58,"span"),t._uU(59),t.qZA()()()()()()()}if(2&i){const a=e.$implicit,n=t.MAs(10),o=t.oxw(2);t.xp6(3),t.Q6J("ngIf",0==a.RowDelete),t.xp6(1),t.Q6J("ngIf",1==a.RowDelete),t.xp6(1),t.Q6J("matMenuTriggerFor",n),t.xp6(7),t.Q6J("ngIf",o.can("view_oneowner")),t.xp6(1),t.Q6J("ngIf",o.can("delete_propertyowner")),t.xp6(2),t.Q6J("ngIf",o.can("view_owner_securitybuildings")),t.xp6(1),t.Q6J("ngIf",o.can("view_emp_securitypermissions")),t.xp6(4),t.Q6J("ngIf",a.OWNPic),t.xp6(1),t.Q6J("ngIf",!a.OWNPic),t.xp6(1),t.Q6J("ngIf",1==a.RowDelete),t.xp6(2),t.Q6J("checked",1==a.RowDelete),t.xp6(1),t.ekj("blocked",1==a.RowDelete),t.xp6(6),t.Oqu(a.OWNMobileWhatsapp),t.xp6(6),t.Oqu(a.OWNEmail),t.xp6(5),t.Oqu(a.OWNMobile),t.xp6(5),t.Oqu(a.OWNAddress),t.xp6(6),t.hij("Registration ",t.xi3(54,21,a.EntryDate,"dd MMMM, yyyy 'at' HH:mm"),""),t.xp6(3),t.Q6J("ngIf",1==a.RowDelete),t.xp6(1),t.Q6J("ngIf",0==a.RowDelete),t.xp6(2),t.Oqu(1==a.RowDelete?"Blocked":"Active")}}function di(i,e){if(1&i&&(t.TgZ(0,"div",17),t.YNc(1,ui,60,24,"div",44),t.ALo(2,"paginate"),t.ALo(3,"OwnerSearchPipe"),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.xi3(3,4,a.owners,a.searchText),t.WLB(7,At,a.count,a.page)))}}function mi(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"div",17)(1,"div",45)(2,"mat-card",53)(3,"pagination-controls",54),t.NdJ("pageChange",function(o){t.CHM(a);const r=t.oxw();return t.KtG(r.onPageChanged(o))}),t.qZA()()()()}}function pi(i,e){1&i&&(t.TgZ(0,"div",55),t._UZ(1,"mat-spinner",56),t.qZA())}class ot{constructor(e,a,n,o,r,m,h){this.appSettings=e,this.dialog=a,this.router=n,this.global=o,this.localStore=r,this.translateService=m,this.contractService=h,this.count=9,this.curCOMId=y.N.comid,this.account=new F.n,this.userPerm=[],this.ownersForDisplay={id:null,COMId:null,OWNCode:null,OWNName:null,OWNFirstName:null,OWNLastName:null,OWNGender:null,OWNGenderDisplay:null,OWNBirthDate:null,OWNNationalIDStartDate:null,OWNNationalIDEndDate:null,username:null,OWNPassword:null,OWNMobile:null,OWNMobileWhatsapp:null,OWNHomePhone:null,OWNWorkPhone:null,OWNEmail:null,OWNAddress:null,OWNAddressDescription:null,OWNNotes:null,OWNActive:null,OWNActiveDisplay:null,OWNPic:null,OWNIDPic:null,Related_OWNKeyField:null,Country_CTTKeyField:null,Governorate_CTTKeyField:null,OWNNationalIDType:null,OWNNationalIDTypeDisplay:null,OWNNationalID:null,City_CTTKeyField:null,Area_CTTKeyField:null,OWNLangtitude:null,OWNAltitude:null,OWNSelfType:null,OWNSelfTypeDisplay:null,EntryDate:null,last_updated:null,EntryUser:null,RowConfirm:0,RowDelete:0,RowStatus:0},this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getOwners()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getOwners(){this.owners=null,this.curUserData.is_superuser?(console.log("-----SuperUser-----"),this.contractService.getAllOwners(this.curCOMId,this.account.periorty).subscribe(e=>{console.log(e),this.owners=e})):"T"==this.curUserData.is_owner?(console.log("-----Owner-----"),this.contractService.getOwnersPerParent(this.curCOMId,this.account.periorty,this.curUserData.owner_KeyField).subscribe(e=>{console.log(e),this.owners=e})):"T"==this.curUserData.is_employee&&(console.log("-----Employee-----"),console.log("this.curUserData[id]:: "+this.curUserData.id),this.contractService.getOwnersPerEmp(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(e=>{console.log(e),console.log("----After----"),this.owners=e}))}addOwner(e,a,n){this.contractService.addOwner(e,a,n).subscribe(o=>{this.contractService.addCustomUserFromOwner(o,a).subscribe(r=>{this.contractService.updateOwnerWithUserID(o.id,r.id).subscribe(m=>{},m=>{console.log("ERROR::--\x3e ",m)})}),this.getOwners()})}updateOwner(e,a,n){console.log("====inside updateOwner====="),this.contractService.editOwner(e,a,n).subscribe(o=>{this.getOwners()})}deleteOwner(e){this.dialog.open(R.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.contractService.deleteOneOwner(e.id).subscribe(o=>this.getOwners())})}onPageChanged(e){this.page=e,this.getOwners(),window.scrollTo(0,0)}openOwnerDialog(e){this.dialog.open(J,{data:e}).afterClosed().subscribe(n=>{"Cancel"==n.event||("Patch"==n.event?(this.mapFormvalue_to_OwnerClass(n.data,"Patch"),this.updateOwner(this.ownersForDisplay,n.ownPic,n.ownerIDPic)):"Post"==n.event&&(this.mapFormvalue_to_OwnerClass(n.data,"Post"),this.addOwner(this.ownersForDisplay,n.ownPic,n.ownerIDPic)))})}openBuildingDialog(e){this.dialog.open(nt,{data:e,panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}openSecurityDialog(e){this.dialog.open(Pa.y,{data:e}).afterClosed().subscribe(n=>{})}openUserPermission(e){this.router.navigate(["/settings/permissions-all/"+e+"/"])}mapFormvalue_to_OwnerClass(e,a){console.log(e),console.log("=================formValue==========================");const n=new c.uU("en-GB").transform(e.OWNBirthDate,"dd/MM/yyyy"),o=new c.uU("en-GB").transform(e.work.OWNNationalIDStartDate,"dd/MM/yyyy"),r=new c.uU("en-GB").transform(e.work.OWNNationalIDEndDate,"dd/MM/yyyy");this.ownersForDisplay.id=e.id,this.ownersForDisplay.OWNFirstName=e.OWNFirstName,this.ownersForDisplay.OWNLastName=e.OWNLastName,this.ownersForDisplay.OWNGender=e.OWNGender,this.ownersForDisplay.OWNSelfType=e.OWNSelfType,null!=e.OWNBirthDate&&(this.ownersForDisplay.OWNBirthDate=n),null!=e.work.OWNNationalIDStartDate&&(this.ownersForDisplay.OWNNationalIDStartDate=o),null!=e.work.OWNNationalIDEndDate&&(this.ownersForDisplay.OWNNationalIDEndDate=r),this.ownersForDisplay.OWNNationalIDType=e.work.OWNNationalIDType,this.ownersForDisplay.OWNNationalID=e.work.OWNNationalID,this.ownersForDisplay.username=e.contacts.username,this.ownersForDisplay.OWNPassword=e.contacts.OWNPassword,this.ownersForDisplay.OWNEmail=e.contacts.OWNEmail,this.ownersForDisplay.OWNMobile=e.contacts.OWNMobile,this.ownersForDisplay.OWNMobileWhatsapp=e.contacts.OWNMobileWhatsapp,this.ownersForDisplay.OWNHomePhone=e.contacts.OWNHomePhone,this.ownersForDisplay.OWNWorkPhone=e.contacts.OWNWorkPhone,this.ownersForDisplay.OWNAddress=e.contacts.OWNAddress,this.ownersForDisplay.OWNAddressDescription=e.contacts.OWNAddressDescription,this.ownersForDisplay.OWNActive=e.settings.OWNActive}prepareMsgLanguage(){this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}ot.\u0275fac=function(e){return new(e||ot)(t.Y36(V.d),t.Y36(d.uw),t.Y36(C.F0),t.Y36(S.U),t.Y36(Z.C),t.Y36(g.sK),t.Y36(P.W))},ot.\u0275cmp=t.Xpm({type:ot,selectors:[["app-owners-list"]],features:[t._Bn([P.W])],decls:25,vars:11,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","grid"],["viewType","matButtonToggleGroup"],["value","grid"],["value","list"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","33.3","fxFlex.md","50","class","p-2",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-md","33.3","fxFlex.md","50",1,"p-2"],["fxLayout","row","fxLayoutAlign","space-between center",1,"bg-primary"],["class","user-name",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["xPosition","before","overlapTrigger","true"],["menu","matMenu"],[3,"mouseleave"],["mat-menu-item","",3,"click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-around center",1,"user-content"],["fxFlex","30","fxLayout","column","fxLayoutAlign","center center"],[1,"user-img"],["class","transition-2",3,"src","blocked",4,"ngIf"],["src","assets/images/others/user.jpg","class","transition-2",3,"blocked",4,"ngIf"],["color","warn",4,"ngIf"],[1,"user-social"],["color","primary",3,"checked","change"],["fxFlex","70","fxLayout","column",1,"user-details","transition-2"],["fxLayout","row","fxLayoutAlign","start center"],[1,"text-muted"],[1,"user-name"],["mat-menu-item","",3,"click"],[1,"transition-2",3,"src"],["src","assets/images/others/user.jpg",1,"transition-2"],["color","warn"],["fxFlex","100","class","p-2",4,"ngFor","ngForOf"],["fxFlex","100",1,"p-2"],["fxFlex","20","fxFlex.xs","30","fxLayout","column","fxLayoutAlign","center center"],["src","assets/img/users/default-user.jpg","class","transition-2",3,"blocked",4,"ngIf"],["fxFlex","80","fxFlex.xs","70","fxLayout","row","fxLayout.xs","column",1,"user-details","transition-2"],["fxFlex","30","fxFlex.xs","100","fxLayout","column"],["fxFlex","40","fxFlex.xs","100","fxLayout","column"],["class","text-muted",4,"ngIf"],["src","assets/img/users/default-user.jpg",1,"transition-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),t.YNc(4,Ka,3,0,"mat-button-toggle",4),t.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),t._uU(7,"search"),t.qZA()()()(),t.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),t.NdJ("ngModelChange",function(o){return a.searchText=o}),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),t._uU(17,"view_module"),t.qZA()(),t.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),t._uU(20,"view_list"),t.qZA()()()()(),t.YNc(21,Xa,4,10,"div",14),t.YNc(22,di,4,10,"div",14),t.YNc(23,mi,4,0,"div",14),t.YNc(24,pi,2,0,"div",15)),2&e){const n=t.MAs(3),o=t.MAs(14);t.xp6(4),t.Q6J("ngIf",a.can("add_propertyowner")),t.xp6(4),t.ekj("show","search"==n.value),t.xp6(2),t.s9C("placeholder",t.lcZ(11,9,"HTML.SEARCH_Owner")),t.Q6J("ngModel",a.searchText),t.xp6(11),t.Q6J("ngIf","grid"==o.value),t.xp6(1),t.Q6J("ngIf","list"==o.value),t.xp6(1),t.Q6J("ngIf",a.owners),t.xp6(1),t.Q6J("ngIf",!a.owners)}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,D.LS,c.sg,c.O5,u.xw,u.Wh,u.yH,T.RK,W.A9,W.Yi,L.a8,w.Hw,N.Nt,p.KE,I.d,ft.VK,ft.OP,ft.p6,mt.Ou,ka.Rr,D._s,pt.sp,c.uU,g.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});class Tt{}var hi=l(6381),gi=l(8910);function _i(i,e){if(1&i){const a=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.saveEditDocData(o.tenantLeaveForDisplay.id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const a=t.oxw();t.Q6J("mat-dialog-close",a.leaveData_Form.value)("disabled",!a.leaveData_Form.valid),t.xp6(1),t.Oqu(t.lcZ(2,3,"BTN.SAVE"))}}class j{constructor(e,a,n,o,r,m,h,f,_,b,U,rt,st,fi){this.transferService=e,this.dataService=a,this.activatedRoute=n,this.localStore=o,this._companyService=r,this.global=m,this.router=h,this.snackBar=f,this.docsService=_,this.tenantsService=b,this.contractService=U,this.translateService=rt,this.fb=st,this._formBuilder=fi,this.curCOMId=y.N.comid,this.account=new F.n,this.userPerm=[],this.curDocValue=0,this.curDocPayedValue=0}ngOnInit(){if(this.transferService.getMessage.subscribe(e=>{this.contract_KeyField=e.contract_KeyField,this.contEndDate=e.contenddate,this.contValue=e.contvalue,this.contInsurance=e.continsurance,this.leaveID=e.leaveid,this.branch_KeyField=e.branch_KeyField,this.owner_KeyField=e.owner_KeyField,this.build_KeyField=e.build_KeyField,this.unit_KeyField=e.unit_KeyField,this.customer_KeyField=e.customer_KeyField,this.customerName=e.cusName,this.contRemainingInstallments=e.remaining_Installments}),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.leaveData_Form=this.fb.group({id:null,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,customer_KeyField:null,TELCode:null,TELLastElectricityReading:null,TELCurrentElectricityReading:null,TELContractEndDate:null,TELLeaveDate:null,DaysDiff:{value:null,disabled:!0},contractValue:{value:null,disabled:!0},TELDeductionElectricValue:0,TELDeductionInstallmentValue:0,TELDeductionDamageValue:0,TELDeductionMonthlyExpensesValue:0,TELDeductionCutFromAdditionValue:0,TELDeductionOtherValue:0,TELDeductionTotalValue:0,TELAdditionInsuranceValue:0,TELAdditionCutFromRentValue:0,TELAdditionOtherValue:0,TELAdditionTotalValue:0,TELNotes:null,netTotalDiff:{value:0,disabled:!0}}),this.sub=this.activatedRoute.params.subscribe(e=>{null==e.id?(console.log("----NULL--------------\x3e>>>"),this.tenantLeaveForDisplay=new Tt,this.leaveData_Form.patchValue({contract_KeyField:this.contract_KeyField,TELContractEndDate:this.contEndDate,TELAdditionInsuranceValue:this.contInsurance,TELAdditionTotalValue:this.contInsurance,TELNotes:"",branch_KeyField:this.branch_KeyField,owner_KeyField:this.owner_KeyField,build_KeyField:this.build_KeyField,unit_KeyField:this.unit_KeyField,customer_KeyField:this.customer_KeyField,contractValue:this.contValue,TELDeductionInstallmentValue:this.contRemainingInstallments,TELDeductionTotalValue:this.contRemainingInstallments,netTotalDiff:this.contInsurance-this.contRemainingInstallments})):e.id?(console.log("---param:: "+e.id),this.id=+e.id,this.getLeaveDataById(this.id)):(console.log("----Empty----"),this.tenantLeaveForDisplay=new Tt)})}else this.router.navigate(["/sign-in"])}onChangeLeaveDate(e){this.calcDays(e.value,this.leaveData_Form.value.TELContractEndDate),this.leaveData_Form.get("TELLeaveDate").patchValue(e.value)}calcDays(e,a){var n=this.calculateDiff(e,a);console.log("---otherDays  "+n);let r=Math.round(this.contValue/365*n*100)/100;null==r&&(r=0),this.leaveData_Form.patchValue({DaysDiff:n,TELAdditionCutFromRentValue:r}),this.calcAdditionTotal()}calculateDiff(e,a){let n=new Date(a);return e=new Date(e),Math.floor((Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())-Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))/864e5)}calcAdditionTotal(){let e=this.leaveData_Form.value.TELAdditionInsuranceValue,a=this.leaveData_Form.value.TELAdditionOtherValue,n=this.leaveData_Form.value.TELAdditionCutFromRentValue;null==e&&(e=0),null==a&&(a=0),null==n&&(n=0),this.leaveData_Form.patchValue({TELAdditionTotalValue:Math.round(100*(+e+ +a+ +n))/100}),this.calcNetTotal()}calcDeductionTotal(){let e=this.leaveData_Form.value.TELDeductionElectricValue,a=this.leaveData_Form.value.TELDeductionInstallmentValue,n=this.leaveData_Form.value.TELDeductionDamageValue,o=this.leaveData_Form.value.TELDeductionMonthlyExpensesValue,r=this.leaveData_Form.value.TELDeductionCutFromAdditionValue,m=this.leaveData_Form.value.TELDeductionOtherValue;null==e&&(e=0),null==a&&(a=0),null==n&&(n=0),null==o&&(o=0),null==r&&(r=0),null==m&&(m=0),this.leaveData_Form.patchValue({TELDeductionTotalValue:Math.round(100*(+e+ +a+ +n+ +o+ +r+ +m))/100}),this.calcNetTotal()}calcNetTotal(){let e=this.leaveData_Form.value.TELAdditionTotalValue,a=this.leaveData_Form.value.TELDeductionTotalValue;null==e&&(e=0),null==a&&(a=0),this.leaveData_Form.patchValue({netTotalDiff:Math.round(100*(+e-+a))/100})}readAddInsuranceValue(e){let a=e.target.value;if(a>0){let n=this.leaveData_Form.value.TELAdditionCutFromRentValue,o=this.leaveData_Form.value.TELAdditionOtherValue;null==n&&(n=0),null==o&&(o=0),this.leaveData_Form.patchValue({TELAdditionTotalValue:+a+ +n+ +o})}}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getLeaveDataById(e){console.log("---inside getLeaveDataById -----"),this.contractService.getLeaveData(e).subscribe(a=>{this.fillForm(a),this.tenantLeaveForDisplay=a},a=>{this.tenantLeaveForDisplay=new Tt,console.log("---getLeaveDataById  not found Leave data")})}fillForm(e){null!=e.TELContractEndDate&&(this.contra_endDate=e.TELContractEndDate),null!=e.TELLeaveDate&&(this.contra_leaveDate=e.TELLeaveDate),console.log("---11------"),this.calculateDiffDays=this.calculateDiff(e.TELLeaveDate,e.TELContractEndDate),console.log("---this.calculateDiffDays:: "+this.calculateDiffDays),this.leaveData_Form.patchValue({id:e.id,contract_KeyField:e.contract_KeyField,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,TELCode:e.TELCode,TELLastElectricityReading:e.TELLastElectricityReading,TELCurrentElectricityReading:e.TELCurrentElectricityReading,TELContractEndDate:e.TELContractEndDate,TELLeaveDate:e.TELLeaveDate,TELDeductionElectricValue:e.TELDeductionElectricValue,TELDeductionInstallmentValue:e.TELDeductionInstallmentValue,TELDeductionDamageValue:e.TELDeductionDamageValue,TELDeductionMonthlyExpensesValue:e.TELDeductionMonthlyExpensesValue,TELDeductionCutFromAdditionValue:e.TELDeductionCutFromAdditionValue,TELDeductionOtherValue:e.TELDeductionOtherValue,TELDeductionTotalValue:e.TELDeductionTotalValue,TELAdditionInsuranceValue:e.TELAdditionInsuranceValue,TELAdditionCutFromRentValue:e.TELAdditionCutFromRentValue,TELAdditionOtherValue:e.TELAdditionOtherValue,TELAdditionTotalValue:e.TELAdditionTotalValue,TELNotes:e.TELNotes,netTotalDiff:e.TELAdditionTotalValue-e.TELDeductionTotalValue,contractValue:this.contValue,DaysDiff:this.calculateDiffDays}),console.log("---22------")}mappingFormValue_ToPayDocClass(){const e=new c.uU("en-GB").transform(this.leaveData_Form.value.TELContractEndDate,"dd/MM/yyyy"),a=new c.uU("en-GB").transform(this.leaveData_Form.value.TELLeaveDate,"dd/MM/yyyy");this.tenantLeaveForDisplay.id=this.leaveData_Form.value.id,this.tenantLeaveForDisplay.contract_KeyField=this.leaveData_Form.value.contract_KeyField,this.tenantLeaveForDisplay.branch_KeyField=this.leaveData_Form.value.branch_KeyField,this.tenantLeaveForDisplay.owner_KeyField=this.leaveData_Form.value.owner_KeyField,this.tenantLeaveForDisplay.build_KeyField=this.leaveData_Form.value.build_KeyField,this.tenantLeaveForDisplay.unit_KeyField=this.leaveData_Form.value.unit_KeyField,this.tenantLeaveForDisplay.customer_KeyField=this.leaveData_Form.value.customer_KeyField,null!=this.leaveData_Form.value.TELContractEndDate&&(this.tenantLeaveForDisplay.TELContractEndDate=e),null!=this.leaveData_Form.value.TELLeaveDate&&(this.tenantLeaveForDisplay.TELLeaveDate=a),this.tenantLeaveForDisplay.TELCode=this.leaveData_Form.value.TELCode,this.tenantLeaveForDisplay.TELLastElectricityReading=this.leaveData_Form.value.TELLastElectricityReading,this.tenantLeaveForDisplay.TELCurrentElectricityReading=this.leaveData_Form.value.TELCurrentElectricityReading,this.tenantLeaveForDisplay.TELDeductionElectricValue=this.leaveData_Form.value.TELDeductionElectricValue,this.tenantLeaveForDisplay.TELDeductionInstallmentValue=this.leaveData_Form.value.TELDeductionInstallmentValue,this.tenantLeaveForDisplay.TELDeductionDamageValue=this.leaveData_Form.value.TELDeductionDamageValue,this.tenantLeaveForDisplay.TELDeductionMonthlyExpensesValue=this.leaveData_Form.value.TELDeductionMonthlyExpensesValue,this.tenantLeaveForDisplay.TELDeductionCutFromAdditionValue=this.leaveData_Form.value.TELDeductionCutFromAdditionValue,this.tenantLeaveForDisplay.TELDeductionOtherValue=this.leaveData_Form.value.TELDeductionOtherValue,this.tenantLeaveForDisplay.TELDeductionTotalValue=this.leaveData_Form.value.TELDeductionTotalValue,this.tenantLeaveForDisplay.TELAdditionInsuranceValue=this.leaveData_Form.value.TELAdditionInsuranceValue,this.tenantLeaveForDisplay.TELAdditionCutFromRentValue=this.leaveData_Form.value.TELAdditionCutFromRentValue,this.tenantLeaveForDisplay.TELAdditionOtherValue=this.leaveData_Form.value.TELAdditionOtherValue,this.tenantLeaveForDisplay.TELAdditionTotalValue=this.leaveData_Form.value.TELAdditionTotalValue,this.tenantLeaveForDisplay.TELNotes=this.leaveData_Form.value.TELNotes}saveEditDocData(e){this.mappingFormValue_ToPayDocClass(),e?this.contractService.editTenantLeave(this.tenantLeaveForDisplay).subscribe(a=>{let n={contract_KeyField:a.contract_KeyField,branch_KeyField:a.branch_KeyField,owner_KeyField:a.owner_KeyField,build_KeyField:a.build_KeyField,unit_KeyField:a.unit_KeyField,customer_KeyField:a.customer_KeyField,TSTCreditValue:a.TELAdditionTotalValue,TSTDebitValue:a.TELDeductionTotalValue,TSTDate:a.TELLeaveDate,TSTDescription:"\u0646\u062a\u064a\u062c\u0629 \u0645\u0633\u062a\u0646\u062f \u0627\u0644\u0625\u062e\u0644\u0627\u0621 \u0631\u0642\u0645 "+a.TELCode,TSTSubject:"LEAVE",TSTSubjectID:a.id};console.log("------Start to Deleted--------"),this.contractService.getStatementsIDPerSubjectID(this.curCOMId,this.account.periorty,"LEAVE",a.id).subscribe(o=>{this.stateID=o[0].id,console.log("this.stateID:: "+this.stateID),this.contractService.deleteStatement(this.stateID).subscribe(r=>{console.log("Statment Deleted"),this.contractService.addStatement(n).subscribe(m=>{console.log("Statment Added after deleted")})})}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},a=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):this.contractService.addTenantLeave(this.tenantLeaveForDisplay).subscribe(a=>{this.contractService.editContractWithDic({RCOTenantLeaveID:a.id,RCOContractStatus:"F"},a.contract_KeyField).subscribe(r=>{console.log("editContractWithDic Done")},r=>{console.log("editContractWithDic Error:: "+r)});let o={contract_KeyField:a.contract_KeyField,branch_KeyField:a.branch_KeyField,owner_KeyField:a.owner_KeyField,build_KeyField:a.build_KeyField,unit_KeyField:a.unit_KeyField,customer_KeyField:a.customer_KeyField,TSTCreditValue:a.TELAdditionTotalValue,TSTDebitValue:a.TELDeductionTotalValue,TSTDate:a.TELLeaveDate,TSTDescription:"\u0646\u062a\u064a\u062c\u0629 \u0645\u0633\u062a\u0646\u062f \u0627\u0644\u0625\u062e\u0644\u0627\u0621 \u0631\u0642\u0645 "+a.TELCode,TSTSubject:"LEAVE",TSTSubjectID:a.id};console.log("--tenantStatementData:: "+o),this.contractService.addStatement(o).subscribe(r=>{console.log("addStatement Done")},r=>{console.log("addStatement Error:: "+r)}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},a=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e})}}j.\u0275fac=function(e){return new(e||j)(t.Y36(k),t.Y36(vt.n),t.Y36(C.gz),t.Y36(Z.C),t.Y36(hi.J),t.Y36(S.U),t.Y36(C.F0),t.Y36(x.ux),t.Y36(gi.c),t.Y36(E.v),t.Y36(P.W),t.Y36(g.sK),t.Y36(s.qu),t.Y36(s.qu))},j.\u0275cmp=t.Xpm({type:j,selectors:[["app-tenant-leave"]],decls:145,vars:71,consts:[[1,"p-2"],[1,"pt-3"],["autocomplete","off","fxLayout","row wrap",3,"formGroup"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","29.9",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","TELContractEndDate"],["matInput","","formControlName","TELLeaveDate",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["contractleaveDate",""],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["matInput","","formControlName","contractValue"],["fxFlex","100","fxFlex.gt-sm","19.8",1,"px-1"],["matInput","","formControlName","DaysDiff"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","TELLastElectricityReading"],["matInput","","formControlName","TELCurrentElectricityReading"],["fxFlex","100","fxFlex.gt-sm","40",1,"px-2"],["vertical","",2,"height","10px"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-1"],["matInput","","formControlName","TELAdditionInsuranceValue",3,"change"],["matInput","","formControlName","TELAdditionCutFromRentValue",3,"change"],["matInput","","formControlName","TELAdditionOtherValue",3,"change"],["matInput","","formControlName","TELAdditionTotalValue"],["fxFlex","100","fxFlex.gt-sm","10",1,"px-2"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-2"],["matInput","","formControlName","TELDeductionElectricValue",3,"change"],["matInput","","formControlName","TELDeductionInstallmentValue",3,"change"],["matInput","","formControlName","TELDeductionDamageValue",3,"change"],["matInput","","formControlName","TELDeductionMonthlyExpensesValue",3,"change"],["matInput","","formControlName","TELDeductionCutFromAdditionValue",3,"change"],["matInput","","formControlName","TELDeductionOtherValue",3,"change"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","TELDeductionTotalValue"],["fxFlex","100","fxFlex.gt-sm","24.9",1,"px-1"],["matInput","","formControlName","netTotalDiff"],["fxFlex","100","fxFlex.gt-sm","74.9",1,"px-1"],["matInput","","formControlName","TELNotes","rows","3"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"mat-card-content",1)(8,"form",2),t._UZ(9,"mat-label"),t.TgZ(10,"div",3)(11,"div",4)(12,"mat-form-field",5)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",6),t.qZA()(),t.TgZ(17,"div",4)(18,"mat-form-field",5)(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"input",7),t.NdJ("dateChange",function(o){return a.onChangeLeaveDate(o)}),t.qZA(),t._UZ(23,"mat-datepicker-toggle",8)(24,"mat-datepicker",null,9),t.qZA()(),t.TgZ(26,"div",10)(27,"mat-form-field",5)(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",11),t.qZA()(),t.TgZ(32,"div",12)(33,"mat-form-field",5)(34,"mat-label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",13),t.qZA()()(),t.TgZ(38,"div",3)(39,"div",14)(40,"mat-form-field",5)(41,"mat-label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",15),t.qZA()(),t.TgZ(45,"div",14)(46,"mat-form-field",5)(47,"mat-label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._UZ(50,"input",16),t.qZA()()(),t.TgZ(51,"div",17)(52,"p"),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"mat-divider",18),t.TgZ(56,"div",19)(57,"div",20)(58,"mat-form-field",5)(59,"mat-label"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"input",21),t.NdJ("change",function(){return a.calcAdditionTotal()}),t.qZA()()(),t.TgZ(63,"div",20)(64,"mat-form-field",5)(65,"mat-label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"input",22),t.NdJ("change",function(){return a.calcAdditionTotal()}),t.qZA()()(),t.TgZ(69,"div",20)(70,"mat-form-field",5)(71,"mat-label"),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"input",23),t.NdJ("change",function(){return a.calcAdditionTotal()}),t.qZA()()(),t.TgZ(75,"div",20)(76,"mat-form-field",5)(77,"mat-label"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t._UZ(80,"input",24),t.qZA()()()(),t._UZ(81,"div",25),t.TgZ(82,"div",26)(83,"p"),t._uU(84),t.ALo(85,"translate"),t.qZA(),t._UZ(86,"mat-divider",18),t.TgZ(87,"div",19)(88,"div",20)(89,"mat-form-field",5)(90,"mat-label"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t.TgZ(93,"input",27),t.NdJ("change",function(){return a.calcDeductionTotal()}),t.qZA()()(),t.TgZ(94,"div",20)(95,"mat-form-field",5)(96,"mat-label"),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.TgZ(99,"input",28),t.NdJ("change",function(){return a.calcDeductionTotal()}),t.qZA()()(),t.TgZ(100,"div",20)(101,"mat-form-field",5)(102,"mat-label"),t._uU(103),t.ALo(104,"translate"),t.qZA(),t.TgZ(105,"input",29),t.NdJ("change",function(){return a.calcDeductionTotal()}),t.qZA()()(),t.TgZ(106,"div",20)(107,"mat-form-field",5)(108,"mat-label"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"input",30),t.NdJ("change",function(){return a.calcDeductionTotal()}),t.qZA()()(),t.TgZ(112,"div",20)(113,"mat-form-field",5)(114,"mat-label"),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"input",31),t.NdJ("change",function(){return a.calcDeductionTotal()}),t.qZA()()(),t.TgZ(118,"div",20)(119,"mat-form-field",5)(120,"mat-label"),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"input",32),t.NdJ("change",function(){return a.calcDeductionTotal()}),t.qZA()()(),t.TgZ(124,"div",33)(125,"mat-form-field",5)(126,"mat-label"),t._uU(127),t.ALo(128,"translate"),t.qZA(),t._UZ(129,"input",34),t.qZA()()()(),t.TgZ(130,"div",3)(131,"div",35)(132,"mat-form-field",5)(133,"mat-label"),t._uU(134),t.ALo(135,"translate"),t.qZA(),t._UZ(136,"input",36),t.qZA()(),t.TgZ(137,"div",37)(138,"mat-form-field",5)(139,"mat-label"),t._uU(140),t.ALo(141,"translate"),t.qZA(),t._UZ(142,"textarea",38),t.qZA()()(),t.TgZ(143,"div",3),t.YNc(144,_i,3,5,"button",39),t.qZA()()()()()),2&e){const n=t.MAs(25);t.xp6(5),t.AsE("",t.lcZ(6,27,"HTML.TenantLeave"),": ",a.customerName,""),t.xp6(3),t.Q6J("formGroup",a.leaveData_Form),t.xp6(6),t.hij(" ",t.lcZ(15,29,"HTML.ContractEndDate"),""),t.xp6(6),t.Oqu(t.lcZ(21,31,"HTML.ContractLeaveDate")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(6),t.hij(" ",t.lcZ(30,33,"HTML.ContractValue"),""),t.xp6(6),t.hij(" ",t.lcZ(36,35,"HTML.DaysDiff"),""),t.xp6(7),t.hij(" ",t.lcZ(43,37,"HTML.LastElectricityReading"),""),t.xp6(6),t.hij(" ",t.lcZ(49,39,"HTML.ElectricCounterReading"),""),t.xp6(5),t.Oqu(t.lcZ(54,41,"HTML.Addition")),t.xp6(7),t.Oqu(t.lcZ(61,43,"HTML.AdditionInsuranceValue")),t.xp6(6),t.Oqu(t.lcZ(67,45,"HTML.AdditionCutFromRentValue")),t.xp6(6),t.Oqu(t.lcZ(73,47,"HTML.AdditionOtherValue")),t.xp6(6),t.Oqu(t.lcZ(79,49,"HTML.AdditionTotalValue")),t.xp6(6),t.Oqu(t.lcZ(85,51,"HTML.Deduction")),t.xp6(7),t.Oqu(t.lcZ(92,53,"HTML.DeductionElectricValue")),t.xp6(6),t.Oqu(t.lcZ(98,55,"HTML.DeductionInstallmentValue")),t.xp6(6),t.Oqu(t.lcZ(104,57,"HTML.DeductionDamageValue")),t.xp6(6),t.Oqu(t.lcZ(110,59,"HTML.DeductionMonthlyExpensesValue")),t.xp6(6),t.Oqu(t.lcZ(116,61,"HTML.DeductionCutFromAdditionValue")),t.xp6(6),t.Oqu(t.lcZ(122,63,"HTML.DeductionOtherValue")),t.xp6(6),t.Oqu(t.lcZ(128,65,"HTML.DeductionTotalValue")),t.xp6(7),t.hij(" ",t.lcZ(135,67,"HTML.NetValue"),""),t.xp6(6),t.Oqu(t.lcZ(141,69,"HTML.Notes")),t.xp6(4),t.Q6J("ngIf",a.can("doing_tenantleave"))}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,c.O5,s.sg,s.u,u.xw,u.Wh,u.yH,T.lW,L.a8,L.dn,L.dk,L.n5,v.Mq,v.hl,v.nW,d.ZT,N.Nt,p.KE,p.hX,p.R9,I.d,g.X$]});const bt=[{path:"",redirectTo:"tenant-list",pathMatch:"full"},{path:"tenant-list",component:z,data:{breadcrumb:"Tenants"}},{path:"tenant-add",component:G,data:{breadcrumb:"AddTenant"}},{path:"tenant-add/:id",component:G,data:{breadcrumb:"EditTenant"}},{path:"owner-list",component:ot,data:{breadcrumb:"Owners"}},{path:"owner-add",component:J,data:{breadcrumb:"AddOwner"}},{path:"owner-add/:id",component:J,data:{breadcrumb:"EditOwner"}},{path:"contract-list",component:Y,data:{breadcrumb:"RentContracts"}},{path:"contract-list/:tenantid",component:Y,data:{breadcrumb:"RentContractsForTenant"}},{path:"contract-add",component:K,data:{breadcrumb:"AddContract"}},{path:"contract-add/:id",component:K,data:{breadcrumb:"EditContract"}},{path:"contract-add/renew/:id",component:K,data:{breadcrumb:"RenewContract",parentID:"T"}},{path:"installment-list/:id",component:at,data:{breadcrumb:"ContractInstallments"}},{path:"statements-list/:id",component:it,data:{breadcrumb:"TenantStatements"}},{path:"tenant-leave",component:j,data:{breadcrumb:"AddTenantLeave"}},{path:"tenant-leave/:id",component:j,data:{breadcrumb:"EditTenantLeave"}}];class ${}$.\u0275fac=function(e){return new(e||$)},$.\u0275mod=t.oAB({type:$}),$.\u0275inj=t.cJS({imports:[Fe.JF,s.u5,D.JX,we.D,c.ez,C.Bz.forChild(bt),s.UX,Se.m,D.JX,ua.kz,gt.Y$,_t.A0]})}}]);