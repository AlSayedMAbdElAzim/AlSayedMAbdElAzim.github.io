(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[133],{5133:(ie,it,f)=>{"use strict";f.r(it),f.d(it,{ContractsModule:()=>Mt,routes:()=>we});var _=f(6895),Z=f(5412),d=f(4006),R=f(8955),N=f(2340),t=f(4650),D=f(6002),p=f(5298),V=f(3705),I=f(7009),T=f(1576),K=f(3238),b=f(4859),A=f(4144),v=f(9549),q=f(4385),w=f(3081);function H(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.USERNAMEREQ")))}function $(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength")))}function ht(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.EmailREQ")))}function z(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.InvalidEmail")))}function Ct(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.FirstNameREQ")))}function Qt(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength")))}function jt(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.LastNameREQ")))}function ne(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength")))}function oe(o,e){if(1&o&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function ae(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Mobile is required"),t.qZA())}function re(o,e){if(1&o&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function se(o,e){if(1&o&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.UNTUnitNumber," ")}}function le(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.PasswordREQ")))}function $t(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MESSAGE.MinLength6")))}function zt(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.ConfirmPasswordREQ")))}function ce(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.MismatchPassword")))}function ue(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.registerForm.value)("disabled",!i.registerForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,3,"BTN.SAVE"))}}class gt{constructor(e,i,n,r,l,C,y){this.dialogRef=e,this.data=i,this.atlasService=n,this.localStore=r,this.unitsService=l,this.snackBar=C,this.fb=y,this.curCOMId=N.N.comid,this.userPerm=[],this.AllBranches=[],this.AllBuilding=[],this.AllUnitsForBuilding=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.curperiorty=this.data.periorty,this.registerForm=this.fb.group({username:["",d.kI.compose([d.kI.required,d.kI.minLength(3)])],first_name:["",d.kI.compose([d.kI.required,d.kI.minLength(2)])],last_name:["",d.kI.compose([d.kI.required,d.kI.minLength(2)])],email:["",d.kI.compose([d.kI.required,R.Le])],branch_KeyField:[null,d.kI.required],UserMobile:[null,d.kI.required],build_KeyField:[null,d.kI.required],unit_KeyField:[null,d.kI.required],is_customer:"T",password:["",d.kI.required],confirmPassword:["",d.kI.required]},{validator:(0,R.zi)("password","confirmPassword")}),this.getAllBranches(this.curCOMId,this.curperiorty)}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.curperiorty,e.value)}getBuildingPerBranch(e,i,n){this.unitsService.getBuildingsPerBranch(e,i,n).subscribe(r=>{this.AllBuilding=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(e){this.unitsService.getOneBuilding(e.value).subscribe(i=>{this.getUnitsPerBuilding(this.curCOMId,this.curperiorty,e.value,"E")},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuilding(e,i,n,r){this.unitsService.getAllUnitsPerBuilding(e,i,n,r).subscribe(l=>{this.AllUnitsForBuilding=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0644\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onSave(){console.log("===***Press Save button***==="),this.action="Post",this.registerForm.valid&&this.dialogRef.close({event:this.action,data:this.registerForm})}close(){console.log("===***Press Close button***==="),this.action="Cancel",this.dialogRef.close({event:this.action})}}gt.\u0275fac=function(e){return new(e||gt)(t.Y36(Z.so),t.Y36(Z.WI),t.Y36(D.Z),t.Y36(p.C),t.Y36(V.X),t.Y36(I.ux),t.Y36(d.QS))},gt.\u0275cmp=t.Xpm({type:gt,selectors:[["app-customers-dialog"]],decls:110,vars:81,consts:[["mat-dialog-title",""],[1,"user-form",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","username","required","",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","email","required","",3,"placeholder"],["matInput","","formControlName","first_name","required","",3,"placeholder"],["matInput","","formControlName","last_name","required","",3,"placeholder"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","UserMobile","required",""],["formControlName","build_KeyField","id","build_OneOpSel",3,"placeholder","selectionChange"],["formControlName","unit_KeyField","id","unit_OneOpSel",3,"placeholder"],["matInput","","formControlName","password","type","password","minlength","6","required","",3,"placeholder"],["matInput","","formControlName","confirmPassword","type","password","required","",3,"placeholder"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",7),t.ALo(13,"translate"),t.YNc(14,H,3,3,"mat-error",8),t.YNc(15,$,3,3,"mat-error",8),t.qZA()(),t.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",9),t.ALo(22,"translate"),t.YNc(23,ht,3,3,"mat-error",8),t.YNc(24,z,3,3,"mat-error",8),t.qZA()()(),t.TgZ(25,"div",4)(26,"div",5)(27,"mat-form-field",6)(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",10),t.ALo(32,"translate"),t.YNc(33,Ct,3,3,"mat-error",8),t.YNc(34,Qt,3,3,"mat-error",8),t.qZA()(),t.TgZ(35,"div",5)(36,"mat-form-field",6)(37,"mat-label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"input",11),t.ALo(41,"translate"),t.YNc(42,jt,3,3,"mat-error",8),t.YNc(43,ne,3,3,"mat-error",8),t.qZA()()(),t.TgZ(44,"div",4)(45,"div",5)(46,"mat-form-field",6)(47,"mat-label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"mat-select",12),t.NdJ("selectionChange",function(r){return i.getBuildings(r)}),t.ALo(51,"translate"),t.TgZ(52,"mat-option",13),t._uU(53,"-"),t.qZA(),t.YNc(54,oe,2,2,"mat-option",14),t.qZA()()(),t.TgZ(55,"div",5)(56,"mat-form-field",6)(57,"mat-label"),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"mat-hint"),t._uU(61,"966505602221"),t.qZA(),t._UZ(62,"input",15),t.YNc(63,ae,2,0,"mat-error",8),t.qZA()()(),t.TgZ(64,"div",4)(65,"div",5)(66,"mat-form-field",6)(67,"mat-label"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"mat-select",16),t.NdJ("selectionChange",function(r){return i.readBuilding(r)}),t.ALo(71,"translate"),t.TgZ(72,"mat-option",13),t._uU(73,"-"),t.qZA(),t.YNc(74,re,2,2,"mat-option",14),t.qZA()()(),t.TgZ(75,"div",5)(76,"mat-form-field",6)(77,"mat-label"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"mat-select",17),t.ALo(81,"translate"),t.TgZ(82,"mat-option",13),t._uU(83,"-"),t.qZA(),t.YNc(84,se,2,2,"mat-option",14),t.qZA()()()(),t.TgZ(85,"div",4)(86,"div",5)(87,"mat-form-field",6)(88,"mat-label"),t._uU(89),t.ALo(90,"translate"),t.qZA(),t._UZ(91,"input",18),t.ALo(92,"translate"),t.YNc(93,le,3,3,"mat-error",8),t.YNc(94,$t,3,3,"mat-error",8),t.qZA()(),t.TgZ(95,"div",5)(96,"mat-form-field",6)(97,"mat-label"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t._UZ(100,"input",19),t.ALo(101,"translate"),t.YNc(102,zt,3,3,"mat-error",8),t.YNc(103,ce,3,3,"mat-error",8),t.qZA()()()()(),t.TgZ(104,"div",20)(105,"div",4),t.YNc(106,ue,4,5,"button",21),t.TgZ(107,"button",22),t.NdJ("click",function(){return i.close()}),t._uU(108),t.ALo(109,"translate"),t.qZA()()()()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,39,"MESSAGE.RegisterMsg")),t.xp6(2),t.Q6J("formGroup",i.registerForm),t.xp6(7),t.Oqu(t.lcZ(11,41,"HTML.USERNAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(13,43,"HTML.USERNAME")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.username.errors?null:i.registerForm.controls.username.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.username.hasError("minlength")),t.xp6(4),t.Oqu(t.lcZ(20,45,"HTML.EMAIL")),t.xp6(2),t.s9C("placeholder",t.lcZ(22,47,"HTML.EMAIL")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.email.errors?null:i.registerForm.controls.email.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.email.hasError("invalidEmail")),t.xp6(5),t.Oqu(t.lcZ(30,49,"HTML.FIRST_NAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(32,51,"HTML.FIRST_NAME")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.first_name.errors?null:i.registerForm.controls.first_name.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.first_name.hasError("minlength")),t.xp6(4),t.Oqu(t.lcZ(39,53,"HTML.LAST_NAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(41,55,"HTML.LAST_NAME")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.last_name.errors?null:i.registerForm.controls.last_name.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.last_name.hasError("minlength")),t.xp6(5),t.hij(" ",t.lcZ(49,57,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(51,59,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.Oqu(t.lcZ(59,61,"HTML.MOBILE")),t.xp6(5),t.Q6J("ngIf",null==i.registerForm.controls.UserMobile.errors?null:i.registerForm.controls.UserMobile.errors.required),t.xp6(5),t.hij(" ",t.lcZ(69,63,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(71,65,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuilding),t.xp6(4),t.hij(" ",t.lcZ(79,67,"HTML.UNIT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(81,69,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnitsForBuilding),t.xp6(5),t.Oqu(t.lcZ(90,71,"HTML.PASSWORD")),t.xp6(2),t.s9C("placeholder",t.lcZ(92,73,"HTML.PASSWORD")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.password.errors?null:i.registerForm.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.password.hasError("minlength")),t.xp6(4),t.Oqu(t.lcZ(99,75,"HTML.ConfirmPassword")),t.xp6(2),t.s9C("placeholder",t.lcZ(101,77,"HTML.ConfirmPassword")),t.xp6(2),t.Q6J("ngIf",null==i.registerForm.controls.confirmPassword.errors?null:i.registerForm.controls.confirmPassword.errors.required),t.xp6(1),t.Q6J("ngIf",i.registerForm.controls.confirmPassword.hasError("mismatchedPasswords")),t.xp6(3),t.Q6J("ngIf",i.can("add_tenant")),t.xp6(2),t.Oqu(t.lcZ(109,79,"BTN.CANCEL")))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.wO,_.sg,_.O5,d.sg,d.u,T.xw,T.Wh,T.yH,K.ey,b.lW,Z.ZT,Z.uh,Z.xY,Z.H8,A.Nt,v.KE,v.hX,v.bx,v.TO,q.gD,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:280px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});class _t{}var at=f(5783),L=f(5726),S=f(5521),nt=f(2887),x=f(4459),ut=f(7298),rt=f(1182),k=f(9132),j=f(7465),dt=f(4165),qt=f(3071),X=f(4333),mt=f(811),G=f(3546),Q=f(7392),tt=f(4850),wt=f(1572),pt=f(266),Ot=f(1419);function de(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-button-toggle",22),t.NdJ("click",function(){t.CHM(i);const r=t.oxw(2);return t.KtG(r.gotoNewTenantFullData())}),t.TgZ(1,"mat-icon"),t._uU(2,"person_add"),t.qZA()()}}function Xt(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"mat-button-toggle-group",10,11),t.YNc(5,de,3,0,"mat-button-toggle",12),t.TgZ(6,"mat-button-toggle",13)(7,"mat-icon"),t._uU(8,"search"),t.qZA()()()(),t.TgZ(9,"form",14)(10,"mat-form-field",15)(11,"input",16),t.NdJ("ngModelChange",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.searchText=r)}),t.ALo(12,"translate"),t.qZA()()(),t.TgZ(13,"div",17)(14,"mat-button-toggle-group",18,19)(16,"mat-button-toggle",20)(17,"mat-icon"),t._uU(18,"view_list"),t.qZA()(),t.TgZ(19,"mat-button-toggle",21)(20,"mat-icon"),t._uU(21,"view_module"),t.qZA()()()()()()}if(2&o){const i=t.MAs(4),n=t.oxw();t.xp6(5),t.Q6J("ngIf",n.can("add_tenant")),t.xp6(4),t.ekj("show","search"==i.value),t.xp6(2),t.s9C("placeholder",t.lcZ(12,5,"HTML.SEARCH_TENANT_AnyValue")),t.Q6J("ngModel",n.searchText)}}const Nt=function(o){return["/contracts/tenant-add/",o]};function st(o,e){if(1&o&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,Nt,i.id))}}function Et(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.removeTenant(r.id,r.Userid))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}const me=function(o){return["/contracts/statements-list/",o]};function ft(o,e){if(1&o&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.Statements")),t.Q6J("routerLink",t.VKq(4,me,i.id))}}const pe=function(o){return["/contracts/contract-list/",o]};function c(o,e){if(1&o&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"auto_stories"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.ContractForTenant")),t.Q6J("routerLink",t.VKq(4,pe,i.id))}}function a(o,e){if(1&o&&(t.TgZ(0,"div",23)(1,"div",24),t._uU(2),t.qZA(),t.TgZ(3,"div",24),t._uU(4),t.qZA(),t.TgZ(5,"div",24),t._uU(6),t.qZA(),t.TgZ(7,"div",24),t._uU(8),t.qZA(),t.TgZ(9,"div",24),t._uU(10),t.qZA(),t.TgZ(11,"div",24),t._uU(12),t.qZA(),t.TgZ(13,"div",24)(14,"mat-icon",25),t._uU(15),t.qZA()(),t.TgZ(16,"div",24)(17,"div",26),t.YNc(18,st,4,6,"a",27),t.YNc(19,Et,4,3,"button",28),t.YNc(20,ft,4,6,"a",27),t.YNc(21,c,4,6,"a",27),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.CUSName),t.xp6(2),t.Oqu(i.CUSMobile),t.xp6(2),t.hij(" ",i.build_Name," "),t.xp6(2),t.hij(" ",i.unit_Name," "),t.xp6(2),t.hij(" ",i.job_Name," "),t.xp6(2),t.hij(" ",i.workplace_Name," "),t.xp6(3),t.Oqu("T"==i.CUSActive?"check_box":"check_box_outline_blank"),t.xp6(3),t.Q6J("ngIf",n.can("change_tenant")||n.can("view_onetenant")||0==n.account.periorty&&"T"!==n.account.userDataConfirmed),t.xp6(1),t.Q6J("ngIf",n.can("delete_tenant")),t.xp6(1),t.Q6J("ngIf",n.can("view_tenantstatements")),t.xp6(1),t.Q6J("ngIf",n.can("view_contractfortenant"))}}function s(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",31)(1,"div",32)(2,"mat-card",33)(3,"pagination-controls",34),t.NdJ("pageChange",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(r))}),t.qZA()()()()}}function u(o,e){1&o&&(t.TgZ(0,"div",35),t._UZ(1,"mat-spinner",36),t.qZA())}const m=function(o,e){return{itemsPerPage:o,currentPage:e}};class h{constructor(e,i,n,r,l,C,y,U,M,F,J){this.transferService=e,this.appSettings=i,this.dialog=n,this.usersService=r,this.router=l,this.global=C,this.localStore=y,this.settingService=U,this.snackBar=M,this.translateService=F,this.userService=J,this.curTenant=new _t,this.curCOMId=N.N.comid,this.account=new at.n,this.count=8,this.defaultCusImage=(new S.P).noImage,this.CusImageToUpload=null,this.userPerm=[],this.editTenantCodeStatus=(new x.$).getEditTenantCodeStatus(),this.editCode=!0,this.settings=this.appSettings.settings}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultCusImage=n.target.result},i.readAsDataURL(this.CusImageToUpload)}ngOnInit(){if(this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.getParamValue(this.curCOMId,this.account.periorty,this.editTenantCodeStatus),this.prepareMsgLanguage(),this.getTenants()}else this.router.navigate(["/sign-in"])}getParamValue(e,i,n){this.settingService.getValueForCode(e,i,n).subscribe(r=>{n==this.editTenantCodeStatus&&(this.editTenantCodeValue=r[0].APAValue)},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getTenants(){this.users=null,this.curUserData.is_superuser?this.usersService.getCustomerPerSelfType(this.curCOMId,this.account.periorty,"P").subscribe(e=>this.users=e):0==this.curUserData.periorty?this.usersService.getCustomerPerUserPerSelfType(this.curCOMId,this.account.periorty,this.curUserData.id,"P").subscribe(e=>this.users=e):("N"==this.securityForApp&&(this.curBranchID=this.curUserData.branch_KeyField??0,this.usersService.getCustomersPerBranchPerSelfType(this.curCOMId,this.account.periorty,this.curBranchID,"P").subscribe(e=>this.users=e)),"D"==this.securityForApp&&this.usersService.getCustomersPerEmployeePerSelfType(this.curCOMId,this.account.periorty,this.curUserData.id,"P").subscribe(e=>this.users=e))}addTenant(e){this.usersService.addOneCustomer(e).subscribe(i=>this.getTenants())}updateTenant(e){this.usersService.editCustomer(e,this.CusImageToUpload,this.CusImageToUpload,this.curUserData.is_employee).subscribe(i=>this.getTenants())}deleteTenant(e){this.dialog.open(nt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.usersService.deleteCustomer(e.id).subscribe(r=>this.getTenants())})}removeTenant(e,i){this.dialog.open(nt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(r=>{r&&this.usersService.deleteCustomer(e).subscribe(l=>{this.userService.deleteOneUser(i).subscribe(C=>{}),this.getTenants()})})}onPageChanged(e){this.page=e,this.getTenants(),window.scrollTo(0,0)}gotoTenantDisplay(e){console.log("===**gotoTenantDisplay**=== "+e),this.router.navigate(["/contracts/tenant-add/"+e])}gotoNewTenantFullData(){this.transferService.setMessage({editTenantCode:this.editTenantCodeValue}),this.router.navigate(["/contracts/tenant-add/"])}gotoNewTenant(){this.dialog.open(gt,{data:{periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(i=>{console.log("=====result.event:: "+i.event),"Cancel"==i.event||"Post"==i.event&&this.userService.registerTenant_with_lastName(i.data).subscribe(n=>{console.log("TenantID:: "+n.id),this.getTenants(),this.snackBar.open(this.registeredMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.can("view_onetenant")&&this.gotoTenantDisplay(n.id)},n=>{console.log("error",n),this.snackBar.open(this.notRegisteredMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})})}openTenantDialog(e){this.dialog.open(gt,{data:e}).afterClosed().subscribe(n=>{n?(console.log("=====if user True:: =============="),console.log(n),this.curTenant=new _t,console.log(this.curTenant),this.fromUserToCustomer(n),console.log(this.curTenant),n.id?this.updateTenant(this.curTenant):this.addTenant(this.curTenant)):console.log("=====if user False:: ==============")})}fromUserToCustomer(e){this.curTenant.id=e.id,this.curTenant.RowDelete=e.settings.isDeleted?1:0,this.curTenant.CUSCode=e.code,this.curTenant.CUSPic=e.image,this.curTenant.CUSGender=e.profile.gender,console.log("====Date===="),console.log(e.profile.birthday),this.curTenant.CUSBirthDate=e.profile.birthday,this.curTenant.CUSMobile=e.mobile,this.curTenant.CUSEmail=e.contacts.email,this.curTenant.CUSActive=e.settings.isActive?"T":"F",this.curTenant.CUSAddress=e.contacts.address,this.curTenant.Country_CTTKeyField=e.contacts.country,this.curTenant.CUSusername=e.username,this.curTenant.CUSFirstName=e.firstname,this.curTenant.CUSLastName=e.lastname}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e}),this.translateService.get("MESSAGE.REGISTERD").subscribe(e=>{this.registeredMsg=e}),this.translateService.get("MESSAGE.NOTREGISTERD").subscribe(e=>{this.notRegisteredMsg=e})}}h.\u0275fac=function(e){return new(e||h)(t.Y36(ut.y),t.Y36(rt.d),t.Y36(Z.uw),t.Y36(L.v),t.Y36(k.F0),t.Y36(j.U),t.Y36(p.C),t.Y36(dt.g),t.Y36(I.ux),t.Y36(w.sK),t.Y36(qt.K))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-customers-list"]],features:[t._Bn([L.v])],decls:44,vars:37,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"text-muted"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){1&e&&(t.YNc(0,Xt,22,7,"div",0),t._UZ(1,"mat-divider"),t.TgZ(2,"mat-card")(3,"div",1)(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",2)(9,"div",3)(10,"div",4)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",4)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",4)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",4)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",4)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",4)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",4)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",4),t.qZA(),t.YNc(39,a,22,11,"div",5),t.ALo(40,"paginate"),t.ALo(41,"TenantSearchPipe"),t.qZA()(),t.YNc(42,s,4,0,"div",6),t.YNc(43,u,2,0,"div",7)),2&e&&(t.Q6J("ngIf",i.account.periorty>0),t.xp6(5),t.hij("",t.lcZ(6,12,"HTML.TENANTS_LIST")," "),t.xp6(7),t.hij(" ",t.lcZ(13,14,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(17,16,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(21,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(25,20,"HTML.UNIT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,22,"HTML.Job")," "),t.xp6(4),t.hij(" ",t.lcZ(33,24,"HTML.WorkPlace")," "),t.xp6(4),t.hij(" ",t.lcZ(37,26,"HTML.ACTIVATED")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(40,28,t.xi3(41,31,i.users,i.searchText),t.WLB(34,m,i.count,i.page))),t.xp6(3),t.Q6J("ngIf",i.users),t.xp6(1),t.Q6J("ngIf",!i.users))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,X.LS,_.sg,_.O5,k.rH,T.xw,T.Wh,T.yH,b.Tq,b.nh,mt.A9,mt.Yi,G.a8,Q.Hw,A.Nt,v.KE,tt.d,wt.Ou,pt.gM,X._s,Ot.DA,w.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});var g=f(8959),O=f(5346);function B(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-button-toggle",21),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.gotoNewContract())}),t.TgZ(1,"mat-icon"),t._uU(2,"note_add"),t.qZA()()}}const P=function(o){return["/contracts/contract-add/",o]};function W(o,e){if(1&o&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,P,i.id))}}function E(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.removeContract(r.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}const Oe=function(o){return["/contracts/installment-list/",o]};function Ne(o,e){if(1&o&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.INSTALLMENT")),t.Q6J("routerLink",t.VKq(4,Oe,i.id))}}const Se=function(o){return["/contracts/contract-add/renew/",o]};function Ie(o,e){if(1&o&&(t.TgZ(0,"a",27),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"autorenew"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.ReNewContract")),t.Q6J("routerLink",t.VKq(4,Se,i.id))}}function De(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.leaveTenant(r,r.customer_Name))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"airport_shuttle"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.LEAVE"))}function Fe(o,e){if(1&o&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t._UZ(3,"br"),t._uU(4),t.qZA(),t.TgZ(5,"div",23),t._uU(6),t.qZA(),t.TgZ(7,"div",23),t._uU(8),t.qZA(),t.TgZ(9,"div",23),t._uU(10),t.qZA(),t.TgZ(11,"div",23),t._uU(12),t.qZA(),t.TgZ(13,"div",23),t._uU(14),t.qZA(),t.TgZ(15,"div",23),t._uU(16),t.qZA(),t.TgZ(17,"div",23)(18,"div",24),t.YNc(19,W,4,6,"a",25),t.YNc(20,E,4,3,"button",26),t.YNc(21,Ne,4,6,"a",25),t.YNc(22,Ie,4,6,"a",25),t.YNc(23,De,4,3,"button",26),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.Tol(n.statusColor[i.RCOContractStatus]),t.xp6(2),t.Oqu(i.build_Name),t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.Oqu(i.unit_UnitNumber),t.xp6(2),t.hij(" ",i.customer_Name," "),t.xp6(2),t.hij(" ",i.customer_Mobile," "),t.xp6(2),t.hij(" ",i.RCOEndDate," "),t.xp6(2),t.AsE(" (",i.RCOCode," / ",i.RCOSubCode,") "),t.xp6(2),t.hij(" ",i.RCOEjarCode," "),t.xp6(3),t.Q6J("ngIf",n.can("view_onecontract")||0==n.account.periorty),t.xp6(1),t.Q6J("ngIf",n.can("delete_rentcontracts")),t.xp6(1),t.Q6J("ngIf",n.can("view_contractinstallments")||0==n.account.periorty),t.xp6(1),t.Q6J("ngIf",n.can("view_renewcontract")&&"N"==i.RCOContractStatus),t.xp6(1),t.Q6J("ngIf",n.can("view_tenantleave"))}}function Le(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",29)(1,"div",30)(2,"mat-card",31)(3,"pagination-controls",32),t.NdJ("pageChange",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(r))}),t.qZA()()()()}}function Me(o,e){1&o&&(t.TgZ(0,"div",33),t._UZ(1,"mat-spinner",34),t.qZA())}const qe=function(o,e){return{itemsPerPage:o,currentPage:e}};class St{constructor(e,i,n,r,l,C,y,U,M,F,J){this.transferService=e,this.dataService=i,this.appSettings=n,this.activatedRoute=r,this.dialog=l,this.contractService=C,this.router=y,this.global=U,this.localStore=M,this.translateService=F,this.snackBar=J,this.statusColor={N:"make-white",R:"make-gold",F:"make-yellowgreen",C:"make-yellow"},this.curCOMId=N.N.comid,this.account=new at.n,this.count=4,this.userPerm=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.contForTenant=this.activatedRoute.params.subscribe(e=>{e.tenantid?(this.idForTenant=+e.tenantid,console.log("params['tenantid']:: "+this.idForTenant)):this.idForTenant=0}),console.log("line 85 this.idForTenant:: "+this.idForTenant),this.prepareMsgLanguage(),this.getContracts()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getAllContracts(this.curCOMId,this.account.periorty).subscribe(e=>this.contractsAll=e):"T"==this.curUserData.is_owner?this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerOwner(this.curCOMId,this.account.periorty,this.curUserData.owner_KeyField).subscribe(e=>this.contractsAll=e):"T"==this.curUserData.is_employee?("N"==this.securityForApp&&(this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerBranch(this.curCOMId,this.account.periorty,this.account.branch_KeyField).subscribe(e=>this.contractsAll=e)),"D"==this.securityForApp&&(this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(e=>this.contractsAll=e):this.contractService.getContractsPerEmp(this.curCOMId,this.account.periorty,this.account.id).subscribe(e=>this.contractsAll=e))):0==this.curUserData.periorty&&(this.curCustomerID=this.account.customer_KeyField??0,this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.curCustomerID).subscribe(e=>this.contractsAll=e))}renewContract(e){console.log("===========renewContract")}leaveTenant(e,i){this.transferService.setMessage({contract_KeyField:e.id,remaining_Installments:e.remaining_Installments,contenddate:e.RCOEndDate,contvalue:e.RCOContractValue,continsurance:e.RCOInsuranceValue,leaveid:e.RCOTenantLeaveID,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,cusName:i}),console.log("----Before info---"),null==e.RCOTenantLeaveID?(console.log("--contractRow.RCOTenantLeaveID == null--"),this.router.navigate(["contracts/tenant-leave/"])):(console.log("---ELSE-----"),this.router.navigate(["contracts/tenant-leave/"+e.RCOTenantLeaveID+"/"]))}removeContract(e){this.dialog.open(nt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.contractService.deleteContract(e).subscribe(r=>this.getContracts())})}contractInstallments(e){}onPageChanged(e){this.page=e,this.getContracts(),window.scrollTo(0,0)}printEInvoice(){this.router.navigate(["/contracts/print-einvoice/"])}gotoNewContract(){this.router.navigate(["/contracts/contract-add/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}St.\u0275fac=function(e){return new(e||St)(t.Y36(ut.y),t.Y36(O.n),t.Y36(rt.d),t.Y36(k.gz),t.Y36(Z.uw),t.Y36(g.W),t.Y36(k.F0),t.Y36(j.U),t.Y36(p.C),t.Y36(w.sK),t.Y36(I.ux))},St.\u0275cmp=t.Xpm({type:St,selectors:[["app-contract-list"]],features:[t._Bn([g.W])],decls:64,vars:43,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",3,"class",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),t.YNc(4,B,3,0,"mat-button-toggle",4),t.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),t._uU(7,"search"),t.qZA()()()(),t.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),t.NdJ("ngModelChange",function(r){return i.searchText=r}),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),t._uU(17,"view_list"),t.qZA()(),t.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),t._uU(20,"view_module"),t.qZA()()()()(),t._UZ(21,"mat-divider"),t.TgZ(22,"mat-card")(23,"div",14)(24,"h2"),t._uU(25),t.ALo(26,"translate"),t.qZA()(),t._UZ(27,"mat-divider"),t.TgZ(28,"div",15)(29,"div",16)(30,"div",17)(31,"h3"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",17)(35,"h3"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",17)(39,"h3"),t._uU(40),t.ALo(41,"translate"),t.qZA()(),t.TgZ(42,"div",17)(43,"h3"),t._uU(44),t.ALo(45,"translate"),t.qZA()(),t.TgZ(46,"div",17)(47,"h3"),t._uU(48),t.ALo(49,"translate"),t.qZA()(),t.TgZ(50,"div",17)(51,"h3"),t._uU(52),t.ALo(53,"translate"),t.qZA()(),t.TgZ(54,"div",17)(55,"h3"),t._uU(56),t.ALo(57,"translate"),t.qZA()(),t._UZ(58,"div",17),t.qZA(),t.YNc(59,Fe,24,16,"div",18),t.ALo(60,"paginate"),t.ALo(61,"ContractSearchPipe"),t.qZA()(),t.YNc(62,Le,4,0,"div",19),t.YNc(63,Me,2,0,"div",20)),2&e){const n=t.MAs(3);t.xp6(4),t.Q6J("ngIf",i.can("add_rentcontracts")),t.xp6(4),t.ekj("show","search"==n.value),t.xp6(2),t.s9C("placeholder",t.lcZ(11,16,"HTML.SEARCH_CONTRACT")),t.Q6J("ngModel",i.searchText),t.xp6(15),t.Oqu(t.lcZ(26,18,"HTML.Contract_List")),t.xp6(7),t.hij(" ",t.lcZ(33,20,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(37,22,"HTML.UnitNumber")," "),t.xp6(4),t.hij(" ",t.lcZ(41,24,"HTML.TENANT")," "),t.xp6(4),t.hij(" ",t.lcZ(45,26,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(49,28,"HTML.ContractEndDate")," "),t.xp6(4),t.hij(" ",t.lcZ(53,30,"HTML.ContractCode")," "),t.xp6(4),t.hij(" ",t.lcZ(57,32,"HTML.ContractEjarCode")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(60,34,t.xi3(61,37,i.contractsAll,i.searchText),t.WLB(40,qe,i.count,i.page))),t.xp6(3),t.Q6J("ngIf",i.contractsAll),t.xp6(1),t.Q6J("ngIf",!i.contractsAll)}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,X.LS,_.sg,_.O5,k.rH,T.xw,T.Wh,T.yH,b.Tq,b.nh,mt.A9,mt.Yi,G.a8,Q.Hw,A.Nt,v.KE,tt.d,wt.Ou,pt.gM,X._s,Ot.JQ,w.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}table{width:100%}.make-gold{background-color:#fbea96}.make-yellow{background-color:#ff4500}.make-yellowgreen{background-color:#ad7020}.make-white{background-color:#fff}\n"],encapsulation:2});var Ee=f(5861);class Re{}var Rt=f(6838),te=f(6709),Y=f(9602),Tt=f(3848),ee=f(1596),vt=f(8796);function Pe(o,e){1&o&&(t.TgZ(0,"h1",82),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"RenewContract")," "))}function ke(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function Be(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function We(o,e){if(1&o&&(t.TgZ(0,"h1",82),t.YNc(1,ke,3,3,"span",46),t.YNc(2,Be,3,3,"span",46),t._uU(3),t.ALo(4,"translate"),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",!i.contractForDisplay.id),t.xp6(1),t.Q6J("ngIf",i.contractForDisplay.id),t.xp6(1),t.hij(" ",t.lcZ(4,3,"HTML.RentContract"),"\n")}}function He(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.OWNName," ")}}function Je(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.OWNName," ")}}function Ke(o,e){if(1&o&&(t.TgZ(0,"ng-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CUSName,"")}}function Ge(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CURName," ")}}function Ye(o,e){if(1&o&&(t.TgZ(0,"a",83)(1,"mat-icon"),t._uU(2,"download"),t.qZA()()),2&o){const i=t.oxw();t.s9C("href",i.fileToUpload,t.LSH)}}function Ve(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"mat-label"),t._uU(2," - "),t.qZA(),t.TgZ(3,"input",84),t.NdJ("change",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.handleFileInput(r.target.files))}),t.qZA(),t.TgZ(4,"button",85),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.callFileInput())}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,1,"HTML.ChoosePDFFile")))}function Qe(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function je(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function $e(o,e){if(1&o&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.UNTUnitNumber," ")}}function ze(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function Xe(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function ti(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",86),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.saveUpdate(r.contractForDisplay.id))}),t.YNc(1,ze,3,3,"span",46),t.YNc(2,Xe,3,3,"span",46),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.contractForDisplay.id),t.xp6(1),t.Q6J("ngIf",i.contractForDisplay.id)}}class Zt{constructor(e,i,n,r,l,C,y,U,M,F,J,et,ot){this.activatedRoute=e,this.codesService=i,this.unitsService=n,this.contractService=r,this.fb=l,this.localStore=C,this.router=y,this.global=U,this.translateService=M,this.atlasService=F,this.settingService=J,this.tenantsService=et,this.snackBar=ot,this.curCOMId=N.N.comid,this.account=new at.n,this.docType_const=(new x.I).OwnershipDocTypes,this.country_const=(new x.I).Countries,this.governorate_const=(new x.I).Governorates,this.city_const=(new x.I).City,this.region_const=(new x.I).Regions,this.buildingFeatures_const=(new x.I).BuildingFeatures,this.passwordHide=!0,this.userPerm=[],this.codeForDefaultOwner=(new x.$).getDefaultOwner(),this.typeOfContractSerial=(new x.$).getTypeOfContractSerial(),this.fileToUpload=null,this.hasPermission_NoOfMonths=!1,this.DocImageToUpload=null,this.defaultDocImage=(new S.P).noImage,this.defaultCusImage=(new S.P).noImage,this.CusImageToUpload=null,this.DocTypes=[],this.parameters=[],this.Countries=[],this.Governorates=[],this.AllBuilding=[],this.AllUnitsForBuilding=[],this.AllRepresentativeForOwner=[],this.AllBranches=[],this.AllOwners=[],this.AllRepresentativeForCustomer=[],this.AllTenants=[]}isBigEnough(e,i,n){return e>=10}callFileInput(){document.getElementById("fileInput").click()}ngOnInit(){if(this.userSUb=this.global.user.subscribe(i=>{this.account=i}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;var e=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==e.is_employee,this.isAdmin=e.is_superuser,this.isOwner="T"==e.is_owner,this.ownerKeyForApp=(new x.$).ownerKeyField,this.form=this.fb.group({id:null,RCOCode:[null,d.kI.required],RCOSubCode:1,RCOEjarCode:null,RCOContractNoOfMonths:[{value:"12",disabled:!this.hasPermission_NoOfMonths},d.kI.required],Related_RCOKeyField:null,contractDate:null,contractStartDate:[null,d.kI.required],contractEndDate:[null,d.kI.required],RCOContractStatus:"N",RCOAlarmStartDate:{value:[""],disabled:!0},RCONoOfDaysForAlarm:[null,d.kI.required],RCONoOfDaysForEjarAlarm:[null,d.kI.required],RCOAlarmCounter:{value:0,disabled:!0},contractUnit:this.fb.group({branch_KeyField:{value:null,disabled:0==this.curUserData.periorty},build_KeyField:{value:null,disabled:0==this.curUserData.periorty},unit_KeyField:{value:null,disabled:0==this.curUserData.periorty}}),contractPerson:this.fb.group({owner_KeyField:null,owner_representative_KeyField:null,customer_KeyField:[null,d.kI.required],customer_work_representative:null,customer_code:null}),contractValues:this.fb.group({RCOContractValue:[null,d.kI.required],RCOPayEveryMonthesNo:[null,d.kI.required],RCOMonthValue:[null,d.kI.required],RCOInsuranceValue:0,RCOSeekingValue:0,RCOMonthlyExpense:0,RCOExpenseDesc:null,RCOOtherValue:0,RCOMonthlyElectricValue:0,RCOElectricCounterReading:null,RCOMonthlyWaterValue:0,RCOWaterCounterReading:null,RCOMonthlyGasValue:0,RCOGasCounterReading:null}),settings:this.fb.group({isActive:null,isDeleted:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),this.isEmployee&&(this.form.controls.RCOEjarCode.setValidators([d.kI.required]),this.form.controls.RCOEjarCode.updateValueAndValidity()),(this.isAdmin||this.isOwner)&&(this.form.controls.RCOEjarCode.clearValidators(),this.form.controls.RCOEjarCode.updateValueAndValidity()),this.prepareMsgLanguage(),this.getParamValue(this.curCOMId,this.account.periorty,1),this.getParamValue(this.curCOMId,this.account.periorty,2),this.getParamValue(this.curCOMId,this.account.periorty,3),this.getParamValue(this.curCOMId,this.account.periorty,this.codeForDefaultOwner),this.getParamValue(this.curCOMId,this.account.periorty,this.typeOfContractSerial),this.getCountries(this.curCOMId,this.account.periorty),this.getAllOwnerss(this.curCOMId,this.account.periorty),this.getOwnershipDocType(this.curCOMId,this.account.periorty),this.getTenants(),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0),this.activatedRoute.data.subscribe(i=>{this.isRenewContract=i.parentID}),this.sub=this.activatedRoute.params.subscribe(i=>{i.id?(this.id=+i.id,console.log("params['id']:: "+this.id),this.getContractById(this.id)):this.contractForDisplay=new Re})}else this.router.navigate(["/sign-in"]);this.checkPermissions_NoOfMonths()}checkPermissions_NoOfMonths(){this.hasPermission_NoOfMonths=this.can("edit_rentalcontract_noofmonths"),this.hasPermission_NoOfMonths?this.form.get("RCOContractNoOfMonths")?.enable():this.form.get("RCOContractNoOfMonths")?.disable()}handleFileInput(e){e&&e.length&&(this.fileToUpload=e.item(0)),document.getElementById("customButton").textContent=e.length>0?e[0].name:this.chooseFile}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onFileChange(e){this.DocImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultDocImage=n.target.result},i.readAsDataURL(this.DocImageToUpload)}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultCusImage=n.target.result},i.readAsDataURL(this.CusImageToUpload)}mapFormvalue_to_ContractClass(){this.form.enable();const e=new _.uU("en-GB").transform(this.form.value.contractDate,"dd/MM/yyyy"),i=new _.uU("en-GB").transform(this.form.value.contractStartDate,"dd/MM/yyyy"),n=new _.uU("en-GB").transform(this.form.value.contractEndDate,"dd/MM/yyyy"),r=new _.uU("en-GB").transform(this.form.value.RCOAlarmStartDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,this.contractForDisplay.id=this.form.value.id,this.contractForDisplay.Related_RCOKeyField=this.form.value.Related_RCOKeyField,this.contractForDisplay.RCOCode=this.form.value.RCOCode,this.contractForDisplay.RCOSubCode=this.form.value.RCOSubCode,this.contractForDisplay.RCOEjarCode=this.form.value.RCOEjarCode,null!=this.form.value.contractDate&&(this.contractForDisplay.RCODate=e),null!=this.form.value.contractStartDate&&(this.contractForDisplay.RCOStartDate=i),null!=this.form.value.contractEndDate&&(this.contractForDisplay.RCOEndDate=n),null!=this.form.value.RCOAlarmStartDate&&(this.contractForDisplay.RCOAlarmStartDate=r),this.contractForDisplay.RCOContractStatus=this.form.value.RCOContractStatus,this.contractForDisplay.RCOAlarmCounter=this.form.value.RCOAlarmCounter,this.contractForDisplay.RCONoOfDaysForAlarm=this.form.value.RCONoOfDaysForAlarm,this.contractForDisplay.RCONoOfDaysForEjarAlarm=this.form.value.RCONoOfDaysForEjarAlarm,this.contractForDisplay.branch_KeyField=this.form.value.contractUnit.branch_KeyField,this.contractForDisplay.build_KeyField=this.form.value.contractUnit.build_KeyField,this.contractForDisplay.unit_KeyField=this.form.value.contractUnit.unit_KeyField,this.contractForDisplay.owner_KeyField=this.form.value.contractPerson.owner_KeyField,this.contractForDisplay.owner_representative_KeyField=this.form.value.contractPerson.owner_representative_KeyField,this.contractForDisplay.customer_KeyField=this.form.value.contractPerson.customer_KeyField,this.contractForDisplay.customer_work_representative=this.form.value.contractPerson.customer_work_representative,this.contractForDisplay.RCOContractValue=this.form.value.contractValues.RCOContractValue,this.contractForDisplay.RCOPayEveryMonthesNo=this.form.value.contractValues.RCOPayEveryMonthesNo,this.contractForDisplay.RCOContractNoOfMonths=this.form.value.RCOContractNoOfMonths,this.contractForDisplay.RCOMonthValue=this.form.value.contractValues.RCOMonthValue,this.contractForDisplay.RCOInsuranceValue=this.form.value.contractValues.RCOInsuranceValue,this.contractForDisplay.RCOSeekingValue=this.form.value.contractValues.RCOSeekingValue,this.contractForDisplay.RCOMonthlyExpense=this.form.value.contractValues.RCOMonthlyExpense,this.contractForDisplay.RCOExpenseDesc=this.form.value.contractValues.RCOExpenseDesc,this.contractForDisplay.RCOOtherValue=this.form.value.contractValues.RCOOtherValue,this.contractForDisplay.RCOMonthlyElectricValue=this.form.value.contractValues.RCOMonthlyElectricValue,this.contractForDisplay.RCOElectricCounterReading=this.form.value.contractValues.RCOElectricCounterReading,this.contractForDisplay.RCOMonthlyWaterValue=this.form.value.contractValues.RCOMonthlyWaterValue,this.contractForDisplay.RCOWaterCounterReading=this.form.value.contractValues.RCOWaterCounterReading,this.contractForDisplay.RCOMonthlyGasValue=this.form.value.contractValues.RCOMonthlyGasValue,this.contractForDisplay.RCOGasCounterReading=this.form.value.contractValues.RCOGasCounterReading,this.contractForDisplay.RCOActive=this.tenActive,this.contractForDisplay.RowDelete=this.tenDeleted}getContractById(e){const i=[];this.contractService.getOneContract(e).subscribe(n=>{"T"!=this.isRenewContract&&this.contractService.getOneContractDocs(this.curCOMId,this.account.periorty,e).subscribe(r=>{for(var l of r)i.push({link:l.RCDPic,preview:l.RCDPic})}),this.fillForm(n,i),this.contractForDisplay=n,"T"==this.isRenewContract&&(this.contractForDisplay.id=null)})}fillForm(e,i){this.is_active="T"==e.RCOActive,null!=e.branch_KeyField&&this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.branch_KeyField),null!=e.build_KeyField&&this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,e.build_KeyField,""),null!=e.owner_KeyField&&this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,e.owner_KeyField),null!=e.customer_KeyField&&this.getRepresentativePerCustomer(this.curCOMId,this.account.periorty,e.customer_KeyField),null!=e.RCODate&&(this.s_rcoDate="T"==this.isRenewContract?new Date:e.RCODate),this.is_delete=1==e.RowDelete,this.fileToUpload=e.RCOPdf,this.form.patchValue("T"!=this.isRenewContract?{id:e.id,Related_RCOKeyField:e.Related_RCOKeyField,RCOPdf:e.RCOPdf,RCOCode:e.RCOCode,RCOSubCode:e.RCOSubCode,RCOEjarCode:e.RCOEjarCode,RCOContractNoOfMonths:e.RCOContractNoOfMonths,contractDate:e.RCODate,contractStartDate:e.RCOStartDate,contractEndDate:e.RCOEndDate,RCOContractStatus:e.RCOContractStatus,RCOAlarmStartDate:e.RCOAlarmStartDate,RCOAlarmCounter:e.RCOAlarmCounter,RCONoOfDaysForAlarm:e.RCONoOfDaysForAlarm,RCONoOfDaysForEjarAlarm:e.RCONoOfDaysForEjarAlarm,contractUnit:{branch_KeyField:e.branch_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField},contractPerson:{owner_KeyField:e.owner_KeyField,owner_representative_KeyField:e.owner_representative_KeyField,customer_KeyField:e.customer_KeyField,customer_work_representative:e.customer_work_representative},contractValues:{RCOContractValue:e.RCOContractValue,RCOPayEveryMonthesNo:e.RCOPayEveryMonthesNo,RCOMonthValue:e.RCOMonthValue,RCOInsuranceValue:e.RCOInsuranceValue,RCOSeekingValue:e.RCOSeekingValue,RCOMonthlyExpense:e.RCOMonthlyExpense,RCOExpenseDesc:e.RCOExpenseDesc,RCOOtherValue:e.RCOOtherValue,RCOMonthlyElectricValue:e.RCOMonthlyElectricValue,RCOElectricCounterReading:e.RCOElectricCounterReading,RCOMonthlyWaterValue:e.RCOMonthlyWaterValue,RCOWaterCounterReading:e.RCOWaterCounterReading,RCOMonthlyGasValue:e.RCOMonthlyGasValue,RCOGasCounterReading:e.RCOGasCounterReading},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}}:{Related_RCOKeyField:e.id,RCOPdf:e.RCOPdf,RCOCode:e.RCOCode,RCOSubCode:+e.RCOSubCode+1,RCOEjarCode:e.RCOEjarCode,RCOContractNoOfMonths:e.RCOContractNoOfMonths,contractDate:new Date,contractStartDate:this.addDays(e.RCOEndDate,1),RCOContractStatus:e.RCOContractStatus,RCOAlarmCounter:0,RCONoOfDaysForAlarm:e.RCONoOfDaysForAlarm,RCONoOfDaysForEjarAlarm:e.RCONoOfDaysForEjarAlarm,contractUnit:{branch_KeyField:e.branch_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField},contractPerson:{owner_KeyField:e.owner_KeyField,owner_representative_KeyField:e.owner_representative_KeyField,customer_KeyField:e.customer_KeyField,customer_work_representative:e.customer_work_representative},contractValues:{RCOContractValue:e.RCOContractValue,RCOPayEveryMonthesNo:e.RCOPayEveryMonthesNo,RCOMonthValue:e.RCOMonthValue,RCOInsuranceValue:e.RCOInsuranceValue,RCOSeekingValue:e.RCOSeekingValue,RCOMonthlyExpense:e.RCOMonthlyExpense,RCOExpenseDesc:e.RCOExpenseDesc,RCOOtherValue:e.RCOOtherValue,RCOMonthlyElectricValue:e.RCOMonthlyElectricValue,RCOElectricCounterReading:e.RCOElectricCounterReading,RCOMonthlyWaterValue:e.RCOMonthlyWaterValue,RCOWaterCounterReading:e.RCOWaterCounterReading,RCOMonthlyGasValue:e.RCOMonthlyGasValue,RCOGasCounterReading:e.RCOGasCounterReading},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}})}handleInstallment(e){var i=this;return(0,Ee.Z)(function*(){console.log("inside handleInstallment-------"),console.log("---res.RCOContractNoOfMonths:: "+e.RCOContractNoOfMonths);let n=+e.RCOContractNoOfMonths/+e.RCOPayEveryMonthesNo;console.log("-----noOfInstallment:: "+n);let r=e.RCOPayEveryMonthesNo,l=e.RCOStartDate,C=e.RCOEndDate,y=e.RCOMonthValue;var U,M,F,J;for(let ct=0;ct<n;ct++){0==ct?(F=new Date(l),console.log("-----111--installmentDate:: "+l),console.log("-----111--tempDate:: "+F),M=F,(U=new Date(M.setMonth(M.getMonth()+r))).setDate(U.getDate()-1),console.log("-----222--tempDate:: "+F),F=new Date(l),console.log("-----333--tempDate:: "+F)):(J=new Date(l),F=new Date(l),F=i.addMonths(J,ct*r),J=new Date(l),ct==n-1?U=C:((U=i.addMonths(J,(ct+1)*r)).setDate(U.getDate()-1),J=new Date(l)));var et=new Date(new _.uU("en-GB").transform(F,"yyyy/MM/dd")),ot=new Date(new _.uU("en-GB").transform(U,"yyyy/MM/dd")),bt="\u0648\u0630\u0644\u0643 \u0639\u0646 \u0625\u064a\u062c\u0627\u0631 \u0627\u0644\u0648\u062d\u062f\u0629 \u0631\u0642\u0645 "+e.unit_UnitNumber+" \u0645\u0646 \u0627\u0644\u0639\u0642\u0627\u0631 "+e.build_Name+" \u0639\u0646 \u0627\u0644\u0641\u062a\u0631\u0629 \u0645\u0646 "+i.formatDate(et)+" \u0625\u0644\u0649 "+i.formatDate(ot);console.log("-----444--noteText:: "+bt);let Vt={contract_KeyField:e.id,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,INSCode:ct+1,INSContractTyps:"I",INSStatus:"N",INSValue:y,INSDueDate:et,INSDueToDate:ot,INSNotes:bt};console.log("---i::"+ct+" --INSDueDate:: "+et+" --INSDueToDate:: "+ot),yield i.insertInstallment(Vt)}})()}insertInstallment(e){this.contractService.addInstallments(e).subscribe(i=>{})}saveUpdate(e){this.mapFormvalue_to_ContractClass(),e?(console.log("==========Edit Contract============"),this.contractService.editContractWithPdf(this.contractForDisplay,this.fileToUpload).subscribe(i=>{let n={contract_KeyField:i.id,TSTArrange:1,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOContractValue,TSTDate:i.RCOStartDate,TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u0627\u0642\u062f \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.ID};this.contractService.deleteStatementForSubjectID(this.curCOMId,this.account.periorty,"RCONTRACT",i.id).subscribe(r=>{this.contractService.addStatement(n).subscribe(l=>{})}),null!=this.DocImageToUpload&&this.contractService.addContractDocs(this.contractForDisplay.id,this.DocImageToUpload).subscribe(r=>{}),this.contractService.updateCustomerUnitFromContract(this.contractForDisplay.customer_KeyField,this.contractForDisplay.build_KeyField,this.contractForDisplay.unit_KeyField,this.contractForDisplay.id).subscribe(r=>{}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(console.log("=====AddContract======"),this.contractService.addContractWithPdf(this.contractForDisplay,this.fileToUpload).subscribe(i=>{this.contractService.addStatement({contract_KeyField:i.id,TSTArrange:1,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOContractValue,TSTDate:i.RCOStartDate,TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u0627\u0642\u062f \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id}).subscribe(l=>{}),null!=this.DocImageToUpload&&this.contractService.addContractDocs(i.id,this.DocImageToUpload).subscribe(l=>{}),this.contractService.updateCustomerUnitFromContract(i.customer_KeyField,i.build_KeyField,i.unit_KeyField,i.id).subscribe(l=>{}),this.unitsService.editOneUnit({id:i.unit_KeyField,customer_KeyField:i.customer_KeyField,UNTHousingStatus:"R"}).subscribe(l=>{}),"T"==this.isRenewContract&&this.contractService.editOneContract({id:this.id,RCOContractStatus:"R"}).subscribe(C=>{}),this.handleInstallment(i),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-add/"+i.id+"/"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])}))}close(){}addDays(e,i){var n=new Date(e);return n.setDate(n.getDate()+i),n}addMonths(e,i){var n=new Date(e);return n.setMonth(n.getMonth()+i),n}addMonths2(e,i){var n=e.getDate();return e.setMonth(e.getMonth()+ +i),e.getDate()!=n&&e.setDate(0),e}compareFunction(e,i){return e.username==i.username&&e.code==i.code}getOwnershipDocType(e,i){this.codesService.getSubForParent(e,i,this.docType_const).subscribe(n=>{this.DocTypes=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0646\u0648\u0627\u0639 \u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0644\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onChangeContractValue(e){const i=this.form.getRawValue();let r=this.form.value.contractValues.RCOPayEveryMonthesNo;0==r&&(r=1);let l=i.RCOContractNoOfMonths;0==l&&(l=12),this.form.patchValue({contractValues:{RCOMonthValue:e.target.value/(l/r)}})}onChangeContractNoOfMonths(e){let i=e.target.value,n=this.form.value.contractValues.RCOPayEveryMonthesNo;0==n&&(n=1);let r=this.form.value.contractValues.RCOContractValue;null==r&&(r=0),this.form.patchValue({contractValues:{RCOMonthValue:r/(i/n)}});let l=this.form.value.contractStartDate;l&&this.onChangeStartDateDoIt(l,i)}onChangePayEvery(e){let n=this.form.getRawValue().RCOContractNoOfMonths;0==n&&(n=12);let l=e.target.value;0==l&&(l=1),this.form.patchValue({contractValues:{RCOMonthValue:this.form.value.contractValues.RCOContractValue/(n/l)}})}onChangeDays(e){if(new _.uU("en-GB").transform(this.form.value.contractEndDate,"dd/MM/yyyy"),null!=this.form.value.contractEndDate){let n=this.form.value.contractEndDate,r=e.target.value;this.paramValueForCode1=r,this.calcAlarmStartDate(n,r)}}onChangeEndDate(e){let i=e.value;console.log("----event.value:: "+e.value),console.log("----event:: "+e),this.onChangeEndDateDoIt(i)}onChangeEndDateDoIt(e){this.calcAlarmStartDate(e,this.paramValueForCode1),this.form.get("contractEndDate").patchValue(e)}onChangeStartDate(e){const i=this.form.getRawValue(),r=new Date(e.value);this.onChangeStartDateDoIt(r,i.RCOContractNoOfMonths)}onChangeStartDateDoIt(e,i){const n=new Date(e);let r=i;n.setMonth(n.getMonth()+ +r),n.setDate(n.getDate()-1),this.onChangeEndDateDoIt(n)}subtractDays(e,i){var n=new Date(e);return n.setDate(n.getDate()-i),n}calcAlarmStartDate(e,i){var n=this.subtractDays(e,i);this.calcDate=new _.uU("en-GB").transform(n,"yyyy-MM-dd"),this.form.patchValue({RCONoOfDaysForAlarm:this.paramValueForCode1,RCONoOfDaysForEjarAlarm:this.paramValueForCode2}),this.form.get("RCOAlarmStartDate").patchValue(this.calcDate)}formatDate(e){const i=new Date(e);let n=""+(i.getMonth()+1),r=""+i.getDate();const l=i.getFullYear();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),[l,n,r].join("-")}searchByCode(e){console.log("---Search event:: "+e),this.tenantsService.getCustomerPerCode(this.curCOMId,this.account.periorty,+e).subscribe(i=>{i.length>0?(console.log("---id:: "+i[0].id),this.form.patchValue({contractPerson:{customer_KeyField:i[0].id}}),this.readCustumer(i[0].id)):(console.log("---Not---"),this.form.patchValue({contractPerson:{customer_KeyField:null}}))},i=>{console.log("----not found tenant----")})}getParamValue(e,i,n){this.settingService.getValueForCode(e,i,n).subscribe(r=>{this.parameters=r,1==n&&(this.paramValueForCode1=r[0].APAValue),2==n&&(this.paramValueForCode2=r[0].APAValue),3==n&&(this.paramValueForCode3=r[0].APAValue),n==this.codeForDefaultOwner&&(this.defaultOwner=r[0].APAValue,this.form.patchValue({contractPerson:{owner_KeyField:+this.defaultOwner}}),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.defaultOwner)),n==this.typeOfContractSerial&&(this.typeOfContSerialValue=r[0].APAValue,"OWNER"!=this.typeOfContSerialValue.toUpperCase()?this.getMaxContractCode(this.curCOMId,this.account.periorty):this.getMaxContractCodePerOwner(this.curCOMId,this.account.periorty,this.defaultOwner??0))},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxContractCode(e,i){this.contractService.getMaxContractCode(e,i).subscribe(n=>{this.maxContractCode=n.max,this.id||this.form.patchValue({RCOCode:this.maxContractCode})})}getMaxContractCodePerOwner(e,i,n){this.contractService.getMaxContractCodeForOwner(e,i,n).subscribe(r=>{this.maxContractCode=r.max,this.id||this.form.patchValue({RCOCode:this.maxContractCode})})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.value)}getBuildingPerBranch(e,i,n){this.AllBuilding=[],this.AllUnitsForBuilding=[],this.unitsService.getBuildingsPerBranch(e,i,n).subscribe(r=>{this.AllBuilding=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(e){this.unitsService.getOneBuilding(e.value).subscribe(i=>{this.curOwnerId=i.owner_KeyField,console.log("====Cur Owner:: "+this.curOwnerId+"  "+i.owner_FullName),this.form.patchValue({contractPerson:{owner_KeyField:this.curOwnerId}}),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.curOwnerId)},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,e.value,"E")}getUnitsPerBuilding(e,i,n,r){this.unitsService.getAllUnitsPerBuilding(e,i,n,r).subscribe(l=>{this.AllUnitsForBuilding=l},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0644\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnit(e){let i=this.form.value.RCOContractNoOfMonths;e.value&&this.unitsService.getOneUnit(e.value).subscribe(n=>{this.form.patchValue({contractValues:{RCOContractValue:n.UNTContractValue,RCOPayEveryMonthesNo:n.UNTPayInstallmentEveryMonths,RCOMonthValue:n.UNTContractValue/(i/n.UNTPayInstallmentEveryMonths),RCOInsuranceValue:n.UNTInsuranceValue,RCOSeekingValue:n.UNTSeekingValue,RCOMonthlyExpense:n.UNTMonthlyExpense,RCOExpenseDesc:n.UNTExpenseDesc,RCOOtherValue:n.UNTOtherValue,RCOMonthlyElectricValue:n.UNTMonthlyElectricityFee,RCOElectricCounterReading:n.UNTLastElectricityReading,RCOMonthlyWaterValue:n.UNTMonthlyWaterFee,RCOWaterCounterReading:n.UNTLastWaterReading,RCOMonthlyGasValue:n.UNTMonthlyGasFee,RCOGasCounterReading:n.UNTLastGasReading}})},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnitById(e){let n=this.form.getRawValue().RCOContractNoOfMonths;e&&this.unitsService.getOneUnit(e).subscribe(r=>{this.form.patchValue({contractValues:{RCOContractValue:r.UNTContractValue,RCOPayEveryMonthesNo:r.UNTPayInstallmentEveryMonths,RCOMonthValue:r.UNTContractValue/(n/r.UNTPayInstallmentEveryMonths),RCOInsuranceValue:r.UNTInsuranceValue,RCOSeekingValue:r.UNTSeekingValue,RCOMonthlyExpense:r.UNTMonthlyExpense,RCOExpenseDesc:r.UNTExpenseDesc,RCOOtherValue:r.UNTOtherValue,RCOMonthlyElectricValue:r.UNTMonthlyElectricityFee,RCOElectricCounterReading:r.UNTLastElectricityReading,RCOMonthlyWaterValue:r.UNTMonthlyWaterFee,RCOWaterCounterReading:r.UNTLastWaterReading,RCOMonthlyGasValue:r.UNTMonthlyGasFee,RCOGasCounterReading:r.UNTLastGasReading}})},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getRepresentativePerOwner(e,i,n){this.contractService.getOwnersPerParent(e,i,n).subscribe(r=>{this.AllRepresentativeForOwner=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0645\u062b\u0644 \u0627\u0644\u0645\u0627\u0644\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readOwner(e){console.log("====Selected readOwner:: "+e.value),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,e.value??0),"OWNER"!=this.typeOfContSerialValue.toUpperCase()||this.getMaxContractCodePerOwner(this.curCOMId,this.account.periorty,e.value??0)}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(e,i,n,r){console.log("----is Emp"),this.atlasService.getBranchPerEmp(e,i,n).subscribe(l=>{this.AllBranches=l,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+r),this.atlasService.getOneBranch(r).subscribe(C=>{this.AllBranches=C},C=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllOwnerss(e,i){this.contractService.getAllOwners(e,i).subscribe(n=>{this.AllOwners=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0644\u0627\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readCustumer(e){console.log("====Selected readCustumer:: "+e),this.tenantsService.getOneCustomer(e).subscribe(i=>{console.log("====Selected branch:: "+i.current_branch),console.log("====Selected building:: "+i.current_building),console.log("====Selected unit:: "+i.current_unit),i.current_unit&&(this.form.patchValue({contractPerson:{customer_code:i.CUSCode},contractUnit:{branch_KeyField:i.current_branch,build_KeyField:i.current_building,unit_KeyField:i.current_unit}}),this.getBuildingPerBranch(this.curCOMId,this.account.periorty,i.current_branch),this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,i.current_building,"E"),this.readUnitById(i.current_unit))},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getRepresentativePerCustomer(this.curCOMId,this.account.periorty,e)}getRepresentativePerCustomer(e,i,n){this.tenantsService.getWorkRelatedWakeelPerCustomers(e,i,n).subscribe(r=>{this.AllRepresentativeForCustomer=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0645\u062b\u0644 \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getTenants(){this.AllTenants=null,this.tenantsService.getCustomersConfirmed(this.curCOMId,this.account.periorty).subscribe(e=>this.AllTenants=e)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("HTML.ChoosePDFFile").subscribe(e=>{this.chooseFile=e})}}Zt.\u0275fac=function(e){return new(e||Zt)(t.Y36(k.gz),t.Y36(Rt.d),t.Y36(V.X),t.Y36(g.W),t.Y36(d.QS),t.Y36(p.C),t.Y36(k.F0),t.Y36(j.U),t.Y36(w.sK),t.Y36(D.Z),t.Y36(dt.g),t.Y36(L.v),t.Y36(I.ux))},Zt.\u0275cmp=t.Xpm({type:Zt,selectors:[["app-contract-dialog"]],decls:320,vars:191,consts:[["mat-dialog-title","",4,"ngIf"],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","26.0",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","RCOCode"],["fxFlex","100","fxFlex.gt-sm","18.8",1,"px-1"],["matInput","","formControlName","RCOSubCode"],["fxFlex","100","fxFlex.gt-sm","20.0",1,"px-1"],["matInput","","formControlName","RCOContractNoOfMonths","required","",3,"change"],["fxFlex","100","fxFlex.gt-sm","35.0",1,"px-1"],["matInput","","formControlName","contractDate",3,"matDatepicker"],["matSuffix","",3,"for"],["contractDate",""],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","contractStartDate",3,"matDatepicker","dateChange"],["contractStartDate",""],["matInput","","formControlName","contractEndDate",3,"matDatepicker","dateChange"],["contractEndDate",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","RCOContractStatus","id","contStatusOpSel",3,"placeholder"],[3,"value"],["matInput","","formControlName","RCOEjarCode"],["matInput","","type","date","formControlName","RCOAlarmStartDate",1,"form-control"],["matInput","","formControlName","RCONoOfDaysForAlarm","required","",3,"change"],["matInput","","formControlName","RCONoOfDaysForEjarAlarm","required",""],["matInput","","formControlName","RCOAlarmCounter"],["formGroupName","contractPerson",3,"label"],["fxFlex","100","fxFlex.gt-sm","59.8",1,"px-1"],["formControlName","owner_KeyField","id","oneOwnerOpSel",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","39.8",1,"px-1"],["formControlName","owner_representative_KeyField","id","oneOwnerRepresOpSel",3,"placeholder"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["matInput","","formControlName","customer_code",3,"keyup.enter"],["tenCode",""],["appearance","outline","formControlName","customer_KeyField","id","oneCustomOpSel",1,"w-100",3,"placeholder","change"],["fxFlex","100","fxFlex.gt-sm","29.8",1,"px-1"],["formControlName","customer_work_representative","id","CustomRepsOpSel",3,"placeholder"],["fxLayout","row"],["target","_blank",3,"href",4,"ngIf"],[4,"ngIf"],["formGroupName","contractUnit",3,"label"],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],["formControlName","build_KeyField","id","buildOneOpSel",3,"placeholder","selectionChange"],["formControlName","unit_KeyField","id","unitOneOpSel",3,"placeholder","selectionChange"],["formGroupName","contractValues",3,"label"],["matInput","","formControlName","RCOContractValue","required","",3,"change"],["matInput","","formControlName","RCOPayEveryMonthesNo","required","",3,"change"],["matInput","","formControlName","RCOMonthValue","required",""],["fxFlex","100","fxFlex.gt-sm","24.9",1,"px-1"],["matInput","","formControlName","RCOInsuranceValue"],["matInput","","formControlName","RCOSeekingValue"],["matInput","","formControlName","RCOMonthlyExpense"],["matInput","","formControlName","RCOOtherValue"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","RCOExpenseDesc"],["matInput","","formControlName","RCOMonthlyElectricValue"],["matInput","","formControlName","RCOElectricCounterReading"],["matInput","","formControlName","RCOMonthlyWaterValue"],["matInput","","formControlName","RCOWaterCounterReading"],["matInput","","formControlName","RCOMonthlyGasValue"],["matInput","","formControlName","RCOGasCounterReading"],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-dialog-title",""],["target","_blank",3,"href"],["formControlName","RCOPdf","type","file","accept",".pdf","id","fileInput",1,"file-input",3,"change"],["id","customButton",1,"custom-button",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e){const n=t.EpF();t.YNc(0,Pe,3,3,"h1",0),t.YNc(1,We,5,5,"h1",0),t.TgZ(2,"form",1)(3,"mat-tab-group",2)(4,"mat-tab",3),t.ALo(5,"translate"),t.TgZ(6,"div",4)(7,"div",5),t._UZ(8,"mat-label"),t.TgZ(9,"div",6)(10,"div",7)(11,"mat-form-field",8)(12,"mat-label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"input",9),t.qZA()(),t.TgZ(16,"div",10)(17,"mat-form-field",8)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",11),t.qZA()(),t.TgZ(22,"div",12)(23,"mat-form-field",8)(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"input",13),t.NdJ("change",function(l){return i.onChangeContractNoOfMonths(l)}),t.qZA()()(),t.TgZ(28,"div",14)(29,"mat-form-field",8)(30,"mat-label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"input",15)(34,"mat-datepicker-toggle",16)(35,"mat-datepicker",null,17),t.qZA()()()(),t.TgZ(37,"div",6)(38,"div",18)(39,"mat-form-field",8)(40,"mat-label"),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"input",19),t.NdJ("dateChange",function(l){return i.onChangeStartDate(l)}),t.qZA(),t._UZ(44,"mat-datepicker-toggle",16)(45,"mat-datepicker",null,20),t.qZA()(),t.TgZ(47,"div",18)(48,"mat-form-field",8)(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"input",21),t.NdJ("dateChange",function(l){return i.onChangeEndDate(l)}),t.qZA(),t._UZ(53,"mat-datepicker-toggle",16)(54,"mat-datepicker",null,22),t.qZA()()(),t.TgZ(56,"div",6)(57,"div",23)(58,"mat-form-field",8)(59,"mat-label"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"mat-select",24),t.ALo(63,"translate"),t.TgZ(64,"mat-option",25),t._uU(65,"-"),t.qZA(),t.TgZ(66,"mat-option",25),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"mat-option",25),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"mat-option",25),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"mat-option",25),t._uU(76),t.ALo(77,"translate"),t.qZA()()()(),t.TgZ(78,"div",23)(79,"mat-form-field",8)(80,"mat-label"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t._UZ(83,"input",26),t.qZA()(),t.TgZ(84,"div",23)(85,"mat-form-field",8)(86,"mat-label"),t._uU(87),t.ALo(88,"translate"),t.qZA(),t._UZ(89,"input",27),t.qZA()()(),t.TgZ(90,"div",6)(91,"div",23)(92,"mat-form-field",8)(93,"mat-label"),t._uU(94),t.ALo(95,"translate"),t.qZA(),t.TgZ(96,"input",28),t.NdJ("change",function(l){return i.onChangeDays(l)}),t.qZA()()(),t.TgZ(97,"div",23)(98,"mat-form-field",8)(99,"mat-label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t._UZ(102,"input",29),t.qZA()(),t.TgZ(103,"div",23)(104,"mat-form-field",8)(105,"mat-label"),t._uU(106),t.ALo(107,"translate"),t.qZA(),t._UZ(108,"input",30),t.qZA()()()()(),t.TgZ(109,"mat-tab",31),t.ALo(110,"translate"),t.TgZ(111,"div",4)(112,"div",5),t._UZ(113,"mat-label"),t.TgZ(114,"div",6)(115,"div",32)(116,"mat-form-field",8)(117,"mat-label"),t._uU(118),t.ALo(119,"translate"),t.qZA(),t.TgZ(120,"mat-select",33),t.NdJ("selectionChange",function(l){return i.readOwner(l)}),t.ALo(121,"translate"),t.TgZ(122,"mat-option",25),t._uU(123,"-"),t.qZA(),t.YNc(124,He,2,2,"mat-option",34),t.qZA()()(),t.TgZ(125,"div",35)(126,"mat-form-field",8)(127,"mat-label"),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.TgZ(130,"mat-select",36),t.ALo(131,"translate"),t.TgZ(132,"mat-option",25),t._uU(133,"-"),t.qZA(),t.YNc(134,Je,2,2,"mat-option",34),t.qZA()()()(),t.TgZ(135,"div",37)(136,"div",38)(137,"mat-form-field",8)(138,"mat-label"),t._uU(139),t.ALo(140,"translate"),t.qZA(),t.TgZ(141,"input",39,40),t.NdJ("keyup.enter",function(){t.CHM(n);const l=t.MAs(142);return t.KtG(i.searchByCode(l.value))}),t.qZA()()(),t.TgZ(143,"div",18)(144,"label"),t._uU(145),t.ALo(146,"translate"),t.qZA(),t.TgZ(147,"ng-select",41),t.NdJ("change",function(l){return i.readCustumer(l)}),t.ALo(148,"translate"),t.YNc(149,Ke,2,2,"ng-option",34),t.qZA()(),t.TgZ(150,"div",42)(151,"mat-form-field",8)(152,"mat-label"),t._uU(153),t.ALo(154,"translate"),t.qZA(),t.TgZ(155,"mat-select",43),t.ALo(156,"translate"),t.TgZ(157,"mat-option",25),t._uU(158,"-"),t.qZA(),t.YNc(159,Ge,2,2,"mat-option",34),t.qZA()()()()()(),t.TgZ(160,"div",44),t.YNc(161,Ye,3,1,"a",45),t.YNc(162,Ve,7,3,"div",46),t.qZA()(),t.TgZ(163,"mat-tab",47),t.ALo(164,"translate"),t.TgZ(165,"div",4)(166,"div",5),t._UZ(167,"mat-label"),t.TgZ(168,"div",6)(169,"div",48)(170,"mat-form-field",8)(171,"mat-label"),t._uU(172),t.ALo(173,"translate"),t.qZA(),t.TgZ(174,"mat-select",49),t.NdJ("selectionChange",function(l){return i.getBuildings(l)}),t.ALo(175,"translate"),t.TgZ(176,"mat-option",25),t._uU(177,"-"),t.qZA(),t.YNc(178,Qe,2,2,"mat-option",34),t.qZA()()()(),t.TgZ(179,"div",6)(180,"div",18)(181,"mat-form-field",8)(182,"mat-label"),t._uU(183),t.ALo(184,"translate"),t.qZA(),t.TgZ(185,"mat-select",50),t.NdJ("selectionChange",function(l){return i.readBuilding(l)}),t.ALo(186,"translate"),t.TgZ(187,"mat-option",25),t._uU(188,"-"),t.qZA(),t.YNc(189,je,2,2,"mat-option",34),t.qZA()()(),t.TgZ(190,"div",18)(191,"mat-form-field",8)(192,"mat-label"),t._uU(193),t.ALo(194,"translate"),t.qZA(),t.TgZ(195,"mat-select",51),t.NdJ("selectionChange",function(l){return i.readUnit(l)}),t.ALo(196,"translate"),t.TgZ(197,"mat-option",25),t._uU(198,"-"),t.qZA(),t.YNc(199,$e,2,2,"mat-option",34),t.qZA()()()()()()(),t.TgZ(200,"mat-tab",52),t.ALo(201,"translate"),t.TgZ(202,"div",4)(203,"div",5),t._UZ(204,"mat-label"),t.TgZ(205,"div",6)(206,"div",23)(207,"mat-form-field",8)(208,"mat-label"),t._uU(209),t.ALo(210,"translate"),t.qZA(),t.TgZ(211,"input",53),t.NdJ("change",function(l){return i.onChangeContractValue(l)}),t.qZA()()(),t.TgZ(212,"div",23)(213,"mat-form-field",8)(214,"mat-label"),t._uU(215),t.ALo(216,"translate"),t.qZA(),t.TgZ(217,"input",54),t.NdJ("change",function(l){return i.onChangePayEvery(l)}),t.qZA()()(),t.TgZ(218,"div",23)(219,"mat-form-field",8)(220,"mat-label"),t._uU(221),t.ALo(222,"translate"),t.qZA(),t._UZ(223,"input",55),t.qZA()()()(),t.TgZ(224,"div",6)(225,"div",56)(226,"mat-form-field",8)(227,"mat-label"),t._uU(228),t.ALo(229,"translate"),t.qZA(),t._UZ(230,"input",57),t.qZA()(),t.TgZ(231,"div",56)(232,"mat-form-field",8)(233,"mat-label"),t._uU(234),t.ALo(235,"translate"),t.qZA(),t._UZ(236,"input",58),t.qZA()(),t.TgZ(237,"div",56)(238,"mat-form-field",8)(239,"mat-label"),t._uU(240),t.ALo(241,"translate"),t.qZA(),t._UZ(242,"input",59),t.qZA()(),t.TgZ(243,"div",56)(244,"mat-form-field",8)(245,"mat-label"),t._uU(246),t.ALo(247,"translate"),t.qZA(),t._UZ(248,"input",60),t.qZA()()(),t.TgZ(249,"div",6)(250,"div",61)(251,"mat-form-field",8)(252,"mat-label"),t._uU(253),t.ALo(254,"translate"),t.qZA(),t._UZ(255,"input",62),t.qZA()()(),t.TgZ(256,"div",6)(257,"div",18)(258,"mat-form-field",8)(259,"mat-label"),t._uU(260),t.ALo(261,"translate"),t.qZA(),t._UZ(262,"input",63),t.qZA()(),t.TgZ(263,"div",18)(264,"mat-form-field",8)(265,"mat-label"),t._uU(266),t.ALo(267,"translate"),t.qZA(),t._UZ(268,"input",64),t.qZA()()(),t.TgZ(269,"div",6)(270,"div",18)(271,"mat-form-field",8)(272,"mat-label"),t._uU(273),t.ALo(274,"translate"),t.qZA(),t._UZ(275,"input",65),t.qZA()(),t.TgZ(276,"div",18)(277,"mat-form-field",8)(278,"mat-label"),t._uU(279),t.ALo(280,"translate"),t.qZA(),t._UZ(281,"input",66),t.qZA()()(),t.TgZ(282,"div",6)(283,"div",18)(284,"mat-form-field",8)(285,"mat-label"),t._uU(286),t.ALo(287,"translate"),t.qZA(),t._UZ(288,"input",67),t.qZA()(),t.TgZ(289,"div",18)(290,"mat-form-field",8)(291,"mat-label"),t._uU(292),t.ALo(293,"translate"),t.qZA(),t._UZ(294,"input",68),t.qZA()()()()(),t.TgZ(295,"mat-tab",69),t.ALo(296,"translate"),t.TgZ(297,"div",4)(298,"mat-checkbox",70),t._uU(299),t.ALo(300,"translate"),t.qZA(),t.TgZ(301,"mat-checkbox",71),t._uU(302),t.ALo(303,"translate"),t.qZA()()(),t.TgZ(304,"mat-tab",72),t.ALo(305,"translate"),t.TgZ(306,"div",73)(307,"div",74),t._UZ(308,"img",75),t.TgZ(309,"input",76,77),t.NdJ("change",function(l){return i.onFileChange(l.target.files)}),t.qZA(),t.TgZ(311,"button",78),t.NdJ("click",function(){t.CHM(n);const l=t.MAs(310);return t.KtG(l.click())}),t._uU(312),t.ALo(313,"translate"),t.qZA()(),t._UZ(314,"mat-divider")(315,"input-file",79),t.qZA()()()(),t._UZ(316,"br"),t.TgZ(317,"div",80)(318,"div",6),t.YNc(319,ti,3,4,"button",81),t.qZA()()}if(2&e){const n=t.MAs(36),r=t.MAs(46),l=t.MAs(55);t.Q6J("ngIf","T"==i.isRenewContract),t.xp6(1),t.Q6J("ngIf","T"!=i.isRenewContract),t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(5,81,"HTML.TAB_BASIC")),t.xp6(9),t.hij(" ",t.lcZ(14,83,"HTML.CODE_Contract"),""),t.xp6(6),t.hij(" ",t.lcZ(20,85,"HTML.SUBCODE"),""),t.xp6(6),t.Oqu(t.lcZ(26,87,"HTML.ContractNoOfMonths")),t.xp6(6),t.Oqu(t.lcZ(32,89,"HTML.ContractDate")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(7),t.Oqu(t.lcZ(42,91,"HTML.ContractStartDate")),t.xp6(2),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(6),t.Oqu(t.lcZ(51,93,"HTML.ContractEndDate")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(7),t.Oqu(t.lcZ(61,95,"HTML.ContractStatus")),t.xp6(2),t.s9C("placeholder",t.lcZ(63,97,"HTML.ContractStatus")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(68,99,"OPTIONS.NEW")),t.xp6(2),t.Q6J("value","R"),t.xp6(1),t.Oqu(t.lcZ(71,101,"OPTIONS.ReNew")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(74,103,"OPTIONS.Canceld")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(77,105,"OPTIONS.Finished")),t.xp6(5),t.Oqu(t.lcZ(82,107,"HTML.ContractEjarCode")),t.xp6(6),t.Oqu(t.lcZ(88,109,"HTML.ContractAlarmStartDate")),t.xp6(7),t.hij(" ",t.lcZ(95,111,"HTML.ContractNoOfDaysForAlarm"),""),t.xp6(6),t.hij(" ",t.lcZ(101,113,"HTML.ContractNoOfDaysForEjarAlarm"),""),t.xp6(6),t.hij(" ",t.lcZ(107,115,"HTML.ContractAlarmCounter"),""),t.xp6(3),t.s9C("label",t.lcZ(110,117,"HTML.TAB_ContractPersons")),t.xp6(9),t.hij(" ",t.lcZ(119,119,"HTML.OWNER"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(121,121,"HTML.OWNER")),t.xp6(4),t.Q6J("ngForOf",i.AllOwners),t.xp6(4),t.hij(" ",t.lcZ(129,123,"HTML.OwnerRepresentative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(131,125,"HTML.OwnerRepresentative")),t.xp6(4),t.Q6J("ngForOf",i.AllRepresentativeForOwner),t.xp6(5),t.Oqu(t.lcZ(140,127,"HTML.CODE_TENANT")),t.xp6(6),t.hij(" ",t.lcZ(146,129,"HTML.TENANT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(148,131,"HTML.TENANT")),t.xp6(2),t.Q6J("ngForOf",i.AllTenants),t.xp6(4),t.hij(" ",t.lcZ(154,133,"HTML.TenantRepresentative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(156,135,"HTML.TenantRepresentative")),t.xp6(4),t.Q6J("ngForOf",i.AllRepresentativeForCustomer),t.xp6(2),t.Q6J("ngIf",i.contractForDisplay.id&&i.fileToUpload&&i.can("view_ejar_pdf")),t.xp6(1),t.Q6J("ngIf",i.can("add_ejar_pdf")),t.xp6(1),t.s9C("label",t.lcZ(164,137,"HTML.TAB_ContractUnit")),t.xp6(9),t.hij(" ",t.lcZ(173,139,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(175,141,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(5),t.hij(" ",t.lcZ(184,143,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(186,145,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuilding),t.xp6(4),t.hij(" ",t.lcZ(194,147,"HTML.UNIT"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(196,149,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnitsForBuilding),t.xp6(1),t.s9C("label",t.lcZ(201,151,"HTML.TAB_ContractValues")),t.xp6(9),t.Oqu(t.lcZ(210,153,"HTML.ContractValue")),t.xp6(6),t.Oqu(t.lcZ(216,155,"HTML.PayEveryMonthesNo")),t.xp6(6),t.Oqu(t.lcZ(222,157,"HTML.InstallmentValue")),t.xp6(7),t.Oqu(t.lcZ(229,159,"HTML.InsuranceValue")),t.xp6(6),t.Oqu(t.lcZ(235,161,"HTML.SeekingValue")),t.xp6(6),t.Oqu(t.lcZ(241,163,"HTML.MonthlyExpense")),t.xp6(6),t.Oqu(t.lcZ(247,165,"HTML.OtherValue")),t.xp6(7),t.Oqu(t.lcZ(254,167,"HTML.ExpenseDesc")),t.xp6(7),t.Oqu(t.lcZ(261,169,"HTML.MonthlyElectricValue")),t.xp6(6),t.Oqu(t.lcZ(267,171,"HTML.ElectricCounterReading")),t.xp6(7),t.Oqu(t.lcZ(274,173,"HTML.MonthlyWaterValue")),t.xp6(6),t.Oqu(t.lcZ(280,175,"HTML.WaterCounterReading")),t.xp6(7),t.Oqu(t.lcZ(287,177,"HTML.MonthlyGasValue")),t.xp6(6),t.Oqu(t.lcZ(293,179,"HTML.GasCounterReading")),t.xp6(3),t.s9C("label",t.lcZ(296,181,"HTML.TAB_SETTINGS")),t.xp6(4),t.Oqu(t.lcZ(300,183,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(303,185,"HTML.BLOCKED")),t.xp6(2),t.s9C("label",t.lcZ(305,187,"HTML.TAB_DOCS")),t.xp6(4),t.Q6J("src",i.defaultDocImage,t.LSH),t.xp6(4),t.Oqu(t.lcZ(313,189,"HTML.AddPic")),t.xp6(7),t.Q6J("ngIf",i.contractForDisplay.id&&i.can("change_rentcontracts")||!i.contractForDisplay.id&&i.can("add_rentcontracts"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,_.sg,_.O5,d.sg,d.u,d.x0,T.xw,T.SQ,T.Wh,T.yH,K.ey,b.lW,te.oG,Y.Mq,Y.hl,Y.nW,Z.ZT,Z.uh,Z.H8,Q.Hw,A.Nt,v.KE,v.hX,v.R9,tt.d,q.gD,Tt.uX,Tt.SP,ee.tW,vt.w9,vt.jq,w.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.file-input{display:none}.custom-button{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px}.custom-button:hover{background-color:#0056b3}\n"],encapsulation:2});var Ce=f(529),At=f(1948),ei=f(8865),ii=f(9045),Te=f(7948);class be{}var ve=f(900);function ni(o,e){if(1&o&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.value),t.xp6(1),t.hij(" ",i.name," ")}}function oi(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function ai(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.remove(r.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function ri(o,e){if(1&o&&(t.TgZ(0,"div",26)(1,"div",27),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t._uU(4),t.qZA(),t.TgZ(5,"div",27),t._uU(6),t.qZA(),t.TgZ(7,"div",27),t._uU(8),t.qZA(),t.TgZ(9,"div",27),t._uU(10),t.qZA(),t.TgZ(11,"div",27)(12,"div",28),t.YNc(13,ai,4,3,"button",29),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.CURRelationTypeDisplay),t.xp6(2),t.Oqu(i.CURName),t.xp6(2),t.hij("",i.CURMobile," "),t.xp6(2),t.hij("",i.CURNationalID," "),t.xp6(2),t.hij("",i.CURBirthDate," "),t.xp6(3),t.Q6J("ngIf",n.can("delete_tenantrelative"))}}class It{constructor(e,i,n,r,l,C,y,U,M,F){this.dialogRef=e,this.dataInjected=i,this.atlasService=n,this._CustomerService=r,this.translateService=l,this.localStore=C,this.appService=y,this.dialog=U,this.snackBar=M,this.fb=F,this.passwordHide=!0,this.relatives=[],this.curCOMId=N.N.comid,this.userPerm=[]}ngOnInit(){this.relatives=this.appService.getRelative(),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({customer_KeyField:[null,d.kI.required],CURRelationType:[null,d.kI.required],CURName:[null,d.kI.required],CURMobile:null,CURPic:null,nationalID:null,birthday:null,CURWorkNature:null,CURNotes:null}),console.log(this.dataInjected.custId),this.dataForm.patchValue({customer_KeyField:this.dataInjected.custId}),this.oneRelated=new be,this.curPeriority=this.dataInjected.periorty,this.action="Patch",this.getTenantRelated(),this.prepareMsgLanguage()}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getTenantRelated(){this.cusRelated=null,this._CustomerService.getRelatedPerCustomers(this.curCOMId,this.curPeriority,this.dataInjected.custId).subscribe(e=>this.cusRelated=e)}mapFormValue_toTable(){const e=new _.uU("en-GB").transform(this.dataForm.value.birthday,"dd/MM/yyyy");null!=this.dataForm.value.birthday&&(this.oneRelated.CURBirthDate=e),this.oneRelated.customer_KeyField=this.dataInjected.custId,this.oneRelated.CURRelationType=this.dataForm.value.CURRelationType,this.oneRelated.CURName=this.dataForm.value.CURName,this.oneRelated.CURMobile=this.dataForm.value.CURMobile,this.oneRelated.CURNationalID=this.dataForm.value.nationalID,this.oneRelated.CURWorkNature=this.dataForm.value.CURWorkNature,this.oneRelated.CURNotes=this.dataForm.value.CURNotes}onSave(){this.mapFormValue_toTable(),this._CustomerService.addRelatedForTenant(this.oneRelated).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(e){this.dialog.open(nt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this._CustomerService.deleteRelativeForTenant(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}It.\u0275fac=function(e){return new(e||It)(t.Y36(Z.so),t.Y36(Z.WI),t.Y36(D.Z),t.Y36(L.v),t.Y36(w.sK),t.Y36(p.C),t.Y36(ve.z),t.Y36(Z.uw),t.Y36(I.ux),t.Y36(d.QS))},It.\u0275cmp=t.Xpm({type:It,selectors:[["app-cus-related-dialog"]],decls:78,vars:45,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","CURRelationType","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","CURName"],["matInput","","formControlName","CURMobile"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","nationalID"],["matInput","","formControlName","birthday",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],[3,"value"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",6),t.ALo(10,"translate"),t.YNc(11,ni,2,2,"mat-option",7),t.qZA()()(),t.TgZ(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",8),t.qZA()(),t.TgZ(18,"div",4)(19,"mat-form-field",5)(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"input",9),t.qZA()()(),t.TgZ(24,"div",3)(25,"div",10)(26,"mat-form-field",5)(27,"mat-label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",11),t.qZA()(),t.TgZ(31,"div",10)(32,"mat-form-field",5)(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",12)(37,"mat-datepicker-toggle",13)(38,"mat-datepicker",null,14),t.qZA()()()()(),t.TgZ(40,"div",15)(41,"div",3),t.YNc(42,oi,4,4,"button",16),t.TgZ(43,"button",17),t.NdJ("click",function(){return i.close()}),t._uU(44),t.ALo(45,"translate"),t.qZA()()(),t._UZ(46,"mat-divider"),t.TgZ(47,"div",18)(48,"mat-card")(49,"div",19)(50,"h2"),t._uU(51),t.ALo(52,"translate"),t.qZA()(),t._UZ(53,"mat-divider"),t.TgZ(54,"div",20)(55,"div",21)(56,"div",22)(57,"h2"),t._uU(58),t.ALo(59,"translate"),t.qZA()(),t.TgZ(60,"div",22)(61,"h2"),t._uU(62),t.ALo(63,"translate"),t.qZA()(),t.TgZ(64,"div",22)(65,"h2"),t._uU(66),t.ALo(67,"translate"),t.qZA()(),t.TgZ(68,"div",22)(69,"h2"),t._uU(70),t.ALo(71,"translate"),t.qZA()(),t.TgZ(72,"div",22)(73,"h2"),t._uU(74),t.ALo(75,"translate"),t.qZA()(),t._UZ(76,"div",22),t.qZA(),t.YNc(77,ri,14,6,"div",23),t.qZA()()()()),2&e){const n=t.MAs(39);t.Q6J("formGroup",i.dataForm),t.xp6(7),t.hij(" ",t.lcZ(8,19,"HTML.Relative"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(10,21,"HTML.Relative")),t.xp6(2),t.Q6J("ngForOf",i.relatives),t.xp6(4),t.Oqu(t.lcZ(16,23,"FIELD.NAME")),t.xp6(6),t.Oqu(t.lcZ(22,25,"HTML.MOBILE")),t.xp6(7),t.Oqu(t.lcZ(29,27,"HTML.IDNUMBER")),t.xp6(6),t.Oqu(t.lcZ(35,29,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(5),t.Q6J("ngIf",i.can("add_tenantrelative")||0==i.curPeriority),t.xp6(2),t.Oqu(t.lcZ(45,31,"BTN.CANCEL")),t.xp6(7),t.Oqu(t.lcZ(52,33,"HTML.Relative")),t.xp6(7),t.hij(" ",t.lcZ(59,35,"HTML.Relative")," "),t.xp6(4),t.hij(" ",t.lcZ(63,37,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(67,39,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(71,41,"HTML.IDNUMBER")," "),t.xp6(4),t.hij(" ",t.lcZ(75,43,"HTML.BIRTH_DATE")," "),t.xp6(3),t.Q6J("ngForOf",i.cusRelated)}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,_.sg,_.O5,d.sg,d.u,T.xw,T.Wh,T.yH,K.ey,b.lW,b.nh,G.a8,Y.Mq,Y.hl,Y.nW,Z.xY,Z.H8,Q.Hw,A.Nt,v.KE,v.hX,v.R9,tt.d,q.gD,pt.gM,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});var he=f(6331),Pt=f(1481);function si(o,e){if(1&o&&(t.TgZ(0,"div")(1,"a",29)(2,"mat-icon"),t._uU(3,"download"),t.qZA()()()),2&o){const i=t.oxw(2);t.xp6(1),t.s9C("href",i.registerFileToUpload,t.LSH)}}function li(o,e){if(1&o&&(t.ynx(0),t._UZ(1,"img",32),t.BQk()),2&o){const i=t.oxw(3);t.xp6(1),t.Q6J("src",i.registerFileUrl,t.LSH)}}function ci(o,e){if(1&o&&t._UZ(0,"iframe",33),2&o){const i=t.oxw(3);t.Q6J("src",i.sanitizedFileUrl,t.uOi)}}function ui(o,e){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,li,2,1,"ng-container",30),t.YNc(2,ci,1,1,"ng-template",null,31,t.W1O),t.qZA()),2&o){const i=t.MAs(3),n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.isWekalaImage)("ngIfElse",i)}}function di(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",24),t.YNc(1,si,4,1,"div",25),t.TgZ(2,"div",26)(3,"input",27),t.NdJ("change",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.onRegisterFileSelected(r.target.files,r))}),t.qZA(),t.TgZ(4,"button",28),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.callOnRegisterFileSelect())}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.YNc(7,ui,4,2,"div",25),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.currentRelativeID&&i.registerFileToUpload),t.xp6(4),t.hij(" ",t.lcZ(6,3,"HTML.ChooseWekalaFile"),""),t.xp6(2),t.Q6J("ngIf",i.registerFileUrl)}}function mi(o,e){1&o&&(t.TgZ(0,"div",34)(1,"mat-form-field",6)(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",35),t.qZA()()),2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"HTML.IDNUMBER")))}function pi(o,e){1&o&&(t.TgZ(0,"div",34)(1,"mat-form-field",6)(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",36),t.qZA()()),2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"HTML.WorkNature")))}function hi(o,e){1&o&&(t.TgZ(0,"div",4)(1,"div",37)(2,"mat-form-field",6)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"input",38),t.qZA()(),t.TgZ(7,"div",8)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",39),t.qZA()()()),2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,2,"HTML.ADDRESS")),t.xp6(6),t.Oqu(t.lcZ(11,4,"HTML.ShortAddress")))}function gi(o,e){if(1&o&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function _i(o,e){if(1&o&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function fi(o,e){if(1&o&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Ci(o,e){if(1&o&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Ti(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"mat-form-field",6)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-select",40),t.NdJ("selectionChange",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.getGovernorate(r))}),t.ALo(7,"translate"),t.TgZ(8,"mat-option",41),t._uU(9,"-"),t.qZA(),t.YNc(10,gi,2,2,"mat-option",42),t.qZA()()(),t.TgZ(11,"div",5)(12,"mat-form-field",6)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"mat-select",43),t.NdJ("selectionChange",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.getCity(r))}),t.ALo(17,"translate"),t.TgZ(18,"mat-option",41),t._uU(19,"-"),t.qZA(),t.YNc(20,_i,2,2,"mat-option",42),t.qZA()()(),t.TgZ(21,"div",5)(22,"mat-form-field",6)(23,"mat-label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"mat-select",44),t.NdJ("selectionChange",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.getAria(r))}),t.ALo(27,"translate"),t.TgZ(28,"mat-option",41),t._uU(29,"-"),t.qZA(),t.YNc(30,fi,2,2,"mat-option",42),t.qZA()()(),t.TgZ(31,"div",5)(32,"mat-form-field",6)(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"mat-select",45),t.ALo(37,"translate"),t.TgZ(38,"mat-option",41),t._uU(39,"-"),t.qZA(),t.YNc(40,Ci,2,2,"mat-option",42),t.qZA()()()()}if(2&o){const i=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,12,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(7,14,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(4),t.Oqu(t.lcZ(15,16,"HTML.GOVERN")),t.xp6(2),t.s9C("placeholder",t.lcZ(17,18,"HTML.GOVERN")),t.xp6(4),t.Q6J("ngForOf",i.Governorates),t.xp6(4),t.Oqu(t.lcZ(25,20,"HTML.CITY")),t.xp6(2),t.s9C("placeholder",t.lcZ(27,22,"HTML.CITY")),t.xp6(4),t.Q6J("ngForOf",i.Cities),t.xp6(4),t.Oqu(t.lcZ(35,24,"HTML.REGION")),t.xp6(2),t.s9C("placeholder",t.lcZ(37,26,"HTML.REGION")),t.xp6(4),t.Q6J("ngForOf",i.Areas)}}function bi(o,e){1&o&&(t.TgZ(0,"div",4)(1,"div",46)(2,"mat-form-field",6)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"input",47),t.qZA()(),t.TgZ(7,"div",8)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",48),t.qZA()(),t.TgZ(13,"div",8)(14,"mat-form-field",6)(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",49),t.qZA()(),t.TgZ(19,"div",8)(20,"mat-form-field",6)(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"input",50),t.qZA()()()),2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,4,"HTML.STREET_NAME")),t.xp6(6),t.Oqu(t.lcZ(11,6,"HTML.BUILDING_NUMBER")),t.xp6(6),t.Oqu(t.lcZ(17,8,"HTML.ZIP")),t.xp6(6),t.Oqu(t.lcZ(23,10,"HTML.BUILDING_SubNUMBER")))}function vi(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function Zi(o,e){1&o&&(t.TgZ(0,"div",21)(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"HTML.IDNUMBER")," "))}function Ai(o,e){1&o&&(t.TgZ(0,"div",21)(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"HTML.IsRepresentative")," "))}function yi(o,e){1&o&&(t.TgZ(0,"div",21)(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"HTML.BIRTH_DATE")," "))}function xi(o,e){if(1&o&&(t.TgZ(0,"div",53),t._uU(1),t.qZA()),2&o){const i=t.oxw().$implicit;t.xp6(1),t.hij("",i.CURNationalID," ")}}function Ui(o,e){if(1&o&&(t.TgZ(0,"div",53),t._uU(1),t.qZA()),2&o){const i=t.oxw().$implicit;t.xp6(1),t.hij("",i.CURisRepresentative," ")}}function wi(o,e){if(1&o&&(t.TgZ(0,"div",53),t._uU(1),t.qZA()),2&o){const i=t.oxw().$implicit;t.xp6(1),t.hij("",i.CURBirthDate," ")}}function Oi(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.displayRow(r))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.VIEW"))}function Ni(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.remove(r.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function Si(o,e){if(1&o&&(t.TgZ(0,"div",52)(1,"div",53),t._uU(2),t.qZA(),t.TgZ(3,"div",53),t._uU(4),t.qZA(),t.TgZ(5,"div",53),t._uU(6),t.qZA(),t.YNc(7,xi,2,1,"div",54),t.YNc(8,Ui,2,1,"div",54),t.YNc(9,wi,2,1,"div",54),t.TgZ(10,"div",53)(11,"div",55),t.YNc(12,Oi,4,3,"button",56),t.YNc(13,Ni,4,3,"button",57),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.CURName),t.xp6(2),t.hij("",i.CURMobile," "),t.xp6(2),t.hij("",i.CURWorkNature," "),t.xp6(1),t.Q6J("ngIf",n.personType===n.personTypeWakeel),t.xp6(1),t.Q6J("ngIf",n.personType===n.personTypeWakeel),t.xp6(1),t.Q6J("ngIf",n.personType===n.personTypeWakeel),t.xp6(3),t.Q6J("ngIf",n.can(n.personType===n.personTypeWakeel?"view_tenant_workrelated_agency":"view_tenant_workrelated")),t.xp6(1),t.Q6J("ngIf",n.can(n.personType===n.personTypeWakeel?"delete_tenant_workrelated_agency":"delete_tenant_workrelated"))}}class yt{constructor(e,i,n,r,l,C,y,U,M,F,J,et){this.dialogRef=e,this.dataInjected=i,this.atlasService=n,this._CustomerService=r,this.translateService=l,this.localStore=C,this.appService=y,this.dialog=U,this.snackBar=M,this.codesService=F,this.sanitizer=J,this.fb=et,this.passwordHide=!0,this.country_const=(new x.I).Countries,this.governorate_const=(new x.I).Governorates,this.city_const=(new x.I).City,this.region_const=(new x.I).Regions,this.relatives=[],this.currentRelativeID=null,this.currentRowMode=null,this.registerFileToUpload=null,this.curCOMId=N.N.comid,this.userPerm=[],this.registerFileUrl=null,this.isWekalaImage=!1,this.registerFileType=null,this.defaultCusImage=(new S.P).noImage,this.CusImageToUpload=null,this.isResp=!1,this.Countries=[],this.Governorates=[],this.Cities=[],this.Areas=[]}ngOnInit(){this.personType=this.dataInjected.personType,this.personTypeWakeel="W",this.personTypeResp="P",this.currentRowMode="INSERT",this.relatives=this.appService.getRelative(),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({id:null,customer_KeyField:[null,d.kI.required],CURRelationType:"K",CURName:[null,d.kI.required],CURMobile:null,nationalID:null,birthday:null,CURWorkNature:null,CURNotes:null,image:null,CURisRepresentative:!1,CURAddress:null,CURShortAddress:null,CURStreetName:null,CURBuildingNumber:null,CURBuildingSubNumber:null,CURZibCode:null,Country_CTTKeyField:null,Governorate_CTTKeyField:null,City_CTTKeyField:null,Area_CTTKeyField:null,CURRepresentativePdf:null,CURIdPdf:null}),console.log(this.dataInjected.custId),this.dataForm.patchValue({customer_KeyField:this.dataInjected.custId}),this.personType==this.personTypeWakeel&&this.dataForm.patchValue({CURisRepresentative:!0}),this.oneRelated=new be,this.curPeriority=this.dataInjected.periorty,this.action="Patch",this.getTenantRelated(),this.getCountries(this.curCOMId,this.curPeriority),this.prepareMsgLanguage()}getFileType(e){const i=e.type;return"application/pdf"===i?"PDF":i.startsWith("image/")?"IMAGE":"NOT"}onRegisterFileSelected(e,i){if(e&&e.length){switch(this.getFileType(e.item(0))){case"IMAGE":this.isWekalaImage=!0,this.registerFileType=this.imageFileSelected;break;case"PDF":this.isWekalaImage=!1,this.registerFileType=this.pdfFileSelected;break;case"NOT":this.isWekalaImage=!1,this.registerFileType=this.otherFileSelected}const l=new FileReader;l.onload=U=>{this.registerFileUrl=l.result,this.sanitizedFileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(U.target.result)},l.readAsDataURL(e.item(0)),this.registerFileToUpload=e.item(0),document.getElementById("wekalaCustomButton").textContent=e.length>0?e[0].name:this.chooseWekalaFilePDF}}getFileTypeFromPath(e){switch(e.split(".").pop()?.toLowerCase().substring(0,3)){case"jpg":case"jpe":case"png":case"gif":return"Image";case"pdf":return"PDF";case"doc":return"Word Document";case"xls":return"Excel Document";default:return"Unknown File Type"}}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getTenantRelated(){this.cusRelated=null,this.personType==this.personTypeWakeel&&this._CustomerService.getWorkRelatedWakeelPerCustomers(this.curCOMId,this.curPeriority,this.dataInjected.custId).subscribe(e=>this.cusRelated=e),this.personType==this.personTypeResp&&this._CustomerService.getWorkRelatedNotWakeelPerCustomers(this.curCOMId,this.curPeriority,this.dataInjected.custId).subscribe(e=>this.cusRelated=e)}mapFormValue_toTable(){const e=new _.uU("en-GB").transform(this.dataForm.value.birthday,"dd/MM/yyyy");null!=this.dataForm.value.birthday&&(this.oneRelated.CURBirthDate=e),this.oneRelated.CURisRepresentative=0==this.dataForm.value.CURisRepresentative?"F":"T",this.oneRelated.CURPic=this.dataForm.value.image,this.oneRelated.customer_KeyField=this.dataInjected.custId,this.oneRelated.CURRelationType=this.dataForm.value.CURRelationType,this.oneRelated.CURName=this.dataForm.value.CURName,this.oneRelated.CURMobile=this.dataForm.value.CURMobile,this.oneRelated.CURNationalID=this.dataForm.value.nationalID,this.oneRelated.CURWorkNature=this.dataForm.value.CURWorkNature,this.oneRelated.CURNotes=this.dataForm.value.CURNotes,this.oneRelated.CURAddress=this.dataForm.value.CURAddress,this.oneRelated.CURShortAddress=this.dataForm.value.CURShortAddress,this.oneRelated.CURStreetName=this.dataForm.value.CURStreetName,this.oneRelated.CURBuildingNumber=this.dataForm.value.CURBuildingNumber,this.oneRelated.CURBuildingSubNumber=this.dataForm.value.CURBuildingSubNumber,this.oneRelated.CURZibCode=this.dataForm.value.CURZibCode,this.dataForm.value.Country_CTTKeyField&&(this.oneRelated.Country_CTTKeyField=this.dataForm.value.Country_CTTKeyField),this.dataForm.value.Governorate_CTTKeyField&&(this.oneRelated.Governorate_CTTKeyField=this.dataForm.value.Governorate_CTTKeyField),this.dataForm.value.City_CTTKeyField&&(this.oneRelated.City_CTTKeyField=this.dataForm.value.City_CTTKeyField),this.dataForm.value.Area_CTTKeyField&&(this.oneRelated.Area_CTTKeyField=this.dataForm.value.Area_CTTKeyField),this.dataForm.value.CURRepresentativePdf&&(this.oneRelated.CURRepresentativePdf=this.dataForm.value.CURRepresentativePdf),this.dataForm.value.CURIdPdf&&(this.oneRelated.CURIdPdf=this.dataForm.value.CURIdPdf)}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultCusImage=n.target.result},i.readAsDataURL(this.CusImageToUpload)}callOnRegisterFileSelect(){document.getElementById("wekalaFileInput").click()}onSave(){this.mapFormValue_toTable(),"INSERT"==this.currentRowMode?this._CustomerService.addRelatedForTenantWithPic(this.oneRelated,this.CusImageToUpload,this.registerFileToUpload).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()}):"EDIT"==this.currentRowMode&&this._CustomerService.editRelatedForTenantWithPic(this.oneRelated,this.currentRelativeID,this.CusImageToUpload,this.registerFileToUpload).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}displayRow(e){var i;this.isWekalaImage=!1,this.registerFileUrl="",this.sanitizedFileUrl="",console.log("===***Press Display button***==="),this.currentRelativeID=e.id,this.currentRowMode="EDIT",e.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.curPeriority,e.Country_CTTKeyField),e.Governorate_CTTKeyField&&this.getCityPerGoverno(this.curCOMId,this.curPeriority,e.Governorate_CTTKeyField),e.City_CTTKeyField&&this.getAreaPerCity(this.curCOMId,this.curPeriority,e.City_CTTKeyField),this.registerFileToUpload=e.CURRepresentativePdf,this.registerFileToUpload&&("Image"==(i=this.getFileTypeFromPath(this.registerFileToUpload.toString()))?(this.isWekalaImage=!0,this.registerFileUrl=this.registerFileToUpload.toString()):"PDF"==i?(this.isWekalaImage=!1,this.sanitizedFileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.registerFileToUpload.name)):console.log("Selected file is of another type:",i)),"T"==e.CURisRepresentative&&(this.isResp=!0),"F"==e.CURisRepresentative&&(this.isResp=!1),this.dataForm.patchValue({id:e.id,customer_KeyField:e.customer_KeyField,CURRelationType:e.CURRelationType,CURName:e.CURName,CURMobile:e.CURMobile,image:e.CURPic,nationalID:e.CURNationalID,birthday:e.CURBirthDate,CURWorkNature:e.CURWorkNature,CURNotes:e.CURNotes,CURisRepresentative:this.isResp,CURAddress:e.CURAddress,CURShortAddress:e.CURShortAddress,CURStreetName:e.CURStreetName,CURBuildingNumber:e.CURBuildingNumber,CURBuildingSubNumber:e.CURBuildingSubNumber,CURZibCode:e.CURZibCode,Country_CTTKeyField:e.Country_CTTKeyField,Governorate_CTTKeyField:e.Governorate_CTTKeyField,City_CTTKeyField:e.City_CTTKeyField,Area_CTTKeyField:e.Area_CTTKeyField,CURRepresentativePdf:e.CURRepresentativePdf,CURIdPdf:e.CURIdPdf})}remove(e){this.dialog.open(nt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this._CustomerService.deleteRelativeForTenant(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(e){this.getGovernoratePerCountry(this.curCOMId,this.curPeriority,e.value)}getGovernoratePerCountry(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.governorate_const,n).subscribe(r=>{this.Governorates=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(e){this.getCityPerGoverno(this.curCOMId,this.curPeriority,e.value)}getCityPerGoverno(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.city_const,n).subscribe(r=>{this.Cities=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(e){this.getAreaPerCity(this.curCOMId,this.curPeriority,e.value)}getAreaPerCity(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.region_const,n).subscribe(r=>{this.Areas=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e}),this.translateService.get("HTML.ChooseWekalaFile").subscribe(e=>{this.chooseWekalaFilePDF=e}),this.translateService.get("MESSAGE.ImageSelected").subscribe(e=>{this.imageFileSelected=e}),this.translateService.get("MESSAGE.PDFSelected").subscribe(e=>{this.pdfFileSelected=e}),this.translateService.get("MESSAGE.OtherFileSelected").subscribe(e=>{this.otherFileSelected=e})}}function Ii(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function Di(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Fi(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Code is required"),t.qZA())}function Li(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Code isn't long enough, minimum of 4 characters"),t.qZA())}function Mi(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Password is required"),t.qZA())}function qi(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Password isn't long enough, minimum of 6 characters"),t.qZA())}function Ei(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-form-field",98)(1,"mat-label")(2,"mat-icon"),t._uU(3,"vpn_key"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"input",99),t.TgZ(7,"mat-icon",100),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.passwordHide=!r.passwordHide)}),t._uU(8),t.qZA(),t.YNc(9,Mi,2,0,"mat-error",1),t.YNc(10,qi,2,0,"mat-error",1),t.qZA()}if(2&o){const i=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,5,"HTML.PASSWORD"),""),t.xp6(2),t.Q6J("type",i.passwordHide?"password":"text"),t.xp6(2),t.Oqu(i.passwordHide?"visibility":"visibility_off"),t.xp6(1),t.Q6J("ngIf",null==i.form.controls.password.errors?null:i.form.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",i.form.controls.password.hasError("minlength"))}}function Ri(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"First name is required"),t.qZA())}function Pi(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Last name is required"),t.qZA())}function ki(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Mobile is required"),t.qZA())}function Bi(o,e){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Oqu(i.fileType)}}function Wi(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function Hi(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function Ji(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.UNTUnitNumber," ")}}function Ki(o,e){1&o&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HTML.ElectricityCounterNumber")," "))}function Gi(o,e){1&o&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HTML.WaterCounterNumber")," "))}function Yi(o,e){1&o&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HTML.GasCounterNumber")," "))}function Vi(o,e){if(1&o&&(t.TgZ(0,"ng-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName,"")}}function Qi(o,e){if(1&o&&(t.TgZ(0,"ng-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName,"")}}function ji(o,e){if(1&o&&(t.TgZ(0,"div")(1,"a",101)(2,"mat-icon"),t._uU(3,"download"),t.qZA()()()),2&o){const i=t.oxw();t.xp6(1),t.s9C("href",i.natIDfileToUpload,t.LSH)}}function $i(o,e){if(1&o&&(t.ynx(0),t._UZ(1,"img",104),t.BQk()),2&o){const i=t.oxw(2);t.xp6(1),t.Q6J("src",i.fileUrl,t.LSH)}}function zi(o,e){if(1&o&&t._UZ(0,"iframe",105),2&o){const i=t.oxw(2);t.Q6J("src",i.sanitizedUrl,t.uOi)}}function Xi(o,e){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,$i,2,1,"ng-container",102),t.YNc(2,zi,1,1,"ng-template",null,103,t.W1O),t.qZA()),2&o){const i=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isImage)("ngIfElse",i)}}function tn(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function en(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function nn(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function on(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function an(o,e){1&o&&(t.TgZ(0,"mat-tab",106),t.ALo(1,"translate"),t.TgZ(2,"div",6),t._UZ(3,"mat-label"),t.TgZ(4,"div",5)(5,"mat-checkbox",107),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"mat-checkbox",108),t._uU(9),t.ALo(10,"translate"),t.qZA()()()()),2&o&&(t.s9C("label",t.lcZ(1,3,"HTML.TAB_SETTINGS")),t.xp6(6),t.Oqu(t.lcZ(7,5,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(10,7,"HTML.BLOCKED")))}function rn(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function sn(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function ln(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",109),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.saveUpdate(r.CUS.id))}),t.YNc(1,rn,3,3,"span",1),t.YNc(2,sn,3,3,"span",1),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.CUS.id),t.xp6(1),t.Q6J("ngIf",i.CUS.id)}}function cn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",110),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.customerRelated(r.CUS.id))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.Accompany"))}}function un(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",110),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.changePassword(r.CUS))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.PasswordChange"))}}function dn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",110),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.confirmData(r.CUS.id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(1),t.Oqu(t.lcZ(2,2,"BTN.SUBMIT"))}}yt.\u0275fac=function(e){return new(e||yt)(t.Y36(Z.so),t.Y36(Z.WI),t.Y36(D.Z),t.Y36(L.v),t.Y36(w.sK),t.Y36(p.C),t.Y36(ve.z),t.Y36(Z.uw),t.Y36(I.ux),t.Y36(Rt.d),t.Y36(Pt.H7),t.Y36(d.QS))},yt.\u0275cmp=t.Xpm({type:yt,selectors:[["app-cus-workrelated-dialog"]],decls:53,vars:31,consts:[["autocomplete","off","fxLayout","row wrap",1,"user-form","dialog-content",3,"formGroup"],["fxFlex","100","fxFlex.gt-sm","25","class","px-2",4,"ngIf"],["fxFlex","100",1,"px-2",3,"fxFlex.gt-sm"],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100","form-row"],["fxFlex","100","fxFlex.gt-sm","25.0",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","CURName"],["fxFlex","100","fxFlex.gt-sm","20.0",1,"px-1"],["matInput","","formControlName","CURMobile"],["fxFlex","100","fxFlex.gt-sm","54.9","class","px-1",4,"ngIf","ngIfElse"],["worknature",""],["fxLayout","row","fxLayoutAlign","space-between center","class","w-100 form-row",4,"ngIf"],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["mat-dialog-content",""],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-header-cell",4,"ngIf"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","25",1,"px-2"],[4,"ngIf"],["fxLayout","row"],["type","file","accept","image/*,.pdf","id","wekalaFileInput",1,"file-input",3,"change"],["id","wekalaCustomButton",1,"custom-button",3,"click"],["id","registerdownloadicon","target","_blank",3,"href"],[4,"ngIf","ngIfElse"],["pdfWekalaPreview",""],[2,"max-width","100%","height","250px",3,"src"],["frameborder","0",2,"width","100%","height","250px",3,"src"],["fxFlex","100","fxFlex.gt-sm","54.9",1,"px-1"],["matInput","","formControlName","nationalID"],["matInput","","formControlName","CURWorkNature"],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["matInput","","formControlName","CURAddress"],["matInput","","formControlName","CURShortAddress"],["formControlName","Country_CTTKeyField","id","own_countOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","Governorate_CTTKeyField","id","own_governoOpSel",3,"placeholder","selectionChange"],["formControlName","City_CTTKeyField","id","own_cityOpSel",3,"placeholder","selectionChange"],["formControlName","Area_CTTKeyField","id","own_areaOpSel",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","40.0",1,"px-1"],["matInput","","formControlName","CURStreetName"],["matInput","","formControlName","CURBuildingNumber"],["matInput","","formControlName","CURZibCode"],["matInput","","formControlName","CURBuildingSubNumber"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],["class","mat-mdc-cell",4,"ngIf"],[1,"p-2","actions"],["mat-mini-fab","","color","primary","class","mx-1",3,"matTooltip","click",4,"ngIf"],["class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",1,"mx-1",3,"matTooltip","click"],[1,"mx-1",3,"matTooltip","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0),t.YNc(1,di,8,5,"div",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"input",7),t.qZA()(),t.TgZ(11,"div",8)(12,"mat-form-field",6)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",9),t.qZA()(),t.YNc(17,mi,6,3,"div",10),t.YNc(18,pi,6,3,"ng-template",null,11,t.W1O),t.qZA(),t.YNc(20,hi,13,6,"div",12),t.YNc(21,Ti,41,28,"div",12),t.YNc(22,bi,25,12,"div",12),t.qZA(),t.TgZ(23,"div",13)(24,"div",14),t.YNc(25,vi,4,4,"button",15),t.TgZ(26,"button",16),t.NdJ("click",function(){return i.close()}),t._uU(27),t.ALo(28,"translate"),t.qZA()()()(),t._UZ(29,"mat-divider"),t.qZA(),t.TgZ(30,"div",17)(31,"div",18)(32,"mat-card"),t._UZ(33,"mat-divider"),t.TgZ(34,"div",19)(35,"div",20)(36,"div",21)(37,"h2"),t._uU(38),t.ALo(39,"translate"),t.qZA()(),t.TgZ(40,"div",21)(41,"h2"),t._uU(42),t.ALo(43,"translate"),t.qZA()(),t.TgZ(44,"div",21)(45,"h2"),t._uU(46),t.ALo(47,"translate"),t.qZA()(),t.YNc(48,Zi,4,3,"div",22),t.YNc(49,Ai,4,3,"div",22),t.YNc(50,yi,4,3,"div",22),t._UZ(51,"div",21),t.qZA(),t.YNc(52,Si,14,8,"div",23),t.qZA()()()()),2&e){const n=t.MAs(19);t.Q6J("formGroup",i.dataForm),t.xp6(1),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(1),t.Q6J("fxFlex.gt-sm",i.personType===i.personTypeWakeel?"75":"100"),t.xp6(6),t.Oqu(t.lcZ(9,19,"FIELD.NAME")),t.xp6(6),t.Oqu(t.lcZ(15,21,"HTML.MOBILE")),t.xp6(3),t.Q6J("ngIf",i.personType===i.personTypeWakeel)("ngIfElse",n),t.xp6(3),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(1),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(1),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(3),t.Q6J("ngIf",i.can("add_tenant_workrelated")||0==i.curPeriority),t.xp6(2),t.Oqu(t.lcZ(28,23,"BTN.CANCEL")),t.xp6(11),t.hij(" ",t.lcZ(39,25,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(43,27,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(47,29,"HTML.WorkNature")," "),t.xp6(2),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(1),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(1),t.Q6J("ngIf",i.personType===i.personTypeWakeel),t.xp6(2),t.Q6J("ngForOf",i.cusRelated)}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,_.sg,_.O5,d.sg,d.u,T.xw,T.Wh,T.yH,K.ey,b.lW,b.nh,G.a8,Z.xY,Z.H8,Q.Hw,A.Nt,v.KE,v.hX,tt.d,q.gD,pt.gM,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}.container[_ngcontent-%COMP%]{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.dialog-content[_ngcontent-%COMP%]{margin-top:16px}.file-input[_ngcontent-%COMP%]{display:none}.custom-button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px;height:40px}.custom-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.form-row[_ngcontent-%COMP%]{margin-bottom:-15px;margin-top:-5px}"]});class Dt{constructor(e,i,n,r,l,C,y,U,M,F,J,et,ot,bt,ct,Vt,fe){this.transferService=e,this.appSettings=i,this.activatedRoute=n,this.codesService=r,this.unitsService=l,this.fb=C,this.localStore=y,this._CustomerService=U,this.router=M,this.dialog=F,this.global=J,this.atlasService=et,this.settingService=ot,this.translateService=bt,this.contractService=ct,this.sanitizer=Vt,this.snackBar=fe,this.curCOMId=N.N.comid,this.account=new at.n,this.country_const=(new x.I).Countries,this.governorate_const=(new x.I).Governorates,this.city_const=(new x.I).City,this.region_const=(new x.I).Regions,this.notificationType_const=(new x.I).NotificationTypes,this.job_const=(new x.I).Jobs,this.workplace_const=(new x.I).WorkPlaces,this.passwordHide=!0,this.tenant=new _t,this.editCode=!0,this.userPerm=[],this.brandfileToUpload=null,this.natIDfileToUpload=null,this.DocImageToUpload=null,this.defaultDocImage=(new S.P).noImage,this.defaultCusImage=(new S.P).noImage,this.CusImageToUpload=null,this.defaultIDImage=(new S.P).noImage,this.IDImageToUpload=null,this.fileType=null,this.idFileType=null,this.fileUrl=null,this.isImage=!1,this.AllBranches=[],this.notificationsObject=new Te.j,this.allowedChar="1234567890",this.lengthOfCode=6,this.Jobs=[],this.WorkPlaces=[],this.Countries=[],this.Governorates=[],this.Cities=[],this.Areas=[],this.AllBuildings=[],this.AllUnits=[],this.settings=this.appSettings.settings}handleFileInputBrand(e){e&&e.length&&(this.brandfileToUpload=e.item(0)),document.getElementById("customButtonBrand").textContent=e.length>0?e[0].name:this.chooseFilePDFBrand}handleFileInputNatID(e){e&&e.length&&(this.natIDfileToUpload=e.item(0)),document.getElementById("customButtonNatId").textContent=e.length>0?e[0].name:this.chooseFilePDFNatID}callFileInputBrand(){document.getElementById("brandFileInput").click()}callFileInputNatId(){document.getElementById("natIDFileInput").click()}callFileInput(){document.getElementById("fileInput").click()}callOnHowiaFileSelect(){document.getElementById("howiaFileInput").click()}callIDFileInput(){document.getElementById("idFileInput").click()}ngOnInit(){if(this.isImage=!1,this.transferService.getMessage.subscribe(e=>{this.editCode="YES"==e.editTenantCode.toUpperCase(),console.log("---2222 this.editCode:: "+this.editCode)}),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getMaxCodeForCustomers(this.curCOMId,this.account.periorty),this.getCountries(this.curCOMId,this.account.periorty),this.getJobs(this.curCOMId,this.account.periorty),this.getWorkPlaces(this.curCOMId,this.account.periorty),this.getNotificationRows(this.curCOMId,this.account.periorty,1),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=+e.id,this.getTenantById(this.id)):this.CUS=new _t;var i=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==i.is_employee,this.isAdmin=i.is_superuser,this.isOwner="T"==i.is_owner,console.log("---1111 this.editCode:: "+this.editCode),this.form=this.fb.group({id:null,code:{value:null,disabled:!this.editCode},username:{value:null,disabled:this.id},password:null,firstname:[null,d.kI.required],lastname:[null,d.kI.required],image:null,CUSBrandPdf:null,CUSIdPdf:null,mobile:null,CUSFamousName:null,selftype:"P",CUSEInvoiceType:"G",profile:this.fb.group({birthday:[null,d.kI.required],gender:"M",current_branch:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curbuilding:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curunit:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},CUSTaxNumber:null,CUSCommercialRegister:null}),work:this.fb.group({company:[null,d.kI.required],position:null,nationalIDType:"F",nationalID:[null,d.kI.required],nationalIDStartDate:null,nationalIDEndDate:null,nationalIDPic:null,WorkPlace_CTTKeyField:null,Job_CTTKeyField:null}),contacts:this.fb.group({email:["",d.kI.compose([d.kI.required,R.Le])],homephone:null,workphone:null,address:null,CUSStreetName:null,CUSBuildingNumber:null,CUSZibCode:null,CUSShortAddress:null,CUSBuildingSubNumber:null,country:null,governorate:null,city:null,area:null}),social:this.fb.group({facebook:null,twitter:null,google:null}),settings:this.fb.group({isActive:null,isDeleted:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0)})}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onFileChange(e){this.DocImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultDocImage=n.target.result},i.readAsDataURL(this.DocImageToUpload)}onFileRemove(e){console.log("====On Remove:: "+e)}getFileType(e){const i=e.type;return"application/pdf"===i?"PDF":i.startsWith("image/")?"IMAGE":"NOT"}onEnter(e){e.preventDefault()}handelCUSImgInput(e){if(e&&e.length){switch(this.getFileType(e.item(0))){case"IMAGE":this.fileType=this.imageFileSelected;break;case"PDF":this.fileType=this.pdfFileSelected;break;case"NOT":this.fileType=this.otherFileSelected}if(this.fileType==this.imageFileSelected){console.log("--------Here when image-------------"),this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=C=>{this.defaultCusImage=C.target.result},i.readAsDataURL(this.CusImageToUpload),document.getElementById("customButton").textContent=e.length>0?e[0].name:this.chooseFile}}}onFileSelected(e,i){if(e&&e.length){switch(this.getFileType(e.item(0))){case"IMAGE":this.isImage=!0,this.idFileType=this.imageFileSelected;break;case"PDF":this.isImage=!1,this.idFileType=this.pdfFileSelected;break;case"NOT":this.isImage=!1,this.idFileType=this.otherFileSelected}const l=new FileReader;l.onload=C=>{this.fileUrl=l.result,this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(C.target.result)},l.readAsDataURL(e.item(0)),this.natIDfileToUpload=e.item(0)}}handelIDImgInput(e){this.IDImageToUpload=e.item(0);var i=new FileReader;i.onload=l=>{this.defaultIDImage=l.target.result,console.log("=====after====="+this.defaultIDImage)},i.readAsDataURL(this.IDImageToUpload),document.getElementById("idCustomButton").textContent=e.length>0?e[0].name:this.chooseFile}mapFormvalue_to_CustomerClass(e){this.form.enable(),this.cur_branch=this.form.value.profile.current_branch,this.cur_building=this.form.value.profile.curbuilding,this.cur_unit=this.form.value.profile.curunit,this.form.disable();const i=new _.uU("en-GB").transform(this.form.value.profile.birthday,"dd/MM/yyyy"),n=new _.uU("en-GB").transform(this.form.value.work.nationalIDStartDate,"dd/MM/yyyy"),r=new _.uU("en-GB").transform(this.form.value.work.nationalIDEndDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,null!=this.form.value.profile.birthday&&(this.CUS.CUSBirthDate=i),null!=this.form.value.work.nationalIDStartDate&&(this.CUS.CUSNationalIDStartDate=n),null!=this.form.value.work.nationalIDEndDate&&(this.CUS.CUSNationalIDEndDate=r),this.CUS.CUSCode=+this.form.value.code,this.CUS.CUSFirstName=this.form.value.firstname,this.CUS.CUSLastName=this.form.value.lastname,this.CUS.CUSusername=this.form.value.username,this.CUS.CUSpassword=this.form.value.password,"POST"==e&&(this.CUS.is_create_CustomUser_table="T"),this.CUS.CUSGender=this.form.value.profile.gender,this.CUS.current_branch=this.cur_branch,this.CUS.current_building=this.cur_building,this.CUS.current_unit=this.cur_unit,this.CUS.CUSSelfType=this.form.value.selftype,this.CUS.CUSEInvoiceType=this.form.value.CUSEInvoiceType,this.CUS.CUSPic=this.form.value.image,this.CUS.CUSIDPic=this.form.value.work.nationalIDPic,this.CUS.CUSGuarantor=this.form.value.work.company,this.CUS.CUSJobName=this.form.value.work.position??"",this.CUS.CUSNationalIDType=this.form.value.work.nationalIDType,this.CUS.CUSNationalID=this.form.value.work.nationalID,this.CUS.WorkPlace_CTTKeyField=this.form.value.work.WorkPlace_CTTKeyField,this.CUS.Job_CTTKeyField=this.form.value.work.Job_CTTKeyField,this.CUS.CUSMobile=this.form.value.mobile,this.CUS.CUSFamousName=this.form.value.CUSFamousName??"",this.CUS.CUSEmail=this.form.value.contacts.email,this.CUS.CUSHomePhone=this.form.value.contacts.homephone,this.CUS.CUSWorkPhone=this.form.value.contacts.workphone,this.CUS.CUSAddress=this.form.value.contacts.address??"",this.CUS.CUSStreetName=this.form.value.contacts.CUSStreetName??"",this.CUS.CUSBuildingNumber=this.form.value.contacts.CUSBuildingNumber??"",this.CUS.CUSZibCode=this.form.value.contacts.CUSZibCode??"",this.CUS.CUSShortAddress=this.form.value.contacts.CUSShortAddress??"",this.CUS.CUSBuildingSubNumber=this.form.value.contacts.CUSBuildingSubNumber??"",this.CUS.Country_CTTKeyField=this.form.value.contacts.country,this.CUS.Governorate_CTTKeyField=this.form.value.contacts.governorate,this.CUS.City_CTTKeyField=this.form.value.contacts.city,this.CUS.Area_CTTKeyField=this.form.value.contacts.area,this.CUS.CUSFacebook=this.form.value.social.facebook??"",this.CUS.CUSTwitter=this.form.value.social.twitter??"",this.CUS.CUSGoogle=this.form.value.social.google??"",this.CUS.CUSTaxNumber=this.form.value.profile.CUSTaxNumber??"",this.CUS.CUSCommercialRegister=this.form.value.profile.CUSCommercialRegister??"",this.CUS.CUSActive=this.tenActive,this.CUS.RowDelete=this.tenDeleted}getTenantById(e){const i=[];this._CustomerService.getOneCustomer(e).subscribe(n=>{this._CustomerService.getOneCustomerDocs(this.curCOMId,this.account.periorty,e).subscribe(r=>{for(var l of r)i.push({link:l.CUDPic,preview:l.CUDPic})}),this.fillForm(n,i),this.CUS=n,n.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,n.Country_CTTKeyField),n.Governorate_CTTKeyField&&this.getCityPerGoverno(this.curCOMId,this.account.periorty,n.Governorate_CTTKeyField),n.City_CTTKeyField&&this.getAreaPerCity(this.curCOMId,this.account.periorty,n.City_CTTKeyField)})}getFileTypeFromPath(e){console.log("--------start of getFileTypeFromPath----------"),console.log("-----filePath1111:: "+e);const i=e.split(".").pop()?.toLowerCase();switch(console.log("-----filePath2222:: "+e),console.log("--------extension:: "+i),i.substring(0,3)){case"jpg":case"jpe":case"png":case"gif":return"Image";case"pdf":return"PDF";case"doc":return"Word Document";case"xls":return"Excel Document";default:return"Unknown File Type"}}fillForm(e,i){var n;console.log("----inside Fill Form---111111--"),this.is_active="T"==e.CUSActive,e.current_building&&this.getAllUnits(this.curCOMId,this.account.periorty,e.current_building),this.defaultCusImage=null!=e.CUSPic?e.CUSPic:(new S.P).noImage,this.defaultIDImage=null!=e.CUSIDPic?e.CUSIDPic:(new S.P).noImage,this.is_delete=1==e.RowDelete,console.log("----inside Fill Form---222222--"),this.brandfileToUpload=e.CUSBrandPdf,this.natIDfileToUpload=e.CUSIdPdf,this.natIDfileToUpload&&("Image"==(n=this.getFileTypeFromPath(this.natIDfileToUpload.toString()))?(console.log("Selected file is an image."),this.isImage=!0,this.fileUrl=this.natIDfileToUpload.toString(),console.log("-----this.fileUrl:: "+this.fileUrl)):"PDF"==n?(console.log("Selected file is a PDF."),this.isImage=!1,this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.natIDfileToUpload.name),console.log("------this.sanitizedUrl.:: "+this.sanitizedUrl)):console.log("Selected file is of another type:",n)),console.log("----inside Fill Form---333333--"),this.form.patchValue({id:e.id,code:e.CUSCode,username:e.CUSusername,password:e.CUSpassword,firstname:e.CUSFirstName,lastname:e.CUSLastName,image:e.CUSPic,CUSBrandPdf:e.CUSBrandPdf,CUSIdPdf:e.CUSIdPdf,selftype:e.CUSSelfType,CUSEInvoiceType:e.CUSEInvoiceType,mobile:e.CUSMobile,CUSFamousName:e.CUSFamousName,profile:{birthday:e.CUSBirthDate,gender:e.CUSGender,CUSTaxNumber:e.CUSTaxNumber,CUSCommercialRegister:e.CUSCommercialRegister,current_branch:e.current_branch,curbuilding:e.current_building,curunit:e.current_unit},work:{company:e.CUSGuarantor,position:e.CUSJobName,nationalIDType:e.CUSNationalIDType,nationalID:e.CUSNationalID,nationalIDStartDate:e.CUSNationalIDStartDate,nationalIDEndDate:e.CUSNationalIDEndDate,nationalIDPic:e.CUSIDPic,WorkPlace_CTTKeyField:e.WorkPlace_CTTKeyField,Job_CTTKeyField:e.Job_CTTKeyField},contacts:{email:e.CUSEmail,homephone:e.CUSHomePhone,workphone:e.CUSWorkPhone,address:e.CUSAddress,country:e.Country_CTTKeyField,governorate:e.Governorate_CTTKeyField,city:e.City_CTTKeyField,area:e.Area_CTTKeyField,CUSStreetName:e.CUSStreetName,CUSBuildingNumber:e.CUSBuildingNumber,CUSZibCode:e.CUSZibCode,CUSShortAddress:e.CUSShortAddress,CUSBuildingSubNumber:e.CUSBuildingSubNumber},social:{facebook:e.CUSFacebook,twitter:e.CUSTwitter,google:e.CUSGoogle},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}}),console.log("----inside Fill Form---4444444--"),e.current_unit&&this.getUnitFullData(e.current_unit),console.log("----inside Fill Form---55555555--")}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(e,i,n,r){console.log("----is Emp"),this.atlasService.getBranchPerEmp(e,i,n).subscribe(l=>{this.AllBranches=l,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+r),this.atlasService.getOneBranch(r).subscribe(C=>{this.AllBranches=C},C=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getNotificationRows(e,i,n){this.codesService.getSubForParentAndArrange(e,i,this.notificationType_const,n).subscribe(r=>{1==n&&(this.cttNotificationType_TenantData=r[0].id),2==n&&(this.cttNotificationType_EndContract=r[0].id)},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0646\u0648\u0639 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapvaluesToNotificationClass(){this.notificationsObject.notificationType_CTTKeyField=this.cttNotificationType_TenantData,this.notificationsObject.UNOActive="T",this.notificationsObject.UNONotificationFromTenant="T",this.notificationsObject.branch_KeyField=this.cur_branch,this.notificationsObject.UNOTitle="\u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0623\u062c\u0631",this.notificationsObject.build_KeyField=this.cur_building,this.notificationsObject.unit_KeyField=this.cur_unit,this.notificationsObject.customer_KeyField=this.form.value.id,this.notificationsObject.UNOText="\u0628\u0631\u062c\u0627\u0621 \u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631 "+this.form.value.firstname+" "+this.form.value.lastname}readCusCode(e){let n=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({contacts:{email:"E"+n+"@jeddahlake.com"},username:n,password:n})}pad(e,i){let n=e+"";for(;n.length<i;)n="0"+n;return n}createRandomString(e,i){let n="";for(let r=0;r<e;r++)n+=i.charAt(Math.floor(Math.random()*i.length));return n}generateUserName(e,i){return this.pad(e,4)+i}confirmData(e){this._CustomerService.editCustomerConfirm({CUSConfirmed:"T",id:e}).subscribe(n=>{this.snackBar.open("\u062a\u0645 \u0625\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},n=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}customerRelated(e){console.log("========Sayed2982024=====customerRelated()==============="),this.dialog.open(It,{data:{custId:e,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}customerWorkRelated(e){console.log("========Sayed2982024=====customerWorkRelated()==============="),this.dialog.open(yt,{data:{custId:e,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}changePassword(e){this.dialog.open(he.p,{data:{dataRow:e,curUserData:this.curUserData,userPerm:this.userPerm,pk:e.Userid},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}saveUpdate(e){console.log("=============saveUpdate()==============="),e?(this.mapFormvalue_to_CustomerClass("PATCH"),console.log("=============Update data()==============="),this._CustomerService.editCustomerWithPDF(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.curUserData.is_employee,this.brandfileToUpload,this.natIDfileToUpload).subscribe(i=>{console.log("res=> "+i),"F"==this.curUserData.is_employee&&(this.mapvaluesToNotificationClass(),this.unitsService.addNotificationForUnits(this.notificationsObject).subscribe(n=>{},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})),null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(this.CUS.id,this.DocImageToUpload).subscribe(n=>{console.log("====yes from update====",n)}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(this.mapFormvalue_to_CustomerClass("POST"),console.log(this.CUS),this._CustomerService.addCustomerWithPDF(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.brandfileToUpload,this.natIDfileToUpload).subscribe(i=>{null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(i.id,this.DocImageToUpload).subscribe(n=>{console.log("====yes from insert====",n)}),this.contractService.addCustomUserFromTenant(i,this.CusImageToUpload).subscribe(n=>{this.contractService.updateCustomerWithUserID(i.id,n.id).subscribe(r=>{},r=>{console.log("ERROR::--\x3e ",r)})}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))}close(){}compareFunction(e,i){return e.username==i.username&&e.code==i.code}getJobs(e,i){this.codesService.getSubForParent(e,i,this.job_const).subscribe(n=>{this.Jobs=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u0638\u0627\u0626\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getWorkPlaces(e,i){this.codesService.getSubForParent(e,i,this.workplace_const).subscribe(n=>{this.WorkPlaces=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0645\u0627\u0643\u0646 \u0627\u0644\u0639\u0645\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxCodeForCustomers(e,i){this.contractService.getMaxCustomerCode(e,i).subscribe(n=>{if(this.maxCustomerCode=n.max,!this.id){let r=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({code:this.maxCustomerCode,username:r,password:r,contacts:{email:"E"+r+"@jeddahlake.com"}})}})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(e){this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,e.value)}getGovernoratePerCountry(e,i,n){this.Governorates=[],this.Cities=[],this.Areas=[],this.codesService.getSubForParentAndRelated(e,i,this.governorate_const,n).subscribe(r=>{this.Governorates=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(e){this.getCityPerGoverno(this.curCOMId,this.account.periorty,e.value)}getCityPerGoverno(e,i,n){this.Areas=[],this.codesService.getSubForParentAndRelated(e,i,this.city_const,n).subscribe(r=>{this.Cities=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(e){this.getAreaPerCity(this.curCOMId,this.account.periorty,e.value)}getAreaPerCity(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.region_const,n).subscribe(r=>{this.Areas=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllBuildings(e,i){this.unitsService.getAllBuilding(e,i).subscribe(n=>{this.AllBuildings=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.AllUnits=[],this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.value)}getBuildingPerBranch(e,i,n){this.unitsService.getBuildingsPerBranch(e,i,n).subscribe(r=>{this.AllBuildings=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuild(e){this.getAllUnits(this.curCOMId,this.account.periorty,e.value)}getAllUnits(e,i,n){this.unitsService.getAllUnitsPerBuilding(e,i,n,"E").subscribe(r=>{this.AllUnits=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitData(e){this.getUnitFullData(e.value)}getUnitFullData(e){this.unitsService.getOneUnit(e).subscribe(i=>{this.electricUnit="null"==i.UNTElectricityNumber?"":i.UNTElectricityNumber,this.waterUnit="null"==i.UNTWaterNumber?"":i.UNTWaterNumber,this.gasUnit="null"==i.UNTGasNumber?"":i.UNTGasNumber},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("HTML.ChooseImageFile").subscribe(e=>{this.chooseFile=e}),this.translateService.get("HTML.ChoosePDFFile").subscribe(e=>{this.chooseFilePDF=e}),this.translateService.get("HTML.ChoosePDFFile_Brand").subscribe(e=>{this.chooseFilePDFBrand=e}),this.translateService.get("HTML.ChoosePDFFile_NatId").subscribe(e=>{this.chooseFilePDFNatID=e}),this.translateService.get("MESSAGE.ImageSelected").subscribe(e=>{this.imageFileSelected=e}),this.translateService.get("MESSAGE.PDFSelected").subscribe(e=>{this.pdfFileSelected=e}),this.translateService.get("MESSAGE.OtherFileSelected").subscribe(e=>{this.otherFileSelected=e})}}Dt.\u0275fac=function(e){return new(e||Dt)(t.Y36(ut.y),t.Y36(rt.d),t.Y36(k.gz),t.Y36(Rt.d),t.Y36(V.X),t.Y36(d.QS),t.Y36(p.C),t.Y36(L.v),t.Y36(k.F0),t.Y36(Z.uw),t.Y36(j.U),t.Y36(D.Z),t.Y36(dt.g),t.Y36(w.sK),t.Y36(g.W),t.Y36(Pt.H7),t.Y36(I.ux))},Dt.\u0275cmp=t.Xpm({type:Dt,selectors:[["app-customers-details"]],features:[t._Bn([g.W])],decls:351,vars:225,consts:[["mat-dialog-title",""],[4,"ngIf"],[1,"user-form",3,"formGroup","keydown.enter"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["appearance","outline",1,"w-20"],["matInput","","formControlName","code","required",""],["appearance","outline",1,"w-30"],["matInput","","formControlName","username","required",""],["class","w-45",4,"ngIf"],["appearance","outline",1,"w-50"],["matInput","","formControlName","firstname","required",""],["appearance","outline",1,"w-45"],["matInput","","formControlName","lastname","required",""],["matInput","","formControlName","mobile","required",""],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["formControlName","CUSEInvoiceType"],["value","G","labelPosition","after"],["value","P","labelPosition","after"],["value","B","labelPosition","after"],["fxLayout","row"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","image","name","image","id","fileInput","type","file","accept","image/*",1,"file-input",3,"change"],["id","customButton",1,"custom-button",3,"click"],["formGroupName","profile",3,"label"],["formControlName","gender"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],[1,"w-50"],["matInput","","formControlName","birthday","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","current_branch","id","curbranchContOpSel","required","",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","curbuilding","id","buildOpSel",3,"placeholder","selectionChange"],["formControlName","curunit","id","unitOpSel",3,"placeholder","selectionChange"],["appearance","outline",1,"w-95"],["matInput","","formControlName","CUSTaxNumber"],["matInput","","formControlName","CUSCommercialRegister"],["formGroupName","work",3,"label"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline","formControlName","WorkPlace_CTTKeyField","id","workplOpSel",1,"w-100",3,"placeholder"],["appearance","outline","formControlName","Job_CTTKeyField","id","jobsOpSel",1,"w-100",3,"placeholder"],["formControlName","nationalIDType"],["value","N","labelPosition","after"],["value","K","labelPosition","after"],["value","S","labelPosition","after"],["value","O","labelPosition","after"],["appearance","outline",1,"w-60"],["matInput","","formControlName","company","required",""],["appearance","outline",1,"w-40"],["matInput","","formControlName","nationalID","required",""],["matInput","","formControlName","nationalIDStartDate",3,"matDatepicker"],["natStartDate",""],["matInput","","formControlName","nationalIDEndDate",3,"matDatepicker"],["natEndDate",""],["type","file","accept","image/*,.pdf","id","howiaFileInput",1,"file-input",3,"change"],["id","idCustomButton",1,"custom-button",3,"click"],["formGroupName","contacts",3,"label"],["fxLayout","column","fxLayoutGap","10px grid",1,"form-field-outer"],["appearance","outline",1,"w-24"],["matInput","","formControlName","homephone"],["appearance","outline",1,"w-25"],["matInput","","formControlName","workphone"],["matInput","","formControlName","email","required","",3,"placeholder"],["appearance","outline",1,"w-80"],["matInput","","formControlName","address"],["appearance","outline",1,"w-19"],["matInput","","formControlName","CUSShortAddress"],["formControlName","country","id","countrOpSel",3,"placeholder","selectionChange"],["formControlName","governorate","id","governoOpSel",3,"placeholder","selectionChange"],["formControlName","city","id","cityOpSel",3,"placeholder","selectionChange"],["formControlName","area","id","areaOpSel",3,"placeholder"],["matInput","","formControlName","CUSStreetName"],["matInput","","formControlName","CUSBuildingNumber"],["matInput","","formControlName","CUSZibCode"],["matInput","","formControlName","CUSBuildingSubNumber"],["formGroupName","social",3,"label"],["matInput","","formControlName","facebook"],["matInput","","formControlName","twitter"],["matInput","","formControlName","google"],["formGroupName","settings",3,"label",4,"ngIf"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"w-45"],["matInput","","formControlName","password","required","",3,"type"],["matSuffix","",3,"click"],["id","iddownloadiconalone","target","_blank",3,"href"],[4,"ngIf","ngIfElse"],["pdfPreview",""],[2,"max-width","100%","height","250px",3,"src"],["frameborder","0",2,"width","100%","height","250px",3,"src"],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"h1",0),t.YNc(1,Ii,3,3,"span",1),t.YNc(2,Di,3,3,"span",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("keydown.enter",function(l){return i.onEnter(l)}),t.TgZ(6,"mat-tab-group",3)(7,"mat-tab",4),t.ALo(8,"translate"),t.TgZ(9,"div",5)(10,"div",6),t._UZ(11,"mat-label"),t.TgZ(12,"div",7)(13,"mat-form-field",8)(14,"mat-label")(15,"mat-icon"),t._uU(16,"person"),t.qZA(),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",9),t.YNc(20,Fi,2,0,"mat-error",1),t.YNc(21,Li,2,0,"mat-error",1),t.qZA(),t.TgZ(22,"mat-form-field",10)(23,"mat-label")(24,"mat-icon"),t._uU(25,"person"),t.qZA(),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",11),t.qZA(),t.YNc(29,Ei,11,7,"mat-form-field",12),t.qZA()(),t.TgZ(30,"div",7)(31,"mat-form-field",13)(32,"mat-label")(33,"mat-icon"),t._uU(34,"person"),t.qZA(),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",14),t.YNc(38,Ri,2,0,"mat-error",1),t.qZA(),t.TgZ(39,"mat-form-field",15)(40,"mat-label")(41,"mat-icon"),t._uU(42,"person"),t.qZA(),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"input",16),t.YNc(46,Pi,2,0,"mat-error",1),t.qZA()(),t.TgZ(47,"div",7)(48,"mat-form-field",13)(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"mat-hint"),t._uU(53,"966505602221"),t.qZA(),t._UZ(54,"input",17),t.YNc(55,ki,2,0,"mat-error",1),t.qZA()(),t.TgZ(56,"div",7)(57,"div",18)(58,"mat-label"),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"mat-radio-group",19)(62,"mat-radio-button",20),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"mat-radio-button",21),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"mat-radio-button",22),t._uU(69),t.ALo(70,"translate"),t.qZA()()()(),t.TgZ(71,"div",23)(72,"div",24),t._UZ(73,"img",25),t.TgZ(74,"input",26),t.NdJ("change",function(l){return i.handelCUSImgInput(l.target.files)}),t.qZA(),t.YNc(75,Bi,2,1,"div",1),t.TgZ(76,"button",27),t.NdJ("click",function(){return i.callFileInput()}),t._uU(77),t.ALo(78,"translate"),t.qZA()()()()(),t.TgZ(79,"mat-tab",28),t.ALo(80,"translate"),t.TgZ(81,"div",5)(82,"div",7)(83,"mat-radio-group",29)(84,"mat-radio-button",30),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.TgZ(87,"mat-radio-button",31),t._uU(88),t.ALo(89,"translate"),t.qZA()(),t.TgZ(90,"mat-form-field",32)(91,"mat-label"),t._uU(92),t.ALo(93,"translate"),t.qZA(),t._UZ(94,"input",33)(95,"mat-datepicker-toggle",34)(96,"mat-datepicker",null,35),t.qZA()(),t.TgZ(98,"div",7)(99,"div",36)(100,"mat-form-field",37)(101,"mat-label"),t._uU(102),t.ALo(103,"translate"),t.qZA(),t.TgZ(104,"mat-select",38),t.NdJ("selectionChange",function(l){return i.getBuildings(l)}),t.ALo(105,"translate"),t.TgZ(106,"mat-option",39),t._uU(107,"-"),t.qZA(),t.YNc(108,Wi,2,2,"mat-option",40),t.qZA()()()(),t.TgZ(109,"div",7)(110,"mat-form-field",13)(111,"mat-label"),t._uU(112),t.ALo(113,"translate"),t.qZA(),t.TgZ(114,"mat-select",41),t.NdJ("selectionChange",function(l){return i.getUnitsPerBuild(l)}),t.ALo(115,"translate"),t.TgZ(116,"mat-option",39),t._uU(117,"-"),t.qZA(),t.YNc(118,Hi,2,2,"mat-option",40),t.qZA()(),t.TgZ(119,"mat-form-field",15)(120,"mat-label"),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"mat-select",42),t.NdJ("selectionChange",function(l){return i.getUnitData(l)}),t.ALo(124,"translate"),t.TgZ(125,"mat-option",39),t._uU(126,"-"),t.qZA(),t.YNc(127,Ji,2,2,"mat-option",40),t.qZA()()(),t.TgZ(128,"div",7)(129,"div",36)(130,"mat-form-field",43)(131,"mat-label"),t._uU(132),t.ALo(133,"translate"),t.qZA(),t._UZ(134,"input",44),t.qZA()(),t.TgZ(135,"div",36)(136,"mat-form-field",43)(137,"mat-label"),t._uU(138),t.ALo(139,"translate"),t.qZA(),t._UZ(140,"input",45),t.qZA()()(),t.TgZ(141,"div",7),t.YNc(142,Ki,3,3,"h4",1),t.TgZ(143,"h3"),t._uU(144),t.qZA(),t.YNc(145,Gi,3,3,"h4",1),t.TgZ(146,"h3"),t._uU(147),t.qZA(),t.YNc(148,Yi,3,3,"h4",1),t.TgZ(149,"h3"),t._uU(150),t.qZA()()()(),t.TgZ(151,"mat-tab",46),t.ALo(152,"translate"),t.TgZ(153,"div",5)(154,"div",6),t._UZ(155,"mat-label"),t.TgZ(156,"div",7)(157,"div",47)(158,"label"),t._uU(159),t.ALo(160,"translate"),t.qZA(),t.TgZ(161,"ng-select",48),t.ALo(162,"translate"),t.YNc(163,Vi,2,2,"ng-option",40),t.qZA()(),t.TgZ(164,"div",47)(165,"label"),t._uU(166),t.ALo(167,"translate"),t.qZA(),t.TgZ(168,"ng-select",49),t.ALo(169,"translate"),t.YNc(170,Qi,2,2,"ng-option",40),t.qZA()()(),t._UZ(171,"mat-divider")(172,"mat-divider"),t.qZA(),t.TgZ(173,"mat-radio-group",50)(174,"mat-radio-button",51),t._uU(175),t.ALo(176,"translate"),t.qZA(),t.TgZ(177,"mat-radio-button",31),t._uU(178),t.ALo(179,"translate"),t.qZA(),t.TgZ(180,"mat-radio-button",52),t._uU(181),t.ALo(182,"translate"),t.qZA(),t.TgZ(183,"mat-radio-button",53),t._uU(184),t.ALo(185,"translate"),t.qZA(),t.TgZ(186,"mat-radio-button",54),t._uU(187),t.ALo(188,"translate"),t.qZA()(),t.TgZ(189,"div",7)(190,"mat-form-field",55)(191,"mat-label"),t._uU(192),t.ALo(193,"translate"),t.qZA(),t._UZ(194,"input",56),t.qZA(),t.TgZ(195,"mat-form-field",57)(196,"mat-label"),t._uU(197),t.ALo(198,"translate"),t.qZA(),t._UZ(199,"input",58),t.qZA()(),t.TgZ(200,"div",7)(201,"mat-form-field",15)(202,"mat-label"),t._uU(203),t.ALo(204,"translate"),t.qZA(),t._UZ(205,"input",59)(206,"mat-datepicker-toggle",34)(207,"mat-datepicker",null,60),t.qZA(),t.TgZ(209,"mat-form-field",57)(210,"mat-label"),t._uU(211),t.ALo(212,"translate"),t.qZA(),t._UZ(213,"input",61)(214,"mat-datepicker-toggle",34)(215,"mat-datepicker",null,62),t.qZA()()(),t.YNc(217,ji,4,1,"div",1),t.TgZ(218,"div",23)(219,"input",63),t.NdJ("change",function(l){return i.onFileSelected(l.target.files,l)}),t.qZA(),t.TgZ(220,"button",64),t.NdJ("click",function(){return i.callOnHowiaFileSelect()}),t._uU(221),t.ALo(222,"translate"),t.qZA(),t.YNc(223,Xi,4,2,"div",1),t.qZA()(),t.TgZ(224,"mat-tab",65),t.ALo(225,"translate"),t.TgZ(226,"div",66),t._UZ(227,"mat-label"),t.TgZ(228,"div",7)(229,"mat-form-field",67)(230,"mat-label"),t._uU(231),t.ALo(232,"translate"),t.qZA(),t._UZ(233,"input",68),t.qZA(),t.TgZ(234,"mat-form-field",69)(235,"mat-label"),t._uU(236),t.ALo(237,"translate"),t.qZA(),t._UZ(238,"input",70),t.qZA(),t.TgZ(239,"mat-form-field",13)(240,"mat-label"),t._uU(241),t.ALo(242,"translate"),t.qZA(),t._UZ(243,"input",71),t.ALo(244,"translate"),t.qZA()(),t.TgZ(245,"div",7)(246,"mat-form-field",72)(247,"mat-label"),t._uU(248),t.ALo(249,"translate"),t.qZA(),t._UZ(250,"input",73),t.qZA(),t.TgZ(251,"mat-form-field",74)(252,"mat-label"),t._uU(253),t.ALo(254,"translate"),t.qZA(),t._UZ(255,"input",75),t.qZA()(),t.TgZ(256,"div",7)(257,"mat-form-field",69)(258,"mat-label"),t._uU(259),t.ALo(260,"translate"),t.qZA(),t.TgZ(261,"mat-select",76),t.NdJ("selectionChange",function(l){return i.getGovernorate(l)}),t.ALo(262,"translate"),t.TgZ(263,"mat-option",39),t._uU(264,"-"),t.qZA(),t.YNc(265,tn,2,2,"mat-option",40),t.qZA()(),t.TgZ(266,"mat-form-field",69)(267,"mat-label"),t._uU(268),t.ALo(269,"translate"),t.qZA(),t.TgZ(270,"mat-select",77),t.NdJ("selectionChange",function(l){return i.getCity(l)}),t.ALo(271,"translate"),t.TgZ(272,"mat-option",39),t._uU(273,"-"),t.qZA(),t.YNc(274,en,2,2,"mat-option",40),t.qZA()(),t.TgZ(275,"mat-form-field",67)(276,"mat-label"),t._uU(277),t.ALo(278,"translate"),t.qZA(),t.TgZ(279,"mat-select",78),t.NdJ("selectionChange",function(l){return i.getAria(l)}),t.ALo(280,"translate"),t.TgZ(281,"mat-option",39),t._uU(282,"-"),t.qZA(),t.YNc(283,nn,2,2,"mat-option",40),t.qZA()(),t.TgZ(284,"mat-form-field",69)(285,"mat-label"),t._uU(286),t.ALo(287,"translate"),t.qZA(),t.TgZ(288,"mat-select",79),t.ALo(289,"translate"),t.TgZ(290,"mat-option",39),t._uU(291,"-"),t.qZA(),t.YNc(292,on,2,2,"mat-option",40),t.qZA()()(),t.TgZ(293,"div",7)(294,"mat-form-field",57)(295,"mat-label"),t._uU(296),t.ALo(297,"translate"),t.qZA(),t._UZ(298,"input",80),t.qZA(),t.TgZ(299,"mat-form-field",8)(300,"mat-label"),t._uU(301),t.ALo(302,"translate"),t.qZA(),t._UZ(303,"input",81),t.qZA(),t.TgZ(304,"mat-form-field",74)(305,"mat-label"),t._uU(306),t.ALo(307,"translate"),t.qZA(),t._UZ(308,"input",82),t.qZA(),t.TgZ(309,"mat-form-field",8)(310,"mat-label"),t._uU(311),t.ALo(312,"translate"),t.qZA(),t._UZ(313,"input",83),t.qZA()()()(),t.TgZ(314,"mat-tab",84),t.ALo(315,"translate"),t.TgZ(316,"div",6),t._UZ(317,"mat-label"),t.TgZ(318,"div",5)(319,"mat-form-field",37)(320,"mat-label"),t._uU(321,"Facebook"),t.qZA(),t._UZ(322,"input",85),t.qZA(),t.TgZ(323,"mat-form-field",37)(324,"mat-label"),t._uU(325,"Twitter"),t.qZA(),t._UZ(326,"input",86),t.qZA(),t.TgZ(327,"mat-form-field",37)(328,"mat-label"),t._uU(329,"Google"),t.qZA(),t._UZ(330,"input",87),t.qZA()()()(),t.YNc(331,an,11,9,"mat-tab",88),t.TgZ(332,"mat-tab",89),t.ALo(333,"translate"),t.TgZ(334,"div",90)(335,"div",24),t._UZ(336,"img",25),t.TgZ(337,"input",91,92),t.NdJ("change",function(l){return i.onFileChange(l.target.files)}),t.qZA(),t.TgZ(339,"button",93),t.NdJ("click",function(){t.CHM(n);const l=t.MAs(338);return t.KtG(l.click())}),t._uU(340),t.ALo(341,"translate"),t.qZA()(),t._UZ(342,"mat-divider")(343,"input-file",94),t.qZA()()()(),t._UZ(344,"br"),t.TgZ(345,"div",95)(346,"div",7),t.YNc(347,ln,3,4,"button",96),t.YNc(348,cn,4,4,"button",97),t.YNc(349,un,4,4,"button",97),t.YNc(350,dn,3,4,"button",97),t.qZA()()}if(2&e){const n=t.MAs(97),r=t.MAs(208),l=t.MAs(216);t.xp6(1),t.Q6J("ngIf",!i.CUS.id),t.xp6(1),t.Q6J("ngIf",i.CUS.id),t.xp6(1),t.hij(" ",t.lcZ(4,103,"HTML.TENANT"),"\n"),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(8,105,"HTML.TAB_BASIC")),t.xp6(10),t.hij(" ",t.lcZ(18,107,"HTML.CODE"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.code.errors?null:i.form.controls.code.errors.required),t.xp6(1),t.Q6J("ngIf",i.form.controls.code.hasError("minlength")),t.xp6(5),t.hij(" ",t.lcZ(27,109,"HTML.USERNAME"),""),t.xp6(3),t.Q6J("ngIf",!i.CUS.id),t.xp6(6),t.hij(" ",t.lcZ(36,111,"HTML.FIRST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.firstname.errors?null:i.form.controls.firstname.errors.required),t.xp6(5),t.hij(" ",t.lcZ(44,113,"HTML.LAST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.lastname.errors?null:i.form.controls.lastname.errors.required),t.xp6(4),t.Oqu(t.lcZ(51,115,"HTML.MOBILE")),t.xp6(5),t.Q6J("ngIf",null==i.form.controls.mobile.errors?null:i.form.controls.mobile.errors.required),t.xp6(4),t.Oqu(t.lcZ(60,117,"HTML.EInvoiceType")),t.xp6(4),t.Oqu(t.lcZ(64,119,"HTML.EType_Without")),t.xp6(3),t.Oqu(t.lcZ(67,121,"HTML.EType_Personal")),t.xp6(3),t.Oqu(t.lcZ(70,123,"HTML.EType_Business")),t.xp6(4),t.Q6J("src",i.defaultCusImage,t.LSH),t.xp6(2),t.Q6J("ngIf",i.fileType),t.xp6(2),t.Oqu(t.lcZ(78,125,"HTML.ChooseImageFile")),t.xp6(2),t.s9C("label",t.lcZ(80,127,"HTML.TAB_PERSONAL")),t.xp6(6),t.Oqu(t.lcZ(86,129,"HTML.MALE")),t.xp6(3),t.Oqu(t.lcZ(89,131,"HTML.FEMALE")),t.xp6(4),t.Oqu(t.lcZ(93,133,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(7),t.hij(" ",t.lcZ(103,135,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(105,137,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.Oqu(t.lcZ(113,139,"HTML.BUILDING")),t.xp6(2),t.s9C("placeholder",t.lcZ(115,141,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuildings),t.xp6(3),t.Oqu(t.lcZ(122,143,"HTML.UNIT")),t.xp6(2),t.s9C("placeholder",t.lcZ(124,145,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnits),t.xp6(5),t.Oqu(t.lcZ(133,147,"HTML.TaxNumber")),t.xp6(6),t.Oqu(t.lcZ(139,149,"HTML.CommercialRegister")),t.xp6(4),t.Q6J("ngIf",i.electricUnit),t.xp6(2),t.Oqu(i.electricUnit),t.xp6(1),t.Q6J("ngIf",i.waterUnit),t.xp6(2),t.Oqu(i.waterUnit),t.xp6(1),t.Q6J("ngIf",i.gasUnit),t.xp6(2),t.Oqu(i.gasUnit),t.xp6(1),t.s9C("label",t.lcZ(152,151,"HTML.TAB_ID")),t.xp6(8),t.hij(" ",t.lcZ(160,153,"HTML.WorkPlace"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(162,155,"HTML.WorkPlace")),t.xp6(2),t.Q6J("ngForOf",i.WorkPlaces),t.xp6(3),t.hij(" ",t.lcZ(167,157,"HTML.Job"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(169,159,"HTML.Job")),t.xp6(2),t.Q6J("ngForOf",i.Jobs),t.xp6(5),t.Oqu(t.lcZ(176,161,"OPTIONS.NATIONAL_ID")),t.xp6(3),t.Oqu(t.lcZ(179,163,"OPTIONS.FOREIGN_ID")),t.xp6(3),t.Oqu(t.lcZ(182,165,"OPTIONS.GULF_ID")),t.xp6(3),t.Oqu(t.lcZ(185,167,"OPTIONS.SPECIAL_EQAMA")),t.xp6(3),t.Oqu(t.lcZ(188,169,"OPTIONS.OTHER")),t.xp6(5),t.Oqu(t.lcZ(193,171,"HTML.GUARANTOR")),t.xp6(5),t.Oqu(t.lcZ(198,173,"HTML.IDNUMBER")),t.xp6(6),t.Oqu(t.lcZ(204,175,"HTML.START_DATE")),t.xp6(2),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(5),t.Oqu(t.lcZ(212,177,"HTML.END_DATE")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(3),t.Q6J("ngIf",i.CUS.id&&i.natIDfileToUpload),t.xp6(4),t.hij(" ",t.lcZ(222,179,"HTML.ChooseHowiaImageFile"),""),t.xp6(2),t.Q6J("ngIf",i.fileUrl),t.xp6(1),t.s9C("label",t.lcZ(225,181,"HTML.TAB_CONTACTS")),t.xp6(7),t.Oqu(t.lcZ(232,183,"HTML.HOME_PHONE")),t.xp6(5),t.Oqu(t.lcZ(237,185,"HTML.WORK_PHONE")),t.xp6(5),t.Oqu(t.lcZ(242,187,"HTML.EMAIL")),t.xp6(2),t.s9C("placeholder",t.lcZ(244,189,"HTML.EMAIL")),t.xp6(5),t.Oqu(t.lcZ(249,191,"HTML.ADDRESS")),t.xp6(5),t.Oqu(t.lcZ(254,193,"HTML.ShortAddress")),t.xp6(6),t.Oqu(t.lcZ(260,195,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(262,197,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(3),t.Oqu(t.lcZ(269,199,"HTML.GOVERN")),t.xp6(2),t.s9C("placeholder",t.lcZ(271,201,"HTML.GOVERN")),t.xp6(4),t.Q6J("ngForOf",i.Governorates),t.xp6(3),t.Oqu(t.lcZ(278,203,"HTML.CITY")),t.xp6(2),t.s9C("placeholder",t.lcZ(280,205,"HTML.CITY")),t.xp6(4),t.Q6J("ngForOf",i.Cities),t.xp6(3),t.Oqu(t.lcZ(287,207,"HTML.REGION")),t.xp6(2),t.s9C("placeholder",t.lcZ(289,209,"HTML.REGION")),t.xp6(4),t.Q6J("ngForOf",i.Areas),t.xp6(4),t.Oqu(t.lcZ(297,211,"HTML.STREET_NAME")),t.xp6(5),t.Oqu(t.lcZ(302,213,"HTML.BUILDING_NUMBER")),t.xp6(5),t.Oqu(t.lcZ(307,215,"HTML.ZIP")),t.xp6(5),t.Oqu(t.lcZ(312,217,"HTML.BUILDING_SubNUMBER")),t.xp6(3),t.s9C("label",t.lcZ(315,219,"HTML.TAB_SOCIAL_LIFE")),t.xp6(17),t.Q6J("ngIf",i.account.periorty>0),t.xp6(1),t.s9C("label",t.lcZ(333,221,"HTML.TAB_DOCS")),t.xp6(4),t.Q6J("src",i.defaultDocImage,t.LSH),t.xp6(4),t.Oqu(t.lcZ(341,223,"HTML.AddPic")),t.xp6(7),t.Q6J("ngIf",i.can("change_tenant")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("view_tenantrelative")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("change_tenant_password")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("confirm_tenant"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,At.VQ,At.U0,_.sg,_.O5,d.sg,d.u,d.x0,T.xw,T.SQ,T.Wh,T.yH,K.ey,b.lW,te.oG,Y.Mq,Y.hl,Y.nW,Z.ZT,Z.uh,Z.H8,Q.Hw,A.Nt,v.KE,v.hX,v.bx,v.TO,v.R9,tt.d,q.gD,Tt.uX,Tt.SP,ee.tW,vt.w9,vt.jq,w.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.file-input{display:none}.custom-button{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px;height:40px}.custom-button:hover{background-color:#0056b3}\n"],encapsulation:2});var mn=f(3609);class pn{}function hn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(2),t.Oqu(t.lcZ(3,3,"BTN.SAVE"))}}class kt{constructor(e,i,n,r){this.dialogRef=e,this.data=i,this.localStore=n,this.fb=r,this.userPerm=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.form=this.fb.group({id:null,INSCode:null,INSContractTyps:"I",INSStatus:"N",INSValue:0,INSPayedValue:0,dueDate:null,INSDueToDate:null,payDate:null,INSPersonPayName:null,INSNotes:null,RowConfirm:0,RowDelete:0,RowStatus:0,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,customer_KeyField:null}),this.data.cttRow?(console.log("===this.data.cttRow==="),console.log(this.data.cttRow),this.action="Patch",this.form.patchValue({id:this.data.cttRow.id,INSCode:this.data.cttRow.INSCode,dueDate:new Date(this.data.cttRow.INSDueDate),INSDueToDate:new Date(this.data.cttRow.INSDueToDate),payDate:new Date(this.data.cttRow.INSPayDate),INSPersonPayName:this.data.cttRow.INSPersonPayName,INSNotes:this.data.cttRow.INSNotes,contract_KeyField:this.data.cttRow.contract_KeyField,branch_KeyField:this.data.cttRow.branch_KeyField,owner_KeyField:this.data.cttRow.owner_KeyField,build_KeyField:this.data.cttRow.build_KeyField,unit_KeyField:this.data.cttRow.unit_KeyField,customer_KeyField:this.data.cttRow.customer_KeyField,INSContractTyps:this.data.cttRow.INSContractTyps,INSStatus:this.data.cttRow.INSStatus,INSValue:this.data.cttRow.INSValue,INSPayedValue:this.data.cttRow.INSPayedValue,RowConfirm:this.data.cttRow.RowConfirm,RowDelete:this.data.cttRow.RowDelete,RowStatus:this.data.cttRow.RowStatus})):(console.log("==contract****:: "+this.data.contract),this.action="Post",this.form.patchValue({contract_KeyField:this.data.contract,branch_KeyField:this.data.branch,owner_KeyField:this.data.owner,build_KeyField:this.data.build,unit_KeyField:this.data.unit,customer_KeyField:this.data.customer,INSContractTyps:"I",INSStatus:"N",INSValue:0,INSPayedValue:0,RowConfirm:0,RowDelete:0,RowStatus:0}))}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onSave(){console.log("===***Press Save button***==="),this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value})}close(){console.log("===***Press Close button***==="),this.action="Cancel",this.dialogRef.close({event:this.action})}}kt.\u0275fac=function(e){return new(e||kt)(t.Y36(Z.so),t.Y36(Z.WI),t.Y36(p.C),t.Y36(d.QS))},kt.\u0275cmp=t.Xpm({type:kt,selectors:[["app-installment-dialog"]],decls:83,vars:53,consts:[["mat-dialog-title",""],[1,"user-form",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","24.98",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","INSCode","required",""],["fxFlex","100","fxFlex.gt-sm","25.0",1,"px-1"],["matInput","","formControlName","INSValue","required",""],["matInput","","formControlName","dueDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["dueDate",""],["matInput","","formControlName","INSDueToDate","required","",3,"matDatepicker"],["dueToDate",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","INSStatus","id","instStatusOpSel",3,"placeholder"],[3,"value"],["matInput","","formControlName","INSPayedValue"],["matInput","","formControlName","payDate",3,"matDatepicker"],["payDate",""],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","INSNotes"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",7),t.qZA()(),t.TgZ(13,"div",8)(14,"mat-form-field",6)(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",9),t.qZA()(),t.TgZ(19,"div",8)(20,"mat-form-field",6)(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"input",10)(25,"mat-datepicker-toggle",11)(26,"mat-datepicker",null,12),t.qZA()(),t.TgZ(28,"div",8)(29,"mat-form-field",6)(30,"mat-label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"input",13)(34,"mat-datepicker-toggle",11)(35,"mat-datepicker",null,14),t.qZA()()(),t.TgZ(37,"div",4)(38,"div",15)(39,"mat-form-field",6)(40,"mat-label"),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"mat-select",16),t.ALo(44,"translate"),t.TgZ(45,"mat-option",17),t._uU(46,"-"),t.qZA(),t.TgZ(47,"mat-option",17),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"mat-option",17),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"mat-option",17),t._uU(54),t.ALo(55,"translate"),t.qZA()()()(),t.TgZ(56,"div",15)(57,"mat-form-field",6)(58,"mat-label"),t._uU(59),t.ALo(60,"translate"),t.qZA(),t._UZ(61,"input",18),t.qZA()(),t.TgZ(62,"div",15)(63,"mat-form-field",6)(64,"mat-label"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t._UZ(67,"input",19)(68,"mat-datepicker-toggle",11)(69,"mat-datepicker",null,20),t.qZA()()(),t.TgZ(71,"div",21)(72,"mat-form-field",6)(73,"mat-label"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t._UZ(76,"input",22),t.qZA()()()(),t.TgZ(77,"div",23)(78,"div",4),t.YNc(79,hn,4,5,"button",24),t.TgZ(80,"button",25),t.NdJ("click",function(){return i.close()}),t._uU(81),t.ALo(82,"translate"),t.qZA()()()()),2&e){const n=t.MAs(27),r=t.MAs(36),l=t.MAs(70);t.xp6(1),t.Oqu(t.lcZ(2,25,"HTML.InstallmentData")),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(7),t.Oqu(t.lcZ(11,27,"HTML.CODE")),t.xp6(6),t.Oqu(t.lcZ(17,29,"HTML.InstallmentValue")),t.xp6(6),t.Oqu(t.lcZ(23,31,"HTML.DueDate")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(32,33,"HTML.DueToDate")),t.xp6(2),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(7),t.Oqu(t.lcZ(42,35,"HTML.InstallmentStatus")),t.xp6(2),t.s9C("placeholder",t.lcZ(44,37,"HTML.InstallmentStatus")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(49,39,"OPTIONS.NotPayed")),t.xp6(2),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(52,41,"OPTIONS.Payed")),t.xp6(2),t.Q6J("value","T"),t.xp6(1),t.Oqu(t.lcZ(55,43,"OPTIONS.PartialPayed")),t.xp6(5),t.Oqu(t.lcZ(60,45,"HTML.PayedValue")),t.xp6(6),t.Oqu(t.lcZ(66,47,"HTML.PayedDate")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(6),t.Oqu(t.lcZ(75,49,"HTML.Notes")),t.xp6(5),t.Q6J("ngIf",i.can("change_installment")),t.xp6(2),t.Oqu(t.lcZ(82,51,"BTN.CANCEL"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,_.O5,d.sg,d.u,T.xw,T.Wh,T.yH,K.ey,b.lW,Y.Mq,Y.hl,Y.nW,Z.ZT,Z.uh,Z.xY,Z.H8,A.Nt,v.KE,v.hX,v.R9,q.gD,w.X$]});var Ze=f(1008);function gn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.openCategoryDialog(null))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HTML.AddInstallment")))}function _n(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.openCategoryDialog(r))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.EDIT"))}function fn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.remove(r.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function Cn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.printEInvoice(r))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.TaxInvoice"))}function Tn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.printEInvoiceRequest(r))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"account_balance_wallet"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.TaxRequest"))}function bn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.createDocumentNumber("S",r))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"key"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.TaxInvoice"))}function vn(o,e){if(1&o&&(t.TgZ(0,"div",9)(1,"div",10),t._uU(2),t.qZA(),t.TgZ(3,"div",10),t._uU(4),t.qZA(),t.TgZ(5,"div",10),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"div",10),t._uU(9),t.qZA(),t.TgZ(10,"div",10),t._uU(11),t.qZA(),t.TgZ(12,"div",10)(13,"div",11),t.YNc(14,_n,4,3,"button",12),t.YNc(15,fn,4,3,"button",13),t.YNc(16,Cn,4,3,"button",12),t.YNc(17,Tn,4,3,"button",12),t.YNc(18,bn,4,3,"button",12),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.INSCode),t.xp6(2),t.Oqu(i.INSValue),t.xp6(2),t.Oqu(t.xi3(7,10,i.INSDueDate,"yyyy-MM-dd")),t.xp6(3),t.Oqu(i.INSStatusDisplay),t.xp6(2),t.Oqu(i.INSPayedValue),t.xp6(3),t.Q6J("ngIf",n.can("view_installment")),t.xp6(1),t.Q6J("ngIf",n.can("delete_installment")),t.xp6(1),t.Q6J("ngIf",("P"==i.customer_EInvoiceType||"B"==i.customer_EInvoiceType)&&n.can("view_installment")),t.xp6(1),t.Q6J("ngIf",("P"==i.customer_EInvoiceType||"B"==i.customer_EInvoiceType)&&n.can("view_installment")),t.xp6(1),t.Q6J("ngIf",("P"==i.customer_EInvoiceType||"B"==i.customer_EInvoiceType)&&n.can("view_installment"))}}function Zn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"mat-card",18)(3,"pagination-controls",19),t.NdJ("pageChange",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(r))}),t.qZA()()()()}}const An=function(o,e){return{itemsPerPage:o,currentPage:e}};class Bt{constructor(e,i,n,r,l,C,y,U,M,F,J,et,ot){this.transferService=e,this.localStore=i,this.global=n,this.router=r,this.activatedRoute=l,this._contractService=C,this.invoiceService=y,this.settingService=U,this.snackBar=M,this.translateService=F,this.fb=J,this.dialog=et,this.appSettings=ot,this.contractInstallmentsArray=[],this.count=6,this.curCOMId=N.N.comid,this.account=new at.n,this.installmentForDisplay={id:void 0,COMId:void 0,INSCode:void 0,contract_KeyField:void 0,branch_KeyField:void 0,owner_KeyField:void 0,build_KeyField:void 0,unit_KeyField:void 0,customer_KeyField:void 0,INSContractTyps:void 0,INSStatus:void 0,INSValue:void 0,INSDueDate:void 0,INSDueToDate:void 0,INSPayedValue:void 0,INSPayDate:null,INSPersonPayName:void 0,INSNotes:void 0,EntryDate:void 0,EntryUser:void 0,RowConfirm:void 0,RowStatus:void 0,RowDelete:void 0},this.userPerm=[],this.expensesInvoiceCTT=(new x.I).ExpensesInvoice,this.sellInvoiceCTT=(new x.I).SellInvoice,this.addAlarmCTT=(new x.I).AddAlarm,this.discountAlarmCTT=(new x.I).DiscountAlarm,this.requestInvoiceCTT=(new x.I).RequestInvoice,this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=+e.id,this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id),this._contractService.getOneContract(this.id).subscribe(i=>{this.contract_KeyField=i.id,this.branch_KeyField=i.branch_KeyField,this.owner_KeyField=i.owner_KeyField,this.build_KeyField=i.build_KeyField,this.unit_KeyField=i.unit_KeyField,this.customer_KeyField=i.customer_KeyField})):this.Insta=new pn})}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}generateUserName(e,i){return this.pad(e,4)+i}pad(e,i){let n=e+"";for(;n.length<i;)n="0"+n;return n}createDocumentNumber(e,i){var n,r;switch(e){case"X":this.curDocUsed=this.expensesInvoiceCTT;break;case"S":default:this.curDocUsed=this.sellInvoiceCTT;break;case"A":this.curDocUsed=this.addAlarmCTT;break;case"D":this.curDocUsed=this.discountAlarmCTT;break;case"R":this.curDocUsed=this.requestInvoiceCTT}this.filterString="M="+this.curCOMId+"&C="+this.curUserData.periorty+"&usr=all",this.invoiceNumber="",this.settingService.getSerialsPerType(this.curCOMId,this.curUserData.periorty,this.curDocUsed).subscribe(l=>{this.docserialType=l[0].DOSDocSerialType,"P"==this.docserialType?this.settingService.getAllDetaisForSerial(this.curCOMId,this.curUserData.periorty,l[0].id).subscribe(C=>{for(let y=0;y<C.length;y++)if(this.partType=C[y].DSDPartType,this.partDigitNo=C[y].DSDNoOfDigits,this.partStartWith=C[y].DSDPartStartWith??"",this.partStartWith.length==+this.partDigitNo)this.invoiceNumber+=this.partStartWith;else if(this.partStartWith.length>+this.partDigitNo)this.invoiceNumber+=this.partStartWith.substring(0,+this.partDigitNo-1);else if(this.partStartWith.length<+this.partDigitNo)switch(this.invoiceNumber+=this.partStartWith,this.remainderLength=+this.partDigitNo-this.partStartWith.length,this.partType){case"Y":n=(new Date).getFullYear().toString(),r=n,n=n.substring(n.length-+this.remainderLength),this.invoiceNumber+=n,this.filterString+="&year="+r;break;case"M":r=((new Date).getMonth()+1).toString(),n="0"+r.slice(-2),this.invoiceNumber+=n,this.filterString+="&month="+r;break;case"B":n=i.branch_KeyField.length>=+this.remainderLength?i.branch_KeyField.toString().slice(-this.remainderLength):this.pad(i.branch_KeyField,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&branch="+i.branch_KeyField;break;case"O":n=i.owner_KeyField.length>=+this.remainderLength?i.owner_KeyField.toString().slice(-this.remainderLength):this.pad(i.owner_KeyField,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&owner="+i.owner_KeyField;break;case"P":n=i.build_KeyField.length>=+this.remainderLength?i.build_KeyField.toString().slice(-this.remainderLength):this.pad(i.build_KeyField,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&building="+i.build_KeyField;break;case"U":n=i.unit_KeyField.length>=+this.remainderLength?i.unit_KeyField.toString().slice(-this.remainderLength):this.pad(i.unit_KeyField,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&unit="+i.unit_KeyField;break;case"T":n=i.CUSKeyField.length>=+this.remainderLength?i.CUSKeyField.toString().slice(-this.remainderLength):this.pad(i.CUSKeyField,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&customer="+i.CUSKeyField;break;case"C":n=i.contract_KeyField.length>=+this.remainderLength?i.contract_KeyField.toString().slice(-this.remainderLength):this.pad(i.contract_KeyField,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&contract="+i.contract_KeyField;break;case"E":n=i.curUserData.id.length>=+this.remainderLength?i.curUserData.id.toString().slice(-this.remainderLength):this.pad(i.curUserData.id,this.remainderLength),this.invoiceNumber+=n,this.filterString+="&user="+i.curUserData.id;break;case"F":this.invoiceNumber+=n=this.partStartWith;break;case"S":console.log("----++++++++++-------"),console.log("this.filterString:: "+this.filterString),console.log("----++++++++++-------"),this.invoiceService.getInvoicesPerSpecOneString(this.filterString).subscribe(U=>{U.length>0?(this.maxSerial=U[0].INVSerial??0,this.maxSerial+=1,(r=this.maxSerial.toString()).length>=this.partDigitNo?this.invoiceNumber+=n=r:(n=this.pad(r.toString(),this.partDigitNo),this.invoiceNumber+=n),console.log("-------*****PartType=P*after Serial*****---------"),console.log("this.maxSerial:: "+this.maxSerial),console.log("this.invoiceNumber:: "+this.invoiceNumber),console.log("-------***********---------")):(this.maxSerial=1,this.partDigitNo>1?(n=this.pad(1,this.partDigitNo),this.invoiceNumber+=n):this.invoiceNumber+="1",console.log("-------*****PartType=P*after Serial new rows*****---------"),console.log("this.maxSerial:: "+this.maxSerial),console.log("this.invoiceNumber:: "+this.invoiceNumber),console.log("-------***********---------"))})}}):this._contractService.getMaxContractCodeForOwner(this.curCOMId,this.curUserData.periorty,this.curDocUsed).subscribe(C=>{this.maxSerial=C.max,this.invoiceNumber=this.maxSerial.toString(),console.log("-------*****PartType=G******---------"),console.log("this.maxSerial:: "+this.maxSerial),console.log("this.invoiceNumber:: "+this.invoiceNumber),console.log("-------***********---------")})})}createInvoiceNumber(e,i,n){let r=i??0;r+=1;let l=this.pad(r,n);this.newInvNumber=e+l}printEInvoice(e){this.createInvoiceNumber(e.owner_InvMask,+e.owner_LastInvCode,+e.owner_InvCodeLength),this.invType="INV",this.transferService.setMessage({customer_EInvoiceType:e.customer_EInvoiceType,invType:this.invType,ownerID:e.owner_KeyField,tenantID:e.customer_KeyField,ownerTaxNumber:e.owner_TaxNumber,ownerName:e.owner_FullName,ownerAddress:e.owner_Address,ownerCommRegister:e.owner_CommercialRegister,tenantCommRegister:e.customer_CommercialRegister,ownerBankName:e.owner_BankName,ownerBankAccountNumber:e.owner_BankAccountNumber,accountOwnerName:e.owner_BankAccountOwnerName,tenantName:e.customer_Name,tenantAddress:e.customer_Address,tenantTaxNumber:e.customer_TaxNumber,invoiceValue:e.INSValue-e.INSPayedValue,invoiceNumber:this.newInvNumber,intervalStartDate:e.contract_StartDate,intervalEndDate:e.contract_EndDate,ownerLogo:e.owner_LogoPic,ownerLogoBase64:e.owner_LogoBase64}),this.router.navigate(["/contracts/print-einvoice/"])}printEInvoiceRequest(e){this.invType="REQUEST",this.newRequestNumber="R2024000001",this.transferService.setMessage({customer_EInvoiceType:e.customer_EInvoiceType,invType:this.invType,ownerID:e.owner_KeyField,tenantID:e.customer_KeyField,ownerTaxNumber:e.owner_TaxNumber,ownerName:e.owner_FullName,ownerAddress:e.owner_Address,ownerCommRegister:e.owner_CommercialRegister,tenantCommRegister:e.customer_CommercialRegister,ownerBankName:e.owner_BankName,ownerBankAccountNumber:e.owner_BankAccountNumber,accountOwnerName:e.owner_BankAccountOwnerName,tenantName:e.customer_Name,tenantAddress:e.customer_Address,tenantTaxNumber:e.customer_TaxNumber,invoiceValue:e.INSValue-e.INSPayedValue,invoiceNumber:this.newRequestNumber,intervalStartDate:e.contract_StartDate,intervalEndDate:e.contract_EndDate,ownerLogo:e.owner_LogoPic,ownerLogoBase64:e.owner_LogoBase64}),this.router.navigate(["/contracts/print-einvoice/"])}onPageChanged(e){this.page=e,window.scrollTo(0,0)}openCategoryDialog(e){this.dialog.open(kt,{data:{cttRow:e,contract:this.contract_KeyField,branch:this.branch_KeyField,owner:this.owner_KeyField,build:this.build_KeyField,unit:this.unit_KeyField,customer:this.customer_KeyField},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{console.log("=====result.event:: "+n.event),"Cancel"==n.event||("Patch"==n.event?(this.mapFormvalue_to_InstallmentClass(n.data),this.updateInstallment(this.installmentForDisplay)):"Post"==n.event&&(this.mapFormvalue_to_InstallmentClass(n.data),this.addInstallment(this.installmentForDisplay)))})}addInstallment(e){console.log("====inside addInstallment== ==="),this._contractService.addInstallments(e).subscribe(i=>this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id))}updateInstallment(e){console.log("====inside updateInstallment====="),this._contractService.editInstallments(e).subscribe(i=>this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id))}mapFormvalue_to_InstallmentClass(e){if(console.log("====formValue.dueDate:: "+e.dueDate),null!=e.dueDate){const l=new _.uU("en-GB").transform(e.dueDate,"yyyy/MM/dd");new Date(new _.uU("en-GB").transform(new Date(e.dueDate),"yyyy/MM/dd")),this.installmentForDisplay.INSDueDate=l}if(null!=e.INSDueToDate){var n=new Date(new _.uU("en-GB").transform(e.INSDueToDate,"yyyy/MM/dd"));this.installmentForDisplay.INSDueToDate=n}if(null!=e.payDate){const l=new _.uU("en-GB").transform(e.payDate,"dd/MM/yyyy");new Date(new _.uU("en-GB").transform(new Date(e.payDate),"yyyy/MM/dd")),this.installmentForDisplay.INSPayDate=l}this.installmentForDisplay.id=e.id,this.installmentForDisplay.INSCode=e.INSCode,this.installmentForDisplay.INSContractTyps=e.INSContractTyps,this.installmentForDisplay.INSStatus=e.INSStatus,this.installmentForDisplay.INSValue=e.INSValue,this.installmentForDisplay.INSPayedValue=e.INSPayedValue,this.installmentForDisplay.INSPersonPayName=e.INSPersonPayName,this.installmentForDisplay.INSNotes=e.INSNotes,this.installmentForDisplay.RowConfirm=e.RowConfirm,this.installmentForDisplay.RowDelete=e.RowDelete,this.installmentForDisplay.RowStatus=e.RowStatus,this.installmentForDisplay.contract_KeyField=e.contract_KeyField,this.installmentForDisplay.branch_KeyField=e.branch_KeyField,this.installmentForDisplay.owner_KeyField=e.owner_KeyField,this.installmentForDisplay.build_KeyField=e.build_KeyField,this.installmentForDisplay.unit_KeyField=e.unit_KeyField,this.installmentForDisplay.customer_KeyField=e.customer_KeyField}getInstallmentsPerContract(e,i,n){this._contractService.getInstallmentsPerContract(e,i,n).subscribe(r=>{this.contractInstallmentsArray=r},r=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}remove(e){this.dialog.open(nt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this._contractService.deleteInstallment(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,e)})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}Bt.\u0275fac=function(e){return new(e||Bt)(t.Y36(ut.y),t.Y36(p.C),t.Y36(j.U),t.Y36(k.F0),t.Y36(k.gz),t.Y36(g.W),t.Y36(Ze.q),t.Y36(dt.g),t.Y36(I.ux),t.Y36(w.sK),t.Y36(d.qu),t.Y36(Z.uw),t.Y36(rt.d))},Bt.\u0275cmp=t.Xpm({type:Bt,selectors:[["app-installment"]],decls:34,vars:27,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","click"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"h2"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.YNc(6,gn,3,3,"button",2),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",3)(9,"div",4)(10,"div",5)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",5)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",5)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",5)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",5)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t._UZ(30,"div",5),t.qZA(),t.YNc(31,vn,19,13,"div",6),t.ALo(32,"paginate"),t.qZA()(),t.YNc(33,Zn,4,0,"div",7),t.qZA()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,9,"BTN.INSTALLMENT")),t.xp6(2),t.Q6J("ngIf",i.can("add_installment")),t.xp6(6),t.hij(" ",t.lcZ(13,11,"HTML.CODE")," "),t.xp6(4),t.hij(" ",t.lcZ(17,13,"HTML.InstallmentValue")," "),t.xp6(4),t.hij(" ",t.lcZ(21,15,"HTML.DueDate")," "),t.xp6(4),t.hij(" ",t.lcZ(25,17,"HTML.InstallmentStatus")," "),t.xp6(4),t.hij(" ",t.lcZ(29,19,"HTML.PayedValue")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(32,21,i.contractInstallmentsArray,t.WLB(24,An,i.count,i.page))),t.xp6(2),t.Q6J("ngIf",i.contractInstallmentsArray.length>0))},dependencies:[X.LS,_.sg,_.O5,T.xw,T.Wh,T.yH,b.lW,b.nh,G.a8,Q.Hw,tt.d,pt.gM,X._s,_.uU,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:480px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});var Ae=f(6166),yn=f(4159),ye=f.n(yn);function xn(o,e){if(1&o&&(t.TgZ(0,"div",7)(1,"div",10),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"div",10),t._uU(5),t.qZA(),t.TgZ(6,"div",10),t._uU(7),t.qZA(),t.TgZ(8,"div",10),t._uU(9),t.qZA()()),2&o){const i=e.$implicit;t.xp6(2),t.Oqu(t.xi3(3,4,i.TSTDate,"yyyy-MM-dd")),t.xp6(3),t.Oqu(i.TSTDebitValue),t.xp6(2),t.Oqu(i.TSTCreditValue),t.xp6(2),t.Oqu(i.TSTDescription)}}function Un(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"mat-card",13)(3,"pagination-controls",14),t.NdJ("pageChange",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(r))}),t.qZA()()()()}}const wn=function(o,e){return{itemsPerPage:o,currentPage:e}};class Wt{constructor(e,i,n,r,l,C,y,U){this.localStore=e,this.global=i,this.router=n,this.activatedRoute=r,this.tenantsService=l,this.snackBar=C,this.translateService=y,this.appSettings=U,this.tenantStatementArray=[],this.count=10,this.curCOMId=N.N.comid,this.account=new at.n,this.totalDebitValue=0,this.tempDebitValue=0,this.totalCreditValue=0,this.tempCreditValue=0,this.settings=this.appSettings.settings}ngOnInit(){this.emptyString=" ",this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")?(this.global.me=JSON.parse(this.localStore.getItem("account")),this.prepareMsgLanguage(),this.sub=this.activatedRoute.params.subscribe(e=>{e.id&&(this.id=+e.id,this.getCustomer(this.id),this.getStatementsPerCustomer(this.curCOMId,this.account.periorty,this.id))})):this.router.navigate(["/sign-in"])}downloadPDF(){var e=document.getElementById("contentToConvert");ye()(e).then(i=>{var l=208*i.height/i.width;const y=i.toDataURL("image/png");let U=new Ae.ZP("p","mm","a4");U.addImage(y,"PNG",0,0,208,l),U.save("MYPdf.pdf")})}onPageChanged(e){this.page=e,window.scrollTo(0,0)}getStatementsPerCustomer(e,i,n){this.totalDebitValue=0,this.totalCreditValue=0,this.tenantsService.getStatementsPerCustomers(e,i,n).subscribe(r=>{this.tenantStatementArray=r;for(let l=0;l<this.tenantStatementArray.length;l++)this.tempDebitValue=+this.tenantStatementArray[l].TSTDebitValue,this.totalDebitValue+=this.tempDebitValue,this.tempCreditValue=+this.tenantStatementArray[l].TSTCreditValue,this.totalCreditValue+=this.tempCreditValue},r=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCustomer(e){this.tenantsService.getOneCustomer(e).subscribe(i=>{this.cusName=i.CUSName})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e})}}Wt.\u0275fac=function(e){return new(e||Wt)(t.Y36(p.C),t.Y36(j.U),t.Y36(k.F0),t.Y36(k.gz),t.Y36(L.v),t.Y36(I.ux),t.Y36(w.sK),t.Y36(rt.d))},Wt.\u0275cmp=t.Xpm({type:Wt,selectors:[["app-tenant-statements"]],decls:43,vars:33,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click"],["id","contentToConvert",1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell","primary-text","notifbold"],["fxLayout","row wrap",4,"ngIf"],[1,"mat-mdc-cell"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"button",2),t.NdJ("click",function(){return i.downloadPDF()}),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t._UZ(6,"mat-divider"),t.TgZ(7,"div",3)(8,"div",1)(9,"h2"),t._uU(10),t.ALo(11,"translate"),t.qZA()(),t._UZ(12,"mat-divider"),t.TgZ(13,"div",4)(14,"div",5)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",5)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",5)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",5)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t.YNc(30,xn,10,7,"div",6),t.ALo(31,"paginate"),t.TgZ(32,"div",7)(33,"div",8),t._uU(34,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(35,"div",8),t._uU(36),t.qZA(),t.TgZ(37,"div",8),t._uU(38),t.qZA(),t.TgZ(39,"div",8),t._uU(40),t.ALo(41,"translate"),t.qZA()()()(),t.YNc(42,Un,4,0,"div",9),t.qZA()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,13,"BTN.DownloadPDF")),t.xp6(6),t.AsE("",t.lcZ(11,15,"BTN.Statements")," :: ",i.cusName,""),t.xp6(6),t.hij(" ",t.lcZ(17,17,"HTML.Date")," "),t.xp6(4),t.hij(" ",t.lcZ(21,19,"HTML.Debit")," "),t.xp6(4),t.hij(" ",t.lcZ(25,21,"HTML.Credit")," "),t.xp6(4),t.hij(" ",t.lcZ(29,23,"HTML.Description")," "),t.xp6(2),t.Q6J("ngForOf",t.xi3(31,25,i.tenantStatementArray,t.WLB(30,wn,i.count,i.page))),t.xp6(6),t.hij(" ",i.totalDebitValue," "),t.xp6(2),t.hij(" ",i.totalCreditValue," "),t.xp6(2),t.AsE(" ",t.lcZ(41,28,"HTML.Balance")," (",i.totalCreditValue-i.totalDebitValue,") "),t.xp6(2),t.Q6J("ngIf",i.tenantStatementArray.length>0))},dependencies:[X.LS,_.sg,_.O5,T.xw,T.Wh,T.yH,b.lW,G.a8,tt.d,X._s,_.uU,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:480px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});class On{}function Nn(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function Sn(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function In(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"First name is required"),t.qZA())}function Dn(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Last name is required"),t.qZA())}function Fn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-form-field",17)(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"input",83),t.ALo(5,"translate"),t.TgZ(6,"mat-icon",84),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.passwordHide=!r.passwordHide)}),t._uU(7),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"HTML.PASSWORD")),t.xp6(2),t.s9C("placeholder",t.lcZ(5,6,"HTML.PASSWORD")),t.Q6J("type",i.passwordHide?"password":"text"),t.xp6(3),t.Oqu(i.passwordHide?"visibility":"visibility_off")}}function Ln(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-form-field",17)(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"input",85),t.ALo(5,"translate"),t.TgZ(6,"mat-icon",84),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.confirmpasswordHide=!r.confirmpasswordHide)}),t._uU(7),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"HTML.ConfirmPassword")),t.xp6(2),t.s9C("placeholder",t.lcZ(5,6,"HTML.ConfirmPassword")),t.Q6J("type",i.confirmpasswordHide?"password":"text"),t.xp6(3),t.Oqu(i.confirmpasswordHide?"visibility":"visibility_off")}}function Mn(o,e){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function qn(o,e){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function En(o,e){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Rn(o,e){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Pn(o,e){if(1&o&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function kn(o,e){if(1&o&&(t.TgZ(0,"mat-tab",86),t.ALo(1,"translate"),t.TgZ(2,"div",6)(3,"mat-dialog-content",7)(4,"div",8)(5,"div",87)(6,"mat-form-field",17)(7,"mat-label"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"input",88),t.qZA()(),t.TgZ(11,"div",41)(12,"mat-form-field",17)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",89),t.qZA()(),t.TgZ(17,"div",41)(18,"mat-form-field",17)(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",90),t.qZA()()()(),t.TgZ(23,"div",8)(24,"div",91)(25,"mat-form-field",17)(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"mat-select",92),t.ALo(30,"translate"),t.TgZ(31,"mat-option",22),t._uU(32,"-"),t.qZA(),t.TgZ(33,"mat-option",22),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"mat-option",22),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"mat-option",22),t._uU(40),t.ALo(41,"translate"),t.qZA()()()(),t.TgZ(42,"div",91)(43,"mat-form-field",17)(44,"mat-label"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"mat-select",93),t.ALo(48,"translate"),t.TgZ(49,"mat-option",22),t._uU(50,"-"),t.qZA(),t.YNc(51,Pn,2,2,"mat-option",52),t.qZA()()(),t.TgZ(52,"div",94)(53,"mat-form-field",17)(54,"mat-label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"input",95),t.qZA()()()()()),2&o){const i=t.oxw();t.s9C("label",t.lcZ(1,16,"HTML.TAB_EINVOICE")),t.xp6(8),t.Oqu(t.lcZ(9,18,"HTML.OrganizationName")),t.xp6(6),t.Oqu(t.lcZ(15,20,"HTML.OrganizationUnit")),t.xp6(6),t.Oqu(t.lcZ(21,22,"HTML.CommonName")),t.xp6(7),t.Oqu(t.lcZ(28,24,"HTML.TypeOfInvoices")),t.xp6(2),t.s9C("placeholder",t.lcZ(30,26,"HTML.TypeOfInvoices")),t.xp6(4),t.Q6J("value","0100"),t.xp6(1),t.Oqu(t.lcZ(35,28,"OPTIONS.Simple")),t.xp6(2),t.Q6J("value","1000"),t.xp6(1),t.Oqu(t.lcZ(38,30,"OPTIONS.Standard")),t.xp6(2),t.Q6J("value","1100"),t.xp6(1),t.Oqu(t.lcZ(41,32,"OPTIONS.SimpleStandard")),t.xp6(5),t.Oqu(t.lcZ(46,34,"HTML.BusinessCategory")),t.xp6(2),t.s9C("placeholder",t.lcZ(48,36,"HTML.BusinessCategory")),t.xp6(4),t.Q6J("ngForOf",i.WorkField),t.xp6(4),t.hij(" ",t.lcZ(56,38,"HTML.OWNERSerialNumber"),"")}}function Bn(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function Wn(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Hn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",96),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.onSave())}),t.YNc(1,Bn,3,3,"span",1),t.YNc(2,Wn,3,3,"span",1),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.oneowner.id),t.xp6(1),t.Q6J("ngIf",i.oneowner.id)}}class xt{constructor(e,i,n,r,l,C,y,U){this.dialogRef=e,this.oneowner=i,this.atlasService=n,this.localStore=r,this.codesService=l,this.sanitizer=C,this.snackBar=y,this.fb=U,this.passwordHide=!0,this.confirmpasswordHide=!0,this.workField_const=(new x.I).WorkType,this.country_const=(new x.I).Countries,this.governorate_const=(new x.I).Governorates,this.city_const=(new x.I).City,this.region_const=(new x.I).Regions,this.defaultOwnerImage=(new S.P).noImage,this.defaultOwnerIDImage=(new S.P).noImage,this.defaultOwnerLogo=(new S.P).noImage,this.OwnerImageToUpload=null,this.OwnerIDImageToUpload=null,this.OwnerLogoToUpload=null,this.curCOMId=N.N.comid,this.userPerm=[],this.WorkField=[],this.allowedChar="1234567890",this.lengthOfCode=6,this.Countries=[],this.Governorates=[],this.Cities=[],this.Areas=[]}handelOwnerImgInput(e){this.OwnerImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultOwnerImage=n.target.result},i.readAsDataURL(this.OwnerImageToUpload)}handelOwnerIDImgInput(e){this.OwnerIDImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultOwnerIDImage=n.target.result},i.readAsDataURL(this.OwnerIDImageToUpload)}handelOwnerLogo(e){this.OwnerLogoToUpload=e.item(0);var i=new FileReader;i.readAsDataURL(this.OwnerLogoToUpload),i.onload=n=>{this.defaultOwnerLogo=n.target.result,this.fileName=this.OwnerLogoToUpload.name+" "+this.OwnerLogoToUpload.type;const r=i.result.split(",")[1];this.filePreview="data:image/png;base64,"+r,this.form.patchValue({settings:{OWNLogoPicBase64:this.filePreview}})}}sanitize(e){return this.sanitizer.bypassSecurityTrustUrl(e)}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.oneowner.dataRow&&(this.id=this.oneowner.dataRow.id),this.form=this.fb.group({id:null,OWNFirstName:["",d.kI.compose([d.kI.required,d.kI.minLength(2)])],OWNLastName:["",d.kI.compose([d.kI.required,d.kI.minLength(2)])],OWNGender:null,OWNSelfType:null,OWNBirthDate:null,OWNPic:null,work:this.fb.group({OWNNationalIDType:null,OWNNationalID:null,OWNNationalIDStartDate:null,OWNNationalIDEndDate:null,OWNIDPic:null}),contacts:this.fb.group({username:{value:null,disabled:this.id},OWNPassword:null,confirmPassword:null,OWNEmail:["",d.kI.compose([d.kI.required,R.Le])],OWNMobile:[null,d.kI.required],OWNMobileWhatsapp:null,OWNHomePhone:null,OWNWorkPhone:null,OWNAddress:null,OWNShortAddress:null,OWNAddressDescription:null,OWNStreetName:null,OWNBuildingNumber:null,OWNZibCode:null,OWNBuildingSubNumber:null,country:null,governorate:null,city:null,area:null},{validator:(0,R.zi)("OWNPassword","confirmPassword")}),settings:this.fb.group({OWNActive:!1,OWNTaxNumber:null,OWNCommercialRegister:null,OWNBankName:null,OWNBankAccountNumber:null,OWNBankAccountOwnerName:null,OWNLastInvoiceCode:null,OWNInvoiceMask:null,OWNInvoiceNumberLength:null,OWNLogoPic:null,OWNLogoPicBase64:null,EntryDate:null}),einvoice:this.fb.group({OWNOrganizationName:"\u0627\u0644\u0645\u0628\u0631\u0645\u062c \u0627\u0644\u0639\u0631\u0628\u064a",OWNOrganizationUnit:"\u0641\u0631\u0639 \u062c\u062f\u0629",OWNCommonName:"CN123456789",OWNTypeOfInvoices:"1100",BusinessCategory_CTTKeyField:null,OWNCSR:null,OWNPublicKey:null,OWNPrivateKey:null,OWNCertificate:null,OWNComplianceAuth:null,OWNProductionAuth:null,OWNCountryShortName:"SA",OWNCitySubDivision:"Sharafia",OWNSerialNumber:"1-TST|2-TST|3-ea52s1d8-e6a2",OWNPlotIdentification:null,OWNTaxName:"Standard and Simplified"})}),this.getCountries(this.curCOMId,this.curUserData.periorty),this.getWorkField(this.curCOMId,this.curUserData.periorty),this.oneowner.dataRow?(this.curPeriority=this.curUserData.periorty,this.action="Patch",this.fillForm(this.oneowner.dataRow),this.oneowner.dataRow.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.curUserData.periorty,this.oneowner.dataRow.Country_CTTKeyField),this.oneowner.dataRow.Governorate_CTTKeyField&&this.getCityPerGoverno(this.curCOMId,this.curUserData.periorty,this.oneowner.dataRow.Governorate_CTTKeyField),this.oneowner.dataRow.City_CTTKeyField&&this.getAreaPerCity(this.curCOMId,this.curUserData.periorty,this.oneowner.dataRow.City_CTTKeyField)):(this.curPeriority=0,this.action="Post",this.oneowner.dataRow=new On,this.getMaxCodeForCustomers())}getWorkField(e,i){this.codesService.getSubForParent(e,i,this.workField_const).subscribe(n=>{this.WorkField=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0646\u0648\u0627\u0639 \u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0644\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}fillForm(e){this.defaultOwnerImage=null!=e.OWNPic?e.OWNPic:(new S.P).noImage,this.defaultOwnerIDImage=null!=e.OWNIDPic?e.OWNIDPic:(new S.P).noImage,this.defaultOwnerLogo=null!=e.OWNLogoPic?e.OWNLogoPic:(new S.P).noImage,this.form.patchValue({id:e.id,OWNFirstName:e.OWNFirstName,OWNLastName:e.OWNLastName,OWNGender:e.OWNGender,OWNBirthDate:e.OWNBirthDate,OWNSelfType:e.OWNSelfType,OWNPic:e.OWNPic,work:{OWNNationalIDType:e.OWNNationalIDType,OWNNationalID:e.OWNNationalID,OWNNationalIDStartDate:e.OWNNationalIDStartDate,OWNNationalIDEndDate:e.OWNNationalIDEndDate,OWNIDPic:e.OWNIDPic},contacts:{username:e.username,OWNPassword:e.OWNPassword,confirmPassword:e.OWNPassword,OWNEmail:e.OWNEmail,OWNMobile:e.OWNMobile,OWNMobileWhatsapp:e.OWNMobileWhatsapp,OWNHomePhone:e.OWNHomePhone,OWNWorkPhone:e.OWNWorkPhone,OWNAddress:e.OWNAddress,OWNShortAddress:e.OWNShortAddress,OWNBuildingSubNumber:e.OWNBuildingSubNumber,OWNAddressDescription:e.OWNAddressDescription,OWNStreetName:e.OWNStreetName,OWNBuildingNumber:e.OWNBuildingNumber,OWNZibCode:e.OWNZibCode,country:e.Country_CTTKeyField,governorate:e.Governorate_CTTKeyField,city:e.City_CTTKeyField,area:e.Area_CTTKeyField},settings:{OWNActive:e.OWNActive,OWNTaxNumber:e.OWNTaxNumber,OWNCommercialRegister:e.OWNCommercialRegister,OWNBankName:e.OWNBankName,OWNBankAccountNumber:e.OWNBankAccountNumber,OWNBankAccountOwnerName:e.OWNBankAccountOwnerName,OWNLogoPic:e.OWNLogoPic,OWNLogoPicBase64:e.OWNLogoPicBase64,OWNLastInvoiceCode:e.OWNLastInvoiceCode,OWNInvoiceMask:e.OWNInvoiceMask,OWNInvoiceNumberLength:e.OWNInvoiceNumberLength,EntryDate:e.entryDate},einvoice:{OWNOrganizationName:e.OWNOrganizationName,OWNOrganizationUnit:e.OWNOrganizationUnit,OWNCommonName:e.OWNCommonName,OWNTypeOfInvoices:e.OWNTypeOfInvoices,BusinessCategory_CTTKeyField:e.BusinessCategory_CTTKeyField,OWNCSR:e.OWNCSR,OWNPublicKey:e.OWNPublicKey,OWNPrivateKey:e.OWNPrivateKey,OWNCertificate:e.OWNCertificate,OWNComplianceAuth:e.OWNComplianceAuth,OWNProductionAuth:e.OWNProductionAuth,OWNCountryShortName:e.OWNCountryShortName,OWNCitySubDivision:e.OWNCitySubDivision,OWNSerialNumber:e.OWNSerialNumber,OWNPlotIdentification:e.OWNPlotIdentification,OWNTaxName:e.OWNTaxName}}),this.filePreview=e.OWNLogoPicBase64}onSave(){console.log("===***Press Save button***==="),this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value,ownPic:this.OwnerImageToUpload,ownerIDPic:this.OwnerIDImageToUpload,ownerLogo:this.OwnerLogoToUpload})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}createRandomString(e,i){let n="";for(let r=0;r<e;r++)n+=i.charAt(Math.floor(Math.random()*i.length));return n}getMaxCodeForCustomers(){let e=this.createRandomString(this.lengthOfCode,this.allowedChar);console.log(e),this.form.patchValue({contacts:{username:e,OWNPassword:e,confirmPassword:e,OWNEmail:"E"+e+"@jeddahlake.com"}})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(e){this.getGovernoratePerCountry(this.curCOMId,this.curUserData.periorty,e.value)}getGovernoratePerCountry(e,i,n){this.Governorates=[],this.Cities=[],this.Areas=[],this.codesService.getSubForParentAndRelated(e,i,this.governorate_const,n).subscribe(r=>{this.Governorates=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(e){this.getCityPerGoverno(this.curCOMId,this.curUserData.periorty,e.value)}getCityPerGoverno(e,i,n){this.Areas=[],this.codesService.getSubForParentAndRelated(e,i,this.city_const,n).subscribe(r=>{this.Cities=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(e){this.getAreaPerCity(this.curCOMId,this.curUserData.periorty,e.value)}getAreaPerCity(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.region_const,n).subscribe(r=>{this.Areas=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}}xt.\u0275fac=function(e){return new(e||xt)(t.Y36(Z.so),t.Y36(Z.WI),t.Y36(D.Z),t.Y36(p.C),t.Y36(Rt.d),t.Y36(Pt.H7),t.Y36(I.ux),t.Y36(d.QS))},xt.\u0275cmp=t.Xpm({type:xt,selectors:[["app-owners-dialog"]],decls:310,vars:200,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content",""],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],[1,"dialog-content"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["appearance","outline",1,"w-50"],["matInput","","formControlName","OWNFirstName","required",""],["appearance","outline",1,"w-45"],["matInput","","formControlName","OWNLastName","required",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","OWNGender",1,"w-100"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],["appearance","outline",1,"w-100"],["matInput","","formControlName","OWNBirthDate",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["formControlName","OWNSelfType","id","selftypeOpSel",3,"placeholder"],[3,"value"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","OWNPic","name","ownPic","id","OwnerPicupload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","work",3,"label"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["formControlName","OWNNationalIDType","id","idTypeOpSel",3,"placeholder"],["matInput","","formControlName","OWNNationalID"],["matInput","","formControlName","OWNNationalIDStartDate",3,"matDatepicker"],["idstartdate",""],["matInput","","formControlName","OWNNationalIDEndDate",3,"matDatepicker"],["idenddate",""],["formControlName","OWNIDPic","name","OWNIDPic","id","OwnerIDPicupload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","contacts",3,"label"],["fxFlex","100","fxFlex.gt-sm","29.9",1,"px-1"],["matInput","","formControlName","username","required","",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","69.8",1,"px-1"],["matInput","","formControlName","OWNEmail","required",""],["appearance","outline","class","w-100",4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","25.0",1,"px-1"],["matInput","","formControlName","OWNMobile"],["matInput","","formControlName","OWNMobileWhatsapp"],["matInput","","formControlName","OWNHomePhone"],["matInput","","formControlName","OWNWorkPhone"],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["matInput","","formControlName","OWNAddress"],["fxFlex","100","fxFlex.gt-sm","20.0",1,"px-1"],["matInput","","formControlName","OWNShortAddress"],["appearance","outline",1,"w-25"],["formControlName","country","id","countrOpSel",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","governorate","id","governoOpSel",3,"placeholder","selectionChange"],["appearance","outline",1,"w-24"],["formControlName","city","id","cityOpSel",3,"placeholder","selectionChange"],["formControlName","area","id","areaOpSel",3,"placeholder"],["appearance","outline",1,"w-40"],["matInput","","formControlName","OWNStreetName"],["appearance","outline",1,"w-20"],["matInput","","formControlName","OWNBuildingNumber"],["appearance","outline",1,"w-19"],["matInput","","formControlName","OWNZibCode"],["matInput","","formControlName","OWNBuildingSubNumber"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","OWNAddressDescription","rows","3"],["formGroupName","settings",3,"label"],["formControlName","OWNActive"],["matInput","","formControlName","OWNTaxNumber"],["appearance","outline",1,"w-49"],["matInput","","formControlName","OWNCommercialRegister"],["matInput","","formControlName","OWNBankName"],["matInput","","formControlName","OWNBankAccountNumber"],["matInput","","formControlName","OWNBankAccountOwnerName"],["matInput","","formControlName","OWNLastInvoiceCode"],["matInput","","formControlName","OWNInvoiceMask"],["matInput","","formControlName","OWNInvoiceNumberLength"],["formControlName","OWNLogoPic","name","OWNLogoPic","id","OwnerLogoupload","type","file","accept","image/*",1,"user-img",3,"change"],["width","150","height","150",3,"src"],["formGroupName","einvoice",3,"label",4,"ngIf"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["matInput","","formControlName","OWNPassword","minlength","6",3,"placeholder","type"],["matSuffix","",3,"click"],["matInput","","formControlName","confirmPassword",3,"placeholder","type"],["formGroupName","einvoice",3,"label"],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["matInput","","formControlName","OWNOrganizationName"],["matInput","","formControlName","OWNOrganizationUnit"],["matInput","","formControlName","OWNCommonName"],["fxFlex","100","fxFlex.gt-sm","30.0",1,"px-1"],["formControlName","OWNTypeOfInvoices","id","invtypeOpSel",3,"placeholder"],["formControlName","BusinessCategory_CTTKeyField","id","busicatOpSel",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","40.0",1,"px-1"],["matInput","","formControlName","OWNSerialNumber"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1",0),t.YNc(1,Nn,3,3,"span",1),t.YNc(2,Sn,3,3,"span",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",2)(6,"form",3)(7,"mat-tab-group",4)(8,"mat-tab",5),t.ALo(9,"translate"),t.TgZ(10,"div",6)(11,"mat-dialog-content",7)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label")(15,"mat-icon"),t._uU(16,"person"),t.qZA(),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",10),t.YNc(20,In,2,0,"mat-error",1),t.qZA(),t.TgZ(21,"mat-form-field",11)(22,"mat-label")(23,"mat-icon"),t._uU(24,"person"),t.qZA(),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"input",12),t.YNc(28,Dn,2,0,"mat-error",1),t.qZA()()(),t.TgZ(29,"div",8)(30,"div",13)(31,"mat-radio-group",14)(32,"mat-radio-button",15),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"mat-radio-button",16),t._uU(36),t.ALo(37,"translate"),t.qZA()()(),t.TgZ(38,"div",13)(39,"mat-form-field",17)(40,"mat-label"),t._uU(41),t.ALo(42,"translate"),t.qZA(),t._UZ(43,"input",18)(44,"mat-datepicker-toggle",19)(45,"mat-datepicker",null,20),t.qZA()(),t.TgZ(47,"div",13)(48,"mat-form-field",17)(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"mat-select",21),t.ALo(53,"translate"),t.TgZ(54,"mat-option",22),t._uU(55,"-"),t.qZA(),t.TgZ(56,"mat-option",22),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.TgZ(59,"mat-option",22),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"mat-option",22),t._uU(63),t.ALo(64,"translate"),t.qZA()()()()(),t.TgZ(65,"div",23),t._UZ(66,"img",24),t.TgZ(67,"input",25),t.NdJ("change",function(r){return i.handelOwnerImgInput(r.target.files)}),t.qZA()()()(),t.TgZ(68,"mat-tab",26),t.ALo(69,"translate"),t.TgZ(70,"div",6)(71,"mat-dialog-content",7)(72,"div",8)(73,"div",27)(74,"mat-form-field",17)(75,"mat-label"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"mat-select",28),t.ALo(79,"translate"),t.TgZ(80,"mat-option",22),t._uU(81,"-"),t.qZA(),t.TgZ(82,"mat-option",22),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"mat-option",22),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.TgZ(88,"mat-option",22),t._uU(89),t.ALo(90,"translate"),t.qZA(),t.TgZ(91,"mat-option",22),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.TgZ(94,"mat-option",22),t._uU(95),t.ALo(96,"translate"),t.qZA()()()(),t.TgZ(97,"div",27)(98,"mat-form-field",17)(99,"mat-label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t._UZ(102,"input",29),t.qZA()()()(),t.TgZ(103,"div",8)(104,"div",27)(105,"mat-form-field",17)(106,"mat-label"),t._uU(107),t.ALo(108,"translate"),t.qZA(),t._UZ(109,"input",30)(110,"mat-datepicker-toggle",19)(111,"mat-datepicker",null,31),t.qZA()(),t.TgZ(113,"div",27)(114,"mat-form-field",17)(115,"mat-label"),t._uU(116),t.ALo(117,"translate"),t.qZA(),t._UZ(118,"input",32)(119,"mat-datepicker-toggle",19)(120,"mat-datepicker",null,33),t.qZA()()(),t.TgZ(122,"div",23),t._UZ(123,"img",24),t.TgZ(124,"input",34),t.NdJ("change",function(r){return i.handelOwnerIDImgInput(r.target.files)}),t.qZA()()()(),t.TgZ(125,"mat-tab",35),t.ALo(126,"translate"),t.TgZ(127,"div",6)(128,"mat-dialog-content",7)(129,"div",8)(130,"div",36)(131,"mat-form-field",17)(132,"mat-label"),t._uU(133),t.ALo(134,"translate"),t.qZA(),t._UZ(135,"input",37),t.ALo(136,"translate"),t.qZA()(),t.TgZ(137,"div",38)(138,"mat-form-field",17)(139,"mat-label"),t._uU(140),t.ALo(141,"translate"),t.qZA(),t._UZ(142,"input",39),t.qZA()()()(),t.TgZ(143,"div",8)(144,"div",27),t.YNc(145,Fn,8,8,"mat-form-field",40),t.qZA(),t.TgZ(146,"div",27),t.YNc(147,Ln,8,8,"mat-form-field",40),t.qZA()(),t.TgZ(148,"div",8)(149,"div",41)(150,"mat-form-field",17)(151,"mat-label"),t._uU(152),t.ALo(153,"translate"),t.qZA(),t._UZ(154,"input",42),t.qZA()(),t.TgZ(155,"div",41)(156,"mat-form-field",17)(157,"mat-label"),t._uU(158),t.ALo(159,"translate"),t.qZA(),t._UZ(160,"input",43),t.qZA()(),t.TgZ(161,"div",41)(162,"mat-form-field",17)(163,"mat-label"),t._uU(164),t.ALo(165,"translate"),t.qZA(),t._UZ(166,"input",44),t.qZA()(),t.TgZ(167,"div",41)(168,"mat-form-field",17)(169,"mat-label"),t._uU(170),t.ALo(171,"translate"),t.qZA(),t._UZ(172,"input",45),t.qZA()()(),t.TgZ(173,"div",8)(174,"div",46)(175,"mat-form-field",17)(176,"mat-label"),t._uU(177),t.ALo(178,"translate"),t.qZA(),t._UZ(179,"input",47),t.qZA()(),t.TgZ(180,"div",48)(181,"mat-form-field",17)(182,"mat-label"),t._uU(183),t.ALo(184,"translate"),t.qZA(),t._UZ(185,"input",49),t.qZA()()(),t.TgZ(186,"div",8)(187,"mat-form-field",50)(188,"mat-label"),t._uU(189),t.ALo(190,"translate"),t.qZA(),t.TgZ(191,"mat-select",51),t.NdJ("selectionChange",function(r){return i.getGovernorate(r)}),t.ALo(192,"translate"),t.TgZ(193,"mat-option",22),t._uU(194,"-"),t.qZA(),t.YNc(195,Mn,2,2,"mat-option",52),t.qZA()(),t.TgZ(196,"mat-form-field",50)(197,"mat-label"),t._uU(198),t.ALo(199,"translate"),t.qZA(),t.TgZ(200,"mat-select",53),t.NdJ("selectionChange",function(r){return i.getCity(r)}),t.ALo(201,"translate"),t.TgZ(202,"mat-option",22),t._uU(203,"-"),t.qZA(),t.YNc(204,qn,2,2,"mat-option",52),t.qZA()(),t.TgZ(205,"mat-form-field",54)(206,"mat-label"),t._uU(207),t.ALo(208,"translate"),t.qZA(),t.TgZ(209,"mat-select",55),t.NdJ("selectionChange",function(r){return i.getAria(r)}),t.ALo(210,"translate"),t.TgZ(211,"mat-option",22),t._uU(212,"-"),t.qZA(),t.YNc(213,En,2,2,"mat-option",52),t.qZA()(),t.TgZ(214,"mat-form-field",50)(215,"mat-label"),t._uU(216),t.ALo(217,"translate"),t.qZA(),t.TgZ(218,"mat-select",56),t.ALo(219,"translate"),t.TgZ(220,"mat-option",22),t._uU(221,"-"),t.qZA(),t.YNc(222,Rn,2,2,"mat-option",52),t.qZA()()(),t.TgZ(223,"div",8)(224,"mat-form-field",57)(225,"mat-label"),t._uU(226),t.ALo(227,"translate"),t.qZA(),t._UZ(228,"input",58),t.qZA(),t.TgZ(229,"mat-form-field",59)(230,"mat-label"),t._uU(231),t.ALo(232,"translate"),t.qZA(),t._UZ(233,"input",60),t.qZA(),t.TgZ(234,"mat-form-field",61)(235,"mat-label"),t._uU(236),t.ALo(237,"translate"),t.qZA(),t._UZ(238,"input",62),t.qZA(),t.TgZ(239,"mat-form-field",59)(240,"mat-label"),t._uU(241),t.ALo(242,"translate"),t.qZA(),t._UZ(243,"input",63),t.qZA()(),t.TgZ(244,"div",64)(245,"mat-form-field",17)(246,"mat-label"),t._uU(247),t.ALo(248,"translate"),t.qZA(),t._UZ(249,"textarea",65),t.qZA()()()(),t.TgZ(250,"mat-tab",66),t.ALo(251,"translate"),t.TgZ(252,"div",6)(253,"mat-checkbox",67),t._uU(254,"Active"),t.qZA()(),t.TgZ(255,"div",6)(256,"div",8)(257,"mat-form-field",9)(258,"mat-label"),t._uU(259),t.ALo(260,"translate"),t.qZA(),t._UZ(261,"input",68),t.qZA(),t.TgZ(262,"mat-form-field",69)(263,"mat-label"),t._uU(264),t.ALo(265,"translate"),t.qZA(),t._UZ(266,"input",70),t.qZA()(),t.TgZ(267,"div",8)(268,"mat-form-field",9)(269,"mat-label"),t._uU(270),t.ALo(271,"translate"),t.qZA(),t._UZ(272,"input",71),t.qZA(),t.TgZ(273,"mat-form-field",11)(274,"mat-label"),t._uU(275),t.ALo(276,"translate"),t.qZA(),t._UZ(277,"input",72),t.qZA()(),t.TgZ(278,"div",8)(279,"mat-form-field",9)(280,"mat-label"),t._uU(281),t.ALo(282,"translate"),t.qZA(),t._UZ(283,"input",73),t.qZA(),t.TgZ(284,"mat-form-field",11)(285,"mat-label"),t._uU(286),t.ALo(287,"translate"),t.qZA(),t._UZ(288,"input",74),t.qZA()(),t.TgZ(289,"div",8)(290,"mat-form-field",9)(291,"mat-label"),t._uU(292),t.ALo(293,"translate"),t.qZA(),t._UZ(294,"input",75),t.qZA(),t.TgZ(295,"mat-form-field",11)(296,"mat-label"),t._uU(297),t.ALo(298,"translate"),t.qZA(),t._UZ(299,"input",76),t.qZA()(),t.TgZ(300,"div",23)(301,"input",77),t.NdJ("change",function(r){return i.handelOwnerLogo(r.target.files)}),t.qZA(),t._UZ(302,"img",78),t.qZA()()(),t.YNc(303,kn,58,40,"mat-tab",79),t.qZA()()(),t.TgZ(304,"div",80)(305,"div",8),t.YNc(306,Hn,3,4,"button",81),t.TgZ(307,"button",82),t.NdJ("click",function(){return i.close()}),t._uU(308),t.ALo(309,"translate"),t.qZA()()()),2&e){const n=t.MAs(46),r=t.MAs(112),l=t.MAs(121);t.xp6(1),t.Q6J("ngIf",!i.oneowner.id),t.xp6(1),t.Q6J("ngIf",i.oneowner.id),t.xp6(1),t.hij(" ",t.lcZ(4,88,"HTML.OWNER"),""),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(9,90,"HTML.TAB_BASIC")),t.xp6(9),t.hij(" ",t.lcZ(18,92,"HTML.FIRST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.OWNFirstName.errors?null:i.form.controls.OWNFirstName.errors.required),t.xp6(5),t.hij(" ",t.lcZ(26,94,"HTML.LAST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.OWNLastName.errors?null:i.form.controls.OWNLastName.errors.required),t.xp6(5),t.Oqu(t.lcZ(34,96,"HTML.MALE")),t.xp6(3),t.Oqu(t.lcZ(37,98,"HTML.FEMALE")),t.xp6(5),t.Oqu(t.lcZ(42,100,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(51,102,"HTML.OWNER_SelfType")),t.xp6(2),t.s9C("placeholder",t.lcZ(53,104,"HTML.OWNER_SelfType")),t.xp6(4),t.Q6J("value","P"),t.xp6(1),t.Oqu(t.lcZ(58,106,"OPTIONS.Person")),t.xp6(2),t.Q6J("value","C"),t.xp6(1),t.Oqu(t.lcZ(61,108,"OPTIONS.Company")),t.xp6(2),t.Q6J("value","O"),t.xp6(1),t.Oqu(t.lcZ(64,110,"OPTIONS.OTHER")),t.xp6(3),t.Q6J("src",i.defaultOwnerImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(69,112,"HTML.TAB_ID")),t.xp6(8),t.Oqu(t.lcZ(77,114,"HTML.IDTYPE")),t.xp6(2),t.s9C("placeholder",t.lcZ(79,116,"HTML.IDTYPE")),t.xp6(4),t.Q6J("value","N"),t.xp6(1),t.Oqu(t.lcZ(84,118,"OPTIONS.NATIONAL_ID")),t.xp6(2),t.Q6J("value","F"),t.xp6(1),t.Oqu(t.lcZ(87,120,"OPTIONS.FOREIGN_ID")),t.xp6(2),t.Q6J("value","K"),t.xp6(1),t.Oqu(t.lcZ(90,122,"OPTIONS.GULF_ID")),t.xp6(2),t.Q6J("value","S"),t.xp6(1),t.Oqu(t.lcZ(93,124,"OPTIONS.SPECIAL_EQAMA")),t.xp6(2),t.Q6J("value","O"),t.xp6(1),t.Oqu(t.lcZ(96,126,"OPTIONS.OTHER")),t.xp6(5),t.Oqu(t.lcZ(101,128,"HTML.IDNUMBER")),t.xp6(7),t.Oqu(t.lcZ(108,130,"HTML.START_DATE")),t.xp6(2),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(6),t.Oqu(t.lcZ(117,132,"HTML.END_DATE")),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(4),t.Q6J("src",i.defaultOwnerIDImage,t.LSH),t.xp6(2),t.s9C("label",t.lcZ(126,134,"HTML.TAB_CONTACTS")),t.xp6(8),t.Oqu(t.lcZ(134,136,"HTML.USERNAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(136,138,"HTML.USERNAME")),t.xp6(5),t.Oqu(t.lcZ(141,140,"HTML.EMAIL")),t.xp6(5),t.Q6J("ngIf",!i.oneowner.id),t.xp6(2),t.Q6J("ngIf",!i.oneowner.id),t.xp6(5),t.Oqu(t.lcZ(153,142,"HTML.MOBILE")),t.xp6(6),t.Oqu(t.lcZ(159,144,"HTML.WHATSAPP")),t.xp6(6),t.Oqu(t.lcZ(165,146,"HTML.HOME_PHONE")),t.xp6(6),t.Oqu(t.lcZ(171,148,"HTML.WORK_PHONE")),t.xp6(7),t.Oqu(t.lcZ(178,150,"HTML.ADDRESS")),t.xp6(6),t.Oqu(t.lcZ(184,152,"HTML.ShortAddress")),t.xp6(6),t.Oqu(t.lcZ(190,154,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(192,156,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(3),t.Oqu(t.lcZ(199,158,"HTML.GOVERN")),t.xp6(2),t.s9C("placeholder",t.lcZ(201,160,"HTML.GOVERN")),t.xp6(4),t.Q6J("ngForOf",i.Governorates),t.xp6(3),t.Oqu(t.lcZ(208,162,"HTML.CITY")),t.xp6(2),t.s9C("placeholder",t.lcZ(210,164,"HTML.CITY")),t.xp6(4),t.Q6J("ngForOf",i.Cities),t.xp6(3),t.Oqu(t.lcZ(217,166,"HTML.REGION")),t.xp6(2),t.s9C("placeholder",t.lcZ(219,168,"HTML.REGION")),t.xp6(4),t.Q6J("ngForOf",i.Areas),t.xp6(4),t.Oqu(t.lcZ(227,170,"HTML.STREET_NAME")),t.xp6(5),t.Oqu(t.lcZ(232,172,"HTML.BUILDING_NUMBER")),t.xp6(5),t.Oqu(t.lcZ(237,174,"HTML.ZIP")),t.xp6(5),t.Oqu(t.lcZ(242,176,"HTML.BUILDING_SubNUMBER")),t.xp6(6),t.Oqu(t.lcZ(248,178,"HTML.ADDRESS_DESC")),t.xp6(3),t.s9C("label",t.lcZ(251,180,"HTML.TAB_SETTINGS")),t.xp6(9),t.Oqu(t.lcZ(260,182,"HTML.TaxNumber")),t.xp6(5),t.Oqu(t.lcZ(265,184,"HTML.CommercialRegister")),t.xp6(6),t.Oqu(t.lcZ(271,186,"HTML.BankName")),t.xp6(5),t.Oqu(t.lcZ(276,188,"HTML.AccountNumber")),t.xp6(6),t.Oqu(t.lcZ(282,190,"HTML.AccountOwnerName")),t.xp6(5),t.Oqu(t.lcZ(287,192,"HTML.InvoiceLastCode")),t.xp6(6),t.Oqu(t.lcZ(293,194,"HTML.InvoiceMask")),t.xp6(5),t.Oqu(t.lcZ(298,196,"HTML.InvoiceCodeLength")),t.xp6(5),t.Q6J("src",i.sanitize(i.filePreview),t.LSH),t.xp6(1),t.Q6J("ngIf",i.can("view_owner_einvoice_data")),t.xp6(3),t.Q6J("ngIf",i.oneowner.id&&i.can("change_propertyowner")||!i.oneowner.id&&i.can("add_propertyowner")),t.xp6(2),t.Oqu(t.lcZ(309,198,"BTN.CANCEL"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.wO,At.VQ,At.U0,_.sg,_.O5,d.sg,d.u,d.x0,T.xw,T.Wh,T.yH,K.ey,b.lW,te.oG,Y.Mq,Y.hl,Y.nW,Z.ZT,Z.uh,Z.xY,Z.H8,Q.Hw,A.Nt,v.KE,v.hX,v.TO,v.R9,q.gD,Tt.uX,Tt.SP,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:600px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.dialog-content[_ngcontent-%COMP%]{margin-top:8px}"]});var Jn=f(4870);function Kn(o,e){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function Gn(o,e){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function Yn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.onSave())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.dataForm.valid),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.SAVE"))}}function Vn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.remove(r.id))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}function Qn(o,e){if(1&o&&(t.TgZ(0,"div",20)(1,"div",21),t._uU(2),t.qZA(),t.TgZ(3,"div",21),t._uU(4),t.qZA(),t.TgZ(5,"div",21)(6,"div",22),t.YNc(7,Vn,4,3,"button",23),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.branch_ArbName),t.xp6(2),t.hij("",i.build_Name," "),t.xp6(3),t.Q6J("ngIf",n.can("delete_owner_security_onebuilding"))}}class Ht{constructor(e,i,n,r,l,C,y,U,M){this.dialogRef=e,this.oneowner=i,this.atlasService=n,this.unitsService=r,this.translateService=l,this.localStore=C,this.dialog=y,this.snackBar=U,this.fb=M,this.passwordHide=!0,this.curCOMId=N.N.comid,this.userPerm=[],this.AllBranches=[],this.AllBuilding=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.dataForm=this.fb.group({branch_KeyField:[null,d.kI.required],build_KeyField:[null,d.kI.required]}),this.Builds=new Jn.x,this.curPeriority=0,this.action="Patch",this.getAllBranches(this.curCOMId,this.curPeriority),this.getOwnerBuilds(),this.prepareMsgLanguage()}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getOwnerBuilds(){this.empBuildings=null,this.unitsService.getAllBuildingForOwner(this.curCOMId,this.curPeriority,this.oneowner.id).subscribe(e=>this.empBuildings=e)}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.curPeriority,e.value)}getBuildingPerBranch(e,i,n){null==n?(console.log("-----related:: "+n),this.AllBuilding=[]):this.unitsService.getBuildingsPerBranch(e,i,n).subscribe(r=>{this.AllBuilding=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapFormValue_toTable(){this.Builds.owner_KeyField=this.oneowner.id,this.Builds.build_KeyField=this.dataForm.value.build_KeyField,this.Builds.branch_KeyField=this.dataForm.value.branch_KeyField}onSave(){this.mapFormValue_toTable(),this.unitsService.addBuildForOwner(this.Builds).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerBuilds()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(e){this.dialog.open(nt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.unitsService.deleteBuildingForOwner(e).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerBuilds()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(e=>{this.dataSavedMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}Ht.\u0275fac=function(e){return new(e||Ht)(t.Y36(Z.so),t.Y36(Z.WI),t.Y36(D.Z),t.Y36(V.X),t.Y36(w.sK),t.Y36(p.C),t.Y36(Z.uw),t.Y36(I.ux),t.Y36(d.QS))},Ht.\u0275cmp=t.Xpm({type:Ht,selectors:[["app-owners-builds-dialog"]],decls:51,vars:29,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","build_KeyField","id","build_OneOpSel",3,"placeholder"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-select",6),t.NdJ("selectionChange",function(r){return i.getBuildings(r)}),t.ALo(10,"translate"),t.TgZ(11,"mat-option",7),t._uU(12,"-"),t.qZA(),t.YNc(13,Kn,2,2,"mat-option",8),t.qZA()()(),t.TgZ(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"mat-select",9),t.ALo(20,"translate"),t.TgZ(21,"mat-option",7),t._uU(22,"-"),t.qZA(),t.YNc(23,Gn,2,2,"mat-option",8),t.qZA()()()()()(),t.TgZ(24,"div",10)(25,"div",3),t.YNc(26,Yn,4,4,"button",11),t.TgZ(27,"button",12),t.NdJ("click",function(){return i.close()}),t._uU(28),t.ALo(29,"translate"),t.qZA()()(),t._UZ(30,"mat-divider"),t.TgZ(31,"div",13)(32,"mat-dialog-content")(33,"mat-card")(34,"div",14)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"mat-divider"),t.TgZ(39,"div",15)(40,"div",16)(41,"div",17)(42,"h2"),t._uU(43),t.ALo(44,"translate"),t.qZA()(),t.TgZ(45,"div",17)(46,"h2"),t._uU(47),t.ALo(48,"translate"),t.qZA()(),t._UZ(49,"div",17),t.qZA(),t.YNc(50,Qn,8,3,"div",18),t.qZA()()()()()),2&e&&(t.Q6J("formGroup",i.dataForm),t.xp6(7),t.hij(" ",t.lcZ(8,13,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(10,15,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.hij(" ",t.lcZ(18,17,"HTML.BUILDING"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(20,19,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuilding),t.xp6(3),t.Q6J("ngIf",i.can("add_owner_security_onebuilding")),t.xp6(2),t.Oqu(t.lcZ(29,21,"BTN.CANCEL")),t.xp6(8),t.Oqu(t.lcZ(37,23,"HTML.OwnerBuilding")),t.xp6(7),t.hij(" ",t.lcZ(44,25,"HTML.BRANCH")," "),t.xp6(4),t.hij(" ",t.lcZ(48,27,"HTML.BUILDING")," "),t.xp6(3),t.Q6J("ngForOf",i.empBuildings))},dependencies:[d._Y,d.JJ,d.JL,_.sg,_.O5,d.sg,d.u,T.xw,T.Wh,T.yH,K.ey,b.lW,b.nh,G.a8,Z.xY,Z.H8,Q.Hw,v.KE,v.hX,tt.d,q.gD,pt.gM,w.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});var jn=f(3221),ge=f(8255),$n=f(455);function zn(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-button-toggle",16),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.openOwnerDialog(null))}),t.TgZ(1,"mat-icon"),t._uU(2,"person_add"),t.qZA()()}}function Xn(o,e){if(1&o&&(t.TgZ(0,"h3",39),t._uU(1),t.qZA()),2&o){const i=t.oxw().$implicit;t.xp6(1),t.AsE("",i.OWNFirstName," ",i.OWNLastName,"")}}function to(o,e){1&o&&(t.TgZ(0,"h3",39),t._uU(1,"User blocked"),t.qZA())}function eo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openOwnerDialog(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"mode_edit"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.VIEW")))}function io(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.deleteOwner(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.REMOVE")))}function no(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.changePassword(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"key"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.PasswordChange")))}function oo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openBuildingDialog(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"business"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Building")))}function ao(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openUserPermission(r.Userid))}),t.TgZ(1,"mat-icon"),t._uU(2,"security"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Security")))}function ro(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openOwnerDialog(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"settings"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.InvPhase2Setup")))}function so(o,e){if(1&o&&t._UZ(0,"img",41),2&o){const i=t.oxw().$implicit;t.ekj("blocked",1==i.RowDelete),t.Q6J("src",i.OWNPic,t.LSH)}}function lo(o,e){if(1&o&&t._UZ(0,"img",42),2&o){const i=t.oxw().$implicit;t.ekj("blocked",1==i.RowDelete)}}function co(o,e){1&o&&(t.TgZ(0,"mat-icon",43),t._uU(1,"block"),t.qZA())}function uo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",19)(1,"mat-card")(2,"div",20),t.YNc(3,Xn,2,2,"h3",21),t.YNc(4,to,2,0,"h3",21),t.TgZ(5,"button",22,23)(7,"mat-icon"),t._uU(8,"more_vert"),t.qZA()()(),t.TgZ(9,"mat-menu",24,25)(11,"span",26),t.NdJ("mouseleave",function(){t.CHM(i);const r=t.MAs(6);return t.KtG(r.closeMenu())}),t.YNc(12,eo,6,3,"button",27),t.YNc(13,io,6,3,"button",27),t._UZ(14,"mat-divider"),t.YNc(15,no,6,3,"button",27),t._UZ(16,"mat-divider"),t.YNc(17,oo,6,3,"button",27),t.YNc(18,ao,6,3,"button",27),t._UZ(19,"mat-divider"),t.YNc(20,ro,6,3,"button",27),t._UZ(21,"mat-divider"),t.qZA()(),t.TgZ(22,"div",28)(23,"div",29)(24,"div",30),t.YNc(25,so,1,3,"img",31),t.YNc(26,lo,1,2,"img",32),t.YNc(27,co,2,0,"mat-icon",33),t.qZA(),t.TgZ(28,"div",34)(29,"mat-slide-toggle",35),t.NdJ("change",function(){const l=t.CHM(i).$implicit;return t.KtG(l.RowDelete=!l.RowDelete)}),t.qZA()()(),t.TgZ(30,"div",36)(31,"p",37)(32,"mat-icon",38),t._uU(33,"contact_phone"),t.qZA(),t.TgZ(34,"span"),t._uU(35),t.qZA()(),t.TgZ(36,"p",37)(37,"mat-icon",38),t._uU(38,"chat"),t.qZA(),t.TgZ(39,"span"),t._uU(40),t.qZA()(),t.TgZ(41,"p",37)(42,"mat-icon",38),t._uU(43,"mail_outline"),t.qZA(),t.TgZ(44,"span"),t._uU(45),t.qZA()(),t.TgZ(46,"p",37)(47,"mat-icon",38),t._uU(48,"card_membership"),t.qZA(),t.TgZ(49,"span"),t._uU(50),t.qZA()(),t.TgZ(51,"p",37)(52,"mat-icon",38),t._uU(53,"location_on"),t.qZA(),t.TgZ(54,"span"),t._uU(55),t.qZA()()()()()()}if(2&o){const i=e.$implicit,n=t.MAs(10),r=t.oxw(2);t.xp6(3),t.Q6J("ngIf",0==i.RowDelete),t.xp6(1),t.Q6J("ngIf",1==i.RowDelete),t.xp6(1),t.Q6J("matMenuTriggerFor",n),t.xp6(7),t.Q6J("ngIf",r.can("view_oneowner")),t.xp6(1),t.Q6J("ngIf",r.can("delete_propertyowner")),t.xp6(2),t.Q6J("ngIf",r.can("change_owner_password")),t.xp6(2),t.Q6J("ngIf",r.can("view_owner_securitybuildings")),t.xp6(1),t.Q6J("ngIf",r.can("view_emp_securitypermissions")),t.xp6(2),t.Q6J("ngIf",r.can("setup_einvoice_phase2")),t.xp6(5),t.Q6J("ngIf",i.OWNPic),t.xp6(1),t.Q6J("ngIf",!i.OWNPic),t.xp6(1),t.Q6J("ngIf",1==i.RowDelete),t.xp6(2),t.Q6J("checked",1==i.RowDelete),t.xp6(1),t.ekj("blocked",1==i.RowDelete),t.xp6(5),t.Oqu(i.OWNMobile),t.xp6(5),t.Oqu(i.OWNMobileWhatsapp),t.xp6(5),t.Oqu(i.OWNEmail),t.xp6(5),t.Oqu(i.OWNSelfTypeDisplay),t.xp6(5),t.Oqu(i.OWNAddress)}}const xe=function(o,e){return{itemsPerPage:o,currentPage:e}};function mo(o,e){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,uo,56,20,"div",18),t.ALo(2,"paginate"),t.ALo(3,"OwnerSearchPipe"),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.xi3(3,4,i.owners,i.searchText),t.WLB(7,xe,i.count,i.page)))}}function po(o,e){if(1&o&&(t.TgZ(0,"h3",39),t._uU(1),t.qZA()),2&o){const i=t.oxw().$implicit;t.xp6(1),t.AsE("",i.OWNFirstName," ",i.OWNLastName,"")}}function ho(o,e){1&o&&(t.TgZ(0,"h3",39),t._uU(1,"User blocked"),t.qZA())}function go(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openOwnerDialog(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"mode_edit"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.VIEW")))}function _o(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.deleteOwner(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.REMOVE")))}function fo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openBuildingDialog(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"business"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Building")))}function Co(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.openUserPermission(r.Userid))}),t.TgZ(1,"mat-icon"),t._uU(2,"security"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"BTN.Security")))}function To(o,e){if(1&o&&t._UZ(0,"img",41),2&o){const i=t.oxw().$implicit;t.ekj("blocked",1==i.RowDelete),t.Q6J("src",i.OWNPic,t.LSH)}}function bo(o,e){if(1&o&&t._UZ(0,"img",52),2&o){const i=t.oxw().$implicit;t.ekj("blocked",1==i.RowDelete)}}function vo(o,e){1&o&&(t.TgZ(0,"mat-icon",43),t._uU(1,"block"),t.qZA())}function Zo(o,e){1&o&&(t.TgZ(0,"mat-icon",38),t._uU(1,"person_outline"),t.qZA())}function Ao(o,e){1&o&&(t.TgZ(0,"mat-icon",38),t._uU(1,"person"),t.qZA())}function yo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",45)(1,"mat-card")(2,"div",20),t.YNc(3,po,2,2,"h3",21),t.YNc(4,ho,2,0,"h3",21),t.TgZ(5,"button",22,23)(7,"mat-icon"),t._uU(8,"more_vert"),t.qZA()()(),t.TgZ(9,"mat-menu",24,25)(11,"span",26),t.NdJ("mouseleave",function(){t.CHM(i);const r=t.MAs(6);return t.KtG(r.closeMenu())}),t.YNc(12,go,6,3,"button",27),t.YNc(13,_o,6,3,"button",27),t._UZ(14,"mat-divider"),t.YNc(15,fo,6,3,"button",27),t.YNc(16,Co,6,3,"button",27),t.qZA()(),t.TgZ(17,"div",28)(18,"div",46)(19,"div",30),t.YNc(20,To,1,3,"img",31),t.YNc(21,bo,1,2,"img",47),t.YNc(22,vo,2,0,"mat-icon",33),t.qZA(),t.TgZ(23,"div",34)(24,"mat-slide-toggle",35),t.NdJ("change",function(){const l=t.CHM(i).$implicit;return t.KtG(l.RowDelete=!l.RowDelete)}),t.qZA()()(),t.TgZ(25,"div",48)(26,"div",49)(27,"p",37)(28,"mat-icon",38),t._uU(29,"chat-dots"),t.qZA(),t.TgZ(30,"span"),t._uU(31),t.qZA()()(),t.TgZ(32,"div",49)(33,"p",37)(34,"mat-icon",38),t._uU(35,"mail_outline"),t.qZA(),t.TgZ(36,"span"),t._uU(37),t.qZA()(),t.TgZ(38,"p",37)(39,"mat-icon",38),t._uU(40,"contact_phone"),t.qZA(),t.TgZ(41,"span"),t._uU(42),t.qZA()(),t.TgZ(43,"p",37)(44,"mat-icon",38),t._uU(45,"location_on"),t.qZA(),t.TgZ(46,"span"),t._uU(47),t.qZA()()(),t.TgZ(48,"div",50)(49,"p",37)(50,"mat-icon",38),t._uU(51,"event_available"),t.qZA(),t.TgZ(52,"span"),t._uU(53),t.ALo(54,"date"),t.qZA()(),t.TgZ(55,"p",37),t.YNc(56,Zo,2,0,"mat-icon",51),t.YNc(57,Ao,2,0,"mat-icon",51),t.TgZ(58,"span"),t._uU(59),t.qZA()()()()()()()}if(2&o){const i=e.$implicit,n=t.MAs(10),r=t.oxw(2);t.xp6(3),t.Q6J("ngIf",0==i.RowDelete),t.xp6(1),t.Q6J("ngIf",1==i.RowDelete),t.xp6(1),t.Q6J("matMenuTriggerFor",n),t.xp6(7),t.Q6J("ngIf",r.can("view_oneowner")),t.xp6(1),t.Q6J("ngIf",r.can("delete_propertyowner")),t.xp6(2),t.Q6J("ngIf",r.can("view_owner_securitybuildings")),t.xp6(1),t.Q6J("ngIf",r.can("view_emp_securitypermissions")),t.xp6(4),t.Q6J("ngIf",i.OWNPic),t.xp6(1),t.Q6J("ngIf",!i.OWNPic),t.xp6(1),t.Q6J("ngIf",1==i.RowDelete),t.xp6(2),t.Q6J("checked",1==i.RowDelete),t.xp6(1),t.ekj("blocked",1==i.RowDelete),t.xp6(6),t.Oqu(i.OWNMobileWhatsapp),t.xp6(6),t.Oqu(i.OWNEmail),t.xp6(5),t.Oqu(i.OWNMobile),t.xp6(5),t.Oqu(i.OWNAddress),t.xp6(6),t.hij("Registration ",t.xi3(54,21,i.EntryDate,"dd MMMM, yyyy 'at' HH:mm"),""),t.xp6(3),t.Q6J("ngIf",1==i.RowDelete),t.xp6(1),t.Q6J("ngIf",0==i.RowDelete),t.xp6(2),t.Oqu(1==i.RowDelete?"Blocked":"Active")}}function xo(o,e){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,yo,60,24,"div",44),t.ALo(2,"paginate"),t.ALo(3,"OwnerSearchPipe"),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.xi3(3,4,i.owners,i.searchText),t.WLB(7,xe,i.count,i.page)))}}function Uo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",17)(1,"div",45)(2,"mat-card",53)(3,"pagination-controls",54),t.NdJ("pageChange",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(r))}),t.qZA()()()()}}function wo(o,e){1&o&&(t.TgZ(0,"div",55),t._UZ(1,"mat-spinner",56),t.qZA())}class Jt{constructor(e,i,n,r,l,C,y){this.appSettings=e,this.dialog=i,this.router=n,this.global=r,this.localStore=l,this.translateService=C,this.contractService=y,this.count=9,this.curCOMId=N.N.comid,this.account=new at.n,this.userPerm=[],this.ownersForDisplay={id:null,COMId:null,OWNCode:null,OWNName:null,OWNFirstName:null,OWNLastName:null,OWNGender:null,OWNGenderDisplay:null,OWNBirthDate:null,OWNNationalIDStartDate:null,OWNNationalIDEndDate:null,username:null,OWNPassword:null,OWNMobile:null,OWNMobileWhatsapp:null,OWNHomePhone:null,OWNWorkPhone:null,OWNEmail:null,OWNAddress:null,OWNAddressDescription:null,OWNShortAddress:null,OWNStreetName:null,OWNBuildingNumber:null,OWNZibCode:null,OWNNotes:null,OWNActive:null,OWNActiveDisplay:null,OWNPic:null,OWNIDPic:null,Related_OWNKeyField:null,Country_CTTKeyField:null,Governorate_CTTKeyField:null,OWNNationalIDType:null,OWNNationalIDTypeDisplay:null,OWNNationalID:null,City_CTTKeyField:null,Area_CTTKeyField:null,OWNLangtitude:null,OWNAltitude:null,OWNSelfType:null,OWNSelfTypeDisplay:null,OWNTaxNumber:null,OWNCommercialRegister:null,OWNBankName:null,OWNBankAccountNumber:null,OWNBankAccountOwnerName:null,OWNLogoPic:null,OWNLogoPicBase64:null,OWNLastInvoiceCode:null,OWNInvoiceMask:null,OWNInvoiceNumberLength:null,EntryDate:null,last_updated:null,EntryUser:null,RowConfirm:0,RowDelete:0,RowStatus:0,OWNOrganizationName:null,OWNOrganizationUnit:null,OWNCommonName:null,OWNTypeOfInvoices:null,BusinessCategory_CTTKeyField:null,OWNCSR:null,OWNPublicKey:null,OWNPrivateKey:null,OWNCertificate:null,OWNComplianceAuth:null,OWNProductionAuth:null,OWNBuildingSubNumber:null,OWNCountryShortName:null,OWNCitySubDivision:null,OWNSerialNumber:null,OWNPlotIdentification:null,OWNTaxName:null},this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getOwners()}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getOwners(){this.owners=null,this.curOwnerId=this.curUserData.owner_KeyField??0,this.curUserData.is_superuser?(console.log("-----SuperUser-----"),this.contractService.getAllOwners(this.curCOMId,this.account.periorty).subscribe(e=>{console.log(e),this.owners=e})):"T"==this.curUserData.is_owner?(console.log("-----Owner-----"),this.contractService.getOwnersPerParent(this.curCOMId,this.account.periorty,this.curOwnerId).subscribe(e=>{console.log(e),this.owners=e})):"T"==this.curUserData.is_employee&&(console.log("-----Employee-----"),console.log("this.curUserData[id]:: "+this.curUserData.id),this.contractService.getOwnersPerEmp(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(e=>{console.log(e),console.log("----After----"),this.owners=e}))}addOwner(e,i,n,r){this.contractService.addOwner(e,i,n,r).subscribe(l=>{this.contractService.addCustomUserFromOwner(l,i).subscribe(C=>{this.contractService.updateOwnerWithUserID(l.id,C.id).subscribe(y=>{},y=>{console.log("ERROR::--\x3e ",y)})}),this.getOwners()})}updateOwner(e,i,n,r){console.log("====inside updateOwner====="),this.contractService.editOwner(e,i,n,r).subscribe(l=>{this.contractService.updateCustomUserFromOwner(l,i).subscribe(C=>{}),this.getOwners()})}changePassword(e){this.dialog.open(he.p,{data:{dataRow:e,curUserData:this.curUserData,userPerm:this.userPerm,pk:e.Userid},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}deleteOwner(e){this.dialog.open(nt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.contractService.deleteOneOwner(e.id).subscribe(r=>this.getOwners())})}onPageChanged(e){this.page=e,this.getOwners(),window.scrollTo(0,0)}openOwnerDialog(e){this.dialog.open(xt,{data:{dataRow:e,curUserData:this.curUserData,userPerm:this.userPerm},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{"Cancel"==n.event||("Patch"==n.event?(this.mapFormvalue_to_OwnerClass(n.data,"Patch"),this.updateOwner(this.ownersForDisplay,n.ownPic,n.ownerIDPic,n.ownerLogo)):"Post"==n.event&&(this.mapFormvalue_to_OwnerClass(n.data,"Post"),this.addOwner(this.ownersForDisplay,n.ownPic,n.ownerIDPic,n.ownerLogo)))})}openBuildingDialog(e){this.dialog.open(Ht,{data:e,panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}openSecurityDialog(e){this.dialog.open(jn.y,{data:e}).afterClosed().subscribe(n=>{})}openUserPermission(e){this.router.navigate(["/settings/permissions-all/"+e+"/"])}mapFormvalue_to_OwnerClass(e,i){console.log(e),console.log("=================formValue==========================");const n=new _.uU("en-GB").transform(e.OWNBirthDate,"dd/MM/yyyy"),r=new _.uU("en-GB").transform(e.work.OWNNationalIDStartDate,"dd/MM/yyyy"),l=new _.uU("en-GB").transform(e.work.OWNNationalIDEndDate,"dd/MM/yyyy");this.ownersForDisplay.id=e.id,this.ownersForDisplay.OWNFirstName=e.OWNFirstName,this.ownersForDisplay.OWNLastName=e.OWNLastName,this.ownersForDisplay.OWNGender=e.OWNGender,this.ownersForDisplay.OWNSelfType=e.OWNSelfType,null!=e.OWNBirthDate&&(this.ownersForDisplay.OWNBirthDate=n),null!=e.work.OWNNationalIDStartDate&&(this.ownersForDisplay.OWNNationalIDStartDate=r),null!=e.work.OWNNationalIDEndDate&&(this.ownersForDisplay.OWNNationalIDEndDate=l),this.ownersForDisplay.OWNNationalIDType=e.work.OWNNationalIDType,this.ownersForDisplay.OWNNationalID=e.work.OWNNationalID,this.ownersForDisplay.username=e.contacts.username,this.ownersForDisplay.OWNPassword=e.contacts.OWNPassword,this.ownersForDisplay.OWNEmail=e.contacts.OWNEmail,this.ownersForDisplay.OWNMobile=e.contacts.OWNMobile,this.ownersForDisplay.OWNMobileWhatsapp=e.contacts.OWNMobileWhatsapp,this.ownersForDisplay.OWNHomePhone=e.contacts.OWNHomePhone,this.ownersForDisplay.OWNWorkPhone=e.contacts.OWNWorkPhone,this.ownersForDisplay.OWNAddress=e.contacts.OWNAddress,this.ownersForDisplay.OWNShortAddress=e.contacts.OWNShortAddress,this.ownersForDisplay.OWNAddressDescription=e.contacts.OWNAddressDescription,this.ownersForDisplay.OWNBuildingSubNumber=e.contacts.OWNBuildingSubNumber,this.ownersForDisplay.OWNStreetName=e.contacts.OWNStreetName,this.ownersForDisplay.OWNBuildingNumber=e.contacts.OWNBuildingNumber,this.ownersForDisplay.OWNZibCode=e.contacts.OWNZibCode,this.ownersForDisplay.Country_CTTKeyField=e.contacts.country,this.ownersForDisplay.Governorate_CTTKeyField=e.contacts.governorate,this.ownersForDisplay.City_CTTKeyField=e.contacts.city,this.ownersForDisplay.Area_CTTKeyField=e.contacts.area,this.ownersForDisplay.OWNActive=e.settings.OWNActive,this.ownersForDisplay.OWNTaxNumber=e.settings.OWNTaxNumber,this.ownersForDisplay.OWNCommercialRegister=e.settings.OWNCommercialRegister,this.ownersForDisplay.OWNBankName=e.settings.OWNBankName,this.ownersForDisplay.OWNBankAccountNumber=e.settings.OWNBankAccountNumber,this.ownersForDisplay.OWNBankAccountOwnerName=e.settings.OWNBankAccountOwnerName,this.ownersForDisplay.OWNLogoPicBase64=e.settings.OWNLogoPicBase64,this.ownersForDisplay.OWNLastInvoiceCode=e.settings.OWNLastInvoiceCode,this.ownersForDisplay.OWNInvoiceMask=e.settings.OWNInvoiceMask,this.ownersForDisplay.OWNInvoiceNumberLength=e.settings.OWNInvoiceNumberLength,this.ownersForDisplay.OWNOrganizationName=e.einvoice.OWNOrganizationName,this.ownersForDisplay.OWNOrganizationUnit=e.einvoice.OWNOrganizationUnit,this.ownersForDisplay.OWNCommonName=e.einvoice.OWNCommonName,this.ownersForDisplay.OWNTypeOfInvoices=e.einvoice.OWNTypeOfInvoices,this.ownersForDisplay.BusinessCategory_CTTKeyField=e.einvoice.BusinessCategory_CTTKeyField,this.ownersForDisplay.OWNCSR=e.einvoice.OWNCSR,this.ownersForDisplay.OWNPublicKey=e.einvoice.OWNPublicKey,this.ownersForDisplay.OWNPrivateKey=e.einvoice.OWNPrivateKey,this.ownersForDisplay.OWNCertificate=e.einvoice.OWNCertificate,this.ownersForDisplay.OWNComplianceAuth=e.einvoice.OWNComplianceAuth,this.ownersForDisplay.OWNProductionAuth=e.einvoice.OWNProductionAuth,this.ownersForDisplay.OWNBuildingSubNumber=e.contacts.OWNBuildingSubNumber,this.ownersForDisplay.OWNCountryShortName=e.einvoice.OWNCountryShortName,this.ownersForDisplay.OWNCitySubDivision=e.einvoice.OWNCitySubDivision,this.ownersForDisplay.OWNSerialNumber=e.einvoice.OWNSerialNumber,this.ownersForDisplay.OWNPlotIdentification=e.einvoice.OWNPlotIdentification,this.ownersForDisplay.OWNTaxName=e.einvoice.OWNTaxName}prepareMsgLanguage(){this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e})}}Jt.\u0275fac=function(e){return new(e||Jt)(t.Y36(rt.d),t.Y36(Z.uw),t.Y36(k.F0),t.Y36(j.U),t.Y36(p.C),t.Y36(w.sK),t.Y36(g.W))},Jt.\u0275cmp=t.Xpm({type:Jt,selectors:[["app-owners-list"]],features:[t._Bn([g.W])],decls:25,vars:11,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","grid"],["viewType","matButtonToggleGroup"],["value","grid"],["value","list"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","33.3","fxFlex.md","50","class","p-2",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-md","33.3","fxFlex.md","50",1,"p-2"],["fxLayout","row","fxLayoutAlign","space-between center",1,"bg-primary"],["class","user-name",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["xPosition","before","overlapTrigger","true"],["menu","matMenu"],[3,"mouseleave"],["mat-menu-item","",3,"click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-around center",1,"user-content"],["fxFlex","30","fxLayout","column","fxLayoutAlign","center center"],[1,"user-img"],["class","transition-2",3,"src","blocked",4,"ngIf"],["src","assets/images/others/user.jpg","class","transition-2",3,"blocked",4,"ngIf"],["color","warn",4,"ngIf"],[1,"user-social"],["color","primary",3,"checked","change"],["fxFlex","70","fxLayout","column",1,"user-details","transition-2"],["fxLayout","row","fxLayoutAlign","start center"],[1,"text-muted"],[1,"user-name"],["mat-menu-item","",3,"click"],[1,"transition-2",3,"src"],["src","assets/images/others/user.jpg",1,"transition-2"],["color","warn"],["fxFlex","100","class","p-2",4,"ngFor","ngForOf"],["fxFlex","100",1,"p-2"],["fxFlex","20","fxFlex.xs","30","fxLayout","column","fxLayoutAlign","center center"],["src","assets/img/users/default-user.jpg","class","transition-2",3,"blocked",4,"ngIf"],["fxFlex","80","fxFlex.xs","70","fxLayout","row","fxLayout.xs","column",1,"user-details","transition-2"],["fxFlex","30","fxFlex.xs","100","fxLayout","column"],["fxFlex","40","fxFlex.xs","100","fxLayout","column"],["class","text-muted",4,"ngIf"],["src","assets/img/users/default-user.jpg",1,"transition-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),t.YNc(4,zn,3,0,"mat-button-toggle",4),t.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),t._uU(7,"search"),t.qZA()()()(),t.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),t.NdJ("ngModelChange",function(r){return i.searchText=r}),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),t._uU(17,"view_module"),t.qZA()(),t.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),t._uU(20,"view_list"),t.qZA()()()()(),t.YNc(21,mo,4,10,"div",14),t.YNc(22,xo,4,10,"div",14),t.YNc(23,Uo,4,0,"div",14),t.YNc(24,wo,2,0,"div",15)),2&e){const n=t.MAs(3),r=t.MAs(14);t.xp6(4),t.Q6J("ngIf",i.can("add_propertyowner")),t.xp6(4),t.ekj("show","search"==n.value),t.xp6(2),t.s9C("placeholder",t.lcZ(11,9,"HTML.SEARCH_Owner")),t.Q6J("ngModel",i.searchText),t.xp6(11),t.Q6J("ngIf","grid"==r.value),t.xp6(1),t.Q6J("ngIf","list"==r.value),t.xp6(1),t.Q6J("ngIf",i.owners),t.xp6(1),t.Q6J("ngIf",!i.owners)}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,X.LS,_.sg,_.O5,T.xw,T.Wh,T.yH,b.RK,mt.A9,mt.Yi,G.a8,Q.Hw,A.Nt,v.KE,tt.d,ge.VK,ge.OP,ge.p6,wt.Ou,$n.Rr,X._s,Ot.sp,_.uU,w.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});class _e{}var Oo=f(6381),No=f(8910);function So(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.saveEditDocData(r.tenantLeaveForDisplay.id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.leaveData_Form.value)("disabled",!i.leaveData_Form.valid),t.xp6(1),t.Oqu(t.lcZ(2,3,"BTN.SAVE"))}}class Ft{constructor(e,i,n,r,l,C,y,U,M,F,J,et,ot,bt){this.transferService=e,this.dataService=i,this.activatedRoute=n,this.localStore=r,this._companyService=l,this.global=C,this.router=y,this.snackBar=U,this.docsService=M,this.tenantsService=F,this.contractService=J,this.translateService=et,this.fb=ot,this._formBuilder=bt,this.curCOMId=N.N.comid,this.account=new at.n,this.userPerm=[],this.curDocValue=0,this.curDocPayedValue=0}ngOnInit(){if(this.transferService.getMessage.subscribe(e=>{this.contract_KeyField=e.contract_KeyField,this.contEndDate=e.contenddate,this.contValue=e.contvalue,this.contInsurance=e.continsurance,this.leaveID=e.leaveid,this.branch_KeyField=e.branch_KeyField,this.owner_KeyField=e.owner_KeyField,this.build_KeyField=e.build_KeyField,this.unit_KeyField=e.unit_KeyField,this.customer_KeyField=e.customer_KeyField,this.customerName=e.cusName,this.contRemainingInstallments=e.remaining_Installments}),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.leaveData_Form=this.fb.group({id:null,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,customer_KeyField:null,TELCode:null,TELLastElectricityReading:null,TELCurrentElectricityReading:null,TELContractEndDate:null,TELLeaveDate:null,DaysDiff:{value:null,disabled:!0},contractValue:{value:null,disabled:!0},TELDeductionElectricValue:0,TELDeductionInstallmentValue:0,TELDeductionDamageValue:0,TELDeductionMonthlyExpensesValue:0,TELDeductionCutFromAdditionValue:0,TELDeductionOtherValue:0,TELDeductionTotalValue:0,TELAdditionInsuranceValue:0,TELAdditionCutFromRentValue:0,TELAdditionOtherValue:0,TELAdditionTotalValue:0,TELNotes:null,netTotalDiff:{value:0,disabled:!0}}),this.sub=this.activatedRoute.params.subscribe(e=>{null==e.id?(console.log("----NULL--------------\x3e>>>"),this.tenantLeaveForDisplay=new _e,this.leaveData_Form.patchValue({contract_KeyField:this.contract_KeyField,TELContractEndDate:this.contEndDate,TELAdditionInsuranceValue:this.contInsurance,TELAdditionTotalValue:this.contInsurance,TELNotes:"",branch_KeyField:this.branch_KeyField,owner_KeyField:this.owner_KeyField,build_KeyField:this.build_KeyField,unit_KeyField:this.unit_KeyField,customer_KeyField:this.customer_KeyField,contractValue:this.contValue,TELDeductionInstallmentValue:this.contRemainingInstallments,TELDeductionTotalValue:this.contRemainingInstallments,netTotalDiff:this.contInsurance-this.contRemainingInstallments})):e.id?(console.log("---param:: "+e.id),this.id=+e.id,this.getLeaveDataById(this.id)):(console.log("----Empty----"),this.tenantLeaveForDisplay=new _e)})}else this.router.navigate(["/sign-in"])}onChangeLeaveDate(e){this.calcDays(e.value,this.leaveData_Form.value.TELContractEndDate),this.leaveData_Form.get("TELLeaveDate").patchValue(e.value)}calcDays(e,i){var n=this.calculateDiff(e,i);console.log("---otherDays  "+n);let l=Math.round(this.contValue/365*n*100)/100;null==l&&(l=0),this.leaveData_Form.patchValue({DaysDiff:n,TELAdditionCutFromRentValue:l}),this.calcAdditionTotal()}calculateDiff(e,i){let n=new Date(i);return e=new Date(e),Math.floor((Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())-Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))/864e5)}calcAdditionTotal(){let e=this.leaveData_Form.value.TELAdditionInsuranceValue,i=this.leaveData_Form.value.TELAdditionOtherValue,n=this.leaveData_Form.value.TELAdditionCutFromRentValue;null==e&&(e=0),null==i&&(i=0),null==n&&(n=0),this.leaveData_Form.patchValue({TELAdditionTotalValue:Math.round(100*(+e+ +i+ +n))/100}),this.calcNetTotal()}calcDeductionTotal(){let e=this.leaveData_Form.value.TELDeductionElectricValue,i=this.leaveData_Form.value.TELDeductionInstallmentValue,n=this.leaveData_Form.value.TELDeductionDamageValue,r=this.leaveData_Form.value.TELDeductionMonthlyExpensesValue,l=this.leaveData_Form.value.TELDeductionCutFromAdditionValue,C=this.leaveData_Form.value.TELDeductionOtherValue;null==e&&(e=0),null==i&&(i=0),null==n&&(n=0),null==r&&(r=0),null==l&&(l=0),null==C&&(C=0),this.leaveData_Form.patchValue({TELDeductionTotalValue:Math.round(100*(+e+ +i+ +n+ +r+ +l+ +C))/100}),this.calcNetTotal()}calcNetTotal(){let e=this.leaveData_Form.value.TELAdditionTotalValue,i=this.leaveData_Form.value.TELDeductionTotalValue;null==e&&(e=0),null==i&&(i=0),this.leaveData_Form.patchValue({netTotalDiff:Math.round(100*(+e-+i))/100})}readAddInsuranceValue(e){let i=e.target.value;if(i>0){let n=this.leaveData_Form.value.TELAdditionCutFromRentValue,r=this.leaveData_Form.value.TELAdditionOtherValue;null==n&&(n=0),null==r&&(r=0),this.leaveData_Form.patchValue({TELAdditionTotalValue:+i+ +n+ +r})}}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getLeaveDataById(e){console.log("---inside getLeaveDataById -----"),this.contractService.getLeaveData(e).subscribe(i=>{this.fillForm(i),this.tenantLeaveForDisplay=i},i=>{this.tenantLeaveForDisplay=new _e,console.log("---getLeaveDataById  not found Leave data")})}fillForm(e){null!=e.TELContractEndDate&&(this.contra_endDate=e.TELContractEndDate),null!=e.TELLeaveDate&&(this.contra_leaveDate=e.TELLeaveDate),console.log("---11------"),this.calculateDiffDays=this.calculateDiff(e.TELLeaveDate,e.TELContractEndDate),console.log("---this.calculateDiffDays:: "+this.calculateDiffDays),this.leaveData_Form.patchValue({id:e.id,contract_KeyField:e.contract_KeyField,branch_KeyField:e.branch_KeyField,owner_KeyField:e.owner_KeyField,build_KeyField:e.build_KeyField,unit_KeyField:e.unit_KeyField,customer_KeyField:e.customer_KeyField,TELCode:e.TELCode,TELLastElectricityReading:e.TELLastElectricityReading,TELCurrentElectricityReading:e.TELCurrentElectricityReading,TELContractEndDate:e.TELContractEndDate,TELLeaveDate:e.TELLeaveDate,TELDeductionElectricValue:e.TELDeductionElectricValue,TELDeductionInstallmentValue:e.TELDeductionInstallmentValue,TELDeductionDamageValue:e.TELDeductionDamageValue,TELDeductionMonthlyExpensesValue:e.TELDeductionMonthlyExpensesValue,TELDeductionCutFromAdditionValue:e.TELDeductionCutFromAdditionValue,TELDeductionOtherValue:e.TELDeductionOtherValue,TELDeductionTotalValue:e.TELDeductionTotalValue,TELAdditionInsuranceValue:e.TELAdditionInsuranceValue,TELAdditionCutFromRentValue:e.TELAdditionCutFromRentValue,TELAdditionOtherValue:e.TELAdditionOtherValue,TELAdditionTotalValue:e.TELAdditionTotalValue,TELNotes:e.TELNotes,netTotalDiff:e.TELAdditionTotalValue-e.TELDeductionTotalValue,contractValue:this.contValue,DaysDiff:this.calculateDiffDays}),console.log("---22------")}mappingFormValue_ToPayDocClass(){const e=new _.uU("en-GB").transform(this.leaveData_Form.value.TELContractEndDate,"dd/MM/yyyy"),i=new _.uU("en-GB").transform(this.leaveData_Form.value.TELLeaveDate,"dd/MM/yyyy");this.tenantLeaveForDisplay.id=this.leaveData_Form.value.id,this.tenantLeaveForDisplay.contract_KeyField=this.leaveData_Form.value.contract_KeyField,this.tenantLeaveForDisplay.branch_KeyField=this.leaveData_Form.value.branch_KeyField,this.tenantLeaveForDisplay.owner_KeyField=this.leaveData_Form.value.owner_KeyField,this.tenantLeaveForDisplay.build_KeyField=this.leaveData_Form.value.build_KeyField,this.tenantLeaveForDisplay.unit_KeyField=this.leaveData_Form.value.unit_KeyField,this.tenantLeaveForDisplay.customer_KeyField=this.leaveData_Form.value.customer_KeyField,null!=this.leaveData_Form.value.TELContractEndDate&&(this.tenantLeaveForDisplay.TELContractEndDate=e),null!=this.leaveData_Form.value.TELLeaveDate&&(this.tenantLeaveForDisplay.TELLeaveDate=i),this.tenantLeaveForDisplay.TELCode=this.leaveData_Form.value.TELCode,this.tenantLeaveForDisplay.TELLastElectricityReading=this.leaveData_Form.value.TELLastElectricityReading,this.tenantLeaveForDisplay.TELCurrentElectricityReading=this.leaveData_Form.value.TELCurrentElectricityReading,this.tenantLeaveForDisplay.TELDeductionElectricValue=this.leaveData_Form.value.TELDeductionElectricValue,this.tenantLeaveForDisplay.TELDeductionInstallmentValue=this.leaveData_Form.value.TELDeductionInstallmentValue,this.tenantLeaveForDisplay.TELDeductionDamageValue=this.leaveData_Form.value.TELDeductionDamageValue,this.tenantLeaveForDisplay.TELDeductionMonthlyExpensesValue=this.leaveData_Form.value.TELDeductionMonthlyExpensesValue,this.tenantLeaveForDisplay.TELDeductionCutFromAdditionValue=this.leaveData_Form.value.TELDeductionCutFromAdditionValue,this.tenantLeaveForDisplay.TELDeductionOtherValue=this.leaveData_Form.value.TELDeductionOtherValue,this.tenantLeaveForDisplay.TELDeductionTotalValue=this.leaveData_Form.value.TELDeductionTotalValue,this.tenantLeaveForDisplay.TELAdditionInsuranceValue=this.leaveData_Form.value.TELAdditionInsuranceValue,this.tenantLeaveForDisplay.TELAdditionCutFromRentValue=this.leaveData_Form.value.TELAdditionCutFromRentValue,this.tenantLeaveForDisplay.TELAdditionOtherValue=this.leaveData_Form.value.TELAdditionOtherValue,this.tenantLeaveForDisplay.TELAdditionTotalValue=this.leaveData_Form.value.TELAdditionTotalValue,this.tenantLeaveForDisplay.TELNotes=this.leaveData_Form.value.TELNotes}saveEditDocData(e){this.mappingFormValue_ToPayDocClass(),e?this.contractService.editTenantLeave(this.tenantLeaveForDisplay).subscribe(i=>{let n={contract_KeyField:i.contract_KeyField,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,customer_KeyField:i.customer_KeyField,TSTCreditValue:i.TELAdditionTotalValue,TSTDebitValue:i.TELDeductionTotalValue,TSTDate:i.TELLeaveDate,TSTDescription:"\u0646\u062a\u064a\u062c\u0629 \u0645\u0633\u062a\u0646\u062f \u0627\u0644\u0625\u062e\u0644\u0627\u0621 \u0631\u0642\u0645 "+i.TELCode,TSTSubject:"LEAVE",TSTSubjectID:i.id};console.log("------Start to Deleted--------"),this.contractService.getStatementsIDPerSubjectID(this.curCOMId,this.account.periorty,"LEAVE",i.id).subscribe(r=>{this.stateID=r[0].id,console.log("this.stateID:: "+this.stateID),this.contractService.deleteStatement(this.stateID).subscribe(l=>{console.log("Statment Deleted"),this.contractService.addStatement(n).subscribe(C=>{console.log("Statment Added after deleted")})})}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):this.contractService.addTenantLeave(this.tenantLeaveForDisplay).subscribe(i=>{this.contractService.editContractWithDic({RCOTenantLeaveID:i.id,RCOContractStatus:"F"},i.contract_KeyField).subscribe(l=>{console.log("editContractWithDic Done")},l=>{console.log("editContractWithDic Error:: "+l)});let r={contract_KeyField:i.contract_KeyField,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,customer_KeyField:i.customer_KeyField,TSTCreditValue:i.TELAdditionTotalValue,TSTDebitValue:i.TELDeductionTotalValue,TSTDate:i.TELLeaveDate,TSTDescription:"\u0646\u062a\u064a\u062c\u0629 \u0645\u0633\u062a\u0646\u062f \u0627\u0644\u0625\u062e\u0644\u0627\u0621 \u0631\u0642\u0645 "+i.TELCode,TSTSubject:"LEAVE",TSTSubjectID:i.id};console.log("--tenantStatementData:: "+r),this.contractService.addStatement(r).subscribe(l=>{console.log("addStatement Done")},l=>{console.log("addStatement Error:: "+l)}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e})}}Ft.\u0275fac=function(e){return new(e||Ft)(t.Y36(ut.y),t.Y36(O.n),t.Y36(k.gz),t.Y36(p.C),t.Y36(Oo.J),t.Y36(j.U),t.Y36(k.F0),t.Y36(I.ux),t.Y36(No.c),t.Y36(L.v),t.Y36(g.W),t.Y36(w.sK),t.Y36(d.qu),t.Y36(d.qu))},Ft.\u0275cmp=t.Xpm({type:Ft,selectors:[["app-tenant-leave"]],decls:145,vars:71,consts:[[1,"p-2"],[1,"pt-3"],["autocomplete","off","fxLayout","row wrap",3,"formGroup"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","29.9",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","TELContractEndDate"],["matInput","","formControlName","TELLeaveDate",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["contractleaveDate",""],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["matInput","","formControlName","contractValue"],["fxFlex","100","fxFlex.gt-sm","19.8",1,"px-1"],["matInput","","formControlName","DaysDiff"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","TELLastElectricityReading"],["matInput","","formControlName","TELCurrentElectricityReading"],["fxFlex","100","fxFlex.gt-sm","40",1,"px-2"],["vertical","",2,"height","10px"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-1"],["matInput","","formControlName","TELAdditionInsuranceValue",3,"change"],["matInput","","formControlName","TELAdditionCutFromRentValue",3,"change"],["matInput","","formControlName","TELAdditionOtherValue",3,"change"],["matInput","","formControlName","TELAdditionTotalValue"],["fxFlex","100","fxFlex.gt-sm","10",1,"px-2"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-2"],["matInput","","formControlName","TELDeductionElectricValue",3,"change"],["matInput","","formControlName","TELDeductionInstallmentValue",3,"change"],["matInput","","formControlName","TELDeductionDamageValue",3,"change"],["matInput","","formControlName","TELDeductionMonthlyExpensesValue",3,"change"],["matInput","","formControlName","TELDeductionCutFromAdditionValue",3,"change"],["matInput","","formControlName","TELDeductionOtherValue",3,"change"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","TELDeductionTotalValue"],["fxFlex","100","fxFlex.gt-sm","24.9",1,"px-1"],["matInput","","formControlName","netTotalDiff"],["fxFlex","100","fxFlex.gt-sm","74.9",1,"px-1"],["matInput","","formControlName","TELNotes","rows","3"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"mat-card-content",1)(8,"form",2),t._UZ(9,"mat-label"),t.TgZ(10,"div",3)(11,"div",4)(12,"mat-form-field",5)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",6),t.qZA()(),t.TgZ(17,"div",4)(18,"mat-form-field",5)(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"input",7),t.NdJ("dateChange",function(r){return i.onChangeLeaveDate(r)}),t.qZA(),t._UZ(23,"mat-datepicker-toggle",8)(24,"mat-datepicker",null,9),t.qZA()(),t.TgZ(26,"div",10)(27,"mat-form-field",5)(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",11),t.qZA()(),t.TgZ(32,"div",12)(33,"mat-form-field",5)(34,"mat-label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",13),t.qZA()()(),t.TgZ(38,"div",3)(39,"div",14)(40,"mat-form-field",5)(41,"mat-label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",15),t.qZA()(),t.TgZ(45,"div",14)(46,"mat-form-field",5)(47,"mat-label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._UZ(50,"input",16),t.qZA()()(),t.TgZ(51,"div",17)(52,"p"),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"mat-divider",18),t.TgZ(56,"div",19)(57,"div",20)(58,"mat-form-field",5)(59,"mat-label"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"input",21),t.NdJ("change",function(){return i.calcAdditionTotal()}),t.qZA()()(),t.TgZ(63,"div",20)(64,"mat-form-field",5)(65,"mat-label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"input",22),t.NdJ("change",function(){return i.calcAdditionTotal()}),t.qZA()()(),t.TgZ(69,"div",20)(70,"mat-form-field",5)(71,"mat-label"),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"input",23),t.NdJ("change",function(){return i.calcAdditionTotal()}),t.qZA()()(),t.TgZ(75,"div",20)(76,"mat-form-field",5)(77,"mat-label"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t._UZ(80,"input",24),t.qZA()()()(),t._UZ(81,"div",25),t.TgZ(82,"div",26)(83,"p"),t._uU(84),t.ALo(85,"translate"),t.qZA(),t._UZ(86,"mat-divider",18),t.TgZ(87,"div",19)(88,"div",20)(89,"mat-form-field",5)(90,"mat-label"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t.TgZ(93,"input",27),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(94,"div",20)(95,"mat-form-field",5)(96,"mat-label"),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.TgZ(99,"input",28),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(100,"div",20)(101,"mat-form-field",5)(102,"mat-label"),t._uU(103),t.ALo(104,"translate"),t.qZA(),t.TgZ(105,"input",29),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(106,"div",20)(107,"mat-form-field",5)(108,"mat-label"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"input",30),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(112,"div",20)(113,"mat-form-field",5)(114,"mat-label"),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"input",31),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(118,"div",20)(119,"mat-form-field",5)(120,"mat-label"),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"input",32),t.NdJ("change",function(){return i.calcDeductionTotal()}),t.qZA()()(),t.TgZ(124,"div",33)(125,"mat-form-field",5)(126,"mat-label"),t._uU(127),t.ALo(128,"translate"),t.qZA(),t._UZ(129,"input",34),t.qZA()()()(),t.TgZ(130,"div",3)(131,"div",35)(132,"mat-form-field",5)(133,"mat-label"),t._uU(134),t.ALo(135,"translate"),t.qZA(),t._UZ(136,"input",36),t.qZA()(),t.TgZ(137,"div",37)(138,"mat-form-field",5)(139,"mat-label"),t._uU(140),t.ALo(141,"translate"),t.qZA(),t._UZ(142,"textarea",38),t.qZA()()(),t.TgZ(143,"div",3),t.YNc(144,So,3,5,"button",39),t.qZA()()()()()),2&e){const n=t.MAs(25);t.xp6(5),t.AsE("",t.lcZ(6,27,"HTML.TenantLeave"),": ",i.customerName,""),t.xp6(3),t.Q6J("formGroup",i.leaveData_Form),t.xp6(6),t.hij(" ",t.lcZ(15,29,"HTML.ContractEndDate"),""),t.xp6(6),t.Oqu(t.lcZ(21,31,"HTML.ContractLeaveDate")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(6),t.hij(" ",t.lcZ(30,33,"HTML.ContractValue"),""),t.xp6(6),t.hij(" ",t.lcZ(36,35,"HTML.DaysDiff"),""),t.xp6(7),t.hij(" ",t.lcZ(43,37,"HTML.LastElectricityReading"),""),t.xp6(6),t.hij(" ",t.lcZ(49,39,"HTML.ElectricCounterReading"),""),t.xp6(5),t.Oqu(t.lcZ(54,41,"HTML.Addition")),t.xp6(7),t.Oqu(t.lcZ(61,43,"HTML.AdditionInsuranceValue")),t.xp6(6),t.Oqu(t.lcZ(67,45,"HTML.AdditionCutFromRentValue")),t.xp6(6),t.Oqu(t.lcZ(73,47,"HTML.AdditionOtherValue")),t.xp6(6),t.Oqu(t.lcZ(79,49,"HTML.AdditionTotalValue")),t.xp6(6),t.Oqu(t.lcZ(85,51,"HTML.Deduction")),t.xp6(7),t.Oqu(t.lcZ(92,53,"HTML.DeductionElectricValue")),t.xp6(6),t.Oqu(t.lcZ(98,55,"HTML.DeductionInstallmentValue")),t.xp6(6),t.Oqu(t.lcZ(104,57,"HTML.DeductionDamageValue")),t.xp6(6),t.Oqu(t.lcZ(110,59,"HTML.DeductionMonthlyExpensesValue")),t.xp6(6),t.Oqu(t.lcZ(116,61,"HTML.DeductionCutFromAdditionValue")),t.xp6(6),t.Oqu(t.lcZ(122,63,"HTML.DeductionOtherValue")),t.xp6(6),t.Oqu(t.lcZ(128,65,"HTML.DeductionTotalValue")),t.xp6(7),t.hij(" ",t.lcZ(135,67,"HTML.NetValue"),""),t.xp6(6),t.Oqu(t.lcZ(141,69,"HTML.Notes")),t.xp6(4),t.Q6J("ngIf",i.can("doing_tenantleave"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,_.O5,d.sg,d.u,T.xw,T.Wh,T.yH,b.lW,G.a8,G.dn,G.dk,G.n5,Y.Mq,Y.hl,Y.nW,Z.ZT,A.Nt,v.KE,v.hX,v.R9,tt.d,w.X$]});var Ut=f(3172),Ue=f(100);const lt_TAG_1="01",lt_TAG_2="02",lt_TAG_3="03",lt_TAG_4="04",lt_TAG_5="05";class Kt{constructor(e){this.invoiceService=e,this.formData={InvoiceID:1,NameOfSeller:"\u0627\u0644\u0645\u0628\u0631\u0645\u062c \u0627\u0644\u0639\u0631\u0628\u064a",VatRNumber:"3002011109990663",RealTime:Io(),InvoiceTWVat:"2300.00",VatTotal:"300.00"},this.allOfInvoice=[],this.finalCode=""}ngOnChanges(e){e.formData.currentValue&&(this.formData={InvoiceID:e.formData.currentValue.invid,NameOfSeller:e.formData.currentValue.sellerName,VatRNumber:e.formData.currentValue.vatRegNum,RealTime:e.formData.currentValue.time,InvoiceTWVat:e.formData.currentValue.totalWithVat,VatTotal:e.formData.currentValue.totalVat},this.generateQR(),console.log("-----changes[formData].currentValue.invid:: "+e.formData.currentValue.invid),console.log("----this.finalCode:: "+this.finalCode),this.invoiceService.editInvoice({INVQRString:this.finalCode},e.formData.currentValue.invid).subscribe(n=>{console.log("qrString Saved")},n=>{console.log("Error! qrString not Saved")}))}generateQR(){this.formData&&(function Do(o,e){if(o.split("").every(i=>i.charCodeAt(0)<128)){let i=o.length.toString(16);i=1===i.length?lt_TAG_1+"0"+i:lt_TAG_1+i,e.push(i),e.push(Ut.lW.from(o,"utf-8").toString("hex"))}else{let i=Ut.lW.from(o,"utf-8"),n=i.length.toString(16);n=1===n.length?lt_TAG_1+"0"+n:lt_TAG_1+n,e.push(n),e.push(i.toString("hex"))}}(this.formData.NameOfSeller,this.allOfInvoice),function Fo(o,e){let i=o.length.toString(16);i=1===i.length?lt_TAG_2+"0"+i:lt_TAG_2+i,e.push(i),e.push(Ut.lW.from(o,"utf-8").toString("hex"))}(this.formData.VatRNumber,this.allOfInvoice),function Lo(o,e){let i=o.length.toString(16);i=1===i.length?lt_TAG_3+"0"+i:lt_TAG_3+i,e.push(i),e.push(Ut.lW.from(o,"utf-8").toString("hex"))}(this.formData.RealTime,this.allOfInvoice),function Mo(o,e){let i=o.length.toString(16);i=1===i.length?lt_TAG_4+"0"+i:lt_TAG_4+i,e.push(i),e.push(Ut.lW.from(o,"utf-8").toString("hex"))}(this.formData.InvoiceTWVat,this.allOfInvoice),function qo(o,e){let i=o.length.toString(16);i=1===i.length?lt_TAG_5+"0"+i:lt_TAG_5+i,e.push(i),e.push(Ut.lW.from(o,"utf-8").toString("hex"))}(this.formData.VatTotal,this.allOfInvoice),this.finalCode=Ut.lW.from(this.allOfInvoice.join(""),"hex").toString("base64"))}}function Io(o=new Date){let e=String(o.getFullYear()),i=String(o.getMonth()+1),n=String(o.getDate()),r=String(o.getHours()),l=String(o.getMinutes()),C=String(o.getSeconds());return e.length<4&&(e="20"+e),i.length<2&&(i="0"+i),n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),l.length<2&&(l="0"+l),C.length<2&&(C="0"+C),`${e}-${i}-${n}T${r}:${l}:${C}Z`}function Eo(o,e){if(1&o&&(t.TgZ(0,"div")(1,"p",14),t._uU(2,"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u0644\u0633\u0644\u064a"),t.qZA(),t.TgZ(3,"p",15),t._uU(4),t.qZA()()),2&o){const i=t.oxw();t.xp6(4),t.Oqu(i.invoiceNumber)}}function Ro(o,e){if(1&o&&(t.TgZ(0,"td",21),t._UZ(1,"app-qrlevelone",47),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("formData",i.formDataSent)}}function Po(o,e){1&o&&(t.TgZ(0,"div",22)(1,"p",45),t._uU(2,"\u0645\u0644\u0627\u062d\u0638\u0629"),t.qZA(),t.TgZ(3,"p",48),t._uU(4,"\u062a\u0639\u062a\u0628\u0631 \u0647\u0630\u0647 \u0627\u0644\u0648\u0631\u0642\u0629 \u0645\u0637\u0627\u0644\u0628\u0629 \u0648\u0644\u0627 \u064a\u0639\u062a\u0645\u062f \u0628\u0647\u0627 \u0623\u0645\u0627\u0645 \u0627\u0644\u0632\u0643\u0627\u0629 \u0648\u0627\u0644\u062f\u062e\u0644 \u0623\u0648 \u0627\u064a\u0629 \u062c\u0647\u0629 \u062d\u0643\u0648\u0645\u064a\u0629 \u0627\u062e\u0631\u0649 \u0648\u0633\u064a\u062a\u0645 \u0625\u0635\u062f\u0627\u0631 \u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629 \u0628\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0633\u062a\u062d\u0642."),t.qZA(),t.TgZ(5,"p"),t._uU(6," .......... \u0648\u0644\u0643\u0645 \u062c\u0632\u064a \u0627\u0644\u0634\u0643\u0631 .........."),t.qZA()())}Kt.\u0275fac=function(e){return new(e||Kt)(t.Y36(Ze.q))},Kt.\u0275cmp=t.Xpm({type:Kt,selectors:[["app-qrlevelone"]],inputs:{formData:"formData"},features:[t.TTD],decls:1,vars:5,consts:[[3,"qrdata","width","errorCorrectionLevel","allowEmptyString"]],template:function(e,i){1&e&&t._UZ(0,"qrcode",0),2&e&&t.Q6J("qrdata",i.finalCode)("width",256)("errorCorrectionLevel","M")("width",130)("allowEmptyString",!0)},dependencies:[Ue.V]});class Gt{constructor(e,i,n,r,l,C){this.transferService=e,this.appSettings=i,this.datePipe=n,this.http=r,this._sanitizer=l,this.settingService=C,this.getBase64StringFromDataURL=y=>y.replace("data:","").replace(/^.+,/,""),this.settings=this.appSettings.settings}ngOnInit(){this.transferService.getMessage.subscribe(l=>{this.invoiceID=l.invId,this.ownerid=l.ownerID,this.tenantid=l.tenantID,this.ownerTaxNumber=l.ownerTaxNumber,this.ownerName=l.ownerName,this.ownerCommRegister=l.ownerCommRegister,this.ownerAddress=l.ownerAddress,this.ownerBankName=l.ownerBankName,this.ownerBankAccountNumber=l.ownerBankAccountNumber,this.accountOwnerName=l.accountOwnerName,this.tenantAddress=l.tenantAddress,this.tenantName=l.tenantName,this.tenantTaxNumber=l.tenantTaxNumber,this.tenantCommRegister=l.tenantCommRegister,this.invoiceValue=l.invoiceValue,this.invoiceNumber=l.invoiceNumber,this.intervalStartDate=l.intervalStartDate,this.intervalEndDate=l.intervalEndDate,this.ownerLogo=l.ownerLogo,this.ownerLogoBase64=l.ownerLogoBase64,this.CusEInvType=l.customer_EInvoiceType,this.invType=l.invType,this.invDate=l.invDate,this.invDateString=l.invDateString,this.invFromDate=l.invFrom,this.invToDate=l.invTo,console.log("-*-*-*this.invType:: "+this.invType+"*-*-*-"),console.log("-*-*-*this.invoiceValue:: "+this.invoiceValue+"*-*-*-"),"S"==this.invType?"B"==this.CusEInvType?this.invTypeText="\u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629":"P"==this.CusEInvType&&(this.invTypeText="\u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629 \u0645\u0628\u0633\u0637\u0629"):"R"==this.invType&&(this.invTypeText="\u0645\u0637\u0627\u0644\u0628\u0640\u0629 \u0645\u0627\u0644\u064a\u0640\u0629")}),this.invoiceValue=parseFloat(this.invoiceValue).toFixed(2),this.taxValue=(.15*this.invoiceValue).toFixed(2),this.netValue=(1.15*this.invoiceValue).toFixed(2);var e=(new Date).setSeconds(0,0),i=new Date(e).toISOString(),n=new Date(this.invDate).setSeconds(0,0),r=new Date(n).toISOString();console.log("---dt:: "+i),console.log("---this.invDate:: "+this.invDate),console.log("---efgh:: "+r),this.curDateTime=i,this.curDate=new Date(this.invDate),this.curDate=this.datePipe.transform(this.curDate,"yyyy-MM-dd"),this.formDataSent={invid:this.invoiceID,sellerName:this.ownerName,vatRegNum:this.ownerTaxNumber,time:this.invDateString,totalWithVat:parseFloat(this.netValue).toFixed(2),totalVat:parseFloat(this.taxValue).toFixed(2)}}sanitize(e){return this._sanitizer.bypassSecurityTrustUrl(e)}testPDF(){}downloadPDF(){var e=document.getElementById("contentToConvert");ye()(e,{scale:2}).then(i=>{var l=208*i.height/i.width;const y=i.toDataURL("image/jpeg",.5),U=this.getBase64StringFromDataURL(y);let M=new Ae.kH("p","mm","a4");M.addImage(U,"PNG",0,0,208,l),M.save(this.curDateTime.toString()+".pdf")})}printinv(){let e,i;e=document.getElementById("contentToConvert").innerHTML,i=window.open("","_blank","top=0,left=0,height=100%,width=auto"),i.document.open(),i.document.write(`\n      <html>\n        <head>\n          <title>Print tab</title>\n          <style>          \n          // -----------------------------------------------------------------------\n          \n          *,\n          ::before,\n          ::after {\n            box-sizing: border-box;\n            /* 1 */\n            border-width: 0;\n            /* 2 */\n            border-style: solid;\n            /* 2 */\n            border-color: #e5e7eb;\n            /* 2 */\n          }\n          \n          ::before,\n          ::after {\n            --tw-content: '';\n          }\n          \n          html {\n            line-height: 1.5;\n            /* 1 */\n            -webkit-text-size-adjust: 100%;\n            /* 2 */\n            -moz-tab-size: 4;\n            /* 3 */\n            tab-size: 4;\n            /* 3 */\n            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n            /* 4 */\n            font-feature-settings: normal;\n            /* 5 */\n            font-variation-settings: normal;\n            /* 6 */\n          }\n          \n          body {\n            margin: 0;\n            /* 1 */\n            line-height: inherit;\n            /* 2 */\n          }\n          \n          /*\n          1. Add the correct height in Firefox.\n          2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n          3. Ensure horizontal rules are visible by default.\n          */\n          \n          hr {\n            height: 0;\n            /* 1 */\n            color: inherit;\n            /* 2 */\n            border-top-width: 1px;\n            /* 3 */\n          }\n          \n          /*\n          Add the correct text decoration in Chrome, Edge, and Safari.\n          */\n          \n          abbr:where([title]) {\n            -webkit-text-decoration: underline dotted;\n                    text-decoration: underline dotted;\n          }\n          \n          /*\n          Remove the default font size and weight for headings.\n          */\n          \n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6 {\n            font-size: inherit;\n            font-weight: inherit;\n          }\n          \n          /*\n          Reset links to optimize for opt-in styling instead of opt-out.\n          */\n          \n          a {\n            color: inherit;\n            text-decoration: inherit;\n          }\n          \n          /*\n          Add the correct font weight in Edge and Safari.\n          */\n          \n          b,\n          strong {\n            font-weight: bolder;\n          }\n          \n          code,\n          kbd,\n          samp,\n          pre {\n            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n            /* 1 */\n            font-size: 1em;\n            /* 2 */\n          }\n          \n          /*\n          Add the correct font size in all browsers.\n          */\n          \n          small {\n            font-size: 80%;\n          }\n          \n          sub,\n          sup {\n            font-size: 75%;\n            line-height: 0;\n            position: relative;\n            vertical-align: baseline;\n          }\n          \n          sub {\n            bottom: -0.25em;\n          }\n          \n          sup {\n            top: -0.5em;\n          }\n          \n          /*\n          1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n          2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n          3. Remove gaps between table borders by default.\n          */\n          \n          table {\n            text-indent: 0;\n            /* 1 */\n            border-color: inherit;\n            /* 2 */\n            border-collapse: collapse;\n            /* 3 */\n          }\n          \n          /*\n          1. Change the font styles in all browsers.\n          2. Remove the margin in Firefox and Safari.\n          3. Remove default padding in all browsers.\n          */\n          \n          button,\n          input,\n          optgroup,\n          select,\n          textarea {\n            font-family: inherit;\n            /* 1 */\n            font-feature-settings: inherit;\n            /* 1 */\n            font-variation-settings: inherit;\n            /* 1 */\n            font-size: 100%;\n            /* 1 */\n            font-weight: inherit;\n            /* 1 */\n            line-height: inherit;\n            /* 1 */\n            color: inherit;\n            /* 1 */\n            margin: 0;\n            /* 2 */\n            padding: 0;\n            /* 3 */\n          }\n          \n          /*\n          Remove the inheritance of text transform in Edge and Firefox.\n          */\n          \n          button,\n          select {\n            text-transform: none;\n          }\n          \n          /*\n          1. Correct the inability to style clickable types in iOS and Safari.\n          2. Remove default button styles.\n          */\n          \n          button,\n          [type='button'],\n          [type='reset'],\n          [type='submit'] {\n            -webkit-appearance: button;\n            /* 1 */\n            background-color: transparent;\n            /* 2 */\n            background-image: none;\n            /* 2 */\n          }\n          \n          /*\n          Use the modern Firefox focus style for all focusable elements.\n          */\n          \n          :-moz-focusring {\n            outline: auto;\n          }\n          \n          :-moz-ui-invalid {\n            box-shadow: none;\n          }\n          \n          /*\n          Add the correct vertical alignment in Chrome and Firefox.\n          */\n          \n          progress {\n            vertical-align: baseline;\n          }\n          \n          /*\n          Correct the cursor style of increment and decrement buttons in Safari.\n          */\n          \n          ::-webkit-inner-spin-button,\n          ::-webkit-outer-spin-button {\n            height: auto;\n          }\n          \n          /*\n          1. Correct the odd appearance in Chrome and Safari.\n          2. Correct the outline style in Safari.\n          */\n          \n          [type='search'] {\n            -webkit-appearance: textfield;\n            /* 1 */\n            outline-offset: -2px;\n            /* 2 */\n          }\n          \n          /*\n          Remove the inner padding in Chrome and Safari on macOS.\n          */\n          \n          ::-webkit-search-decoration {\n            -webkit-appearance: none;\n          }\n          \n          ::-webkit-file-upload-button {\n            -webkit-appearance: button;\n            /* 1 */\n            font: inherit;\n            /* 2 */\n          }\n          \n          /*\n          Add the correct display in Chrome and Safari.\n          */\n          \n          summary {\n            display: list-item;\n          }\n          \n          /*\n          Removes the default spacing and border for appropriate elements.\n          */\n          \n          blockquote,\n          dl,\n          dd,\n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6,\n          hr,\n          figure,\n          p,\n          pre {\n            margin: 0;\n          }\n          \n          fieldset {\n            margin: 0;\n            padding: 0;\n          }\n          \n          legend {\n            padding: 0;\n          }\n          \n          ol,\n          ul,\n          menu {\n            list-style: none;\n            margin: 0;\n            padding: 0;\n          }\n          \n          /*\n          Reset default styling for dialogs.\n          */\n          \n          dialog {\n            padding: 0;\n          }\n          \n          /*\n          Prevent resizing textareas horizontally by default.\n          */\n          \n          textarea {\n            resize: vertical;\n          }\n          \n          /*\n          1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n          2. Set the default placeholder color to the user's configured gray 400 color.\n          */\n          \n          input::placeholder,\n          textarea::placeholder {\n            opacity: 1;\n            /* 1 */\n            color: #9ca3af;\n            /* 2 */\n          }\n          \n          /*\n          Set the default cursor for buttons.\n          */\n          \n          button,\n          [role="button"] {\n            cursor: pointer;\n          }\n          \n          /*\n          Make sure disabled buttons don't get the pointer cursor.\n          */\n          \n          :disabled {\n            cursor: default;\n          }\n          \n          img,\n          svg,\n          video,\n          canvas,\n          audio,\n          iframe,\n          embed,\n          object {\n            display: block;\n            /* 1 */\n            vertical-align: middle;\n            /* 2 */\n          }\n          \n          /*\n          Constrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n          */\n          \n          img,\n          video {\n            max-width: 100%;\n            height: auto;\n          }\n          \n          /* Make elements with the HTML hidden attribute stay hidden by default */\n          \n          [hidden] {\n            display: none;\n          }\n          \n          *, ::before, ::after{\n            --tw-border-spacing-x: 0;\n            --tw-border-spacing-y: 0;\n            --tw-translate-x: 0;\n            --tw-translate-y: 0;\n            --tw-rotate: 0;\n            --tw-skew-x: 0;\n            --tw-skew-y: 0;\n            --tw-scale-x: 1;\n            --tw-scale-y: 1;\n            --tw-pan-x:  ;\n            --tw-pan-y:  ;\n            --tw-pinch-zoom:  ;\n            --tw-scroll-snap-strictness: proximity;\n            --tw-gradient-from-position:  ;\n            --tw-gradient-via-position:  ;\n            --tw-gradient-to-position:  ;\n            --tw-ordinal:  ;\n            --tw-slashed-zero:  ;\n            --tw-numeric-figure:  ;\n            --tw-numeric-spacing:  ;\n            --tw-numeric-fraction:  ;\n            --tw-ring-inset:  ;\n            --tw-ring-offset-width: 0px;\n            --tw-ring-offset-color: #fff;\n            --tw-ring-color: rgb(59 130 246 / 0.5);\n            --tw-ring-offset-shadow: 0 0 #0000;\n            --tw-ring-shadow: 0 0 #0000;\n            --tw-shadow: 0 0 #0000;\n            --tw-shadow-colored: 0 0 #0000;\n            --tw-blur:  ;\n            --tw-brightness:  ;\n            --tw-contrast:  ;\n            --tw-grayscale:  ;\n            --tw-hue-rotate:  ;\n            --tw-invert:  ;\n            --tw-saturate:  ;\n            --tw-sepia:  ;\n            --tw-drop-shadow:  ;\n            --tw-backdrop-blur:  ;\n            --tw-backdrop-brightness:  ;\n            --tw-backdrop-contrast:  ;\n            --tw-backdrop-grayscale:  ;\n            --tw-backdrop-hue-rotate:  ;\n            --tw-backdrop-invert:  ;\n            --tw-backdrop-opacity:  ;\n            --tw-backdrop-saturate:  ;\n            --tw-backdrop-sepia:  ;\n          }\n          \n          ::backdrop{\n            --tw-border-spacing-x: 0;\n            --tw-border-spacing-y: 0;\n            --tw-translate-x: 0;\n            --tw-translate-y: 0;\n            --tw-rotate: 0;\n            --tw-skew-x: 0;\n            --tw-skew-y: 0;\n            --tw-scale-x: 1;\n            --tw-scale-y: 1;\n            --tw-pan-x:  ;\n            --tw-pan-y:  ;\n            --tw-pinch-zoom:  ;\n            --tw-scroll-snap-strictness: proximity;\n            --tw-gradient-from-position:  ;\n            --tw-gradient-via-position:  ;\n            --tw-gradient-to-position:  ;\n            --tw-ordinal:  ;\n            --tw-slashed-zero:  ;\n            --tw-numeric-figure:  ;\n            --tw-numeric-spacing:  ;\n            --tw-numeric-fraction:  ;\n            --tw-ring-inset:  ;\n            --tw-ring-offset-width: 0px;\n            --tw-ring-offset-color: #fff;\n            --tw-ring-color: rgb(59 130 246 / 0.5);\n            --tw-ring-offset-shadow: 0 0 #0000;\n            --tw-ring-shadow: 0 0 #0000;\n            --tw-shadow: 0 0 #0000;\n            --tw-shadow-colored: 0 0 #0000;\n            --tw-blur:  ;\n            --tw-brightness:  ;\n            --tw-contrast:  ;\n            --tw-grayscale:  ;\n            --tw-hue-rotate:  ;\n            --tw-invert:  ;\n            --tw-saturate:  ;\n            --tw-sepia:  ;\n            --tw-drop-shadow:  ;\n            --tw-backdrop-blur:  ;\n            --tw-backdrop-brightness:  ;\n            --tw-backdrop-contrast:  ;\n            --tw-backdrop-grayscale:  ;\n            --tw-backdrop-hue-rotate:  ;\n            --tw-backdrop-invert:  ;\n            --tw-backdrop-opacity:  ;\n            --tw-backdrop-saturate:  ;\n            --tw-backdrop-sepia:  ;\n          }\n          \n          .fixed{\n            position: fixed;\n          }\n          \n          .bottom-0{\n            bottom: 0px;\n          }\n          \n          .left-0{\n            left: 0px;\n          }\n          \n          .table{\n            display: table;\n          }\n          \n          .h-12{\n            height: 3rem;\n          }\n          \n          .w-1/2{\n            width: 50%;\n          }\n          \n          .w-full{\n            width: 100%;\n          }\n          \n          .border-collapse{\n            border-collapse: collapse;\n          }\n          \n          .border-spacing-0{\n            --tw-border-spacing-x: 0px;\n            --tw-border-spacing-y: 0px;\n            border-spacing: var(--tw-border-spacing-x) var(--tw-border-spacing-y);\n          }\n          \n          .whitespace-nowrap{\n            white-space: nowrap;\n          }\n          \n          .border-b{\n            border-bottom-width: 1px;\n          }\n          \n          .border-b-2{\n            border-bottom-width: 2px;\n          }\n          \n          .border-r{\n            border-right-width: 1px;\n          }\n          \n          .border-main{\n            border-color: #5c6ac4;\n          }\n          \n          .bg-main{\n            background-color: #5c6ac4;\n          }\n          \n          .bg-slate-100{\n            background-color: #f1f5f9;\n          }\n          \n          .p-3{\n            padding: 0.75rem;\n          }\n          \n          .p-4{\n              padding: 1.25rem;\n            }\n          \n          .px-14{\n            padding-left: 3.5rem;\n            padding-right: 3.5rem;\n          }\n          \n          .px-2{\n            padding-left: 0.5rem;\n            padding-right: 0.5rem;\n          }\n          \n          .py-10{\n            padding-top: 2.5rem;\n            padding-bottom: 2.5rem;\n          }\n          \n          .py-3{\n            padding-top: 0.75rem;\n            padding-bottom: 0.75rem;\n          }\n          \n          .py-4{\n            padding-top: 1rem;\n            padding-bottom: 1rem;\n          }\n          \n          .py-6{\n            padding-top: 1.5rem;\n            padding-bottom: 1.5rem;\n          }\n          \n          .pb-3{\n            padding-bottom: 0.75rem;\n          }\n          \n          .pl-2{\n            padding-left: 0.5rem;\n          }\n          \n          .pl-3{\n            padding-left: 0.75rem;\n          }\n          \n          .pl-4{\n            padding-left: 1rem;\n          }\n          \n          .pr-3{\n            padding-right: 0.75rem;\n          }\n          \n          .pr-4{\n            padding-right: 1rem;\n          }\n          \n          .pr-6{\n              padding-right: 6rem;\n            }\n          \n          .text-center{\n            text-align: center;\n          }\n          \n          .text-right{\n            text-align: right;\n          }\n          \n          .align-top{\n            vertical-align: top;\n          }\n          \n          .text-sm{\n            font-size: 0.875rem;\n            line-height: 1.25rem;\n          }\n          \n          .text-xs{\n            font-size: 0.75rem;\n            line-height: 1rem;\n          }\n          \n          .font-bold{\n            font-weight: 700;\n          }\n          .font-bold40{\n              font-weight: 700;\n              font-size: 40px;\n            }\n          .font-bold30{\n              font-weight: 700;\n              font-size: 30px;\n          }\n          \n          \n          .italic{\n            font-style: italic;\n          }\n          \n          .text-main{\n            color: #5c6ac4;\n          }\n          \n          .text-neutral-600{\n            color: #525252;\n          }\n          \n          .text-neutral-700{\n            color: #404040;\n          }\n          \n          .text-slate-300{\n            color: #cbd5e1;\n          }\n          \n          .text-slate-400{\n            color: #94a3b8;\n          }\n          \n          .text-white{\n            color: #fff;\n          }\n          \n          @page {\n            margin: 0;\n          }\n          \n          @media print {\n            body {\n              -webkit-print-color-adjust: exact;\n            }\n          }  \n          \n          // -----------------------------------------------------------------------\n.text-head{\n  font-size: 24px;\n  font-weight: bold;\n  color: #111;\n  text-align: center;\n  }\n.text-headdate{\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n  }\n.net{\n  font-size: 14px;\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n  }\n.text-rtl{\n  text-align: right;\n  }\n.msg {\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\n  font-size: 14px;\n  width: 100%;\n  text-align: right;\n}\n.bankdata {\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\n  font-size: 12px;\n  width: 100%;\n  text-align: right;\n}\n.footermsg {\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\n  font-size: 10px;\n  width: 100%;\n  text-align: right;\n}\n.text-headcustomer{\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n  }\n.invoice-box {\n  max-width: 800px;\n  margin: auto;\n  padding: 30px;\n  border: 1px solid #eee;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\n  font-size: 14px;\n  line-height: 24px;\n  font-family: 'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.invoice-box table {\n  width: 100%;\n  line-height: inherit;\n  text-align: left;\n}\n\n.invoice-box table td {\n  padding: 5px;\n  vertical-align: top;\n}\n\n.invoice-box table tr td:nth-child(2) {\n  text-align: right;\n}\n\n.invoice-box table tr.top table td {\n  padding-bottom: 20px;\n}\n\n.invoice-box table tr.top table td.title {\n  font-size: 45px;\n  line-height: 45px;\n  color: #333;\n}\n\n.invoice-box table tr.information table td {\n  padding-bottom: 40px;\n}\n\n.invoice-box table tr.heading td {\n  background: #eee;\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\t\n  text-align: right;\t\t\t\n}\n\n.invoice-box table tr.details td {\n  padding-bottom: 20px;\n  border-bottom: 1px solid #eee;\n}\n\n.invoice-box table tr.item td {\n  border-bottom: 1px solid #eee;\n}\n\n.invoice-box table tr.item.last td {\n  border-bottom: none;\n}\n\n.invoice-box table tr.total td:nth-child(2) {\n  border-top: 2px solid #111;\n  font-weight: bold;\n  font-size: 20px;\n}\n\n@media only screen and (max-width: 600px) {\n  .invoice-box table tr.top table td {\n      width: 100%;\n      display: block;\n      text-align: center;\n  }\n\n  .invoice-box table tr.information table td {\n      width: 100%;\n      display: block;\n      text-align: center;\n  }\n}\n\n/** RTL **/\n.invoice-box.rtl {\n  direction: rtl;\n  font-family: Tahoma, 'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;\n}\n\n.invoice-box.rtl table {\n  text-align: right;\n}\n\n.invoice-box.rtl table tr td:nth-child(2) {\n  text-align: left;\n}\n  \n          </style>\n          <script>\n            var global = global || window;\n          <\/script>\n\n        </head>\n    <body onload="window.print();window.close()">${e}</body>\n      </html>`),i.document.close()}}function ko(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-button-toggle",22),t.NdJ("click",function(){t.CHM(i);const r=t.oxw(2);return t.KtG(r.gotoNewTenantFullData())}),t.TgZ(1,"mat-icon"),t._uU(2,"person_add"),t.qZA()()}}function Bo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"mat-button-toggle-group",10,11),t.YNc(5,ko,3,0,"mat-button-toggle",12),t.TgZ(6,"mat-button-toggle",13)(7,"mat-icon"),t._uU(8,"search"),t.qZA()()()(),t.TgZ(9,"form",14)(10,"mat-form-field",15)(11,"input",16),t.NdJ("ngModelChange",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.searchText=r)}),t.ALo(12,"translate"),t.qZA()()(),t.TgZ(13,"div",17)(14,"mat-button-toggle-group",18,19)(16,"mat-button-toggle",20)(17,"mat-icon"),t._uU(18,"view_list"),t.qZA()(),t.TgZ(19,"mat-button-toggle",21)(20,"mat-icon"),t._uU(21,"view_module"),t.qZA()()()()()()}if(2&o){const i=t.MAs(4),n=t.oxw();t.xp6(5),t.Q6J("ngIf",n.can("add_tenant")),t.xp6(4),t.ekj("show","search"==i.value),t.xp6(2),t.s9C("placeholder",t.lcZ(12,5,"HTML.SEARCH_TENANT_AnyValue")),t.Q6J("ngModel",n.searchText)}}Gt.\u0275fac=function(e){return new(e||Gt)(t.Y36(ut.y),t.Y36(rt.d),t.Y36(_.uU),t.Y36(Ce.eN),t.Y36(Pt.H7),t.Y36(dt.g))},Gt.\u0275cmp=t.Xpm({type:Gt,selectors:[["app-print-einvoice"]],features:[t._Bn([_.uU])],decls:151,vars:27,consts:[["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click"],["id","contentToConvert",1,"py-4"],[1,"px-14","py-6"],[1,"w-full","border-collapse","border-spacing-0"],[1,"w-full","align-top"],["width","150","height","150",3,"src"],[1,"align-top"],[1,"text-sm"],[1,"border-collapse","border-spacing-0"],[1,"pl-4"],[1,"whitespace-nowrap","font-bold30","text-main","text-right"],[1,"border-r","pr-4"],[4,"ngIf"],[1,"whitespace-nowrap","text-slate-400","text-right"],[1,"whitespace-nowrap","font-bold","text-main","text-right"],["class","border-r pr-6",4,"ngIf"],[1,"bg-slate-100","px-14","py-6","text-sm"],[1,"w-1/2","align-top"],[1,"text-sm","text-neutral-600"],[1,"font-bold"],[1,"border-r","pr-6"],[1,"px-14","py-10","text-sm","text-neutral-700"],[1,"border-b-2","border-main","pb-3","pl-3","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","text-right","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","text-center","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","pr-3","text-right","font-bold","text-main"],[1,"border-b","py-3","pl-3"],[1,"border-b","py-3","pl-2"],[1,"border-b","py-3","pl-2","text-right"],[1,"border-b","py-3","pl-2","text-center"],[1,"border-b","py-3","pl-2","pr-3","text-right"],["colspan","7"],[1,"w-full"],[1,"border-b","p-3"],[1,"whitespace-nowrap","text-slate-400"],[1,"border-b","p-3","text-right"],[1,"whitespace-nowrap","font-bold","text-main"],[1,"p-3"],[1,"p-3","text-right"],[1,"bg-main","p-3"],[1,"whitespace-nowrap","font-bold","text-white"],[1,"bg-main","p-3","text-right"],[1,"px-14","text-sm","text-neutral-700"],[1,"text-main","font-bold"],["class","px-14 py-10 text-sm text-neutral-700",4,"ngIf"],[3,"formData"],[1,"italic"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"button",1),t.NdJ("click",function(){return i.downloadPDF()}),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t._UZ(5,"mat-divider"),t.TgZ(6,"div")(7,"div",2)(8,"div",3)(9,"table",4)(10,"tbody")(11,"tr")(12,"td",5)(13,"div"),t._UZ(14,"img",6),t.qZA()()(),t.TgZ(15,"tr")(16,"td",7)(17,"div",8)(18,"table",9)(19,"tbody")(20,"tr")(21,"td",10),t._UZ(22,"div"),t.qZA(),t.TgZ(23,"td",10),t._UZ(24,"div"),t.qZA(),t.TgZ(25,"td",10)(26,"div")(27,"p",11),t._uU(28),t.qZA()()(),t.TgZ(29,"td",12),t.YNc(30,Eo,5,1,"div",13),t.TgZ(31,"div")(32,"p",14),t._uU(33,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"),t.qZA(),t.TgZ(34,"p",15),t._uU(35),t.qZA()()(),t.YNc(36,Ro,2,1,"td",16),t.qZA()()()()()()()()(),t.TgZ(37,"div",17)(38,"table",4)(39,"tbody")(40,"tr")(41,"td",10),t._UZ(42,"div"),t.qZA(),t.TgZ(43,"td",18)(44,"div",19)(45,"p",20),t._uU(46,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u0643"),t.qZA(),t.TgZ(47,"p",20),t._uU(48),t.qZA(),t.TgZ(49,"p"),t._uU(50),t.qZA(),t.TgZ(51,"p"),t._uU(52),t.qZA(),t.TgZ(53,"p"),t._uU(54),t.qZA()()(),t.TgZ(55,"td",21)(56,"div",19)(57,"p",20),t._uU(58,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644"),t.qZA(),t.TgZ(59,"p",20),t._uU(60),t.qZA(),t.TgZ(61,"p"),t._uU(62),t.qZA(),t.TgZ(63,"p"),t._uU(64),t.qZA(),t.TgZ(65,"p"),t._uU(66),t.qZA()()()()()()(),t.TgZ(67,"div",22)(68,"table",4)(69,"thead")(70,"tr")(71,"td",23),t._uU(72,"#"),t.qZA(),t.TgZ(73,"td",24),t._uU(74,"\u0627\u0644\u0635\u0646\u0641"),t.qZA(),t.TgZ(75,"td",25),t._uU(76,"\u0627\u0644\u0642\u064a\u0645\u0629"),t.qZA(),t.TgZ(77,"td",26),t._uU(78,"\u0627\u0644\u0643\u0645\u064a\u0629."),t.qZA(),t.TgZ(79,"td",25),t._uU(80,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),t.qZA(),t.TgZ(81,"td",26),t._uU(82,"\u0646\u0633\u0628\u0629 \u0627\u0644\u0636\u0631\u064a\u0628\u0629"),t.qZA(),t.TgZ(83,"td",26),t._uU(84,"\u0627\u0644\u0636\u0631\u064a\u0628\u0629"),t.qZA(),t.TgZ(85,"td",27),t._uU(86,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a \u0645\u0639 \u0627\u0644\u0636\u0631\u064a\u0628\u0629"),t.qZA()()(),t.TgZ(87,"tbody")(88,"tr")(89,"td",28),t._uU(90,"1."),t.qZA(),t.TgZ(91,"td",29),t._uU(92,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0625\u064a\u062c\u0627\u0631"),t.qZA(),t.TgZ(93,"td",30),t._uU(94),t.qZA(),t.TgZ(95,"td",31),t._uU(96,"1"),t.qZA(),t.TgZ(97,"td",31),t._uU(98),t.qZA(),t.TgZ(99,"td",31),t._uU(100,"%15"),t.qZA(),t.TgZ(101,"td",30),t._uU(102),t.qZA(),t.TgZ(103,"td",32),t._uU(104),t.qZA()(),t.TgZ(105,"tr")(106,"td",33)(107,"table",4)(108,"tbody")(109,"tr"),t._UZ(110,"td",34),t.TgZ(111,"td")(112,"table",4)(113,"tbody")(114,"tr")(115,"td",35)(116,"div",36),t._uU(117,"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0628\u062f\u0648\u0646 \u0636\u0631\u064a\u0628\u0629:"),t.qZA()(),t.TgZ(118,"td",37)(119,"div",38),t._uU(120),t.qZA()()(),t.TgZ(121,"tr")(122,"td",39)(123,"div",36),t._uU(124,"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0636\u0631\u064a\u0628\u0629:"),t.qZA()(),t.TgZ(125,"td",40)(126,"div",38),t._uU(127),t.qZA()()(),t.TgZ(128,"tr")(129,"td",41)(130,"div",42),t._uU(131,"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0645\u0639 \u0627\u0644\u0636\u0631\u064a\u0628\u0629:"),t.qZA()(),t.TgZ(132,"td",43)(133,"div",42),t._uU(134),t.qZA()()()()()()()()()()()()()(),t.TgZ(135,"div",44)(136,"p",45),t._uU(137,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062a\u062d\u0648\u064a\u0644"),t.qZA(),t.TgZ(138,"p"),t._uU(139," \u0627\u0633\u0645 \u0627\u0644\u0628\u0646\u0643 : "),t.TgZ(140,"b"),t._uU(141),t.qZA()(),t.TgZ(142,"p"),t._uU(143," \u0631\u0642\u0645 \u0627\u0644\u062d\u0633\u0627\u0628: "),t.TgZ(144,"b"),t._uU(145),t.qZA()(),t.TgZ(146,"p"),t._uU(147," \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f : "),t.TgZ(148,"b"),t._uU(149),t.qZA()()(),t.YNc(150,Po,7,0,"div",46),t.qZA()()()),2&e){let n,r;t.xp6(3),t.Oqu(t.lcZ(4,25,"BTN.DownloadPDF")),t.xp6(11),t.Q6J("src",i.sanitize(i.ownerLogoBase64),t.LSH),t.xp6(14),t.hij("",i.invTypeText," "),t.xp6(2),t.Q6J("ngIf","S"==i.invType),t.xp6(5),t.Oqu(i.curDate),t.xp6(1),t.Q6J("ngIf","S"==i.invType),t.xp6(12),t.Oqu(null!==(n=i.ownerName)&&void 0!==n?n:"Supplier Company INC"),t.xp6(2),t.hij("\u0627\u0644\u0639\u0646\u0648\u0627\u0646: ",i.ownerAddress,""),t.xp6(2),t.hij("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a: ",i.ownerTaxNumber,""),t.xp6(2),t.hij(":\u0631\u0642\u0645 \u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a ",i.ownerCommRegister,""),t.xp6(6),t.Oqu(null!==(r=i.tenantName)&&void 0!==r?r:"Customer Company"),t.xp6(2),t.hij("\u0627\u0644\u0639\u0646\u0648\u0627\u0646: ",i.tenantAddress,""),t.xp6(2),t.hij("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a: ",i.tenantTaxNumber,""),t.xp6(2),t.hij(":\u0631\u0642\u0645 \u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a ",i.tenantCommRegister,""),t.xp6(28),t.hij("",i.invoiceValue," \u0631\u0633"),t.xp6(4),t.hij("",i.invoiceValue," \u0631\u0633"),t.xp6(4),t.hij("",i.taxValue," \u0631\u0633"),t.xp6(2),t.hij("",i.netValue," \u0631\u0633"),t.xp6(16),t.hij("",i.invoiceValue," \u0631\u0633"),t.xp6(7),t.hij("",i.taxValue," \u0631\u0633"),t.xp6(7),t.hij("",i.netValue," \u0631\u0633"),t.xp6(7),t.Oqu(i.ownerBankName),t.xp6(4),t.Oqu(i.ownerBankAccountNumber),t.xp6(4),t.Oqu(i.accountOwnerName),t.xp6(1),t.Q6J("ngIf","REQUEST"==i.invType)}},dependencies:[_.O5,T.xw,T.Wh,b.lW,G.a8,tt.d,Kt,w.X$],styles:['.text-head[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#111;text-align:center}.text-headdate[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;text-align:right}.net[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333;text-align:right}.text-rtl[_ngcontent-%COMP%]{text-align:right}.msg[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-weight:700;font-size:22px;width:100%;text-align:right}.bankdata[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-weight:700;font-size:18px;width:100%;text-align:right}.footermsg[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-weight:700;font-size:16px;width:100%;text-align:right}.text-headcustomer[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#111;text-align:right}.invoice-box[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:30px;border:1px solid #eee;box-shadow:0 0 10px #00000026;font-size:16px;line-height:24px;font-family:Helvetica Neue,Helvetica,Helvetica,Arial,sans-serif;color:#555}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;line-height:inherit;text-align:left}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px;vertical-align:top}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:right}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.top[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:20px}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.top[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.title[_ngcontent-%COMP%]{font-size:45px;line-height:45px;color:#333}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.information[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:40px}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.heading[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#eee;border-bottom:1px solid #ddd;font-weight:700;text-align:right}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:20px;border-bottom:1px solid #eee}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #eee}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.item.last[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:none}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){border-top:2px solid #111;font-weight:700;font-size:20px}@media only screen and (max-width: 600px){.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.top[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.information[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:100%;display:block;text-align:center}}.invoice-box.rtl[_ngcontent-%COMP%]{direction:rtl;font-family:Tahoma,Helvetica Neue,Helvetica,Helvetica,Arial,sans-serif}.invoice-box.rtl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{text-align:right}.invoice-box.rtl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:left}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}[_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{--tw-content: ""}html[_ngcontent-%COMP%]{line-height:1.5;-webkit-text-size-adjust:100%;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal}body[_ngcontent-%COMP%]{margin:0;line-height:inherit}hr[_ngcontent-%COMP%]{height:0;color:inherit;border-top-width:1px}abbr[_ngcontent-%COMP%]:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-size:inherit;font-weight:inherit}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}b[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{font-weight:bolder}code[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], samp[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small[_ngcontent-%COMP%]{font-size:80%}sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%]{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub[_ngcontent-%COMP%]{bottom:-.25em}sup[_ngcontent-%COMP%]{top:-.5em}table[_ngcontent-%COMP%]{text-indent:0;border-color:inherit;border-collapse:collapse}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{text-transform:none}button[_ngcontent-%COMP%], [type=button][_ngcontent-%COMP%], [type=reset][_ngcontent-%COMP%], [type=submit][_ngcontent-%COMP%]{-webkit-appearance:button;background-color:transparent;background-image:none}[_ngcontent-%COMP%]:-moz-focusring{outline:auto}[_ngcontent-%COMP%]:-moz-ui-invalid{box-shadow:none}progress[_ngcontent-%COMP%]{vertical-align:baseline}[_ngcontent-%COMP%]::-webkit-inner-spin-button, [_ngcontent-%COMP%]::-webkit-outer-spin-button{height:auto}[type=search][_ngcontent-%COMP%]{-webkit-appearance:textfield;outline-offset:-2px}[_ngcontent-%COMP%]::-webkit-search-decoration{-webkit-appearance:none}[_ngcontent-%COMP%]::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary[_ngcontent-%COMP%]{display:list-item}blockquote[_ngcontent-%COMP%], dl[_ngcontent-%COMP%], dd[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], hr[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], p[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{margin:0}fieldset[_ngcontent-%COMP%]{margin:0;padding:0}legend[_ngcontent-%COMP%]{padding:0}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%], menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}dialog[_ngcontent-%COMP%]{padding:0}textarea[_ngcontent-%COMP%]{resize:vertical}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{opacity:1;color:#9ca3af}button[_ngcontent-%COMP%], [role=button][_ngcontent-%COMP%]{cursor:pointer}[_ngcontent-%COMP%]:disabled{cursor:default}img[_ngcontent-%COMP%], svg[_ngcontent-%COMP%], video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], audio[_ngcontent-%COMP%], iframe[_ngcontent-%COMP%], embed[_ngcontent-%COMP%], object[_ngcontent-%COMP%]{display:block;vertical-align:middle}img[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{max-width:100%;height:auto}[hidden][_ngcontent-%COMP%]{display:none}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }[_ngcontent-%COMP%]::-webkit-backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }[_ngcontent-%COMP%]::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.fixed[_ngcontent-%COMP%]{position:fixed}.bottom-0[_ngcontent-%COMP%]{bottom:0}.left-0[_ngcontent-%COMP%]{left:0}.table[_ngcontent-%COMP%]{display:table}.h-12[_ngcontent-%COMP%]{height:3rem}.w-1\\/2[_ngcontent-%COMP%]{width:50%}.w-full[_ngcontent-%COMP%]{width:100%}.border-collapse[_ngcontent-%COMP%]{border-collapse:collapse}.border-spacing-0[_ngcontent-%COMP%]{--tw-border-spacing-x: 0px;--tw-border-spacing-y: 0px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y)}.whitespace-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.border-b[_ngcontent-%COMP%]{border-bottom-width:1px}.border-b-2[_ngcontent-%COMP%]{border-bottom-width:2px}.border-r[_ngcontent-%COMP%]{border-right-width:1px}.border-main[_ngcontent-%COMP%]{border-color:#5c6ac4}.bg-main[_ngcontent-%COMP%]{background-color:#5c6ac4}.bg-slate-100[_ngcontent-%COMP%]{background-color:#f1f5f9}.p-3[_ngcontent-%COMP%]{padding:.75rem}.p-4[_ngcontent-%COMP%]{padding:1.25rem}.px-14[_ngcontent-%COMP%]{padding-left:3.5rem;padding-right:3.5rem}.px-2[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.py-10[_ngcontent-%COMP%]{padding-top:2.5rem;padding-bottom:2.5rem}.py-3[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}.py-4[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.py-6[_ngcontent-%COMP%]{padding-top:1.5rem;padding-bottom:1.5rem}.pb-3[_ngcontent-%COMP%]{padding-bottom:.75rem}.pl-2[_ngcontent-%COMP%]{padding-left:.5rem}.pl-3[_ngcontent-%COMP%]{padding-left:.75rem}.pl-4[_ngcontent-%COMP%]{padding-left:1rem}.pr-3[_ngcontent-%COMP%]{padding-right:.75rem}.pr-4[_ngcontent-%COMP%]{padding-right:1rem}.pr-6[_ngcontent-%COMP%]{padding-right:6rem}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.align-top[_ngcontent-%COMP%]{vertical-align:top}.text-sm[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.text-xs[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.font-bold40[_ngcontent-%COMP%]{font-weight:700;font-size:40px}.font-bold30[_ngcontent-%COMP%]{font-weight:700;font-size:30px}.italic[_ngcontent-%COMP%]{font-style:italic}.text-main[_ngcontent-%COMP%]{color:#5c6ac4}.text-neutral-600[_ngcontent-%COMP%]{color:#525252}.text-neutral-700[_ngcontent-%COMP%]{color:#404040}.text-slate-300[_ngcontent-%COMP%]{color:#cbd5e1}.text-slate-400[_ngcontent-%COMP%]{color:#94a3b8}.text-white[_ngcontent-%COMP%]{color:#fff}@page{margin:0}@media print{body[_ngcontent-%COMP%]{-webkit-print-color-adjust:exact}}']});const Wo=function(o){return["/contracts/businesstenant-add/",o]};function Ho(o,e){if(1&o&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.VIEW")),t.Q6J("routerLink",t.VKq(4,Wo,i.id))}}function Jo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const r=t.oxw().$implicit,l=t.oxw();return t.KtG(l.removeTenant(r.id,r.Userid))}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"BTN.REMOVE"))}const Ko=function(o){return["/contracts/statements-list/",o]};function Go(o,e){if(1&o&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.Statements")),t.Q6J("routerLink",t.VKq(4,Ko,i.id))}}const Yo=function(o){return["/contracts/contract-list/",o]};function Vo(o,e){if(1&o&&(t.TgZ(0,"a",29),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"auto_stories"),t.qZA()()),2&o){const i=t.oxw().$implicit;t.s9C("matTooltip",t.lcZ(1,2,"BTN.ContractForTenant")),t.Q6J("routerLink",t.VKq(4,Yo,i.id))}}function Qo(o,e){if(1&o&&(t.TgZ(0,"div",23)(1,"div",24),t._uU(2),t.qZA(),t.TgZ(3,"div",24),t._uU(4),t.qZA(),t.TgZ(5,"div",24),t._uU(6),t.qZA(),t.TgZ(7,"div",24),t._uU(8),t.qZA(),t.TgZ(9,"div",24),t._uU(10),t.qZA(),t.TgZ(11,"div",24),t._uU(12),t.qZA(),t.TgZ(13,"div",24)(14,"mat-icon",25),t._uU(15),t.qZA()(),t.TgZ(16,"div",24)(17,"div",26),t.YNc(18,Ho,4,6,"a",27),t.YNc(19,Jo,4,3,"button",28),t.YNc(20,Go,4,6,"a",27),t.YNc(21,Vo,4,6,"a",27),t.qZA()()()),2&o){const i=e.$implicit,n=t.oxw();t.xp6(2),t.Oqu(i.CUSName),t.xp6(2),t.Oqu(i.CUSMobile),t.xp6(2),t.hij(" ",i.build_Name," "),t.xp6(2),t.hij(" ",i.unit_Name," "),t.xp6(2),t.hij(" ",i.job_Name," "),t.xp6(2),t.hij(" ",i.workplace_Name," "),t.xp6(3),t.Oqu("T"==i.CUSActive?"check_box":"check_box_outline_blank"),t.xp6(3),t.Q6J("ngIf",n.can("change_tenant")||n.can("view_onetenant")||0==n.account.periorty&&"T"!==n.account.userDataConfirmed),t.xp6(1),t.Q6J("ngIf",n.can("delete_tenant")),t.xp6(1),t.Q6J("ngIf",n.can("view_tenantstatements")),t.xp6(1),t.Q6J("ngIf",n.can("view_contractfortenant"))}}function jo(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",31)(1,"div",32)(2,"mat-card",33)(3,"pagination-controls",34),t.NdJ("pageChange",function(r){t.CHM(i);const l=t.oxw();return t.KtG(l.onPageChanged(r))}),t.qZA()()()()}}function $o(o,e){1&o&&(t.TgZ(0,"div",35),t._UZ(1,"mat-spinner",36),t.qZA())}const zo=function(o,e){return{itemsPerPage:o,currentPage:e}};class Yt{constructor(e,i,n,r,l,C,y,U,M,F,J){this.transferService=e,this.appSettings=i,this.dialog=n,this.usersService=r,this.router=l,this.global=C,this.localStore=y,this.settingService=U,this.snackBar=M,this.translateService=F,this.userService=J,this.curTenant=new _t,this.curCOMId=N.N.comid,this.account=new at.n,this.count=8,this.defaultCusImage=(new S.P).noImage,this.CusImageToUpload=null,this.userPerm=[],this.editTenantCodeStatus=(new x.$).getEditTenantCodeStatus(),this.editCode=!0,this.settings=this.appSettings.settings}handelCUSImgInput(e){this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultCusImage=n.target.result},i.readAsDataURL(this.CusImageToUpload)}ngOnInit(){if(this.securityForApp=(new x.$).getSecurityType(),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.getParamValue(this.curCOMId,this.account.periorty,this.editTenantCodeStatus),this.prepareMsgLanguage(),this.getTenants()}else this.router.navigate(["/sign-in"])}getParamValue(e,i,n){this.settingService.getValueForCode(e,i,n).subscribe(r=>{n==this.editTenantCodeStatus&&(this.editTenantCodeValue=r[0].APAValue)},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}getTenants(){this.users=null,this.curUserData.is_superuser?this.usersService.getCustomerPerSelfType(this.curCOMId,this.account.periorty,"C").subscribe(e=>this.users=e):0==this.curUserData.periorty?this.usersService.getCustomerPerUserPerSelfType(this.curCOMId,this.account.periorty,this.curUserData.id,"C").subscribe(e=>this.users=e):("N"==this.securityForApp&&(this.curBranchID=this.curUserData.branch_KeyField??0,this.usersService.getCustomersPerBranchPerSelfType(this.curCOMId,this.account.periorty,this.curBranchID,"C").subscribe(e=>this.users=e)),"D"==this.securityForApp&&this.usersService.getCustomersPerEmployeePerSelfType(this.curCOMId,this.account.periorty,this.curUserData.id,"C").subscribe(e=>this.users=e))}addTenant(e){this.usersService.addOneCustomer(e).subscribe(i=>this.getTenants())}updateTenant(e){this.usersService.editCustomer(e,this.CusImageToUpload,this.CusImageToUpload,this.curUserData.is_employee).subscribe(i=>this.getTenants())}deleteTenant(e){this.dialog.open(nt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(n=>{n&&this.usersService.deleteCustomer(e.id).subscribe(r=>this.getTenants())})}removeTenant(e,i){this.dialog.open(nt.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(r=>{r&&this.usersService.deleteCustomer(e).subscribe(l=>{this.userService.deleteOneUser(i).subscribe(C=>{}),this.getTenants()})})}onPageChanged(e){this.page=e,this.getTenants(),window.scrollTo(0,0)}gotoTenantDisplay(e){console.log("===**gotoTenantDisplay**=== "+e),this.router.navigate(["/contracts/tenant-add/"+e])}gotoNewTenantFullData(){this.transferService.setMessage({editTenantCode:this.editTenantCodeValue}),this.router.navigate(["/contracts/businesstenant-add/"])}gotoNewTenant(){this.dialog.open(gt,{data:{periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(i=>{console.log("=====result.event:: "+i.event),"Cancel"==i.event||"Post"==i.event&&this.userService.registerTenant_with_lastName(i.data).subscribe(n=>{console.log("TenantID:: "+n.id),this.getTenants(),this.snackBar.open(this.registeredMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.can("view_onetenant")&&this.gotoTenantDisplay(n.id)},n=>{console.log("error",n),this.snackBar.open(this.notRegisteredMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})})}openTenantDialog(e){this.dialog.open(gt,{data:e}).afterClosed().subscribe(n=>{n?(console.log("=====if user True:: =============="),console.log(n),this.curTenant=new _t,console.log(this.curTenant),this.fromUserToCustomer(n),console.log(this.curTenant),n.id?this.updateTenant(this.curTenant):this.addTenant(this.curTenant)):console.log("=====if user False:: ==============")})}fromUserToCustomer(e){this.curTenant.id=e.id,this.curTenant.RowDelete=e.settings.isDeleted?1:0,this.curTenant.CUSCode=e.code,this.curTenant.CUSPic=e.image,this.curTenant.CUSGender=e.profile.gender,console.log("====Date===="),console.log(e.profile.birthday),this.curTenant.CUSBirthDate=e.profile.birthday,this.curTenant.CUSMobile=e.mobile,this.curTenant.CUSEmail=e.contacts.email,this.curTenant.CUSActive=e.settings.isActive?"T":"F",this.curTenant.CUSAddress=e.contacts.address,this.curTenant.Country_CTTKeyField=e.contacts.country,this.curTenant.CUSusername=e.username,this.curTenant.CUSFirstName=e.firstname,this.curTenant.CUSLastName=e.lastname}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(e=>{this.deletedTitleMsg=e}),this.translateService.get("MESSAGE.REGISTERD").subscribe(e=>{this.registeredMsg=e}),this.translateService.get("MESSAGE.NOTREGISTERD").subscribe(e=>{this.notRegisteredMsg=e})}}function Xo(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.ADD")))}function ta(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function ea(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Code is required"),t.qZA())}function ia(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Code isn't long enough, minimum of 4 characters"),t.qZA())}function na(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Password is required"),t.qZA())}function oa(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Password isn't long enough, minimum of 6 characters"),t.qZA())}function aa(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"mat-form-field",117)(1,"mat-label")(2,"mat-icon"),t._uU(3,"vpn_key"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"input",118),t.TgZ(7,"mat-icon",119),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.passwordHide=!r.passwordHide)}),t._uU(8),t.qZA(),t.YNc(9,na,2,0,"mat-error",1),t.YNc(10,oa,2,0,"mat-error",1),t.qZA()}if(2&o){const i=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,5,"HTML.PASSWORD"),""),t.xp6(2),t.Q6J("type",i.passwordHide?"password":"text"),t.xp6(2),t.Oqu(i.passwordHide?"visibility":"visibility_off"),t.xp6(1),t.Q6J("ngIf",null==i.form.controls.password.errors?null:i.form.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",i.form.controls.password.hasError("minlength"))}}function ra(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"First name is required"),t.qZA())}function sa(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Last name is required"),t.qZA())}function la(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Mobile is required"),t.qZA())}function ca(o,e){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Oqu(i.fileType)}}function ua(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BRAArbName," ")}}function da(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.BUIName," ")}}function ma(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.UNTUnitNumber," ")}}function pa(o,e){1&o&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HTML.ElectricityCounterNumber")," "))}function ha(o,e){1&o&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HTML.WaterCounterNumber")," "))}function ga(o,e){1&o&&(t.TgZ(0,"h4"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HTML.GasCounterNumber")," "))}function _a(o,e){if(1&o&&(t.TgZ(0,"ng-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName,"")}}function fa(o,e){if(1&o&&(t.TgZ(0,"ng-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName,"")}}function Ca(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Ta(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function ba(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function va(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Za(o,e){if(1&o&&(t.TgZ(0,"div")(1,"a",120)(2,"mat-icon"),t._uU(3,"download"),t.qZA()()()),2&o){const i=t.oxw();t.xp6(1),t.s9C("href",i.natIDfileToUpload,t.LSH)}}function Aa(o,e){if(1&o&&(t.ynx(0),t._UZ(1,"img",123),t.BQk()),2&o){const i=t.oxw(2);t.xp6(1),t.Q6J("src",i.fileUrl,t.LSH)}}function ya(o,e){if(1&o&&t._UZ(0,"iframe",124),2&o){const i=t.oxw(2);t.Q6J("src",i.sanitizedUrl,t.uOi)}}function xa(o,e){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Aa,2,1,"ng-container",121),t.YNc(2,ya,1,1,"ng-template",null,122,t.W1O),t.qZA()),2&o){const i=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isImage)("ngIfElse",i)}}function Ua(o,e){if(1&o&&(t.TgZ(0,"ng-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName,"")}}function wa(o,e){if(1&o&&(t.TgZ(0,"div")(1,"a",125)(2,"mat-icon"),t._uU(3,"download"),t.qZA()()()),2&o){const i=t.oxw();t.xp6(1),t.s9C("href",i.registerFileToUpload,t.LSH)}}function Oa(o,e){if(1&o&&(t.ynx(0),t._UZ(1,"img",123),t.BQk()),2&o){const i=t.oxw(2);t.xp6(1),t.Q6J("src",i.registerFileUrl,t.LSH)}}function Na(o,e){if(1&o&&t._UZ(0,"iframe",124),2&o){const i=t.oxw(2);t.Q6J("src",i.sanitizedFileUrl,t.uOi)}}function Sa(o,e){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Oa,2,1,"ng-container",121),t.YNc(2,Na,1,1,"ng-template",null,126,t.W1O),t.qZA()),2&o){const i=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isRegisterImage)("ngIfElse",i)}}function Ia(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Da(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Fa(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function La(o,e){if(1&o&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&o){const i=e.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.CTTSubjectName," ")}}function Ma(o,e){1&o&&(t.TgZ(0,"mat-tab",127),t.ALo(1,"translate"),t.TgZ(2,"div",6),t._UZ(3,"mat-label"),t.TgZ(4,"div",5)(5,"mat-checkbox",128),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"mat-checkbox",129),t._uU(9),t.ALo(10,"translate"),t.qZA()()()()),2&o&&(t.s9C("label",t.lcZ(1,3,"HTML.TAB_SETTINGS")),t.xp6(6),t.Oqu(t.lcZ(7,5,"HTML.ACTIVE")),t.xp6(3),t.Oqu(t.lcZ(10,7,"HTML.BLOCKED")))}function qa(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.SAVE")))}function Ea(o,e){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.EDIT")))}function Ra(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",130),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.saveUpdate(r.CUS.id))}),t.YNc(1,qa,3,3,"span",1),t.YNc(2,Ea,3,3,"span",1),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),t.xp6(1),t.Q6J("ngIf",!i.CUS.id),t.xp6(1),t.Q6J("ngIf",i.CUS.id)}}function Pa(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",131),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.customerRelated(r.CUS.id))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.Accompany"))}}function ka(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",131),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.customerWorkRelated(r.CUS.id))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.WorkRelated"))}}function Ba(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",131),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.customerWorkRelatedAgency(r.CUS.id))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.Agency"))}}function Wa(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",131),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.changePassword(r.CUS))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(2),t.Oqu(t.lcZ(3,2,"BTN.PasswordChange"))}}function Ha(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"button",131),t.NdJ("click",function(){t.CHM(i);const r=t.oxw();return t.KtG(r.confirmData(r.CUS.id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&o){const i=t.oxw();t.Q6J("disabled",!i.form.valid||!i.CUS.id),t.xp6(1),t.Oqu(t.lcZ(2,2,"BTN.SUBMIT"))}}Yt.\u0275fac=function(e){return new(e||Yt)(t.Y36(ut.y),t.Y36(rt.d),t.Y36(Z.uw),t.Y36(L.v),t.Y36(k.F0),t.Y36(j.U),t.Y36(p.C),t.Y36(dt.g),t.Y36(I.ux),t.Y36(w.sK),t.Y36(qt.K))},Yt.\u0275cmp=t.Xpm({type:Yt,selectors:[["app-customers-list-companies"]],features:[t._Bn([L.v])],decls:44,vars:37,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"text-muted"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(e,i){1&e&&(t.YNc(0,Bo,22,7,"div",0),t._UZ(1,"mat-divider"),t.TgZ(2,"mat-card")(3,"div",1)(4,"h2"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",2)(9,"div",3)(10,"div",4)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",4)(15,"h2"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",4)(19,"h2"),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",4)(23,"h2"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",4)(27,"h2"),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",4)(31,"h2"),t._uU(32),t.ALo(33,"translate"),t.qZA()(),t.TgZ(34,"div",4)(35,"h2"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t._UZ(38,"div",4),t.qZA(),t.YNc(39,Qo,22,11,"div",5),t.ALo(40,"paginate"),t.ALo(41,"TenantSearchPipe"),t.qZA()(),t.YNc(42,jo,4,0,"div",6),t.YNc(43,$o,2,0,"div",7)),2&e&&(t.Q6J("ngIf",i.account.periorty>0),t.xp6(5),t.hij("",t.lcZ(6,12,"HTML.TENANTS_LIST")," "),t.xp6(7),t.hij(" ",t.lcZ(13,14,"FIELD.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(17,16,"HTML.MOBILE")," "),t.xp6(4),t.hij(" ",t.lcZ(21,18,"HTML.BUILDING")," "),t.xp6(4),t.hij(" ",t.lcZ(25,20,"HTML.UNIT")," "),t.xp6(4),t.hij(" ",t.lcZ(29,22,"HTML.Job")," "),t.xp6(4),t.hij(" ",t.lcZ(33,24,"HTML.WorkPlace")," "),t.xp6(4),t.hij(" ",t.lcZ(37,26,"HTML.ACTIVATED")," "),t.xp6(3),t.Q6J("ngForOf",t.xi3(40,28,t.xi3(41,31,i.users,i.searchText),t.WLB(34,zo,i.count,i.page))),t.xp6(3),t.Q6J("ngIf",i.users),t.xp6(1),t.Q6J("ngIf",!i.users))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,X.LS,_.sg,_.O5,k.rH,T.xw,T.Wh,T.yH,b.Tq,b.nh,mt.A9,mt.Yi,G.a8,Q.Hw,A.Nt,v.KE,tt.d,wt.Ou,pt.gM,X._s,Ot.DA,w.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});class Lt{constructor(e,i,n,r,l,C,y,U,M,F,J,et,ot,bt,ct,Vt,fe){this.transferService=e,this.appSettings=i,this.activatedRoute=n,this.codesService=r,this.unitsService=l,this.fb=C,this.localStore=y,this._CustomerService=U,this.router=M,this.dialog=F,this.global=J,this.atlasService=et,this.settingService=ot,this.translateService=bt,this.contractService=ct,this.sanitizer=Vt,this.snackBar=fe,this.curCOMId=N.N.comid,this.account=new at.n,this.country_const=(new x.I).Countries,this.governorate_const=(new x.I).Governorates,this.city_const=(new x.I).City,this.region_const=(new x.I).Regions,this.notificationType_const=(new x.I).NotificationTypes,this.job_const=(new x.I).Jobs,this.workplace_const=(new x.I).WorkPlaces,this.workField_const=(new x.I).WorkType,this.passwordHide=!0,this.tenant=new _t,this.editCode=!0,this.selectedOption="C",this.userPerm=[],this.brandfileToUpload=null,this.natIDfileToUpload=null,this.registerFileToUpload=null,this.DocImageToUpload=null,this.defaultDocImage=(new S.P).noImage,this.defaultCusImage=(new S.P).noImage,this.CusImageToUpload=null,this.defaultIDImage=(new S.P).noImage,this.IDImageToUpload=null,this.fileType=null,this.idFileType=null,this.registerFileType=null,this.fileUrl=null,this.registerFileUrl=null,this.isImage=!1,this.isRegisterImage=!1,this.AllBranches=[],this.notificationsObject=new Te.j,this.allowedChar="1234567890",this.lengthOfCode=6,this.Jobs=[],this.WorkPlaces=[],this.WorkFields=[],this.Countries=[],this.Governorates=[],this.Governorates_EstOwner=[],this.Cities_EstOwner=[],this.Cities=[],this.Areas_EstOwner=[],this.Areas=[],this.AllBuildings=[],this.AllUnits=[],this.settings=this.appSettings.settings}onBusinessOptionChange(e){this.selectedOption=e.value,console.log("------this.selectedOption:: "+this.selectedOption)}handleFileInputBrand(e){e&&e.length&&(this.brandfileToUpload=e.item(0)),document.getElementById("customButtonBrand").textContent=e.length>0?e[0].name:this.chooseFilePDFBrand}handleFileInputNatID(e){e&&e.length&&(this.natIDfileToUpload=e.item(0)),document.getElementById("customButtonNatId").textContent=e.length>0?e[0].name:this.chooseFilePDFNatID}callFileInputBrand(){document.getElementById("brandFileInput").click()}callFileInputNatId(){document.getElementById("natIDFileInput").click()}callFileInput(){document.getElementById("fileInput").click()}callOnRegisterFileSelect(){document.getElementById("registerFileInput").click()}callOnHowiaFileSelect(){document.getElementById("howiaFileInput").click()}callIDFileInput(){document.getElementById("idFileInput").click()}ngOnInit(){if(this.isImage=!1,this.isRegisterImage=!1,this.transferService.getMessage.subscribe(e=>{this.editCode="YES"==e.editTenantCode.toUpperCase(),console.log("---2222 this.editCode:: "+this.editCode)}),this.userSUb=this.global.user.subscribe(e=>{this.account=e}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let e=0;e<this.curUserPermissions.length;e++)this.userPerm[e]=this.curUserPermissions[e].codename;this.prepareMsgLanguage(),this.getMaxCodeForCustomers(this.curCOMId,this.account.periorty),this.getCountries(this.curCOMId,this.account.periorty),this.getJobs(this.curCOMId,this.account.periorty),this.getWorkPlaces(this.curCOMId,this.account.periorty),this.getWorkFields(this.curCOMId,this.account.periorty),this.getNotificationRows(this.curCOMId,this.account.periorty,1),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=+e.id,this.getTenantById(this.id)):this.CUS=new _t;var i=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==i.is_employee,this.isAdmin=i.is_superuser,this.isOwner="T"==i.is_owner,console.log("---1111 this.editCode:: "+this.editCode),this.form=this.fb.group({id:null,code:{value:null,disabled:!this.editCode},username:{value:null,disabled:this.id},password:null,firstname:[null,d.kI.required],lastname:[null,d.kI.required],image:null,CUSBrandPdf:null,CUSIdPdf:null,mobile:null,selftype:"C",CUSEInvoiceType:"G",profile:this.fb.group({birthday:[null,d.kI.required],gender:"M",current_branch:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curbuilding:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curunit:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee}}),work:this.fb.group({company:[null,d.kI.required],position:null,nationalIDType:"N",nationalID:[null,d.kI.required],nationalIDStartDate:null,nationalIDEndDate:null,nationalIDPic:null,WorkPlace_CTTKeyField:null,Job_CTTKeyField:null,CUSAddress_EstOwner:null,CUSShortAddress_EstOwner:null,CUSStreetName_EstOwner:null,CUSBuildingNumber_EstOwner:null,CUSBuildingSubNumber_EstOwner:null,CUSZibCode_EstOwner:null,Country_CTTKeyField_EstOwner:null,Governorate_CTTKeyField_EstOwner:null,City_CTTKeyField_EstOwner:null,Area_CTTKeyField_EstOwner:null}),business:this.fb.group({CUSEstablishmentName:null,CUSUnifiedNumber:null,CUSCoRegisterOwnerName:null,CUSCoRegisterManagerName:null,CUSCoRegisterPdf:null,CUSBrandName:null,workField_CTTKeyField:null,CUSEstablishAddressPdf:null,CUSEstablishAddressPic:null,CUSNots:null,CUSTaxNumber:null,CUSCommercialRegister:null,CUSFamousName:null}),contacts:this.fb.group({email:["",d.kI.compose([d.kI.required,R.Le])],homephone:null,workphone:null,address:null,CUSStreetName:null,CUSBuildingNumber:null,CUSZibCode:null,CUSShortAddress:null,CUSBuildingSubNumber:null,country:null,governorate:null,city:null,area:null}),social:this.fb.group({facebook:null,twitter:null,google:null}),settings:this.fb.group({isActive:null,isDeleted:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0)})}else this.router.navigate(["/sign-in"])}can(e){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(e))}onFileChange(e){this.DocImageToUpload=e.item(0);var i=new FileReader;i.onload=n=>{this.defaultDocImage=n.target.result},i.readAsDataURL(this.DocImageToUpload)}onFileRemove(e){console.log("====On Remove:: "+e)}getFileType(e){const i=e.type;return"application/pdf"===i?"PDF":i.startsWith("image/")?"IMAGE":"NOT"}onEnter(e){e.preventDefault()}handelCUSImgInput(e){if(e&&e.length){switch(this.getFileType(e.item(0))){case"IMAGE":this.fileType=this.imageFileSelected;break;case"PDF":this.fileType=this.pdfFileSelected;break;case"NOT":this.fileType=this.otherFileSelected}if(this.fileType==this.imageFileSelected){console.log("--------Here when image-------------"),this.CusImageToUpload=e.item(0);var i=new FileReader;i.onload=C=>{this.defaultCusImage=C.target.result},i.readAsDataURL(this.CusImageToUpload),document.getElementById("customButton").textContent=e.length>0?e[0].name:this.chooseFile}}}onRegisterFileSelected(e,i){if(e&&e.length){switch(this.getFileType(e.item(0))){case"IMAGE":this.isRegisterImage=!0,this.registerFileType=this.imageFileSelected;break;case"PDF":this.isRegisterImage=!1,this.registerFileType=this.pdfFileSelected;break;case"NOT":this.isRegisterImage=!1,this.registerFileType=this.otherFileSelected}const l=new FileReader;l.onload=U=>{this.registerFileUrl=l.result,this.sanitizedFileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(U.target.result)},l.readAsDataURL(e.item(0)),this.registerFileToUpload=e.item(0),document.getElementById("registerCustomButton").textContent=e.length>0?e[0].name:this.chooseRegisterFilePDF}}onFileSelected(e,i){if(e&&e.length){switch(this.getFileType(e.item(0))){case"IMAGE":this.isImage=!0,this.idFileType=this.imageFileSelected;break;case"PDF":this.isImage=!1,this.idFileType=this.pdfFileSelected;break;case"NOT":this.isImage=!1,this.idFileType=this.otherFileSelected}const l=new FileReader;l.onload=C=>{this.fileUrl=l.result,this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(C.target.result)},l.readAsDataURL(e.item(0)),this.natIDfileToUpload=e.item(0)}}handelIDImgInput(e){this.IDImageToUpload=e.item(0);var i=new FileReader;i.onload=l=>{this.defaultIDImage=l.target.result,console.log("=====after====="+this.defaultIDImage)},i.readAsDataURL(this.IDImageToUpload),document.getElementById("idCustomButton").textContent=e.length>0?e[0].name:this.chooseFile}mapFormvalue_to_CustomerClass(e){this.form.enable(),this.cur_branch=this.form.value.profile.current_branch,this.cur_building=this.form.value.profile.curbuilding,this.cur_unit=this.form.value.profile.curunit,this.form.disable();const i=new _.uU("en-GB").transform(this.form.value.profile.birthday,"dd/MM/yyyy"),n=new _.uU("en-GB").transform(this.form.value.work.nationalIDStartDate,"dd/MM/yyyy"),r=new _.uU("en-GB").transform(this.form.value.work.nationalIDEndDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,null!=this.form.value.profile.birthday&&(this.CUS.CUSBirthDate=i),null!=this.form.value.work.nationalIDStartDate&&(this.CUS.CUSNationalIDStartDate=n),null!=this.form.value.work.nationalIDEndDate&&(this.CUS.CUSNationalIDEndDate=r),this.CUS.CUSCode=+this.form.value.code,this.CUS.CUSFirstName=this.form.value.firstname,this.CUS.CUSLastName=this.form.value.lastname,this.CUS.CUSusername=this.form.value.username,this.CUS.CUSpassword=this.form.value.password,"POST"==e&&(this.CUS.is_create_CustomUser_table="T"),this.CUS.CUSGender=this.form.value.profile.gender,this.CUS.current_branch=this.cur_branch,this.CUS.current_building=this.cur_building,this.CUS.current_unit=this.cur_unit,this.CUS.CUSSelfType=this.form.value.selftype,this.CUS.CUSEInvoiceType=this.form.value.CUSEInvoiceType,this.CUS.CUSPic=this.form.value.image,this.CUS.CUSIDPic=this.form.value.work.nationalIDPic,this.CUS.CUSGuarantor=this.form.value.work.company,this.CUS.CUSJobName=this.form.value.work.position??"",this.CUS.CUSNationalIDType=this.form.value.work.nationalIDType,this.CUS.CUSNationalID=this.form.value.work.nationalID,this.CUS.WorkPlace_CTTKeyField=this.form.value.work.WorkPlace_CTTKeyField,this.CUS.Job_CTTKeyField=this.form.value.work.Job_CTTKeyField,this.CUS.CUSAddress_EstOwner=this.form.value.work.CUSAddress_EstOwner??"",this.CUS.CUSShortAddress_EstOwner=this.form.value.work.CUSShortAddress_EstOwner??"",this.CUS.CUSStreetName_EstOwner=this.form.value.work.CUSStreetName_EstOwner??"",this.CUS.CUSBuildingNumber_EstOwner=this.form.value.work.CUSBuildingNumber_EstOwner??"",this.CUS.CUSBuildingSubNumber_EstOwner=this.form.value.work.CUSBuildingSubNumber_EstOwner??"",this.CUS.CUSZibCode_EstOwner=this.form.value.work.CUSZibCode_EstOwner??"",this.CUS.Country_CTTKeyField_EstOwner=this.form.value.work.Country_CTTKeyField_EstOwner,this.CUS.Governorate_CTTKeyField_EstOwner=this.form.value.work.Governorate_CTTKeyField_EstOwner,this.CUS.City_CTTKeyField_EstOwner=this.form.value.work.City_CTTKeyField_EstOwner,this.CUS.Area_CTTKeyField_EstOwner=this.form.value.work.Area_CTTKeyField_EstOwner,this.CUS.CUSEstablishmentName=this.form.value.business.CUSEstablishmentName,this.CUS.CUSUnifiedNumber=this.form.value.business.CUSUnifiedNumber,this.CUS.CUSCoRegisterOwnerName=this.form.value.business.CUSCoRegisterOwnerName,this.CUS.CUSCoRegisterManagerName=this.form.value.business.CUSCoRegisterManagerName,this.CUS.CUSCoRegisterPdf=this.form.value.business.CUSCoRegisterPdf,this.CUS.CUSBrandName=this.form.value.business.CUSBrandName,this.CUS.workField_CTTKeyField=this.form.value.business.workField_CTTKeyField,this.CUS.CUSNots=this.form.value.business.CUSNots,this.CUS.CUSTaxNumber=this.form.value.business.CUSTaxNumber??"",this.CUS.CUSCommercialRegister=this.form.value.business.CUSCommercialRegister??"",this.CUS.CUSFamousName=this.form.value.business.CUSFamousName??"",this.CUS.CUSMobile=this.form.value.mobile,this.CUS.CUSEmail=this.form.value.contacts.email,this.CUS.CUSHomePhone=this.form.value.contacts.homephone,this.CUS.CUSWorkPhone=this.form.value.contacts.workphone,this.CUS.CUSAddress=this.form.value.contacts.address??"",this.CUS.CUSStreetName=this.form.value.contacts.CUSStreetName??"",this.CUS.CUSBuildingNumber=this.form.value.contacts.CUSBuildingNumber??"",this.CUS.CUSZibCode=this.form.value.contacts.CUSZibCode??"",this.CUS.CUSShortAddress=this.form.value.contacts.CUSShortAddress??"",this.CUS.CUSBuildingSubNumber=this.form.value.contacts.CUSBuildingSubNumber??"",this.CUS.Country_CTTKeyField=this.form.value.contacts.country,this.CUS.Governorate_CTTKeyField=this.form.value.contacts.governorate,this.CUS.City_CTTKeyField=this.form.value.contacts.city,this.CUS.Area_CTTKeyField=this.form.value.contacts.area,this.CUS.CUSFacebook=this.form.value.social.facebook??"",this.CUS.CUSTwitter=this.form.value.social.twitter??"",this.CUS.CUSGoogle=this.form.value.social.google??"",this.CUS.CUSActive=this.tenActive,this.CUS.RowDelete=this.tenDeleted}getTenantById(e){const i=[];this._CustomerService.getOneCustomer(e).subscribe(n=>{this._CustomerService.getOneCustomerDocs(this.curCOMId,this.account.periorty,e).subscribe(r=>{for(var l of r)i.push({link:l.CUDPic,preview:l.CUDPic})}),this.fillForm(n,i),this.CUS=n,n.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,n.Country_CTTKeyField),n.Country_CTTKeyField_EstOwner&&this.getGovernoratePerCountry_EstOwner(this.curCOMId,this.account.periorty,n.Country_CTTKeyField_EstOwner),n.Governorate_CTTKeyField&&this.getCityPerGoverno(this.curCOMId,this.account.periorty,n.Governorate_CTTKeyField),n.Governorate_CTTKeyField_EstOwner&&this.getCityPerGoverno_EstOwner(this.curCOMId,this.account.periorty,n.Governorate_CTTKeyField_EstOwner),n.City_CTTKeyField&&this.getAreaPerCity(this.curCOMId,this.account.periorty,n.City_CTTKeyField),n.City_CTTKeyField_EstOwner&&this.getAreaPerCity_EstOwner(this.curCOMId,this.account.periorty,n.City_CTTKeyField_EstOwner)})}getFileTypeFromPath(e){console.log("--------start of getFileTypeFromPath----------"),console.log("-----filePath1111:: "+e);const i=e.split(".").pop()?.toLowerCase();switch(console.log("-----filePath2222:: "+e),console.log("--------extension:: "+i),i.substring(0,3)){case"jpg":case"jpe":case"png":case"gif":return"Image";case"pdf":return"PDF";case"doc":return"Word Document";case"xls":return"Excel Document";default:return"Unknown File Type"}}fillForm(e,i){var n,r;console.log("----inside Fill Form---111111--"),this.is_active="T"==e.CUSActive,e.current_building&&this.getAllUnits(this.curCOMId,this.account.periorty,e.current_building),this.defaultCusImage=null!=e.CUSPic?e.CUSPic:(new S.P).noImage,this.defaultIDImage=null!=e.CUSIDPic?e.CUSIDPic:(new S.P).noImage,this.is_delete=1==e.RowDelete,console.log("----inside Fill Form---222222--"),this.brandfileToUpload=e.CUSBrandPdf,this.natIDfileToUpload=e.CUSIdPdf,this.registerFileToUpload=e.CUSCoRegisterPdf,this.natIDfileToUpload&&("Image"==(n=this.getFileTypeFromPath(this.natIDfileToUpload.toString()))?(console.log("Selected file is an image."),this.isImage=!0,this.fileUrl=this.natIDfileToUpload.toString(),console.log("-----this.fileUrl:: "+this.fileUrl)):"PDF"==n?(console.log("Selected file is a PDF."),this.isImage=!1,this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.natIDfileToUpload.name),console.log("------this.sanitizedUrl.:: "+this.sanitizedUrl)):console.log("Selected file is of another type:",n)),this.registerFileToUpload&&("Image"==(r=this.getFileTypeFromPath(this.registerFileToUpload.toString()))?(console.log("Selected file is an image."),this.isRegisterImage=!0,this.registerFileUrl=this.registerFileToUpload.toString(),console.log("-----this.registerFileUrl:: "+this.registerFileUrl)):"PDF"==r?(console.log("Selected file is a PDF."),this.isRegisterImage=!1,this.sanitizedFileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.registerFileToUpload.name),console.log("------this.sanitizedFileUrl.:: "+this.sanitizedFileUrl)):console.log("Selected file is of another type:",r)),console.log("----inside Fill Form---333333--"),this.form.patchValue({id:e.id,code:e.CUSCode,username:e.CUSusername,password:e.CUSpassword,firstname:e.CUSFirstName,lastname:e.CUSLastName,image:e.CUSPic,CUSBrandPdf:e.CUSBrandPdf,CUSIdPdf:e.CUSIdPdf,selftype:e.CUSSelfType,CUSEInvoiceType:e.CUSEInvoiceType,mobile:e.CUSMobile,profile:{birthday:e.CUSBirthDate,gender:e.CUSGender,current_branch:e.current_branch,curbuilding:e.current_building,curunit:e.current_unit},work:{company:e.CUSGuarantor,position:e.CUSJobName,nationalIDType:e.CUSNationalIDType,nationalID:e.CUSNationalID,nationalIDStartDate:e.CUSNationalIDStartDate,nationalIDEndDate:e.CUSNationalIDEndDate,nationalIDPic:e.CUSIDPic,WorkPlace_CTTKeyField:e.WorkPlace_CTTKeyField,Job_CTTKeyField:e.Job_CTTKeyField,CUSAddress_EstOwner:e.CUSAddress_EstOwner,CUSShortAddress_EstOwner:e.CUSShortAddress_EstOwner,CUSStreetName_EstOwner:e.CUSStreetName_EstOwner,CUSBuildingNumber_EstOwner:e.CUSBuildingNumber_EstOwner,CUSBuildingSubNumber_EstOwner:e.CUSBuildingSubNumber_EstOwner,CUSZibCode_EstOwner:e.CUSZibCode_EstOwner,Country_CTTKeyField_EstOwner:e.Country_CTTKeyField_EstOwner,Governorate_CTTKeyField_EstOwner:e.Governorate_CTTKeyField_EstOwner,City_CTTKeyField_EstOwner:e.City_CTTKeyField_EstOwner,Area_CTTKeyField_EstOwner:e.Area_CTTKeyField_EstOwner},business:{CUSEstablishmentName:e.CUSEstablishmentName,CUSUnifiedNumber:e.CUSUnifiedNumber,CUSCoRegisterOwnerName:e.CUSCoRegisterOwnerName,CUSCoRegisterManagerName:e.CUSCoRegisterManagerName,CUSBrandName:e.CUSBrandName,workField_CTTKeyField:e.workField_CTTKeyField,CUSEstablishAddressPdf:e.CUSEstablishAddressPdf,CUSEstablishAddressPic:e.CUSEstablishAddressPic,CUSNots:e.CUSNots,CUSTaxNumber:e.CUSTaxNumber,CUSCommercialRegister:e.CUSCommercialRegister,CUSFamousName:e.CUSFamousName},contacts:{email:e.CUSEmail,homephone:e.CUSHomePhone,workphone:e.CUSWorkPhone,address:e.CUSAddress,country:e.Country_CTTKeyField,governorate:e.Governorate_CTTKeyField,city:e.City_CTTKeyField,area:e.Area_CTTKeyField,CUSStreetName:e.CUSStreetName,CUSBuildingNumber:e.CUSBuildingNumber,CUSZibCode:e.CUSZibCode,CUSShortAddress:e.CUSShortAddress,CUSBuildingSubNumber:e.CUSBuildingSubNumber},social:{facebook:e.CUSFacebook,twitter:e.CUSTwitter,google:e.CUSGoogle},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}}),console.log("----inside Fill Form---4444444--"),e.current_unit&&this.getUnitFullData(e.current_unit),console.log("----inside Fill Form---55555555--")}getAllBranches(e,i){this.atlasService.getAllBranch(e,i).subscribe(n=>{this.AllBranches=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(e,i,n,r){console.log("----is Emp"),this.atlasService.getBranchPerEmp(e,i,n).subscribe(l=>{this.AllBranches=l,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+r),this.atlasService.getOneBranch(r).subscribe(C=>{this.AllBranches=C},C=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},l=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getNotificationRows(e,i,n){this.codesService.getSubForParentAndArrange(e,i,this.notificationType_const,n).subscribe(r=>{1==n&&(this.cttNotificationType_TenantData=r[0].id),2==n&&(this.cttNotificationType_EndContract=r[0].id)},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0646\u0648\u0639 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapvaluesToNotificationClass(){this.notificationsObject.notificationType_CTTKeyField=this.cttNotificationType_TenantData,this.notificationsObject.UNOActive="T",this.notificationsObject.UNONotificationFromTenant="T",this.notificationsObject.branch_KeyField=this.cur_branch,this.notificationsObject.UNOTitle="\u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0623\u062c\u0631",this.notificationsObject.build_KeyField=this.cur_building,this.notificationsObject.unit_KeyField=this.cur_unit,this.notificationsObject.customer_KeyField=this.form.value.id,this.notificationsObject.UNOText="\u0628\u0631\u062c\u0627\u0621 \u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631 "+this.form.value.firstname+" "+this.form.value.lastname}readCusCode(e){let n=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({contacts:{email:"E"+n+"@jeddahlake.com"},username:n,password:n})}pad(e,i){let n=e+"";for(;n.length<i;)n="0"+n;return n}createRandomString(e,i){let n="";for(let r=0;r<e;r++)n+=i.charAt(Math.floor(Math.random()*i.length));return n}generateUserName(e,i){return this.pad(e,4)+i}confirmData(e){this._CustomerService.editCustomerConfirm({CUSConfirmed:"T",id:e}).subscribe(n=>{this.snackBar.open("\u062a\u0645 \u0625\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/businesstenant-list"])},n=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}customerRelated(e){console.log("========Sayed2982024=====customerRelated()==============="),this.dialog.open(It,{data:{custId:e,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}customerWorkRelated(e){console.log("========Sayed2982024=====customerWorkRelated()==============="),this.dialog.open(yt,{data:{custId:e,periorty:this.account.periorty,personType:"P"},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}customerWorkRelatedAgency(e){console.log("========Sayed2982024=====customerWorkRelated()==============="),this.dialog.open(yt,{data:{custId:e,periorty:this.account.periorty,personType:"W"},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}changePassword(e){this.dialog.open(he.p,{data:{dataRow:e,curUserData:this.curUserData,userPerm:this.userPerm,pk:e.Userid},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(n=>{})}saveUpdate(e){console.log("=============saveUpdate()==============="),e?(this.mapFormvalue_to_CustomerClass("PATCH"),console.log("=============Update data()==============="),this._CustomerService.editCustomerBusinessWithPDF(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.curUserData.is_employee,this.brandfileToUpload,this.natIDfileToUpload,this.registerFileToUpload).subscribe(i=>{console.log("res=> "+i),"F"==this.curUserData.is_employee&&(this.mapvaluesToNotificationClass(),this.unitsService.addNotificationForUnits(this.notificationsObject).subscribe(n=>{},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})),null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(this.CUS.id,this.DocImageToUpload).subscribe(n=>{console.log("====yes from update====",n)}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/businesstenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(this.mapFormvalue_to_CustomerClass("POST"),console.log(this.CUS),this._CustomerService.addCustomerBusinessWithPDF(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.brandfileToUpload,this.natIDfileToUpload,this.registerFileToUpload).subscribe(i=>{null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(i.id,this.DocImageToUpload).subscribe(n=>{console.log("====yes from insert====",n)}),this.contractService.addCustomUserFromTenant(i,this.CusImageToUpload).subscribe(n=>{this.contractService.updateCustomerWithUserID(i.id,n.id).subscribe(r=>{},r=>{console.log("ERROR::--\x3e ",r)})}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/businesstenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))}close(){}compareFunction(e,i){return e.username==i.username&&e.code==i.code}getJobs(e,i){this.codesService.getSubForParent(e,i,this.job_const).subscribe(n=>{this.Jobs=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u0638\u0627\u0626\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getWorkPlaces(e,i){this.codesService.getSubForParent(e,i,this.workplace_const).subscribe(n=>{this.WorkPlaces=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0645\u0627\u0643\u0646 \u0627\u0644\u0639\u0645\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getWorkFields(e,i){this.codesService.getSubForParent(e,i,this.workField_const).subscribe(n=>{this.WorkFields=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0645\u0627\u0643\u0646 \u0627\u0644\u0639\u0645\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxCodeForCustomers(e,i){this.contractService.getMaxCustomerCode(e,i).subscribe(n=>{if(this.maxCustomerCode=n.max,!this.id){let r=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({code:this.maxCustomerCode,username:r,password:r,contacts:{email:"E"+r+"@jeddahlake.com"}})}})}getCountries(e,i){this.codesService.getSubForParent(e,i,this.country_const).subscribe(n=>{this.Countries=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(e){this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,e.value)}getGovernoratePerCountry(e,i,n){this.Governorates=[],this.Cities=[],this.Areas=[],this.codesService.getSubForParentAndRelated(e,i,this.governorate_const,n).subscribe(r=>{this.Governorates=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate_EstOwner(e){this.getGovernoratePerCountry_EstOwner(this.curCOMId,this.account.periorty,e.value)}getGovernoratePerCountry_EstOwner(e,i,n){this.Governorates_EstOwner=[],this.Cities_EstOwner=[],this.Areas_EstOwner=[],this.codesService.getSubForParentAndRelated(e,i,this.governorate_const,n).subscribe(r=>{this.Governorates_EstOwner=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity_EstOwner(e){this.getCityPerGoverno_EstOwner(this.curCOMId,this.account.periorty,e.value)}getCityPerGoverno_EstOwner(e,i,n){this.Cities_EstOwner=[],this.Areas_EstOwner=[],this.codesService.getSubForParentAndRelated(e,i,this.city_const,n).subscribe(r=>{this.Cities_EstOwner=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(e){this.getCityPerGoverno(this.curCOMId,this.account.periorty,e.value)}getCityPerGoverno(e,i,n){this.Cities=[],this.Areas=[],this.codesService.getSubForParentAndRelated(e,i,this.city_const,n).subscribe(r=>{this.Cities=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria_EstOwner(e){this.getAreaPerCity_EstOwner(this.curCOMId,this.account.periorty,e.value)}getAreaPerCity_EstOwner(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.region_const,n).subscribe(r=>{this.Areas_EstOwner=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(e){this.getAreaPerCity(this.curCOMId,this.account.periorty,e.value)}getAreaPerCity(e,i,n){this.codesService.getSubForParentAndRelated(e,i,this.region_const,n).subscribe(r=>{this.Areas=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllBuildings(e,i){this.unitsService.getAllBuilding(e,i).subscribe(n=>{this.AllBuildings=n},n=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(e){this.getBuildingPerBranch(this.curCOMId,this.account.periorty,e.value)}getBuildingPerBranch(e,i,n){this.AllBuildings=[],this.AllUnits=[],this.unitsService.getBuildingsPerBranch(e,i,n).subscribe(r=>{this.AllBuildings=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuild(e){this.getAllUnits(this.curCOMId,this.account.periorty,e.value)}getAllUnits(e,i,n){this.unitsService.getAllUnitsPerBuilding(e,i,n,"E").subscribe(r=>{this.AllUnits=r},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitData(e){this.getUnitFullData(e.value)}getUnitFullData(e){this.unitsService.getOneUnit(e).subscribe(i=>{this.electricUnit="null"==i.UNTElectricityNumber?"":i.UNTElectricityNumber,this.waterUnit="null"==i.UNTWaterNumber?"":i.UNTWaterNumber,this.gasUnit="null"==i.UNTGasNumber?"":i.UNTGasNumber},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(e=>{this.errorRetrieveMsg=e}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(e=>{this.askToDeletedMsg=e}),this.translateService.get("MESSAGE.DELETED").subscribe(e=>{this.deletedMsg=e}),this.translateService.get("HTML.ChooseImageFile").subscribe(e=>{this.chooseFile=e}),this.translateService.get("HTML.ChoosePDFFile").subscribe(e=>{this.chooseFilePDF=e}),this.translateService.get("HTML.ChoosePDFFile_Brand").subscribe(e=>{this.chooseFilePDFBrand=e}),this.translateService.get("HTML.ChoosePDFFile_NatId").subscribe(e=>{this.chooseFilePDFNatID=e}),this.translateService.get("HTML.ChooseRegisterImageFile").subscribe(e=>{this.chooseRegisterFilePDF=e}),this.translateService.get("MESSAGE.ImageSelected").subscribe(e=>{this.imageFileSelected=e}),this.translateService.get("MESSAGE.PDFSelected").subscribe(e=>{this.pdfFileSelected=e}),this.translateService.get("MESSAGE.OtherFileSelected").subscribe(e=>{this.otherFileSelected=e})}}Lt.\u0275fac=function(e){return new(e||Lt)(t.Y36(ut.y),t.Y36(rt.d),t.Y36(k.gz),t.Y36(Rt.d),t.Y36(V.X),t.Y36(d.QS),t.Y36(p.C),t.Y36(L.v),t.Y36(k.F0),t.Y36(Z.uw),t.Y36(j.U),t.Y36(D.Z),t.Y36(dt.g),t.Y36(w.sK),t.Y36(g.W),t.Y36(Pt.H7),t.Y36(I.ux))},Lt.\u0275cmp=t.Xpm({type:Lt,selectors:[["app-customers-details-companies"]],features:[t._Bn([g.W])],decls:466,vars:296,consts:[["mat-dialog-title",""],[4,"ngIf"],[1,"user-form",3,"formGroup","keydown.enter"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["appearance","outline",1,"w-20"],["matInput","","formControlName","code","required",""],["appearance","outline",1,"w-30"],["matInput","","formControlName","username","required",""],["class","w-45",4,"ngIf"],["appearance","outline",1,"w-50"],["matInput","","formControlName","firstname","required",""],["appearance","outline",1,"w-45"],["matInput","","formControlName","lastname","required",""],["matInput","","formControlName","mobile","required",""],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["formControlName","CUSEInvoiceType"],["value","G","labelPosition","after"],["value","P","labelPosition","after"],["value","B","labelPosition","after"],["fxLayout","row"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","image","name","image","id","fileInput","type","file","accept","image/*",1,"file-input",3,"change"],["id","customButton",1,"custom-button",3,"click"],["formGroupName","profile",3,"label"],["formControlName","gender"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],[1,"w-50"],["matInput","","formControlName","birthday","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","current_branch","id","curbranchContOpSel","required","",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","curbuilding","id","buildOpSel",3,"placeholder","selectionChange"],["formControlName","curunit","id","unitOpSel",3,"placeholder","selectionChange"],["formGroupName","work",3,"label"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline","formControlName","WorkPlace_CTTKeyField","id","workplOpSel",1,"w-100",3,"placeholder"],["appearance","outline","formControlName","Job_CTTKeyField","id","jobsOpSel",1,"w-100",3,"placeholder"],["formControlName","nationalIDType"],["value","N","labelPosition","after"],["value","K","labelPosition","after"],["value","S","labelPosition","after"],["value","O","labelPosition","after"],["fxFlex","100","fxFlex.gt-sm","60.0",1,"px-1"],["matInput","","formControlName","company","required",""],["fxFlex","100","fxFlex.gt-sm","40.0",1,"px-1"],["matInput","","formControlName","nationalID","required",""],["appearance","outline",1,"w-80"],["matInput","","formControlName","CUSAddress_EstOwner"],["appearance","outline",1,"w-19"],["matInput","","formControlName","CUSShortAddress_EstOwner"],["appearance","outline",1,"w-25"],["formControlName","Country_CTTKeyField_EstOwner","id","own_countOpSel",3,"placeholder","selectionChange"],["formControlName","Governorate_CTTKeyField_EstOwner","id","own_governoOpSel",3,"placeholder","selectionChange"],["appearance","outline",1,"w-24"],["formControlName","City_CTTKeyField_EstOwner","id","own_cityOpSel",3,"placeholder","selectionChange"],["formControlName","Area_CTTKeyField_EstOwner","id","own_areaOpSel",3,"placeholder"],["appearance","outline",1,"w-40"],["matInput","","formControlName","CUSStreetName_EstOwner"],["matInput","","formControlName","CUSBuildingNumber_EstOwner"],["matInput","","formControlName","CUSZibCode_EstOwner"],["matInput","","formControlName","CUSBuildingSubNumber_EstOwner"],["type","file","accept","image/*,.pdf","id","howiaFileInput",1,"file-input",3,"change"],["id","idCustomButton",1,"custom-button",3,"click"],["formGroupName","business",3,"label"],["fxLayout","column","fxLayoutGap","10px grid",1,"form-field-outer"],["matInput","","formControlName","CUSEstablishmentName"],["fxFlex","100","fxFlex.gt-sm","25.0",1,"px-1"],["matInput","","formControlName","CUSTaxNumber"],["matInput","","formControlName","CUSCommercialRegister"],["matInput","","formControlName","CUSCoRegisterOwnerName"],["matInput","","formControlName","CUSCoRegisterManagerName"],["fxFlex","100","fxFlex.gt-sm","20.0",1,"px-1"],["matInput","","formControlName","CUSUnifiedNumber"],["appearance","outline","formControlName","workField_CTTKeyField","id","workfieldplOpSel",1,"w-100",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","30.0",1,"px-1"],["matInput","","formControlName","CUSBrandName"],["matInput","","formControlName","CUSFamousName"],["type","file","accept","image/*,.pdf","id","registerFileInput",1,"file-input",3,"change"],["id","registerCustomButton",1,"custom-button",3,"click"],["formGroupName","contacts",3,"label"],["matInput","","formControlName","homephone"],["matInput","","formControlName","workphone"],["matInput","","formControlName","email","required","",3,"placeholder"],["matInput","","formControlName","address"],["matInput","","formControlName","CUSShortAddress"],["formControlName","country","id","countrOpSel",3,"placeholder","selectionChange"],["formControlName","governorate","id","governoOpSel",3,"placeholder","selectionChange"],["formControlName","city","id","cityOpSel",3,"placeholder","selectionChange"],["formControlName","area","id","areaOpSel",3,"placeholder"],["matInput","","formControlName","CUSStreetName"],["matInput","","formControlName","CUSBuildingNumber"],["matInput","","formControlName","CUSZibCode"],["matInput","","formControlName","CUSBuildingSubNumber"],["formGroupName","social",3,"label"],["matInput","","formControlName","facebook"],["matInput","","formControlName","twitter"],["matInput","","formControlName","google"],["formGroupName","settings",3,"label",4,"ngIf"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"w-45"],["matInput","","formControlName","password","required","",3,"type"],["matSuffix","",3,"click"],["id","iddownloadiconalone","target","_blank",3,"href"],[4,"ngIf","ngIfElse"],["pdfPreview",""],[2,"max-width","100%","height","250px",3,"src"],["frameborder","0",2,"width","100%","height","250px",3,"src"],["id","registerdownloadicon","target","_blank",3,"href"],["pdfRegisterPreview",""],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"h1",0),t.YNc(1,Xo,3,3,"span",1),t.YNc(2,ta,3,3,"span",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("keydown.enter",function(l){return i.onEnter(l)}),t.TgZ(6,"mat-tab-group",3)(7,"mat-tab",4),t.ALo(8,"translate"),t.TgZ(9,"div",5)(10,"div",6),t._UZ(11,"mat-label"),t.TgZ(12,"div",7)(13,"mat-form-field",8)(14,"mat-label")(15,"mat-icon"),t._uU(16,"person"),t.qZA(),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"input",9),t.YNc(20,ea,2,0,"mat-error",1),t.YNc(21,ia,2,0,"mat-error",1),t.qZA(),t.TgZ(22,"mat-form-field",10)(23,"mat-label")(24,"mat-icon"),t._uU(25,"person"),t.qZA(),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",11),t.qZA(),t.YNc(29,aa,11,7,"mat-form-field",12),t.qZA()(),t.TgZ(30,"div",7)(31,"mat-form-field",13)(32,"mat-label")(33,"mat-icon"),t._uU(34,"person"),t.qZA(),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",14),t.YNc(38,ra,2,0,"mat-error",1),t.qZA(),t.TgZ(39,"mat-form-field",15)(40,"mat-label")(41,"mat-icon"),t._uU(42,"person"),t.qZA(),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"input",16),t.YNc(46,sa,2,0,"mat-error",1),t.qZA()(),t.TgZ(47,"div",7)(48,"mat-form-field",13)(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"mat-hint"),t._uU(53,"966505602221"),t.qZA(),t._UZ(54,"input",17),t.YNc(55,la,2,0,"mat-error",1),t.qZA()(),t.TgZ(56,"div",7)(57,"div",18)(58,"mat-label"),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"mat-radio-group",19)(62,"mat-radio-button",20),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"mat-radio-button",21),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"mat-radio-button",22),t._uU(69),t.ALo(70,"translate"),t.qZA()()()(),t.TgZ(71,"div",23)(72,"div",24),t._UZ(73,"img",25),t.TgZ(74,"input",26),t.NdJ("change",function(l){return i.handelCUSImgInput(l.target.files)}),t.qZA(),t.YNc(75,ca,2,1,"div",1),t.TgZ(76,"button",27),t.NdJ("click",function(){return i.callFileInput()}),t._uU(77),t.ALo(78,"translate"),t.qZA()()()()(),t.TgZ(79,"mat-tab",28),t.ALo(80,"translate"),t.TgZ(81,"div",5)(82,"div",7)(83,"mat-radio-group",29)(84,"mat-radio-button",30),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.TgZ(87,"mat-radio-button",31),t._uU(88),t.ALo(89,"translate"),t.qZA()(),t.TgZ(90,"mat-form-field",32)(91,"mat-label"),t._uU(92),t.ALo(93,"translate"),t.qZA(),t._UZ(94,"input",33)(95,"mat-datepicker-toggle",34)(96,"mat-datepicker",null,35),t.qZA()(),t.TgZ(98,"div",7)(99,"div",36)(100,"mat-form-field",37)(101,"mat-label"),t._uU(102),t.ALo(103,"translate"),t.qZA(),t.TgZ(104,"mat-select",38),t.NdJ("selectionChange",function(l){return i.getBuildings(l)}),t.ALo(105,"translate"),t.TgZ(106,"mat-option",39),t._uU(107,"-"),t.qZA(),t.YNc(108,ua,2,2,"mat-option",40),t.qZA()()()(),t.TgZ(109,"div",7)(110,"mat-form-field",13)(111,"mat-label"),t._uU(112),t.ALo(113,"translate"),t.qZA(),t.TgZ(114,"mat-select",41),t.NdJ("selectionChange",function(l){return i.getUnitsPerBuild(l)}),t.ALo(115,"translate"),t.TgZ(116,"mat-option",39),t._uU(117,"-"),t.qZA(),t.YNc(118,da,2,2,"mat-option",40),t.qZA()(),t.TgZ(119,"mat-form-field",15)(120,"mat-label"),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"mat-select",42),t.NdJ("selectionChange",function(l){return i.getUnitData(l)}),t.ALo(124,"translate"),t.TgZ(125,"mat-option",39),t._uU(126,"-"),t.qZA(),t.YNc(127,ma,2,2,"mat-option",40),t.qZA()()(),t.TgZ(128,"div",7),t.YNc(129,pa,3,3,"h4",1),t.TgZ(130,"h3"),t._uU(131),t.qZA(),t.YNc(132,ha,3,3,"h4",1),t.TgZ(133,"h3"),t._uU(134),t.qZA(),t.YNc(135,ga,3,3,"h4",1),t.TgZ(136,"h3"),t._uU(137),t.qZA()()()(),t.TgZ(138,"mat-tab",43),t.ALo(139,"translate"),t.TgZ(140,"div",5)(141,"div",6),t._UZ(142,"mat-label"),t.TgZ(143,"div",7)(144,"div",44)(145,"label"),t._uU(146),t.ALo(147,"translate"),t.qZA(),t.TgZ(148,"ng-select",45),t.ALo(149,"translate"),t.YNc(150,_a,2,2,"ng-option",40),t.qZA()(),t.TgZ(151,"div",44)(152,"label"),t._uU(153),t.ALo(154,"translate"),t.qZA(),t.TgZ(155,"ng-select",46),t.ALo(156,"translate"),t.YNc(157,fa,2,2,"ng-option",40),t.qZA()()(),t._UZ(158,"mat-divider")(159,"mat-divider"),t.qZA(),t.TgZ(160,"mat-radio-group",47)(161,"mat-radio-button",48),t._uU(162),t.ALo(163,"translate"),t.qZA(),t.TgZ(164,"mat-radio-button",31),t._uU(165),t.ALo(166,"translate"),t.qZA(),t.TgZ(167,"mat-radio-button",49),t._uU(168),t.ALo(169,"translate"),t.qZA(),t.TgZ(170,"mat-radio-button",50),t._uU(171),t.ALo(172,"translate"),t.qZA(),t.TgZ(173,"mat-radio-button",51),t._uU(174),t.ALo(175,"translate"),t.qZA()(),t.TgZ(176,"div",7)(177,"div",52)(178,"mat-form-field",37)(179,"mat-label"),t._uU(180),t.ALo(181,"translate"),t.qZA(),t._UZ(182,"input",53),t.qZA()(),t.TgZ(183,"div",54)(184,"mat-form-field",37)(185,"mat-label"),t._uU(186),t.ALo(187,"translate"),t.qZA(),t._UZ(188,"input",55),t.qZA()()(),t.TgZ(189,"div",7)(190,"mat-form-field",56)(191,"mat-label"),t._uU(192),t.ALo(193,"translate"),t.qZA(),t._UZ(194,"input",57),t.qZA(),t.TgZ(195,"mat-form-field",58)(196,"mat-label"),t._uU(197),t.ALo(198,"translate"),t.qZA(),t._UZ(199,"input",59),t.qZA()(),t.TgZ(200,"div",7)(201,"mat-form-field",60)(202,"mat-label"),t._uU(203),t.ALo(204,"translate"),t.qZA(),t.TgZ(205,"mat-select",61),t.NdJ("selectionChange",function(l){return i.getGovernorate_EstOwner(l)}),t.ALo(206,"translate"),t.TgZ(207,"mat-option",39),t._uU(208,"-"),t.qZA(),t.YNc(209,Ca,2,2,"mat-option",40),t.qZA()(),t.TgZ(210,"mat-form-field",60)(211,"mat-label"),t._uU(212),t.ALo(213,"translate"),t.qZA(),t.TgZ(214,"mat-select",62),t.NdJ("selectionChange",function(l){return i.getCity_EstOwner(l)}),t.ALo(215,"translate"),t.TgZ(216,"mat-option",39),t._uU(217,"-"),t.qZA(),t.YNc(218,Ta,2,2,"mat-option",40),t.qZA()(),t.TgZ(219,"mat-form-field",63)(220,"mat-label"),t._uU(221),t.ALo(222,"translate"),t.qZA(),t.TgZ(223,"mat-select",64),t.NdJ("selectionChange",function(l){return i.getAria_EstOwner(l)}),t.ALo(224,"translate"),t.TgZ(225,"mat-option",39),t._uU(226,"-"),t.qZA(),t.YNc(227,ba,2,2,"mat-option",40),t.qZA()(),t.TgZ(228,"mat-form-field",60)(229,"mat-label"),t._uU(230),t.ALo(231,"translate"),t.qZA(),t.TgZ(232,"mat-select",65),t.ALo(233,"translate"),t.TgZ(234,"mat-option",39),t._uU(235,"-"),t.qZA(),t.YNc(236,va,2,2,"mat-option",40),t.qZA()()(),t.TgZ(237,"div",7)(238,"mat-form-field",66)(239,"mat-label"),t._uU(240),t.ALo(241,"translate"),t.qZA(),t._UZ(242,"input",67),t.qZA(),t.TgZ(243,"mat-form-field",8)(244,"mat-label"),t._uU(245),t.ALo(246,"translate"),t.qZA(),t._UZ(247,"input",68),t.qZA(),t.TgZ(248,"mat-form-field",58)(249,"mat-label"),t._uU(250),t.ALo(251,"translate"),t.qZA(),t._UZ(252,"input",69),t.qZA(),t.TgZ(253,"mat-form-field",8)(254,"mat-label"),t._uU(255),t.ALo(256,"translate"),t.qZA(),t._UZ(257,"input",70),t.qZA()()(),t.YNc(258,Za,4,1,"div",1),t.TgZ(259,"div",23)(260,"input",71),t.NdJ("change",function(l){return i.onFileSelected(l.target.files,l)}),t.qZA(),t.TgZ(261,"button",72),t.NdJ("click",function(){return i.callOnHowiaFileSelect()}),t._uU(262),t.ALo(263,"translate"),t.qZA(),t.YNc(264,xa,4,2,"div",1),t.qZA()(),t.TgZ(265,"mat-tab",73),t.ALo(266,"translate"),t.TgZ(267,"div",74),t._UZ(268,"mat-label"),t.TgZ(269,"div",7)(270,"div",36)(271,"mat-form-field",37)(272,"mat-label"),t._uU(273),t.ALo(274,"translate"),t.qZA(),t._UZ(275,"input",75),t.qZA()(),t.TgZ(276,"div",76)(277,"mat-form-field",37)(278,"mat-label"),t._uU(279),t.ALo(280,"translate"),t.qZA(),t._UZ(281,"input",77),t.qZA()(),t.TgZ(282,"div",76)(283,"mat-form-field",37)(284,"mat-label"),t._uU(285),t.ALo(286,"translate"),t.qZA(),t._UZ(287,"input",78),t.qZA()()(),t.TgZ(288,"div",7)(289,"div",54)(290,"mat-form-field",37)(291,"mat-label"),t._uU(292),t.ALo(293,"translate"),t.qZA(),t._UZ(294,"input",79),t.qZA()(),t.TgZ(295,"div",54)(296,"mat-form-field",37)(297,"mat-label"),t._uU(298),t.ALo(299,"translate"),t.qZA(),t._UZ(300,"input",80),t.qZA()(),t.TgZ(301,"div",81)(302,"mat-form-field",37)(303,"mat-label"),t._uU(304),t.ALo(305,"translate"),t.qZA(),t._UZ(306,"input",82),t.qZA()()(),t.TgZ(307,"div",7)(308,"div",54)(309,"div",23)(310,"label"),t._uU(311),t.ALo(312,"translate"),t.qZA(),t.TgZ(313,"ng-select",83),t.ALo(314,"translate"),t.YNc(315,Ua,2,2,"ng-option",40),t.qZA()()(),t.TgZ(316,"div",84)(317,"mat-form-field",37)(318,"mat-label")(319,"mat-icon"),t._uU(320,"fingerprint"),t.qZA(),t._uU(321),t.ALo(322,"translate"),t.qZA(),t._UZ(323,"input",85),t.qZA()(),t.TgZ(324,"div",84)(325,"mat-form-field",37)(326,"mat-label"),t._uU(327),t.ALo(328,"translate"),t.qZA(),t._UZ(329,"input",86),t.qZA()()(),t.YNc(330,wa,4,1,"div",1),t.TgZ(331,"div",23)(332,"input",87),t.NdJ("change",function(l){return i.onRegisterFileSelected(l.target.files,l)}),t.qZA(),t.TgZ(333,"button",88),t.NdJ("click",function(){return i.callOnRegisterFileSelect()}),t._uU(334),t.ALo(335,"translate"),t.qZA(),t.YNc(336,Sa,4,2,"div",1),t.qZA()()(),t.TgZ(337,"mat-tab",89),t.ALo(338,"translate"),t.TgZ(339,"div",74),t._UZ(340,"mat-label"),t.TgZ(341,"div",7)(342,"mat-form-field",63)(343,"mat-label"),t._uU(344),t.ALo(345,"translate"),t.qZA(),t._UZ(346,"input",90),t.qZA(),t.TgZ(347,"mat-form-field",60)(348,"mat-label"),t._uU(349),t.ALo(350,"translate"),t.qZA(),t._UZ(351,"input",91),t.qZA(),t.TgZ(352,"mat-form-field",13)(353,"mat-label"),t._uU(354),t.ALo(355,"translate"),t.qZA(),t._UZ(356,"input",92),t.ALo(357,"translate"),t.qZA()(),t.TgZ(358,"div",7)(359,"mat-form-field",56)(360,"mat-label"),t._uU(361),t.ALo(362,"translate"),t.qZA(),t._UZ(363,"input",93),t.qZA(),t.TgZ(364,"mat-form-field",58)(365,"mat-label"),t._uU(366),t.ALo(367,"translate"),t.qZA(),t._UZ(368,"input",94),t.qZA()(),t.TgZ(369,"div",7)(370,"mat-form-field",60)(371,"mat-label"),t._uU(372),t.ALo(373,"translate"),t.qZA(),t.TgZ(374,"mat-select",95),t.NdJ("selectionChange",function(l){return i.getGovernorate(l)}),t.ALo(375,"translate"),t.TgZ(376,"mat-option",39),t._uU(377,"-"),t.qZA(),t.YNc(378,Ia,2,2,"mat-option",40),t.qZA()(),t.TgZ(379,"mat-form-field",60)(380,"mat-label"),t._uU(381),t.ALo(382,"translate"),t.qZA(),t.TgZ(383,"mat-select",96),t.NdJ("selectionChange",function(l){return i.getCity(l)}),t.ALo(384,"translate"),t.TgZ(385,"mat-option",39),t._uU(386,"-"),t.qZA(),t.YNc(387,Da,2,2,"mat-option",40),t.qZA()(),t.TgZ(388,"mat-form-field",63)(389,"mat-label"),t._uU(390),t.ALo(391,"translate"),t.qZA(),t.TgZ(392,"mat-select",97),t.NdJ("selectionChange",function(l){return i.getAria(l)}),t.ALo(393,"translate"),t.TgZ(394,"mat-option",39),t._uU(395,"-"),t.qZA(),t.YNc(396,Fa,2,2,"mat-option",40),t.qZA()(),t.TgZ(397,"mat-form-field",60)(398,"mat-label"),t._uU(399),t.ALo(400,"translate"),t.qZA(),t.TgZ(401,"mat-select",98),t.ALo(402,"translate"),t.TgZ(403,"mat-option",39),t._uU(404,"-"),t.qZA(),t.YNc(405,La,2,2,"mat-option",40),t.qZA()()(),t.TgZ(406,"div",7)(407,"mat-form-field",66)(408,"mat-label"),t._uU(409),t.ALo(410,"translate"),t.qZA(),t._UZ(411,"input",99),t.qZA(),t.TgZ(412,"mat-form-field",8)(413,"mat-label"),t._uU(414),t.ALo(415,"translate"),t.qZA(),t._UZ(416,"input",100),t.qZA(),t.TgZ(417,"mat-form-field",58)(418,"mat-label"),t._uU(419),t.ALo(420,"translate"),t.qZA(),t._UZ(421,"input",101),t.qZA(),t.TgZ(422,"mat-form-field",8)(423,"mat-label"),t._uU(424),t.ALo(425,"translate"),t.qZA(),t._UZ(426,"input",102),t.qZA()()()(),t.TgZ(427,"mat-tab",103),t.ALo(428,"translate"),t.TgZ(429,"div",6),t._UZ(430,"mat-label"),t.TgZ(431,"div",5)(432,"mat-form-field",37)(433,"mat-label"),t._uU(434,"Facebook"),t.qZA(),t._UZ(435,"input",104),t.qZA(),t.TgZ(436,"mat-form-field",37)(437,"mat-label"),t._uU(438,"Twitter"),t.qZA(),t._UZ(439,"input",105),t.qZA(),t.TgZ(440,"mat-form-field",37)(441,"mat-label"),t._uU(442,"Google"),t.qZA(),t._UZ(443,"input",106),t.qZA()()()(),t.YNc(444,Ma,11,9,"mat-tab",107),t.TgZ(445,"mat-tab",108),t.ALo(446,"translate"),t.TgZ(447,"div",109)(448,"div",24),t._UZ(449,"img",25),t.TgZ(450,"input",110,111),t.NdJ("change",function(l){return i.onFileChange(l.target.files)}),t.qZA(),t.TgZ(452,"button",112),t.NdJ("click",function(){t.CHM(n);const l=t.MAs(451);return t.KtG(l.click())}),t._uU(453),t.ALo(454,"translate"),t.qZA()(),t._UZ(455,"mat-divider")(456,"input-file",113),t.qZA()()()(),t._UZ(457,"br"),t.TgZ(458,"div",114)(459,"div",7),t.YNc(460,Ra,3,4,"button",115),t.YNc(461,Pa,4,4,"button",116),t.YNc(462,ka,4,4,"button",116),t.YNc(463,Ba,4,4,"button",116),t.YNc(464,Wa,4,4,"button",116),t.YNc(465,Ha,3,4,"button",116),t.qZA()()}if(2&e){const n=t.MAs(97);t.xp6(1),t.Q6J("ngIf",!i.CUS.id),t.xp6(1),t.Q6J("ngIf",i.CUS.id),t.xp6(1),t.hij(" ",t.lcZ(4,130,"HTML.TENANT"),"\n"),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("backgroundColor","primary")("color","warn"),t.xp6(1),t.s9C("label",t.lcZ(8,132,"HTML.TAB_BASIC")),t.xp6(10),t.hij(" ",t.lcZ(18,134,"HTML.CODE"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.code.errors?null:i.form.controls.code.errors.required),t.xp6(1),t.Q6J("ngIf",i.form.controls.code.hasError("minlength")),t.xp6(5),t.hij(" ",t.lcZ(27,136,"HTML.USERNAME"),""),t.xp6(3),t.Q6J("ngIf",!i.CUS.id),t.xp6(6),t.hij(" ",t.lcZ(36,138,"HTML.FIRST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.firstname.errors?null:i.form.controls.firstname.errors.required),t.xp6(5),t.hij(" ",t.lcZ(44,140,"HTML.LAST_NAME"),""),t.xp6(3),t.Q6J("ngIf",null==i.form.controls.lastname.errors?null:i.form.controls.lastname.errors.required),t.xp6(4),t.Oqu(t.lcZ(51,142,"HTML.MOBILE")),t.xp6(5),t.Q6J("ngIf",null==i.form.controls.mobile.errors?null:i.form.controls.mobile.errors.required),t.xp6(4),t.Oqu(t.lcZ(60,144,"HTML.EInvoiceType")),t.xp6(4),t.Oqu(t.lcZ(64,146,"HTML.EType_Without")),t.xp6(3),t.Oqu(t.lcZ(67,148,"HTML.EType_Personal")),t.xp6(3),t.Oqu(t.lcZ(70,150,"HTML.EType_Business")),t.xp6(4),t.Q6J("src",i.defaultCusImage,t.LSH),t.xp6(2),t.Q6J("ngIf",i.fileType),t.xp6(2),t.Oqu(t.lcZ(78,152,"HTML.ChooseImageFile")),t.xp6(2),t.s9C("label",t.lcZ(80,154,"HTML.TAB_PERSONAL")),t.xp6(6),t.Oqu(t.lcZ(86,156,"HTML.MALE")),t.xp6(3),t.Oqu(t.lcZ(89,158,"HTML.FEMALE")),t.xp6(4),t.Oqu(t.lcZ(93,160,"HTML.BIRTH_DATE")),t.xp6(2),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(7),t.hij(" ",t.lcZ(103,162,"HTML.BRANCH"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(105,164,"HTML.BRANCH")),t.xp6(4),t.Q6J("ngForOf",i.AllBranches),t.xp6(4),t.Oqu(t.lcZ(113,166,"HTML.BUILDING")),t.xp6(2),t.s9C("placeholder",t.lcZ(115,168,"HTML.BUILDING")),t.xp6(4),t.Q6J("ngForOf",i.AllBuildings),t.xp6(3),t.Oqu(t.lcZ(122,170,"HTML.UNIT")),t.xp6(2),t.s9C("placeholder",t.lcZ(124,172,"HTML.UNIT")),t.xp6(4),t.Q6J("ngForOf",i.AllUnits),t.xp6(2),t.Q6J("ngIf",i.electricUnit),t.xp6(2),t.Oqu(i.electricUnit),t.xp6(1),t.Q6J("ngIf",i.waterUnit),t.xp6(2),t.Oqu(i.waterUnit),t.xp6(1),t.Q6J("ngIf",i.gasUnit),t.xp6(2),t.Oqu(i.gasUnit),t.xp6(1),t.s9C("label",t.lcZ(139,174,"HTML.EstablishmentOwner")),t.xp6(8),t.hij(" ",t.lcZ(147,176,"HTML.WorkPlace"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(149,178,"HTML.WorkPlace")),t.xp6(2),t.Q6J("ngForOf",i.WorkPlaces),t.xp6(3),t.hij(" ",t.lcZ(154,180,"HTML.Job"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(156,182,"HTML.Job")),t.xp6(2),t.Q6J("ngForOf",i.Jobs),t.xp6(5),t.Oqu(t.lcZ(163,184,"OPTIONS.NATIONAL_ID")),t.xp6(3),t.Oqu(t.lcZ(166,186,"OPTIONS.FOREIGN_ID")),t.xp6(3),t.Oqu(t.lcZ(169,188,"OPTIONS.GULF_ID")),t.xp6(3),t.Oqu(t.lcZ(172,190,"OPTIONS.SPECIAL_EQAMA")),t.xp6(3),t.Oqu(t.lcZ(175,192,"OPTIONS.OTHER")),t.xp6(6),t.Oqu(t.lcZ(181,194,"HTML.EstablishmentOwnerName")),t.xp6(6),t.Oqu(t.lcZ(187,196,"HTML.IDNUMBER")),t.xp6(6),t.Oqu(t.lcZ(193,198,"HTML.ADDRESS")),t.xp6(5),t.Oqu(t.lcZ(198,200,"HTML.ShortAddress")),t.xp6(6),t.Oqu(t.lcZ(204,202,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(206,204,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(3),t.Oqu(t.lcZ(213,206,"HTML.GOVERN")),t.xp6(2),t.s9C("placeholder",t.lcZ(215,208,"HTML.GOVERN")),t.xp6(4),t.Q6J("ngForOf",i.Governorates_EstOwner),t.xp6(3),t.Oqu(t.lcZ(222,210,"HTML.CITY")),t.xp6(2),t.s9C("placeholder",t.lcZ(224,212,"HTML.CITY")),t.xp6(4),t.Q6J("ngForOf",i.Cities_EstOwner),t.xp6(3),t.Oqu(t.lcZ(231,214,"HTML.REGION")),t.xp6(2),t.s9C("placeholder",t.lcZ(233,216,"HTML.REGION")),t.xp6(4),t.Q6J("ngForOf",i.Areas_EstOwner),t.xp6(4),t.Oqu(t.lcZ(241,218,"HTML.STREET_NAME")),t.xp6(5),t.Oqu(t.lcZ(246,220,"HTML.BUILDING_NUMBER")),t.xp6(5),t.Oqu(t.lcZ(251,222,"HTML.ZIP")),t.xp6(5),t.Oqu(t.lcZ(256,224,"HTML.BUILDING_SubNUMBER")),t.xp6(3),t.Q6J("ngIf",i.CUS.id&&i.natIDfileToUpload),t.xp6(4),t.hij(" ",t.lcZ(263,226,"HTML.ChooseHowiaImageFile"),""),t.xp6(2),t.Q6J("ngIf",i.fileUrl),t.xp6(1),t.s9C("label",t.lcZ(266,228,"HTML.BusinessTab")),t.xp6(8),t.Oqu(t.lcZ(274,230,"HTML.EstablishmentName")),t.xp6(6),t.Oqu(t.lcZ(280,232,"HTML.TaxNumber")),t.xp6(6),t.Oqu(t.lcZ(286,234,"HTML.CommercialRegister")),t.xp6(7),t.Oqu(t.lcZ(293,236,"HTML.CoRegisterOwnerName")),t.xp6(6),t.Oqu(t.lcZ(299,238,"HTML.CoRegisterManagerName")),t.xp6(6),t.Oqu(t.lcZ(305,240,"HTML.UnifiedNumber")),t.xp6(7),t.hij(" ",t.lcZ(312,242,"HTML.workField"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(314,244,"HTML.workField")),t.xp6(2),t.Q6J("ngForOf",i.WorkFields),t.xp6(6),t.hij(" ",t.lcZ(322,246,"HTML.TradeMark"),""),t.xp6(6),t.hij(" ",t.lcZ(328,248,"HTML.FamousName"),""),t.xp6(3),t.Q6J("ngIf",i.CUS.id&&i.registerFileToUpload),t.xp6(4),t.hij(" ",t.lcZ(335,250,"HTML.ChooseRegisterImageFile"),""),t.xp6(2),t.Q6J("ngIf",i.registerFileUrl),t.xp6(1),t.s9C("label",t.lcZ(338,252,"HTML.TAB_CONTACTS")),t.xp6(7),t.Oqu(t.lcZ(345,254,"HTML.HOME_PHONE")),t.xp6(5),t.Oqu(t.lcZ(350,256,"HTML.WORK_PHONE")),t.xp6(5),t.Oqu(t.lcZ(355,258,"HTML.EMAIL")),t.xp6(2),t.s9C("placeholder",t.lcZ(357,260,"HTML.EMAIL")),t.xp6(5),t.Oqu(t.lcZ(362,262,"HTML.ADDRESS")),t.xp6(5),t.Oqu(t.lcZ(367,264,"HTML.ShortAddress")),t.xp6(6),t.Oqu(t.lcZ(373,266,"HTML.COUNTRY")),t.xp6(2),t.s9C("placeholder",t.lcZ(375,268,"HTML.COUNTRY")),t.xp6(4),t.Q6J("ngForOf",i.Countries),t.xp6(3),t.Oqu(t.lcZ(382,270,"HTML.GOVERN")),t.xp6(2),t.s9C("placeholder",t.lcZ(384,272,"HTML.GOVERN")),t.xp6(4),t.Q6J("ngForOf",i.Governorates),t.xp6(3),t.Oqu(t.lcZ(391,274,"HTML.CITY")),t.xp6(2),t.s9C("placeholder",t.lcZ(393,276,"HTML.CITY")),t.xp6(4),t.Q6J("ngForOf",i.Cities),t.xp6(3),t.Oqu(t.lcZ(400,278,"HTML.REGION")),t.xp6(2),t.s9C("placeholder",t.lcZ(402,280,"HTML.REGION")),t.xp6(4),t.Q6J("ngForOf",i.Areas),t.xp6(4),t.Oqu(t.lcZ(410,282,"HTML.STREET_NAME")),t.xp6(5),t.Oqu(t.lcZ(415,284,"HTML.BUILDING_NUMBER")),t.xp6(5),t.Oqu(t.lcZ(420,286,"HTML.ZIP")),t.xp6(5),t.Oqu(t.lcZ(425,288,"HTML.BUILDING_SubNUMBER")),t.xp6(3),t.s9C("label",t.lcZ(428,290,"HTML.TAB_SOCIAL_LIFE")),t.xp6(17),t.Q6J("ngIf",i.account.periorty>0),t.xp6(1),t.s9C("label",t.lcZ(446,292,"HTML.TAB_DOCS")),t.xp6(4),t.Q6J("src",i.defaultDocImage,t.LSH),t.xp6(4),t.Oqu(t.lcZ(454,294,"HTML.AddPic")),t.xp6(7),t.Q6J("ngIf",i.can("change_tenant")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("view_tenantrelative")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("view_tenant_workrelated")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("view_tenant_workrelated_agency")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("change_tenant_password")||0==i.account.periorty),t.xp6(1),t.Q6J("ngIf",i.can("confirm_tenant"))}},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,At.VQ,At.U0,_.sg,_.O5,d.sg,d.u,d.x0,T.xw,T.SQ,T.Wh,T.yH,K.ey,b.lW,te.oG,Y.Mq,Y.hl,Y.nW,Z.ZT,Z.uh,Z.H8,Q.Hw,A.Nt,v.KE,v.hX,v.bx,v.TO,v.R9,tt.d,q.gD,Tt.uX,Tt.SP,ee.tW,vt.w9,vt.jq,w.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.file-input{display:none}.custom-button{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px;height:40px}.custom-button:hover{background-color:#0056b3}\n"],encapsulation:2});const we=[{path:"",redirectTo:"tenant-list",pathMatch:"full"},{path:"tenant-list",component:h,data:{breadcrumb:"Tenants"}},{path:"tenant-add",component:Dt,data:{breadcrumb:"AddTenant"}},{path:"tenant-add/:id",component:Dt,data:{breadcrumb:"EditTenant"}},{path:"businesstenant-list",component:Yt,data:{breadcrumb:"TenantBusiness"}},{path:"businesstenant-add",component:Lt,data:{breadcrumb:"AddTenantBusiness"}},{path:"businesstenant-add/:id",component:Lt,data:{breadcrumb:"EditTenantBusiness"}},{path:"owner-list",component:Jt,data:{breadcrumb:"Owners"}},{path:"owner-add",component:xt,data:{breadcrumb:"AddOwner"}},{path:"owner-add/:id",component:xt,data:{breadcrumb:"EditOwner"}},{path:"contract-list",component:St,data:{breadcrumb:"RentContracts"}},{path:"contract-list/:tenantid",component:St,data:{breadcrumb:"RentContractsForTenant"}},{path:"contract-add",component:Zt,data:{breadcrumb:"AddContract"}},{path:"contract-add/:id",component:Zt,data:{breadcrumb:"EditContract"}},{path:"contract-add/renew/:id",component:Zt,data:{breadcrumb:"RenewContract",parentID:"T"}},{path:"installment-list/:id",component:Bt,data:{breadcrumb:"ContractInstallments"}},{path:"statements-list/:id",component:Wt,data:{breadcrumb:"TenantStatements"}},{path:"tenant-leave",component:Ft,data:{breadcrumb:"AddTenantLeave"}},{path:"tenant-leave/:id",component:Ft,data:{breadcrumb:"EditTenantLeave"}},{path:"print-einvoice",component:Gt,data:{breadcrumb:"E-Invoice"}}];class Mt{}Mt.\u0275fac=function(e){return new(e||Mt)},Mt.\u0275mod=t.oAB({type:Mt}),Mt.\u0275inj=t.cJS({imports:[Ce.JF,d.u5,At.Fk,X.JX,ii.D,Ue.N,_.ez,k.Bz.forChild(we),d.UX,ei.m,X.JX,mn.kz,ee.Y$,vt.A0]})},5343:(ie,it)=>{"use strict";it.byteLength=function D(b){var A=t(b),q=A[1];return 3*(A[0]+q)/4-q},it.toByteArray=function V(b){var A,z,v=t(b),q=v[0],w=v[1],H=new Z(function p(b,A,v){return 3*(A+v)/4-v}(0,q,w)),$=0,ht=w>0?q-4:q;for(z=0;z<ht;z+=4)A=_[b.charCodeAt(z)]<<18|_[b.charCodeAt(z+1)]<<12|_[b.charCodeAt(z+2)]<<6|_[b.charCodeAt(z+3)],H[$++]=A>>16&255,H[$++]=A>>8&255,H[$++]=255&A;return 2===w&&(A=_[b.charCodeAt(z)]<<2|_[b.charCodeAt(z+1)]>>4,H[$++]=255&A),1===w&&(A=_[b.charCodeAt(z)]<<10|_[b.charCodeAt(z+1)]<<4|_[b.charCodeAt(z+2)]>>2,H[$++]=A>>8&255,H[$++]=255&A),H},it.fromByteArray=function K(b){for(var A,v=b.length,q=v%3,w=[],H=16383,$=0,ht=v-q;$<ht;$+=H)w.push(T(b,$,$+H>ht?ht:$+H));return 1===q?w.push(f[(A=b[v-1])>>2]+f[A<<4&63]+"=="):2===q&&w.push(f[(A=(b[v-2]<<8)+b[v-1])>>10]+f[A>>4&63]+f[A<<2&63]+"="),w.join("")};for(var f=[],_=[],Z=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=0,N=d.length;R<N;++R)f[R]=d[R],_[d.charCodeAt(R)]=R;function t(b){var A=b.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=b.indexOf("=");return-1===v&&(v=A),[v,v===A?0:4-v%4]}function I(b){return f[b>>18&63]+f[b>>12&63]+f[b>>6&63]+f[63&b]}function T(b,A,v){for(var w=[],H=A;H<v;H+=3)w.push(I((b[H]<<16&16711680)+(b[H+1]<<8&65280)+(255&b[H+2])));return w.join("")}_["-".charCodeAt(0)]=62,_["_".charCodeAt(0)]=63},3172:(ie,it,f)=>{"use strict";const Z=f(5343),d=f(8461),R="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;it.lW=p,it.h2=50;const N=2147483647;function D(c){if(c>N)throw new RangeError('The value "'+c+'" is invalid for option "size"');const a=new Uint8Array(c);return Object.setPrototypeOf(a,p.prototype),a}function p(c,a,s){if("number"==typeof c){if("string"==typeof a)throw new TypeError('The "string" argument must be of type string. Received type number');return K(c)}return V(c,a,s)}function V(c,a,s){if("string"==typeof c)return function b(c,a){if(("string"!=typeof a||""===a)&&(a="utf8"),!p.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const s=0|ht(c,a);let u=D(s);const m=u.write(c,a);return m!==s&&(u=u.slice(0,m)),u}(c,a);if(ArrayBuffer.isView(c))return function v(c){if(st(c,Uint8Array)){const a=new Uint8Array(c);return q(a.buffer,a.byteOffset,a.byteLength)}return A(c)}(c);if(null==c)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(st(c,ArrayBuffer)||c&&st(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(st(c,SharedArrayBuffer)||c&&st(c.buffer,SharedArrayBuffer)))return q(c,a,s);if("number"==typeof c)throw new TypeError('The "value" argument must not be of type number. Received type number');const u=c.valueOf&&c.valueOf();if(null!=u&&u!==c)return p.from(u,a,s);const m=function w(c){if(p.isBuffer(c)){const a=0|H(c.length),s=D(a);return 0===s.length||c.copy(s,0,0,a),s}return void 0!==c.length?"number"!=typeof c.length||Et(c.length)?D(0):A(c):"Buffer"===c.type&&Array.isArray(c.data)?A(c.data):void 0}(c);if(m)return m;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof c[Symbol.toPrimitive])return p.from(c[Symbol.toPrimitive]("string"),a,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}function I(c){if("number"!=typeof c)throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function K(c){return I(c),D(c<0?0:0|H(c))}function A(c){const a=c.length<0?0:0|H(c.length),s=D(a);for(let u=0;u<a;u+=1)s[u]=255&c[u];return s}function q(c,a,s){if(a<0||c.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<a+(s||0))throw new RangeError('"length" is outside of buffer bounds');let u;return u=void 0===a&&void 0===s?new Uint8Array(c):void 0===s?new Uint8Array(c,a):new Uint8Array(c,a,s),Object.setPrototypeOf(u,p.prototype),u}function H(c){if(c>=N)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+N.toString(16)+" bytes");return 0|c}function ht(c,a){if(p.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||st(c,ArrayBuffer))return c.byteLength;if("string"!=typeof c)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);const s=c.length,u=arguments.length>2&&!0===arguments[2];if(!u&&0===s)return 0;let m=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return pt(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return Xt(c).length;default:if(m)return u?-1:pt(c).length;a=(""+a).toLowerCase(),m=!0}}function z(c,a,s){let u=!1;if((void 0===a||a<0)&&(a=0),a>this.length||((void 0===s||s>this.length)&&(s=this.length),s<=0)||(s>>>=0)<=(a>>>=0))return"";for(c||(c="utf8");;)switch(c){case"hex":return _t(this,a,s);case"utf8":case"utf-8":return $t(this,a,s);case"ascii":return ue(this,a,s);case"latin1":case"binary":return gt(this,a,s);case"base64":return le(this,a,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return at(this,a,s);default:if(u)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),u=!0}}function Ct(c,a,s){const u=c[a];c[a]=c[s],c[s]=u}function Qt(c,a,s,u,m){if(0===c.length)return-1;if("string"==typeof s?(u=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),Et(s=+s)&&(s=m?0:c.length-1),s<0&&(s=c.length+s),s>=c.length){if(m)return-1;s=c.length-1}else if(s<0){if(!m)return-1;s=0}if("string"==typeof a&&(a=p.from(a,u)),p.isBuffer(a))return 0===a.length?-1:jt(c,a,s,u,m);if("number"==typeof a)return a&=255,"function"==typeof Uint8Array.prototype.indexOf?m?Uint8Array.prototype.indexOf.call(c,a,s):Uint8Array.prototype.lastIndexOf.call(c,a,s):jt(c,[a],s,u,m);throw new TypeError("val must be string, number or Buffer")}function jt(c,a,s,u,m){let P,h=1,g=c.length,O=a.length;if(void 0!==u&&("ucs2"===(u=String(u).toLowerCase())||"ucs-2"===u||"utf16le"===u||"utf-16le"===u)){if(c.length<2||a.length<2)return-1;h=2,g/=2,O/=2,s/=2}function B(W,E){return 1===h?W[E]:W.readUInt16BE(E*h)}if(m){let W=-1;for(P=s;P<g;P++)if(B(c,P)===B(a,-1===W?0:P-W)){if(-1===W&&(W=P),P-W+1===O)return W*h}else-1!==W&&(P-=P-W),W=-1}else for(s+O>g&&(s=g-O),P=s;P>=0;P--){let W=!0;for(let E=0;E<O;E++)if(B(c,P+E)!==B(a,E)){W=!1;break}if(W)return P}return-1}function ne(c,a,s,u){s=Number(s)||0;const m=c.length-s;u?(u=Number(u))>m&&(u=m):u=m;const h=a.length;let g;for(u>h/2&&(u=h/2),g=0;g<u;++g){const O=parseInt(a.substr(2*g,2),16);if(Et(O))return g;c[s+g]=O}return g}function oe(c,a,s,u){return Nt(pt(a,c.length-s),c,s,u)}function ae(c,a,s,u){return Nt(function Ot(c){const a=[];for(let s=0;s<c.length;++s)a.push(255&c.charCodeAt(s));return a}(a),c,s,u)}function re(c,a,s,u){return Nt(Xt(a),c,s,u)}function se(c,a,s,u){return Nt(function de(c,a){let s,u,m;const h=[];for(let g=0;g<c.length&&!((a-=2)<0);++g)s=c.charCodeAt(g),u=s>>8,m=s%256,h.push(m),h.push(u);return h}(a,c.length-s),c,s,u)}function le(c,a,s){return Z.fromByteArray(0===a&&s===c.length?c:c.slice(a,s))}function $t(c,a,s){s=Math.min(c.length,s);const u=[];let m=a;for(;m<s;){const h=c[m];let g=null,O=h>239?4:h>223?3:h>191?2:1;if(m+O<=s){let B,P,W,E;switch(O){case 1:h<128&&(g=h);break;case 2:B=c[m+1],128==(192&B)&&(E=(31&h)<<6|63&B,E>127&&(g=E));break;case 3:B=c[m+1],P=c[m+2],128==(192&B)&&128==(192&P)&&(E=(15&h)<<12|(63&B)<<6|63&P,E>2047&&(E<55296||E>57343)&&(g=E));break;case 4:B=c[m+1],P=c[m+2],W=c[m+3],128==(192&B)&&128==(192&P)&&128==(192&W)&&(E=(15&h)<<18|(63&B)<<12|(63&P)<<6|63&W,E>65535&&E<1114112&&(g=E))}}null===g?(g=65533,O=1):g>65535&&(g-=65536,u.push(g>>>10&1023|55296),g=56320|1023&g),u.push(g),m+=O}return function ce(c){const a=c.length;if(a<=zt)return String.fromCharCode.apply(String,c);let s="",u=0;for(;u<a;)s+=String.fromCharCode.apply(String,c.slice(u,u+=zt));return s}(u)}!(p.TYPED_ARRAY_SUPPORT=function t(){try{const c=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(c,a),42===c.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(c,a,s){return V(c,a,s)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(c,a,s){return function T(c,a,s){return I(c),c<=0?D(c):void 0!==a?"string"==typeof s?D(c).fill(a,s):D(c).fill(a):D(c)}(c,a,s)},p.allocUnsafe=function(c){return K(c)},p.allocUnsafeSlow=function(c){return K(c)},p.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==p.prototype},p.compare=function(a,s){if(st(a,Uint8Array)&&(a=p.from(a,a.offset,a.byteLength)),st(s,Uint8Array)&&(s=p.from(s,s.offset,s.byteLength)),!p.isBuffer(a)||!p.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===s)return 0;let u=a.length,m=s.length;for(let h=0,g=Math.min(u,m);h<g;++h)if(a[h]!==s[h]){u=a[h],m=s[h];break}return u<m?-1:m<u?1:0},p.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(a,s){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return p.alloc(0);let u;if(void 0===s)for(s=0,u=0;u<a.length;++u)s+=a[u].length;const m=p.allocUnsafe(s);let h=0;for(u=0;u<a.length;++u){let g=a[u];if(st(g,Uint8Array))h+g.length>m.length?(p.isBuffer(g)||(g=p.from(g)),g.copy(m,h)):Uint8Array.prototype.set.call(m,g,h);else{if(!p.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(m,h)}h+=g.length}return m},p.byteLength=ht,p.prototype._isBuffer=!0,p.prototype.swap16=function(){const a=this.length;if(a%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<a;s+=2)Ct(this,s,s+1);return this},p.prototype.swap32=function(){const a=this.length;if(a%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<a;s+=4)Ct(this,s,s+3),Ct(this,s+1,s+2);return this},p.prototype.swap64=function(){const a=this.length;if(a%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<a;s+=8)Ct(this,s,s+7),Ct(this,s+1,s+6),Ct(this,s+2,s+5),Ct(this,s+3,s+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){const a=this.length;return 0===a?"":0===arguments.length?$t(this,0,a):z.apply(this,arguments)},p.prototype.equals=function(a){if(!p.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===p.compare(this,a)},p.prototype.inspect=function(){let a="";const s=it.h2;return a=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(a+=" ... "),"<Buffer "+a+">"},R&&(p.prototype[R]=p.prototype.inspect),p.prototype.compare=function(a,s,u,m,h){if(st(a,Uint8Array)&&(a=p.from(a,a.offset,a.byteLength)),!p.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===s&&(s=0),void 0===u&&(u=a?a.length:0),void 0===m&&(m=0),void 0===h&&(h=this.length),s<0||u>a.length||m<0||h>this.length)throw new RangeError("out of range index");if(m>=h&&s>=u)return 0;if(m>=h)return-1;if(s>=u)return 1;if(this===a)return 0;let g=(h>>>=0)-(m>>>=0),O=(u>>>=0)-(s>>>=0);const B=Math.min(g,O),P=this.slice(m,h),W=a.slice(s,u);for(let E=0;E<B;++E)if(P[E]!==W[E]){g=P[E],O=W[E];break}return g<O?-1:O<g?1:0},p.prototype.includes=function(a,s,u){return-1!==this.indexOf(a,s,u)},p.prototype.indexOf=function(a,s,u){return Qt(this,a,s,u,!0)},p.prototype.lastIndexOf=function(a,s,u){return Qt(this,a,s,u,!1)},p.prototype.write=function(a,s,u,m){if(void 0===s)m="utf8",u=this.length,s=0;else if(void 0===u&&"string"==typeof s)m=s,u=this.length,s=0;else{if(!isFinite(s))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");s>>>=0,isFinite(u)?(u>>>=0,void 0===m&&(m="utf8")):(m=u,u=void 0)}const h=this.length-s;if((void 0===u||u>h)&&(u=h),a.length>0&&(u<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");m||(m="utf8");let g=!1;for(;;)switch(m){case"hex":return ne(this,a,s,u);case"utf8":case"utf-8":return oe(this,a,s,u);case"ascii":case"latin1":case"binary":return ae(this,a,s,u);case"base64":return re(this,a,s,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,a,s,u);default:if(g)throw new TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),g=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const zt=4096;function ue(c,a,s){let u="";s=Math.min(c.length,s);for(let m=a;m<s;++m)u+=String.fromCharCode(127&c[m]);return u}function gt(c,a,s){let u="";s=Math.min(c.length,s);for(let m=a;m<s;++m)u+=String.fromCharCode(c[m]);return u}function _t(c,a,s){const u=c.length;(!a||a<0)&&(a=0),(!s||s<0||s>u)&&(s=u);let m="";for(let h=a;h<s;++h)m+=me[c[h]];return m}function at(c,a,s){const u=c.slice(a,s);let m="";for(let h=0;h<u.length-1;h+=2)m+=String.fromCharCode(u[h]+256*u[h+1]);return m}function L(c,a,s){if(c%1!=0||c<0)throw new RangeError("offset is not uint");if(c+a>s)throw new RangeError("Trying to access beyond buffer length")}function S(c,a,s,u,m,h){if(!p.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>m||a<h)throw new RangeError('"value" argument is out of bounds');if(s+u>c.length)throw new RangeError("Index out of range")}function nt(c,a,s,u,m){mt(a,u,m,c,s,7);let h=Number(a&BigInt(4294967295));c[s++]=h,h>>=8,c[s++]=h,h>>=8,c[s++]=h,h>>=8,c[s++]=h;let g=Number(a>>BigInt(32)&BigInt(4294967295));return c[s++]=g,g>>=8,c[s++]=g,g>>=8,c[s++]=g,g>>=8,c[s++]=g,s}function x(c,a,s,u,m){mt(a,u,m,c,s,7);let h=Number(a&BigInt(4294967295));c[s+7]=h,h>>=8,c[s+6]=h,h>>=8,c[s+5]=h,h>>=8,c[s+4]=h;let g=Number(a>>BigInt(32)&BigInt(4294967295));return c[s+3]=g,g>>=8,c[s+2]=g,g>>=8,c[s+1]=g,g>>=8,c[s]=g,s+8}function ut(c,a,s,u,m,h){if(s+u>c.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function rt(c,a,s,u,m){return a=+a,s>>>=0,m||ut(c,0,s,4),d.write(c,a,s,u,23,4),s+4}function k(c,a,s,u,m){return a=+a,s>>>=0,m||ut(c,0,s,8),d.write(c,a,s,u,52,8),s+8}p.prototype.slice=function(a,s){const u=this.length;(a=~~a)<0?(a+=u)<0&&(a=0):a>u&&(a=u),(s=void 0===s?u:~~s)<0?(s+=u)<0&&(s=0):s>u&&(s=u),s<a&&(s=a);const m=this.subarray(a,s);return Object.setPrototypeOf(m,p.prototype),m},p.prototype.readUintLE=p.prototype.readUIntLE=function(a,s,u){a>>>=0,s>>>=0,u||L(a,s,this.length);let m=this[a],h=1,g=0;for(;++g<s&&(h*=256);)m+=this[a+g]*h;return m},p.prototype.readUintBE=p.prototype.readUIntBE=function(a,s,u){a>>>=0,s>>>=0,u||L(a,s,this.length);let m=this[a+--s],h=1;for(;s>0&&(h*=256);)m+=this[a+--s]*h;return m},p.prototype.readUint8=p.prototype.readUInt8=function(a,s){return a>>>=0,s||L(a,1,this.length),this[a]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(a,s){return a>>>=0,s||L(a,2,this.length),this[a]|this[a+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(a,s){return a>>>=0,s||L(a,2,this.length),this[a]<<8|this[a+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(a,s){return a>>>=0,s||L(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(a,s){return a>>>=0,s||L(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},p.prototype.readBigUInt64LE=ft(function(a){G(a>>>=0,"offset");const s=this[a],u=this[a+7];(void 0===s||void 0===u)&&Q(a,this.length-8);const m=s+256*this[++a]+65536*this[++a]+this[++a]*2**24,h=this[++a]+256*this[++a]+65536*this[++a]+u*2**24;return BigInt(m)+(BigInt(h)<<BigInt(32))}),p.prototype.readBigUInt64BE=ft(function(a){G(a>>>=0,"offset");const s=this[a],u=this[a+7];(void 0===s||void 0===u)&&Q(a,this.length-8);const m=s*2**24+65536*this[++a]+256*this[++a]+this[++a],h=this[++a]*2**24+65536*this[++a]+256*this[++a]+u;return(BigInt(m)<<BigInt(32))+BigInt(h)}),p.prototype.readIntLE=function(a,s,u){a>>>=0,s>>>=0,u||L(a,s,this.length);let m=this[a],h=1,g=0;for(;++g<s&&(h*=256);)m+=this[a+g]*h;return h*=128,m>=h&&(m-=Math.pow(2,8*s)),m},p.prototype.readIntBE=function(a,s,u){a>>>=0,s>>>=0,u||L(a,s,this.length);let m=s,h=1,g=this[a+--m];for(;m>0&&(h*=256);)g+=this[a+--m]*h;return h*=128,g>=h&&(g-=Math.pow(2,8*s)),g},p.prototype.readInt8=function(a,s){return a>>>=0,s||L(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},p.prototype.readInt16LE=function(a,s){a>>>=0,s||L(a,2,this.length);const u=this[a]|this[a+1]<<8;return 32768&u?4294901760|u:u},p.prototype.readInt16BE=function(a,s){a>>>=0,s||L(a,2,this.length);const u=this[a+1]|this[a]<<8;return 32768&u?4294901760|u:u},p.prototype.readInt32LE=function(a,s){return a>>>=0,s||L(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},p.prototype.readInt32BE=function(a,s){return a>>>=0,s||L(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},p.prototype.readBigInt64LE=ft(function(a){G(a>>>=0,"offset");const s=this[a],u=this[a+7];return(void 0===s||void 0===u)&&Q(a,this.length-8),(BigInt(this[a+4]+256*this[a+5]+65536*this[a+6]+(u<<24))<<BigInt(32))+BigInt(s+256*this[++a]+65536*this[++a]+this[++a]*2**24)}),p.prototype.readBigInt64BE=ft(function(a){G(a>>>=0,"offset");const s=this[a],u=this[a+7];(void 0===s||void 0===u)&&Q(a,this.length-8);const m=(s<<24)+65536*this[++a]+256*this[++a]+this[++a];return(BigInt(m)<<BigInt(32))+BigInt(this[++a]*2**24+65536*this[++a]+256*this[++a]+u)}),p.prototype.readFloatLE=function(a,s){return a>>>=0,s||L(a,4,this.length),d.read(this,a,!0,23,4)},p.prototype.readFloatBE=function(a,s){return a>>>=0,s||L(a,4,this.length),d.read(this,a,!1,23,4)},p.prototype.readDoubleLE=function(a,s){return a>>>=0,s||L(a,8,this.length),d.read(this,a,!0,52,8)},p.prototype.readDoubleBE=function(a,s){return a>>>=0,s||L(a,8,this.length),d.read(this,a,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(a,s,u,m){a=+a,s>>>=0,u>>>=0,m||S(this,a,s,u,Math.pow(2,8*u)-1,0);let h=1,g=0;for(this[s]=255&a;++g<u&&(h*=256);)this[s+g]=a/h&255;return s+u},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(a,s,u,m){a=+a,s>>>=0,u>>>=0,m||S(this,a,s,u,Math.pow(2,8*u)-1,0);let h=u-1,g=1;for(this[s+h]=255&a;--h>=0&&(g*=256);)this[s+h]=a/g&255;return s+u},p.prototype.writeUint8=p.prototype.writeUInt8=function(a,s,u){return a=+a,s>>>=0,u||S(this,a,s,1,255,0),this[s]=255&a,s+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(a,s,u){return a=+a,s>>>=0,u||S(this,a,s,2,65535,0),this[s]=255&a,this[s+1]=a>>>8,s+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(a,s,u){return a=+a,s>>>=0,u||S(this,a,s,2,65535,0),this[s]=a>>>8,this[s+1]=255&a,s+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(a,s,u){return a=+a,s>>>=0,u||S(this,a,s,4,4294967295,0),this[s+3]=a>>>24,this[s+2]=a>>>16,this[s+1]=a>>>8,this[s]=255&a,s+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(a,s,u){return a=+a,s>>>=0,u||S(this,a,s,4,4294967295,0),this[s]=a>>>24,this[s+1]=a>>>16,this[s+2]=a>>>8,this[s+3]=255&a,s+4},p.prototype.writeBigUInt64LE=ft(function(a,s=0){return nt(this,a,s,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=ft(function(a,s=0){return x(this,a,s,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(a,s,u,m){if(a=+a,s>>>=0,!m){const B=Math.pow(2,8*u-1);S(this,a,s,u,B-1,-B)}let h=0,g=1,O=0;for(this[s]=255&a;++h<u&&(g*=256);)a<0&&0===O&&0!==this[s+h-1]&&(O=1),this[s+h]=(a/g>>0)-O&255;return s+u},p.prototype.writeIntBE=function(a,s,u,m){if(a=+a,s>>>=0,!m){const B=Math.pow(2,8*u-1);S(this,a,s,u,B-1,-B)}let h=u-1,g=1,O=0;for(this[s+h]=255&a;--h>=0&&(g*=256);)a<0&&0===O&&0!==this[s+h+1]&&(O=1),this[s+h]=(a/g>>0)-O&255;return s+u},p.prototype.writeInt8=function(a,s,u){return a=+a,s>>>=0,u||S(this,a,s,1,127,-128),a<0&&(a=255+a+1),this[s]=255&a,s+1},p.prototype.writeInt16LE=function(a,s,u){return a=+a,s>>>=0,u||S(this,a,s,2,32767,-32768),this[s]=255&a,this[s+1]=a>>>8,s+2},p.prototype.writeInt16BE=function(a,s,u){return a=+a,s>>>=0,u||S(this,a,s,2,32767,-32768),this[s]=a>>>8,this[s+1]=255&a,s+2},p.prototype.writeInt32LE=function(a,s,u){return a=+a,s>>>=0,u||S(this,a,s,4,2147483647,-2147483648),this[s]=255&a,this[s+1]=a>>>8,this[s+2]=a>>>16,this[s+3]=a>>>24,s+4},p.prototype.writeInt32BE=function(a,s,u){return a=+a,s>>>=0,u||S(this,a,s,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[s]=a>>>24,this[s+1]=a>>>16,this[s+2]=a>>>8,this[s+3]=255&a,s+4},p.prototype.writeBigInt64LE=ft(function(a,s=0){return nt(this,a,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=ft(function(a,s=0){return x(this,a,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(a,s,u){return rt(this,a,s,!0,u)},p.prototype.writeFloatBE=function(a,s,u){return rt(this,a,s,!1,u)},p.prototype.writeDoubleLE=function(a,s,u){return k(this,a,s,!0,u)},p.prototype.writeDoubleBE=function(a,s,u){return k(this,a,s,!1,u)},p.prototype.copy=function(a,s,u,m){if(!p.isBuffer(a))throw new TypeError("argument should be a Buffer");if(u||(u=0),!m&&0!==m&&(m=this.length),s>=a.length&&(s=a.length),s||(s=0),m>0&&m<u&&(m=u),m===u||0===a.length||0===this.length)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),a.length-s<m-u&&(m=a.length-s+u);const h=m-u;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(s,u,m):Uint8Array.prototype.set.call(a,this.subarray(u,m),s),h},p.prototype.fill=function(a,s,u,m){if("string"==typeof a){if("string"==typeof s?(m=s,s=0,u=this.length):"string"==typeof u&&(m=u,u=this.length),void 0!==m&&"string"!=typeof m)throw new TypeError("encoding must be a string");if("string"==typeof m&&!p.isEncoding(m))throw new TypeError("Unknown encoding: "+m);if(1===a.length){const g=a.charCodeAt(0);("utf8"===m&&g<128||"latin1"===m)&&(a=g)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(s<0||this.length<s||this.length<u)throw new RangeError("Out of range index");if(u<=s)return this;let h;if(s>>>=0,u=void 0===u?this.length:u>>>0,a||(a=0),"number"==typeof a)for(h=s;h<u;++h)this[h]=a;else{const g=p.isBuffer(a)?a:p.from(a,m),O=g.length;if(0===O)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(h=0;h<u-s;++h)this[h+s]=g[h%O]}return this};const j={};function dt(c,a,s){j[c]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,delete this.name}get code(){return c}set code(m){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:m,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}function qt(c){let a="",s=c.length;const u="-"===c[0]?1:0;for(;s>=u+4;s-=3)a=`_${c.slice(s-3,s)}${a}`;return`${c.slice(0,s)}${a}`}function mt(c,a,s,u,m,h){if(c>s||c<a){const g="bigint"==typeof a?"n":"";let O;throw O=h>3?0===a||a===BigInt(0)?`>= 0${g} and < 2${g} ** ${8*(h+1)}${g}`:`>= -(2${g} ** ${8*(h+1)-1}${g}) and < 2 ** ${8*(h+1)-1}${g}`:`>= ${a}${g} and <= ${s}${g}`,new j.ERR_OUT_OF_RANGE("value",O,c)}!function X(c,a,s){G(a,"offset"),(void 0===c[a]||void 0===c[a+s])&&Q(a,c.length-(s+1))}(u,m,h)}function G(c,a){if("number"!=typeof c)throw new j.ERR_INVALID_ARG_TYPE(a,"number",c)}function Q(c,a,s){throw Math.floor(c)!==c?(G(c,s),new j.ERR_OUT_OF_RANGE(s||"offset","an integer",c)):a<0?new j.ERR_BUFFER_OUT_OF_BOUNDS:new j.ERR_OUT_OF_RANGE(s||"offset",`>= ${s?1:0} and <= ${a}`,c)}dt("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),dt("ERR_INVALID_ARG_TYPE",function(c,a){return`The "${c}" argument must be of type number. Received type ${typeof a}`},TypeError),dt("ERR_OUT_OF_RANGE",function(c,a,s){let u=`The value of "${c}" is out of range.`,m=s;return Number.isInteger(s)&&Math.abs(s)>2**32?m=qt(String(s)):"bigint"==typeof s&&(m=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(m=qt(m)),m+="n"),u+=` It must be ${a}. Received ${m}`,u},RangeError);const tt=/[^+/0-9A-Za-z-_]/g;function pt(c,a){let s;a=a||1/0;const u=c.length;let m=null;const h=[];for(let g=0;g<u;++g){if(s=c.charCodeAt(g),s>55295&&s<57344){if(!m){if(s>56319){(a-=3)>-1&&h.push(239,191,189);continue}if(g+1===u){(a-=3)>-1&&h.push(239,191,189);continue}m=s;continue}if(s<56320){(a-=3)>-1&&h.push(239,191,189),m=s;continue}s=65536+(m-55296<<10|s-56320)}else m&&(a-=3)>-1&&h.push(239,191,189);if(m=null,s<128){if((a-=1)<0)break;h.push(s)}else if(s<2048){if((a-=2)<0)break;h.push(s>>6|192,63&s|128)}else if(s<65536){if((a-=3)<0)break;h.push(s>>12|224,s>>6&63|128,63&s|128)}else{if(!(s<1114112))throw new Error("Invalid code point");if((a-=4)<0)break;h.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}}return h}function Xt(c){return Z.toByteArray(function wt(c){if((c=(c=c.split("=")[0]).trim().replace(tt,"")).length<2)return"";for(;c.length%4!=0;)c+="=";return c}(c))}function Nt(c,a,s,u){let m;for(m=0;m<u&&!(m+s>=a.length||m>=c.length);++m)a[m+s]=c[m];return m}function st(c,a){return c instanceof a||null!=c&&null!=c.constructor&&null!=c.constructor.name&&c.constructor.name===a.name}function Et(c){return c!=c}const me=function(){const c="0123456789abcdef",a=new Array(256);for(let s=0;s<16;++s){const u=16*s;for(let m=0;m<16;++m)a[u+m]=c[s]+c[m]}return a}();function ft(c){return typeof BigInt>"u"?pe:c}function pe(){throw new Error("BigInt not supported")}},8461:(ie,it)=>{it.read=function(f,_,Z,d,R){var N,t,D=8*R-d-1,p=(1<<D)-1,V=p>>1,I=-7,T=Z?R-1:0,K=Z?-1:1,b=f[_+T];for(T+=K,N=b&(1<<-I)-1,b>>=-I,I+=D;I>0;N=256*N+f[_+T],T+=K,I-=8);for(t=N&(1<<-I)-1,N>>=-I,I+=d;I>0;t=256*t+f[_+T],T+=K,I-=8);if(0===N)N=1-V;else{if(N===p)return t?NaN:1/0*(b?-1:1);t+=Math.pow(2,d),N-=V}return(b?-1:1)*t*Math.pow(2,N-d)},it.write=function(f,_,Z,d,R,N){var t,D,p,V=8*N-R-1,I=(1<<V)-1,T=I>>1,K=23===R?Math.pow(2,-24)-Math.pow(2,-77):0,b=d?0:N-1,A=d?1:-1,v=_<0||0===_&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(D=isNaN(_)?1:0,t=I):(t=Math.floor(Math.log(_)/Math.LN2),_*(p=Math.pow(2,-t))<1&&(t--,p*=2),(_+=t+T>=1?K/p:K*Math.pow(2,1-T))*p>=2&&(t++,p/=2),t+T>=I?(D=0,t=I):t+T>=1?(D=(_*p-1)*Math.pow(2,R),t+=T):(D=_*Math.pow(2,T-1)*Math.pow(2,R),t=0));R>=8;f[Z+b]=255&D,b+=A,D/=256,R-=8);for(t=t<<R|D,V+=R;V>0;f[Z+b]=255&t,b+=A,t/=256,V-=8);f[Z+b-A]|=128*v}}}]);