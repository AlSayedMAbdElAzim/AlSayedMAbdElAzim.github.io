"use strict";(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[417],{8417:(Ee,B,n)=>{n.r(B),n.d(B,{PaymentsModule:()=>C,routes:()=>ie});var d=n(6895),L=n(2340),I=n(5783),v=n(8910),Y=n(2887),K=n(4459),e=n(4650),N=n(7298),k=n(1182),H=n(5412),D=n(9132),U=n(7465),M=n(5298),j=n(4165),V=n(8959),g=n(3081),w=n(7009),c=n(4006),T=n(4333),p=n(1576),b=n(4859),q=n(811),h=n(3546),Q=n(7392),E=n(4144),y=n(9549),G=n(4850),$=n(1572),W=n(266),X=n(1419);function oe(o,t){if(1&o){const a=e.EpF();e.TgZ(0,"mat-button-toggle",21),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.gotoNewDocument())}),e.TgZ(1,"mat-icon"),e._uU(2,"note_add"),e.qZA()()}}const se=function(o){return["/payments/receivable-add/",o]};function le(o,t){if(1&o&&(e.TgZ(0,"a",27),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()),2&o){const a=e.oxw().$implicit;e.s9C("matTooltip",e.lcZ(1,2,"BTN.VIEW")),e.Q6J("routerLink",e.VKq(4,se,a.id))}}function ne(o,t){if(1&o){const a=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(a);const s=e.oxw().$implicit,l=e.oxw();return e.KtG(l.removeDocument(s.id))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()}2&o&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.REMOVE"))}function re(o,t){if(1&o&&(e.TgZ(0,"div",22)(1,"div",23),e._uU(2),e._UZ(3,"br"),e._uU(4),e.qZA(),e.TgZ(5,"div",23),e._uU(6),e.qZA(),e.TgZ(7,"div",23),e._uU(8),e.qZA(),e.TgZ(9,"div",23),e._uU(10),e.qZA(),e.TgZ(11,"div",23),e._uU(12),e.qZA(),e.TgZ(13,"div",23),e._uU(14),e.qZA(),e.TgZ(15,"div",23),e._uU(16),e.qZA(),e.TgZ(17,"div",23),e._uU(18),e.qZA(),e.TgZ(19,"div",23)(20,"div",24),e.YNc(21,le,4,6,"a",25),e.YNc(22,ne,4,3,"button",26),e.qZA()()()),2&o){const a=t.$implicit,i=e.oxw();e.Tol(i.statusColor[a.PDOValueInAccount]),e.xp6(2),e.Oqu(a.build_Name),e.xp6(2),e.Oqu(a.branch_ArbName),e.xp6(2),e.Oqu(a.unit_UnitNumber),e.xp6(2),e.hij(" ",a.customer_Name," "),e.xp6(2),e.hij(" ",a.PDODocDate," "),e.xp6(2),e.hij(" ",a.PDOValue," "),e.xp6(2),e.hij(" ",a.PDOPrintedCode," "),e.xp6(2),e.hij(" ",a.PDODocClassTypeDisplay," "),e.xp6(2),e.hij(" ",a.PDOEjarCode," "),e.xp6(3),e.Q6J("ngIf",i.can("view_onereceivable")),e.xp6(1),e.Q6J("ngIf",i.can("delete_onereceivable"))}}function ce(o,t){if(1&o){const a=e.EpF();e.TgZ(0,"div",29)(1,"div",30)(2,"mat-card",31)(3,"pagination-controls",32),e.NdJ("pageChange",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.onPageChanged(s))}),e.qZA()()()()}}function ue(o,t){1&o&&(e.TgZ(0,"div",33),e._UZ(1,"mat-spinner",34),e.qZA())}const de=function(o,t){return{itemsPerPage:o,currentPage:t}};class Z{constructor(t,a,i,s,l,r,u,m,_,f,S){this.transferService=t,this.appSettings=a,this.dialog=i,this.paymentService=s,this.router=l,this.global=r,this.localStore=u,this.settingService=m,this.contractService=_,this.translateService=f,this.snackBar=S,this.statusColor={T:"make-white",F:"make-gold"},this.curCOMId=L.N.comid,this.account=new I.n,this.count=4,this.userPerm=[],this.editReceivableDocCodeStatus=(new K.$).getEditReceivableDocCodeStatus(),this.editCode=!0,this.settings=this.appSettings.settings}ngOnInit(){if(this.securityForApp=(new K.$).getSecurityType(),this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.getParamValue(this.curCOMId,this.account.periorty,this.editReceivableDocCodeStatus),this.prepareMsgLanguage(),this.getDocuments()}else this.router.navigate(["/sign-in"])}getParamValue(t,a,i){this.settingService.getValueForCode(t,a,i).subscribe(s=>{i==this.editReceivableDocCodeStatus&&(this.editReceivableDocCodeValue=s[0].APAValue)},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getDocuments(){this.documentsAll=null,this.curUserData.is_superuser?this.paymentService.getAllReceivableDocuments(this.curCOMId,this.account.periorty).subscribe(t=>this.documentsAll=t):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.paymentService.getAllReceivableDocumentsPerBranch(this.curCOMId,this.account.periorty,this.curUserData.branch_KeyField).subscribe(t=>this.documentsAll=t),"D"==this.securityForApp&&this.paymentService.getAllReceivableDocumentsPerEmp(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(t=>this.documentsAll=t))}removeDocument(t){this.dialog.open(Y.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(i=>{i&&(this.paymentService.getOneDocs(t).subscribe(s=>{null!=s.installment_KeyField&&(this.oneDocValue=s.PDOValue,this.contractService.getOneInstallment(s.installment_KeyField).subscribe(l=>{this.curInstallmentValue=l.INSValue,this.curInstallmentPayedValue=l.INSPayedValue,null==this.curInstallmentValue&&(this.curInstallmentValue=0),null==this.curInstallmentPayedValue&&(this.curInstallmentPayedValue=0),this.manageInstallmetPayedValue(s.installment_KeyField,this.curInstallmentValue,this.curInstallmentPayedValue,this.oneDocValue)}))}),this.paymentService.deleteDocument(t).subscribe(s=>this.getDocuments()))})}manageInstallmetPayedValue(t,a,i,s){null==i&&(i=0),null==s&&(s=0),null==a&&(a=0);let l=+i-+s;l<=0&&(l=0),this.insStatus=0==l?"N":"T";let r={id:t,INSStatus:this.insStatus,INSPayedValue:l};console.log("===installData:: "+r),this.contractService.editInstallments(r).subscribe(u=>{console.log("==installment after Update:: "+u)},u=>{console.log(u)})}onPageChanged(t){this.page=t,this.getDocuments(),window.scrollTo(0,0)}gotoNewDocument(){this.transferService.setMessage({editReceivableDocCode:this.editReceivableDocCodeValue}),this.router.navigate(["/payments/receivable-add/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(t=>{this.deletedTitleMsg=t})}}Z.\u0275fac=function(t){return new(t||Z)(e.Y36(N.y),e.Y36(k.d),e.Y36(H.uw),e.Y36(v.c),e.Y36(D.F0),e.Y36(U.U),e.Y36(M.C),e.Y36(j.g),e.Y36(V.W),e.Y36(g.sK),e.Y36(w.ux))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["app-receivable-doc-list"]],features:[e._Bn([v.c])],decls:68,vars:46,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",3,"class",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),e.YNc(4,oe,3,0,"mat-button-toggle",4),e.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),e._uU(7,"search"),e.qZA()()()(),e.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),e.NdJ("ngModelChange",function(s){return a.searchText=s}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),e._uU(17,"view_list"),e.qZA()(),e.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),e._uU(20,"view_module"),e.qZA()()()()(),e._UZ(21,"mat-divider"),e.TgZ(22,"mat-card")(23,"div",14)(24,"h2"),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e._UZ(27,"mat-divider"),e.TgZ(28,"div",15)(29,"div",16)(30,"div",17)(31,"h3"),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",17)(35,"h3"),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",17)(39,"h3"),e._uU(40),e.ALo(41,"translate"),e.qZA()(),e.TgZ(42,"div",17)(43,"h3"),e._uU(44),e.ALo(45,"translate"),e.qZA()(),e.TgZ(46,"div",17)(47,"h3"),e._uU(48),e.ALo(49,"translate"),e.qZA()(),e.TgZ(50,"div",17)(51,"h3"),e._uU(52),e.ALo(53,"translate"),e.qZA()(),e.TgZ(54,"div",17)(55,"h3"),e._uU(56),e.ALo(57,"translate"),e.qZA()(),e.TgZ(58,"div",17)(59,"h3"),e._uU(60),e.ALo(61,"translate"),e.qZA()(),e._UZ(62,"div",17),e.qZA(),e.YNc(63,re,23,13,"div",18),e.ALo(64,"paginate"),e.ALo(65,"PayDocumentsSearchPipe"),e.qZA()(),e.YNc(66,ce,4,0,"div",19),e.YNc(67,ue,2,0,"div",20)),2&t){const i=e.MAs(3);e.xp6(4),e.Q6J("ngIf",a.can("add_onereceivable")),e.xp6(4),e.ekj("show","search"==i.value),e.xp6(2),e.s9C("placeholder",e.lcZ(11,17,"HTML.SEARCH_PayDocument")),e.Q6J("ngModel",a.searchText),e.xp6(15),e.Oqu(e.lcZ(26,19,"HTML.ReceivableDoc_List")),e.xp6(7),e.hij(" ",e.lcZ(33,21,"HTML.BUILDING")," "),e.xp6(4),e.hij(" ",e.lcZ(37,23,"HTML.UnitNumber")," "),e.xp6(4),e.hij(" ",e.lcZ(41,25,"HTML.TENANT")," "),e.xp6(4),e.hij(" ",e.lcZ(45,27,"HTML.DocDate")," "),e.xp6(4),e.hij(" ",e.lcZ(49,29,"HTML.DocValue")," "),e.xp6(4),e.hij(" ",e.lcZ(53,31,"HTML.DocPrintedNo")," "),e.xp6(4),e.hij(" ",e.lcZ(57,33,"HTML.DocClassType")," "),e.xp6(4),e.hij(" ",e.lcZ(61,35,"HTML.PayDocEjarCode")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(64,37,e.xi3(65,40,a.documentsAll,a.searchText),e.WLB(43,de,a.count,a.page))),e.xp6(3),e.Q6J("ngIf",a.documentsAll),e.xp6(1),e.Q6J("ngIf",!a.documentsAll)}},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.On,c.F,T.LS,d.sg,d.O5,D.rH,p.xw,p.Wh,p.yH,b.Tq,b.nh,q.A9,q.Yi,h.a8,Q.Hw,E.Nt,y.KE,G.d,$.Ou,W.gM,T._s,X.dg,g.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}table{width:100%}.make-gold{background-color:#fbea96}.make-white{background-color:#fff}\n"],encapsulation:2});class R{}var z=n(6381),ee=n(5726),pe=n(4613),te=n(3238),F=n(9602),ae=n(4385),O=n(8796);function me(o,t){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.ADD")))}function he(o,t){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function De(o,t){if(1&o&&(e.TgZ(0,"ng-option",11),e._uU(1),e.qZA()),2&o){const a=t.$implicit;e.Q6J("value",a.id),e.xp6(1),e.hij(" ",a.CUSName,"")}}function ge(o,t){if(1&o&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&o){const a=t.$implicit;e.Q6J("value",a.id),e.xp6(1),e.hij(" ",a.BACAccountNumber," ")}}function ye(o,t){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.SAVE")))}function _e(o,t){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function fe(o,t){if(1&o&&(e.TgZ(0,"div",40)(1,"button",41),e.YNc(2,ye,3,3,"span",1),e.YNc(3,_e,3,3,"span",1),e.qZA()()),2&o){const a=e.oxw();e.xp6(1),e.Q6J("disabled",!a.docData_Form.valid),e.xp6(1),e.Q6J("ngIf",!a.payDocForDisplay.id),e.xp6(1),e.Q6J("ngIf",a.payDocForDisplay.id)}}class P{constructor(t,a,i,s,l,r,u,m,_,f,S,J,we,qe){this.transferService=t,this.activatedRoute=a,this.localStore=i,this._companyService=s,this.global=l,this.router=r,this.snackBar=u,this.docsService=m,this.tenantsService=_,this.contractService=f,this.translateService=S,this.fb=J,this.dataServiceTransfer=we,this._formBuilder=qe,this.curCOMId=L.N.comid,this.account=new I.n,this.editCode=!0,this.userPerm=[],this.AllBankAccountsForOwner=[],this.curDocValue=0,this.curDocPayedValue=0,this.curInsuranceValue=0,this.curSeekingValue=0,this.AllNotPayedInstallments=[],this.AllTenants=[],this.transferedData=this.dataServiceTransfer.getData()}ngOnInit(){if(this.transferService.getMessage.subscribe(a=>{this.editCode="YES"==a.editReceivableDocCode.toUpperCase(),console.log("---2222 this.editCode:: "+this.editCode)}),this.userSUb=this.global.user.subscribe(a=>{this.account=a}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let a=0;a<this.curUserPermissions.length;a++)this.userPerm[a]=this.curUserPermissions[a].codename;var t=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==t.is_employee,this.isAdmin=t.is_superuser,this.isOwner="T"==t.is_owner,this.getMaxCodeForPayment(this.curCOMId,this.account.periorty),this.getTenants(),this.docData_Form=this.fb.group({id:null,PDOCode:{value:null,disabled:!this.editCode},PDOValue:{value:null,disabled:this.id},PDODocDate:null,PDODocType:"R",PDODocClassType:"A",PDOPayType:"E",PDOPayDate:null,PDOPrintedCode:null,PDODocSecondPerson:null,PDONotes:null,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,installment_KeyField:null,customer_KeyField:null,bankAccount_KeyField:null,PDOEjarCode:null,PDOReferenceCode:null,customer_code:null,PDOInstallmentCode:null}),this.isEmployee&&(this.docData_Form.controls.PDOReferenceCode.setValidators([c.kI.required]),this.docData_Form.controls.PDOReferenceCode.updateValueAndValidity()),(this.isAdmin||this.isOwner)&&(this.docData_Form.controls.PDOReferenceCode.clearValidators(),this.docData_Form.controls.PDOReferenceCode.updateValueAndValidity()),this.sub=this.activatedRoute.params.subscribe(a=>{this.transferedData?(this.fillForm_FromCustomerDebit(),this.readCustumer(this.transferedData.customer_KeyField),this.payDocForDisplay=new R):a.id?(this.id=+a.id,this.getDocById(this.id)):this.payDocForDisplay=new R})}else this.router.navigate(["/sign-in"])}getBankAccountsPerOwner(t,a,i){this.contractService.getAllAccountsForOwner(t,a,i).subscribe(s=>{this.AllBankAccountsForOwner=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0628\u0646\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxCodeForPayment(t,a){this.docsService.getMaxReceivableCode(t,a).subscribe(i=>{this.maxPaymentCode=i.max,this.id||this.docData_Form.patchValue({PDOCode:this.maxPaymentCode})})}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getDocById(t){this.docsService.getOneDocs(t).subscribe(a=>{this.fillForm(a),this.payDocForDisplay=a})}fillForm(t){console.log("-----contract.PDODocType:: "+t.PDODocType),console.log("-----contract.PDOPayType:: "+t.PDOPayType),null!=t.PDODocDate&&(this.s_docDate=t.PDODocDate),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,t.owner_KeyField),this.docData_Form.patchValue({id:t.id,contract_KeyField:t.contract_KeyField,branch_KeyField:t.branch_KeyField,owner_KeyField:t.owner_KeyField,build_KeyField:t.build_KeyField,unit_KeyField:t.unit_KeyField,installment_KeyField:t.installment_KeyField,bankAccount_KeyField:t.bankAccount_KeyField,customer_KeyField:t.customer_KeyField,PDOCode:t.PDOCode,PDOValue:t.PDOValue,PDODocType:t.PDODocType,PDODocDate:t.PDODocDate,PDOPayType:t.PDOPayType,PDOPayDate:t.PDOPayDate,PDODocClassType:t.PDODocClassType,PDOPrintedCode:t.PDOPrintedCode,PDODocSecondPerson:t.PDODocSecondPerson,PDONotes:t.PDONotes,PDOEjarCode:t.PDOEjarCode,PDOReferenceCode:t.PDOReferenceCode,PDOInstallmentCode:t.PDOInstallmentCode})}fillForm_FromCustomerDebit(){console.log("---this.transferedData.INSCode:: "+this.transferedData.INSCode),this.curDocValue=this.transferedData.INSValue,this.curDocPayedValue=this.transferedData.INSPayedValue,null==this.curDocValue&&(this.curDocValue=0),null==this.curDocPayedValue&&(this.curDocPayedValue=0),console.log("---this.transferedData.Name::"+this.transferedData.customer_Name),console.log("---this.transferedData.id::"+this.transferedData.id),console.log("---this.transferedData.Name::"+this.transferedData.customer_Name),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,this.transferedData.owner_KeyField),this.docData_Form.patchValue({customer_KeyField:this.transferedData.customer_KeyField,PDODocSecondPerson:this.transferedData.customer_Name,customer_code:this.transferedData.customer_Code,contract_KeyField:this.transferedData.contract_KeyField,branch_KeyField:this.transferedData.branch_KeyField,build_KeyField:this.transferedData.build_KeyField,unit_KeyField:this.transferedData.unit_KeyField,owner_KeyField:this.transferedData.owner_KeyField,installment_KeyField:this.transferedData.id,PDONotes:this.transferedData.INSNotes,PDOValue:this.curDocValue-this.curDocPayedValue,PDOInstallmentCode:this.transferedData.INSCode})}searchByCode(t){console.log("---Search event:: "+t),this.tenantsService.getCustomerPerCode(this.curCOMId,this.account.periorty,+t).subscribe(a=>{a.length>0?(console.log("---id:: "+a[0].id),this.docData_Form.patchValue({customer_KeyField:a[0].id}),this.readCustumer(a[0].id)):(console.log("---Not---"),this.docData_Form.patchValue({customer_KeyField:null}))},a=>{console.log("----not found tenant----")})}readCustumer(t){console.log("====Selected readCustumer:: "+t),this.tenantsService.getOneCustomer(t).subscribe(a=>{console.log("==tenantName:: "+a.CUSName),console.log("==current_contract:: "+a.current_contract),this.docData_Form.patchValue({customer_KeyField:a.id,PDODocSecondPerson:a.CUSName,customer_code:a.CUSCode})}),this.getCustomerInstallmentsNotPayed(this.curCOMId,this.account.periorty,t)}getCustomerInstallmentsNotPayed(t,a,i){let s=0,l=this.docData_Form.value.PDODocClassType;console.log("first docClassType:: "+l),"A"==l?(console.log("A docClassType:: "+l),this.contractService.getInstallmentsPerCustomer_Payed(t,a,i,"F").subscribe(r=>{this.AllNotPayedInstallments=r,this.curOwnerId=r[0].owner_KeyField,this.curContract=r[0].contract_KeyField,this.curBranch=r[0].branch_KeyField,this.curBuild=r[0].build_KeyField,this.curUnit=r[0].unit_KeyField,this.curInstallment=+r[0].id,console.log("this.curInstallment:: "+this.curInstallment),console.log("responseInstallments[0][id]:: "+r[0].id),this.curDocValue=r[0].INSValue,this.curDocPayedValue=r[0].INSPayedValue,null==this.curDocValue&&(this.curDocValue=0),null==this.curDocPayedValue&&(this.curDocPayedValue=0),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,this.curOwnerId),this.docData_Form.patchValue({contract_KeyField:this.curContract,branch_KeyField:this.curBranch,build_KeyField:this.curBuild,unit_KeyField:this.curUnit,owner_KeyField:this.curOwnerId,installment_KeyField:this.curInstallment,PDONotes:r[0].INSNotes,PDOValue:this.curDocValue-this.curDocPayedValue,PDOInstallmentCode:r[0].INSCode})},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0623\u0642\u0633\u0627\u0637","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):"D"==l||"E"==l?(console.log("D or E docClassType:: "+l),this.contractService.getNewContractsPerCustomer(t,a,i).subscribe(r=>{this.curOwnerId=r[0].owner_KeyField,this.curContract=r[0].id,this.curBranch=r[0].branch_KeyField,this.curBuild=r[0].build_KeyField,this.curUnit=r[0].unit_KeyField,this.curInsuranceValue=r[0].RCOInsuranceValue,this.curSeekingValue=r[0].RCOSeekingValue,null==this.curInsuranceValue&&(this.curInsuranceValue=0),null==this.curSeekingValue&&(this.curSeekingValue=0),"E"==l?s=this.curInsuranceValue:"D"==l&&(s=this.curSeekingValue),this.getBankAccountsPerOwner(this.curCOMId,this.account.periorty,this.curOwnerId),this.docData_Form.patchValue({contract_KeyField:this.curContract,branch_KeyField:this.curBranch,build_KeyField:this.curBuild,unit_KeyField:this.curUnit,owner_KeyField:this.curOwnerId,installment_KeyField:null,PDOValue:s,PDOInstallmentCode:null})},r=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062a\u0623\u0645\u064a\u0646 \u0648\u0627\u0644\u0633\u0639\u064a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):console.log("last docClassType:: "+l)}getTenants(){this.AllTenants=null,this.tenantsService.getCustomers(this.curCOMId,this.account.periorty).subscribe(t=>{this.AllTenants=t})}mappingFormValue_ToPayDocClass(){const t=new d.uU("en-GB").transform(this.docData_Form.value.PDODocDate,"dd/MM/yyyy"),a=new d.uU("en-GB").transform(this.docData_Form.value.PDOPayDate,"dd/MM/yyyy");this.payDocForDisplay.id=this.docData_Form.value.id,this.payDocForDisplay.contract_KeyField=this.docData_Form.value.contract_KeyField,this.payDocForDisplay.branch_KeyField=this.docData_Form.value.branch_KeyField,this.payDocForDisplay.owner_KeyField=this.docData_Form.value.owner_KeyField,this.payDocForDisplay.build_KeyField=this.docData_Form.value.build_KeyField,this.payDocForDisplay.unit_KeyField=this.docData_Form.value.unit_KeyField,this.payDocForDisplay.installment_KeyField=this.docData_Form.value.installment_KeyField,this.payDocForDisplay.customer_KeyField=this.docData_Form.value.customer_KeyField,this.payDocForDisplay.bankAccount_KeyField=this.docData_Form.value.bankAccount_KeyField,null!=this.docData_Form.value.PDODocDate&&(this.payDocForDisplay.PDODocDate=t),this.payDocForDisplay.PDOPayType=this.docData_Form.value.PDOPayType,null!=this.docData_Form.value.PDOPayDate&&(this.payDocForDisplay.PDOPayDate=a),this.payDocForDisplay.PDOCode=this.docData_Form.value.PDOCode,this.payDocForDisplay.PDOValue=this.docData_Form.value.PDOValue,this.payDocForDisplay.PDODocType=this.docData_Form.value.PDODocType,this.payDocForDisplay.PDODocClassType=this.docData_Form.value.PDODocClassType,this.payDocForDisplay.PDOPrintedCode=this.docData_Form.value.PDOPrintedCode,this.payDocForDisplay.PDODocSecondPerson=this.docData_Form.value.PDODocSecondPerson,this.payDocForDisplay.PDONotes=this.docData_Form.value.PDONotes,this.payDocForDisplay.PDOEjarCode=this.docData_Form.value.PDOEjarCode,this.payDocForDisplay.PDOReferenceCode=this.docData_Form.value.PDOReferenceCode,this.payDocForDisplay.PDOInstallmentCode=this.docData_Form.value.PDOInstallmentCode}manageInstallmetPayedValue(t,a,i,s,l){null==i&&(i=0),null==s&&(s=0),null==a&&(a=0);let r=+i+ +s;console.log("===installmentId:: "+t),console.log("===installmentPayedValue:: "+i),console.log("===docPayedValue:: "+s),console.log("===totalPayed:: "+r),this.insStatus=r<a?"T":"P";let u={id:t,INSStatus:this.insStatus,INSPayedValue:r,INSPayDate:l,INSPersonPayName:this.payDocForDisplay.PDODocSecondPerson};console.log("===installData:: "+u),console.log("===installData.id:: "+u.id),this.contractService.editInstallments(u).subscribe(m=>{console.log("==installment after Update:: "+m)},m=>{console.log(m)})}saveEditDocData(t){const a=new d.uU("en-GB").transform(this.docData_Form.value.PDODocDate,"dd/MM/yyyy");this.mappingFormValue_ToPayDocClass(),t?this.docsService.editDoc(this.payDocForDisplay).subscribe(i=>{let s={contract_KeyField:i.contract_KeyField,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:i.installment_KeyField,customer_KeyField:i.customer_KeyField,TSTCreditValue:i.PDOValue,TSTDebitValue:0,TSTDate:i.PDODocDate,TSTDescription:"\u0642\u064a\u0645\u0629 \u0633\u0646\u062f \u0627\u0644\u0642\u0628\u0636 \u0631\u0642\u0645 "+i.PDOCode,TSTSubject:"RECEIVABLE",TSTSubjectID:i.id};console.log("---------------------------------"),console.log("***res.id:: "+i.id),console.log("---------------------------------"),this.contractService.getStatementsIDPerSubjectID(this.curCOMId,this.account.periorty,"RECEIVABLE",i.id).subscribe(l=>{console.log("statement[0][id]:: "+l[0].id),this.tenantStatementID=l[0].id,console.log("this.tenantStatementID:: "+this.tenantStatementID),this.contractService.deleteStatementForStatementID(this.tenantStatementID).subscribe(r=>{this.contractService.addStatement(s).subscribe(u=>{})})}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["payments/receivable-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):this.docsService.addDoc(this.payDocForDisplay).subscribe(i=>{this.contractService.addStatement({contract_KeyField:i.contract_KeyField,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:i.installment_KeyField,customer_KeyField:i.customer_KeyField,TSTCreditValue:i.PDOValue,TSTDebitValue:0,TSTDate:i.PDODocDate,TSTDescription:"\u0642\u064a\u0645\u0629 \u0633\u0646\u062f \u0627\u0644\u0642\u0628\u0636 \u0631\u0642\u0645 "+i.PDOCode+" ( "+i.PDODocClassTypeDisplay+" )",TSTSubject:"RECEIVABLE",TSTSubjectID:i.id}).subscribe(r=>{console.log("addStatement Done")},r=>{console.log("addStatement Error:: "+r)}),"A"==this.docData_Form.value.PDODocClassType&&this.manageInstallmetPayedValue(this.curInstallment,this.curDocValue,this.curDocPayedValue,this.payDocForDisplay.PDOValue,a),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["payments/receivable-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t})}}P.\u0275fac=function(t){return new(t||P)(e.Y36(N.y),e.Y36(D.gz),e.Y36(M.C),e.Y36(z.J),e.Y36(U.U),e.Y36(D.F0),e.Y36(w.ux),e.Y36(v.c),e.Y36(ee.v),e.Y36(V.W),e.Y36(g.sK),e.Y36(c.qu),e.Y36(pe.j),e.Y36(c.qu))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-receivable-doc-dialog"]],decls:158,vars:115,consts:[[1,"p-2"],[4,"ngIf"],[1,"pt-3"],["autocomplete","off","fxLayout","row wrap",3,"formGroup","ngSubmit"],["fxFlex","100","fxFlex.gt-sm","40",1,"px-2"],["width","400","height","300","id","campanyLogo",3,"src"],["fxFlex","100","fxFlex.gt-sm","60",1,"px-2"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","28",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","PDODocClassType","id","classitypeOpSel",3,"placeholder"],[3,"value"],["fxFlex","100","fxFlex.gt-sm","17",1,"px-1"],["matInput","","formControlName","customer_code",3,"keyup.enter"],["tenCode",""],["fxFlex","100","fxFlex.gt-sm","40",1,"px-1"],["appearance","outline","formControlName","customer_KeyField",1,"w-100",3,"placeholder","change"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","15",1,"px-1"],["formControlName","PDOPayType","id","selfpaytypeOpSel",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","25",1,"px-1"],["matInput","","formControlName","PDODocDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["pdoDocDate",""],["matInput","","formControlName","PDOCode"],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["matInput","","formControlName","PDOValue","required",""],["matInput","","formControlName","PDOPrintedCode"],["matInput","","formControlName","PDOReferenceCode"],["matInput","","formControlName","PDOInstallmentCode"],["matInput","","formControlName","PDOEjarCode"],["matInput","","formControlName","PDODocSecondPerson","required",""],["matInput","","formControlName","PDOPayDate",3,"matDatepicker"],["pdoPayDate",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["formControlName","bankAccount_KeyField","id","bnkaccOpSel",3,"placeholder"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","PDONotes","rows","3"],["fxFlex","100","class","mt-2 text-center w-100",4,"ngIf"],["fxFlex","100",1,"mt-2","text-center","w-100"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(t,a){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"h1"),e.YNc(5,me,3,3,"span",1),e.YNc(6,he,3,3,"span",1),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"mat-card-content",2)(10,"form",3),e.NdJ("ngSubmit",function(){return a.saveEditDocData(a.payDocForDisplay.id)}),e.TgZ(11,"div",4),e._UZ(12,"img",5),e.qZA(),e.TgZ(13,"div",6)(14,"div",7)(15,"div",8)(16,"mat-form-field",9)(17,"mat-label"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"mat-select",10),e.ALo(21,"translate"),e.TgZ(22,"mat-option",11),e._uU(23,"-"),e.qZA(),e.TgZ(24,"mat-option",11),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"mat-option",11),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"mat-option",11),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"mat-option",11),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"mat-option",11),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"mat-option",11),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"mat-option",11),e._uU(43),e.ALo(44,"translate"),e.qZA()()()(),e.TgZ(45,"div",12)(46,"mat-form-field",9)(47,"mat-label"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"input",13,14),e.NdJ("keyup.enter",function(){e.CHM(i);const l=e.MAs(51);return e.KtG(a.searchByCode(l.value))}),e.qZA()()(),e.TgZ(52,"div",15)(53,"label"),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.TgZ(56,"ng-select",16),e.NdJ("change",function(l){return a.readCustumer(l)}),e.ALo(57,"translate"),e.YNc(58,De,2,2,"ng-option",17),e.qZA()(),e.TgZ(59,"div",18)(60,"mat-form-field",9)(61,"mat-label"),e._uU(62),e.ALo(63,"translate"),e.qZA(),e.TgZ(64,"mat-select",19),e.ALo(65,"translate"),e.TgZ(66,"mat-option",11),e._uU(67,"-"),e.qZA(),e.TgZ(68,"mat-option",11),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.TgZ(71,"mat-option",11),e._uU(72),e.ALo(73,"translate"),e.qZA(),e.TgZ(74,"mat-option",11),e._uU(75),e.ALo(76,"translate"),e.qZA(),e.TgZ(77,"mat-option",11),e._uU(78),e.ALo(79,"translate"),e.qZA()()()(),e.TgZ(80,"div",20)(81,"mat-form-field",9)(82,"mat-label"),e._uU(83),e.ALo(84,"translate"),e.qZA(),e._UZ(85,"input",21)(86,"mat-datepicker-toggle",22)(87,"mat-datepicker",null,23),e.qZA()(),e.TgZ(89,"div",18)(90,"mat-form-field",9)(91,"mat-label"),e._uU(92),e.ALo(93,"translate"),e.qZA(),e._UZ(94,"input",24),e.qZA()(),e.TgZ(95,"div",25)(96,"mat-form-field",9)(97,"mat-label"),e._uU(98),e.ALo(99,"translate"),e.qZA(),e._UZ(100,"input",26),e.qZA()(),e.TgZ(101,"div",25)(102,"mat-form-field",9)(103,"mat-label"),e._uU(104),e.ALo(105,"translate"),e.qZA(),e._UZ(106,"input",27),e.qZA()(),e.TgZ(107,"div",25)(108,"mat-form-field",9)(109,"mat-label"),e._uU(110),e.ALo(111,"translate"),e.qZA(),e._UZ(112,"input",28),e.qZA()(),e.TgZ(113,"div",18)(114,"mat-form-field",9)(115,"mat-label"),e._uU(116),e.ALo(117,"translate"),e.qZA(),e._UZ(118,"input",29),e.qZA()(),e.TgZ(119,"div",25)(120,"mat-form-field",9)(121,"mat-label"),e._uU(122),e.ALo(123,"translate"),e.qZA(),e._UZ(124,"input",30),e.qZA()(),e.TgZ(125,"div",15)(126,"mat-form-field",9)(127,"mat-label"),e._uU(128),e.ALo(129,"translate"),e.qZA(),e._UZ(130,"input",31),e.qZA()(),e.TgZ(131,"div",20)(132,"mat-form-field",9)(133,"mat-label"),e._uU(134),e.ALo(135,"translate"),e.qZA(),e._UZ(136,"input",32)(137,"mat-datepicker-toggle",22)(138,"mat-datepicker",null,33),e.qZA()(),e.TgZ(140,"div",34)(141,"div",35)(142,"mat-form-field",9)(143,"mat-label"),e._uU(144),e.ALo(145,"translate"),e.qZA(),e.TgZ(146,"mat-select",36),e.ALo(147,"translate"),e.TgZ(148,"mat-option",11),e._uU(149,"-"),e.qZA(),e.YNc(150,ge,2,2,"mat-option",17),e.qZA()()()(),e.TgZ(151,"div",37)(152,"mat-form-field",9)(153,"mat-label"),e._uU(154),e.ALo(155,"translate"),e.qZA(),e._UZ(156,"textarea",38),e.qZA()(),e.YNc(157,fe,4,3,"div",39),e.qZA()()()()()()}if(2&t){const i=e.MAs(88),s=e.MAs(139);e.xp6(5),e.Q6J("ngIf",!a.payDocForDisplay.id),e.xp6(1),e.Q6J("ngIf",a.payDocForDisplay.id),e.xp6(1),e.hij(" ",e.lcZ(8,53,"HTML.ReceivableDoc"),""),e.xp6(3),e.Q6J("formGroup",a.docData_Form),e.xp6(2),e.Q6J("src","assets/images/paymentDocs/receivable.png",e.LSH),e.xp6(6),e.Oqu(e.lcZ(19,55,"HTML.DocClassType")),e.xp6(2),e.s9C("placeholder",e.lcZ(21,57,"HTML.DocClassType")),e.xp6(4),e.Q6J("value","A"),e.xp6(1),e.Oqu(e.lcZ(26,59,"OPTIONS.ReceivableDocInstallment")),e.xp6(2),e.Q6J("value","B"),e.xp6(1),e.Oqu(e.lcZ(29,61,"OPTIONS.ReceivableDocService")),e.xp6(2),e.Q6J("value","C"),e.xp6(1),e.Oqu(e.lcZ(32,63,"OPTIONS.ReceivableDocDeposit")),e.xp6(2),e.Q6J("value","D"),e.xp6(1),e.Oqu(e.lcZ(35,65,"OPTIONS.ReceivableDocArrest")),e.xp6(2),e.Q6J("value","E"),e.xp6(1),e.Oqu(e.lcZ(38,67,"OPTIONS.ReceivableDocInsurance")),e.xp6(2),e.Q6J("value","F"),e.xp6(1),e.Oqu(e.lcZ(41,69,"OPTIONS.ReceivableDocExpense")),e.xp6(2),e.Q6J("value","G"),e.xp6(1),e.Oqu(e.lcZ(44,71,"OPTIONS.ReceivableDocClearance")),e.xp6(5),e.Oqu(e.lcZ(49,73,"HTML.CODE_TENANT")),e.xp6(6),e.hij(" ",e.lcZ(55,75,"HTML.TENANT"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(57,77,"HTML.TENANT")),e.xp6(2),e.Q6J("ngForOf",a.AllTenants),e.xp6(4),e.Oqu(e.lcZ(63,79,"HTML.DocPayType")),e.xp6(2),e.s9C("placeholder",e.lcZ(65,81,"HTML.DocPayType")),e.xp6(4),e.Q6J("value","C"),e.xp6(1),e.Oqu(e.lcZ(70,83,"OPTIONS.Cash")),e.xp6(2),e.Q6J("value","B"),e.xp6(1),e.Oqu(e.lcZ(73,85,"OPTIONS.Bank")),e.xp6(2),e.Q6J("value","E"),e.xp6(1),e.Oqu(e.lcZ(76,87,"OPTIONS.Ejar")),e.xp6(2),e.Q6J("value","T"),e.xp6(1),e.Oqu(e.lcZ(79,89,"OPTIONS.Transfere")),e.xp6(5),e.Oqu(e.lcZ(84,91,"HTML.DocDate")),e.xp6(2),e.Q6J("matDatepicker",i),e.xp6(1),e.Q6J("for",i),e.xp6(6),e.Oqu(e.lcZ(93,93,"HTML.CODE_DOCUMENT")),e.xp6(6),e.Oqu(e.lcZ(99,95,"HTML.DocValue")),e.xp6(6),e.Oqu(e.lcZ(105,97,"HTML.DocPrintedNo")),e.xp6(6),e.Oqu(e.lcZ(111,99,"HTML.DocReferenceCode")),e.xp6(6),e.Oqu(e.lcZ(117,101,"HTML.InstallmentCode")),e.xp6(6),e.Oqu(e.lcZ(123,103,"HTML.PayDocEjarCode")),e.xp6(6),e.Oqu(e.lcZ(129,105,"HTML.DocSecondPart_ReceivableDoc")),e.xp6(6),e.Oqu(e.lcZ(135,107,"HTML.DocPayDate")),e.xp6(2),e.Q6J("matDatepicker",s),e.xp6(1),e.Q6J("for",s),e.xp6(7),e.hij(" ",e.lcZ(145,109,"HTML.BankAccounts"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(147,111,"HTML.BankAccounts")),e.xp6(4),e.Q6J("ngForOf",a.AllBankAccountsForOwner),e.xp6(4),e.Oqu(e.lcZ(155,113,"HTML.Notes")),e.xp6(3),e.Q6J("ngIf",a.payDocForDisplay.id&&a.can("change_onereceivable")||!a.payDocForDisplay.id&&a.can("add_onereceivable"))}},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.Q7,d.sg,d.O5,c.sg,c.u,p.xw,p.Wh,p.yH,te.ey,b.lW,h.a8,h.dn,h.dk,h.n5,F.Mq,F.hl,F.nW,E.Nt,y.KE,y.hX,y.R9,ae.gD,O.w9,O.jq,g.X$]});var ve=n(529),Te=n(8865),be=n(9045);function Fe(o,t){if(1&o){const a=e.EpF();e.TgZ(0,"mat-button-toggle",21),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.gotoNewDocument())}),e.TgZ(1,"mat-icon"),e._uU(2,"note_add"),e.qZA()()}}const Pe=function(o){return["/payments/payable-add/",o]};function xe(o,t){if(1&o&&(e.TgZ(0,"a",27),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()),2&o){const a=e.oxw().$implicit;e.s9C("matTooltip",e.lcZ(1,2,"BTN.VIEW")),e.Q6J("routerLink",e.VKq(4,Pe,a.id))}}function Ce(o,t){if(1&o){const a=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(a);const s=e.oxw().$implicit,l=e.oxw();return e.KtG(l.removeDocument(s.id))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()}2&o&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.REMOVE"))}function Ze(o,t){if(1&o&&(e.TgZ(0,"div",22)(1,"div",23),e._uU(2),e.qZA(),e.TgZ(3,"div",23),e._uU(4),e.qZA(),e.TgZ(5,"div",23),e._uU(6),e.qZA(),e.TgZ(7,"div",23),e._uU(8),e.qZA(),e.TgZ(9,"div",23),e._uU(10),e.qZA(),e.TgZ(11,"div",23)(12,"div",24),e.YNc(13,xe,4,6,"a",25),e.YNc(14,Ce,4,3,"button",26),e.qZA()()()),2&o){const a=t.$implicit,i=e.oxw();e.xp6(2),e.hij(" ",a.customer_Name," "),e.xp6(2),e.hij(" ",a.PDODocDate," "),e.xp6(2),e.hij(" ",a.PDOValue," "),e.xp6(2),e.hij(" ",a.PDODocClassTypeDisplay," "),e.xp6(2),e.hij(" ",a.PDOPrintedCode," "),e.xp6(3),e.Q6J("ngIf",i.can("view_onepayable")),e.xp6(1),e.Q6J("ngIf",i.can("delete_onepayable"))}}function Oe(o,t){if(1&o){const a=e.EpF();e.TgZ(0,"div",29)(1,"div",30)(2,"mat-card",31)(3,"pagination-controls",32),e.NdJ("pageChange",function(s){e.CHM(a);const l=e.oxw();return e.KtG(l.onPageChanged(s))}),e.qZA()()()()}}function Ae(o,t){1&o&&(e.TgZ(0,"div",33),e._UZ(1,"mat-spinner",34),e.qZA())}const Se=function(o,t){return{itemsPerPage:o,currentPage:t}};class A{constructor(t,a,i,s,l,r,u,m,_,f){this.transferService=t,this.appSettings=a,this.dialog=i,this.paymentService=s,this.router=l,this.global=r,this.localStore=u,this.settingService=m,this.translateService=_,this.snackBar=f,this.curCOMId=L.N.comid,this.account=new I.n,this.count=4,this.userPerm=[],this.editPayableDocCodeStatus=(new K.$).getEditPayableDocCodeStatus(),this.editCode=!0,this.settings=this.appSettings.settings}ngOnInit(){if(this.securityForApp=(new K.$).getSecurityType(),this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.getParamValue(this.curCOMId,this.account.periorty,this.editPayableDocCodeStatus),this.prepareMsgLanguage(),this.getDocuments()}else this.router.navigate(["/sign-in"])}getParamValue(t,a,i){this.settingService.getValueForCode(t,a,i).subscribe(s=>{i==this.editPayableDocCodeStatus&&(this.editPayableDocCodeValue=s[0].APAValue)},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getDocuments(){this.documentsAll=null,this.curUserData.is_superuser?this.paymentService.getAllPayableDocuments(this.curCOMId,this.account.periorty).subscribe(t=>this.documentsAll=t):1==this.curUserData.periorty&&("N"==this.securityForApp&&this.paymentService.getAllPayableDocumentsPerBranch(this.curCOMId,this.account.periorty,this.curUserData.branch_KeyField).subscribe(t=>this.documentsAll=t),"D"==this.securityForApp&&this.paymentService.getAllPayableDocumentsPerEmp(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(t=>this.documentsAll=t))}removeDocument(t){this.dialog.open(Y.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(i=>{i&&this.paymentService.deleteDocument(t).subscribe(s=>this.getDocuments())})}onPageChanged(t){this.page=t,this.getDocuments(),window.scrollTo(0,0)}gotoNewDocument(){this.transferService.setMessage({editPayableDocCode:this.editPayableDocCodeValue}),this.router.navigate(["/payments/payable-add/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(t=>{this.deletedTitleMsg=t})}}function Le(o,t){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.ADD")))}function Ie(o,t){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function Ke(o,t){if(1&o&&(e.TgZ(0,"ng-option",11),e._uU(1),e.qZA()),2&o){const a=t.$implicit;e.Q6J("value",a.id),e.xp6(1),e.hij(" ",a.CUSName,"")}}function Ne(o,t){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.SAVE")))}function Ue(o,t){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function Me(o,t){if(1&o&&(e.TgZ(0,"div",32)(1,"button",33),e.YNc(2,Ne,3,3,"span",1),e.YNc(3,Ue,3,3,"span",1),e.qZA()()),2&o){const a=e.oxw();e.xp6(1),e.Q6J("disabled",!a.docData_Form.valid),e.xp6(1),e.Q6J("ngIf",!a.payDocForDisplay.id),e.xp6(1),e.Q6J("ngIf",a.payDocForDisplay.id)}}A.\u0275fac=function(t){return new(t||A)(e.Y36(N.y),e.Y36(k.d),e.Y36(H.uw),e.Y36(v.c),e.Y36(D.F0),e.Y36(U.U),e.Y36(M.C),e.Y36(j.g),e.Y36(g.sK),e.Y36(w.ux))},A.\u0275cmp=e.Xpm({type:A,selectors:[["app-payable-doc-list"]],features:[e._Bn([v.c])],decls:56,vars:37,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),e.YNc(4,Fe,3,0,"mat-button-toggle",4),e.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),e._uU(7,"search"),e.qZA()()()(),e.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),e.NdJ("ngModelChange",function(s){return a.searchText=s}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),e._uU(17,"view_list"),e.qZA()(),e.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),e._uU(20,"view_module"),e.qZA()()()()(),e._UZ(21,"mat-divider"),e.TgZ(22,"mat-card")(23,"div",14)(24,"h2"),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e._UZ(27,"mat-divider"),e.TgZ(28,"div",15)(29,"div",16)(30,"div",17)(31,"h3"),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",17)(35,"h3"),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",17)(39,"h3"),e._uU(40),e.ALo(41,"translate"),e.qZA()(),e.TgZ(42,"div",17)(43,"h3"),e._uU(44),e.ALo(45,"translate"),e.qZA()(),e.TgZ(46,"div",17)(47,"h3"),e._uU(48),e.ALo(49,"translate"),e.qZA()(),e._UZ(50,"div",17),e.qZA(),e.YNc(51,Ze,15,7,"div",18),e.ALo(52,"paginate"),e.ALo(53,"PayDocumentsSearchPipe"),e.qZA()(),e.YNc(54,Oe,4,0,"div",19),e.YNc(55,Ae,2,0,"div",20)),2&t){const i=e.MAs(3);e.xp6(4),e.Q6J("ngIf",a.can("add_onepayable")),e.xp6(4),e.ekj("show","search"==i.value),e.xp6(2),e.s9C("placeholder",e.lcZ(11,14,"HTML.SEARCH_PayDocument")),e.Q6J("ngModel",a.searchText),e.xp6(15),e.Oqu(e.lcZ(26,16,"HTML.PayableDoc_List")),e.xp6(7),e.hij(" ",e.lcZ(33,18,"HTML.TENANT")," "),e.xp6(4),e.hij(" ",e.lcZ(37,20,"HTML.DocDate")," "),e.xp6(4),e.hij(" ",e.lcZ(41,22,"HTML.DocValue")," "),e.xp6(4),e.hij(" ",e.lcZ(45,24,"HTML.DocClassType")," "),e.xp6(4),e.hij(" ",e.lcZ(49,26,"HTML.DocPrintedNo")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(52,28,e.xi3(53,31,a.documentsAll,a.searchText),e.WLB(34,Se,a.count,a.page))),e.xp6(3),e.Q6J("ngIf",a.documentsAll),e.xp6(1),e.Q6J("ngIf",!a.documentsAll)}},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.On,c.F,T.LS,d.sg,d.O5,D.rH,p.xw,p.Wh,p.yH,b.Tq,b.nh,q.A9,q.Yi,h.a8,Q.Hw,E.Nt,y.KE,G.d,$.Ou,W.gM,T._s,X.dg,g.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});class x{constructor(t,a,i,s,l,r,u,m,_,f,S,J){this.transferService=t,this.activatedRoute=a,this.localStore=i,this._companyService=s,this.global=l,this.router=r,this.snackBar=u,this.docsService=m,this.tenantsService=_,this.contractService=f,this.translateService=S,this.fb=J,this.curCOMId=L.N.comid,this.account=new I.n,this.editCode=!0,this.userPerm=[],this.AllTenants=[]}ngOnInit(){if(this.transferService.getMessage.subscribe(t=>{this.editCode="YES"==t.editPayableDocCode.toUpperCase(),console.log("---2222 this.editCode:: "+this.editCode)}),this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.getMaxCodeForPayment(this.curCOMId,this.account.periorty),this.getTenants(),this.sub=this.activatedRoute.params.subscribe(t=>{t.id?(this.id=+t.id,this.getDocById(this.id)):this.payDocForDisplay=new R}),this.docData_Form=this.fb.group({id:null,PDOCode:{value:null,disabled:!this.editCode},PDOValue:{value:null,disabled:this.id},PDODocDate:null,PDODocType:"P",PDODocClassType:"H",PDOPrintedCode:null,PDODocSecondPerson:null,PDONotes:null,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,installment_KeyField:null,customer_KeyField:null,customer_code:null})}else this.router.navigate(["/sign-in"])}getMaxCodeForPayment(t,a){this.docsService.getMaxPayableCode(t,a).subscribe(i=>{this.maxPaymentCode=i.max,this.id||this.docData_Form.patchValue({PDOCode:this.maxPaymentCode})})}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getDocById(t){this.docsService.getOneDocs(t).subscribe(a=>{this.fillForm(a),this.payDocForDisplay=a})}fillForm(t){null!=t.PDODocDate&&(this.s_docDate=t.PDODocDate),this.docData_Form.patchValue({id:t.id,contract_KeyField:t.contract_KeyField,branch_KeyField:t.branch_KeyField,owner_KeyField:t.owner_KeyField,build_KeyField:t.build_KeyField,unit_KeyField:t.unit_KeyField,installment_KeyField:t.installment_KeyField,customer_KeyField:t.customer_KeyField,PDOCode:t.PDOCode,PDOValue:t.PDOValue,PDODocType:t.PDODocType,PDODocDate:t.PDODocDate,PDODocClassType:t.PDODocClassType,PDOPrintedCode:t.PDOPrintedCode,PDODocSecondPerson:t.PDODocSecondPerson,PDONotes:t.PDONotes})}onEnter(t){console.log("---Search event:: "+t)}searchByCode(t){console.log("---Search event:: "+t),this.tenantsService.getCustomerPerCode(this.curCOMId,this.account.periorty,+t).subscribe(a=>{a.length>0?(console.log("---id:: "+a[0].id),this.docData_Form.patchValue({customer_KeyField:a[0].id}),this.readCustumer(a[0].id)):(console.log("---Not---"),this.docData_Form.patchValue({customer_KeyField:null}))},a=>{console.log("----not found tenant----")})}readCustumer(t){this.tenantsService.getOneCustomer(t).subscribe(a=>{this.docData_Form.patchValue({PDODocSecondPerson:a.CUSName,contract_KeyField:a.current_contract,branch_KeyField:a.current_branch,build_KeyField:a.current_building,unit_KeyField:a.current_unit,owner_KeyField:a.current_owner,customer_code:a.CUSCode})})}getTenants(){this.AllTenants=null,this.tenantsService.getCustomers(this.curCOMId,this.account.periorty).subscribe(t=>this.AllTenants=t)}mappingFormValue_ToPayDocClass(){const t=new d.uU("en-GB").transform(this.docData_Form.value.PDODocDate,"dd/MM/yyyy");this.payDocForDisplay.id=this.docData_Form.value.id,this.payDocForDisplay.contract_KeyField=this.docData_Form.value.contract_KeyField,this.payDocForDisplay.branch_KeyField=this.docData_Form.value.branch_KeyField,this.payDocForDisplay.owner_KeyField=this.docData_Form.value.owner_KeyField,this.payDocForDisplay.build_KeyField=this.docData_Form.value.build_KeyField,this.payDocForDisplay.unit_KeyField=this.docData_Form.value.unit_KeyField,this.payDocForDisplay.installment_KeyField=this.docData_Form.value.installment_KeyField,this.payDocForDisplay.customer_KeyField=this.docData_Form.value.customer_KeyField,null!=this.docData_Form.value.PDODocDate&&(this.payDocForDisplay.PDODocDate=t),this.payDocForDisplay.PDOCode=this.docData_Form.value.PDOCode,this.payDocForDisplay.PDOValue=this.docData_Form.value.PDOValue,this.payDocForDisplay.PDODocType=this.docData_Form.value.PDODocType,this.payDocForDisplay.PDODocClassType=this.docData_Form.value.PDODocClassType,this.payDocForDisplay.PDOPrintedCode=this.docData_Form.value.PDOPrintedCode,this.payDocForDisplay.PDODocSecondPerson=this.docData_Form.value.PDODocSecondPerson,this.payDocForDisplay.PDONotes=this.docData_Form.value.PDONotes}saveEditDocData(t){this.mappingFormValue_ToPayDocClass(),t?this.docsService.editDoc(this.payDocForDisplay).subscribe(a=>{let i={contract_KeyField:a.contract_KeyField,branch_KeyField:a.branch_KeyField,owner_KeyField:a.owner_KeyField,build_KeyField:a.build_KeyField,unit_KeyField:a.unit_KeyField,installment_KeyField:null,customer_KeyField:a.customer_KeyField,TSTCreditValue:0,TSTDebitValue:a.PDOValue,TSTDate:a.PDODocDate,TSTDescription:"\u0642\u064a\u0645\u0629 \u0633\u0646\u062f \u0627\u0644\u0635\u0631\u0641 \u0631\u0642\u0645 "+a.PDOCode,TSTSubject:"PAYABLE",TSTSubjectID:a.ID};this.contractService.deleteStatementForSubjectID(this.curCOMId,this.account.periorty,"PAYABLE",a.id).subscribe(s=>{this.contractService.addStatement(i).subscribe(l=>{})}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["payments/payable-list"])},a=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):this.docsService.addDoc(this.payDocForDisplay).subscribe(a=>{this.contractService.addStatement({contract_KeyField:a.contract_KeyField,branch_KeyField:a.branch_KeyField,owner_KeyField:a.owner_KeyField,build_KeyField:a.build_KeyField,unit_KeyField:a.unit_KeyField,installment_KeyField:null,customer_KeyField:a.customer_KeyField,TSTCreditValue:0,TSTDebitValue:a.PDOValue,TSTDate:a.PDODocDate,TSTDescription:"\u0642\u064a\u0645\u0629 \u0633\u0646\u062f \u0627\u0644\u0635\u0631\u0641 \u0631\u0642\u0645 "+a.PDOCode,TSTSubject:"PAYABLE",TSTSubjectID:a.ID}).subscribe(s=>{}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["payments/payable-list"])},a=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t})}}x.\u0275fac=function(t){return new(t||x)(e.Y36(N.y),e.Y36(D.gz),e.Y36(M.C),e.Y36(z.J),e.Y36(U.U),e.Y36(D.F0),e.Y36(w.ux),e.Y36(v.c),e.Y36(ee.v),e.Y36(V.W),e.Y36(g.sK),e.Y36(c.qu))},x.\u0275cmp=e.Xpm({type:x,selectors:[["app-payable-doc-dialog"]],decls:91,vars:60,consts:[[1,"p-2"],[4,"ngIf"],[1,"pt-3"],["autocomplete","off","fxLayout","row wrap",3,"formGroup","ngSubmit"],["fxFlex","100","fxFlex.gt-sm","40",1,"px-2"],["width","400","height","300","id","campanyLogo",3,"src"],["fxFlex","100","fxFlex.gt-sm","60",1,"px-2"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","28",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","PDODocClassType","id","classitypeOpSel",3,"placeholder"],[3,"value"],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["matInput","","formControlName","customer_code",3,"keyup.enter"],["tenCode",""],["fxFlex","100","fxFlex.gt-sm","52",1,"px-1"],["appearance","outline","formControlName","customer_KeyField",1,"w-100",3,"placeholder","keyup.enter","change"],["box",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","25",1,"px-1"],["matInput","","formControlName","PDODocDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["pdoDocDate",""],["matInput","","formControlName","PDOCode"],["fxFlex","100","fxFlex.gt-sm","30",1,"px-1"],["matInput","","formControlName","PDOValue","required",""],["matInput","","formControlName","PDOPrintedCode"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","PDODocSecondPerson","required",""],["fxFlex","100",1,"px-1"],["matInput","","formControlName","PDONotes","rows","3"],["fxFlex","100","class","mt-2 text-center w-100",4,"ngIf"],["fxFlex","100",1,"mt-2","text-center","w-100"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(t,a){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"h1"),e.YNc(5,Le,3,3,"span",1),e.YNc(6,Ie,3,3,"span",1),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"mat-card-content",2)(10,"form",3),e.NdJ("ngSubmit",function(){return a.saveEditDocData(a.payDocForDisplay.id)}),e.TgZ(11,"div",4),e._UZ(12,"img",5),e.qZA(),e.TgZ(13,"div",6)(14,"div",7)(15,"div",8)(16,"mat-form-field",9)(17,"mat-label"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"mat-select",10),e.ALo(21,"translate"),e.TgZ(22,"mat-option",11),e._uU(23,"-"),e.qZA(),e.TgZ(24,"mat-option",11),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"mat-option",11),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"mat-option",11),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"mat-option",11),e._uU(34),e.ALo(35,"translate"),e.qZA()()()(),e.TgZ(36,"div",12)(37,"mat-form-field",9)(38,"mat-label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"input",13,14),e.NdJ("keyup.enter",function(){e.CHM(i);const l=e.MAs(42);return e.KtG(a.searchByCode(l.value))}),e.qZA()()(),e.TgZ(43,"div",15)(44,"label"),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"ng-select",16,17),e.NdJ("keyup.enter",function(){e.CHM(i);const l=e.MAs(48);return e.KtG(a.onEnter(l.value))})("change",function(l){return a.readCustumer(l)}),e.ALo(49,"translate"),e.YNc(50,Ke,2,2,"ng-option",18),e.qZA()(),e.TgZ(51,"div",19)(52,"mat-form-field",9)(53,"mat-label"),e._uU(54),e.ALo(55,"translate"),e.qZA(),e._UZ(56,"input",20)(57,"mat-datepicker-toggle",21)(58,"mat-datepicker",null,22),e.qZA()(),e.TgZ(60,"div",12)(61,"mat-form-field",9)(62,"mat-label"),e._uU(63),e.ALo(64,"translate"),e.qZA(),e._UZ(65,"input",23),e.qZA()(),e.TgZ(66,"div",24)(67,"mat-form-field",9)(68,"mat-label"),e._uU(69),e.ALo(70,"translate"),e.qZA(),e._UZ(71,"input",25),e.qZA()(),e.TgZ(72,"div",19)(73,"mat-form-field",9)(74,"mat-label"),e._uU(75),e.ALo(76,"translate"),e.qZA(),e._UZ(77,"input",26),e.qZA()(),e.TgZ(78,"div",27)(79,"mat-form-field",9)(80,"mat-label"),e._uU(81),e.ALo(82,"translate"),e.qZA(),e._UZ(83,"input",28),e.qZA()(),e.TgZ(84,"div",29)(85,"mat-form-field",9)(86,"mat-label"),e._uU(87),e.ALo(88,"translate"),e.qZA(),e._UZ(89,"textarea",30),e.qZA()(),e.YNc(90,Me,4,3,"div",31),e.qZA()()()()()()}if(2&t){const i=e.MAs(59);e.xp6(5),e.Q6J("ngIf",!a.payDocForDisplay.id),e.xp6(1),e.Q6J("ngIf",a.payDocForDisplay.id),e.xp6(1),e.hij(" ",e.lcZ(8,28,"HTML.PayableDoc"),""),e.xp6(3),e.Q6J("formGroup",a.docData_Form),e.xp6(2),e.Q6J("src","assets/images/paymentDocs/payable.png",e.LSH),e.xp6(6),e.Oqu(e.lcZ(19,30,"HTML.DocClassType")),e.xp6(2),e.s9C("placeholder",e.lcZ(21,32,"HTML.DocClassType")),e.xp6(4),e.Q6J("value","H"),e.xp6(1),e.Oqu(e.lcZ(26,34,"OPTIONS.PayableDocGeneral")),e.xp6(2),e.Q6J("value","I"),e.xp6(1),e.Oqu(e.lcZ(29,36,"OPTIONS.PayableDocArrestReturn")),e.xp6(2),e.Q6J("value","J"),e.xp6(1),e.Oqu(e.lcZ(32,38,"OPTIONS.PayableDocClearance")),e.xp6(2),e.Q6J("value","K"),e.xp6(1),e.Oqu(e.lcZ(35,40,"OPTIONS.PayableDocDepositReturn")),e.xp6(5),e.Oqu(e.lcZ(40,42,"HTML.CODE_TENANT")),e.xp6(6),e.hij(" ",e.lcZ(46,44,"HTML.TENANT"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(49,46,"HTML.TENANT")),e.xp6(3),e.Q6J("ngForOf",a.AllTenants),e.xp6(4),e.Oqu(e.lcZ(55,48,"HTML.DocDate")),e.xp6(2),e.Q6J("matDatepicker",i),e.xp6(1),e.Q6J("for",i),e.xp6(6),e.Oqu(e.lcZ(64,50,"HTML.CODE_DOCUMENT")),e.xp6(6),e.Oqu(e.lcZ(70,52,"HTML.DocValue")),e.xp6(6),e.Oqu(e.lcZ(76,54,"HTML.DocPrintedNo")),e.xp6(6),e.Oqu(e.lcZ(82,56,"HTML.DocSecondPart_PayableDoc")),e.xp6(6),e.Oqu(e.lcZ(88,58,"HTML.Notes")),e.xp6(3),e.Q6J("ngIf",a.payDocForDisplay.id&&a.can("change_onepayable")||!a.payDocForDisplay.id&&a.can("add_onepayable"))}},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.Q7,d.sg,d.O5,c.sg,c.u,p.xw,p.yH,te.ey,b.lW,h.a8,h.dn,h.dk,h.n5,F.Mq,F.hl,F.nW,E.Nt,y.KE,y.hX,y.R9,ae.gD,O.w9,O.jq,g.X$]});const ie=[{path:"",redirectTo:"receivable-list",pathMatch:"full"},{path:"receivable-list",component:Z,data:{breadcrumb:"ReceiptVouchers"}},{path:"receivable-add/:id",component:P,data:{breadcrumb:"EditReceiptVoucher"}},{path:"receivable-add",component:P,data:{breadcrumb:"AddReceiptVoucher"}},{path:"payable-list",component:A,data:{breadcrumb:"PaymentVouchers"}},{path:"payable-add/:id",component:x,data:{breadcrumb:"EditPaymentVoucher"}},{path:"payable-add",component:x,data:{breadcrumb:"AddPaymentVoucher"}}];class C{}C.\u0275fac=function(t){return new(t||C)},C.\u0275mod=e.oAB({type:C}),C.\u0275inj=e.cJS({imports:[ve.JF,c.u5,T.JX,be.D,d.ez,D.Bz.forChild(ie),c.UX,Te.m,T.JX,O.A0]})}}]);