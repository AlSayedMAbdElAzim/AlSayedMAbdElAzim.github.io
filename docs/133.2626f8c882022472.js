(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[133],{5133:(it,ie,f)=>{"use strict";f.r(ie),f.d(ie,{ContractsModule:()=>Me,routes:()=>wt});var _=f(6895),Z=f(5412),m=f(4006),R=f(8955),O=f(2340),e=f(4650),D=f(6002),p=f(5298),G=f(3705),I=f(7009),T=f(1576),K=f(3238),b=f(4859),A=f(4144),v=f(9549),E=f(4385),y=f(3081);function J(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"HTML.USERNAMEREQ")))}function $(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"MESSAGE.MinLength")))}function he(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"HTML.EmailREQ")))}function z(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"HTML.InvalidEmail")))}function Ce(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"HTML.FirstNameREQ")))}function Ge(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"MESSAGE.MinLength")))}function Qe(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"HTML.LastNameREQ")))}function nt(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"MESSAGE.MinLength")))}function ot(n,t){if(1&n&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.BRAArbName," ")}}function at(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Mobile is required"),e.qZA())}function rt(n,t){if(1&n&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.BUIName," ")}}function st(n,t){if(1&n&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.UNTUnitNumber," ")}}function lt(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"HTML.PasswordREQ")))}function je(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"MESSAGE.MinLength6")))}function $e(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"HTML.ConfirmPasswordREQ")))}function ct(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"HTML.MismatchPassword")))}function ut(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.onSave())}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const i=e.oxw();e.Q6J("mat-dialog-close",i.registerForm.value)("disabled",!i.registerForm.valid),e.xp6(2),e.Oqu(e.lcZ(3,3,"BTN.SAVE"))}}class ge{constructor(t,i,o,s,c,C,x){this.dialogRef=t,this.data=i,this.atlasService=o,this.localStore=s,this.unitsService=c,this.snackBar=C,this.fb=x,this.curCOMId=O.N.comid,this.userPerm=[],this.AllBranches=[],this.AllBuilding=[],this.AllUnitsForBuilding=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.curperiorty=this.data.periorty,this.registerForm=this.fb.group({username:["",m.kI.compose([m.kI.required,m.kI.minLength(3)])],first_name:["",m.kI.compose([m.kI.required,m.kI.minLength(2)])],last_name:["",m.kI.compose([m.kI.required,m.kI.minLength(2)])],email:["",m.kI.compose([m.kI.required,R.Le])],branch_KeyField:[null,m.kI.required],UserMobile:[null,m.kI.required],build_KeyField:[null,m.kI.required],unit_KeyField:[null,m.kI.required],is_customer:"T",password:["",m.kI.required],confirmPassword:["",m.kI.required]},{validator:(0,R.zi)("password","confirmPassword")}),this.getAllBranches(this.curCOMId,this.curperiorty)}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getAllBranches(t,i){this.atlasService.getAllBranch(t,i).subscribe(o=>{this.AllBranches=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(t){this.getBuildingPerBranch(this.curCOMId,this.curperiorty,t.value)}getBuildingPerBranch(t,i,o){this.unitsService.getBuildingsPerBranch(t,i,o).subscribe(s=>{this.AllBuilding=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(t){this.unitsService.getOneBuilding(t.value).subscribe(i=>{this.getUnitsPerBuilding(this.curCOMId,this.curperiorty,t.value,"E")},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuilding(t,i,o,s){this.unitsService.getAllUnitsPerBuilding(t,i,o,s).subscribe(c=>{this.AllUnitsForBuilding=c},c=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0644\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onSave(){console.log("===***Press Save button***==="),this.action="Post",this.registerForm.valid&&this.dialogRef.close({event:this.action,data:this.registerForm})}close(){console.log("===***Press Close button***==="),this.action="Cancel",this.dialogRef.close({event:this.action})}}ge.\u0275fac=function(t){return new(t||ge)(e.Y36(Z.so),e.Y36(Z.WI),e.Y36(D.Z),e.Y36(p.C),e.Y36(G.X),e.Y36(I.ux),e.Y36(m.QS))},ge.\u0275cmp=e.Xpm({type:ge,selectors:[["app-customers-dialog"]],decls:110,vars:81,consts:[["mat-dialog-title",""],[1,"user-form",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","username","required","",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","email","required","",3,"placeholder"],["matInput","","formControlName","first_name","required","",3,"placeholder"],["matInput","","formControlName","last_name","required","",3,"placeholder"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","UserMobile","required",""],["formControlName","build_KeyField","id","build_OneOpSel",3,"placeholder","selectionChange"],["formControlName","unit_KeyField","id","unit_OneOpSel",3,"placeholder"],["matInput","","formControlName","password","type","password","minlength","6","required","",3,"placeholder"],["matInput","","formControlName","confirmPassword","type","password","required","",3,"placeholder"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"input",7),e.ALo(13,"translate"),e.YNc(14,J,3,3,"mat-error",8),e.YNc(15,$,3,3,"mat-error",8),e.qZA()(),e.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"input",9),e.ALo(22,"translate"),e.YNc(23,he,3,3,"mat-error",8),e.YNc(24,z,3,3,"mat-error",8),e.qZA()()(),e.TgZ(25,"div",4)(26,"div",5)(27,"mat-form-field",6)(28,"mat-label"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"input",10),e.ALo(32,"translate"),e.YNc(33,Ce,3,3,"mat-error",8),e.YNc(34,Ge,3,3,"mat-error",8),e.qZA()(),e.TgZ(35,"div",5)(36,"mat-form-field",6)(37,"mat-label"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e._UZ(40,"input",11),e.ALo(41,"translate"),e.YNc(42,Qe,3,3,"mat-error",8),e.YNc(43,nt,3,3,"mat-error",8),e.qZA()()(),e.TgZ(44,"div",4)(45,"div",5)(46,"mat-form-field",6)(47,"mat-label"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"mat-select",12),e.NdJ("selectionChange",function(s){return i.getBuildings(s)}),e.ALo(51,"translate"),e.TgZ(52,"mat-option",13),e._uU(53,"-"),e.qZA(),e.YNc(54,ot,2,2,"mat-option",14),e.qZA()()(),e.TgZ(55,"div",5)(56,"mat-form-field",6)(57,"mat-label"),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"mat-hint"),e._uU(61,"966505602221"),e.qZA(),e._UZ(62,"input",15),e.YNc(63,at,2,0,"mat-error",8),e.qZA()()(),e.TgZ(64,"div",4)(65,"div",5)(66,"mat-form-field",6)(67,"mat-label"),e._uU(68),e.ALo(69,"translate"),e.qZA(),e.TgZ(70,"mat-select",16),e.NdJ("selectionChange",function(s){return i.readBuilding(s)}),e.ALo(71,"translate"),e.TgZ(72,"mat-option",13),e._uU(73,"-"),e.qZA(),e.YNc(74,rt,2,2,"mat-option",14),e.qZA()()(),e.TgZ(75,"div",5)(76,"mat-form-field",6)(77,"mat-label"),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"mat-select",17),e.ALo(81,"translate"),e.TgZ(82,"mat-option",13),e._uU(83,"-"),e.qZA(),e.YNc(84,st,2,2,"mat-option",14),e.qZA()()()(),e.TgZ(85,"div",4)(86,"div",5)(87,"mat-form-field",6)(88,"mat-label"),e._uU(89),e.ALo(90,"translate"),e.qZA(),e._UZ(91,"input",18),e.ALo(92,"translate"),e.YNc(93,lt,3,3,"mat-error",8),e.YNc(94,je,3,3,"mat-error",8),e.qZA()(),e.TgZ(95,"div",5)(96,"mat-form-field",6)(97,"mat-label"),e._uU(98),e.ALo(99,"translate"),e.qZA(),e._UZ(100,"input",19),e.ALo(101,"translate"),e.YNc(102,$e,3,3,"mat-error",8),e.YNc(103,ct,3,3,"mat-error",8),e.qZA()()()()(),e.TgZ(104,"div",20)(105,"div",4),e.YNc(106,ut,4,5,"button",21),e.TgZ(107,"button",22),e.NdJ("click",function(){return i.close()}),e._uU(108),e.ALo(109,"translate"),e.qZA()()()()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,39,"MESSAGE.RegisterMsg")),e.xp6(2),e.Q6J("formGroup",i.registerForm),e.xp6(7),e.Oqu(e.lcZ(11,41,"HTML.USERNAME")),e.xp6(2),e.s9C("placeholder",e.lcZ(13,43,"HTML.USERNAME")),e.xp6(2),e.Q6J("ngIf",null==i.registerForm.controls.username.errors?null:i.registerForm.controls.username.errors.required),e.xp6(1),e.Q6J("ngIf",i.registerForm.controls.username.hasError("minlength")),e.xp6(4),e.Oqu(e.lcZ(20,45,"HTML.EMAIL")),e.xp6(2),e.s9C("placeholder",e.lcZ(22,47,"HTML.EMAIL")),e.xp6(2),e.Q6J("ngIf",null==i.registerForm.controls.email.errors?null:i.registerForm.controls.email.errors.required),e.xp6(1),e.Q6J("ngIf",i.registerForm.controls.email.hasError("invalidEmail")),e.xp6(5),e.Oqu(e.lcZ(30,49,"HTML.FIRST_NAME")),e.xp6(2),e.s9C("placeholder",e.lcZ(32,51,"HTML.FIRST_NAME")),e.xp6(2),e.Q6J("ngIf",null==i.registerForm.controls.first_name.errors?null:i.registerForm.controls.first_name.errors.required),e.xp6(1),e.Q6J("ngIf",i.registerForm.controls.first_name.hasError("minlength")),e.xp6(4),e.Oqu(e.lcZ(39,53,"HTML.LAST_NAME")),e.xp6(2),e.s9C("placeholder",e.lcZ(41,55,"HTML.LAST_NAME")),e.xp6(2),e.Q6J("ngIf",null==i.registerForm.controls.last_name.errors?null:i.registerForm.controls.last_name.errors.required),e.xp6(1),e.Q6J("ngIf",i.registerForm.controls.last_name.hasError("minlength")),e.xp6(5),e.hij(" ",e.lcZ(49,57,"HTML.BRANCH"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(51,59,"HTML.BRANCH")),e.xp6(4),e.Q6J("ngForOf",i.AllBranches),e.xp6(4),e.Oqu(e.lcZ(59,61,"HTML.MOBILE")),e.xp6(5),e.Q6J("ngIf",null==i.registerForm.controls.UserMobile.errors?null:i.registerForm.controls.UserMobile.errors.required),e.xp6(5),e.hij(" ",e.lcZ(69,63,"HTML.BUILDING"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(71,65,"HTML.BUILDING")),e.xp6(4),e.Q6J("ngForOf",i.AllBuilding),e.xp6(4),e.hij(" ",e.lcZ(79,67,"HTML.UNIT"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(81,69,"HTML.UNIT")),e.xp6(4),e.Q6J("ngForOf",i.AllUnitsForBuilding),e.xp6(5),e.Oqu(e.lcZ(90,71,"HTML.PASSWORD")),e.xp6(2),e.s9C("placeholder",e.lcZ(92,73,"HTML.PASSWORD")),e.xp6(2),e.Q6J("ngIf",null==i.registerForm.controls.password.errors?null:i.registerForm.controls.password.errors.required),e.xp6(1),e.Q6J("ngIf",i.registerForm.controls.password.hasError("minlength")),e.xp6(4),e.Oqu(e.lcZ(99,75,"HTML.ConfirmPassword")),e.xp6(2),e.s9C("placeholder",e.lcZ(101,77,"HTML.ConfirmPassword")),e.xp6(2),e.Q6J("ngIf",null==i.registerForm.controls.confirmPassword.errors?null:i.registerForm.controls.confirmPassword.errors.required),e.xp6(1),e.Q6J("ngIf",i.registerForm.controls.confirmPassword.hasError("mismatchedPasswords")),e.xp6(3),e.Q6J("ngIf",i.can("add_tenant")),e.xp6(2),e.Oqu(e.lcZ(109,79,"BTN.CANCEL")))},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.wO,_.sg,_.O5,m.sg,m.u,T.xw,T.Wh,T.yH,K.ey,b.lW,Z.ZT,Z.uh,Z.xY,Z.H8,A.Nt,v.KE,v.hX,v.bx,v.TO,E.gD,y.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:280px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});class _e{}var ae=f(5783),L=f(5726),N=f(5521),ne=f(2887),w=f(4459),ue=f(7298),re=f(1182),k=f(9132),j=f(7465),de=f(4165),Ee=f(3071),X=f(4333),me=f(811),V=f(3546),Q=f(7392),ee=f(4850),we=f(1572),pe=f(266),Se=f(1419);function dt(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"mat-button-toggle",22),e.NdJ("click",function(){e.CHM(i);const s=e.oxw(2);return e.KtG(s.gotoNewTenantFullData())}),e.TgZ(1,"mat-icon"),e._uU(2,"person_add"),e.qZA()()}}function ze(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"mat-button-toggle-group",10,11),e.YNc(5,dt,3,0,"mat-button-toggle",12),e.TgZ(6,"mat-button-toggle",13)(7,"mat-icon"),e._uU(8,"search"),e.qZA()()()(),e.TgZ(9,"form",14)(10,"mat-form-field",15)(11,"input",16),e.NdJ("ngModelChange",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.searchText=s)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",17)(14,"mat-button-toggle-group",18,19)(16,"mat-button-toggle",20)(17,"mat-icon"),e._uU(18,"view_list"),e.qZA()(),e.TgZ(19,"mat-button-toggle",21)(20,"mat-icon"),e._uU(21,"view_module"),e.qZA()()()()()()}if(2&n){const i=e.MAs(4),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.can("add_tenant")),e.xp6(4),e.ekj("show","search"==i.value),e.xp6(2),e.s9C("placeholder",e.lcZ(12,5,"HTML.SEARCH_TENANT_AnyValue")),e.Q6J("ngModel",o.searchText)}}const Oe=function(n){return["/contracts/tenant-add/",n]};function se(n,t){if(1&n&&(e.TgZ(0,"a",29),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()),2&n){const i=e.oxw().$implicit;e.s9C("matTooltip",e.lcZ(1,2,"BTN.VIEW")),e.Q6J("routerLink",e.VKq(4,Oe,i.id))}}function qe(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.removeTenant(s.id,s.Userid))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.REMOVE"))}const mt=function(n){return["/contracts/statements-list/",n]};function fe(n,t){if(1&n&&(e.TgZ(0,"a",29),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"receipt"),e.qZA()()),2&n){const i=e.oxw().$implicit;e.s9C("matTooltip",e.lcZ(1,2,"BTN.Statements")),e.Q6J("routerLink",e.VKq(4,mt,i.id))}}const pt=function(n){return["/contracts/contract-list/",n]};function l(n,t){if(1&n&&(e.TgZ(0,"a",29),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"auto_stories"),e.qZA()()),2&n){const i=e.oxw().$implicit;e.s9C("matTooltip",e.lcZ(1,2,"BTN.ContractForTenant")),e.Q6J("routerLink",e.VKq(4,pt,i.id))}}function a(n,t){if(1&n&&(e.TgZ(0,"div",23)(1,"div",24),e._uU(2),e.qZA(),e.TgZ(3,"div",24),e._uU(4),e.qZA(),e.TgZ(5,"div",24),e._uU(6),e.qZA(),e.TgZ(7,"div",24),e._uU(8),e.qZA(),e.TgZ(9,"div",24),e._uU(10),e.qZA(),e.TgZ(11,"div",24),e._uU(12),e.qZA(),e.TgZ(13,"div",24)(14,"mat-icon",25),e._uU(15),e.qZA()(),e.TgZ(16,"div",24)(17,"div",26),e.YNc(18,se,4,6,"a",27),e.YNc(19,qe,4,3,"button",28),e.YNc(20,fe,4,6,"a",27),e.YNc(21,l,4,6,"a",27),e.qZA()()()),2&n){const i=t.$implicit,o=e.oxw();e.xp6(2),e.Oqu(i.CUSName),e.xp6(2),e.Oqu(i.CUSMobile),e.xp6(2),e.hij(" ",i.build_Name," "),e.xp6(2),e.hij(" ",i.unit_Name," "),e.xp6(2),e.hij(" ",i.job_Name," "),e.xp6(2),e.hij(" ",i.workplace_Name," "),e.xp6(3),e.Oqu("T"==i.CUSActive?"check_box":"check_box_outline_blank"),e.xp6(3),e.Q6J("ngIf",o.can("change_tenant")||o.can("view_onetenant")||0==o.account.periorty&&"T"!==o.account.userDataConfirmed),e.xp6(1),e.Q6J("ngIf",o.can("delete_tenant")),e.xp6(1),e.Q6J("ngIf",o.can("view_tenantstatements")),e.xp6(1),e.Q6J("ngIf",o.can("view_contractfortenant"))}}function r(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"mat-card",33)(3,"pagination-controls",34),e.NdJ("pageChange",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.onPageChanged(s))}),e.qZA()()()()}}function u(n,t){1&n&&(e.TgZ(0,"div",35),e._UZ(1,"mat-spinner",36),e.qZA())}const d=function(n,t){return{itemsPerPage:n,currentPage:t}};class h{constructor(t,i,o,s,c,C,x,U,M,F,W){this.transferService=t,this.appSettings=i,this.dialog=o,this.usersService=s,this.router=c,this.global=C,this.localStore=x,this.settingService=U,this.snackBar=M,this.translateService=F,this.userService=W,this.curTenant=new _e,this.curCOMId=O.N.comid,this.account=new ae.n,this.count=8,this.defaultCusImage=(new N.P).noImage,this.CusImageToUpload=null,this.userPerm=[],this.editTenantCodeStatus=(new w.$).getEditTenantCodeStatus(),this.editCode=!0,this.settings=this.appSettings.settings}handelCUSImgInput(t){this.CusImageToUpload=t.item(0);var i=new FileReader;i.onload=o=>{this.defaultCusImage=o.target.result},i.readAsDataURL(this.CusImageToUpload)}ngOnInit(){if(this.securityForApp=(new w.$).getSecurityType(),this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.getParamValue(this.curCOMId,this.account.periorty,this.editTenantCodeStatus),this.prepareMsgLanguage(),this.getTenants()}else this.router.navigate(["/sign-in"])}getParamValue(t,i,o){this.settingService.getValueForCode(t,i,o).subscribe(s=>{o==this.editTenantCodeStatus&&(this.editTenantCodeValue=s[0].APAValue)},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getTenants(){this.users=null,this.curUserData.is_superuser?this.usersService.getCustomerPerSelfType(this.curCOMId,this.account.periorty,"P").subscribe(t=>this.users=t):0==this.curUserData.periorty?this.usersService.getCustomerPerUserPerSelfType(this.curCOMId,this.account.periorty,this.curUserData.id,"P").subscribe(t=>this.users=t):("N"==this.securityForApp&&(this.curBranchID=this.curUserData.branch_KeyField??0,this.usersService.getCustomersPerBranchPerSelfType(this.curCOMId,this.account.periorty,this.curBranchID,"P").subscribe(t=>this.users=t)),"D"==this.securityForApp&&this.usersService.getCustomersPerEmployeePerSelfType(this.curCOMId,this.account.periorty,this.curUserData.id,"P").subscribe(t=>this.users=t))}addTenant(t){this.usersService.addOneCustomer(t).subscribe(i=>this.getTenants())}updateTenant(t){this.usersService.editCustomer(t,this.CusImageToUpload,this.CusImageToUpload,this.curUserData.is_employee).subscribe(i=>this.getTenants())}deleteTenant(t){this.dialog.open(ne.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(o=>{o&&this.usersService.deleteCustomer(t.id).subscribe(s=>this.getTenants())})}removeTenant(t,i){this.dialog.open(ne.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(s=>{s&&this.usersService.deleteCustomer(t).subscribe(c=>{this.userService.deleteOneUser(i).subscribe(C=>{}),this.getTenants()})})}onPageChanged(t){this.page=t,this.getTenants(),window.scrollTo(0,0)}gotoTenantDisplay(t){console.log("===**gotoTenantDisplay**=== "+t),this.router.navigate(["/contracts/tenant-add/"+t])}gotoNewTenantFullData(){this.transferService.setMessage({editTenantCode:this.editTenantCodeValue}),this.router.navigate(["/contracts/tenant-add/"])}gotoNewTenant(){this.dialog.open(ge,{data:{periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(i=>{console.log("=====result.event:: "+i.event),"Cancel"==i.event||"Post"==i.event&&this.userService.registerTenant_with_lastName(i.data).subscribe(o=>{console.log("TenantID:: "+o.id),this.getTenants(),this.snackBar.open(this.registeredMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.can("view_onetenant")&&this.gotoTenantDisplay(o.id)},o=>{console.log("error",o),this.snackBar.open(this.notRegisteredMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})})}openTenantDialog(t){this.dialog.open(ge,{data:t}).afterClosed().subscribe(o=>{o?(console.log("=====if user True:: =============="),console.log(o),this.curTenant=new _e,console.log(this.curTenant),this.fromUserToCustomer(o),console.log(this.curTenant),o.id?this.updateTenant(this.curTenant):this.addTenant(this.curTenant)):console.log("=====if user False:: ==============")})}fromUserToCustomer(t){this.curTenant.id=t.id,this.curTenant.RowDelete=t.settings.isDeleted?1:0,this.curTenant.CUSCode=t.code,this.curTenant.CUSPic=t.image,this.curTenant.CUSGender=t.profile.gender,console.log("====Date===="),console.log(t.profile.birthday),this.curTenant.CUSBirthDate=t.profile.birthday,this.curTenant.CUSMobile=t.mobile,this.curTenant.CUSEmail=t.contacts.email,this.curTenant.CUSActive=t.settings.isActive?"T":"F",this.curTenant.CUSAddress=t.contacts.address,this.curTenant.Country_CTTKeyField=t.contacts.country,this.curTenant.CUSusername=t.username,this.curTenant.CUSFirstName=t.firstname,this.curTenant.CUSLastName=t.lastname}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(t=>{this.deletedTitleMsg=t}),this.translateService.get("MESSAGE.REGISTERD").subscribe(t=>{this.registeredMsg=t}),this.translateService.get("MESSAGE.NOTREGISTERD").subscribe(t=>{this.notRegisteredMsg=t})}}h.\u0275fac=function(t){return new(t||h)(e.Y36(ue.y),e.Y36(re.d),e.Y36(Z.uw),e.Y36(L.v),e.Y36(k.F0),e.Y36(j.U),e.Y36(p.C),e.Y36(de.g),e.Y36(I.ux),e.Y36(y.sK),e.Y36(Ee.K))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-customers-list"]],features:[e._Bn([L.v])],decls:44,vars:37,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"text-muted"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(t,i){1&t&&(e.YNc(0,ze,22,7,"div",0),e._UZ(1,"mat-divider"),e.TgZ(2,"mat-card")(3,"div",1)(4,"h2"),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e._UZ(7,"mat-divider"),e.TgZ(8,"div",2)(9,"div",3)(10,"div",4)(11,"h2"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",4)(15,"h2"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",4)(19,"h2"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",4)(23,"h2"),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",4)(27,"h2"),e._uU(28),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",4)(31,"h2"),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",4)(35,"h2"),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e._UZ(38,"div",4),e.qZA(),e.YNc(39,a,22,11,"div",5),e.ALo(40,"paginate"),e.ALo(41,"TenantSearchPipe"),e.qZA()(),e.YNc(42,r,4,0,"div",6),e.YNc(43,u,2,0,"div",7)),2&t&&(e.Q6J("ngIf",i.account.periorty>0),e.xp6(5),e.hij("",e.lcZ(6,12,"HTML.TENANTS_LIST")," "),e.xp6(7),e.hij(" ",e.lcZ(13,14,"FIELD.NAME")," "),e.xp6(4),e.hij(" ",e.lcZ(17,16,"HTML.MOBILE")," "),e.xp6(4),e.hij(" ",e.lcZ(21,18,"HTML.BUILDING")," "),e.xp6(4),e.hij(" ",e.lcZ(25,20,"HTML.UNIT")," "),e.xp6(4),e.hij(" ",e.lcZ(29,22,"HTML.Job")," "),e.xp6(4),e.hij(" ",e.lcZ(33,24,"HTML.WorkPlace")," "),e.xp6(4),e.hij(" ",e.lcZ(37,26,"HTML.ACTIVATED")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(40,28,e.xi3(41,31,i.users,i.searchText),e.WLB(34,d,i.count,i.page))),e.xp6(3),e.Q6J("ngIf",i.users),e.xp6(1),e.Q6J("ngIf",!i.users))},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.On,m.F,X.LS,_.sg,_.O5,k.rH,T.xw,T.Wh,T.yH,b.Tq,b.nh,me.A9,me.Yi,V.a8,Q.Hw,A.Nt,v.KE,ee.d,we.Ou,pe.gM,X._s,Se.DA,y.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});var g=f(8959),S=f(5346);function B(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"mat-button-toggle",21),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.gotoNewContract())}),e.TgZ(1,"mat-icon"),e._uU(2,"note_add"),e.qZA()()}}const P=function(n){return["/contracts/contract-add/",n]};function H(n,t){if(1&n&&(e.TgZ(0,"a",27),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()),2&n){const i=e.oxw().$implicit;e.s9C("matTooltip",e.lcZ(1,2,"BTN.VIEW")),e.Q6J("routerLink",e.VKq(4,P,i.id))}}function q(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.removeContract(s.id))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.REMOVE"))}const St=function(n){return["/contracts/installment-list/",n]};function Ot(n,t){if(1&n&&(e.TgZ(0,"a",27),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"receipt"),e.qZA()()),2&n){const i=e.oxw().$implicit;e.s9C("matTooltip",e.lcZ(1,2,"BTN.INSTALLMENT")),e.Q6J("routerLink",e.VKq(4,St,i.id))}}const Nt=function(n){return["/contracts/contract-add/renew/",n]};function It(n,t){if(1&n&&(e.TgZ(0,"a",27),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"autorenew"),e.qZA()()),2&n){const i=e.oxw().$implicit;e.s9C("matTooltip",e.lcZ(1,2,"BTN.ReNewContract")),e.Q6J("routerLink",e.VKq(4,Nt,i.id))}}function Dt(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.leaveTenant(s,s.customer_Name))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"airport_shuttle"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.LEAVE"))}function Ft(n,t){if(1&n&&(e.TgZ(0,"div",22)(1,"div",23),e._uU(2),e._UZ(3,"br"),e._uU(4),e.qZA(),e.TgZ(5,"div",23),e._uU(6),e.qZA(),e.TgZ(7,"div",23),e._uU(8),e.qZA(),e.TgZ(9,"div",23),e._uU(10),e.qZA(),e.TgZ(11,"div",23),e._uU(12),e.qZA(),e.TgZ(13,"div",23),e._uU(14),e.qZA(),e.TgZ(15,"div",23),e._uU(16),e.qZA(),e.TgZ(17,"div",23)(18,"div",24),e.YNc(19,H,4,6,"a",25),e.YNc(20,q,4,3,"button",26),e.YNc(21,Ot,4,6,"a",25),e.YNc(22,It,4,6,"a",25),e.YNc(23,Dt,4,3,"button",26),e.qZA()()()),2&n){const i=t.$implicit,o=e.oxw();e.Tol(o.statusColor[i.RCOContractStatus]),e.xp6(2),e.Oqu(i.build_Name),e.xp6(2),e.Oqu(i.branch_ArbName),e.xp6(2),e.Oqu(i.unit_UnitNumber),e.xp6(2),e.hij(" ",i.customer_Name," "),e.xp6(2),e.hij(" ",i.customer_Mobile," "),e.xp6(2),e.hij(" ",i.RCOEndDate," "),e.xp6(2),e.AsE(" (",i.RCOCode," / ",i.RCOSubCode,") "),e.xp6(2),e.hij(" ",i.RCOEjarCode," "),e.xp6(3),e.Q6J("ngIf",o.can("view_onecontract")||0==o.account.periorty),e.xp6(1),e.Q6J("ngIf",o.can("delete_rentcontracts")),e.xp6(1),e.Q6J("ngIf",o.can("view_contractinstallments")||0==o.account.periorty),e.xp6(1),e.Q6J("ngIf",o.can("view_renewcontract")&&"N"==i.RCOContractStatus),e.xp6(1),e.Q6J("ngIf",o.can("view_tenantleave"))}}function Lt(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",29)(1,"div",30)(2,"mat-card",31)(3,"pagination-controls",32),e.NdJ("pageChange",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.onPageChanged(s))}),e.qZA()()()()}}function Mt(n,t){1&n&&(e.TgZ(0,"div",33),e._UZ(1,"mat-spinner",34),e.qZA())}const Et=function(n,t){return{itemsPerPage:n,currentPage:t}};class Ne{constructor(t,i,o,s,c,C,x,U,M,F,W){this.transferService=t,this.dataService=i,this.appSettings=o,this.activatedRoute=s,this.dialog=c,this.contractService=C,this.router=x,this.global=U,this.localStore=M,this.translateService=F,this.snackBar=W,this.statusColor={N:"make-white",R:"make-gold",F:"make-yellowgreen",C:"make-yellow"},this.curCOMId=O.N.comid,this.account=new ae.n,this.count=4,this.userPerm=[],this.settings=this.appSettings.settings}ngOnInit(){if(this.securityForApp=(new w.$).getSecurityType(),this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.contForTenant=this.activatedRoute.params.subscribe(t=>{t.tenantid?(this.idForTenant=+t.tenantid,console.log("params['tenantid']:: "+this.idForTenant)):this.idForTenant=0}),console.log("line 85 this.idForTenant:: "+this.idForTenant),this.prepareMsgLanguage(),this.getContracts()}else this.router.navigate(["/sign-in"])}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getContracts(){this.contractsAll=null,this.curUserData.is_superuser?this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(t=>this.contractsAll=t):this.contractService.getAllContracts(this.curCOMId,this.account.periorty).subscribe(t=>this.contractsAll=t):"T"==this.curUserData.is_owner?this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(t=>this.contractsAll=t):this.contractService.getContractsPerOwner(this.curCOMId,this.account.periorty,this.curUserData.owner_KeyField).subscribe(t=>this.contractsAll=t):"T"==this.curUserData.is_employee?("N"==this.securityForApp&&(this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(t=>this.contractsAll=t):this.contractService.getContractsPerBranch(this.curCOMId,this.account.periorty,this.account.branch_KeyField).subscribe(t=>this.contractsAll=t)),"D"==this.securityForApp&&(this.idForTenant>0?this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.idForTenant).subscribe(t=>this.contractsAll=t):this.contractService.getContractsPerEmp(this.curCOMId,this.account.periorty,this.account.id).subscribe(t=>this.contractsAll=t))):0==this.curUserData.periorty&&(this.curCustomerID=this.account.customer_KeyField??0,this.contractService.getContractsPerCustomer(this.curCOMId,this.account.periorty,this.curCustomerID).subscribe(t=>this.contractsAll=t))}renewContract(t){console.log("===========renewContract")}leaveTenant(t,i){this.transferService.setMessage({contract_KeyField:t.id,remaining_Installments:t.remaining_Installments,contenddate:t.RCOEndDate,contvalue:t.RCOContractValue,continsurance:t.RCOInsuranceValue,leaveid:t.RCOTenantLeaveID,branch_KeyField:t.branch_KeyField,owner_KeyField:t.owner_KeyField,build_KeyField:t.build_KeyField,unit_KeyField:t.unit_KeyField,customer_KeyField:t.customer_KeyField,cusName:i}),console.log("----Before info---"),null==t.RCOTenantLeaveID?(console.log("--contractRow.RCOTenantLeaveID == null--"),this.router.navigate(["contracts/tenant-leave/"])):(console.log("---ELSE-----"),this.router.navigate(["contracts/tenant-leave/"+t.RCOTenantLeaveID+"/"]))}removeContract(t){this.dialog.open(ne.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(o=>{o&&this.contractService.deleteContract(t).subscribe(s=>this.getContracts())})}contractInstallments(t){}onPageChanged(t){this.page=t,this.getContracts(),window.scrollTo(0,0)}printEInvoice(){this.router.navigate(["/contracts/print-einvoice/"])}gotoNewContract(){this.router.navigate(["/contracts/contract-add/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(t=>{this.deletedTitleMsg=t})}}Ne.\u0275fac=function(t){return new(t||Ne)(e.Y36(ue.y),e.Y36(S.n),e.Y36(re.d),e.Y36(k.gz),e.Y36(Z.uw),e.Y36(g.W),e.Y36(k.F0),e.Y36(j.U),e.Y36(p.C),e.Y36(y.sK),e.Y36(I.ux))},Ne.\u0275cmp=e.Xpm({type:Ne,selectors:[["app-contract-list"]],features:[e._Bn([g.W])],decls:64,vars:43,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",3,"class",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),e.YNc(4,B,3,0,"mat-button-toggle",4),e.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),e._uU(7,"search"),e.qZA()()()(),e.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),e.NdJ("ngModelChange",function(s){return i.searchText=s}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),e._uU(17,"view_list"),e.qZA()(),e.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),e._uU(20,"view_module"),e.qZA()()()()(),e._UZ(21,"mat-divider"),e.TgZ(22,"mat-card")(23,"div",14)(24,"h2"),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e._UZ(27,"mat-divider"),e.TgZ(28,"div",15)(29,"div",16)(30,"div",17)(31,"h3"),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",17)(35,"h3"),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",17)(39,"h3"),e._uU(40),e.ALo(41,"translate"),e.qZA()(),e.TgZ(42,"div",17)(43,"h3"),e._uU(44),e.ALo(45,"translate"),e.qZA()(),e.TgZ(46,"div",17)(47,"h3"),e._uU(48),e.ALo(49,"translate"),e.qZA()(),e.TgZ(50,"div",17)(51,"h3"),e._uU(52),e.ALo(53,"translate"),e.qZA()(),e.TgZ(54,"div",17)(55,"h3"),e._uU(56),e.ALo(57,"translate"),e.qZA()(),e._UZ(58,"div",17),e.qZA(),e.YNc(59,Ft,24,16,"div",18),e.ALo(60,"paginate"),e.ALo(61,"ContractSearchPipe"),e.qZA()(),e.YNc(62,Lt,4,0,"div",19),e.YNc(63,Mt,2,0,"div",20)),2&t){const o=e.MAs(3);e.xp6(4),e.Q6J("ngIf",i.can("add_rentcontracts")),e.xp6(4),e.ekj("show","search"==o.value),e.xp6(2),e.s9C("placeholder",e.lcZ(11,16,"HTML.SEARCH_CONTRACT")),e.Q6J("ngModel",i.searchText),e.xp6(15),e.Oqu(e.lcZ(26,18,"HTML.Contract_List")),e.xp6(7),e.hij(" ",e.lcZ(33,20,"HTML.BUILDING")," "),e.xp6(4),e.hij(" ",e.lcZ(37,22,"HTML.UnitNumber")," "),e.xp6(4),e.hij(" ",e.lcZ(41,24,"HTML.TENANT")," "),e.xp6(4),e.hij(" ",e.lcZ(45,26,"HTML.MOBILE")," "),e.xp6(4),e.hij(" ",e.lcZ(49,28,"HTML.ContractEndDate")," "),e.xp6(4),e.hij(" ",e.lcZ(53,30,"HTML.ContractCode")," "),e.xp6(4),e.hij(" ",e.lcZ(57,32,"HTML.ContractEjarCode")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(60,34,e.xi3(61,37,i.contractsAll,i.searchText),e.WLB(40,Et,i.count,i.page))),e.xp6(3),e.Q6J("ngIf",i.contractsAll),e.xp6(1),e.Q6J("ngIf",!i.contractsAll)}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.On,m.F,X.LS,_.sg,_.O5,k.rH,T.xw,T.Wh,T.yH,b.Tq,b.nh,me.A9,me.Yi,V.a8,Q.Hw,A.Nt,v.KE,ee.d,we.Ou,pe.gM,X._s,Se.JQ,y.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}table{width:100%}.make-gold{background-color:#fbea96}.make-yellow{background-color:#ff4500}.make-yellowgreen{background-color:#ad7020}.make-white{background-color:#fff}\n"],encapsulation:2});var qt=f(5861);class Rt{}var Xe=f(6838),et=f(6709),Y=f(9602),Te=f(3848),tt=f(1596),ve=f(8796);function Pt(n,t){1&n&&(e.TgZ(0,"h1",79),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"RenewContract")," "))}function kt(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.ADD")))}function Bt(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function Ht(n,t){if(1&n&&(e.TgZ(0,"h1",79),e.YNc(1,kt,3,3,"span",44),e.YNc(2,Bt,3,3,"span",44),e._uU(3),e.ALo(4,"translate"),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",!i.contractForDisplay.id),e.xp6(1),e.Q6J("ngIf",i.contractForDisplay.id),e.xp6(1),e.hij(" ",e.lcZ(4,3,"HTML.RentContract"),"\n")}}function Jt(n,t){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.OWNName," ")}}function Wt(n,t){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.OWNName," ")}}function Kt(n,t){if(1&n&&(e.TgZ(0,"ng-option",23),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CUSName,"")}}function Vt(n,t){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CURName," ")}}function Yt(n,t){if(1&n&&(e.TgZ(0,"a",80)(1,"mat-icon"),e._uU(2,"download"),e.qZA()()),2&n){const i=e.oxw();e.s9C("href",i.fileToUpload,e.LSH)}}function Gt(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div")(1,"mat-label"),e._uU(2," - "),e.qZA(),e.TgZ(3,"input",81),e.NdJ("change",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.handleFileInput(s.target.files))}),e.qZA(),e.TgZ(4,"button",82),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.callFileInput())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&n&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"HTML.ChoosePDFFile")))}function Qt(n,t){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.BRAArbName," ")}}function jt(n,t){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.BUIName," ")}}function $t(n,t){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.UNTUnitNumber," ")}}function zt(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.SAVE")))}function Xt(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function ei(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",83),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.saveUpdate(s.contractForDisplay.id))}),e.YNc(1,zt,3,3,"span",44),e.YNc(2,Xt,3,3,"span",44),e.qZA()}if(2&n){const i=e.oxw();e.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),e.xp6(1),e.Q6J("ngIf",!i.contractForDisplay.id),e.xp6(1),e.Q6J("ngIf",i.contractForDisplay.id)}}class Ze{constructor(t,i,o,s,c,C,x,U,M,F,W,te,oe){this.activatedRoute=t,this.codesService=i,this.unitsService=o,this.contractService=s,this.fb=c,this.localStore=C,this.router=x,this.global=U,this.translateService=M,this.atlasService=F,this.settingService=W,this.tenantsService=te,this.snackBar=oe,this.curCOMId=O.N.comid,this.account=new ae.n,this.docType_const=(new w.I).OwnershipDocTypes,this.country_const=(new w.I).Countries,this.governorate_const=(new w.I).Governorates,this.city_const=(new w.I).City,this.region_const=(new w.I).Regions,this.buildingFeatures_const=(new w.I).BuildingFeatures,this.passwordHide=!0,this.userPerm=[],this.codeForDefaultOwner=(new w.$).getDefaultOwner(),this.typeOfContractSerial=(new w.$).getTypeOfContractSerial(),this.fileToUpload=null,this.DocImageToUpload=null,this.defaultDocImage=(new N.P).noImage,this.defaultCusImage=(new N.P).noImage,this.CusImageToUpload=null,this.DocTypes=[],this.parameters=[],this.Countries=[],this.Governorates=[],this.AllBuilding=[],this.AllUnitsForBuilding=[],this.AllRepresentativeForOwner=[],this.AllBranches=[],this.AllOwners=[],this.AllRepresentativeForCustomer=[],this.AllTenants=[]}isBigEnough(t,i,o){return t>=10}callFileInput(){document.getElementById("fileInput").click()}ngOnInit(){if(this.userSUb=this.global.user.subscribe(i=>{this.account=i}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let i=0;i<this.curUserPermissions.length;i++)this.userPerm[i]=this.curUserPermissions[i].codename;var t=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==t.is_employee,this.isAdmin=t.is_superuser,this.isOwner="T"==t.is_owner,this.ownerKeyForApp=(new w.$).ownerKeyField,this.form=this.fb.group({id:null,RCOCode:[null,m.kI.required],RCOSubCode:1,RCOEjarCode:null,Related_RCOKeyField:null,contractDate:null,contractStartDate:[null,m.kI.required],contractEndDate:[null,m.kI.required],RCOContractStatus:"N",RCOAlarmStartDate:{value:[""],disabled:!0},RCONoOfDaysForAlarm:[null,m.kI.required],RCONoOfDaysForEjarAlarm:[null,m.kI.required],RCOAlarmCounter:{value:0,disabled:!0},contractUnit:this.fb.group({branch_KeyField:{value:null,disabled:0==this.curUserData.periorty},build_KeyField:{value:null,disabled:0==this.curUserData.periorty},unit_KeyField:{value:null,disabled:0==this.curUserData.periorty}}),contractPerson:this.fb.group({owner_KeyField:null,owner_representative_KeyField:null,customer_KeyField:null,customer_work_representative:null,customer_code:null}),contractValues:this.fb.group({RCOContractValue:[null,m.kI.required],RCOPayEveryMonthesNo:[null,m.kI.required],RCOMonthValue:[null,m.kI.required],RCOInsuranceValue:0,RCOSeekingValue:0,RCOMonthlyExpense:0,RCOExpenseDesc:null,RCOOtherValue:0,RCOMonthlyElectricValue:0,RCOElectricCounterReading:null,RCOMonthlyWaterValue:0,RCOWaterCounterReading:null,RCOMonthlyGasValue:0,RCOGasCounterReading:null}),settings:this.fb.group({isActive:null,isDeleted:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),this.isEmployee&&(this.form.controls.RCOEjarCode.setValidators([m.kI.required]),this.form.controls.RCOEjarCode.updateValueAndValidity()),(this.isAdmin||this.isOwner)&&(this.form.controls.RCOEjarCode.clearValidators(),this.form.controls.RCOEjarCode.updateValueAndValidity()),this.prepareMsgLanguage(),this.getParamValue(this.curCOMId,this.account.periorty,1),this.getParamValue(this.curCOMId,this.account.periorty,2),this.getParamValue(this.curCOMId,this.account.periorty,3),this.getParamValue(this.curCOMId,this.account.periorty,this.codeForDefaultOwner),this.getParamValue(this.curCOMId,this.account.periorty,this.typeOfContractSerial),this.getCountries(this.curCOMId,this.account.periorty),this.getAllOwnerss(this.curCOMId,this.account.periorty),this.getOwnershipDocType(this.curCOMId,this.account.periorty),this.getTenants(),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0),this.activatedRoute.data.subscribe(i=>{this.isRenewContract=i.parentID}),this.sub=this.activatedRoute.params.subscribe(i=>{i.id?(this.id=+i.id,console.log("params['id']:: "+this.id),this.getContractById(this.id)):this.contractForDisplay=new Rt})}else this.router.navigate(["/sign-in"])}handleFileInput(t){t&&t.length&&(this.fileToUpload=t.item(0)),document.getElementById("customButton").textContent=t.length>0?t[0].name:this.chooseFile}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}onFileChange(t){this.DocImageToUpload=t.item(0);var i=new FileReader;i.onload=o=>{this.defaultDocImage=o.target.result},i.readAsDataURL(this.DocImageToUpload)}handelCUSImgInput(t){this.CusImageToUpload=t.item(0);var i=new FileReader;i.onload=o=>{this.defaultCusImage=o.target.result},i.readAsDataURL(this.CusImageToUpload)}mapFormvalue_to_ContractClass(){this.form.enable();const t=new _.uU("en-GB").transform(this.form.value.contractDate,"dd/MM/yyyy"),i=new _.uU("en-GB").transform(this.form.value.contractStartDate,"dd/MM/yyyy"),o=new _.uU("en-GB").transform(this.form.value.contractEndDate,"dd/MM/yyyy"),s=new _.uU("en-GB").transform(this.form.value.RCOAlarmStartDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,this.contractForDisplay.id=this.form.value.id,this.contractForDisplay.Related_RCOKeyField=this.form.value.Related_RCOKeyField,this.contractForDisplay.RCOCode=this.form.value.RCOCode,this.contractForDisplay.RCOSubCode=this.form.value.RCOSubCode,this.contractForDisplay.RCOEjarCode=this.form.value.RCOEjarCode,null!=this.form.value.contractDate&&(this.contractForDisplay.RCODate=t),null!=this.form.value.contractStartDate&&(this.contractForDisplay.RCOStartDate=i),null!=this.form.value.contractEndDate&&(this.contractForDisplay.RCOEndDate=o),null!=this.form.value.RCOAlarmStartDate&&(this.contractForDisplay.RCOAlarmStartDate=s),this.contractForDisplay.RCOContractStatus=this.form.value.RCOContractStatus,this.contractForDisplay.RCOAlarmCounter=this.form.value.RCOAlarmCounter,this.contractForDisplay.RCONoOfDaysForAlarm=this.form.value.RCONoOfDaysForAlarm,this.contractForDisplay.RCONoOfDaysForEjarAlarm=this.form.value.RCONoOfDaysForEjarAlarm,this.contractForDisplay.branch_KeyField=this.form.value.contractUnit.branch_KeyField,this.contractForDisplay.build_KeyField=this.form.value.contractUnit.build_KeyField,this.contractForDisplay.unit_KeyField=this.form.value.contractUnit.unit_KeyField,this.contractForDisplay.owner_KeyField=this.form.value.contractPerson.owner_KeyField,this.contractForDisplay.owner_representative_KeyField=this.form.value.contractPerson.owner_representative_KeyField,this.contractForDisplay.customer_KeyField=this.form.value.contractPerson.customer_KeyField,this.contractForDisplay.customer_work_representative=this.form.value.contractPerson.customer_work_representative,this.contractForDisplay.RCOContractValue=this.form.value.contractValues.RCOContractValue,this.contractForDisplay.RCOPayEveryMonthesNo=this.form.value.contractValues.RCOPayEveryMonthesNo,this.contractForDisplay.RCOMonthValue=this.form.value.contractValues.RCOMonthValue,this.contractForDisplay.RCOInsuranceValue=this.form.value.contractValues.RCOInsuranceValue,this.contractForDisplay.RCOSeekingValue=this.form.value.contractValues.RCOSeekingValue,this.contractForDisplay.RCOMonthlyExpense=this.form.value.contractValues.RCOMonthlyExpense,this.contractForDisplay.RCOExpenseDesc=this.form.value.contractValues.RCOExpenseDesc,this.contractForDisplay.RCOOtherValue=this.form.value.contractValues.RCOOtherValue,this.contractForDisplay.RCOMonthlyElectricValue=this.form.value.contractValues.RCOMonthlyElectricValue,this.contractForDisplay.RCOElectricCounterReading=this.form.value.contractValues.RCOElectricCounterReading,this.contractForDisplay.RCOMonthlyWaterValue=this.form.value.contractValues.RCOMonthlyWaterValue,this.contractForDisplay.RCOWaterCounterReading=this.form.value.contractValues.RCOWaterCounterReading,this.contractForDisplay.RCOMonthlyGasValue=this.form.value.contractValues.RCOMonthlyGasValue,this.contractForDisplay.RCOGasCounterReading=this.form.value.contractValues.RCOGasCounterReading,this.contractForDisplay.RCOActive=this.tenActive,this.contractForDisplay.RowDelete=this.tenDeleted}getContractById(t){const i=[];this.contractService.getOneContract(t).subscribe(o=>{"T"!=this.isRenewContract&&this.contractService.getOneContractDocs(this.curCOMId,this.account.periorty,t).subscribe(s=>{for(var c of s)i.push({link:c.RCDPic,preview:c.RCDPic})}),this.fillForm(o,i),this.contractForDisplay=o,"T"==this.isRenewContract&&(this.contractForDisplay.id=null)})}fillForm(t,i){this.is_active="T"==t.RCOActive,null!=t.branch_KeyField&&this.getBuildingPerBranch(this.curCOMId,this.account.periorty,t.branch_KeyField),null!=t.build_KeyField&&this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,t.build_KeyField,""),null!=t.owner_KeyField&&this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,t.owner_KeyField),null!=t.customer_KeyField&&this.getRepresentativePerCustomer(this.curCOMId,this.account.periorty,t.customer_KeyField),null!=t.RCODate&&(this.s_rcoDate="T"==this.isRenewContract?new Date:t.RCODate),this.is_delete=1==t.RowDelete,this.fileToUpload=t.RCOPdf,this.form.patchValue("T"!=this.isRenewContract?{id:t.id,Related_RCOKeyField:t.Related_RCOKeyField,RCOPdf:t.RCOPdf,RCOCode:t.RCOCode,RCOSubCode:t.RCOSubCode,RCOEjarCode:t.RCOEjarCode,contractDate:t.RCODate,contractStartDate:t.RCOStartDate,contractEndDate:t.RCOEndDate,RCOContractStatus:t.RCOContractStatus,RCOAlarmStartDate:t.RCOAlarmStartDate,RCOAlarmCounter:t.RCOAlarmCounter,RCONoOfDaysForAlarm:t.RCONoOfDaysForAlarm,RCONoOfDaysForEjarAlarm:t.RCONoOfDaysForEjarAlarm,contractUnit:{branch_KeyField:t.branch_KeyField,build_KeyField:t.build_KeyField,unit_KeyField:t.unit_KeyField},contractPerson:{owner_KeyField:t.owner_KeyField,owner_representative_KeyField:t.owner_representative_KeyField,customer_KeyField:t.customer_KeyField,customer_work_representative:t.customer_work_representative},contractValues:{RCOContractValue:t.RCOContractValue,RCOPayEveryMonthesNo:t.RCOPayEveryMonthesNo,RCOMonthValue:t.RCOMonthValue,RCOInsuranceValue:t.RCOInsuranceValue,RCOSeekingValue:t.RCOSeekingValue,RCOMonthlyExpense:t.RCOMonthlyExpense,RCOExpenseDesc:t.RCOExpenseDesc,RCOOtherValue:t.RCOOtherValue,RCOMonthlyElectricValue:t.RCOMonthlyElectricValue,RCOElectricCounterReading:t.RCOElectricCounterReading,RCOMonthlyWaterValue:t.RCOMonthlyWaterValue,RCOWaterCounterReading:t.RCOWaterCounterReading,RCOMonthlyGasValue:t.RCOMonthlyGasValue,RCOGasCounterReading:t.RCOGasCounterReading},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}}:{Related_RCOKeyField:t.id,RCOPdf:t.RCOPdf,RCOCode:t.RCOCode,RCOSubCode:+t.RCOSubCode+1,RCOEjarCode:t.RCOEjarCode,contractDate:new Date,contractStartDate:this.addDays(t.RCOEndDate,1),RCOContractStatus:t.RCOContractStatus,RCOAlarmCounter:0,RCONoOfDaysForAlarm:t.RCONoOfDaysForAlarm,RCONoOfDaysForEjarAlarm:t.RCONoOfDaysForEjarAlarm,contractUnit:{branch_KeyField:t.branch_KeyField,build_KeyField:t.build_KeyField,unit_KeyField:t.unit_KeyField},contractPerson:{owner_KeyField:t.owner_KeyField,owner_representative_KeyField:t.owner_representative_KeyField,customer_KeyField:t.customer_KeyField,customer_work_representative:t.customer_work_representative},contractValues:{RCOContractValue:t.RCOContractValue,RCOPayEveryMonthesNo:t.RCOPayEveryMonthesNo,RCOMonthValue:t.RCOMonthValue,RCOInsuranceValue:t.RCOInsuranceValue,RCOSeekingValue:t.RCOSeekingValue,RCOMonthlyExpense:t.RCOMonthlyExpense,RCOExpenseDesc:t.RCOExpenseDesc,RCOOtherValue:t.RCOOtherValue,RCOMonthlyElectricValue:t.RCOMonthlyElectricValue,RCOElectricCounterReading:t.RCOElectricCounterReading,RCOMonthlyWaterValue:t.RCOMonthlyWaterValue,RCOWaterCounterReading:t.RCOWaterCounterReading,RCOMonthlyGasValue:t.RCOMonthlyGasValue,RCOGasCounterReading:t.RCOGasCounterReading},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}})}handleInstallment(t){var i=this;return(0,qt.Z)(function*(){let o=12/t.RCOPayEveryMonthesNo,s=t.RCOPayEveryMonthesNo,c=t.RCOStartDate,C=t.RCOEndDate,x=t.RCOMonthValue;var U,M,F,W;for(let ce=0;ce<o;ce++){0==ce?(F=new Date(c),console.log("-----111--installmentDate:: "+c),console.log("-----111--tempDate:: "+F),M=F,(U=new Date(M.setMonth(M.getMonth()+s))).setDate(U.getDate()-1),console.log("-----222--tempDate:: "+F),F=new Date(c),console.log("-----333--tempDate:: "+F)):(W=new Date(c),F=new Date(c),F=i.addMonths(W,ce*s),W=new Date(c),ce==o-1?U=C:((U=i.addMonths(W,(ce+1)*s)).setDate(U.getDate()-1),W=new Date(c)));var te=new Date(new _.uU("en-GB").transform(F,"yyyy/MM/dd")),oe=new Date(new _.uU("en-GB").transform(U,"yyyy/MM/dd")),be="\u0648\u0630\u0644\u0643 \u0639\u0646 \u0625\u064a\u062c\u0627\u0631 \u0627\u0644\u0648\u062d\u062f\u0629 \u0631\u0642\u0645 "+t.unit_UnitNumber+" \u0645\u0646 \u0627\u0644\u0639\u0642\u0627\u0631 "+t.build_Name+" \u0639\u0646 \u0627\u0644\u0641\u062a\u0631\u0629 \u0645\u0646 "+i.formatDate(te)+" \u0625\u0644\u0649 "+i.formatDate(oe);console.log("-----444--noteText:: "+be);let Ye={contract_KeyField:t.id,branch_KeyField:t.branch_KeyField,owner_KeyField:t.owner_KeyField,build_KeyField:t.build_KeyField,unit_KeyField:t.unit_KeyField,customer_KeyField:t.customer_KeyField,INSCode:ce+1,INSContractTyps:"I",INSStatus:"N",INSValue:x,INSDueDate:te,INSDueToDate:oe,INSNotes:be};console.log("---i::"+ce+" --INSDueDate:: "+te+" --INSDueToDate:: "+oe),yield i.insertInstallment(Ye)}})()}insertInstallment(t){this.contractService.addInstallments(t).subscribe(i=>{})}saveUpdate(t){this.mapFormvalue_to_ContractClass(),t?(console.log("==========Edit Contract============"),this.contractService.editContractWithPdf(this.contractForDisplay,this.fileToUpload).subscribe(i=>{let o={contract_KeyField:i.id,TSTArrange:1,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOContractValue,TSTDate:i.RCOStartDate,TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u0627\u0642\u062f \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.ID};this.contractService.deleteStatementForSubjectID(this.curCOMId,this.account.periorty,"RCONTRACT",i.id).subscribe(s=>{this.contractService.addStatement(o).subscribe(c=>{})}),null!=this.DocImageToUpload&&this.contractService.addContractDocs(this.contractForDisplay.id,this.DocImageToUpload).subscribe(s=>{}),this.contractService.updateCustomerUnitFromContract(this.contractForDisplay.customer_KeyField,this.contractForDisplay.build_KeyField,this.contractForDisplay.unit_KeyField,this.contractForDisplay.id).subscribe(s=>{}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(console.log("=====AddContract======"),this.contractService.addContractWithPdf(this.contractForDisplay,this.fileToUpload).subscribe(i=>{this.contractService.addStatement({contract_KeyField:i.id,TSTArrange:1,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,installment_KeyField:null,customer_KeyField:i.customer_KeyField,TSTCreditValue:0,TSTDebitValue:i.RCOContractValue,TSTDate:i.RCOStartDate,TSTDescription:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0639\u0627\u0642\u062f \u0644\u0644\u0639\u0642\u062f \u0631\u0642\u0645 "+i.RCOCode+"/"+i.RCOSubCode,TSTSubject:"RCONTRACT",TSTSubjectID:i.id}).subscribe(c=>{}),null!=this.DocImageToUpload&&this.contractService.addContractDocs(i.id,this.DocImageToUpload).subscribe(c=>{}),this.contractService.updateCustomerUnitFromContract(i.customer_KeyField,i.build_KeyField,i.unit_KeyField,i.id).subscribe(c=>{}),this.unitsService.editOneUnit({id:i.unit_KeyField,customer_KeyField:i.customer_KeyField,UNTHousingStatus:"R"}).subscribe(c=>{}),"T"==this.isRenewContract&&this.contractService.editOneContract({id:this.id,RCOContractStatus:"R"}).subscribe(C=>{}),this.handleInstallment(i),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-add/"+i.id+"/"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0627\u0644\u0639\u0642\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])}))}close(){}addDays(t,i){var o=new Date(t);return o.setDate(o.getDate()+i),o}addMonths(t,i){var o=new Date(t);return o.setMonth(o.getMonth()+i),o}addMonths2(t,i){var o=t.getDate();return t.setMonth(t.getMonth()+ +i),t.getDate()!=o&&t.setDate(0),t}compareFunction(t,i){return t.username==i.username&&t.code==i.code}getOwnershipDocType(t,i){this.codesService.getSubForParent(t,i,this.docType_const).subscribe(o=>{this.DocTypes=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0646\u0648\u0627\u0639 \u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0644\u0643\u064a\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}onChangeContractValue(t){let o=this.form.value.contractValues.RCOPayEveryMonthesNo;0==o&&(o=1),this.form.patchValue({contractValues:{RCOMonthValue:t.target.value/(12/o)}})}onChangePayEvery(t){let o=t.target.value;0==o&&(o=1),this.form.patchValue({contractValues:{RCOMonthValue:this.form.value.contractValues.RCOContractValue/(12/o)}})}onChangeDays(t){if(new _.uU("en-GB").transform(this.form.value.contractEndDate,"dd/MM/yyyy"),null!=this.form.value.contractEndDate){let o=this.form.value.contractEndDate,s=t.target.value;this.paramValueForCode1=s,this.calcAlarmStartDate(o,s)}}onChangeEndDate(t){let i=t.value;console.log("----event.value:: "+t.value),console.log("----event:: "+t),this.onChangeEndDateDoIt(i)}onChangeEndDateDoIt(t){this.calcAlarmStartDate(t,this.paramValueForCode1),this.form.get("contractEndDate").patchValue(t)}onChangeStartDate(t){let i=t.value;console.log("----start date:: "+i);const o=new Date(i);o.setFullYear(i.getFullYear()+1),o.setDate(o.getDate()-1),this.onChangeEndDateDoIt(o)}subtractDays(t,i){var o=new Date(t);return o.setDate(o.getDate()-i),o}calcAlarmStartDate(t,i){var o=this.subtractDays(t,i);this.calcDate=new _.uU("en-GB").transform(o,"yyyy-MM-dd"),this.form.patchValue({RCONoOfDaysForAlarm:this.paramValueForCode1,RCONoOfDaysForEjarAlarm:this.paramValueForCode2}),this.form.get("RCOAlarmStartDate").patchValue(this.calcDate)}formatDate(t){const i=new Date(t);let o=""+(i.getMonth()+1),s=""+i.getDate();const c=i.getFullYear();return o.length<2&&(o="0"+o),s.length<2&&(s="0"+s),[c,o,s].join("-")}searchByCode(t){console.log("---Search event:: "+t),this.tenantsService.getCustomerPerCode(this.curCOMId,this.account.periorty,+t).subscribe(i=>{i.length>0?(console.log("---id:: "+i[0].id),this.form.patchValue({contractPerson:{customer_KeyField:i[0].id}}),this.readCustumer(i[0].id)):(console.log("---Not---"),this.form.patchValue({contractPerson:{customer_KeyField:null}}))},i=>{console.log("----not found tenant----")})}getParamValue(t,i,o){this.settingService.getValueForCode(t,i,o).subscribe(s=>{this.parameters=s,1==o&&(this.paramValueForCode1=s[0].APAValue),2==o&&(this.paramValueForCode2=s[0].APAValue),3==o&&(this.paramValueForCode3=s[0].APAValue),o==this.codeForDefaultOwner&&(this.defaultOwner=s[0].APAValue,this.form.patchValue({contractPerson:{owner_KeyField:+this.defaultOwner}}),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.defaultOwner)),o==this.typeOfContractSerial&&(this.typeOfContSerialValue=s[0].APAValue,"OWNER"!=this.typeOfContSerialValue.toUpperCase()?this.getMaxContractCode(this.curCOMId,this.account.periorty):this.getMaxContractCodePerOwner(this.curCOMId,this.account.periorty,this.defaultOwner??0))},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxContractCode(t,i){this.contractService.getMaxContractCode(t,i).subscribe(o=>{this.maxContractCode=o.max,this.id||this.form.patchValue({RCOCode:this.maxContractCode})})}getMaxContractCodePerOwner(t,i,o){this.contractService.getMaxContractCodeForOwner(t,i,o).subscribe(s=>{this.maxContractCode=s.max,this.id||this.form.patchValue({RCOCode:this.maxContractCode})})}getCountries(t,i){this.codesService.getSubForParent(t,i,this.country_const).subscribe(o=>{this.Countries=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(t){this.getBuildingPerBranch(this.curCOMId,this.account.periorty,t.value)}getBuildingPerBranch(t,i,o){this.unitsService.getBuildingsPerBranch(t,i,o).subscribe(s=>{this.AllBuilding=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readBuilding(t){this.unitsService.getOneBuilding(t.value).subscribe(i=>{this.curOwnerId=i.owner_KeyField,console.log("====Cur Owner:: "+this.curOwnerId+"  "+i.owner_FullName),this.form.patchValue({contractPerson:{owner_KeyField:this.curOwnerId}}),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,this.curOwnerId)},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,t.value,"E")}getUnitsPerBuilding(t,i,o,s){this.unitsService.getAllUnitsPerBuilding(t,i,o,s).subscribe(c=>{this.AllUnitsForBuilding=c},c=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a \u0644\u0644\u0639\u0642\u0627\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnit(t){t.value&&this.unitsService.getOneUnit(t.value).subscribe(i=>{this.form.patchValue({contractValues:{RCOContractValue:i.UNTContractValue,RCOPayEveryMonthesNo:i.UNTPayInstallmentEveryMonths,RCOMonthValue:i.UNTContractValue/(12/i.UNTPayInstallmentEveryMonths),RCOInsuranceValue:i.UNTInsuranceValue,RCOSeekingValue:i.UNTSeekingValue,RCOMonthlyExpense:i.UNTMonthlyExpense,RCOExpenseDesc:i.UNTExpenseDesc,RCOOtherValue:i.UNTOtherValue,RCOMonthlyElectricValue:i.UNTMonthlyElectricityFee,RCOElectricCounterReading:i.UNTLastElectricityReading,RCOMonthlyWaterValue:i.UNTMonthlyWaterFee,RCOWaterCounterReading:i.UNTLastWaterReading,RCOMonthlyGasValue:i.UNTMonthlyGasFee,RCOGasCounterReading:i.UNTLastGasReading}})},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readUnitById(t){t&&this.unitsService.getOneUnit(t).subscribe(i=>{this.form.patchValue({contractValues:{RCOContractValue:i.UNTContractValue,RCOPayEveryMonthesNo:i.UNTPayInstallmentEveryMonths,RCOMonthValue:i.UNTContractValue/(12/i.UNTPayInstallmentEveryMonths),RCOInsuranceValue:i.UNTInsuranceValue,RCOSeekingValue:i.UNTSeekingValue,RCOMonthlyExpense:i.UNTMonthlyExpense,RCOExpenseDesc:i.UNTExpenseDesc,RCOOtherValue:i.UNTOtherValue,RCOMonthlyElectricValue:i.UNTMonthlyElectricityFee,RCOElectricCounterReading:i.UNTLastElectricityReading,RCOMonthlyWaterValue:i.UNTMonthlyWaterFee,RCOWaterCounterReading:i.UNTLastWaterReading,RCOMonthlyGasValue:i.UNTMonthlyGasFee,RCOGasCounterReading:i.UNTLastGasReading}})},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getRepresentativePerOwner(t,i,o){this.contractService.getOwnersPerParent(t,i,o).subscribe(s=>{this.AllRepresentativeForOwner=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0645\u062b\u0644 \u0627\u0644\u0645\u0627\u0644\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readOwner(t){console.log("====Selected readOwner:: "+t.value),this.getRepresentativePerOwner(this.curCOMId,this.account.periorty,t.value??0),"OWNER"!=this.typeOfContSerialValue.toUpperCase()||this.getMaxContractCodePerOwner(this.curCOMId,this.account.periorty,t.value??0)}getAllBranches(t,i){this.atlasService.getAllBranch(t,i).subscribe(o=>{this.AllBranches=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(t,i,o,s){console.log("----is Emp"),this.atlasService.getBranchPerEmp(t,i,o).subscribe(c=>{this.AllBranches=c,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+s),this.atlasService.getOneBranch(s).subscribe(C=>{this.AllBranches=C},C=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},c=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllOwnerss(t,i){this.contractService.getAllOwners(t,i).subscribe(o=>{this.AllOwners=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0644\u0627\u0643","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}readCustumer(t){console.log("====Selected readCustumer:: "+t),this.tenantsService.getOneCustomer(t).subscribe(i=>{console.log("====Selected branch:: "+i.current_branch),console.log("====Selected building:: "+i.current_building),console.log("====Selected unit:: "+i.current_unit),i.current_unit&&(this.form.patchValue({contractPerson:{customer_code:i.CUSCode},contractUnit:{branch_KeyField:i.current_branch,build_KeyField:i.current_building,unit_KeyField:i.current_unit}}),this.getBuildingPerBranch(this.curCOMId,this.account.periorty,i.current_branch),this.getUnitsPerBuilding(this.curCOMId,this.account.periorty,i.current_building,"E"),this.readUnitById(i.current_unit))},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}),this.getRepresentativePerCustomer(this.curCOMId,this.account.periorty,t)}getRepresentativePerCustomer(t,i,o){this.tenantsService.getWorkRelatedWakeelPerCustomers(t,i,o).subscribe(s=>{this.AllRepresentativeForCustomer=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0645\u062b\u0644 \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getTenants(){this.AllTenants=null,this.tenantsService.getCustomersConfirmed(this.curCOMId,this.account.periorty).subscribe(t=>this.AllTenants=t)}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("HTML.ChoosePDFFile").subscribe(t=>{this.chooseFile=t})}}Ze.\u0275fac=function(t){return new(t||Ze)(e.Y36(k.gz),e.Y36(Xe.d),e.Y36(G.X),e.Y36(g.W),e.Y36(m.QS),e.Y36(p.C),e.Y36(k.F0),e.Y36(j.U),e.Y36(y.sK),e.Y36(D.Z),e.Y36(de.g),e.Y36(L.v),e.Y36(I.ux))},Ze.\u0275cmp=e.Xpm({type:Ze,selectors:[["app-contract-dialog"]],decls:314,vars:188,consts:[["mat-dialog-title","",4,"ngIf"],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","27.0",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","RCOCode"],["fxFlex","100","fxFlex.gt-sm","22.8",1,"px-1"],["matInput","","formControlName","RCOSubCode"],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["matInput","","formControlName","contractDate",3,"matDatepicker"],["matSuffix","",3,"for"],["contractDate",""],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","contractStartDate",3,"matDatepicker","dateChange"],["contractStartDate",""],["matInput","","formControlName","contractEndDate",3,"matDatepicker","dateChange"],["contractEndDate",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","RCOContractStatus","id","contStatusOpSel",3,"placeholder"],[3,"value"],["matInput","","formControlName","RCOEjarCode"],["matInput","","type","date","formControlName","RCOAlarmStartDate",1,"form-control"],["matInput","","formControlName","RCONoOfDaysForAlarm","required","",3,"change"],["matInput","","formControlName","RCONoOfDaysForEjarAlarm","required",""],["matInput","","formControlName","RCOAlarmCounter"],["formGroupName","contractPerson",3,"label"],["fxFlex","100","fxFlex.gt-sm","59.8",1,"px-1"],["formControlName","owner_KeyField","id","oneOwnerOpSel",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","39.8",1,"px-1"],["formControlName","owner_representative_KeyField","id","oneOwnerRepresOpSel",3,"placeholder"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["matInput","","formControlName","customer_code",3,"keyup.enter"],["tenCode",""],["appearance","outline","formControlName","customer_KeyField","id","oneCustomOpSel",1,"w-100",3,"placeholder","change"],["fxFlex","100","fxFlex.gt-sm","29.8",1,"px-1"],["formControlName","customer_work_representative","id","CustomRepsOpSel",3,"placeholder"],["fxLayout","row"],["target","_blank",3,"href",4,"ngIf"],[4,"ngIf"],["formGroupName","contractUnit",3,"label"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],["formControlName","build_KeyField","id","buildOneOpSel",3,"placeholder","selectionChange"],["formControlName","unit_KeyField","id","unitOneOpSel",3,"placeholder","selectionChange"],["formGroupName","contractValues",3,"label"],["matInput","","formControlName","RCOContractValue","required","",3,"change"],["matInput","","formControlName","RCOPayEveryMonthesNo","required","",3,"change"],["matInput","","formControlName","RCOMonthValue","required",""],["fxFlex","100","fxFlex.gt-sm","24.9",1,"px-1"],["matInput","","formControlName","RCOInsuranceValue"],["matInput","","formControlName","RCOSeekingValue"],["matInput","","formControlName","RCOMonthlyExpense"],["matInput","","formControlName","RCOOtherValue"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","RCOExpenseDesc"],["matInput","","formControlName","RCOMonthlyElectricValue"],["matInput","","formControlName","RCOElectricCounterReading"],["matInput","","formControlName","RCOMonthlyWaterValue"],["matInput","","formControlName","RCOWaterCounterReading"],["matInput","","formControlName","RCOMonthlyGasValue"],["matInput","","formControlName","RCOGasCounterReading"],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-dialog-title",""],["target","_blank",3,"href"],["formControlName","RCOPdf","type","file","accept",".pdf","id","fileInput",1,"file-input",3,"change"],["id","customButton",1,"custom-button",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(t,i){if(1&t){const o=e.EpF();e.YNc(0,Pt,3,3,"h1",0),e.YNc(1,Ht,5,5,"h1",0),e.TgZ(2,"form",1)(3,"mat-tab-group",2)(4,"mat-tab",3),e.ALo(5,"translate"),e.TgZ(6,"div",4)(7,"div",5),e._UZ(8,"mat-label"),e.TgZ(9,"div",6)(10,"div",7)(11,"mat-form-field",8)(12,"mat-label"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"input",9),e.qZA()(),e.TgZ(16,"div",10)(17,"mat-form-field",8)(18,"mat-label"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"input",11),e.qZA()(),e.TgZ(22,"div",12)(23,"mat-form-field",8)(24,"mat-label"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e._UZ(27,"input",13)(28,"mat-datepicker-toggle",14)(29,"mat-datepicker",null,15),e.qZA()()()(),e.TgZ(31,"div",6)(32,"div",16)(33,"mat-form-field",8)(34,"mat-label"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"input",17),e.NdJ("dateChange",function(c){return i.onChangeStartDate(c)}),e.qZA(),e._UZ(38,"mat-datepicker-toggle",14)(39,"mat-datepicker",null,18),e.qZA()(),e.TgZ(41,"div",16)(42,"mat-form-field",8)(43,"mat-label"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"input",19),e.NdJ("dateChange",function(c){return i.onChangeEndDate(c)}),e.qZA(),e._UZ(47,"mat-datepicker-toggle",14)(48,"mat-datepicker",null,20),e.qZA()()(),e.TgZ(50,"div",6)(51,"div",21)(52,"mat-form-field",8)(53,"mat-label"),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.TgZ(56,"mat-select",22),e.ALo(57,"translate"),e.TgZ(58,"mat-option",23),e._uU(59,"-"),e.qZA(),e.TgZ(60,"mat-option",23),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"mat-option",23),e._uU(64),e.ALo(65,"translate"),e.qZA(),e.TgZ(66,"mat-option",23),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"mat-option",23),e._uU(70),e.ALo(71,"translate"),e.qZA()()()(),e.TgZ(72,"div",21)(73,"mat-form-field",8)(74,"mat-label"),e._uU(75),e.ALo(76,"translate"),e.qZA(),e._UZ(77,"input",24),e.qZA()(),e.TgZ(78,"div",21)(79,"mat-form-field",8)(80,"mat-label"),e._uU(81),e.ALo(82,"translate"),e.qZA(),e._UZ(83,"input",25),e.qZA()()(),e.TgZ(84,"div",6)(85,"div",21)(86,"mat-form-field",8)(87,"mat-label"),e._uU(88),e.ALo(89,"translate"),e.qZA(),e.TgZ(90,"input",26),e.NdJ("change",function(c){return i.onChangeDays(c)}),e.qZA()()(),e.TgZ(91,"div",21)(92,"mat-form-field",8)(93,"mat-label"),e._uU(94),e.ALo(95,"translate"),e.qZA(),e._UZ(96,"input",27),e.qZA()(),e.TgZ(97,"div",21)(98,"mat-form-field",8)(99,"mat-label"),e._uU(100),e.ALo(101,"translate"),e.qZA(),e._UZ(102,"input",28),e.qZA()()()()(),e.TgZ(103,"mat-tab",29),e.ALo(104,"translate"),e.TgZ(105,"div",4)(106,"div",5),e._UZ(107,"mat-label"),e.TgZ(108,"div",6)(109,"div",30)(110,"mat-form-field",8)(111,"mat-label"),e._uU(112),e.ALo(113,"translate"),e.qZA(),e.TgZ(114,"mat-select",31),e.NdJ("selectionChange",function(c){return i.readOwner(c)}),e.ALo(115,"translate"),e.TgZ(116,"mat-option",23),e._uU(117,"-"),e.qZA(),e.YNc(118,Jt,2,2,"mat-option",32),e.qZA()()(),e.TgZ(119,"div",33)(120,"mat-form-field",8)(121,"mat-label"),e._uU(122),e.ALo(123,"translate"),e.qZA(),e.TgZ(124,"mat-select",34),e.ALo(125,"translate"),e.TgZ(126,"mat-option",23),e._uU(127,"-"),e.qZA(),e.YNc(128,Wt,2,2,"mat-option",32),e.qZA()()()(),e.TgZ(129,"div",35)(130,"div",36)(131,"mat-form-field",8)(132,"mat-label"),e._uU(133),e.ALo(134,"translate"),e.qZA(),e.TgZ(135,"input",37,38),e.NdJ("keyup.enter",function(){e.CHM(o);const c=e.MAs(136);return e.KtG(i.searchByCode(c.value))}),e.qZA()()(),e.TgZ(137,"div",16)(138,"label"),e._uU(139),e.ALo(140,"translate"),e.qZA(),e.TgZ(141,"ng-select",39),e.NdJ("change",function(c){return i.readCustumer(c)}),e.ALo(142,"translate"),e.YNc(143,Kt,2,2,"ng-option",32),e.qZA()(),e.TgZ(144,"div",40)(145,"mat-form-field",8)(146,"mat-label"),e._uU(147),e.ALo(148,"translate"),e.qZA(),e.TgZ(149,"mat-select",41),e.ALo(150,"translate"),e.TgZ(151,"mat-option",23),e._uU(152,"-"),e.qZA(),e.YNc(153,Vt,2,2,"mat-option",32),e.qZA()()()()()(),e.TgZ(154,"div",42),e.YNc(155,Yt,3,1,"a",43),e.YNc(156,Gt,7,3,"div",44),e.qZA()(),e.TgZ(157,"mat-tab",45),e.ALo(158,"translate"),e.TgZ(159,"div",4)(160,"div",5),e._UZ(161,"mat-label"),e.TgZ(162,"div",6)(163,"div",12)(164,"mat-form-field",8)(165,"mat-label"),e._uU(166),e.ALo(167,"translate"),e.qZA(),e.TgZ(168,"mat-select",46),e.NdJ("selectionChange",function(c){return i.getBuildings(c)}),e.ALo(169,"translate"),e.TgZ(170,"mat-option",23),e._uU(171,"-"),e.qZA(),e.YNc(172,Qt,2,2,"mat-option",32),e.qZA()()()(),e.TgZ(173,"div",6)(174,"div",16)(175,"mat-form-field",8)(176,"mat-label"),e._uU(177),e.ALo(178,"translate"),e.qZA(),e.TgZ(179,"mat-select",47),e.NdJ("selectionChange",function(c){return i.readBuilding(c)}),e.ALo(180,"translate"),e.TgZ(181,"mat-option",23),e._uU(182,"-"),e.qZA(),e.YNc(183,jt,2,2,"mat-option",32),e.qZA()()(),e.TgZ(184,"div",16)(185,"mat-form-field",8)(186,"mat-label"),e._uU(187),e.ALo(188,"translate"),e.qZA(),e.TgZ(189,"mat-select",48),e.NdJ("selectionChange",function(c){return i.readUnit(c)}),e.ALo(190,"translate"),e.TgZ(191,"mat-option",23),e._uU(192,"-"),e.qZA(),e.YNc(193,$t,2,2,"mat-option",32),e.qZA()()()()()()(),e.TgZ(194,"mat-tab",49),e.ALo(195,"translate"),e.TgZ(196,"div",4)(197,"div",5),e._UZ(198,"mat-label"),e.TgZ(199,"div",6)(200,"div",21)(201,"mat-form-field",8)(202,"mat-label"),e._uU(203),e.ALo(204,"translate"),e.qZA(),e.TgZ(205,"input",50),e.NdJ("change",function(c){return i.onChangeContractValue(c)}),e.qZA()()(),e.TgZ(206,"div",21)(207,"mat-form-field",8)(208,"mat-label"),e._uU(209),e.ALo(210,"translate"),e.qZA(),e.TgZ(211,"input",51),e.NdJ("change",function(c){return i.onChangePayEvery(c)}),e.qZA()()(),e.TgZ(212,"div",21)(213,"mat-form-field",8)(214,"mat-label"),e._uU(215),e.ALo(216,"translate"),e.qZA(),e._UZ(217,"input",52),e.qZA()()()(),e.TgZ(218,"div",6)(219,"div",53)(220,"mat-form-field",8)(221,"mat-label"),e._uU(222),e.ALo(223,"translate"),e.qZA(),e._UZ(224,"input",54),e.qZA()(),e.TgZ(225,"div",53)(226,"mat-form-field",8)(227,"mat-label"),e._uU(228),e.ALo(229,"translate"),e.qZA(),e._UZ(230,"input",55),e.qZA()(),e.TgZ(231,"div",53)(232,"mat-form-field",8)(233,"mat-label"),e._uU(234),e.ALo(235,"translate"),e.qZA(),e._UZ(236,"input",56),e.qZA()(),e.TgZ(237,"div",53)(238,"mat-form-field",8)(239,"mat-label"),e._uU(240),e.ALo(241,"translate"),e.qZA(),e._UZ(242,"input",57),e.qZA()()(),e.TgZ(243,"div",6)(244,"div",58)(245,"mat-form-field",8)(246,"mat-label"),e._uU(247),e.ALo(248,"translate"),e.qZA(),e._UZ(249,"input",59),e.qZA()()(),e.TgZ(250,"div",6)(251,"div",16)(252,"mat-form-field",8)(253,"mat-label"),e._uU(254),e.ALo(255,"translate"),e.qZA(),e._UZ(256,"input",60),e.qZA()(),e.TgZ(257,"div",16)(258,"mat-form-field",8)(259,"mat-label"),e._uU(260),e.ALo(261,"translate"),e.qZA(),e._UZ(262,"input",61),e.qZA()()(),e.TgZ(263,"div",6)(264,"div",16)(265,"mat-form-field",8)(266,"mat-label"),e._uU(267),e.ALo(268,"translate"),e.qZA(),e._UZ(269,"input",62),e.qZA()(),e.TgZ(270,"div",16)(271,"mat-form-field",8)(272,"mat-label"),e._uU(273),e.ALo(274,"translate"),e.qZA(),e._UZ(275,"input",63),e.qZA()()(),e.TgZ(276,"div",6)(277,"div",16)(278,"mat-form-field",8)(279,"mat-label"),e._uU(280),e.ALo(281,"translate"),e.qZA(),e._UZ(282,"input",64),e.qZA()(),e.TgZ(283,"div",16)(284,"mat-form-field",8)(285,"mat-label"),e._uU(286),e.ALo(287,"translate"),e.qZA(),e._UZ(288,"input",65),e.qZA()()()()(),e.TgZ(289,"mat-tab",66),e.ALo(290,"translate"),e.TgZ(291,"div",4)(292,"mat-checkbox",67),e._uU(293),e.ALo(294,"translate"),e.qZA(),e.TgZ(295,"mat-checkbox",68),e._uU(296),e.ALo(297,"translate"),e.qZA()()(),e.TgZ(298,"mat-tab",69),e.ALo(299,"translate"),e.TgZ(300,"div",70)(301,"div",71),e._UZ(302,"img",72),e.TgZ(303,"input",73,74),e.NdJ("change",function(c){return i.onFileChange(c.target.files)}),e.qZA(),e.TgZ(305,"button",75),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(304);return e.KtG(c.click())}),e._uU(306),e.ALo(307,"translate"),e.qZA()(),e._UZ(308,"mat-divider")(309,"input-file",76),e.qZA()()()(),e._UZ(310,"br"),e.TgZ(311,"div",77)(312,"div",6),e.YNc(313,ei,3,4,"button",78),e.qZA()()}if(2&t){const o=e.MAs(30),s=e.MAs(40),c=e.MAs(49);e.Q6J("ngIf","T"==i.isRenewContract),e.xp6(1),e.Q6J("ngIf","T"!=i.isRenewContract),e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("backgroundColor","primary")("color","warn"),e.xp6(1),e.s9C("label",e.lcZ(5,80,"HTML.TAB_BASIC")),e.xp6(9),e.hij(" ",e.lcZ(14,82,"HTML.CODE_Contract"),""),e.xp6(6),e.hij(" ",e.lcZ(20,84,"HTML.SUBCODE"),""),e.xp6(6),e.Oqu(e.lcZ(26,86,"HTML.ContractDate")),e.xp6(2),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(7),e.Oqu(e.lcZ(36,88,"HTML.ContractStartDate")),e.xp6(2),e.Q6J("matDatepicker",s),e.xp6(1),e.Q6J("for",s),e.xp6(6),e.Oqu(e.lcZ(45,90,"HTML.ContractEndDate")),e.xp6(2),e.Q6J("matDatepicker",c),e.xp6(1),e.Q6J("for",c),e.xp6(7),e.Oqu(e.lcZ(55,92,"HTML.ContractStatus")),e.xp6(2),e.s9C("placeholder",e.lcZ(57,94,"HTML.ContractStatus")),e.xp6(4),e.Q6J("value","N"),e.xp6(1),e.Oqu(e.lcZ(62,96,"OPTIONS.NEW")),e.xp6(2),e.Q6J("value","R"),e.xp6(1),e.Oqu(e.lcZ(65,98,"OPTIONS.ReNew")),e.xp6(2),e.Q6J("value","C"),e.xp6(1),e.Oqu(e.lcZ(68,100,"OPTIONS.Canceld")),e.xp6(2),e.Q6J("value","F"),e.xp6(1),e.Oqu(e.lcZ(71,102,"OPTIONS.Finished")),e.xp6(5),e.Oqu(e.lcZ(76,104,"HTML.ContractEjarCode")),e.xp6(6),e.Oqu(e.lcZ(82,106,"HTML.ContractAlarmStartDate")),e.xp6(7),e.hij(" ",e.lcZ(89,108,"HTML.ContractNoOfDaysForAlarm"),""),e.xp6(6),e.hij(" ",e.lcZ(95,110,"HTML.ContractNoOfDaysForEjarAlarm"),""),e.xp6(6),e.hij(" ",e.lcZ(101,112,"HTML.ContractAlarmCounter"),""),e.xp6(3),e.s9C("label",e.lcZ(104,114,"HTML.TAB_ContractPersons")),e.xp6(9),e.hij(" ",e.lcZ(113,116,"HTML.OWNER"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(115,118,"HTML.OWNER")),e.xp6(4),e.Q6J("ngForOf",i.AllOwners),e.xp6(4),e.hij(" ",e.lcZ(123,120,"HTML.OwnerRepresentative"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(125,122,"HTML.OwnerRepresentative")),e.xp6(4),e.Q6J("ngForOf",i.AllRepresentativeForOwner),e.xp6(5),e.Oqu(e.lcZ(134,124,"HTML.CODE_TENANT")),e.xp6(6),e.hij(" ",e.lcZ(140,126,"HTML.TENANT"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(142,128,"HTML.TENANT")),e.xp6(2),e.Q6J("ngForOf",i.AllTenants),e.xp6(4),e.hij(" ",e.lcZ(148,130,"HTML.TenantRepresentative"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(150,132,"HTML.TenantRepresentative")),e.xp6(4),e.Q6J("ngForOf",i.AllRepresentativeForCustomer),e.xp6(2),e.Q6J("ngIf",i.contractForDisplay.id&&i.fileToUpload&&i.can("view_ejar_pdf")),e.xp6(1),e.Q6J("ngIf",i.can("add_ejar_pdf")),e.xp6(1),e.s9C("label",e.lcZ(158,134,"HTML.TAB_ContractUnit")),e.xp6(9),e.hij(" ",e.lcZ(167,136,"HTML.BRANCH"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(169,138,"HTML.BRANCH")),e.xp6(4),e.Q6J("ngForOf",i.AllBranches),e.xp6(5),e.hij(" ",e.lcZ(178,140,"HTML.BUILDING"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(180,142,"HTML.BUILDING")),e.xp6(4),e.Q6J("ngForOf",i.AllBuilding),e.xp6(4),e.hij(" ",e.lcZ(188,144,"HTML.UNIT"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(190,146,"HTML.UNIT")),e.xp6(4),e.Q6J("ngForOf",i.AllUnitsForBuilding),e.xp6(1),e.s9C("label",e.lcZ(195,148,"HTML.TAB_ContractValues")),e.xp6(9),e.Oqu(e.lcZ(204,150,"HTML.ContractValue")),e.xp6(6),e.Oqu(e.lcZ(210,152,"HTML.PayEveryMonthesNo")),e.xp6(6),e.Oqu(e.lcZ(216,154,"HTML.InstallmentValue")),e.xp6(7),e.Oqu(e.lcZ(223,156,"HTML.InsuranceValue")),e.xp6(6),e.Oqu(e.lcZ(229,158,"HTML.SeekingValue")),e.xp6(6),e.Oqu(e.lcZ(235,160,"HTML.MonthlyExpense")),e.xp6(6),e.Oqu(e.lcZ(241,162,"HTML.OtherValue")),e.xp6(7),e.Oqu(e.lcZ(248,164,"HTML.ExpenseDesc")),e.xp6(7),e.Oqu(e.lcZ(255,166,"HTML.MonthlyElectricValue")),e.xp6(6),e.Oqu(e.lcZ(261,168,"HTML.ElectricCounterReading")),e.xp6(7),e.Oqu(e.lcZ(268,170,"HTML.MonthlyWaterValue")),e.xp6(6),e.Oqu(e.lcZ(274,172,"HTML.WaterCounterReading")),e.xp6(7),e.Oqu(e.lcZ(281,174,"HTML.MonthlyGasValue")),e.xp6(6),e.Oqu(e.lcZ(287,176,"HTML.GasCounterReading")),e.xp6(3),e.s9C("label",e.lcZ(290,178,"HTML.TAB_SETTINGS")),e.xp6(4),e.Oqu(e.lcZ(294,180,"HTML.ACTIVE")),e.xp6(3),e.Oqu(e.lcZ(297,182,"HTML.BLOCKED")),e.xp6(2),e.s9C("label",e.lcZ(299,184,"HTML.TAB_DOCS")),e.xp6(4),e.Q6J("src",i.defaultDocImage,e.LSH),e.xp6(4),e.Oqu(e.lcZ(307,186,"HTML.AddPic")),e.xp6(7),e.Q6J("ngIf",i.contractForDisplay.id&&i.can("change_rentcontracts")||!i.contractForDisplay.id&&i.can("add_rentcontracts"))}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,_.sg,_.O5,m.sg,m.u,m.x0,T.xw,T.SQ,T.Wh,T.yH,K.ey,b.lW,et.oG,Y.Mq,Y.hl,Y.nW,Z.ZT,Z.uh,Z.H8,Q.Hw,A.Nt,v.KE,v.hX,v.R9,ee.d,E.gD,Te.uX,Te.SP,tt.tW,ve.w9,ve.jq,y.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.file-input{display:none}.custom-button{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px}.custom-button:hover{background-color:#0056b3}\n"],encapsulation:2});var Ct=f(529),Ae=f(1948),ti=f(589),ii=f(9045),Tt=f(7948);class bt{}var vt=f(900);function ni(n,t){if(1&n&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.value),e.xp6(1),e.hij(" ",i.name," ")}}function oi(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.onSave())}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const i=e.oxw();e.Q6J("disabled",!i.dataForm.valid),e.xp6(2),e.Oqu(e.lcZ(3,2,"BTN.SAVE"))}}function ai(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.remove(s.id))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.REMOVE"))}function ri(n,t){if(1&n&&(e.TgZ(0,"div",26)(1,"div",27),e._uU(2),e.qZA(),e.TgZ(3,"div",27),e._uU(4),e.qZA(),e.TgZ(5,"div",27),e._uU(6),e.qZA(),e.TgZ(7,"div",27),e._uU(8),e.qZA(),e.TgZ(9,"div",27),e._uU(10),e.qZA(),e.TgZ(11,"div",27)(12,"div",28),e.YNc(13,ai,4,3,"button",29),e.qZA()()()),2&n){const i=t.$implicit,o=e.oxw();e.xp6(2),e.Oqu(i.CURRelationTypeDisplay),e.xp6(2),e.Oqu(i.CURName),e.xp6(2),e.hij("",i.CURMobile," "),e.xp6(2),e.hij("",i.CURNationalID," "),e.xp6(2),e.hij("",i.CURBirthDate," "),e.xp6(3),e.Q6J("ngIf",o.can("delete_tenantrelative"))}}class Ie{constructor(t,i,o,s,c,C,x,U,M,F){this.dialogRef=t,this.dataInjected=i,this.atlasService=o,this._CustomerService=s,this.translateService=c,this.localStore=C,this.appService=x,this.dialog=U,this.snackBar=M,this.fb=F,this.passwordHide=!0,this.relatives=[],this.curCOMId=O.N.comid,this.userPerm=[]}ngOnInit(){this.relatives=this.appService.getRelative(),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.dataForm=this.fb.group({customer_KeyField:[null,m.kI.required],CURRelationType:[null,m.kI.required],CURName:[null,m.kI.required],CURMobile:null,CURPic:null,nationalID:null,birthday:null,CURWorkNature:null,CURNotes:null}),console.log(this.dataInjected.custId),this.dataForm.patchValue({customer_KeyField:this.dataInjected.custId}),this.oneRelated=new bt,this.curPeriority=this.dataInjected.periorty,this.action="Patch",this.getTenantRelated(),this.prepareMsgLanguage()}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getTenantRelated(){this.cusRelated=null,this._CustomerService.getRelatedPerCustomers(this.curCOMId,this.curPeriority,this.dataInjected.custId).subscribe(t=>this.cusRelated=t)}mapFormValue_toTable(){const t=new _.uU("en-GB").transform(this.dataForm.value.birthday,"dd/MM/yyyy");null!=this.dataForm.value.birthday&&(this.oneRelated.CURBirthDate=t),this.oneRelated.customer_KeyField=this.dataInjected.custId,this.oneRelated.CURRelationType=this.dataForm.value.CURRelationType,this.oneRelated.CURName=this.dataForm.value.CURName,this.oneRelated.CURMobile=this.dataForm.value.CURMobile,this.oneRelated.CURNationalID=this.dataForm.value.nationalID,this.oneRelated.CURWorkNature=this.dataForm.value.CURWorkNature,this.oneRelated.CURNotes=this.dataForm.value.CURNotes}onSave(){this.mapFormValue_toTable(),this._CustomerService.addRelatedForTenant(this.oneRelated).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(t){this.dialog.open(ne.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(o=>{o&&this._CustomerService.deleteRelativeForTenant(t).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(t=>{this.dataSavedMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(t=>{this.deletedTitleMsg=t})}}Ie.\u0275fac=function(t){return new(t||Ie)(e.Y36(Z.so),e.Y36(Z.WI),e.Y36(D.Z),e.Y36(L.v),e.Y36(y.sK),e.Y36(p.C),e.Y36(vt.z),e.Y36(Z.uw),e.Y36(I.ux),e.Y36(m.QS))},Ie.\u0275cmp=e.Xpm({type:Ie,selectors:[["app-cus-related-dialog"]],decls:78,vars:45,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","CURRelationType","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","CURName"],["matInput","","formControlName","CURMobile"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","nationalID"],["matInput","","formControlName","birthday",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],[3,"value"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-select",6),e.ALo(10,"translate"),e.YNc(11,ni,2,2,"mat-option",7),e.qZA()()(),e.TgZ(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"input",8),e.qZA()(),e.TgZ(18,"div",4)(19,"mat-form-field",5)(20,"mat-label"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"input",9),e.qZA()()(),e.TgZ(24,"div",3)(25,"div",10)(26,"mat-form-field",5)(27,"mat-label"),e._uU(28),e.ALo(29,"translate"),e.qZA(),e._UZ(30,"input",11),e.qZA()(),e.TgZ(31,"div",10)(32,"mat-form-field",5)(33,"mat-label"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e._UZ(36,"input",12)(37,"mat-datepicker-toggle",13)(38,"mat-datepicker",null,14),e.qZA()()()()(),e.TgZ(40,"div",15)(41,"div",3),e.YNc(42,oi,4,4,"button",16),e.TgZ(43,"button",17),e.NdJ("click",function(){return i.close()}),e._uU(44),e.ALo(45,"translate"),e.qZA()()(),e._UZ(46,"mat-divider"),e.TgZ(47,"div",18)(48,"mat-card")(49,"div",19)(50,"h2"),e._uU(51),e.ALo(52,"translate"),e.qZA()(),e._UZ(53,"mat-divider"),e.TgZ(54,"div",20)(55,"div",21)(56,"div",22)(57,"h2"),e._uU(58),e.ALo(59,"translate"),e.qZA()(),e.TgZ(60,"div",22)(61,"h2"),e._uU(62),e.ALo(63,"translate"),e.qZA()(),e.TgZ(64,"div",22)(65,"h2"),e._uU(66),e.ALo(67,"translate"),e.qZA()(),e.TgZ(68,"div",22)(69,"h2"),e._uU(70),e.ALo(71,"translate"),e.qZA()(),e.TgZ(72,"div",22)(73,"h2"),e._uU(74),e.ALo(75,"translate"),e.qZA()(),e._UZ(76,"div",22),e.qZA(),e.YNc(77,ri,14,6,"div",23),e.qZA()()()()),2&t){const o=e.MAs(39);e.Q6J("formGroup",i.dataForm),e.xp6(7),e.hij(" ",e.lcZ(8,19,"HTML.Relative"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(10,21,"HTML.Relative")),e.xp6(2),e.Q6J("ngForOf",i.relatives),e.xp6(4),e.Oqu(e.lcZ(16,23,"FIELD.NAME")),e.xp6(6),e.Oqu(e.lcZ(22,25,"HTML.MOBILE")),e.xp6(7),e.Oqu(e.lcZ(29,27,"HTML.IDNUMBER")),e.xp6(6),e.Oqu(e.lcZ(35,29,"HTML.BIRTH_DATE")),e.xp6(2),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(5),e.Q6J("ngIf",i.can("add_tenantrelative")||0==i.curPeriority),e.xp6(2),e.Oqu(e.lcZ(45,31,"BTN.CANCEL")),e.xp6(7),e.Oqu(e.lcZ(52,33,"HTML.Relative")),e.xp6(7),e.hij(" ",e.lcZ(59,35,"HTML.Relative")," "),e.xp6(4),e.hij(" ",e.lcZ(63,37,"FIELD.NAME")," "),e.xp6(4),e.hij(" ",e.lcZ(67,39,"HTML.MOBILE")," "),e.xp6(4),e.hij(" ",e.lcZ(71,41,"HTML.IDNUMBER")," "),e.xp6(4),e.hij(" ",e.lcZ(75,43,"HTML.BIRTH_DATE")," "),e.xp6(3),e.Q6J("ngForOf",i.cusRelated)}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,_.sg,_.O5,m.sg,m.u,T.xw,T.Wh,T.yH,K.ey,b.lW,b.nh,V.a8,Y.Mq,Y.hl,Y.nW,Z.xY,Z.H8,Q.Hw,A.Nt,v.KE,v.hX,v.R9,ee.d,E.gD,pe.gM,y.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});var ht=f(6331),Re=f(1481);function si(n,t){if(1&n&&(e.TgZ(0,"div")(1,"a",29)(2,"mat-icon"),e._uU(3,"download"),e.qZA()()()),2&n){const i=e.oxw(2);e.xp6(1),e.s9C("href",i.registerFileToUpload,e.LSH)}}function li(n,t){if(1&n&&(e.ynx(0),e._UZ(1,"img",32),e.BQk()),2&n){const i=e.oxw(3);e.xp6(1),e.Q6J("src",i.registerFileUrl,e.LSH)}}function ci(n,t){if(1&n&&e._UZ(0,"iframe",33),2&n){const i=e.oxw(3);e.Q6J("src",i.sanitizedFileUrl,e.uOi)}}function ui(n,t){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,li,2,1,"ng-container",30),e.YNc(2,ci,1,1,"ng-template",null,31,e.W1O),e.qZA()),2&n){const i=e.MAs(3),o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.isWekalaImage)("ngIfElse",i)}}function di(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",24),e.YNc(1,si,4,1,"div",25),e.TgZ(2,"div",26)(3,"input",27),e.NdJ("change",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.onRegisterFileSelected(s.target.files,s))}),e.qZA(),e.TgZ(4,"button",28),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.callOnRegisterFileSelect())}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,ui,4,2,"div",25),e.qZA()()}if(2&n){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.currentRelativeID&&i.registerFileToUpload),e.xp6(4),e.hij(" ",e.lcZ(6,3,"HTML.ChooseWekalaFile"),""),e.xp6(2),e.Q6J("ngIf",i.registerFileUrl)}}function mi(n,t){1&n&&(e.TgZ(0,"div",34)(1,"mat-form-field",6)(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",35),e.qZA()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"HTML.IDNUMBER")))}function pi(n,t){1&n&&(e.TgZ(0,"div",34)(1,"mat-form-field",6)(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",36),e.qZA()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"HTML.WorkNature")))}function hi(n,t){1&n&&(e.TgZ(0,"div",4)(1,"div",37)(2,"mat-form-field",6)(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",38),e.qZA()(),e.TgZ(7,"div",8)(8,"mat-form-field",6)(9,"mat-label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"input",39),e.qZA()()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,2,"HTML.ADDRESS")),e.xp6(6),e.Oqu(e.lcZ(11,4,"HTML.ShortAddress")))}function gi(n,t){if(1&n&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function _i(n,t){if(1&n&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function fi(n,t){if(1&n&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function Ci(n,t){if(1&n&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function Ti(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"mat-form-field",6)(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-select",40),e.NdJ("selectionChange",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.getGovernorate(s))}),e.ALo(7,"translate"),e.TgZ(8,"mat-option",41),e._uU(9,"-"),e.qZA(),e.YNc(10,gi,2,2,"mat-option",42),e.qZA()()(),e.TgZ(11,"div",5)(12,"mat-form-field",6)(13,"mat-label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"mat-select",43),e.NdJ("selectionChange",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.getCity(s))}),e.ALo(17,"translate"),e.TgZ(18,"mat-option",41),e._uU(19,"-"),e.qZA(),e.YNc(20,_i,2,2,"mat-option",42),e.qZA()()(),e.TgZ(21,"div",5)(22,"mat-form-field",6)(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"mat-select",44),e.NdJ("selectionChange",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.getAria(s))}),e.ALo(27,"translate"),e.TgZ(28,"mat-option",41),e._uU(29,"-"),e.qZA(),e.YNc(30,fi,2,2,"mat-option",42),e.qZA()()(),e.TgZ(31,"div",5)(32,"mat-form-field",6)(33,"mat-label"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"mat-select",45),e.ALo(37,"translate"),e.TgZ(38,"mat-option",41),e._uU(39,"-"),e.qZA(),e.YNc(40,Ci,2,2,"mat-option",42),e.qZA()()()()}if(2&n){const i=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,12,"HTML.COUNTRY")),e.xp6(2),e.s9C("placeholder",e.lcZ(7,14,"HTML.COUNTRY")),e.xp6(4),e.Q6J("ngForOf",i.Countries),e.xp6(4),e.Oqu(e.lcZ(15,16,"HTML.GOVERN")),e.xp6(2),e.s9C("placeholder",e.lcZ(17,18,"HTML.GOVERN")),e.xp6(4),e.Q6J("ngForOf",i.Governorates),e.xp6(4),e.Oqu(e.lcZ(25,20,"HTML.CITY")),e.xp6(2),e.s9C("placeholder",e.lcZ(27,22,"HTML.CITY")),e.xp6(4),e.Q6J("ngForOf",i.Cities),e.xp6(4),e.Oqu(e.lcZ(35,24,"HTML.REGION")),e.xp6(2),e.s9C("placeholder",e.lcZ(37,26,"HTML.REGION")),e.xp6(4),e.Q6J("ngForOf",i.Areas)}}function bi(n,t){1&n&&(e.TgZ(0,"div",4)(1,"div",46)(2,"mat-form-field",6)(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",47),e.qZA()(),e.TgZ(7,"div",8)(8,"mat-form-field",6)(9,"mat-label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"input",48),e.qZA()(),e.TgZ(13,"div",8)(14,"mat-form-field",6)(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"input",49),e.qZA()(),e.TgZ(19,"div",8)(20,"mat-form-field",6)(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"input",50),e.qZA()()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,4,"HTML.STREET_NAME")),e.xp6(6),e.Oqu(e.lcZ(11,6,"HTML.BUILDING_NUMBER")),e.xp6(6),e.Oqu(e.lcZ(17,8,"HTML.ZIP")),e.xp6(6),e.Oqu(e.lcZ(23,10,"HTML.BUILDING_SubNUMBER")))}function vi(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.onSave())}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const i=e.oxw();e.Q6J("disabled",!i.dataForm.valid),e.xp6(2),e.Oqu(e.lcZ(3,2,"BTN.SAVE"))}}function Zi(n,t){1&n&&(e.TgZ(0,"div",21)(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"HTML.IDNUMBER")," "))}function Ai(n,t){1&n&&(e.TgZ(0,"div",21)(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"HTML.IsRepresentative")," "))}function xi(n,t){1&n&&(e.TgZ(0,"div",21)(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"HTML.BIRTH_DATE")," "))}function yi(n,t){if(1&n&&(e.TgZ(0,"div",53),e._uU(1),e.qZA()),2&n){const i=e.oxw().$implicit;e.xp6(1),e.hij("",i.CURNationalID," ")}}function Ui(n,t){if(1&n&&(e.TgZ(0,"div",53),e._uU(1),e.qZA()),2&n){const i=e.oxw().$implicit;e.xp6(1),e.hij("",i.CURisRepresentative," ")}}function wi(n,t){if(1&n&&(e.TgZ(0,"div",53),e._uU(1),e.qZA()),2&n){const i=e.oxw().$implicit;e.xp6(1),e.hij("",i.CURBirthDate," ")}}function Si(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.displayRow(s))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.VIEW"))}function Oi(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.remove(s.id))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.REMOVE"))}function Ni(n,t){if(1&n&&(e.TgZ(0,"div",52)(1,"div",53),e._uU(2),e.qZA(),e.TgZ(3,"div",53),e._uU(4),e.qZA(),e.TgZ(5,"div",53),e._uU(6),e.qZA(),e.YNc(7,yi,2,1,"div",54),e.YNc(8,Ui,2,1,"div",54),e.YNc(9,wi,2,1,"div",54),e.TgZ(10,"div",53)(11,"div",55),e.YNc(12,Si,4,3,"button",56),e.YNc(13,Oi,4,3,"button",57),e.qZA()()()),2&n){const i=t.$implicit,o=e.oxw();e.xp6(2),e.Oqu(i.CURName),e.xp6(2),e.hij("",i.CURMobile," "),e.xp6(2),e.hij("",i.CURWorkNature," "),e.xp6(1),e.Q6J("ngIf",o.personType===o.personTypeWakeel),e.xp6(1),e.Q6J("ngIf",o.personType===o.personTypeWakeel),e.xp6(1),e.Q6J("ngIf",o.personType===o.personTypeWakeel),e.xp6(3),e.Q6J("ngIf",o.can(o.personType===o.personTypeWakeel?"view_tenant_workrelated_agency":"view_tenant_workrelated")),e.xp6(1),e.Q6J("ngIf",o.can(o.personType===o.personTypeWakeel?"delete_tenant_workrelated_agency":"delete_tenant_workrelated"))}}class xe{constructor(t,i,o,s,c,C,x,U,M,F,W,te){this.dialogRef=t,this.dataInjected=i,this.atlasService=o,this._CustomerService=s,this.translateService=c,this.localStore=C,this.appService=x,this.dialog=U,this.snackBar=M,this.codesService=F,this.sanitizer=W,this.fb=te,this.passwordHide=!0,this.country_const=(new w.I).Countries,this.governorate_const=(new w.I).Governorates,this.city_const=(new w.I).City,this.region_const=(new w.I).Regions,this.relatives=[],this.currentRelativeID=null,this.currentRowMode=null,this.registerFileToUpload=null,this.curCOMId=O.N.comid,this.userPerm=[],this.registerFileUrl=null,this.isWekalaImage=!1,this.registerFileType=null,this.defaultCusImage=(new N.P).noImage,this.CusImageToUpload=null,this.isResp=!1,this.Countries=[],this.Governorates=[],this.Cities=[],this.Areas=[]}ngOnInit(){this.personType=this.dataInjected.personType,this.personTypeWakeel="W",this.personTypeResp="P",this.currentRowMode="INSERT",this.relatives=this.appService.getRelative(),this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.dataForm=this.fb.group({id:null,customer_KeyField:[null,m.kI.required],CURRelationType:"K",CURName:[null,m.kI.required],CURMobile:null,nationalID:null,birthday:null,CURWorkNature:null,CURNotes:null,image:null,CURisRepresentative:!1,CURAddress:null,CURShortAddress:null,CURStreetName:null,CURBuildingNumber:null,CURBuildingSubNumber:null,CURZibCode:null,Country_CTTKeyField:null,Governorate_CTTKeyField:null,City_CTTKeyField:null,Area_CTTKeyField:null,CURRepresentativePdf:null,CURIdPdf:null}),console.log(this.dataInjected.custId),this.dataForm.patchValue({customer_KeyField:this.dataInjected.custId}),this.personType==this.personTypeWakeel&&this.dataForm.patchValue({CURisRepresentative:!0}),this.oneRelated=new bt,this.curPeriority=this.dataInjected.periorty,this.action="Patch",this.getTenantRelated(),this.getCountries(this.curCOMId,this.curPeriority),this.prepareMsgLanguage()}getFileType(t){const i=t.type;return"application/pdf"===i?"PDF":i.startsWith("image/")?"IMAGE":"NOT"}onRegisterFileSelected(t,i){if(t&&t.length){switch(this.getFileType(t.item(0))){case"IMAGE":this.isWekalaImage=!0,this.registerFileType=this.imageFileSelected;break;case"PDF":this.isWekalaImage=!1,this.registerFileType=this.pdfFileSelected;break;case"NOT":this.isWekalaImage=!1,this.registerFileType=this.otherFileSelected}const c=new FileReader;c.onload=U=>{this.registerFileUrl=c.result,this.sanitizedFileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(U.target.result)},c.readAsDataURL(t.item(0)),this.registerFileToUpload=t.item(0),document.getElementById("wekalaCustomButton").textContent=t.length>0?t[0].name:this.chooseWekalaFilePDF}}getFileTypeFromPath(t){switch(t.split(".").pop()?.toLowerCase().substring(0,3)){case"jpg":case"jpe":case"png":case"gif":return"Image";case"pdf":return"PDF";case"doc":return"Word Document";case"xls":return"Excel Document";default:return"Unknown File Type"}}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getTenantRelated(){this.cusRelated=null,this.personType==this.personTypeWakeel&&this._CustomerService.getWorkRelatedWakeelPerCustomers(this.curCOMId,this.curPeriority,this.dataInjected.custId).subscribe(t=>this.cusRelated=t),this.personType==this.personTypeResp&&this._CustomerService.getWorkRelatedNotWakeelPerCustomers(this.curCOMId,this.curPeriority,this.dataInjected.custId).subscribe(t=>this.cusRelated=t)}mapFormValue_toTable(){const t=new _.uU("en-GB").transform(this.dataForm.value.birthday,"dd/MM/yyyy");null!=this.dataForm.value.birthday&&(this.oneRelated.CURBirthDate=t),this.oneRelated.CURisRepresentative=0==this.dataForm.value.CURisRepresentative?"F":"T",this.oneRelated.CURPic=this.dataForm.value.image,this.oneRelated.customer_KeyField=this.dataInjected.custId,this.oneRelated.CURRelationType=this.dataForm.value.CURRelationType,this.oneRelated.CURName=this.dataForm.value.CURName,this.oneRelated.CURMobile=this.dataForm.value.CURMobile,this.oneRelated.CURNationalID=this.dataForm.value.nationalID,this.oneRelated.CURWorkNature=this.dataForm.value.CURWorkNature,this.oneRelated.CURNotes=this.dataForm.value.CURNotes,this.oneRelated.CURAddress=this.dataForm.value.CURAddress,this.oneRelated.CURShortAddress=this.dataForm.value.CURShortAddress,this.oneRelated.CURStreetName=this.dataForm.value.CURStreetName,this.oneRelated.CURBuildingNumber=this.dataForm.value.CURBuildingNumber,this.oneRelated.CURBuildingSubNumber=this.dataForm.value.CURBuildingSubNumber,this.oneRelated.CURZibCode=this.dataForm.value.CURZibCode,this.dataForm.value.Country_CTTKeyField&&(this.oneRelated.Country_CTTKeyField=this.dataForm.value.Country_CTTKeyField),this.dataForm.value.Governorate_CTTKeyField&&(this.oneRelated.Governorate_CTTKeyField=this.dataForm.value.Governorate_CTTKeyField),this.dataForm.value.City_CTTKeyField&&(this.oneRelated.City_CTTKeyField=this.dataForm.value.City_CTTKeyField),this.dataForm.value.Area_CTTKeyField&&(this.oneRelated.Area_CTTKeyField=this.dataForm.value.Area_CTTKeyField),this.dataForm.value.CURRepresentativePdf&&(this.oneRelated.CURRepresentativePdf=this.dataForm.value.CURRepresentativePdf),this.dataForm.value.CURIdPdf&&(this.oneRelated.CURIdPdf=this.dataForm.value.CURIdPdf)}handelCUSImgInput(t){this.CusImageToUpload=t.item(0);var i=new FileReader;i.onload=o=>{this.defaultCusImage=o.target.result},i.readAsDataURL(this.CusImageToUpload)}callOnRegisterFileSelect(){document.getElementById("wekalaFileInput").click()}onSave(){this.mapFormValue_toTable(),"INSERT"==this.currentRowMode?this._CustomerService.addRelatedForTenantWithPic(this.oneRelated,this.CusImageToUpload,this.registerFileToUpload).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()}):"EDIT"==this.currentRowMode&&this._CustomerService.editRelatedForTenantWithPic(this.oneRelated,this.currentRelativeID,this.CusImageToUpload,this.registerFileToUpload).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}displayRow(t){var i;this.isWekalaImage=!1,this.registerFileUrl="",this.sanitizedFileUrl="",console.log("===***Press Display button***==="),this.currentRelativeID=t.id,this.currentRowMode="EDIT",t.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.curPeriority,t.Country_CTTKeyField),t.Governorate_CTTKeyField&&this.getCityPerGoverno(this.curCOMId,this.curPeriority,t.Governorate_CTTKeyField),t.City_CTTKeyField&&this.getAreaPerCity(this.curCOMId,this.curPeriority,t.City_CTTKeyField),this.registerFileToUpload=t.CURRepresentativePdf,this.registerFileToUpload&&("Image"==(i=this.getFileTypeFromPath(this.registerFileToUpload.toString()))?(this.isWekalaImage=!0,this.registerFileUrl=this.registerFileToUpload.toString()):"PDF"==i?(this.isWekalaImage=!1,this.sanitizedFileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.registerFileToUpload.name)):console.log("Selected file is of another type:",i)),"T"==t.CURisRepresentative&&(this.isResp=!0),"F"==t.CURisRepresentative&&(this.isResp=!1),this.dataForm.patchValue({id:t.id,customer_KeyField:t.customer_KeyField,CURRelationType:t.CURRelationType,CURName:t.CURName,CURMobile:t.CURMobile,image:t.CURPic,nationalID:t.CURNationalID,birthday:t.CURBirthDate,CURWorkNature:t.CURWorkNature,CURNotes:t.CURNotes,CURisRepresentative:this.isResp,CURAddress:t.CURAddress,CURShortAddress:t.CURShortAddress,CURStreetName:t.CURStreetName,CURBuildingNumber:t.CURBuildingNumber,CURBuildingSubNumber:t.CURBuildingSubNumber,CURZibCode:t.CURZibCode,Country_CTTKeyField:t.Country_CTTKeyField,Governorate_CTTKeyField:t.Governorate_CTTKeyField,City_CTTKeyField:t.City_CTTKeyField,Area_CTTKeyField:t.Area_CTTKeyField,CURRepresentativePdf:t.CURRepresentativePdf,CURIdPdf:t.CURIdPdf})}remove(t){this.dialog.open(ne.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(o=>{o&&this._CustomerService.deleteRelativeForTenant(t).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getTenantRelated()})})}getCountries(t,i){this.codesService.getSubForParent(t,i,this.country_const).subscribe(o=>{this.Countries=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(t){this.getGovernoratePerCountry(this.curCOMId,this.curPeriority,t.value)}getGovernoratePerCountry(t,i,o){this.codesService.getSubForParentAndRelated(t,i,this.governorate_const,o).subscribe(s=>{this.Governorates=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(t){this.getCityPerGoverno(this.curCOMId,this.curPeriority,t.value)}getCityPerGoverno(t,i,o){this.codesService.getSubForParentAndRelated(t,i,this.city_const,o).subscribe(s=>{this.Cities=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(t){this.getAreaPerCity(this.curCOMId,this.curPeriority,t.value)}getAreaPerCity(t,i,o){this.codesService.getSubForParentAndRelated(t,i,this.region_const,o).subscribe(s=>{this.Areas=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(t=>{this.dataSavedMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(t=>{this.deletedTitleMsg=t}),this.translateService.get("HTML.ChooseWekalaFile").subscribe(t=>{this.chooseWekalaFilePDF=t}),this.translateService.get("MESSAGE.ImageSelected").subscribe(t=>{this.imageFileSelected=t}),this.translateService.get("MESSAGE.PDFSelected").subscribe(t=>{this.pdfFileSelected=t}),this.translateService.get("MESSAGE.OtherFileSelected").subscribe(t=>{this.otherFileSelected=t})}}function Ii(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.ADD")))}function Di(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function Fi(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Code is required"),e.qZA())}function Li(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Code isn't long enough, minimum of 4 characters"),e.qZA())}function Mi(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Password is required"),e.qZA())}function Ei(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Password isn't long enough, minimum of 6 characters"),e.qZA())}function qi(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"mat-form-field",98)(1,"mat-label")(2,"mat-icon"),e._uU(3,"vpn_key"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",99),e.TgZ(7,"mat-icon",100),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.passwordHide=!s.passwordHide)}),e._uU(8),e.qZA(),e.YNc(9,Mi,2,0,"mat-error",1),e.YNc(10,Ei,2,0,"mat-error",1),e.qZA()}if(2&n){const i=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,5,"HTML.PASSWORD"),""),e.xp6(2),e.Q6J("type",i.passwordHide?"password":"text"),e.xp6(2),e.Oqu(i.passwordHide?"visibility":"visibility_off"),e.xp6(1),e.Q6J("ngIf",null==i.form.controls.password.errors?null:i.form.controls.password.errors.required),e.xp6(1),e.Q6J("ngIf",i.form.controls.password.hasError("minlength"))}}function Ri(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"First name is required"),e.qZA())}function Pi(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Last name is required"),e.qZA())}function ki(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Mobile is required"),e.qZA())}function Bi(n,t){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Oqu(i.fileType)}}function Hi(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.BRAArbName," ")}}function Ji(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.BUIName," ")}}function Wi(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.UNTUnitNumber," ")}}function Ki(n,t){1&n&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"HTML.ElectricityCounterNumber")," "))}function Vi(n,t){1&n&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"HTML.WaterCounterNumber")," "))}function Yi(n,t){1&n&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"HTML.GasCounterNumber")," "))}function Gi(n,t){if(1&n&&(e.TgZ(0,"ng-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName,"")}}function Qi(n,t){if(1&n&&(e.TgZ(0,"ng-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName,"")}}function ji(n,t){if(1&n&&(e.TgZ(0,"div")(1,"a",101)(2,"mat-icon"),e._uU(3,"download"),e.qZA()()()),2&n){const i=e.oxw();e.xp6(1),e.s9C("href",i.natIDfileToUpload,e.LSH)}}function $i(n,t){if(1&n&&(e.ynx(0),e._UZ(1,"img",104),e.BQk()),2&n){const i=e.oxw(2);e.xp6(1),e.Q6J("src",i.fileUrl,e.LSH)}}function zi(n,t){if(1&n&&e._UZ(0,"iframe",105),2&n){const i=e.oxw(2);e.Q6J("src",i.sanitizedUrl,e.uOi)}}function Xi(n,t){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,$i,2,1,"ng-container",102),e.YNc(2,zi,1,1,"ng-template",null,103,e.W1O),e.qZA()),2&n){const i=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.isImage)("ngIfElse",i)}}function en(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function tn(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function nn(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function on(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function an(n,t){1&n&&(e.TgZ(0,"mat-tab",106),e.ALo(1,"translate"),e.TgZ(2,"div",6),e._UZ(3,"mat-label"),e.TgZ(4,"div",5)(5,"mat-checkbox",107),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-checkbox",108),e._uU(9),e.ALo(10,"translate"),e.qZA()()()()),2&n&&(e.s9C("label",e.lcZ(1,3,"HTML.TAB_SETTINGS")),e.xp6(6),e.Oqu(e.lcZ(7,5,"HTML.ACTIVE")),e.xp6(3),e.Oqu(e.lcZ(10,7,"HTML.BLOCKED")))}function rn(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.SAVE")))}function sn(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function ln(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",109),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.saveUpdate(s.CUS.id))}),e.YNc(1,rn,3,3,"span",1),e.YNc(2,sn,3,3,"span",1),e.qZA()}if(2&n){const i=e.oxw();e.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),e.xp6(1),e.Q6J("ngIf",!i.CUS.id),e.xp6(1),e.Q6J("ngIf",i.CUS.id)}}function cn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",110),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.customerRelated(s.CUS.id))}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const i=e.oxw();e.Q6J("disabled",!i.form.valid||!i.CUS.id),e.xp6(2),e.Oqu(e.lcZ(3,2,"BTN.Accompany"))}}function un(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",110),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.changePassword(s.CUS))}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const i=e.oxw();e.Q6J("disabled",!i.form.valid||!i.CUS.id),e.xp6(2),e.Oqu(e.lcZ(3,2,"BTN.PasswordChange"))}}function dn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",110),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.confirmData(s.CUS.id))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&n){const i=e.oxw();e.Q6J("disabled",!i.form.valid||!i.CUS.id),e.xp6(1),e.Oqu(e.lcZ(2,2,"BTN.SUBMIT"))}}xe.\u0275fac=function(t){return new(t||xe)(e.Y36(Z.so),e.Y36(Z.WI),e.Y36(D.Z),e.Y36(L.v),e.Y36(y.sK),e.Y36(p.C),e.Y36(vt.z),e.Y36(Z.uw),e.Y36(I.ux),e.Y36(Xe.d),e.Y36(Re.H7),e.Y36(m.QS))},xe.\u0275cmp=e.Xpm({type:xe,selectors:[["app-cus-workrelated-dialog"]],decls:53,vars:31,consts:[["autocomplete","off","fxLayout","row wrap",1,"user-form","dialog-content",3,"formGroup"],["fxFlex","100","fxFlex.gt-sm","25","class","px-2",4,"ngIf"],["fxFlex","100",1,"px-2",3,"fxFlex.gt-sm"],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100","form-row"],["fxFlex","100","fxFlex.gt-sm","25.0",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","CURName"],["fxFlex","100","fxFlex.gt-sm","20.0",1,"px-1"],["matInput","","formControlName","CURMobile"],["fxFlex","100","fxFlex.gt-sm","54.9","class","px-1",4,"ngIf","ngIfElse"],["worknature",""],["fxLayout","row","fxLayoutAlign","space-between center","class","w-100 form-row",4,"ngIf"],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["mat-dialog-content",""],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-header-cell",4,"ngIf"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","25",1,"px-2"],[4,"ngIf"],["fxLayout","row"],["type","file","accept","image/*,.pdf","id","wekalaFileInput",1,"file-input",3,"change"],["id","wekalaCustomButton",1,"custom-button",3,"click"],["id","registerdownloadicon","target","_blank",3,"href"],[4,"ngIf","ngIfElse"],["pdfWekalaPreview",""],[2,"max-width","100%","height","250px",3,"src"],["frameborder","0",2,"width","100%","height","250px",3,"src"],["fxFlex","100","fxFlex.gt-sm","54.9",1,"px-1"],["matInput","","formControlName","nationalID"],["matInput","","formControlName","CURWorkNature"],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["matInput","","formControlName","CURAddress"],["matInput","","formControlName","CURShortAddress"],["formControlName","Country_CTTKeyField","id","own_countOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","Governorate_CTTKeyField","id","own_governoOpSel",3,"placeholder","selectionChange"],["formControlName","City_CTTKeyField","id","own_cityOpSel",3,"placeholder","selectionChange"],["formControlName","Area_CTTKeyField","id","own_areaOpSel",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","40.0",1,"px-1"],["matInput","","formControlName","CURStreetName"],["matInput","","formControlName","CURBuildingNumber"],["matInput","","formControlName","CURZibCode"],["matInput","","formControlName","CURBuildingSubNumber"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],["class","mat-mdc-cell",4,"ngIf"],[1,"p-2","actions"],["mat-mini-fab","","color","primary","class","mx-1",3,"matTooltip","click",4,"ngIf"],["class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",1,"mx-1",3,"matTooltip","click"],[1,"mx-1",3,"matTooltip","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"form",0),e.YNc(1,di,8,5,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",7),e.qZA()(),e.TgZ(11,"div",8)(12,"mat-form-field",6)(13,"mat-label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",9),e.qZA()(),e.YNc(17,mi,6,3,"div",10),e.YNc(18,pi,6,3,"ng-template",null,11,e.W1O),e.qZA(),e.YNc(20,hi,13,6,"div",12),e.YNc(21,Ti,41,28,"div",12),e.YNc(22,bi,25,12,"div",12),e.qZA(),e.TgZ(23,"div",13)(24,"div",14),e.YNc(25,vi,4,4,"button",15),e.TgZ(26,"button",16),e.NdJ("click",function(){return i.close()}),e._uU(27),e.ALo(28,"translate"),e.qZA()()()(),e._UZ(29,"mat-divider"),e.qZA(),e.TgZ(30,"div",17)(31,"div",18)(32,"mat-card"),e._UZ(33,"mat-divider"),e.TgZ(34,"div",19)(35,"div",20)(36,"div",21)(37,"h2"),e._uU(38),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"div",21)(41,"h2"),e._uU(42),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"div",21)(45,"h2"),e._uU(46),e.ALo(47,"translate"),e.qZA()(),e.YNc(48,Zi,4,3,"div",22),e.YNc(49,Ai,4,3,"div",22),e.YNc(50,xi,4,3,"div",22),e._UZ(51,"div",21),e.qZA(),e.YNc(52,Ni,14,8,"div",23),e.qZA()()()()),2&t){const o=e.MAs(19);e.Q6J("formGroup",i.dataForm),e.xp6(1),e.Q6J("ngIf",i.personType===i.personTypeWakeel),e.xp6(1),e.Q6J("fxFlex.gt-sm",i.personType===i.personTypeWakeel?"75":"100"),e.xp6(6),e.Oqu(e.lcZ(9,19,"FIELD.NAME")),e.xp6(6),e.Oqu(e.lcZ(15,21,"HTML.MOBILE")),e.xp6(3),e.Q6J("ngIf",i.personType===i.personTypeWakeel)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",i.personType===i.personTypeWakeel),e.xp6(1),e.Q6J("ngIf",i.personType===i.personTypeWakeel),e.xp6(1),e.Q6J("ngIf",i.personType===i.personTypeWakeel),e.xp6(3),e.Q6J("ngIf",i.can("add_tenant_workrelated")||0==i.curPeriority),e.xp6(2),e.Oqu(e.lcZ(28,23,"BTN.CANCEL")),e.xp6(11),e.hij(" ",e.lcZ(39,25,"FIELD.NAME")," "),e.xp6(4),e.hij(" ",e.lcZ(43,27,"HTML.MOBILE")," "),e.xp6(4),e.hij(" ",e.lcZ(47,29,"HTML.WorkNature")," "),e.xp6(2),e.Q6J("ngIf",i.personType===i.personTypeWakeel),e.xp6(1),e.Q6J("ngIf",i.personType===i.personTypeWakeel),e.xp6(1),e.Q6J("ngIf",i.personType===i.personTypeWakeel),e.xp6(2),e.Q6J("ngForOf",i.cusRelated)}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,_.sg,_.O5,m.sg,m.u,T.xw,T.Wh,T.yH,K.ey,b.lW,b.nh,V.a8,Z.xY,Z.H8,Q.Hw,A.Nt,v.KE,v.hX,ee.d,E.gD,pe.gM,y.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}.container[_ngcontent-%COMP%]{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.dialog-content[_ngcontent-%COMP%]{margin-top:16px}.file-input[_ngcontent-%COMP%]{display:none}.custom-button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px;height:40px}.custom-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.form-row[_ngcontent-%COMP%]{margin-bottom:-15px;margin-top:-5px}"]});class De{constructor(t,i,o,s,c,C,x,U,M,F,W,te,oe,be,ce,Ye,ft){this.transferService=t,this.appSettings=i,this.activatedRoute=o,this.codesService=s,this.unitsService=c,this.fb=C,this.localStore=x,this._CustomerService=U,this.router=M,this.dialog=F,this.global=W,this.atlasService=te,this.settingService=oe,this.translateService=be,this.contractService=ce,this.sanitizer=Ye,this.snackBar=ft,this.curCOMId=O.N.comid,this.account=new ae.n,this.country_const=(new w.I).Countries,this.governorate_const=(new w.I).Governorates,this.city_const=(new w.I).City,this.region_const=(new w.I).Regions,this.notificationType_const=(new w.I).NotificationTypes,this.job_const=(new w.I).Jobs,this.workplace_const=(new w.I).WorkPlaces,this.passwordHide=!0,this.tenant=new _e,this.editCode=!0,this.userPerm=[],this.brandfileToUpload=null,this.natIDfileToUpload=null,this.DocImageToUpload=null,this.defaultDocImage=(new N.P).noImage,this.defaultCusImage=(new N.P).noImage,this.CusImageToUpload=null,this.defaultIDImage=(new N.P).noImage,this.IDImageToUpload=null,this.fileType=null,this.idFileType=null,this.fileUrl=null,this.isImage=!1,this.AllBranches=[],this.notificationsObject=new Tt.j,this.allowedChar="1234567890",this.lengthOfCode=6,this.Jobs=[],this.WorkPlaces=[],this.Countries=[],this.Governorates=[],this.Cities=[],this.Areas=[],this.AllBuildings=[],this.AllUnits=[],this.settings=this.appSettings.settings}handleFileInputBrand(t){t&&t.length&&(this.brandfileToUpload=t.item(0)),document.getElementById("customButtonBrand").textContent=t.length>0?t[0].name:this.chooseFilePDFBrand}handleFileInputNatID(t){t&&t.length&&(this.natIDfileToUpload=t.item(0)),document.getElementById("customButtonNatId").textContent=t.length>0?t[0].name:this.chooseFilePDFNatID}callFileInputBrand(){document.getElementById("brandFileInput").click()}callFileInputNatId(){document.getElementById("natIDFileInput").click()}callFileInput(){document.getElementById("fileInput").click()}callOnHowiaFileSelect(){document.getElementById("howiaFileInput").click()}callIDFileInput(){document.getElementById("idFileInput").click()}ngOnInit(){if(this.isImage=!1,this.transferService.getMessage.subscribe(t=>{this.editCode="YES"==t.editTenantCode.toUpperCase(),console.log("---2222 this.editCode:: "+this.editCode)}),this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.prepareMsgLanguage(),this.getMaxCodeForCustomers(this.curCOMId,this.account.periorty),this.getCountries(this.curCOMId,this.account.periorty),this.getJobs(this.curCOMId,this.account.periorty),this.getWorkPlaces(this.curCOMId,this.account.periorty),this.getNotificationRows(this.curCOMId,this.account.periorty,1),this.sub=this.activatedRoute.params.subscribe(t=>{t.id?(this.id=+t.id,this.getTenantById(this.id)):this.CUS=new _e;var i=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==i.is_employee,this.isAdmin=i.is_superuser,this.isOwner="T"==i.is_owner,console.log("---1111 this.editCode:: "+this.editCode),this.form=this.fb.group({id:null,code:{value:null,disabled:!this.editCode},username:{value:null,disabled:this.id},password:null,firstname:[null,m.kI.required],lastname:[null,m.kI.required],image:null,CUSBrandPdf:null,CUSIdPdf:null,mobile:null,CUSFamousName:null,selftype:"P",CUSEInvoiceType:"G",profile:this.fb.group({birthday:[null,m.kI.required],gender:"M",current_branch:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curbuilding:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curunit:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},CUSTaxNumber:null,CUSCommercialRegister:null}),work:this.fb.group({company:[null,m.kI.required],position:null,nationalIDType:"F",nationalID:[null,m.kI.required],nationalIDStartDate:null,nationalIDEndDate:null,nationalIDPic:null,WorkPlace_CTTKeyField:null,Job_CTTKeyField:null}),contacts:this.fb.group({email:["",m.kI.compose([m.kI.required,R.Le])],homephone:null,workphone:null,address:null,CUSStreetName:null,CUSBuildingNumber:null,CUSZibCode:null,CUSShortAddress:null,CUSBuildingSubNumber:null,country:null,governorate:null,city:null,area:null}),social:this.fb.group({facebook:null,twitter:null,google:null}),settings:this.fb.group({isActive:null,isDeleted:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0)})}else this.router.navigate(["/sign-in"])}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}onFileChange(t){this.DocImageToUpload=t.item(0);var i=new FileReader;i.onload=o=>{this.defaultDocImage=o.target.result},i.readAsDataURL(this.DocImageToUpload)}onFileRemove(t){console.log("====On Remove:: "+t)}getFileType(t){const i=t.type;return"application/pdf"===i?"PDF":i.startsWith("image/")?"IMAGE":"NOT"}onEnter(t){t.preventDefault()}handelCUSImgInput(t){if(t&&t.length){switch(this.getFileType(t.item(0))){case"IMAGE":this.fileType=this.imageFileSelected;break;case"PDF":this.fileType=this.pdfFileSelected;break;case"NOT":this.fileType=this.otherFileSelected}if(this.fileType==this.imageFileSelected){console.log("--------Here when image-------------"),this.CusImageToUpload=t.item(0);var i=new FileReader;i.onload=C=>{this.defaultCusImage=C.target.result},i.readAsDataURL(this.CusImageToUpload),document.getElementById("customButton").textContent=t.length>0?t[0].name:this.chooseFile}}}onFileSelected(t,i){if(t&&t.length){switch(this.getFileType(t.item(0))){case"IMAGE":this.isImage=!0,this.idFileType=this.imageFileSelected;break;case"PDF":this.isImage=!1,this.idFileType=this.pdfFileSelected;break;case"NOT":this.isImage=!1,this.idFileType=this.otherFileSelected}const c=new FileReader;c.onload=C=>{this.fileUrl=c.result,this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(C.target.result)},c.readAsDataURL(t.item(0)),this.natIDfileToUpload=t.item(0)}}handelIDImgInput(t){this.IDImageToUpload=t.item(0);var i=new FileReader;i.onload=c=>{this.defaultIDImage=c.target.result,console.log("=====after====="+this.defaultIDImage)},i.readAsDataURL(this.IDImageToUpload),document.getElementById("idCustomButton").textContent=t.length>0?t[0].name:this.chooseFile}mapFormvalue_to_CustomerClass(t){this.form.enable(),this.cur_branch=this.form.value.profile.current_branch,this.cur_building=this.form.value.profile.curbuilding,this.cur_unit=this.form.value.profile.curunit,this.form.disable();const i=new _.uU("en-GB").transform(this.form.value.profile.birthday,"dd/MM/yyyy"),o=new _.uU("en-GB").transform(this.form.value.work.nationalIDStartDate,"dd/MM/yyyy"),s=new _.uU("en-GB").transform(this.form.value.work.nationalIDEndDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,null!=this.form.value.profile.birthday&&(this.CUS.CUSBirthDate=i),null!=this.form.value.work.nationalIDStartDate&&(this.CUS.CUSNationalIDStartDate=o),null!=this.form.value.work.nationalIDEndDate&&(this.CUS.CUSNationalIDEndDate=s),this.CUS.CUSCode=+this.form.value.code,this.CUS.CUSFirstName=this.form.value.firstname,this.CUS.CUSLastName=this.form.value.lastname,this.CUS.CUSusername=this.form.value.username,this.CUS.CUSpassword=this.form.value.password,"POST"==t&&(this.CUS.is_create_CustomUser_table="T"),this.CUS.CUSGender=this.form.value.profile.gender,this.CUS.current_branch=this.cur_branch,this.CUS.current_building=this.cur_building,this.CUS.current_unit=this.cur_unit,this.CUS.CUSSelfType=this.form.value.selftype,this.CUS.CUSEInvoiceType=this.form.value.CUSEInvoiceType,this.CUS.CUSPic=this.form.value.image,this.CUS.CUSIDPic=this.form.value.work.nationalIDPic,this.CUS.CUSGuarantor=this.form.value.work.company,this.CUS.CUSJobName=this.form.value.work.position??"",this.CUS.CUSNationalIDType=this.form.value.work.nationalIDType,this.CUS.CUSNationalID=this.form.value.work.nationalID,this.CUS.WorkPlace_CTTKeyField=this.form.value.work.WorkPlace_CTTKeyField,this.CUS.Job_CTTKeyField=this.form.value.work.Job_CTTKeyField,this.CUS.CUSMobile=this.form.value.mobile,this.CUS.CUSFamousName=this.form.value.CUSFamousName??"",this.CUS.CUSEmail=this.form.value.contacts.email,this.CUS.CUSHomePhone=this.form.value.contacts.homephone,this.CUS.CUSWorkPhone=this.form.value.contacts.workphone,this.CUS.CUSAddress=this.form.value.contacts.address??"",this.CUS.CUSStreetName=this.form.value.contacts.CUSStreetName??"",this.CUS.CUSBuildingNumber=this.form.value.contacts.CUSBuildingNumber??"",this.CUS.CUSZibCode=this.form.value.contacts.CUSZibCode??"",this.CUS.CUSShortAddress=this.form.value.contacts.CUSShortAddress??"",this.CUS.CUSBuildingSubNumber=this.form.value.contacts.CUSBuildingSubNumber??"",this.CUS.Country_CTTKeyField=this.form.value.contacts.country,this.CUS.Governorate_CTTKeyField=this.form.value.contacts.governorate,this.CUS.City_CTTKeyField=this.form.value.contacts.city,this.CUS.Area_CTTKeyField=this.form.value.contacts.area,this.CUS.CUSFacebook=this.form.value.social.facebook??"",this.CUS.CUSTwitter=this.form.value.social.twitter??"",this.CUS.CUSGoogle=this.form.value.social.google??"",this.CUS.CUSTaxNumber=this.form.value.profile.CUSTaxNumber??"",this.CUS.CUSCommercialRegister=this.form.value.profile.CUSCommercialRegister??"",this.CUS.CUSActive=this.tenActive,this.CUS.RowDelete=this.tenDeleted}getTenantById(t){const i=[];this._CustomerService.getOneCustomer(t).subscribe(o=>{this._CustomerService.getOneCustomerDocs(this.curCOMId,this.account.periorty,t).subscribe(s=>{for(var c of s)i.push({link:c.CUDPic,preview:c.CUDPic})}),this.fillForm(o,i),this.CUS=o,o.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,o.Country_CTTKeyField),o.Governorate_CTTKeyField&&this.getCityPerGoverno(this.curCOMId,this.account.periorty,o.Governorate_CTTKeyField),o.City_CTTKeyField&&this.getAreaPerCity(this.curCOMId,this.account.periorty,o.City_CTTKeyField)})}getFileTypeFromPath(t){console.log("--------start of getFileTypeFromPath----------"),console.log("-----filePath1111:: "+t);const i=t.split(".").pop()?.toLowerCase();switch(console.log("-----filePath2222:: "+t),console.log("--------extension:: "+i),i.substring(0,3)){case"jpg":case"jpe":case"png":case"gif":return"Image";case"pdf":return"PDF";case"doc":return"Word Document";case"xls":return"Excel Document";default:return"Unknown File Type"}}fillForm(t,i){var o;console.log("----inside Fill Form---111111--"),this.is_active="T"==t.CUSActive,t.current_building&&this.getAllUnits(this.curCOMId,this.account.periorty,t.current_building),this.defaultCusImage=null!=t.CUSPic?t.CUSPic:(new N.P).noImage,this.defaultIDImage=null!=t.CUSIDPic?t.CUSIDPic:(new N.P).noImage,this.is_delete=1==t.RowDelete,console.log("----inside Fill Form---222222--"),this.brandfileToUpload=t.CUSBrandPdf,this.natIDfileToUpload=t.CUSIdPdf,this.natIDfileToUpload&&("Image"==(o=this.getFileTypeFromPath(this.natIDfileToUpload.toString()))?(console.log("Selected file is an image."),this.isImage=!0,this.fileUrl=this.natIDfileToUpload.toString(),console.log("-----this.fileUrl:: "+this.fileUrl)):"PDF"==o?(console.log("Selected file is a PDF."),this.isImage=!1,this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.natIDfileToUpload.name),console.log("------this.sanitizedUrl.:: "+this.sanitizedUrl)):console.log("Selected file is of another type:",o)),console.log("----inside Fill Form---333333--"),this.form.patchValue({id:t.id,code:t.CUSCode,username:t.CUSusername,password:t.CUSpassword,firstname:t.CUSFirstName,lastname:t.CUSLastName,image:t.CUSPic,CUSBrandPdf:t.CUSBrandPdf,CUSIdPdf:t.CUSIdPdf,selftype:t.CUSSelfType,CUSEInvoiceType:t.CUSEInvoiceType,mobile:t.CUSMobile,CUSFamousName:t.CUSFamousName,profile:{birthday:t.CUSBirthDate,gender:t.CUSGender,CUSTaxNumber:t.CUSTaxNumber,CUSCommercialRegister:t.CUSCommercialRegister,current_branch:t.current_branch,curbuilding:t.current_building,curunit:t.current_unit},work:{company:t.CUSGuarantor,position:t.CUSJobName,nationalIDType:t.CUSNationalIDType,nationalID:t.CUSNationalID,nationalIDStartDate:t.CUSNationalIDStartDate,nationalIDEndDate:t.CUSNationalIDEndDate,nationalIDPic:t.CUSIDPic,WorkPlace_CTTKeyField:t.WorkPlace_CTTKeyField,Job_CTTKeyField:t.Job_CTTKeyField},contacts:{email:t.CUSEmail,homephone:t.CUSHomePhone,workphone:t.CUSWorkPhone,address:t.CUSAddress,country:t.Country_CTTKeyField,governorate:t.Governorate_CTTKeyField,city:t.City_CTTKeyField,area:t.Area_CTTKeyField,CUSStreetName:t.CUSStreetName,CUSBuildingNumber:t.CUSBuildingNumber,CUSZibCode:t.CUSZibCode,CUSShortAddress:t.CUSShortAddress,CUSBuildingSubNumber:t.CUSBuildingSubNumber},social:{facebook:t.CUSFacebook,twitter:t.CUSTwitter,google:t.CUSGoogle},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}}),console.log("----inside Fill Form---4444444--"),t.current_unit&&this.getUnitFullData(t.current_unit),console.log("----inside Fill Form---55555555--")}getAllBranches(t,i){this.atlasService.getAllBranch(t,i).subscribe(o=>{this.AllBranches=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(t,i,o,s){console.log("----is Emp"),this.atlasService.getBranchPerEmp(t,i,o).subscribe(c=>{this.AllBranches=c,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+s),this.atlasService.getOneBranch(s).subscribe(C=>{this.AllBranches=C},C=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},c=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getNotificationRows(t,i,o){this.codesService.getSubForParentAndArrange(t,i,this.notificationType_const,o).subscribe(s=>{1==o&&(this.cttNotificationType_TenantData=s[0].id),2==o&&(this.cttNotificationType_EndContract=s[0].id)},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0646\u0648\u0639 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapvaluesToNotificationClass(){this.notificationsObject.notificationType_CTTKeyField=this.cttNotificationType_TenantData,this.notificationsObject.UNOActive="T",this.notificationsObject.UNONotificationFromTenant="T",this.notificationsObject.branch_KeyField=this.cur_branch,this.notificationsObject.UNOTitle="\u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0623\u062c\u0631",this.notificationsObject.build_KeyField=this.cur_building,this.notificationsObject.unit_KeyField=this.cur_unit,this.notificationsObject.customer_KeyField=this.form.value.id,this.notificationsObject.UNOText="\u0628\u0631\u062c\u0627\u0621 \u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631 "+this.form.value.firstname+" "+this.form.value.lastname}readCusCode(t){let o=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({contacts:{email:"E"+o+"@jeddahlake.com"},username:o,password:o})}pad(t,i){let o=t+"";for(;o.length<i;)o="0"+o;return o}createRandomString(t,i){let o="";for(let s=0;s<t;s++)o+=i.charAt(Math.floor(Math.random()*i.length));return o}generateUserName(t,i){return this.pad(t,4)+i}confirmData(t){this._CustomerService.editCustomerConfirm({CUSConfirmed:"T",id:t}).subscribe(o=>{this.snackBar.open("\u062a\u0645 \u0625\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},o=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}customerRelated(t){console.log("========Sayed2982024=====customerRelated()==============="),this.dialog.open(Ie,{data:{custId:t,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(o=>{})}customerWorkRelated(t){console.log("========Sayed2982024=====customerWorkRelated()==============="),this.dialog.open(xe,{data:{custId:t,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(o=>{})}changePassword(t){this.dialog.open(ht.p,{data:{dataRow:t,curUserData:this.curUserData,userPerm:this.userPerm,pk:t.Userid},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(o=>{})}saveUpdate(t){console.log("=============saveUpdate()==============="),t?(this.mapFormvalue_to_CustomerClass("PATCH"),console.log("=============Update data()==============="),this._CustomerService.editCustomerWithPDF(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.curUserData.is_employee,this.brandfileToUpload,this.natIDfileToUpload).subscribe(i=>{console.log("res=> "+i),"F"==this.curUserData.is_employee&&(this.mapvaluesToNotificationClass(),this.unitsService.addNotificationForUnits(this.notificationsObject).subscribe(o=>{},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})),null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(this.CUS.id,this.DocImageToUpload).subscribe(o=>{console.log("====yes from update====",o)}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(this.mapFormvalue_to_CustomerClass("POST"),console.log(this.CUS),this._CustomerService.addCustomerWithPDF(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.brandfileToUpload,this.natIDfileToUpload).subscribe(i=>{null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(i.id,this.DocImageToUpload).subscribe(o=>{console.log("====yes from insert====",o)}),this.contractService.addCustomUserFromTenant(i,this.CusImageToUpload).subscribe(o=>{this.contractService.updateCustomerWithUserID(i.id,o.id).subscribe(s=>{},s=>{console.log("ERROR::--\x3e ",s)})}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/tenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))}close(){}compareFunction(t,i){return t.username==i.username&&t.code==i.code}getJobs(t,i){this.codesService.getSubForParent(t,i,this.job_const).subscribe(o=>{this.Jobs=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u0638\u0627\u0626\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getWorkPlaces(t,i){this.codesService.getSubForParent(t,i,this.workplace_const).subscribe(o=>{this.WorkPlaces=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0645\u0627\u0643\u0646 \u0627\u0644\u0639\u0645\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxCodeForCustomers(t,i){this.contractService.getMaxCustomerCode(t,i).subscribe(o=>{if(this.maxCustomerCode=o.max,!this.id){let s=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({code:this.maxCustomerCode,username:s,password:s,contacts:{email:"E"+s+"@jeddahlake.com"}})}})}getCountries(t,i){this.codesService.getSubForParent(t,i,this.country_const).subscribe(o=>{this.Countries=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(t){this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,t.value)}getGovernoratePerCountry(t,i,o){this.codesService.getSubForParentAndRelated(t,i,this.governorate_const,o).subscribe(s=>{this.Governorates=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(t){this.getCityPerGoverno(this.curCOMId,this.account.periorty,t.value)}getCityPerGoverno(t,i,o){this.codesService.getSubForParentAndRelated(t,i,this.city_const,o).subscribe(s=>{this.Cities=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(t){this.getAreaPerCity(this.curCOMId,this.account.periorty,t.value)}getAreaPerCity(t,i,o){this.codesService.getSubForParentAndRelated(t,i,this.region_const,o).subscribe(s=>{this.Areas=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllBuildings(t,i){this.unitsService.getAllBuilding(t,i).subscribe(o=>{this.AllBuildings=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(t){this.getBuildingPerBranch(this.curCOMId,this.account.periorty,t.value)}getBuildingPerBranch(t,i,o){this.unitsService.getBuildingsPerBranch(t,i,o).subscribe(s=>{this.AllBuildings=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuild(t){this.getAllUnits(this.curCOMId,this.account.periorty,t.value)}getAllUnits(t,i,o){this.unitsService.getAllUnitsPerBuilding(t,i,o,"E").subscribe(s=>{this.AllUnits=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitData(t){this.getUnitFullData(t.value)}getUnitFullData(t){this.unitsService.getOneUnit(t).subscribe(i=>{this.electricUnit="null"==i.UNTElectricityNumber?"":i.UNTElectricityNumber,this.waterUnit="null"==i.UNTWaterNumber?"":i.UNTWaterNumber,this.gasUnit="null"==i.UNTGasNumber?"":i.UNTGasNumber},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("HTML.ChooseImageFile").subscribe(t=>{this.chooseFile=t}),this.translateService.get("HTML.ChoosePDFFile").subscribe(t=>{this.chooseFilePDF=t}),this.translateService.get("HTML.ChoosePDFFile_Brand").subscribe(t=>{this.chooseFilePDFBrand=t}),this.translateService.get("HTML.ChoosePDFFile_NatId").subscribe(t=>{this.chooseFilePDFNatID=t}),this.translateService.get("MESSAGE.ImageSelected").subscribe(t=>{this.imageFileSelected=t}),this.translateService.get("MESSAGE.PDFSelected").subscribe(t=>{this.pdfFileSelected=t}),this.translateService.get("MESSAGE.OtherFileSelected").subscribe(t=>{this.otherFileSelected=t})}}De.\u0275fac=function(t){return new(t||De)(e.Y36(ue.y),e.Y36(re.d),e.Y36(k.gz),e.Y36(Xe.d),e.Y36(G.X),e.Y36(m.QS),e.Y36(p.C),e.Y36(L.v),e.Y36(k.F0),e.Y36(Z.uw),e.Y36(j.U),e.Y36(D.Z),e.Y36(de.g),e.Y36(y.sK),e.Y36(g.W),e.Y36(Re.H7),e.Y36(I.ux))},De.\u0275cmp=e.Xpm({type:De,selectors:[["app-customers-details"]],features:[e._Bn([g.W])],decls:351,vars:225,consts:[["mat-dialog-title",""],[4,"ngIf"],[1,"user-form",3,"formGroup","keydown.enter"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["appearance","outline",1,"w-20"],["matInput","","formControlName","code","required",""],["appearance","outline",1,"w-30"],["matInput","","formControlName","username","required",""],["class","w-45",4,"ngIf"],["appearance","outline",1,"w-50"],["matInput","","formControlName","firstname","required",""],["appearance","outline",1,"w-45"],["matInput","","formControlName","lastname","required",""],["matInput","","formControlName","mobile","required",""],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["formControlName","CUSEInvoiceType"],["value","G","labelPosition","after"],["value","P","labelPosition","after"],["value","B","labelPosition","after"],["fxLayout","row"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","image","name","image","id","fileInput","type","file","accept","image/*",1,"file-input",3,"change"],["id","customButton",1,"custom-button",3,"click"],["formGroupName","profile",3,"label"],["formControlName","gender"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],[1,"w-50"],["matInput","","formControlName","birthday","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","current_branch","id","curbranchContOpSel","required","",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","curbuilding","id","buildOpSel",3,"placeholder","selectionChange"],["formControlName","curunit","id","unitOpSel",3,"placeholder","selectionChange"],["appearance","outline",1,"w-95"],["matInput","","formControlName","CUSTaxNumber"],["matInput","","formControlName","CUSCommercialRegister"],["formGroupName","work",3,"label"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline","formControlName","WorkPlace_CTTKeyField","id","workplOpSel",1,"w-100",3,"placeholder"],["appearance","outline","formControlName","Job_CTTKeyField","id","jobsOpSel",1,"w-100",3,"placeholder"],["formControlName","nationalIDType"],["value","N","labelPosition","after"],["value","K","labelPosition","after"],["value","S","labelPosition","after"],["value","O","labelPosition","after"],["appearance","outline",1,"w-60"],["matInput","","formControlName","company","required",""],["appearance","outline",1,"w-40"],["matInput","","formControlName","nationalID","required",""],["matInput","","formControlName","nationalIDStartDate",3,"matDatepicker"],["natStartDate",""],["matInput","","formControlName","nationalIDEndDate",3,"matDatepicker"],["natEndDate",""],["type","file","accept","image/*,.pdf","id","howiaFileInput",1,"file-input",3,"change"],["id","idCustomButton",1,"custom-button",3,"click"],["formGroupName","contacts",3,"label"],["fxLayout","column","fxLayoutGap","10px grid",1,"form-field-outer"],["appearance","outline",1,"w-24"],["matInput","","formControlName","homephone"],["appearance","outline",1,"w-25"],["matInput","","formControlName","workphone"],["matInput","","formControlName","email","required","",3,"placeholder"],["appearance","outline",1,"w-80"],["matInput","","formControlName","address"],["appearance","outline",1,"w-19"],["matInput","","formControlName","CUSShortAddress"],["formControlName","country","id","countrOpSel",3,"placeholder","selectionChange"],["formControlName","governorate","id","governoOpSel",3,"placeholder","selectionChange"],["formControlName","city","id","cityOpSel",3,"placeholder","selectionChange"],["formControlName","area","id","areaOpSel",3,"placeholder"],["matInput","","formControlName","CUSStreetName"],["matInput","","formControlName","CUSBuildingNumber"],["matInput","","formControlName","CUSZibCode"],["matInput","","formControlName","CUSBuildingSubNumber"],["formGroupName","social",3,"label"],["matInput","","formControlName","facebook"],["matInput","","formControlName","twitter"],["matInput","","formControlName","google"],["formGroupName","settings",3,"label",4,"ngIf"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"w-45"],["matInput","","formControlName","password","required","",3,"type"],["matSuffix","",3,"click"],["id","iddownloadiconalone","target","_blank",3,"href"],[4,"ngIf","ngIfElse"],["pdfPreview",""],[2,"max-width","100%","height","250px",3,"src"],["frameborder","0",2,"width","100%","height","250px",3,"src"],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"h1",0),e.YNc(1,Ii,3,3,"span",1),e.YNc(2,Di,3,3,"span",1),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"form",2),e.NdJ("keydown.enter",function(c){return i.onEnter(c)}),e.TgZ(6,"mat-tab-group",3)(7,"mat-tab",4),e.ALo(8,"translate"),e.TgZ(9,"div",5)(10,"div",6),e._UZ(11,"mat-label"),e.TgZ(12,"div",7)(13,"mat-form-field",8)(14,"mat-label")(15,"mat-icon"),e._uU(16,"person"),e.qZA(),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",9),e.YNc(20,Fi,2,0,"mat-error",1),e.YNc(21,Li,2,0,"mat-error",1),e.qZA(),e.TgZ(22,"mat-form-field",10)(23,"mat-label")(24,"mat-icon"),e._uU(25,"person"),e.qZA(),e._uU(26),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"input",11),e.qZA(),e.YNc(29,qi,11,7,"mat-form-field",12),e.qZA()(),e.TgZ(30,"div",7)(31,"mat-form-field",13)(32,"mat-label")(33,"mat-icon"),e._uU(34,"person"),e.qZA(),e._uU(35),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"input",14),e.YNc(38,Ri,2,0,"mat-error",1),e.qZA(),e.TgZ(39,"mat-form-field",15)(40,"mat-label")(41,"mat-icon"),e._uU(42,"person"),e.qZA(),e._uU(43),e.ALo(44,"translate"),e.qZA(),e._UZ(45,"input",16),e.YNc(46,Pi,2,0,"mat-error",1),e.qZA()(),e.TgZ(47,"div",7)(48,"mat-form-field",13)(49,"mat-label"),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"mat-hint"),e._uU(53,"966505602221"),e.qZA(),e._UZ(54,"input",17),e.YNc(55,ki,2,0,"mat-error",1),e.qZA()(),e.TgZ(56,"div",7)(57,"div",18)(58,"mat-label"),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"mat-radio-group",19)(62,"mat-radio-button",20),e._uU(63),e.ALo(64,"translate"),e.qZA(),e.TgZ(65,"mat-radio-button",21),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"mat-radio-button",22),e._uU(69),e.ALo(70,"translate"),e.qZA()()()(),e.TgZ(71,"div",23)(72,"div",24),e._UZ(73,"img",25),e.TgZ(74,"input",26),e.NdJ("change",function(c){return i.handelCUSImgInput(c.target.files)}),e.qZA(),e.YNc(75,Bi,2,1,"div",1),e.TgZ(76,"button",27),e.NdJ("click",function(){return i.callFileInput()}),e._uU(77),e.ALo(78,"translate"),e.qZA()()()()(),e.TgZ(79,"mat-tab",28),e.ALo(80,"translate"),e.TgZ(81,"div",5)(82,"div",7)(83,"mat-radio-group",29)(84,"mat-radio-button",30),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.TgZ(87,"mat-radio-button",31),e._uU(88),e.ALo(89,"translate"),e.qZA()(),e.TgZ(90,"mat-form-field",32)(91,"mat-label"),e._uU(92),e.ALo(93,"translate"),e.qZA(),e._UZ(94,"input",33)(95,"mat-datepicker-toggle",34)(96,"mat-datepicker",null,35),e.qZA()(),e.TgZ(98,"div",7)(99,"div",36)(100,"mat-form-field",37)(101,"mat-label"),e._uU(102),e.ALo(103,"translate"),e.qZA(),e.TgZ(104,"mat-select",38),e.NdJ("selectionChange",function(c){return i.getBuildings(c)}),e.ALo(105,"translate"),e.TgZ(106,"mat-option",39),e._uU(107,"-"),e.qZA(),e.YNc(108,Hi,2,2,"mat-option",40),e.qZA()()()(),e.TgZ(109,"div",7)(110,"mat-form-field",13)(111,"mat-label"),e._uU(112),e.ALo(113,"translate"),e.qZA(),e.TgZ(114,"mat-select",41),e.NdJ("selectionChange",function(c){return i.getUnitsPerBuild(c)}),e.ALo(115,"translate"),e.TgZ(116,"mat-option",39),e._uU(117,"-"),e.qZA(),e.YNc(118,Ji,2,2,"mat-option",40),e.qZA()(),e.TgZ(119,"mat-form-field",15)(120,"mat-label"),e._uU(121),e.ALo(122,"translate"),e.qZA(),e.TgZ(123,"mat-select",42),e.NdJ("selectionChange",function(c){return i.getUnitData(c)}),e.ALo(124,"translate"),e.TgZ(125,"mat-option",39),e._uU(126,"-"),e.qZA(),e.YNc(127,Wi,2,2,"mat-option",40),e.qZA()()(),e.TgZ(128,"div",7)(129,"div",36)(130,"mat-form-field",43)(131,"mat-label"),e._uU(132),e.ALo(133,"translate"),e.qZA(),e._UZ(134,"input",44),e.qZA()(),e.TgZ(135,"div",36)(136,"mat-form-field",43)(137,"mat-label"),e._uU(138),e.ALo(139,"translate"),e.qZA(),e._UZ(140,"input",45),e.qZA()()(),e.TgZ(141,"div",7),e.YNc(142,Ki,3,3,"h4",1),e.TgZ(143,"h3"),e._uU(144),e.qZA(),e.YNc(145,Vi,3,3,"h4",1),e.TgZ(146,"h3"),e._uU(147),e.qZA(),e.YNc(148,Yi,3,3,"h4",1),e.TgZ(149,"h3"),e._uU(150),e.qZA()()()(),e.TgZ(151,"mat-tab",46),e.ALo(152,"translate"),e.TgZ(153,"div",5)(154,"div",6),e._UZ(155,"mat-label"),e.TgZ(156,"div",7)(157,"div",47)(158,"label"),e._uU(159),e.ALo(160,"translate"),e.qZA(),e.TgZ(161,"ng-select",48),e.ALo(162,"translate"),e.YNc(163,Gi,2,2,"ng-option",40),e.qZA()(),e.TgZ(164,"div",47)(165,"label"),e._uU(166),e.ALo(167,"translate"),e.qZA(),e.TgZ(168,"ng-select",49),e.ALo(169,"translate"),e.YNc(170,Qi,2,2,"ng-option",40),e.qZA()()(),e._UZ(171,"mat-divider")(172,"mat-divider"),e.qZA(),e.TgZ(173,"mat-radio-group",50)(174,"mat-radio-button",51),e._uU(175),e.ALo(176,"translate"),e.qZA(),e.TgZ(177,"mat-radio-button",31),e._uU(178),e.ALo(179,"translate"),e.qZA(),e.TgZ(180,"mat-radio-button",52),e._uU(181),e.ALo(182,"translate"),e.qZA(),e.TgZ(183,"mat-radio-button",53),e._uU(184),e.ALo(185,"translate"),e.qZA(),e.TgZ(186,"mat-radio-button",54),e._uU(187),e.ALo(188,"translate"),e.qZA()(),e.TgZ(189,"div",7)(190,"mat-form-field",55)(191,"mat-label"),e._uU(192),e.ALo(193,"translate"),e.qZA(),e._UZ(194,"input",56),e.qZA(),e.TgZ(195,"mat-form-field",57)(196,"mat-label"),e._uU(197),e.ALo(198,"translate"),e.qZA(),e._UZ(199,"input",58),e.qZA()(),e.TgZ(200,"div",7)(201,"mat-form-field",15)(202,"mat-label"),e._uU(203),e.ALo(204,"translate"),e.qZA(),e._UZ(205,"input",59)(206,"mat-datepicker-toggle",34)(207,"mat-datepicker",null,60),e.qZA(),e.TgZ(209,"mat-form-field",57)(210,"mat-label"),e._uU(211),e.ALo(212,"translate"),e.qZA(),e._UZ(213,"input",61)(214,"mat-datepicker-toggle",34)(215,"mat-datepicker",null,62),e.qZA()()(),e.YNc(217,ji,4,1,"div",1),e.TgZ(218,"div",23)(219,"input",63),e.NdJ("change",function(c){return i.onFileSelected(c.target.files,c)}),e.qZA(),e.TgZ(220,"button",64),e.NdJ("click",function(){return i.callOnHowiaFileSelect()}),e._uU(221),e.ALo(222,"translate"),e.qZA(),e.YNc(223,Xi,4,2,"div",1),e.qZA()(),e.TgZ(224,"mat-tab",65),e.ALo(225,"translate"),e.TgZ(226,"div",66),e._UZ(227,"mat-label"),e.TgZ(228,"div",7)(229,"mat-form-field",67)(230,"mat-label"),e._uU(231),e.ALo(232,"translate"),e.qZA(),e._UZ(233,"input",68),e.qZA(),e.TgZ(234,"mat-form-field",69)(235,"mat-label"),e._uU(236),e.ALo(237,"translate"),e.qZA(),e._UZ(238,"input",70),e.qZA(),e.TgZ(239,"mat-form-field",13)(240,"mat-label"),e._uU(241),e.ALo(242,"translate"),e.qZA(),e._UZ(243,"input",71),e.ALo(244,"translate"),e.qZA()(),e.TgZ(245,"div",7)(246,"mat-form-field",72)(247,"mat-label"),e._uU(248),e.ALo(249,"translate"),e.qZA(),e._UZ(250,"input",73),e.qZA(),e.TgZ(251,"mat-form-field",74)(252,"mat-label"),e._uU(253),e.ALo(254,"translate"),e.qZA(),e._UZ(255,"input",75),e.qZA()(),e.TgZ(256,"div",7)(257,"mat-form-field",69)(258,"mat-label"),e._uU(259),e.ALo(260,"translate"),e.qZA(),e.TgZ(261,"mat-select",76),e.NdJ("selectionChange",function(c){return i.getGovernorate(c)}),e.ALo(262,"translate"),e.TgZ(263,"mat-option",39),e._uU(264,"-"),e.qZA(),e.YNc(265,en,2,2,"mat-option",40),e.qZA()(),e.TgZ(266,"mat-form-field",69)(267,"mat-label"),e._uU(268),e.ALo(269,"translate"),e.qZA(),e.TgZ(270,"mat-select",77),e.NdJ("selectionChange",function(c){return i.getCity(c)}),e.ALo(271,"translate"),e.TgZ(272,"mat-option",39),e._uU(273,"-"),e.qZA(),e.YNc(274,tn,2,2,"mat-option",40),e.qZA()(),e.TgZ(275,"mat-form-field",67)(276,"mat-label"),e._uU(277),e.ALo(278,"translate"),e.qZA(),e.TgZ(279,"mat-select",78),e.NdJ("selectionChange",function(c){return i.getAria(c)}),e.ALo(280,"translate"),e.TgZ(281,"mat-option",39),e._uU(282,"-"),e.qZA(),e.YNc(283,nn,2,2,"mat-option",40),e.qZA()(),e.TgZ(284,"mat-form-field",69)(285,"mat-label"),e._uU(286),e.ALo(287,"translate"),e.qZA(),e.TgZ(288,"mat-select",79),e.ALo(289,"translate"),e.TgZ(290,"mat-option",39),e._uU(291,"-"),e.qZA(),e.YNc(292,on,2,2,"mat-option",40),e.qZA()()(),e.TgZ(293,"div",7)(294,"mat-form-field",57)(295,"mat-label"),e._uU(296),e.ALo(297,"translate"),e.qZA(),e._UZ(298,"input",80),e.qZA(),e.TgZ(299,"mat-form-field",8)(300,"mat-label"),e._uU(301),e.ALo(302,"translate"),e.qZA(),e._UZ(303,"input",81),e.qZA(),e.TgZ(304,"mat-form-field",74)(305,"mat-label"),e._uU(306),e.ALo(307,"translate"),e.qZA(),e._UZ(308,"input",82),e.qZA(),e.TgZ(309,"mat-form-field",8)(310,"mat-label"),e._uU(311),e.ALo(312,"translate"),e.qZA(),e._UZ(313,"input",83),e.qZA()()()(),e.TgZ(314,"mat-tab",84),e.ALo(315,"translate"),e.TgZ(316,"div",6),e._UZ(317,"mat-label"),e.TgZ(318,"div",5)(319,"mat-form-field",37)(320,"mat-label"),e._uU(321,"Facebook"),e.qZA(),e._UZ(322,"input",85),e.qZA(),e.TgZ(323,"mat-form-field",37)(324,"mat-label"),e._uU(325,"Twitter"),e.qZA(),e._UZ(326,"input",86),e.qZA(),e.TgZ(327,"mat-form-field",37)(328,"mat-label"),e._uU(329,"Google"),e.qZA(),e._UZ(330,"input",87),e.qZA()()()(),e.YNc(331,an,11,9,"mat-tab",88),e.TgZ(332,"mat-tab",89),e.ALo(333,"translate"),e.TgZ(334,"div",90)(335,"div",24),e._UZ(336,"img",25),e.TgZ(337,"input",91,92),e.NdJ("change",function(c){return i.onFileChange(c.target.files)}),e.qZA(),e.TgZ(339,"button",93),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(338);return e.KtG(c.click())}),e._uU(340),e.ALo(341,"translate"),e.qZA()(),e._UZ(342,"mat-divider")(343,"input-file",94),e.qZA()()()(),e._UZ(344,"br"),e.TgZ(345,"div",95)(346,"div",7),e.YNc(347,ln,3,4,"button",96),e.YNc(348,cn,4,4,"button",97),e.YNc(349,un,4,4,"button",97),e.YNc(350,dn,3,4,"button",97),e.qZA()()}if(2&t){const o=e.MAs(97),s=e.MAs(208),c=e.MAs(216);e.xp6(1),e.Q6J("ngIf",!i.CUS.id),e.xp6(1),e.Q6J("ngIf",i.CUS.id),e.xp6(1),e.hij(" ",e.lcZ(4,103,"HTML.TENANT"),"\n"),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("backgroundColor","primary")("color","warn"),e.xp6(1),e.s9C("label",e.lcZ(8,105,"HTML.TAB_BASIC")),e.xp6(10),e.hij(" ",e.lcZ(18,107,"HTML.CODE"),""),e.xp6(3),e.Q6J("ngIf",null==i.form.controls.code.errors?null:i.form.controls.code.errors.required),e.xp6(1),e.Q6J("ngIf",i.form.controls.code.hasError("minlength")),e.xp6(5),e.hij(" ",e.lcZ(27,109,"HTML.USERNAME"),""),e.xp6(3),e.Q6J("ngIf",!i.CUS.id),e.xp6(6),e.hij(" ",e.lcZ(36,111,"HTML.FIRST_NAME"),""),e.xp6(3),e.Q6J("ngIf",null==i.form.controls.firstname.errors?null:i.form.controls.firstname.errors.required),e.xp6(5),e.hij(" ",e.lcZ(44,113,"HTML.LAST_NAME"),""),e.xp6(3),e.Q6J("ngIf",null==i.form.controls.lastname.errors?null:i.form.controls.lastname.errors.required),e.xp6(4),e.Oqu(e.lcZ(51,115,"HTML.MOBILE")),e.xp6(5),e.Q6J("ngIf",null==i.form.controls.mobile.errors?null:i.form.controls.mobile.errors.required),e.xp6(4),e.Oqu(e.lcZ(60,117,"HTML.EInvoiceType")),e.xp6(4),e.Oqu(e.lcZ(64,119,"HTML.EType_Without")),e.xp6(3),e.Oqu(e.lcZ(67,121,"HTML.EType_Personal")),e.xp6(3),e.Oqu(e.lcZ(70,123,"HTML.EType_Business")),e.xp6(4),e.Q6J("src",i.defaultCusImage,e.LSH),e.xp6(2),e.Q6J("ngIf",i.fileType),e.xp6(2),e.Oqu(e.lcZ(78,125,"HTML.ChooseImageFile")),e.xp6(2),e.s9C("label",e.lcZ(80,127,"HTML.TAB_PERSONAL")),e.xp6(6),e.Oqu(e.lcZ(86,129,"HTML.MALE")),e.xp6(3),e.Oqu(e.lcZ(89,131,"HTML.FEMALE")),e.xp6(4),e.Oqu(e.lcZ(93,133,"HTML.BIRTH_DATE")),e.xp6(2),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(7),e.hij(" ",e.lcZ(103,135,"HTML.BRANCH"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(105,137,"HTML.BRANCH")),e.xp6(4),e.Q6J("ngForOf",i.AllBranches),e.xp6(4),e.Oqu(e.lcZ(113,139,"HTML.BUILDING")),e.xp6(2),e.s9C("placeholder",e.lcZ(115,141,"HTML.BUILDING")),e.xp6(4),e.Q6J("ngForOf",i.AllBuildings),e.xp6(3),e.Oqu(e.lcZ(122,143,"HTML.UNIT")),e.xp6(2),e.s9C("placeholder",e.lcZ(124,145,"HTML.UNIT")),e.xp6(4),e.Q6J("ngForOf",i.AllUnits),e.xp6(5),e.Oqu(e.lcZ(133,147,"HTML.TaxNumber")),e.xp6(6),e.Oqu(e.lcZ(139,149,"HTML.CommercialRegister")),e.xp6(4),e.Q6J("ngIf",i.electricUnit),e.xp6(2),e.Oqu(i.electricUnit),e.xp6(1),e.Q6J("ngIf",i.waterUnit),e.xp6(2),e.Oqu(i.waterUnit),e.xp6(1),e.Q6J("ngIf",i.gasUnit),e.xp6(2),e.Oqu(i.gasUnit),e.xp6(1),e.s9C("label",e.lcZ(152,151,"HTML.TAB_ID")),e.xp6(8),e.hij(" ",e.lcZ(160,153,"HTML.WorkPlace"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(162,155,"HTML.WorkPlace")),e.xp6(2),e.Q6J("ngForOf",i.WorkPlaces),e.xp6(3),e.hij(" ",e.lcZ(167,157,"HTML.Job"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(169,159,"HTML.Job")),e.xp6(2),e.Q6J("ngForOf",i.Jobs),e.xp6(5),e.Oqu(e.lcZ(176,161,"OPTIONS.NATIONAL_ID")),e.xp6(3),e.Oqu(e.lcZ(179,163,"OPTIONS.FOREIGN_ID")),e.xp6(3),e.Oqu(e.lcZ(182,165,"OPTIONS.GULF_ID")),e.xp6(3),e.Oqu(e.lcZ(185,167,"OPTIONS.SPECIAL_EQAMA")),e.xp6(3),e.Oqu(e.lcZ(188,169,"OPTIONS.OTHER")),e.xp6(5),e.Oqu(e.lcZ(193,171,"HTML.GUARANTOR")),e.xp6(5),e.Oqu(e.lcZ(198,173,"HTML.IDNUMBER")),e.xp6(6),e.Oqu(e.lcZ(204,175,"HTML.START_DATE")),e.xp6(2),e.Q6J("matDatepicker",s),e.xp6(1),e.Q6J("for",s),e.xp6(5),e.Oqu(e.lcZ(212,177,"HTML.END_DATE")),e.xp6(2),e.Q6J("matDatepicker",c),e.xp6(1),e.Q6J("for",c),e.xp6(3),e.Q6J("ngIf",i.CUS.id&&i.natIDfileToUpload),e.xp6(4),e.hij(" ",e.lcZ(222,179,"HTML.ChooseHowiaImageFile"),""),e.xp6(2),e.Q6J("ngIf",i.fileUrl),e.xp6(1),e.s9C("label",e.lcZ(225,181,"HTML.TAB_CONTACTS")),e.xp6(7),e.Oqu(e.lcZ(232,183,"HTML.HOME_PHONE")),e.xp6(5),e.Oqu(e.lcZ(237,185,"HTML.WORK_PHONE")),e.xp6(5),e.Oqu(e.lcZ(242,187,"HTML.EMAIL")),e.xp6(2),e.s9C("placeholder",e.lcZ(244,189,"HTML.EMAIL")),e.xp6(5),e.Oqu(e.lcZ(249,191,"HTML.ADDRESS")),e.xp6(5),e.Oqu(e.lcZ(254,193,"HTML.ShortAddress")),e.xp6(6),e.Oqu(e.lcZ(260,195,"HTML.COUNTRY")),e.xp6(2),e.s9C("placeholder",e.lcZ(262,197,"HTML.COUNTRY")),e.xp6(4),e.Q6J("ngForOf",i.Countries),e.xp6(3),e.Oqu(e.lcZ(269,199,"HTML.GOVERN")),e.xp6(2),e.s9C("placeholder",e.lcZ(271,201,"HTML.GOVERN")),e.xp6(4),e.Q6J("ngForOf",i.Governorates),e.xp6(3),e.Oqu(e.lcZ(278,203,"HTML.CITY")),e.xp6(2),e.s9C("placeholder",e.lcZ(280,205,"HTML.CITY")),e.xp6(4),e.Q6J("ngForOf",i.Cities),e.xp6(3),e.Oqu(e.lcZ(287,207,"HTML.REGION")),e.xp6(2),e.s9C("placeholder",e.lcZ(289,209,"HTML.REGION")),e.xp6(4),e.Q6J("ngForOf",i.Areas),e.xp6(4),e.Oqu(e.lcZ(297,211,"HTML.STREET_NAME")),e.xp6(5),e.Oqu(e.lcZ(302,213,"HTML.BUILDING_NUMBER")),e.xp6(5),e.Oqu(e.lcZ(307,215,"HTML.ZIP")),e.xp6(5),e.Oqu(e.lcZ(312,217,"HTML.BUILDING_SubNUMBER")),e.xp6(3),e.s9C("label",e.lcZ(315,219,"HTML.TAB_SOCIAL_LIFE")),e.xp6(17),e.Q6J("ngIf",i.account.periorty>0),e.xp6(1),e.s9C("label",e.lcZ(333,221,"HTML.TAB_DOCS")),e.xp6(4),e.Q6J("src",i.defaultDocImage,e.LSH),e.xp6(4),e.Oqu(e.lcZ(341,223,"HTML.AddPic")),e.xp6(7),e.Q6J("ngIf",i.can("change_tenant")||0==i.account.periorty),e.xp6(1),e.Q6J("ngIf",i.can("view_tenantrelative")||0==i.account.periorty),e.xp6(1),e.Q6J("ngIf",i.can("change_tenant_password")||0==i.account.periorty),e.xp6(1),e.Q6J("ngIf",i.can("confirm_tenant"))}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,Ae.VQ,Ae.U0,_.sg,_.O5,m.sg,m.u,m.x0,T.xw,T.SQ,T.Wh,T.yH,K.ey,b.lW,et.oG,Y.Mq,Y.hl,Y.nW,Z.ZT,Z.uh,Z.H8,Q.Hw,A.Nt,v.KE,v.hX,v.bx,v.TO,v.R9,ee.d,E.gD,Te.uX,Te.SP,tt.tW,ve.w9,ve.jq,y.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.file-input{display:none}.custom-button{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px;height:40px}.custom-button:hover{background-color:#0056b3}\n"],encapsulation:2});var mn=f(3609);class pn{}function hn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.onSave())}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const i=e.oxw();e.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),e.xp6(2),e.Oqu(e.lcZ(3,3,"BTN.SAVE"))}}class Pe{constructor(t,i,o,s){this.dialogRef=t,this.data=i,this.localStore=o,this.fb=s,this.userPerm=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.form=this.fb.group({id:null,INSCode:null,INSContractTyps:"I",INSStatus:"N",INSValue:0,INSPayedValue:0,dueDate:null,INSDueToDate:null,payDate:null,INSPersonPayName:null,INSNotes:null,RowConfirm:0,RowDelete:0,RowStatus:0,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,customer_KeyField:null}),this.data.cttRow?(console.log("===this.data.cttRow==="),console.log(this.data.cttRow),this.action="Patch",this.form.patchValue({id:this.data.cttRow.id,INSCode:this.data.cttRow.INSCode,dueDate:new Date(this.data.cttRow.INSDueDate),INSDueToDate:new Date(this.data.cttRow.INSDueToDate),payDate:new Date(this.data.cttRow.INSPayDate),INSPersonPayName:this.data.cttRow.INSPersonPayName,INSNotes:this.data.cttRow.INSNotes,contract_KeyField:this.data.cttRow.contract_KeyField,branch_KeyField:this.data.cttRow.branch_KeyField,owner_KeyField:this.data.cttRow.owner_KeyField,build_KeyField:this.data.cttRow.build_KeyField,unit_KeyField:this.data.cttRow.unit_KeyField,customer_KeyField:this.data.cttRow.customer_KeyField,INSContractTyps:this.data.cttRow.INSContractTyps,INSStatus:this.data.cttRow.INSStatus,INSValue:this.data.cttRow.INSValue,INSPayedValue:this.data.cttRow.INSPayedValue,RowConfirm:this.data.cttRow.RowConfirm,RowDelete:this.data.cttRow.RowDelete,RowStatus:this.data.cttRow.RowStatus})):(console.log("==contract****:: "+this.data.contract),this.action="Post",this.form.patchValue({contract_KeyField:this.data.contract,branch_KeyField:this.data.branch,owner_KeyField:this.data.owner,build_KeyField:this.data.build,unit_KeyField:this.data.unit,customer_KeyField:this.data.customer,INSContractTyps:"I",INSStatus:"N",INSValue:0,INSPayedValue:0,RowConfirm:0,RowDelete:0,RowStatus:0}))}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}onSave(){console.log("===***Press Save button***==="),this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value})}close(){console.log("===***Press Close button***==="),this.action="Cancel",this.dialogRef.close({event:this.action})}}Pe.\u0275fac=function(t){return new(t||Pe)(e.Y36(Z.so),e.Y36(Z.WI),e.Y36(p.C),e.Y36(m.QS))},Pe.\u0275cmp=e.Xpm({type:Pe,selectors:[["app-installment-dialog"]],decls:83,vars:53,consts:[["mat-dialog-title",""],[1,"user-form",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","24.98",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","INSCode","required",""],["fxFlex","100","fxFlex.gt-sm","25.0",1,"px-1"],["matInput","","formControlName","INSValue","required",""],["matInput","","formControlName","dueDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["dueDate",""],["matInput","","formControlName","INSDueToDate","required","",3,"matDatepicker"],["dueToDate",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","INSStatus","id","instStatusOpSel",3,"placeholder"],[3,"value"],["matInput","","formControlName","INSPayedValue"],["matInput","","formControlName","payDate",3,"matDatepicker"],["payDate",""],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","INSNotes"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"form",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"input",7),e.qZA()(),e.TgZ(13,"div",8)(14,"mat-form-field",6)(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"input",9),e.qZA()(),e.TgZ(19,"div",8)(20,"mat-form-field",6)(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"input",10)(25,"mat-datepicker-toggle",11)(26,"mat-datepicker",null,12),e.qZA()(),e.TgZ(28,"div",8)(29,"mat-form-field",6)(30,"mat-label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._UZ(33,"input",13)(34,"mat-datepicker-toggle",11)(35,"mat-datepicker",null,14),e.qZA()()(),e.TgZ(37,"div",4)(38,"div",15)(39,"mat-form-field",6)(40,"mat-label"),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"mat-select",16),e.ALo(44,"translate"),e.TgZ(45,"mat-option",17),e._uU(46,"-"),e.qZA(),e.TgZ(47,"mat-option",17),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"mat-option",17),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.TgZ(53,"mat-option",17),e._uU(54),e.ALo(55,"translate"),e.qZA()()()(),e.TgZ(56,"div",15)(57,"mat-form-field",6)(58,"mat-label"),e._uU(59),e.ALo(60,"translate"),e.qZA(),e._UZ(61,"input",18),e.qZA()(),e.TgZ(62,"div",15)(63,"mat-form-field",6)(64,"mat-label"),e._uU(65),e.ALo(66,"translate"),e.qZA(),e._UZ(67,"input",19)(68,"mat-datepicker-toggle",11)(69,"mat-datepicker",null,20),e.qZA()()(),e.TgZ(71,"div",21)(72,"mat-form-field",6)(73,"mat-label"),e._uU(74),e.ALo(75,"translate"),e.qZA(),e._UZ(76,"input",22),e.qZA()()()(),e.TgZ(77,"div",23)(78,"div",4),e.YNc(79,hn,4,5,"button",24),e.TgZ(80,"button",25),e.NdJ("click",function(){return i.close()}),e._uU(81),e.ALo(82,"translate"),e.qZA()()()()),2&t){const o=e.MAs(27),s=e.MAs(36),c=e.MAs(70);e.xp6(1),e.Oqu(e.lcZ(2,25,"HTML.InstallmentData")),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(7),e.Oqu(e.lcZ(11,27,"HTML.CODE")),e.xp6(6),e.Oqu(e.lcZ(17,29,"HTML.InstallmentValue")),e.xp6(6),e.Oqu(e.lcZ(23,31,"HTML.DueDate")),e.xp6(2),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(6),e.Oqu(e.lcZ(32,33,"HTML.DueToDate")),e.xp6(2),e.Q6J("matDatepicker",s),e.xp6(1),e.Q6J("for",s),e.xp6(7),e.Oqu(e.lcZ(42,35,"HTML.InstallmentStatus")),e.xp6(2),e.s9C("placeholder",e.lcZ(44,37,"HTML.InstallmentStatus")),e.xp6(4),e.Q6J("value","N"),e.xp6(1),e.Oqu(e.lcZ(49,39,"OPTIONS.NotPayed")),e.xp6(2),e.Q6J("value","P"),e.xp6(1),e.Oqu(e.lcZ(52,41,"OPTIONS.Payed")),e.xp6(2),e.Q6J("value","T"),e.xp6(1),e.Oqu(e.lcZ(55,43,"OPTIONS.PartialPayed")),e.xp6(5),e.Oqu(e.lcZ(60,45,"HTML.PayedValue")),e.xp6(6),e.Oqu(e.lcZ(66,47,"HTML.PayedDate")),e.xp6(2),e.Q6J("matDatepicker",c),e.xp6(1),e.Q6J("for",c),e.xp6(6),e.Oqu(e.lcZ(75,49,"HTML.Notes")),e.xp6(5),e.Q6J("ngIf",i.can("change_installment")),e.xp6(2),e.Oqu(e.lcZ(82,51,"BTN.CANCEL"))}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,_.O5,m.sg,m.u,T.xw,T.Wh,T.yH,K.ey,b.lW,Y.Mq,Y.hl,Y.nW,Z.ZT,Z.uh,Z.xY,Z.H8,A.Nt,v.KE,v.hX,v.R9,E.gD,y.X$]});var Zt=f(1008);function gn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.openCategoryDialog(null))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"HTML.AddInstallment")))}function _n(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.openCategoryDialog(s))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.EDIT"))}function fn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.remove(s.id))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.REMOVE"))}function Cn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.printEInvoice(s))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"receipt"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.TaxInvoice"))}function Tn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.printEInvoiceRequest(s))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"account_balance_wallet"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.TaxRequest"))}function bn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.createDocumentNumber("S",s))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"key"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.TaxInvoice"))}function vn(n,t){if(1&n&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2),e.qZA(),e.TgZ(3,"div",10),e._uU(4),e.qZA(),e.TgZ(5,"div",10),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.TgZ(10,"div",10),e._uU(11),e.qZA(),e.TgZ(12,"div",10)(13,"div",11),e.YNc(14,_n,4,3,"button",12),e.YNc(15,fn,4,3,"button",13),e.YNc(16,Cn,4,3,"button",12),e.YNc(17,Tn,4,3,"button",12),e.YNc(18,bn,4,3,"button",12),e.qZA()()()),2&n){const i=t.$implicit,o=e.oxw();e.xp6(2),e.Oqu(i.INSCode),e.xp6(2),e.Oqu(i.INSValue),e.xp6(2),e.Oqu(e.xi3(7,10,i.INSDueDate,"yyyy-MM-dd")),e.xp6(3),e.Oqu(i.INSStatusDisplay),e.xp6(2),e.Oqu(i.INSPayedValue),e.xp6(3),e.Q6J("ngIf",o.can("view_installment")),e.xp6(1),e.Q6J("ngIf",o.can("delete_installment")),e.xp6(1),e.Q6J("ngIf",("P"==i.customer_EInvoiceType||"B"==i.customer_EInvoiceType)&&o.can("view_installment")),e.xp6(1),e.Q6J("ngIf",("P"==i.customer_EInvoiceType||"B"==i.customer_EInvoiceType)&&o.can("view_installment")),e.xp6(1),e.Q6J("ngIf",("P"==i.customer_EInvoiceType||"B"==i.customer_EInvoiceType)&&o.can("view_installment"))}}function Zn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"mat-card",18)(3,"pagination-controls",19),e.NdJ("pageChange",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.onPageChanged(s))}),e.qZA()()()()}}const An=function(n,t){return{itemsPerPage:n,currentPage:t}};class ke{constructor(t,i,o,s,c,C,x,U,M,F,W,te,oe){this.transferService=t,this.localStore=i,this.global=o,this.router=s,this.activatedRoute=c,this._contractService=C,this.invoiceService=x,this.settingService=U,this.snackBar=M,this.translateService=F,this.fb=W,this.dialog=te,this.appSettings=oe,this.contractInstallmentsArray=[],this.count=6,this.curCOMId=O.N.comid,this.account=new ae.n,this.installmentForDisplay={id:void 0,COMId:void 0,INSCode:void 0,contract_KeyField:void 0,branch_KeyField:void 0,owner_KeyField:void 0,build_KeyField:void 0,unit_KeyField:void 0,customer_KeyField:void 0,INSContractTyps:void 0,INSStatus:void 0,INSValue:void 0,INSDueDate:void 0,INSDueToDate:void 0,INSPayedValue:void 0,INSPayDate:null,INSPersonPayName:void 0,INSNotes:void 0,EntryDate:void 0,EntryUser:void 0,RowConfirm:void 0,RowStatus:void 0,RowDelete:void 0},this.userPerm=[],this.expensesInvoiceCTT=(new w.I).ExpensesInvoice,this.sellInvoiceCTT=(new w.I).SellInvoice,this.addAlarmCTT=(new w.I).AddAlarm,this.discountAlarmCTT=(new w.I).DiscountAlarm,this.requestInvoiceCTT=(new w.I).RequestInvoice,this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.prepareMsgLanguage(),this.sub=this.activatedRoute.params.subscribe(t=>{t.id?(this.id=+t.id,this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id),this._contractService.getOneContract(this.id).subscribe(i=>{this.contract_KeyField=i.id,this.branch_KeyField=i.branch_KeyField,this.owner_KeyField=i.owner_KeyField,this.build_KeyField=i.build_KeyField,this.unit_KeyField=i.unit_KeyField,this.customer_KeyField=i.customer_KeyField})):this.Insta=new pn})}else this.router.navigate(["/sign-in"])}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}generateUserName(t,i){return this.pad(t,4)+i}pad(t,i){let o=t+"";for(;o.length<i;)o="0"+o;return o}createDocumentNumber(t,i){var o,s;switch(t){case"X":this.curDocUsed=this.expensesInvoiceCTT;break;case"S":default:this.curDocUsed=this.sellInvoiceCTT;break;case"A":this.curDocUsed=this.addAlarmCTT;break;case"D":this.curDocUsed=this.discountAlarmCTT;break;case"R":this.curDocUsed=this.requestInvoiceCTT}this.filterString="M="+this.curCOMId+"&C="+this.curUserData.periorty+"&usr=all",this.invoiceNumber="",this.settingService.getSerialsPerType(this.curCOMId,this.curUserData.periorty,this.curDocUsed).subscribe(c=>{this.docserialType=c[0].DOSDocSerialType,"P"==this.docserialType?this.settingService.getAllDetaisForSerial(this.curCOMId,this.curUserData.periorty,c[0].id).subscribe(C=>{for(let x=0;x<C.length;x++)if(this.partType=C[x].DSDPartType,this.partDigitNo=C[x].DSDNoOfDigits,this.partStartWith=C[x].DSDPartStartWith??"",this.partStartWith.length==+this.partDigitNo)this.invoiceNumber+=this.partStartWith;else if(this.partStartWith.length>+this.partDigitNo)this.invoiceNumber+=this.partStartWith.substring(0,+this.partDigitNo-1);else if(this.partStartWith.length<+this.partDigitNo)switch(this.invoiceNumber+=this.partStartWith,this.remainderLength=+this.partDigitNo-this.partStartWith.length,this.partType){case"Y":o=(new Date).getFullYear().toString(),s=o,o=o.substring(o.length-+this.remainderLength),this.invoiceNumber+=o,this.filterString+="&year="+s;break;case"M":s=((new Date).getMonth()+1).toString(),o="0"+s.slice(-2),this.invoiceNumber+=o,this.filterString+="&month="+s;break;case"B":o=i.branch_KeyField.length>=+this.remainderLength?i.branch_KeyField.toString().slice(-this.remainderLength):this.pad(i.branch_KeyField,this.remainderLength),this.invoiceNumber+=o,this.filterString+="&branch="+i.branch_KeyField;break;case"O":o=i.owner_KeyField.length>=+this.remainderLength?i.owner_KeyField.toString().slice(-this.remainderLength):this.pad(i.owner_KeyField,this.remainderLength),this.invoiceNumber+=o,this.filterString+="&owner="+i.owner_KeyField;break;case"P":o=i.build_KeyField.length>=+this.remainderLength?i.build_KeyField.toString().slice(-this.remainderLength):this.pad(i.build_KeyField,this.remainderLength),this.invoiceNumber+=o,this.filterString+="&building="+i.build_KeyField;break;case"U":o=i.unit_KeyField.length>=+this.remainderLength?i.unit_KeyField.toString().slice(-this.remainderLength):this.pad(i.unit_KeyField,this.remainderLength),this.invoiceNumber+=o,this.filterString+="&unit="+i.unit_KeyField;break;case"T":o=i.CUSKeyField.length>=+this.remainderLength?i.CUSKeyField.toString().slice(-this.remainderLength):this.pad(i.CUSKeyField,this.remainderLength),this.invoiceNumber+=o,this.filterString+="&customer="+i.CUSKeyField;break;case"C":o=i.contract_KeyField.length>=+this.remainderLength?i.contract_KeyField.toString().slice(-this.remainderLength):this.pad(i.contract_KeyField,this.remainderLength),this.invoiceNumber+=o,this.filterString+="&contract="+i.contract_KeyField;break;case"E":o=i.curUserData.id.length>=+this.remainderLength?i.curUserData.id.toString().slice(-this.remainderLength):this.pad(i.curUserData.id,this.remainderLength),this.invoiceNumber+=o,this.filterString+="&user="+i.curUserData.id;break;case"F":this.invoiceNumber+=o=this.partStartWith;break;case"S":console.log("----++++++++++-------"),console.log("this.filterString:: "+this.filterString),console.log("----++++++++++-------"),this.invoiceService.getInvoicesPerSpecOneString(this.filterString).subscribe(U=>{U.length>0?(this.maxSerial=U[0].INVSerial??0,this.maxSerial+=1,(s=this.maxSerial.toString()).length>=this.partDigitNo?this.invoiceNumber+=o=s:(o=this.pad(s.toString(),this.partDigitNo),this.invoiceNumber+=o),console.log("-------*****PartType=P*after Serial*****---------"),console.log("this.maxSerial:: "+this.maxSerial),console.log("this.invoiceNumber:: "+this.invoiceNumber),console.log("-------***********---------")):(this.maxSerial=1,this.partDigitNo>1?(o=this.pad(1,this.partDigitNo),this.invoiceNumber+=o):this.invoiceNumber+="1",console.log("-------*****PartType=P*after Serial new rows*****---------"),console.log("this.maxSerial:: "+this.maxSerial),console.log("this.invoiceNumber:: "+this.invoiceNumber),console.log("-------***********---------"))})}}):this._contractService.getMaxContractCodeForOwner(this.curCOMId,this.curUserData.periorty,this.curDocUsed).subscribe(C=>{this.maxSerial=C.max,this.invoiceNumber=this.maxSerial.toString(),console.log("-------*****PartType=G******---------"),console.log("this.maxSerial:: "+this.maxSerial),console.log("this.invoiceNumber:: "+this.invoiceNumber),console.log("-------***********---------")})})}createInvoiceNumber(t,i,o){let s=i??0;s+=1;let c=this.pad(s,o);this.newInvNumber=t+c}printEInvoice(t){this.createInvoiceNumber(t.owner_InvMask,+t.owner_LastInvCode,+t.owner_InvCodeLength),this.invType="INV",this.transferService.setMessage({customer_EInvoiceType:t.customer_EInvoiceType,invType:this.invType,ownerID:t.owner_KeyField,tenantID:t.customer_KeyField,ownerTaxNumber:t.owner_TaxNumber,ownerName:t.owner_FullName,ownerAddress:t.owner_Address,ownerCommRegister:t.owner_CommercialRegister,tenantCommRegister:t.customer_CommercialRegister,ownerBankName:t.owner_BankName,ownerBankAccountNumber:t.owner_BankAccountNumber,accountOwnerName:t.owner_BankAccountOwnerName,tenantName:t.customer_Name,tenantAddress:t.customer_Address,tenantTaxNumber:t.customer_TaxNumber,invoiceValue:t.INSValue-t.INSPayedValue,invoiceNumber:this.newInvNumber,intervalStartDate:t.contract_StartDate,intervalEndDate:t.contract_EndDate,ownerLogo:t.owner_LogoPic,ownerLogoBase64:t.owner_LogoBase64}),this.router.navigate(["/contracts/print-einvoice/"])}printEInvoiceRequest(t){this.invType="REQUEST",this.newRequestNumber="R2024000001",this.transferService.setMessage({customer_EInvoiceType:t.customer_EInvoiceType,invType:this.invType,ownerID:t.owner_KeyField,tenantID:t.customer_KeyField,ownerTaxNumber:t.owner_TaxNumber,ownerName:t.owner_FullName,ownerAddress:t.owner_Address,ownerCommRegister:t.owner_CommercialRegister,tenantCommRegister:t.customer_CommercialRegister,ownerBankName:t.owner_BankName,ownerBankAccountNumber:t.owner_BankAccountNumber,accountOwnerName:t.owner_BankAccountOwnerName,tenantName:t.customer_Name,tenantAddress:t.customer_Address,tenantTaxNumber:t.customer_TaxNumber,invoiceValue:t.INSValue-t.INSPayedValue,invoiceNumber:this.newRequestNumber,intervalStartDate:t.contract_StartDate,intervalEndDate:t.contract_EndDate,ownerLogo:t.owner_LogoPic,ownerLogoBase64:t.owner_LogoBase64}),this.router.navigate(["/contracts/print-einvoice/"])}onPageChanged(t){this.page=t,window.scrollTo(0,0)}openCategoryDialog(t){this.dialog.open(Pe,{data:{cttRow:t,contract:this.contract_KeyField,branch:this.branch_KeyField,owner:this.owner_KeyField,build:this.build_KeyField,unit:this.unit_KeyField,customer:this.customer_KeyField},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(o=>{console.log("=====result.event:: "+o.event),"Cancel"==o.event||("Patch"==o.event?(this.mapFormvalue_to_InstallmentClass(o.data),this.updateInstallment(this.installmentForDisplay)):"Post"==o.event&&(this.mapFormvalue_to_InstallmentClass(o.data),this.addInstallment(this.installmentForDisplay)))})}addInstallment(t){console.log("====inside addInstallment== ==="),this._contractService.addInstallments(t).subscribe(i=>this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id))}updateInstallment(t){console.log("====inside updateInstallment====="),this._contractService.editInstallments(t).subscribe(i=>this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,this.id))}mapFormvalue_to_InstallmentClass(t){if(console.log("====formValue.dueDate:: "+t.dueDate),null!=t.dueDate){const c=new _.uU("en-GB").transform(t.dueDate,"dd/MM/yyyy");new Date(new _.uU("en-GB").transform(new Date(t.dueDate),"yyyy/MM/dd")),this.installmentForDisplay.INSDueDate=c}if(null!=t.INSDueToDate){var o=new Date(new _.uU("en-GB").transform(t.INSDueToDate,"yyyy/MM/dd"));this.installmentForDisplay.INSDueToDate=o}if(null!=t.payDate){const c=new _.uU("en-GB").transform(t.payDate,"dd/MM/yyyy");new Date(new _.uU("en-GB").transform(new Date(t.payDate),"yyyy/MM/dd")),this.installmentForDisplay.INSPayDate=c}this.installmentForDisplay.id=t.id,this.installmentForDisplay.INSCode=t.INSCode,this.installmentForDisplay.INSContractTyps=t.INSContractTyps,this.installmentForDisplay.INSStatus=t.INSStatus,this.installmentForDisplay.INSValue=t.INSValue,this.installmentForDisplay.INSPayedValue=t.INSPayedValue,this.installmentForDisplay.INSDueDate=t.dueDate,this.installmentForDisplay.INSPayDate=t.payDate,this.installmentForDisplay.INSPersonPayName=t.INSPersonPayName,this.installmentForDisplay.INSNotes=t.INSNotes,this.installmentForDisplay.RowConfirm=t.RowConfirm,this.installmentForDisplay.RowDelete=t.RowDelete,this.installmentForDisplay.RowStatus=t.RowStatus,this.installmentForDisplay.contract_KeyField=t.contract_KeyField,this.installmentForDisplay.branch_KeyField=t.branch_KeyField,this.installmentForDisplay.owner_KeyField=t.owner_KeyField,this.installmentForDisplay.build_KeyField=t.build_KeyField,this.installmentForDisplay.unit_KeyField=t.unit_KeyField,this.installmentForDisplay.customer_KeyField=t.customer_KeyField}getInstallmentsPerContract(t,i,o){this._contractService.getInstallmentsPerContract(t,i,o).subscribe(s=>{this.contractInstallmentsArray=s},s=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}remove(t){this.dialog.open(ne.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(o=>{o&&this._contractService.deleteInstallment(t).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getInstallmentsPerContract(this.curCOMId,this.account.periorty,t)})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(t=>{this.deletedTitleMsg=t})}}ke.\u0275fac=function(t){return new(t||ke)(e.Y36(ue.y),e.Y36(p.C),e.Y36(j.U),e.Y36(k.F0),e.Y36(k.gz),e.Y36(g.W),e.Y36(Zt.q),e.Y36(de.g),e.Y36(I.ux),e.Y36(y.sK),e.Y36(m.qu),e.Y36(Z.uw),e.Y36(re.d))},ke.\u0275cmp=e.Xpm({type:ke,selectors:[["app-installment"]],decls:34,vars:27,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","click"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,gn,3,3,"button",2),e.qZA(),e._UZ(7,"mat-divider"),e.TgZ(8,"div",3)(9,"div",4)(10,"div",5)(11,"h2"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",5)(15,"h2"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",5)(19,"h2"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",5)(23,"h2"),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",5)(27,"h2"),e._uU(28),e.ALo(29,"translate"),e.qZA()(),e._UZ(30,"div",5),e.qZA(),e.YNc(31,vn,19,13,"div",6),e.ALo(32,"paginate"),e.qZA()(),e.YNc(33,Zn,4,0,"div",7),e.qZA()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,9,"BTN.INSTALLMENT")),e.xp6(2),e.Q6J("ngIf",i.can("add_installment")),e.xp6(6),e.hij(" ",e.lcZ(13,11,"HTML.CODE")," "),e.xp6(4),e.hij(" ",e.lcZ(17,13,"HTML.InstallmentValue")," "),e.xp6(4),e.hij(" ",e.lcZ(21,15,"HTML.DueDate")," "),e.xp6(4),e.hij(" ",e.lcZ(25,17,"HTML.InstallmentStatus")," "),e.xp6(4),e.hij(" ",e.lcZ(29,19,"HTML.PayedValue")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(32,21,i.contractInstallmentsArray,e.WLB(24,An,i.count,i.page))),e.xp6(2),e.Q6J("ngIf",i.contractInstallmentsArray.length>0))},dependencies:[X.LS,_.sg,_.O5,T.xw,T.Wh,T.yH,b.lW,b.nh,V.a8,Q.Hw,ee.d,pe.gM,X._s,_.uU,y.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:480px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});var At=f(6166),xn=f(4159),xt=f.n(xn);function yn(n,t){if(1&n&&(e.TgZ(0,"div",7)(1,"div",10),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"div",10),e._uU(5),e.qZA(),e.TgZ(6,"div",10),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&n){const i=t.$implicit;e.xp6(2),e.Oqu(e.xi3(3,4,i.TSTDate,"yyyy-MM-dd")),e.xp6(3),e.Oqu(i.TSTDebitValue),e.xp6(2),e.Oqu(i.TSTCreditValue),e.xp6(2),e.Oqu(i.TSTDescription)}}function Un(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",11)(1,"div",12)(2,"mat-card",13)(3,"pagination-controls",14),e.NdJ("pageChange",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.onPageChanged(s))}),e.qZA()()()()}}const wn=function(n,t){return{itemsPerPage:n,currentPage:t}};class Be{constructor(t,i,o,s,c,C,x,U){this.localStore=t,this.global=i,this.router=o,this.activatedRoute=s,this.tenantsService=c,this.snackBar=C,this.translateService=x,this.appSettings=U,this.tenantStatementArray=[],this.count=10,this.curCOMId=O.N.comid,this.account=new ae.n,this.totalDebitValue=0,this.tempDebitValue=0,this.totalCreditValue=0,this.tempCreditValue=0,this.settings=this.appSettings.settings}ngOnInit(){this.emptyString=" ",this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")?(this.global.me=JSON.parse(this.localStore.getItem("account")),this.prepareMsgLanguage(),this.sub=this.activatedRoute.params.subscribe(t=>{t.id&&(this.id=+t.id,this.getCustomer(this.id),this.getStatementsPerCustomer(this.curCOMId,this.account.periorty,this.id))})):this.router.navigate(["/sign-in"])}downloadPDF(){var t=document.getElementById("contentToConvert");xt()(t).then(i=>{var c=208*i.height/i.width;const x=i.toDataURL("image/png");let U=new At.ZP("p","mm","a4");U.addImage(x,"PNG",0,0,208,c),U.save("MYPdf.pdf")})}onPageChanged(t){this.page=t,window.scrollTo(0,0)}getStatementsPerCustomer(t,i,o){this.totalDebitValue=0,this.totalCreditValue=0,this.tenantsService.getStatementsPerCustomers(t,i,o).subscribe(s=>{this.tenantStatementArray=s;for(let c=0;c<this.tenantStatementArray.length;c++)this.tempDebitValue=+this.tenantStatementArray[c].TSTDebitValue,this.totalDebitValue+=this.tempDebitValue,this.tempCreditValue=+this.tenantStatementArray[c].TSTCreditValue,this.totalCreditValue+=this.tempCreditValue},s=>{this.snackBar.open(this.errorRetrieveMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCustomer(t){this.tenantsService.getOneCustomer(t).subscribe(i=>{this.cusName=i.CUSName})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t})}}Be.\u0275fac=function(t){return new(t||Be)(e.Y36(p.C),e.Y36(j.U),e.Y36(k.F0),e.Y36(k.gz),e.Y36(L.v),e.Y36(I.ux),e.Y36(y.sK),e.Y36(re.d))},Be.\u0275cmp=e.Xpm({type:Be,selectors:[["app-tenant-statements"]],decls:43,vars:33,consts:[[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click"],["id","contentToConvert",1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell","primary-text","notifbold"],["fxLayout","row wrap",4,"ngIf"],[1,"mat-mdc-cell"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"button",2),e.NdJ("click",function(){return i.downloadPDF()}),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e._UZ(6,"mat-divider"),e.TgZ(7,"div",3)(8,"div",1)(9,"h2"),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e._UZ(12,"mat-divider"),e.TgZ(13,"div",4)(14,"div",5)(15,"h2"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",5)(19,"h2"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",5)(23,"h2"),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",5)(27,"h2"),e._uU(28),e.ALo(29,"translate"),e.qZA()()(),e.YNc(30,yn,10,7,"div",6),e.ALo(31,"paginate"),e.TgZ(32,"div",7)(33,"div",8),e._uU(34,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),e.qZA(),e.TgZ(35,"div",8),e._uU(36),e.qZA(),e.TgZ(37,"div",8),e._uU(38),e.qZA(),e.TgZ(39,"div",8),e._uU(40),e.ALo(41,"translate"),e.qZA()()()(),e.YNc(42,Un,4,0,"div",9),e.qZA()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,13,"BTN.DownloadPDF")),e.xp6(6),e.AsE("",e.lcZ(11,15,"BTN.Statements")," :: ",i.cusName,""),e.xp6(6),e.hij(" ",e.lcZ(17,17,"HTML.Date")," "),e.xp6(4),e.hij(" ",e.lcZ(21,19,"HTML.Debit")," "),e.xp6(4),e.hij(" ",e.lcZ(25,21,"HTML.Credit")," "),e.xp6(4),e.hij(" ",e.lcZ(29,23,"HTML.Description")," "),e.xp6(2),e.Q6J("ngForOf",e.xi3(31,25,i.tenantStatementArray,e.WLB(30,wn,i.count,i.page))),e.xp6(6),e.hij(" ",i.totalDebitValue," "),e.xp6(2),e.hij(" ",i.totalCreditValue," "),e.xp6(2),e.AsE(" ",e.lcZ(41,28,"HTML.Balance")," (",i.totalCreditValue-i.totalDebitValue,") "),e.xp6(2),e.Q6J("ngIf",i.tenantStatementArray.length>0))},dependencies:[X.LS,_.sg,_.O5,T.xw,T.Wh,T.yH,b.lW,V.a8,ee.d,X._s,_.uU,y.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:480px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});class Sn{}function On(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.ADD")))}function Nn(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function In(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"First name is required"),e.qZA())}function Dn(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Last name is required"),e.qZA())}function Fn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"mat-form-field",16)(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",62),e.ALo(5,"translate"),e.TgZ(6,"mat-icon",63),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.passwordHide=!s.passwordHide)}),e._uU(7),e.qZA()()}if(2&n){const i=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"HTML.PASSWORD")),e.xp6(2),e.s9C("placeholder",e.lcZ(5,6,"HTML.PASSWORD")),e.Q6J("type",i.passwordHide?"password":"text"),e.xp6(3),e.Oqu(i.passwordHide?"visibility":"visibility_off")}}function Ln(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"mat-form-field",16)(1,"mat-label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",64),e.ALo(5,"translate"),e.TgZ(6,"mat-icon",63),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.confirmpasswordHide=!s.confirmpasswordHide)}),e._uU(7),e.qZA()()}if(2&n){const i=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"HTML.ConfirmPassword")),e.xp6(2),e.s9C("placeholder",e.lcZ(5,6,"HTML.ConfirmPassword")),e.Q6J("type",i.confirmpasswordHide?"password":"text"),e.xp6(3),e.Oqu(i.confirmpasswordHide?"visibility":"visibility_off")}}function Mn(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.SAVE")))}function En(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function qn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",65),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.onSave())}),e.YNc(1,Mn,3,3,"span",1),e.YNc(2,En,3,3,"span",1),e.qZA()}if(2&n){const i=e.oxw();e.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),e.xp6(1),e.Q6J("ngIf",!i.oneowner.id),e.xp6(1),e.Q6J("ngIf",i.oneowner.id)}}class ye{constructor(t,i,o,s,c,C,x){this.dialogRef=t,this.oneowner=i,this.atlasService=o,this.localStore=s,this.sanitizer=c,this.snackBar=C,this.fb=x,this.passwordHide=!0,this.confirmpasswordHide=!0,this.defaultOwnerImage=(new N.P).noImage,this.defaultOwnerIDImage=(new N.P).noImage,this.defaultOwnerLogo=(new N.P).noImage,this.OwnerImageToUpload=null,this.OwnerIDImageToUpload=null,this.OwnerLogoToUpload=null,this.curCOMId=O.N.comid,this.userPerm=[],this.allowedChar="1234567890",this.lengthOfCode=6}handelOwnerImgInput(t){this.OwnerImageToUpload=t.item(0);var i=new FileReader;i.onload=o=>{this.defaultOwnerImage=o.target.result},i.readAsDataURL(this.OwnerImageToUpload)}handelOwnerIDImgInput(t){this.OwnerIDImageToUpload=t.item(0);var i=new FileReader;i.onload=o=>{this.defaultOwnerIDImage=o.target.result},i.readAsDataURL(this.OwnerIDImageToUpload)}handelOwnerLogo(t){this.OwnerLogoToUpload=t.item(0);var i=new FileReader;i.readAsDataURL(this.OwnerLogoToUpload),i.onload=o=>{this.defaultOwnerLogo=o.target.result,this.fileName=this.OwnerLogoToUpload.name+" "+this.OwnerLogoToUpload.type;const s=i.result.split(",")[1];this.filePreview="data:image/png;base64,"+s,this.form.patchValue({settings:{OWNLogoPicBase64:this.filePreview}})}}sanitize(t){return this.sanitizer.bypassSecurityTrustUrl(t)}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.oneowner&&(this.id=this.oneowner.id),this.form=this.fb.group({id:null,OWNFirstName:["",m.kI.compose([m.kI.required,m.kI.minLength(2)])],OWNLastName:["",m.kI.compose([m.kI.required,m.kI.minLength(2)])],OWNGender:null,OWNSelfType:null,OWNBirthDate:null,OWNPic:null,work:this.fb.group({OWNNationalIDType:null,OWNNationalID:null,OWNNationalIDStartDate:null,OWNNationalIDEndDate:null,OWNIDPic:null}),contacts:this.fb.group({username:{value:null,disabled:this.id},OWNPassword:null,confirmPassword:null,OWNEmail:["",m.kI.compose([m.kI.required,R.Le])],OWNMobile:[null,m.kI.required],OWNMobileWhatsapp:null,OWNHomePhone:null,OWNWorkPhone:null,OWNAddress:null,OWNAddressDescription:null},{validator:(0,R.zi)("OWNPassword","confirmPassword")}),settings:this.fb.group({OWNActive:!1,OWNTaxNumber:null,OWNCommercialRegister:null,OWNBankName:null,OWNBankAccountNumber:null,OWNBankAccountOwnerName:null,OWNLastInvoiceCode:null,OWNInvoiceMask:null,OWNInvoiceNumberLength:null,OWNLogoPic:null,OWNLogoPicBase64:null,EntryDate:null})}),this.oneowner?(this.curPeriority=this.curUserData.periorty,this.action="Patch",this.fillForm(this.oneowner)):(this.curPeriority=0,this.action="Post",this.oneowner=new Sn,this.getMaxCodeForCustomers())}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}fillForm(t){this.defaultOwnerImage=null!=t.OWNPic?t.OWNPic:(new N.P).noImage,this.defaultOwnerIDImage=null!=t.OWNIDPic?t.OWNIDPic:(new N.P).noImage,this.defaultOwnerLogo=null!=t.OWNLogoPic?t.OWNLogoPic:(new N.P).noImage,this.form.patchValue({id:t.id,OWNFirstName:t.OWNFirstName,OWNLastName:t.OWNLastName,OWNGender:t.OWNGender,OWNBirthDate:t.OWNBirthDate,OWNSelfType:t.OWNSelfType,OWNPic:t.OWNPic,work:{OWNNationalIDType:t.OWNNationalIDType,OWNNationalID:t.OWNNationalID,OWNNationalIDStartDate:t.OWNNationalIDStartDate,OWNNationalIDEndDate:t.OWNNationalIDEndDate,OWNIDPic:t.OWNIDPic},contacts:{username:t.username,OWNPassword:t.OWNPassword,confirmPassword:t.OWNPassword,OWNEmail:t.OWNEmail,OWNMobile:t.OWNMobile,OWNMobileWhatsapp:t.OWNMobileWhatsapp,OWNHomePhone:t.OWNHomePhone,OWNWorkPhone:t.OWNWorkPhone,OWNAddress:t.OWNAddress,OWNAddressDescription:t.OWNAddressDescription},settings:{OWNActive:t.OWNActive,OWNTaxNumber:t.OWNTaxNumber,OWNCommercialRegister:t.OWNCommercialRegister,OWNBankName:t.OWNBankName,OWNBankAccountNumber:t.OWNBankAccountNumber,OWNBankAccountOwnerName:t.OWNBankAccountOwnerName,OWNLogoPic:t.OWNLogoPic,OWNLogoPicBase64:t.OWNLogoPicBase64,OWNLastInvoiceCode:t.OWNLastInvoiceCode,OWNInvoiceMask:t.OWNInvoiceMask,OWNInvoiceNumberLength:t.OWNInvoiceNumberLength,EntryDate:t.entryDate}}),this.filePreview=t.OWNLogoPicBase64}onSave(){console.log("===***Press Save button***==="),this.form.valid&&this.dialogRef.close({event:this.action,data:this.form.value,ownPic:this.OwnerImageToUpload,ownerIDPic:this.OwnerIDImageToUpload,ownerLogo:this.OwnerLogoToUpload})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}createRandomString(t,i){let o="";for(let s=0;s<t;s++)o+=i.charAt(Math.floor(Math.random()*i.length));return o}getMaxCodeForCustomers(){let t=this.createRandomString(this.lengthOfCode,this.allowedChar);console.log(t),this.form.patchValue({contacts:{username:t,OWNPassword:t,confirmPassword:t,OWNEmail:"E"+t+"@jeddahlake.com"}})}}ye.\u0275fac=function(t){return new(t||ye)(e.Y36(Z.so),e.Y36(Z.WI),e.Y36(D.Z),e.Y36(p.C),e.Y36(Re.H7),e.Y36(I.ux),e.Y36(m.QS))},ye.\u0275cmp=e.Xpm({type:ye,selectors:[["app-owners-dialog"]],decls:242,vars:156,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content",""],[1,"user-form",3,"formGroup"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],[1,"w-50"],["matInput","","formControlName","OWNFirstName","required",""],[1,"w-45"],["matInput","","formControlName","OWNLastName","required",""],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["formControlName","OWNGender",1,"w-100"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],[1,"w-100"],["matInput","","formControlName","OWNBirthDate",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["formControlName","OWNSelfType","id","selftypeOpSel",3,"placeholder"],[3,"value"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","OWNPic","name","ownPic","id","OwnerPicupload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","work",3,"label"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["formControlName","OWNNationalIDType","id","idTypeOpSel",3,"placeholder"],["matInput","","formControlName","OWNNationalID"],["matInput","","formControlName","OWNNationalIDStartDate",3,"matDatepicker"],["idstartdate",""],["matInput","","formControlName","OWNNationalIDEndDate",3,"matDatepicker"],["idenddate",""],["formControlName","OWNIDPic","name","OWNIDPic","id","OwnerIDPicupload","type","file","accept","image/*",1,"user-img",3,"change"],["formGroupName","contacts",3,"label"],["fxFlex","100","fxFlex.gt-sm","29.9",1,"px-1"],["matInput","","formControlName","username","required","",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","69.8",1,"px-1"],["matInput","","formControlName","OWNEmail","required",""],["class","w-100",4,"ngIf"],["matInput","","formControlName","OWNMobile"],["matInput","","formControlName","OWNMobileWhatsapp"],["matInput","","formControlName","OWNHomePhone"],["matInput","","formControlName","OWNWorkPhone"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","OWNAddress","rows","2"],["matInput","","formControlName","OWNAddressDescription","rows","3"],["formGroupName","settings",3,"label"],["formControlName","OWNActive"],["matInput","","formControlName","OWNTaxNumber"],["matInput","","formControlName","OWNCommercialRegister"],["matInput","","formControlName","OWNBankName"],["matInput","","formControlName","OWNBankAccountNumber"],["matInput","","formControlName","OWNBankAccountOwnerName"],["matInput","","formControlName","OWNLastInvoiceCode"],["matInput","","formControlName","OWNInvoiceMask"],["matInput","","formControlName","OWNInvoiceNumberLength"],["formControlName","OWNLogoPic","name","OWNLogoPic","id","OwnerLogoupload","type","file","accept","image/*",1,"user-img",3,"change"],["width","150","height","150",3,"src"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["matInput","","formControlName","OWNPassword","minlength","6",3,"placeholder","type"],["matSuffix","",3,"click"],["matInput","","formControlName","confirmPassword",3,"placeholder","type"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"h1",0),e.YNc(1,On,3,3,"span",1),e.YNc(2,Nn,3,3,"span",1),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2)(6,"form",3)(7,"mat-tab-group",4)(8,"mat-tab",5),e.ALo(9,"translate"),e.TgZ(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label")(14,"mat-icon"),e._uU(15,"person"),e.qZA(),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"input",9),e.YNc(19,In,2,0,"mat-error",1),e.qZA(),e.TgZ(20,"mat-form-field",10)(21,"mat-label")(22,"mat-icon"),e._uU(23,"person"),e.qZA(),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"input",11),e.YNc(27,Dn,2,0,"mat-error",1),e.qZA()(),e.TgZ(28,"div",7)(29,"div",12)(30,"mat-radio-group",13)(31,"mat-radio-button",14),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"mat-radio-button",15),e._uU(35),e.ALo(36,"translate"),e.qZA()()(),e.TgZ(37,"div",12)(38,"mat-form-field",16)(39,"mat-label"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e._UZ(42,"input",17)(43,"mat-datepicker-toggle",18)(44,"mat-datepicker",null,19),e.qZA()(),e.TgZ(46,"div",12)(47,"mat-form-field",16)(48,"mat-label"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"mat-select",20),e.ALo(52,"translate"),e.TgZ(53,"mat-option",21),e._uU(54,"-"),e.qZA(),e.TgZ(55,"mat-option",21),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"mat-option",21),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"mat-option",21),e._uU(62),e.ALo(63,"translate"),e.qZA()()()()(),e.TgZ(64,"div",22),e._UZ(65,"img",23),e.TgZ(66,"input",24),e.NdJ("change",function(s){return i.handelOwnerImgInput(s.target.files)}),e.qZA()()()(),e.TgZ(67,"mat-tab",25),e.ALo(68,"translate"),e.TgZ(69,"div",6)(70,"div",7)(71,"div",26)(72,"mat-form-field",16)(73,"mat-label"),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"mat-select",27),e.ALo(77,"translate"),e.TgZ(78,"mat-option",21),e._uU(79,"-"),e.qZA(),e.TgZ(80,"mat-option",21),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"mat-option",21),e._uU(84),e.ALo(85,"translate"),e.qZA(),e.TgZ(86,"mat-option",21),e._uU(87),e.ALo(88,"translate"),e.qZA(),e.TgZ(89,"mat-option",21),e._uU(90),e.ALo(91,"translate"),e.qZA(),e.TgZ(92,"mat-option",21),e._uU(93),e.ALo(94,"translate"),e.qZA()()()(),e.TgZ(95,"div",26)(96,"mat-form-field",16)(97,"mat-label"),e._uU(98),e.ALo(99,"translate"),e.qZA(),e._UZ(100,"input",28),e.qZA()()(),e.TgZ(101,"div",7)(102,"div",26)(103,"mat-form-field",16)(104,"mat-label"),e._uU(105),e.ALo(106,"translate"),e.qZA(),e._UZ(107,"input",29)(108,"mat-datepicker-toggle",18)(109,"mat-datepicker",null,30),e.qZA()(),e.TgZ(111,"div",26)(112,"mat-form-field",16)(113,"mat-label"),e._uU(114),e.ALo(115,"translate"),e.qZA(),e._UZ(116,"input",31)(117,"mat-datepicker-toggle",18)(118,"mat-datepicker",null,32),e.qZA()()(),e.TgZ(120,"div",22),e._UZ(121,"img",23),e.TgZ(122,"input",33),e.NdJ("change",function(s){return i.handelOwnerIDImgInput(s.target.files)}),e.qZA()()()(),e.TgZ(123,"mat-tab",34),e.ALo(124,"translate"),e.TgZ(125,"div",6)(126,"div",7)(127,"div",35)(128,"mat-form-field",16)(129,"mat-label"),e._uU(130),e.ALo(131,"translate"),e.qZA(),e._UZ(132,"input",36),e.ALo(133,"translate"),e.qZA()(),e.TgZ(134,"div",37)(135,"mat-form-field",16)(136,"mat-label"),e._uU(137),e.ALo(138,"translate"),e.qZA(),e._UZ(139,"input",38),e.qZA()()(),e.TgZ(140,"div",7)(141,"div",26),e.YNc(142,Fn,8,8,"mat-form-field",39),e.qZA(),e.TgZ(143,"div",26),e.YNc(144,Ln,8,8,"mat-form-field",39),e.qZA()(),e.TgZ(145,"div",7)(146,"div",26)(147,"mat-form-field",16)(148,"mat-label"),e._uU(149),e.ALo(150,"translate"),e.qZA(),e._UZ(151,"input",40),e.qZA()(),e.TgZ(152,"div",26)(153,"mat-form-field",16)(154,"mat-label"),e._uU(155),e.ALo(156,"translate"),e.qZA(),e._UZ(157,"input",41),e.qZA()()(),e.TgZ(158,"div",7)(159,"div",26)(160,"mat-form-field",16)(161,"mat-label"),e._uU(162),e.ALo(163,"translate"),e.qZA(),e._UZ(164,"input",42),e.qZA()(),e.TgZ(165,"div",26)(166,"mat-form-field",16)(167,"mat-label"),e._uU(168),e.ALo(169,"translate"),e.qZA(),e._UZ(170,"input",43),e.qZA()()(),e.TgZ(171,"div",44)(172,"mat-form-field",16)(173,"mat-label"),e._uU(174),e.ALo(175,"translate"),e.qZA(),e._UZ(176,"textarea",45),e.qZA()(),e.TgZ(177,"div",44)(178,"mat-form-field",16)(179,"mat-label"),e._uU(180),e.ALo(181,"translate"),e.qZA(),e._UZ(182,"textarea",46),e.qZA()()()(),e.TgZ(183,"mat-tab",47),e.ALo(184,"translate"),e.TgZ(185,"div",6)(186,"mat-checkbox",48),e._uU(187,"Active"),e.qZA()(),e.TgZ(188,"div",6)(189,"div",7)(190,"mat-form-field",8)(191,"mat-label"),e._uU(192),e.ALo(193,"translate"),e.qZA(),e._UZ(194,"input",49),e.qZA(),e.TgZ(195,"mat-form-field",10)(196,"mat-label"),e._uU(197),e.ALo(198,"translate"),e.qZA(),e._UZ(199,"input",50),e.qZA()(),e.TgZ(200,"div",7)(201,"mat-form-field",8)(202,"mat-label"),e._uU(203),e.ALo(204,"translate"),e.qZA(),e._UZ(205,"input",51),e.qZA(),e.TgZ(206,"mat-form-field",10)(207,"mat-label"),e._uU(208),e.ALo(209,"translate"),e.qZA(),e._UZ(210,"input",52),e.qZA()(),e.TgZ(211,"div",7)(212,"mat-form-field",8)(213,"mat-label"),e._uU(214),e.ALo(215,"translate"),e.qZA(),e._UZ(216,"input",53),e.qZA(),e.TgZ(217,"mat-form-field",10)(218,"mat-label"),e._uU(219),e.ALo(220,"translate"),e.qZA(),e._UZ(221,"input",54),e.qZA()(),e.TgZ(222,"div",7)(223,"mat-form-field",8)(224,"mat-label"),e._uU(225),e.ALo(226,"translate"),e.qZA(),e._UZ(227,"input",55),e.qZA(),e.TgZ(228,"mat-form-field",10)(229,"mat-label"),e._uU(230),e.ALo(231,"translate"),e.qZA(),e._UZ(232,"input",56),e.qZA()(),e.TgZ(233,"div",22)(234,"input",57),e.NdJ("change",function(s){return i.handelOwnerLogo(s.target.files)}),e.qZA(),e._UZ(235,"img",58),e.qZA()()()()()(),e.TgZ(236,"div",59)(237,"div",7),e.YNc(238,qn,3,4,"button",60),e.TgZ(239,"button",61),e.NdJ("click",function(){return i.close()}),e._uU(240),e.ALo(241,"translate"),e.qZA()()()),2&t){const o=e.MAs(45),s=e.MAs(110),c=e.MAs(119);e.xp6(1),e.Q6J("ngIf",!i.oneowner.id),e.xp6(1),e.Q6J("ngIf",i.oneowner.id),e.xp6(1),e.hij(" ",e.lcZ(4,70,"HTML.OWNER"),""),e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("backgroundColor","primary")("color","warn"),e.xp6(1),e.s9C("label",e.lcZ(9,72,"HTML.TAB_BASIC")),e.xp6(8),e.hij(" ",e.lcZ(17,74,"HTML.FIRST_NAME"),""),e.xp6(3),e.Q6J("ngIf",null==i.form.controls.OWNFirstName.errors?null:i.form.controls.OWNFirstName.errors.required),e.xp6(5),e.hij(" ",e.lcZ(25,76,"HTML.LAST_NAME"),""),e.xp6(3),e.Q6J("ngIf",null==i.form.controls.OWNLastName.errors?null:i.form.controls.OWNLastName.errors.required),e.xp6(5),e.Oqu(e.lcZ(33,78,"HTML.MALE")),e.xp6(3),e.Oqu(e.lcZ(36,80,"HTML.FEMALE")),e.xp6(5),e.Oqu(e.lcZ(41,82,"HTML.BIRTH_DATE")),e.xp6(2),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(6),e.Oqu(e.lcZ(50,84,"HTML.OWNER_SelfType")),e.xp6(2),e.s9C("placeholder",e.lcZ(52,86,"HTML.OWNER_SelfType")),e.xp6(4),e.Q6J("value","P"),e.xp6(1),e.Oqu(e.lcZ(57,88,"OPTIONS.Person")),e.xp6(2),e.Q6J("value","C"),e.xp6(1),e.Oqu(e.lcZ(60,90,"OPTIONS.Company")),e.xp6(2),e.Q6J("value","O"),e.xp6(1),e.Oqu(e.lcZ(63,92,"OPTIONS.OTHER")),e.xp6(3),e.Q6J("src",i.defaultOwnerImage,e.LSH),e.xp6(2),e.s9C("label",e.lcZ(68,94,"HTML.TAB_ID")),e.xp6(7),e.Oqu(e.lcZ(75,96,"HTML.IDTYPE")),e.xp6(2),e.s9C("placeholder",e.lcZ(77,98,"HTML.IDTYPE")),e.xp6(4),e.Q6J("value","N"),e.xp6(1),e.Oqu(e.lcZ(82,100,"OPTIONS.NATIONAL_ID")),e.xp6(2),e.Q6J("value","F"),e.xp6(1),e.Oqu(e.lcZ(85,102,"OPTIONS.FOREIGN_ID")),e.xp6(2),e.Q6J("value","K"),e.xp6(1),e.Oqu(e.lcZ(88,104,"OPTIONS.GULF_ID")),e.xp6(2),e.Q6J("value","S"),e.xp6(1),e.Oqu(e.lcZ(91,106,"OPTIONS.SPECIAL_EQAMA")),e.xp6(2),e.Q6J("value","O"),e.xp6(1),e.Oqu(e.lcZ(94,108,"OPTIONS.OTHER")),e.xp6(5),e.Oqu(e.lcZ(99,110,"HTML.IDNUMBER")),e.xp6(7),e.Oqu(e.lcZ(106,112,"HTML.START_DATE")),e.xp6(2),e.Q6J("matDatepicker",s),e.xp6(1),e.Q6J("for",s),e.xp6(6),e.Oqu(e.lcZ(115,114,"HTML.END_DATE")),e.xp6(2),e.Q6J("matDatepicker",c),e.xp6(1),e.Q6J("for",c),e.xp6(4),e.Q6J("src",i.defaultOwnerIDImage,e.LSH),e.xp6(2),e.s9C("label",e.lcZ(124,116,"HTML.TAB_CONTACTS")),e.xp6(7),e.Oqu(e.lcZ(131,118,"HTML.USERNAME")),e.xp6(2),e.s9C("placeholder",e.lcZ(133,120,"HTML.USERNAME")),e.xp6(5),e.Oqu(e.lcZ(138,122,"HTML.EMAIL")),e.xp6(5),e.Q6J("ngIf",!i.oneowner.id),e.xp6(2),e.Q6J("ngIf",!i.oneowner.id),e.xp6(5),e.Oqu(e.lcZ(150,124,"HTML.MOBILE")),e.xp6(6),e.Oqu(e.lcZ(156,126,"HTML.WHATSAPP")),e.xp6(7),e.Oqu(e.lcZ(163,128,"HTML.HOME_PHONE")),e.xp6(6),e.Oqu(e.lcZ(169,130,"HTML.WORK_PHONE")),e.xp6(6),e.Oqu(e.lcZ(175,132,"HTML.ADDRESS")),e.xp6(6),e.Oqu(e.lcZ(181,134,"HTML.ADDRESS_DESC")),e.xp6(3),e.s9C("label",e.lcZ(184,136,"HTML.TAB_SETTINGS")),e.xp6(9),e.Oqu(e.lcZ(193,138,"HTML.TaxNumber")),e.xp6(5),e.Oqu(e.lcZ(198,140,"HTML.CommercialRegister")),e.xp6(6),e.Oqu(e.lcZ(204,142,"HTML.BankName")),e.xp6(5),e.Oqu(e.lcZ(209,144,"HTML.AccountNumber")),e.xp6(6),e.Oqu(e.lcZ(215,146,"HTML.AccountOwnerName")),e.xp6(5),e.Oqu(e.lcZ(220,148,"HTML.InvoiceLastCode")),e.xp6(6),e.Oqu(e.lcZ(226,150,"HTML.InvoiceMask")),e.xp6(5),e.Oqu(e.lcZ(231,152,"HTML.InvoiceCodeLength")),e.xp6(5),e.Q6J("src",i.sanitize(i.filePreview),e.LSH),e.xp6(3),e.Q6J("ngIf",i.oneowner.id&&i.can("change_propertyowner")||!i.oneowner.id&&i.can("add_propertyowner")),e.xp6(2),e.Oqu(e.lcZ(241,154,"BTN.CANCEL"))}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.wO,Ae.VQ,Ae.U0,_.O5,m.sg,m.u,m.x0,T.xw,T.Wh,T.yH,K.ey,b.lW,et.oG,Y.Mq,Y.hl,Y.nW,Z.ZT,Z.uh,Z.xY,Z.H8,Q.Hw,A.Nt,v.KE,v.hX,v.TO,v.R9,E.gD,Te.uX,Te.SP,y.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:600px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}"]});var Rn=f(4870);function Pn(n,t){if(1&n&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.BRAArbName," ")}}function kn(n,t){if(1&n&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.BUIName," ")}}function Bn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.onSave())}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const i=e.oxw();e.Q6J("disabled",!i.dataForm.valid),e.xp6(2),e.Oqu(e.lcZ(3,2,"BTN.SAVE"))}}function Hn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.remove(s.id))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.REMOVE"))}function Jn(n,t){if(1&n&&(e.TgZ(0,"div",20)(1,"div",21),e._uU(2),e.qZA(),e.TgZ(3,"div",21),e._uU(4),e.qZA(),e.TgZ(5,"div",21)(6,"div",22),e.YNc(7,Hn,4,3,"button",23),e.qZA()()()),2&n){const i=t.$implicit,o=e.oxw();e.xp6(2),e.Oqu(i.branch_ArbName),e.xp6(2),e.hij("",i.build_Name," "),e.xp6(3),e.Q6J("ngIf",o.can("delete_owner_security_onebuilding"))}}class He{constructor(t,i,o,s,c,C,x,U,M){this.dialogRef=t,this.oneowner=i,this.atlasService=o,this.unitsService=s,this.translateService=c,this.localStore=C,this.dialog=x,this.snackBar=U,this.fb=M,this.passwordHide=!0,this.curCOMId=O.N.comid,this.userPerm=[],this.AllBranches=[],this.AllBuilding=[]}ngOnInit(){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.dataForm=this.fb.group({branch_KeyField:[null,m.kI.required],build_KeyField:[null,m.kI.required]}),this.Builds=new Rn.x,this.curPeriority=0,this.action="Patch",this.getAllBranches(this.curCOMId,this.curPeriority),this.getOwnerBuilds(),this.prepareMsgLanguage()}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getOwnerBuilds(){this.empBuildings=null,this.unitsService.getAllBuildingForOwner(this.curCOMId,this.curPeriority,this.oneowner.id).subscribe(t=>this.empBuildings=t)}getAllBranches(t,i){this.atlasService.getAllBranch(t,i).subscribe(o=>{this.AllBranches=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(t){this.getBuildingPerBranch(this.curCOMId,this.curPeriority,t.value)}getBuildingPerBranch(t,i,o){null==o?(console.log("-----related:: "+o),this.AllBuilding=[]):this.unitsService.getBuildingsPerBranch(t,i,o).subscribe(s=>{this.AllBuilding=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapFormValue_toTable(){this.Builds.owner_KeyField=this.oneowner.id,this.Builds.build_KeyField=this.dataForm.value.build_KeyField,this.Builds.branch_KeyField=this.dataForm.value.branch_KeyField}onSave(){this.mapFormValue_toTable(),this.unitsService.addBuildForOwner(this.Builds).subscribe(()=>{this.snackBar.open(this.dataSavedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerBuilds()})}close(){this.action="Cancel",console.log("===***Press Close button***==="),this.dialogRef.close({event:this.action})}remove(t){this.dialog.open(ne.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(o=>{o&&this.unitsService.deleteBuildingForOwner(t).subscribe(()=>{this.snackBar.open(this.deletedMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.getOwnerBuilds()})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.DataSaved").subscribe(t=>{this.dataSavedMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(t=>{this.deletedTitleMsg=t})}}He.\u0275fac=function(t){return new(t||He)(e.Y36(Z.so),e.Y36(Z.WI),e.Y36(D.Z),e.Y36(G.X),e.Y36(y.sK),e.Y36(p.C),e.Y36(Z.uw),e.Y36(I.ux),e.Y36(m.QS))},He.\u0275cmp=e.Xpm({type:He,selectors:[["app-owners-builds-dialog"]],decls:51,vars:29,consts:[["autocomplete","off",3,"formGroup"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","branch_KeyField","id","branchContOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","build_KeyField","id","build_OneOpSel",3,"placeholder"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"p-2"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","warn","class","mx-1",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"mx-1",3,"matTooltip","click"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-select",6),e.NdJ("selectionChange",function(s){return i.getBuildings(s)}),e.ALo(10,"translate"),e.TgZ(11,"mat-option",7),e._uU(12,"-"),e.qZA(),e.YNc(13,Pn,2,2,"mat-option",8),e.qZA()()(),e.TgZ(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"mat-select",9),e.ALo(20,"translate"),e.TgZ(21,"mat-option",7),e._uU(22,"-"),e.qZA(),e.YNc(23,kn,2,2,"mat-option",8),e.qZA()()()()()(),e.TgZ(24,"div",10)(25,"div",3),e.YNc(26,Bn,4,4,"button",11),e.TgZ(27,"button",12),e.NdJ("click",function(){return i.close()}),e._uU(28),e.ALo(29,"translate"),e.qZA()()(),e._UZ(30,"mat-divider"),e.TgZ(31,"div",13)(32,"mat-dialog-content")(33,"mat-card")(34,"div",14)(35,"h2"),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e._UZ(38,"mat-divider"),e.TgZ(39,"div",15)(40,"div",16)(41,"div",17)(42,"h2"),e._uU(43),e.ALo(44,"translate"),e.qZA()(),e.TgZ(45,"div",17)(46,"h2"),e._uU(47),e.ALo(48,"translate"),e.qZA()(),e._UZ(49,"div",17),e.qZA(),e.YNc(50,Jn,8,3,"div",18),e.qZA()()()()()),2&t&&(e.Q6J("formGroup",i.dataForm),e.xp6(7),e.hij(" ",e.lcZ(8,13,"HTML.BRANCH"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(10,15,"HTML.BRANCH")),e.xp6(4),e.Q6J("ngForOf",i.AllBranches),e.xp6(4),e.hij(" ",e.lcZ(18,17,"HTML.BUILDING"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(20,19,"HTML.BUILDING")),e.xp6(4),e.Q6J("ngForOf",i.AllBuilding),e.xp6(3),e.Q6J("ngIf",i.can("add_owner_security_onebuilding")),e.xp6(2),e.Oqu(e.lcZ(29,21,"BTN.CANCEL")),e.xp6(8),e.Oqu(e.lcZ(37,23,"HTML.OwnerBuilding")),e.xp6(7),e.hij(" ",e.lcZ(44,25,"HTML.BRANCH")," "),e.xp6(4),e.hij(" ",e.lcZ(48,27,"HTML.BUILDING")," "),e.xp6(3),e.Q6J("ngForOf",i.empBuildings))},dependencies:[m._Y,m.JJ,m.JL,_.sg,_.O5,m.sg,m.u,T.xw,T.Wh,T.yH,K.ey,b.lW,b.nh,V.a8,Z.xY,Z.H8,Q.Hw,v.KE,v.hX,ee.d,E.gD,pe.gM,y.X$],styles:[".user-form[_ngcontent-%COMP%]   .form-field-outer[_ngcontent-%COMP%]{width:680px}.user-form[_ngcontent-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{margin-right:12px}.auth[_ngcontent-%COMP%]{white-space:nowrap;padding:7px 14px;font-weight:500}"]});var Wn=f(3221),gt=f(8255),Kn=f(455);function Vn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"mat-button-toggle",16),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.openOwnerDialog(null))}),e.TgZ(1,"mat-icon"),e._uU(2,"person_add"),e.qZA()()}}function Yn(n,t){if(1&n&&(e.TgZ(0,"h3",39),e._uU(1),e.qZA()),2&n){const i=e.oxw().$implicit;e.xp6(1),e.AsE("",i.OWNFirstName," ",i.OWNLastName,"")}}function Gn(n,t){1&n&&(e.TgZ(0,"h3",39),e._uU(1,"User blocked"),e.qZA())}function Qn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.openOwnerDialog(s))}),e.TgZ(1,"mat-icon"),e._uU(2,"mode_edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"BTN.VIEW")))}function jn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.deleteOwner(s))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"BTN.REMOVE")))}function $n(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.changePassword(s))}),e.TgZ(1,"mat-icon"),e._uU(2,"key"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"BTN.PasswordChange")))}function zn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.openBuildingDialog(s))}),e.TgZ(1,"mat-icon"),e._uU(2,"business"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"BTN.Building")))}function Xn(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.openUserPermission(s.Userid))}),e.TgZ(1,"mat-icon"),e._uU(2,"security"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"BTN.Security")))}function eo(n,t){if(1&n&&e._UZ(0,"img",41),2&n){const i=e.oxw().$implicit;e.ekj("blocked",1==i.RowDelete),e.Q6J("src",i.OWNPic,e.LSH)}}function to(n,t){if(1&n&&e._UZ(0,"img",42),2&n){const i=e.oxw().$implicit;e.ekj("blocked",1==i.RowDelete)}}function io(n,t){1&n&&(e.TgZ(0,"mat-icon",43),e._uU(1,"block"),e.qZA())}function no(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",19)(1,"mat-card")(2,"div",20),e.YNc(3,Yn,2,2,"h3",21),e.YNc(4,Gn,2,0,"h3",21),e.TgZ(5,"button",22,23)(7,"mat-icon"),e._uU(8,"more_vert"),e.qZA()()(),e.TgZ(9,"mat-menu",24,25)(11,"span",26),e.NdJ("mouseleave",function(){e.CHM(i);const s=e.MAs(6);return e.KtG(s.closeMenu())}),e.YNc(12,Qn,6,3,"button",27),e.YNc(13,jn,6,3,"button",27),e._UZ(14,"mat-divider"),e.YNc(15,$n,6,3,"button",27),e._UZ(16,"mat-divider"),e.YNc(17,zn,6,3,"button",27),e.YNc(18,Xn,6,3,"button",27),e.qZA()(),e.TgZ(19,"div",28)(20,"div",29)(21,"div",30),e.YNc(22,eo,1,3,"img",31),e.YNc(23,to,1,2,"img",32),e.YNc(24,io,2,0,"mat-icon",33),e.qZA(),e.TgZ(25,"div",34)(26,"mat-slide-toggle",35),e.NdJ("change",function(){const c=e.CHM(i).$implicit;return e.KtG(c.RowDelete=!c.RowDelete)}),e.qZA()()(),e.TgZ(27,"div",36)(28,"p",37)(29,"mat-icon",38),e._uU(30,"contact_phone"),e.qZA(),e.TgZ(31,"span"),e._uU(32),e.qZA()(),e.TgZ(33,"p",37)(34,"mat-icon",38),e._uU(35,"chat"),e.qZA(),e.TgZ(36,"span"),e._uU(37),e.qZA()(),e.TgZ(38,"p",37)(39,"mat-icon",38),e._uU(40,"mail_outline"),e.qZA(),e.TgZ(41,"span"),e._uU(42),e.qZA()(),e.TgZ(43,"p",37)(44,"mat-icon",38),e._uU(45,"card_membership"),e.qZA(),e.TgZ(46,"span"),e._uU(47),e.qZA()(),e.TgZ(48,"p",37)(49,"mat-icon",38),e._uU(50,"location_on"),e.qZA(),e.TgZ(51,"span"),e._uU(52),e.qZA()()()()()()}if(2&n){const i=t.$implicit,o=e.MAs(10),s=e.oxw(2);e.xp6(3),e.Q6J("ngIf",0==i.RowDelete),e.xp6(1),e.Q6J("ngIf",1==i.RowDelete),e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(7),e.Q6J("ngIf",s.can("view_oneowner")),e.xp6(1),e.Q6J("ngIf",s.can("delete_propertyowner")),e.xp6(2),e.Q6J("ngIf",s.can("change_owner_password")),e.xp6(2),e.Q6J("ngIf",s.can("view_owner_securitybuildings")),e.xp6(1),e.Q6J("ngIf",s.can("view_emp_securitypermissions")),e.xp6(4),e.Q6J("ngIf",i.OWNPic),e.xp6(1),e.Q6J("ngIf",!i.OWNPic),e.xp6(1),e.Q6J("ngIf",1==i.RowDelete),e.xp6(2),e.Q6J("checked",1==i.RowDelete),e.xp6(1),e.ekj("blocked",1==i.RowDelete),e.xp6(5),e.Oqu(i.OWNMobile),e.xp6(5),e.Oqu(i.OWNMobileWhatsapp),e.xp6(5),e.Oqu(i.OWNEmail),e.xp6(5),e.Oqu(i.OWNSelfTypeDisplay),e.xp6(5),e.Oqu(i.OWNAddress)}}const yt=function(n,t){return{itemsPerPage:n,currentPage:t}};function oo(n,t){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,no,53,19,"div",18),e.ALo(2,"paginate"),e.ALo(3,"OwnerSearchPipe"),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.xi3(3,4,i.owners,i.searchText),e.WLB(7,yt,i.count,i.page)))}}function ao(n,t){if(1&n&&(e.TgZ(0,"h3",39),e._uU(1),e.qZA()),2&n){const i=e.oxw().$implicit;e.xp6(1),e.AsE("",i.OWNFirstName," ",i.OWNLastName,"")}}function ro(n,t){1&n&&(e.TgZ(0,"h3",39),e._uU(1,"User blocked"),e.qZA())}function so(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.openOwnerDialog(s))}),e.TgZ(1,"mat-icon"),e._uU(2,"mode_edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"BTN.VIEW")))}function lo(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.deleteOwner(s))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"BTN.REMOVE")))}function co(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.openBuildingDialog(s))}),e.TgZ(1,"mat-icon"),e._uU(2,"business"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"BTN.Building")))}function uo(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.openUserPermission(s.Userid))}),e.TgZ(1,"mat-icon"),e._uU(2,"security"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"BTN.Security")))}function mo(n,t){if(1&n&&e._UZ(0,"img",41),2&n){const i=e.oxw().$implicit;e.ekj("blocked",1==i.RowDelete),e.Q6J("src",i.OWNPic,e.LSH)}}function po(n,t){if(1&n&&e._UZ(0,"img",52),2&n){const i=e.oxw().$implicit;e.ekj("blocked",1==i.RowDelete)}}function ho(n,t){1&n&&(e.TgZ(0,"mat-icon",43),e._uU(1,"block"),e.qZA())}function go(n,t){1&n&&(e.TgZ(0,"mat-icon",38),e._uU(1,"person_outline"),e.qZA())}function _o(n,t){1&n&&(e.TgZ(0,"mat-icon",38),e._uU(1,"person"),e.qZA())}function fo(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",45)(1,"mat-card")(2,"div",20),e.YNc(3,ao,2,2,"h3",21),e.YNc(4,ro,2,0,"h3",21),e.TgZ(5,"button",22,23)(7,"mat-icon"),e._uU(8,"more_vert"),e.qZA()()(),e.TgZ(9,"mat-menu",24,25)(11,"span",26),e.NdJ("mouseleave",function(){e.CHM(i);const s=e.MAs(6);return e.KtG(s.closeMenu())}),e.YNc(12,so,6,3,"button",27),e.YNc(13,lo,6,3,"button",27),e._UZ(14,"mat-divider"),e.YNc(15,co,6,3,"button",27),e.YNc(16,uo,6,3,"button",27),e.qZA()(),e.TgZ(17,"div",28)(18,"div",46)(19,"div",30),e.YNc(20,mo,1,3,"img",31),e.YNc(21,po,1,2,"img",47),e.YNc(22,ho,2,0,"mat-icon",33),e.qZA(),e.TgZ(23,"div",34)(24,"mat-slide-toggle",35),e.NdJ("change",function(){const c=e.CHM(i).$implicit;return e.KtG(c.RowDelete=!c.RowDelete)}),e.qZA()()(),e.TgZ(25,"div",48)(26,"div",49)(27,"p",37)(28,"mat-icon",38),e._uU(29,"chat-dots"),e.qZA(),e.TgZ(30,"span"),e._uU(31),e.qZA()()(),e.TgZ(32,"div",49)(33,"p",37)(34,"mat-icon",38),e._uU(35,"mail_outline"),e.qZA(),e.TgZ(36,"span"),e._uU(37),e.qZA()(),e.TgZ(38,"p",37)(39,"mat-icon",38),e._uU(40,"contact_phone"),e.qZA(),e.TgZ(41,"span"),e._uU(42),e.qZA()(),e.TgZ(43,"p",37)(44,"mat-icon",38),e._uU(45,"location_on"),e.qZA(),e.TgZ(46,"span"),e._uU(47),e.qZA()()(),e.TgZ(48,"div",50)(49,"p",37)(50,"mat-icon",38),e._uU(51,"event_available"),e.qZA(),e.TgZ(52,"span"),e._uU(53),e.ALo(54,"date"),e.qZA()(),e.TgZ(55,"p",37),e.YNc(56,go,2,0,"mat-icon",51),e.YNc(57,_o,2,0,"mat-icon",51),e.TgZ(58,"span"),e._uU(59),e.qZA()()()()()()()}if(2&n){const i=t.$implicit,o=e.MAs(10),s=e.oxw(2);e.xp6(3),e.Q6J("ngIf",0==i.RowDelete),e.xp6(1),e.Q6J("ngIf",1==i.RowDelete),e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(7),e.Q6J("ngIf",s.can("view_oneowner")),e.xp6(1),e.Q6J("ngIf",s.can("delete_propertyowner")),e.xp6(2),e.Q6J("ngIf",s.can("view_owner_securitybuildings")),e.xp6(1),e.Q6J("ngIf",s.can("view_emp_securitypermissions")),e.xp6(4),e.Q6J("ngIf",i.OWNPic),e.xp6(1),e.Q6J("ngIf",!i.OWNPic),e.xp6(1),e.Q6J("ngIf",1==i.RowDelete),e.xp6(2),e.Q6J("checked",1==i.RowDelete),e.xp6(1),e.ekj("blocked",1==i.RowDelete),e.xp6(6),e.Oqu(i.OWNMobileWhatsapp),e.xp6(6),e.Oqu(i.OWNEmail),e.xp6(5),e.Oqu(i.OWNMobile),e.xp6(5),e.Oqu(i.OWNAddress),e.xp6(6),e.hij("Registration ",e.xi3(54,21,i.EntryDate,"dd MMMM, yyyy 'at' HH:mm"),""),e.xp6(3),e.Q6J("ngIf",1==i.RowDelete),e.xp6(1),e.Q6J("ngIf",0==i.RowDelete),e.xp6(2),e.Oqu(1==i.RowDelete?"Blocked":"Active")}}function Co(n,t){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,fo,60,24,"div",44),e.ALo(2,"paginate"),e.ALo(3,"OwnerSearchPipe"),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.xi3(3,4,i.owners,i.searchText),e.WLB(7,yt,i.count,i.page)))}}function To(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",17)(1,"div",45)(2,"mat-card",53)(3,"pagination-controls",54),e.NdJ("pageChange",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.onPageChanged(s))}),e.qZA()()()()}}function bo(n,t){1&n&&(e.TgZ(0,"div",55),e._UZ(1,"mat-spinner",56),e.qZA())}class Je{constructor(t,i,o,s,c,C,x){this.appSettings=t,this.dialog=i,this.router=o,this.global=s,this.localStore=c,this.translateService=C,this.contractService=x,this.count=9,this.curCOMId=O.N.comid,this.account=new ae.n,this.userPerm=[],this.ownersForDisplay={id:null,COMId:null,OWNCode:null,OWNName:null,OWNFirstName:null,OWNLastName:null,OWNGender:null,OWNGenderDisplay:null,OWNBirthDate:null,OWNNationalIDStartDate:null,OWNNationalIDEndDate:null,username:null,OWNPassword:null,OWNMobile:null,OWNMobileWhatsapp:null,OWNHomePhone:null,OWNWorkPhone:null,OWNEmail:null,OWNAddress:null,OWNAddressDescription:null,OWNNotes:null,OWNActive:null,OWNActiveDisplay:null,OWNPic:null,OWNIDPic:null,Related_OWNKeyField:null,Country_CTTKeyField:null,Governorate_CTTKeyField:null,OWNNationalIDType:null,OWNNationalIDTypeDisplay:null,OWNNationalID:null,City_CTTKeyField:null,Area_CTTKeyField:null,OWNLangtitude:null,OWNAltitude:null,OWNSelfType:null,OWNSelfTypeDisplay:null,OWNTaxNumber:null,OWNCommercialRegister:null,OWNBankName:null,OWNBankAccountNumber:null,OWNBankAccountOwnerName:null,OWNLogoPic:null,OWNLogoPicBase64:null,OWNLastInvoiceCode:null,OWNInvoiceMask:null,OWNInvoiceNumberLength:null,EntryDate:null,last_updated:null,EntryUser:null,RowConfirm:0,RowDelete:0,RowStatus:0},this.settings=this.appSettings.settings}ngOnInit(){if(this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.prepareMsgLanguage(),this.getOwners()}else this.router.navigate(["/sign-in"])}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getOwners(){this.owners=null,this.curOwnerId=this.curUserData.owner_KeyField??0,this.curUserData.is_superuser?(console.log("-----SuperUser-----"),this.contractService.getAllOwners(this.curCOMId,this.account.periorty).subscribe(t=>{console.log(t),this.owners=t})):"T"==this.curUserData.is_owner?(console.log("-----Owner-----"),this.contractService.getOwnersPerParent(this.curCOMId,this.account.periorty,this.curOwnerId).subscribe(t=>{console.log(t),this.owners=t})):"T"==this.curUserData.is_employee&&(console.log("-----Employee-----"),console.log("this.curUserData[id]:: "+this.curUserData.id),this.contractService.getOwnersPerEmp(this.curCOMId,this.account.periorty,this.curUserData.id).subscribe(t=>{console.log(t),console.log("----After----"),this.owners=t}))}addOwner(t,i,o,s){this.contractService.addOwner(t,i,o,s).subscribe(c=>{this.contractService.addCustomUserFromOwner(c,i).subscribe(C=>{this.contractService.updateOwnerWithUserID(c.id,C.id).subscribe(x=>{},x=>{console.log("ERROR::--\x3e ",x)})}),this.getOwners()})}updateOwner(t,i,o,s){console.log("====inside updateOwner====="),this.contractService.editOwner(t,i,o,s).subscribe(c=>{this.contractService.updateCustomUserFromOwner(c,i).subscribe(C=>{}),this.getOwners()})}changePassword(t){this.dialog.open(ht.p,{data:{dataRow:t,curUserData:this.curUserData,userPerm:this.userPerm,pk:t.Userid},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(o=>{})}deleteOwner(t){this.dialog.open(ne.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(o=>{o&&this.contractService.deleteOneOwner(t.id).subscribe(s=>this.getOwners())})}onPageChanged(t){this.page=t,this.getOwners(),window.scrollTo(0,0)}openOwnerDialog(t){this.dialog.open(ye,{data:t}).afterClosed().subscribe(o=>{"Cancel"==o.event||("Patch"==o.event?(this.mapFormvalue_to_OwnerClass(o.data,"Patch"),this.updateOwner(this.ownersForDisplay,o.ownPic,o.ownerIDPic,o.ownerLogo)):"Post"==o.event&&(this.mapFormvalue_to_OwnerClass(o.data,"Post"),this.addOwner(this.ownersForDisplay,o.ownPic,o.ownerIDPic,o.ownerLogo)))})}openBuildingDialog(t){this.dialog.open(He,{data:t,panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(o=>{})}openSecurityDialog(t){this.dialog.open(Wn.y,{data:t}).afterClosed().subscribe(o=>{})}openUserPermission(t){this.router.navigate(["/settings/permissions-all/"+t+"/"])}mapFormvalue_to_OwnerClass(t,i){console.log(t),console.log("=================formValue==========================");const o=new _.uU("en-GB").transform(t.OWNBirthDate,"dd/MM/yyyy"),s=new _.uU("en-GB").transform(t.work.OWNNationalIDStartDate,"dd/MM/yyyy"),c=new _.uU("en-GB").transform(t.work.OWNNationalIDEndDate,"dd/MM/yyyy");this.ownersForDisplay.id=t.id,this.ownersForDisplay.OWNFirstName=t.OWNFirstName,this.ownersForDisplay.OWNLastName=t.OWNLastName,this.ownersForDisplay.OWNGender=t.OWNGender,this.ownersForDisplay.OWNSelfType=t.OWNSelfType,null!=t.OWNBirthDate&&(this.ownersForDisplay.OWNBirthDate=o),null!=t.work.OWNNationalIDStartDate&&(this.ownersForDisplay.OWNNationalIDStartDate=s),null!=t.work.OWNNationalIDEndDate&&(this.ownersForDisplay.OWNNationalIDEndDate=c),this.ownersForDisplay.OWNNationalIDType=t.work.OWNNationalIDType,this.ownersForDisplay.OWNNationalID=t.work.OWNNationalID,this.ownersForDisplay.username=t.contacts.username,this.ownersForDisplay.OWNPassword=t.contacts.OWNPassword,this.ownersForDisplay.OWNEmail=t.contacts.OWNEmail,this.ownersForDisplay.OWNMobile=t.contacts.OWNMobile,this.ownersForDisplay.OWNMobileWhatsapp=t.contacts.OWNMobileWhatsapp,this.ownersForDisplay.OWNHomePhone=t.contacts.OWNHomePhone,this.ownersForDisplay.OWNWorkPhone=t.contacts.OWNWorkPhone,this.ownersForDisplay.OWNAddress=t.contacts.OWNAddress,this.ownersForDisplay.OWNAddressDescription=t.contacts.OWNAddressDescription,this.ownersForDisplay.OWNActive=t.settings.OWNActive,this.ownersForDisplay.OWNTaxNumber=t.settings.OWNTaxNumber,this.ownersForDisplay.OWNCommercialRegister=t.settings.OWNCommercialRegister,this.ownersForDisplay.OWNBankName=t.settings.OWNBankName,this.ownersForDisplay.OWNBankAccountNumber=t.settings.OWNBankAccountNumber,this.ownersForDisplay.OWNBankAccountOwnerName=t.settings.OWNBankAccountOwnerName,this.ownersForDisplay.OWNLogoPicBase64=t.settings.OWNLogoPicBase64,this.ownersForDisplay.OWNLastInvoiceCode=t.settings.OWNLastInvoiceCode,this.ownersForDisplay.OWNInvoiceMask=t.settings.OWNInvoiceMask,this.ownersForDisplay.OWNInvoiceNumberLength=t.settings.OWNInvoiceNumberLength}prepareMsgLanguage(){this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(t=>{this.deletedTitleMsg=t})}}Je.\u0275fac=function(t){return new(t||Je)(e.Y36(re.d),e.Y36(Z.uw),e.Y36(k.F0),e.Y36(j.U),e.Y36(p.C),e.Y36(y.sK),e.Y36(g.W))},Je.\u0275cmp=e.Xpm({type:Je,selectors:[["app-owners-list"]],features:[e._Bn([g.W])],decls:25,vars:11,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","grid"],["viewType","matButtonToggleGroup"],["value","grid"],["value","list"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["value","add",3,"click"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-md","33.3","fxFlex.md","50","class","p-2",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-md","33.3","fxFlex.md","50",1,"p-2"],["fxLayout","row","fxLayoutAlign","space-between center",1,"bg-primary"],["class","user-name",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["xPosition","before","overlapTrigger","true"],["menu","matMenu"],[3,"mouseleave"],["mat-menu-item","",3,"click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-around center",1,"user-content"],["fxFlex","30","fxLayout","column","fxLayoutAlign","center center"],[1,"user-img"],["class","transition-2",3,"src","blocked",4,"ngIf"],["src","assets/images/others/user.jpg","class","transition-2",3,"blocked",4,"ngIf"],["color","warn",4,"ngIf"],[1,"user-social"],["color","primary",3,"checked","change"],["fxFlex","70","fxLayout","column",1,"user-details","transition-2"],["fxLayout","row","fxLayoutAlign","start center"],[1,"text-muted"],[1,"user-name"],["mat-menu-item","",3,"click"],[1,"transition-2",3,"src"],["src","assets/images/others/user.jpg",1,"transition-2"],["color","warn"],["fxFlex","100","class","p-2",4,"ngFor","ngForOf"],["fxFlex","100",1,"p-2"],["fxFlex","20","fxFlex.xs","30","fxLayout","column","fxLayoutAlign","center center"],["src","assets/img/users/default-user.jpg","class","transition-2",3,"blocked",4,"ngIf"],["fxFlex","80","fxFlex.xs","70","fxLayout","row","fxLayout.xs","column",1,"user-details","transition-2"],["fxFlex","30","fxFlex.xs","100","fxLayout","column"],["fxFlex","40","fxFlex.xs","100","fxLayout","column"],["class","text-muted",4,"ngIf"],["src","assets/img/users/default-user.jpg",1,"transition-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3),e.YNc(4,Vn,3,0,"mat-button-toggle",4),e.TgZ(5,"mat-button-toggle",5)(6,"mat-icon"),e._uU(7,"search"),e.qZA()()()(),e.TgZ(8,"form",6)(9,"mat-form-field",7)(10,"input",8),e.NdJ("ngModelChange",function(s){return i.searchText=s}),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",9)(13,"mat-button-toggle-group",10,11)(15,"mat-button-toggle",12)(16,"mat-icon"),e._uU(17,"view_module"),e.qZA()(),e.TgZ(18,"mat-button-toggle",13)(19,"mat-icon"),e._uU(20,"view_list"),e.qZA()()()()(),e.YNc(21,oo,4,10,"div",14),e.YNc(22,Co,4,10,"div",14),e.YNc(23,To,4,0,"div",14),e.YNc(24,bo,2,0,"div",15)),2&t){const o=e.MAs(3),s=e.MAs(14);e.xp6(4),e.Q6J("ngIf",i.can("add_propertyowner")),e.xp6(4),e.ekj("show","search"==o.value),e.xp6(2),e.s9C("placeholder",e.lcZ(11,9,"HTML.SEARCH_Owner")),e.Q6J("ngModel",i.searchText),e.xp6(11),e.Q6J("ngIf","grid"==s.value),e.xp6(1),e.Q6J("ngIf","list"==s.value),e.xp6(1),e.Q6J("ngIf",i.owners),e.xp6(1),e.Q6J("ngIf",!i.owners)}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.On,m.F,X.LS,_.sg,_.O5,T.xw,T.Wh,T.yH,b.RK,me.A9,me.Yi,V.a8,Q.Hw,A.Nt,v.KE,ee.d,gt.VK,gt.OP,gt.p6,we.Ou,Kn.Rr,X._s,Se.sp,_.uU,y.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});class _t{}var vo=f(6381),Zo=f(8910);function Ao(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.saveEditDocData(s.tenantLeaveForDisplay.id))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&n){const i=e.oxw();e.Q6J("mat-dialog-close",i.leaveData_Form.value)("disabled",!i.leaveData_Form.valid),e.xp6(1),e.Oqu(e.lcZ(2,3,"BTN.SAVE"))}}class Fe{constructor(t,i,o,s,c,C,x,U,M,F,W,te,oe,be){this.transferService=t,this.dataService=i,this.activatedRoute=o,this.localStore=s,this._companyService=c,this.global=C,this.router=x,this.snackBar=U,this.docsService=M,this.tenantsService=F,this.contractService=W,this.translateService=te,this.fb=oe,this._formBuilder=be,this.curCOMId=O.N.comid,this.account=new ae.n,this.userPerm=[],this.curDocValue=0,this.curDocPayedValue=0}ngOnInit(){if(this.transferService.getMessage.subscribe(t=>{this.contract_KeyField=t.contract_KeyField,this.contEndDate=t.contenddate,this.contValue=t.contvalue,this.contInsurance=t.continsurance,this.leaveID=t.leaveid,this.branch_KeyField=t.branch_KeyField,this.owner_KeyField=t.owner_KeyField,this.build_KeyField=t.build_KeyField,this.unit_KeyField=t.unit_KeyField,this.customer_KeyField=t.customer_KeyField,this.customerName=t.cusName,this.contRemainingInstallments=t.remaining_Installments}),this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.leaveData_Form=this.fb.group({id:null,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,customer_KeyField:null,TELCode:null,TELLastElectricityReading:null,TELCurrentElectricityReading:null,TELContractEndDate:null,TELLeaveDate:null,DaysDiff:{value:null,disabled:!0},contractValue:{value:null,disabled:!0},TELDeductionElectricValue:0,TELDeductionInstallmentValue:0,TELDeductionDamageValue:0,TELDeductionMonthlyExpensesValue:0,TELDeductionCutFromAdditionValue:0,TELDeductionOtherValue:0,TELDeductionTotalValue:0,TELAdditionInsuranceValue:0,TELAdditionCutFromRentValue:0,TELAdditionOtherValue:0,TELAdditionTotalValue:0,TELNotes:null,netTotalDiff:{value:0,disabled:!0}}),this.sub=this.activatedRoute.params.subscribe(t=>{null==t.id?(console.log("----NULL--------------\x3e>>>"),this.tenantLeaveForDisplay=new _t,this.leaveData_Form.patchValue({contract_KeyField:this.contract_KeyField,TELContractEndDate:this.contEndDate,TELAdditionInsuranceValue:this.contInsurance,TELAdditionTotalValue:this.contInsurance,TELNotes:"",branch_KeyField:this.branch_KeyField,owner_KeyField:this.owner_KeyField,build_KeyField:this.build_KeyField,unit_KeyField:this.unit_KeyField,customer_KeyField:this.customer_KeyField,contractValue:this.contValue,TELDeductionInstallmentValue:this.contRemainingInstallments,TELDeductionTotalValue:this.contRemainingInstallments,netTotalDiff:this.contInsurance-this.contRemainingInstallments})):t.id?(console.log("---param:: "+t.id),this.id=+t.id,this.getLeaveDataById(this.id)):(console.log("----Empty----"),this.tenantLeaveForDisplay=new _t)})}else this.router.navigate(["/sign-in"])}onChangeLeaveDate(t){this.calcDays(t.value,this.leaveData_Form.value.TELContractEndDate),this.leaveData_Form.get("TELLeaveDate").patchValue(t.value)}calcDays(t,i){var o=this.calculateDiff(t,i);console.log("---otherDays  "+o);let c=Math.round(this.contValue/365*o*100)/100;null==c&&(c=0),this.leaveData_Form.patchValue({DaysDiff:o,TELAdditionCutFromRentValue:c}),this.calcAdditionTotal()}calculateDiff(t,i){let o=new Date(i);return t=new Date(t),Math.floor((Date.UTC(o.getFullYear(),o.getMonth(),o.getDate())-Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))/864e5)}calcAdditionTotal(){let t=this.leaveData_Form.value.TELAdditionInsuranceValue,i=this.leaveData_Form.value.TELAdditionOtherValue,o=this.leaveData_Form.value.TELAdditionCutFromRentValue;null==t&&(t=0),null==i&&(i=0),null==o&&(o=0),this.leaveData_Form.patchValue({TELAdditionTotalValue:Math.round(100*(+t+ +i+ +o))/100}),this.calcNetTotal()}calcDeductionTotal(){let t=this.leaveData_Form.value.TELDeductionElectricValue,i=this.leaveData_Form.value.TELDeductionInstallmentValue,o=this.leaveData_Form.value.TELDeductionDamageValue,s=this.leaveData_Form.value.TELDeductionMonthlyExpensesValue,c=this.leaveData_Form.value.TELDeductionCutFromAdditionValue,C=this.leaveData_Form.value.TELDeductionOtherValue;null==t&&(t=0),null==i&&(i=0),null==o&&(o=0),null==s&&(s=0),null==c&&(c=0),null==C&&(C=0),this.leaveData_Form.patchValue({TELDeductionTotalValue:Math.round(100*(+t+ +i+ +o+ +s+ +c+ +C))/100}),this.calcNetTotal()}calcNetTotal(){let t=this.leaveData_Form.value.TELAdditionTotalValue,i=this.leaveData_Form.value.TELDeductionTotalValue;null==t&&(t=0),null==i&&(i=0),this.leaveData_Form.patchValue({netTotalDiff:Math.round(100*(+t-+i))/100})}readAddInsuranceValue(t){let i=t.target.value;if(i>0){let o=this.leaveData_Form.value.TELAdditionCutFromRentValue,s=this.leaveData_Form.value.TELAdditionOtherValue;null==o&&(o=0),null==s&&(s=0),this.leaveData_Form.patchValue({TELAdditionTotalValue:+i+ +o+ +s})}}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getLeaveDataById(t){console.log("---inside getLeaveDataById -----"),this.contractService.getLeaveData(t).subscribe(i=>{this.fillForm(i),this.tenantLeaveForDisplay=i},i=>{this.tenantLeaveForDisplay=new _t,console.log("---getLeaveDataById  not found Leave data")})}fillForm(t){null!=t.TELContractEndDate&&(this.contra_endDate=t.TELContractEndDate),null!=t.TELLeaveDate&&(this.contra_leaveDate=t.TELLeaveDate),console.log("---11------"),this.calculateDiffDays=this.calculateDiff(t.TELLeaveDate,t.TELContractEndDate),console.log("---this.calculateDiffDays:: "+this.calculateDiffDays),this.leaveData_Form.patchValue({id:t.id,contract_KeyField:t.contract_KeyField,branch_KeyField:t.branch_KeyField,owner_KeyField:t.owner_KeyField,build_KeyField:t.build_KeyField,unit_KeyField:t.unit_KeyField,customer_KeyField:t.customer_KeyField,TELCode:t.TELCode,TELLastElectricityReading:t.TELLastElectricityReading,TELCurrentElectricityReading:t.TELCurrentElectricityReading,TELContractEndDate:t.TELContractEndDate,TELLeaveDate:t.TELLeaveDate,TELDeductionElectricValue:t.TELDeductionElectricValue,TELDeductionInstallmentValue:t.TELDeductionInstallmentValue,TELDeductionDamageValue:t.TELDeductionDamageValue,TELDeductionMonthlyExpensesValue:t.TELDeductionMonthlyExpensesValue,TELDeductionCutFromAdditionValue:t.TELDeductionCutFromAdditionValue,TELDeductionOtherValue:t.TELDeductionOtherValue,TELDeductionTotalValue:t.TELDeductionTotalValue,TELAdditionInsuranceValue:t.TELAdditionInsuranceValue,TELAdditionCutFromRentValue:t.TELAdditionCutFromRentValue,TELAdditionOtherValue:t.TELAdditionOtherValue,TELAdditionTotalValue:t.TELAdditionTotalValue,TELNotes:t.TELNotes,netTotalDiff:t.TELAdditionTotalValue-t.TELDeductionTotalValue,contractValue:this.contValue,DaysDiff:this.calculateDiffDays}),console.log("---22------")}mappingFormValue_ToPayDocClass(){const t=new _.uU("en-GB").transform(this.leaveData_Form.value.TELContractEndDate,"dd/MM/yyyy"),i=new _.uU("en-GB").transform(this.leaveData_Form.value.TELLeaveDate,"dd/MM/yyyy");this.tenantLeaveForDisplay.id=this.leaveData_Form.value.id,this.tenantLeaveForDisplay.contract_KeyField=this.leaveData_Form.value.contract_KeyField,this.tenantLeaveForDisplay.branch_KeyField=this.leaveData_Form.value.branch_KeyField,this.tenantLeaveForDisplay.owner_KeyField=this.leaveData_Form.value.owner_KeyField,this.tenantLeaveForDisplay.build_KeyField=this.leaveData_Form.value.build_KeyField,this.tenantLeaveForDisplay.unit_KeyField=this.leaveData_Form.value.unit_KeyField,this.tenantLeaveForDisplay.customer_KeyField=this.leaveData_Form.value.customer_KeyField,null!=this.leaveData_Form.value.TELContractEndDate&&(this.tenantLeaveForDisplay.TELContractEndDate=t),null!=this.leaveData_Form.value.TELLeaveDate&&(this.tenantLeaveForDisplay.TELLeaveDate=i),this.tenantLeaveForDisplay.TELCode=this.leaveData_Form.value.TELCode,this.tenantLeaveForDisplay.TELLastElectricityReading=this.leaveData_Form.value.TELLastElectricityReading,this.tenantLeaveForDisplay.TELCurrentElectricityReading=this.leaveData_Form.value.TELCurrentElectricityReading,this.tenantLeaveForDisplay.TELDeductionElectricValue=this.leaveData_Form.value.TELDeductionElectricValue,this.tenantLeaveForDisplay.TELDeductionInstallmentValue=this.leaveData_Form.value.TELDeductionInstallmentValue,this.tenantLeaveForDisplay.TELDeductionDamageValue=this.leaveData_Form.value.TELDeductionDamageValue,this.tenantLeaveForDisplay.TELDeductionMonthlyExpensesValue=this.leaveData_Form.value.TELDeductionMonthlyExpensesValue,this.tenantLeaveForDisplay.TELDeductionCutFromAdditionValue=this.leaveData_Form.value.TELDeductionCutFromAdditionValue,this.tenantLeaveForDisplay.TELDeductionOtherValue=this.leaveData_Form.value.TELDeductionOtherValue,this.tenantLeaveForDisplay.TELDeductionTotalValue=this.leaveData_Form.value.TELDeductionTotalValue,this.tenantLeaveForDisplay.TELAdditionInsuranceValue=this.leaveData_Form.value.TELAdditionInsuranceValue,this.tenantLeaveForDisplay.TELAdditionCutFromRentValue=this.leaveData_Form.value.TELAdditionCutFromRentValue,this.tenantLeaveForDisplay.TELAdditionOtherValue=this.leaveData_Form.value.TELAdditionOtherValue,this.tenantLeaveForDisplay.TELAdditionTotalValue=this.leaveData_Form.value.TELAdditionTotalValue,this.tenantLeaveForDisplay.TELNotes=this.leaveData_Form.value.TELNotes}saveEditDocData(t){this.mappingFormValue_ToPayDocClass(),t?this.contractService.editTenantLeave(this.tenantLeaveForDisplay).subscribe(i=>{let o={contract_KeyField:i.contract_KeyField,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,customer_KeyField:i.customer_KeyField,TSTCreditValue:i.TELAdditionTotalValue,TSTDebitValue:i.TELDeductionTotalValue,TSTDate:i.TELLeaveDate,TSTDescription:"\u0646\u062a\u064a\u062c\u0629 \u0645\u0633\u062a\u0646\u062f \u0627\u0644\u0625\u062e\u0644\u0627\u0621 \u0631\u0642\u0645 "+i.TELCode,TSTSubject:"LEAVE",TSTSubjectID:i.id};console.log("------Start to Deleted--------"),this.contractService.getStatementsIDPerSubjectID(this.curCOMId,this.account.periorty,"LEAVE",i.id).subscribe(s=>{this.stateID=s[0].id,console.log("this.stateID:: "+this.stateID),this.contractService.deleteStatement(this.stateID).subscribe(c=>{console.log("Statment Deleted"),this.contractService.addStatement(o).subscribe(C=>{console.log("Statment Added after deleted")})})}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):this.contractService.addTenantLeave(this.tenantLeaveForDisplay).subscribe(i=>{this.contractService.editContractWithDic({RCOTenantLeaveID:i.id,RCOContractStatus:"F"},i.contract_KeyField).subscribe(c=>{console.log("editContractWithDic Done")},c=>{console.log("editContractWithDic Error:: "+c)});let s={contract_KeyField:i.contract_KeyField,branch_KeyField:i.branch_KeyField,owner_KeyField:i.owner_KeyField,build_KeyField:i.build_KeyField,unit_KeyField:i.unit_KeyField,customer_KeyField:i.customer_KeyField,TSTCreditValue:i.TELAdditionTotalValue,TSTDebitValue:i.TELDeductionTotalValue,TSTDate:i.TELLeaveDate,TSTDescription:"\u0646\u062a\u064a\u062c\u0629 \u0645\u0633\u062a\u0646\u062f \u0627\u0644\u0625\u062e\u0644\u0627\u0621 \u0631\u0642\u0645 "+i.TELCode,TSTSubject:"LEAVE",TSTSubjectID:i.id};console.log("--tenantStatementData:: "+s),this.contractService.addStatement(s).subscribe(c=>{console.log("addStatement Done")},c=>{console.log("addStatement Error:: "+c)}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/contract-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t})}}Fe.\u0275fac=function(t){return new(t||Fe)(e.Y36(ue.y),e.Y36(S.n),e.Y36(k.gz),e.Y36(p.C),e.Y36(vo.J),e.Y36(j.U),e.Y36(k.F0),e.Y36(I.ux),e.Y36(Zo.c),e.Y36(L.v),e.Y36(g.W),e.Y36(y.sK),e.Y36(m.qu),e.Y36(m.qu))},Fe.\u0275cmp=e.Xpm({type:Fe,selectors:[["app-tenant-leave"]],decls:145,vars:71,consts:[[1,"p-2"],[1,"pt-3"],["autocomplete","off","fxLayout","row wrap",3,"formGroup"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["fxFlex","100","fxFlex.gt-sm","29.9",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","TELContractEndDate"],["matInput","","formControlName","TELLeaveDate",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["contractleaveDate",""],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["matInput","","formControlName","contractValue"],["fxFlex","100","fxFlex.gt-sm","19.8",1,"px-1"],["matInput","","formControlName","DaysDiff"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["matInput","","formControlName","TELLastElectricityReading"],["matInput","","formControlName","TELCurrentElectricityReading"],["fxFlex","100","fxFlex.gt-sm","40",1,"px-2"],["vertical","",2,"height","10px"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-1"],["matInput","","formControlName","TELAdditionInsuranceValue",3,"change"],["matInput","","formControlName","TELAdditionCutFromRentValue",3,"change"],["matInput","","formControlName","TELAdditionOtherValue",3,"change"],["matInput","","formControlName","TELAdditionTotalValue"],["fxFlex","100","fxFlex.gt-sm","10",1,"px-2"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-2"],["matInput","","formControlName","TELDeductionElectricValue",3,"change"],["matInput","","formControlName","TELDeductionInstallmentValue",3,"change"],["matInput","","formControlName","TELDeductionDamageValue",3,"change"],["matInput","","formControlName","TELDeductionMonthlyExpensesValue",3,"change"],["matInput","","formControlName","TELDeductionCutFromAdditionValue",3,"change"],["matInput","","formControlName","TELDeductionOtherValue",3,"change"],["fxFlex","100",1,"px-1"],["matInput","","formControlName","TELDeductionTotalValue"],["fxFlex","100","fxFlex.gt-sm","24.9",1,"px-1"],["matInput","","formControlName","netTotalDiff"],["fxFlex","100","fxFlex.gt-sm","74.9",1,"px-1"],["matInput","","formControlName","TELNotes","rows","3"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"h2"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"mat-card-content",1)(8,"form",2),e._UZ(9,"mat-label"),e.TgZ(10,"div",3)(11,"div",4)(12,"mat-form-field",5)(13,"mat-label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",6),e.qZA()(),e.TgZ(17,"div",4)(18,"mat-form-field",5)(19,"mat-label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"input",7),e.NdJ("dateChange",function(s){return i.onChangeLeaveDate(s)}),e.qZA(),e._UZ(23,"mat-datepicker-toggle",8)(24,"mat-datepicker",null,9),e.qZA()(),e.TgZ(26,"div",10)(27,"mat-form-field",5)(28,"mat-label"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"input",11),e.qZA()(),e.TgZ(32,"div",12)(33,"mat-form-field",5)(34,"mat-label"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"input",13),e.qZA()()(),e.TgZ(38,"div",3)(39,"div",14)(40,"mat-form-field",5)(41,"mat-label"),e._uU(42),e.ALo(43,"translate"),e.qZA(),e._UZ(44,"input",15),e.qZA()(),e.TgZ(45,"div",14)(46,"mat-form-field",5)(47,"mat-label"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e._UZ(50,"input",16),e.qZA()()(),e.TgZ(51,"div",17)(52,"p"),e._uU(53),e.ALo(54,"translate"),e.qZA(),e._UZ(55,"mat-divider",18),e.TgZ(56,"div",19)(57,"div",20)(58,"mat-form-field",5)(59,"mat-label"),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"input",21),e.NdJ("change",function(){return i.calcAdditionTotal()}),e.qZA()()(),e.TgZ(63,"div",20)(64,"mat-form-field",5)(65,"mat-label"),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"input",22),e.NdJ("change",function(){return i.calcAdditionTotal()}),e.qZA()()(),e.TgZ(69,"div",20)(70,"mat-form-field",5)(71,"mat-label"),e._uU(72),e.ALo(73,"translate"),e.qZA(),e.TgZ(74,"input",23),e.NdJ("change",function(){return i.calcAdditionTotal()}),e.qZA()()(),e.TgZ(75,"div",20)(76,"mat-form-field",5)(77,"mat-label"),e._uU(78),e.ALo(79,"translate"),e.qZA(),e._UZ(80,"input",24),e.qZA()()()(),e._UZ(81,"div",25),e.TgZ(82,"div",26)(83,"p"),e._uU(84),e.ALo(85,"translate"),e.qZA(),e._UZ(86,"mat-divider",18),e.TgZ(87,"div",19)(88,"div",20)(89,"mat-form-field",5)(90,"mat-label"),e._uU(91),e.ALo(92,"translate"),e.qZA(),e.TgZ(93,"input",27),e.NdJ("change",function(){return i.calcDeductionTotal()}),e.qZA()()(),e.TgZ(94,"div",20)(95,"mat-form-field",5)(96,"mat-label"),e._uU(97),e.ALo(98,"translate"),e.qZA(),e.TgZ(99,"input",28),e.NdJ("change",function(){return i.calcDeductionTotal()}),e.qZA()()(),e.TgZ(100,"div",20)(101,"mat-form-field",5)(102,"mat-label"),e._uU(103),e.ALo(104,"translate"),e.qZA(),e.TgZ(105,"input",29),e.NdJ("change",function(){return i.calcDeductionTotal()}),e.qZA()()(),e.TgZ(106,"div",20)(107,"mat-form-field",5)(108,"mat-label"),e._uU(109),e.ALo(110,"translate"),e.qZA(),e.TgZ(111,"input",30),e.NdJ("change",function(){return i.calcDeductionTotal()}),e.qZA()()(),e.TgZ(112,"div",20)(113,"mat-form-field",5)(114,"mat-label"),e._uU(115),e.ALo(116,"translate"),e.qZA(),e.TgZ(117,"input",31),e.NdJ("change",function(){return i.calcDeductionTotal()}),e.qZA()()(),e.TgZ(118,"div",20)(119,"mat-form-field",5)(120,"mat-label"),e._uU(121),e.ALo(122,"translate"),e.qZA(),e.TgZ(123,"input",32),e.NdJ("change",function(){return i.calcDeductionTotal()}),e.qZA()()(),e.TgZ(124,"div",33)(125,"mat-form-field",5)(126,"mat-label"),e._uU(127),e.ALo(128,"translate"),e.qZA(),e._UZ(129,"input",34),e.qZA()()()(),e.TgZ(130,"div",3)(131,"div",35)(132,"mat-form-field",5)(133,"mat-label"),e._uU(134),e.ALo(135,"translate"),e.qZA(),e._UZ(136,"input",36),e.qZA()(),e.TgZ(137,"div",37)(138,"mat-form-field",5)(139,"mat-label"),e._uU(140),e.ALo(141,"translate"),e.qZA(),e._UZ(142,"textarea",38),e.qZA()()(),e.TgZ(143,"div",3),e.YNc(144,Ao,3,5,"button",39),e.qZA()()()()()),2&t){const o=e.MAs(25);e.xp6(5),e.AsE("",e.lcZ(6,27,"HTML.TenantLeave"),": ",i.customerName,""),e.xp6(3),e.Q6J("formGroup",i.leaveData_Form),e.xp6(6),e.hij(" ",e.lcZ(15,29,"HTML.ContractEndDate"),""),e.xp6(6),e.Oqu(e.lcZ(21,31,"HTML.ContractLeaveDate")),e.xp6(2),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(6),e.hij(" ",e.lcZ(30,33,"HTML.ContractValue"),""),e.xp6(6),e.hij(" ",e.lcZ(36,35,"HTML.DaysDiff"),""),e.xp6(7),e.hij(" ",e.lcZ(43,37,"HTML.LastElectricityReading"),""),e.xp6(6),e.hij(" ",e.lcZ(49,39,"HTML.ElectricCounterReading"),""),e.xp6(5),e.Oqu(e.lcZ(54,41,"HTML.Addition")),e.xp6(7),e.Oqu(e.lcZ(61,43,"HTML.AdditionInsuranceValue")),e.xp6(6),e.Oqu(e.lcZ(67,45,"HTML.AdditionCutFromRentValue")),e.xp6(6),e.Oqu(e.lcZ(73,47,"HTML.AdditionOtherValue")),e.xp6(6),e.Oqu(e.lcZ(79,49,"HTML.AdditionTotalValue")),e.xp6(6),e.Oqu(e.lcZ(85,51,"HTML.Deduction")),e.xp6(7),e.Oqu(e.lcZ(92,53,"HTML.DeductionElectricValue")),e.xp6(6),e.Oqu(e.lcZ(98,55,"HTML.DeductionInstallmentValue")),e.xp6(6),e.Oqu(e.lcZ(104,57,"HTML.DeductionDamageValue")),e.xp6(6),e.Oqu(e.lcZ(110,59,"HTML.DeductionMonthlyExpensesValue")),e.xp6(6),e.Oqu(e.lcZ(116,61,"HTML.DeductionCutFromAdditionValue")),e.xp6(6),e.Oqu(e.lcZ(122,63,"HTML.DeductionOtherValue")),e.xp6(6),e.Oqu(e.lcZ(128,65,"HTML.DeductionTotalValue")),e.xp6(7),e.hij(" ",e.lcZ(135,67,"HTML.NetValue"),""),e.xp6(6),e.Oqu(e.lcZ(141,69,"HTML.Notes")),e.xp6(4),e.Q6J("ngIf",i.can("doing_tenantleave"))}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,_.O5,m.sg,m.u,T.xw,T.Wh,T.yH,b.lW,V.a8,V.dn,V.dk,V.n5,Y.Mq,Y.hl,Y.nW,Z.ZT,A.Nt,v.KE,v.hX,v.R9,ee.d,y.X$]});var Ue=f(3172),Ut=f(100);const le_TAG_1="01",le_TAG_2="02",le_TAG_3="03",le_TAG_4="04",le_TAG_5="05";class We{constructor(t){this.invoiceService=t,this.formData={InvoiceID:1,NameOfSeller:"\u0627\u0644\u0645\u0628\u0631\u0645\u062c \u0627\u0644\u0639\u0631\u0628\u064a",VatRNumber:"3002011109990663",RealTime:xo(),InvoiceTWVat:"2300.00",VatTotal:"300.00"},this.allOfInvoice=[],this.finalCode=""}ngOnChanges(t){t.formData.currentValue&&(this.formData={InvoiceID:t.formData.currentValue.invid,NameOfSeller:t.formData.currentValue.sellerName,VatRNumber:t.formData.currentValue.vatRegNum,RealTime:t.formData.currentValue.time,InvoiceTWVat:t.formData.currentValue.totalWithVat,VatTotal:t.formData.currentValue.totalVat},this.generateQR(),console.log("-----changes[formData].currentValue.invid:: "+t.formData.currentValue.invid),console.log("----this.finalCode:: "+this.finalCode),this.invoiceService.editInvoice({INVQRString:this.finalCode},t.formData.currentValue.invid).subscribe(o=>{console.log("qrString Saved")},o=>{console.log("Error! qrString not Saved")}))}generateQR(){this.formData&&(function yo(n,t){if(n.split("").every(i=>i.charCodeAt(0)<128)){let i=n.length.toString(16);i=1===i.length?le_TAG_1+"0"+i:le_TAG_1+i,t.push(i),t.push(Ue.lW.from(n,"utf-8").toString("hex"))}else{let i=Ue.lW.from(n,"utf-8"),o=i.length.toString(16);o=1===o.length?le_TAG_1+"0"+o:le_TAG_1+o,t.push(o),t.push(i.toString("hex"))}}(this.formData.NameOfSeller,this.allOfInvoice),function Uo(n,t){let i=n.length.toString(16);i=1===i.length?le_TAG_2+"0"+i:le_TAG_2+i,t.push(i),t.push(Ue.lW.from(n,"utf-8").toString("hex"))}(this.formData.VatRNumber,this.allOfInvoice),function wo(n,t){let i=n.length.toString(16);i=1===i.length?le_TAG_3+"0"+i:le_TAG_3+i,t.push(i),t.push(Ue.lW.from(n,"utf-8").toString("hex"))}(this.formData.RealTime,this.allOfInvoice),function So(n,t){let i=n.length.toString(16);i=1===i.length?le_TAG_4+"0"+i:le_TAG_4+i,t.push(i),t.push(Ue.lW.from(n,"utf-8").toString("hex"))}(this.formData.InvoiceTWVat,this.allOfInvoice),function Oo(n,t){let i=n.length.toString(16);i=1===i.length?le_TAG_5+"0"+i:le_TAG_5+i,t.push(i),t.push(Ue.lW.from(n,"utf-8").toString("hex"))}(this.formData.VatTotal,this.allOfInvoice),this.finalCode=Ue.lW.from(this.allOfInvoice.join(""),"hex").toString("base64"))}}function xo(n=new Date){let t=String(n.getFullYear()),i=String(n.getMonth()+1),o=String(n.getDate()),s=String(n.getHours()),c=String(n.getMinutes()),C=String(n.getSeconds());return t.length<4&&(t="20"+t),i.length<2&&(i="0"+i),o.length<2&&(o="0"+o),s.length<2&&(s="0"+s),c.length<2&&(c="0"+c),C.length<2&&(C="0"+C),`${t}-${i}-${o}T${s}:${c}:${C}Z`}function No(n,t){if(1&n&&(e.TgZ(0,"div")(1,"p",14),e._uU(2,"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u0644\u0633\u0644\u064a"),e.qZA(),e.TgZ(3,"p",15),e._uU(4),e.qZA()()),2&n){const i=e.oxw();e.xp6(4),e.Oqu(i.invoiceNumber)}}function Io(n,t){if(1&n&&(e.TgZ(0,"td",21),e._UZ(1,"app-qrlevelone",47),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("formData",i.formDataSent)}}function Do(n,t){1&n&&(e.TgZ(0,"div",22)(1,"p",45),e._uU(2,"\u0645\u0644\u0627\u062d\u0638\u0629"),e.qZA(),e.TgZ(3,"p",48),e._uU(4,"\u062a\u0639\u062a\u0628\u0631 \u0647\u0630\u0647 \u0627\u0644\u0648\u0631\u0642\u0629 \u0645\u0637\u0627\u0644\u0628\u0629 \u0648\u0644\u0627 \u064a\u0639\u062a\u0645\u062f \u0628\u0647\u0627 \u0623\u0645\u0627\u0645 \u0627\u0644\u0632\u0643\u0627\u0629 \u0648\u0627\u0644\u062f\u062e\u0644 \u0623\u0648 \u0627\u064a\u0629 \u062c\u0647\u0629 \u062d\u0643\u0648\u0645\u064a\u0629 \u0627\u062e\u0631\u0649 \u0648\u0633\u064a\u062a\u0645 \u0625\u0635\u062f\u0627\u0631 \u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629 \u0628\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0633\u062a\u062d\u0642."),e.qZA(),e.TgZ(5,"p"),e._uU(6," .......... \u0648\u0644\u0643\u0645 \u062c\u0632\u064a \u0627\u0644\u0634\u0643\u0631 .........."),e.qZA()())}We.\u0275fac=function(t){return new(t||We)(e.Y36(Zt.q))},We.\u0275cmp=e.Xpm({type:We,selectors:[["app-qrlevelone"]],inputs:{formData:"formData"},features:[e.TTD],decls:1,vars:5,consts:[[3,"qrdata","width","errorCorrectionLevel","allowEmptyString"]],template:function(t,i){1&t&&e._UZ(0,"qrcode",0),2&t&&e.Q6J("qrdata",i.finalCode)("width",256)("errorCorrectionLevel","M")("width",130)("allowEmptyString",!0)},dependencies:[Ut.V]});class Ke{constructor(t,i,o,s,c,C){this.transferService=t,this.appSettings=i,this.datePipe=o,this.http=s,this._sanitizer=c,this.settingService=C,this.getBase64StringFromDataURL=x=>x.replace("data:","").replace(/^.+,/,""),this.settings=this.appSettings.settings}ngOnInit(){this.transferService.getMessage.subscribe(c=>{this.invoiceID=c.invId,this.ownerid=c.ownerID,this.tenantid=c.tenantID,this.ownerTaxNumber=c.ownerTaxNumber,this.ownerName=c.ownerName,this.ownerCommRegister=c.ownerCommRegister,this.ownerAddress=c.ownerAddress,this.ownerBankName=c.ownerBankName,this.ownerBankAccountNumber=c.ownerBankAccountNumber,this.accountOwnerName=c.accountOwnerName,this.tenantAddress=c.tenantAddress,this.tenantName=c.tenantName,this.tenantTaxNumber=c.tenantTaxNumber,this.tenantCommRegister=c.tenantCommRegister,this.invoiceValue=c.invoiceValue,this.invoiceNumber=c.invoiceNumber,this.intervalStartDate=c.intervalStartDate,this.intervalEndDate=c.intervalEndDate,this.ownerLogo=c.ownerLogo,this.ownerLogoBase64=c.ownerLogoBase64,this.CusEInvType=c.customer_EInvoiceType,this.invType=c.invType,this.invDate=c.invDate,this.invDateString=c.invDateString,this.invFromDate=c.invFrom,this.invToDate=c.invTo,console.log("-*-*-*this.invType:: "+this.invType+"*-*-*-"),console.log("-*-*-*this.invoiceValue:: "+this.invoiceValue+"*-*-*-"),"S"==this.invType?"B"==this.CusEInvType?this.invTypeText="\u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629":"P"==this.CusEInvType&&(this.invTypeText="\u0641\u0627\u062a\u0648\u0631\u0629 \u0636\u0631\u064a\u0628\u064a\u0629 \u0645\u0628\u0633\u0637\u0629"):"R"==this.invType&&(this.invTypeText="\u0645\u0637\u0627\u0644\u0628\u0640\u0629 \u0645\u0627\u0644\u064a\u0640\u0629")}),this.invoiceValue=parseFloat(this.invoiceValue).toFixed(2),this.taxValue=(.15*this.invoiceValue).toFixed(2),this.netValue=(1.15*this.invoiceValue).toFixed(2);var t=(new Date).setSeconds(0,0),i=new Date(t).toISOString(),o=new Date(this.invDate).setSeconds(0,0),s=new Date(o).toISOString();console.log("---dt:: "+i),console.log("---this.invDate:: "+this.invDate),console.log("---efgh:: "+s),this.curDateTime=i,this.curDate=new Date(this.invDate),this.curDate=this.datePipe.transform(this.curDate,"yyyy-MM-dd"),this.formDataSent={invid:this.invoiceID,sellerName:this.ownerName,vatRegNum:this.ownerTaxNumber,time:this.invDateString,totalWithVat:parseFloat(this.netValue).toFixed(2),totalVat:parseFloat(this.taxValue).toFixed(2)}}sanitize(t){return this._sanitizer.bypassSecurityTrustUrl(t)}testPDF(){}downloadPDF(){var t=document.getElementById("contentToConvert");xt()(t,{scale:2}).then(i=>{var c=208*i.height/i.width;const x=i.toDataURL("image/jpeg",.5),U=this.getBase64StringFromDataURL(x);let M=new At.kH("p","mm","a4");M.addImage(U,"PNG",0,0,208,c),M.save(this.curDateTime.toString()+".pdf")})}printinv(){let t,i;t=document.getElementById("contentToConvert").innerHTML,i=window.open("","_blank","top=0,left=0,height=100%,width=auto"),i.document.open(),i.document.write(`\n      <html>\n        <head>\n          <title>Print tab</title>\n          <style>          \n          // -----------------------------------------------------------------------\n          \n          *,\n          ::before,\n          ::after {\n            box-sizing: border-box;\n            /* 1 */\n            border-width: 0;\n            /* 2 */\n            border-style: solid;\n            /* 2 */\n            border-color: #e5e7eb;\n            /* 2 */\n          }\n          \n          ::before,\n          ::after {\n            --tw-content: '';\n          }\n          \n          html {\n            line-height: 1.5;\n            /* 1 */\n            -webkit-text-size-adjust: 100%;\n            /* 2 */\n            -moz-tab-size: 4;\n            /* 3 */\n            tab-size: 4;\n            /* 3 */\n            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n            /* 4 */\n            font-feature-settings: normal;\n            /* 5 */\n            font-variation-settings: normal;\n            /* 6 */\n          }\n          \n          body {\n            margin: 0;\n            /* 1 */\n            line-height: inherit;\n            /* 2 */\n          }\n          \n          /*\n          1. Add the correct height in Firefox.\n          2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n          3. Ensure horizontal rules are visible by default.\n          */\n          \n          hr {\n            height: 0;\n            /* 1 */\n            color: inherit;\n            /* 2 */\n            border-top-width: 1px;\n            /* 3 */\n          }\n          \n          /*\n          Add the correct text decoration in Chrome, Edge, and Safari.\n          */\n          \n          abbr:where([title]) {\n            -webkit-text-decoration: underline dotted;\n                    text-decoration: underline dotted;\n          }\n          \n          /*\n          Remove the default font size and weight for headings.\n          */\n          \n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6 {\n            font-size: inherit;\n            font-weight: inherit;\n          }\n          \n          /*\n          Reset links to optimize for opt-in styling instead of opt-out.\n          */\n          \n          a {\n            color: inherit;\n            text-decoration: inherit;\n          }\n          \n          /*\n          Add the correct font weight in Edge and Safari.\n          */\n          \n          b,\n          strong {\n            font-weight: bolder;\n          }\n          \n          code,\n          kbd,\n          samp,\n          pre {\n            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n            /* 1 */\n            font-size: 1em;\n            /* 2 */\n          }\n          \n          /*\n          Add the correct font size in all browsers.\n          */\n          \n          small {\n            font-size: 80%;\n          }\n          \n          sub,\n          sup {\n            font-size: 75%;\n            line-height: 0;\n            position: relative;\n            vertical-align: baseline;\n          }\n          \n          sub {\n            bottom: -0.25em;\n          }\n          \n          sup {\n            top: -0.5em;\n          }\n          \n          /*\n          1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n          2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n          3. Remove gaps between table borders by default.\n          */\n          \n          table {\n            text-indent: 0;\n            /* 1 */\n            border-color: inherit;\n            /* 2 */\n            border-collapse: collapse;\n            /* 3 */\n          }\n          \n          /*\n          1. Change the font styles in all browsers.\n          2. Remove the margin in Firefox and Safari.\n          3. Remove default padding in all browsers.\n          */\n          \n          button,\n          input,\n          optgroup,\n          select,\n          textarea {\n            font-family: inherit;\n            /* 1 */\n            font-feature-settings: inherit;\n            /* 1 */\n            font-variation-settings: inherit;\n            /* 1 */\n            font-size: 100%;\n            /* 1 */\n            font-weight: inherit;\n            /* 1 */\n            line-height: inherit;\n            /* 1 */\n            color: inherit;\n            /* 1 */\n            margin: 0;\n            /* 2 */\n            padding: 0;\n            /* 3 */\n          }\n          \n          /*\n          Remove the inheritance of text transform in Edge and Firefox.\n          */\n          \n          button,\n          select {\n            text-transform: none;\n          }\n          \n          /*\n          1. Correct the inability to style clickable types in iOS and Safari.\n          2. Remove default button styles.\n          */\n          \n          button,\n          [type='button'],\n          [type='reset'],\n          [type='submit'] {\n            -webkit-appearance: button;\n            /* 1 */\n            background-color: transparent;\n            /* 2 */\n            background-image: none;\n            /* 2 */\n          }\n          \n          /*\n          Use the modern Firefox focus style for all focusable elements.\n          */\n          \n          :-moz-focusring {\n            outline: auto;\n          }\n          \n          :-moz-ui-invalid {\n            box-shadow: none;\n          }\n          \n          /*\n          Add the correct vertical alignment in Chrome and Firefox.\n          */\n          \n          progress {\n            vertical-align: baseline;\n          }\n          \n          /*\n          Correct the cursor style of increment and decrement buttons in Safari.\n          */\n          \n          ::-webkit-inner-spin-button,\n          ::-webkit-outer-spin-button {\n            height: auto;\n          }\n          \n          /*\n          1. Correct the odd appearance in Chrome and Safari.\n          2. Correct the outline style in Safari.\n          */\n          \n          [type='search'] {\n            -webkit-appearance: textfield;\n            /* 1 */\n            outline-offset: -2px;\n            /* 2 */\n          }\n          \n          /*\n          Remove the inner padding in Chrome and Safari on macOS.\n          */\n          \n          ::-webkit-search-decoration {\n            -webkit-appearance: none;\n          }\n          \n          ::-webkit-file-upload-button {\n            -webkit-appearance: button;\n            /* 1 */\n            font: inherit;\n            /* 2 */\n          }\n          \n          /*\n          Add the correct display in Chrome and Safari.\n          */\n          \n          summary {\n            display: list-item;\n          }\n          \n          /*\n          Removes the default spacing and border for appropriate elements.\n          */\n          \n          blockquote,\n          dl,\n          dd,\n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6,\n          hr,\n          figure,\n          p,\n          pre {\n            margin: 0;\n          }\n          \n          fieldset {\n            margin: 0;\n            padding: 0;\n          }\n          \n          legend {\n            padding: 0;\n          }\n          \n          ol,\n          ul,\n          menu {\n            list-style: none;\n            margin: 0;\n            padding: 0;\n          }\n          \n          /*\n          Reset default styling for dialogs.\n          */\n          \n          dialog {\n            padding: 0;\n          }\n          \n          /*\n          Prevent resizing textareas horizontally by default.\n          */\n          \n          textarea {\n            resize: vertical;\n          }\n          \n          /*\n          1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n          2. Set the default placeholder color to the user's configured gray 400 color.\n          */\n          \n          input::placeholder,\n          textarea::placeholder {\n            opacity: 1;\n            /* 1 */\n            color: #9ca3af;\n            /* 2 */\n          }\n          \n          /*\n          Set the default cursor for buttons.\n          */\n          \n          button,\n          [role="button"] {\n            cursor: pointer;\n          }\n          \n          /*\n          Make sure disabled buttons don't get the pointer cursor.\n          */\n          \n          :disabled {\n            cursor: default;\n          }\n          \n          img,\n          svg,\n          video,\n          canvas,\n          audio,\n          iframe,\n          embed,\n          object {\n            display: block;\n            /* 1 */\n            vertical-align: middle;\n            /* 2 */\n          }\n          \n          /*\n          Constrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n          */\n          \n          img,\n          video {\n            max-width: 100%;\n            height: auto;\n          }\n          \n          /* Make elements with the HTML hidden attribute stay hidden by default */\n          \n          [hidden] {\n            display: none;\n          }\n          \n          *, ::before, ::after{\n            --tw-border-spacing-x: 0;\n            --tw-border-spacing-y: 0;\n            --tw-translate-x: 0;\n            --tw-translate-y: 0;\n            --tw-rotate: 0;\n            --tw-skew-x: 0;\n            --tw-skew-y: 0;\n            --tw-scale-x: 1;\n            --tw-scale-y: 1;\n            --tw-pan-x:  ;\n            --tw-pan-y:  ;\n            --tw-pinch-zoom:  ;\n            --tw-scroll-snap-strictness: proximity;\n            --tw-gradient-from-position:  ;\n            --tw-gradient-via-position:  ;\n            --tw-gradient-to-position:  ;\n            --tw-ordinal:  ;\n            --tw-slashed-zero:  ;\n            --tw-numeric-figure:  ;\n            --tw-numeric-spacing:  ;\n            --tw-numeric-fraction:  ;\n            --tw-ring-inset:  ;\n            --tw-ring-offset-width: 0px;\n            --tw-ring-offset-color: #fff;\n            --tw-ring-color: rgb(59 130 246 / 0.5);\n            --tw-ring-offset-shadow: 0 0 #0000;\n            --tw-ring-shadow: 0 0 #0000;\n            --tw-shadow: 0 0 #0000;\n            --tw-shadow-colored: 0 0 #0000;\n            --tw-blur:  ;\n            --tw-brightness:  ;\n            --tw-contrast:  ;\n            --tw-grayscale:  ;\n            --tw-hue-rotate:  ;\n            --tw-invert:  ;\n            --tw-saturate:  ;\n            --tw-sepia:  ;\n            --tw-drop-shadow:  ;\n            --tw-backdrop-blur:  ;\n            --tw-backdrop-brightness:  ;\n            --tw-backdrop-contrast:  ;\n            --tw-backdrop-grayscale:  ;\n            --tw-backdrop-hue-rotate:  ;\n            --tw-backdrop-invert:  ;\n            --tw-backdrop-opacity:  ;\n            --tw-backdrop-saturate:  ;\n            --tw-backdrop-sepia:  ;\n          }\n          \n          ::backdrop{\n            --tw-border-spacing-x: 0;\n            --tw-border-spacing-y: 0;\n            --tw-translate-x: 0;\n            --tw-translate-y: 0;\n            --tw-rotate: 0;\n            --tw-skew-x: 0;\n            --tw-skew-y: 0;\n            --tw-scale-x: 1;\n            --tw-scale-y: 1;\n            --tw-pan-x:  ;\n            --tw-pan-y:  ;\n            --tw-pinch-zoom:  ;\n            --tw-scroll-snap-strictness: proximity;\n            --tw-gradient-from-position:  ;\n            --tw-gradient-via-position:  ;\n            --tw-gradient-to-position:  ;\n            --tw-ordinal:  ;\n            --tw-slashed-zero:  ;\n            --tw-numeric-figure:  ;\n            --tw-numeric-spacing:  ;\n            --tw-numeric-fraction:  ;\n            --tw-ring-inset:  ;\n            --tw-ring-offset-width: 0px;\n            --tw-ring-offset-color: #fff;\n            --tw-ring-color: rgb(59 130 246 / 0.5);\n            --tw-ring-offset-shadow: 0 0 #0000;\n            --tw-ring-shadow: 0 0 #0000;\n            --tw-shadow: 0 0 #0000;\n            --tw-shadow-colored: 0 0 #0000;\n            --tw-blur:  ;\n            --tw-brightness:  ;\n            --tw-contrast:  ;\n            --tw-grayscale:  ;\n            --tw-hue-rotate:  ;\n            --tw-invert:  ;\n            --tw-saturate:  ;\n            --tw-sepia:  ;\n            --tw-drop-shadow:  ;\n            --tw-backdrop-blur:  ;\n            --tw-backdrop-brightness:  ;\n            --tw-backdrop-contrast:  ;\n            --tw-backdrop-grayscale:  ;\n            --tw-backdrop-hue-rotate:  ;\n            --tw-backdrop-invert:  ;\n            --tw-backdrop-opacity:  ;\n            --tw-backdrop-saturate:  ;\n            --tw-backdrop-sepia:  ;\n          }\n          \n          .fixed{\n            position: fixed;\n          }\n          \n          .bottom-0{\n            bottom: 0px;\n          }\n          \n          .left-0{\n            left: 0px;\n          }\n          \n          .table{\n            display: table;\n          }\n          \n          .h-12{\n            height: 3rem;\n          }\n          \n          .w-1/2{\n            width: 50%;\n          }\n          \n          .w-full{\n            width: 100%;\n          }\n          \n          .border-collapse{\n            border-collapse: collapse;\n          }\n          \n          .border-spacing-0{\n            --tw-border-spacing-x: 0px;\n            --tw-border-spacing-y: 0px;\n            border-spacing: var(--tw-border-spacing-x) var(--tw-border-spacing-y);\n          }\n          \n          .whitespace-nowrap{\n            white-space: nowrap;\n          }\n          \n          .border-b{\n            border-bottom-width: 1px;\n          }\n          \n          .border-b-2{\n            border-bottom-width: 2px;\n          }\n          \n          .border-r{\n            border-right-width: 1px;\n          }\n          \n          .border-main{\n            border-color: #5c6ac4;\n          }\n          \n          .bg-main{\n            background-color: #5c6ac4;\n          }\n          \n          .bg-slate-100{\n            background-color: #f1f5f9;\n          }\n          \n          .p-3{\n            padding: 0.75rem;\n          }\n          \n          .p-4{\n              padding: 1.25rem;\n            }\n          \n          .px-14{\n            padding-left: 3.5rem;\n            padding-right: 3.5rem;\n          }\n          \n          .px-2{\n            padding-left: 0.5rem;\n            padding-right: 0.5rem;\n          }\n          \n          .py-10{\n            padding-top: 2.5rem;\n            padding-bottom: 2.5rem;\n          }\n          \n          .py-3{\n            padding-top: 0.75rem;\n            padding-bottom: 0.75rem;\n          }\n          \n          .py-4{\n            padding-top: 1rem;\n            padding-bottom: 1rem;\n          }\n          \n          .py-6{\n            padding-top: 1.5rem;\n            padding-bottom: 1.5rem;\n          }\n          \n          .pb-3{\n            padding-bottom: 0.75rem;\n          }\n          \n          .pl-2{\n            padding-left: 0.5rem;\n          }\n          \n          .pl-3{\n            padding-left: 0.75rem;\n          }\n          \n          .pl-4{\n            padding-left: 1rem;\n          }\n          \n          .pr-3{\n            padding-right: 0.75rem;\n          }\n          \n          .pr-4{\n            padding-right: 1rem;\n          }\n          \n          .pr-6{\n              padding-right: 6rem;\n            }\n          \n          .text-center{\n            text-align: center;\n          }\n          \n          .text-right{\n            text-align: right;\n          }\n          \n          .align-top{\n            vertical-align: top;\n          }\n          \n          .text-sm{\n            font-size: 0.875rem;\n            line-height: 1.25rem;\n          }\n          \n          .text-xs{\n            font-size: 0.75rem;\n            line-height: 1rem;\n          }\n          \n          .font-bold{\n            font-weight: 700;\n          }\n          .font-bold40{\n              font-weight: 700;\n              font-size: 40px;\n            }\n          .font-bold30{\n              font-weight: 700;\n              font-size: 30px;\n          }\n          \n          \n          .italic{\n            font-style: italic;\n          }\n          \n          .text-main{\n            color: #5c6ac4;\n          }\n          \n          .text-neutral-600{\n            color: #525252;\n          }\n          \n          .text-neutral-700{\n            color: #404040;\n          }\n          \n          .text-slate-300{\n            color: #cbd5e1;\n          }\n          \n          .text-slate-400{\n            color: #94a3b8;\n          }\n          \n          .text-white{\n            color: #fff;\n          }\n          \n          @page {\n            margin: 0;\n          }\n          \n          @media print {\n            body {\n              -webkit-print-color-adjust: exact;\n            }\n          }  \n          \n          // -----------------------------------------------------------------------\n.text-head{\n  font-size: 24px;\n  font-weight: bold;\n  color: #111;\n  text-align: center;\n  }\n.text-headdate{\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n  }\n.net{\n  font-size: 14px;\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n  }\n.text-rtl{\n  text-align: right;\n  }\n.msg {\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\n  font-size: 14px;\n  width: 100%;\n  text-align: right;\n}\n.bankdata {\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\n  font-size: 12px;\n  width: 100%;\n  text-align: right;\n}\n.footermsg {\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\n  font-size: 10px;\n  width: 100%;\n  text-align: right;\n}\n.text-headcustomer{\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n  text-align: right;\n  }\n.invoice-box {\n  max-width: 800px;\n  margin: auto;\n  padding: 30px;\n  border: 1px solid #eee;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\n  font-size: 14px;\n  line-height: 24px;\n  font-family: 'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;\n  color: #555;\n}\n\n.invoice-box table {\n  width: 100%;\n  line-height: inherit;\n  text-align: left;\n}\n\n.invoice-box table td {\n  padding: 5px;\n  vertical-align: top;\n}\n\n.invoice-box table tr td:nth-child(2) {\n  text-align: right;\n}\n\n.invoice-box table tr.top table td {\n  padding-bottom: 20px;\n}\n\n.invoice-box table tr.top table td.title {\n  font-size: 45px;\n  line-height: 45px;\n  color: #333;\n}\n\n.invoice-box table tr.information table td {\n  padding-bottom: 40px;\n}\n\n.invoice-box table tr.heading td {\n  background: #eee;\n  border-bottom: 1px solid #ddd;\n  font-weight: bold;\t\n  text-align: right;\t\t\t\n}\n\n.invoice-box table tr.details td {\n  padding-bottom: 20px;\n  border-bottom: 1px solid #eee;\n}\n\n.invoice-box table tr.item td {\n  border-bottom: 1px solid #eee;\n}\n\n.invoice-box table tr.item.last td {\n  border-bottom: none;\n}\n\n.invoice-box table tr.total td:nth-child(2) {\n  border-top: 2px solid #111;\n  font-weight: bold;\n  font-size: 20px;\n}\n\n@media only screen and (max-width: 600px) {\n  .invoice-box table tr.top table td {\n      width: 100%;\n      display: block;\n      text-align: center;\n  }\n\n  .invoice-box table tr.information table td {\n      width: 100%;\n      display: block;\n      text-align: center;\n  }\n}\n\n/** RTL **/\n.invoice-box.rtl {\n  direction: rtl;\n  font-family: Tahoma, 'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;\n}\n\n.invoice-box.rtl table {\n  text-align: right;\n}\n\n.invoice-box.rtl table tr td:nth-child(2) {\n  text-align: left;\n}\n  \n          </style>\n          <script>\n            var global = global || window;\n          <\/script>\n\n        </head>\n    <body onload="window.print();window.close()">${t}</body>\n      </html>`),i.document.close()}}function Fo(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"mat-button-toggle",22),e.NdJ("click",function(){e.CHM(i);const s=e.oxw(2);return e.KtG(s.gotoNewTenantFullData())}),e.TgZ(1,"mat-icon"),e._uU(2,"person_add"),e.qZA()()}}function Lo(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"mat-button-toggle-group",10,11),e.YNc(5,Fo,3,0,"mat-button-toggle",12),e.TgZ(6,"mat-button-toggle",13)(7,"mat-icon"),e._uU(8,"search"),e.qZA()()()(),e.TgZ(9,"form",14)(10,"mat-form-field",15)(11,"input",16),e.NdJ("ngModelChange",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.searchText=s)}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",17)(14,"mat-button-toggle-group",18,19)(16,"mat-button-toggle",20)(17,"mat-icon"),e._uU(18,"view_list"),e.qZA()(),e.TgZ(19,"mat-button-toggle",21)(20,"mat-icon"),e._uU(21,"view_module"),e.qZA()()()()()()}if(2&n){const i=e.MAs(4),o=e.oxw();e.xp6(5),e.Q6J("ngIf",o.can("add_tenant")),e.xp6(4),e.ekj("show","search"==i.value),e.xp6(2),e.s9C("placeholder",e.lcZ(12,5,"HTML.SEARCH_TENANT_AnyValue")),e.Q6J("ngModel",o.searchText)}}Ke.\u0275fac=function(t){return new(t||Ke)(e.Y36(ue.y),e.Y36(re.d),e.Y36(_.uU),e.Y36(Ct.eN),e.Y36(Re.H7),e.Y36(de.g))},Ke.\u0275cmp=e.Xpm({type:Ke,selectors:[["app-print-einvoice"]],features:[e._Bn([_.uU])],decls:151,vars:27,consts:[["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],["mat-raised-button","","color","primary",3,"click"],["id","contentToConvert",1,"py-4"],[1,"px-14","py-6"],[1,"w-full","border-collapse","border-spacing-0"],[1,"w-full","align-top"],["width","150","height","150",3,"src"],[1,"align-top"],[1,"text-sm"],[1,"border-collapse","border-spacing-0"],[1,"pl-4"],[1,"whitespace-nowrap","font-bold30","text-main","text-right"],[1,"border-r","pr-4"],[4,"ngIf"],[1,"whitespace-nowrap","text-slate-400","text-right"],[1,"whitespace-nowrap","font-bold","text-main","text-right"],["class","border-r pr-6",4,"ngIf"],[1,"bg-slate-100","px-14","py-6","text-sm"],[1,"w-1/2","align-top"],[1,"text-sm","text-neutral-600"],[1,"font-bold"],[1,"border-r","pr-6"],[1,"px-14","py-10","text-sm","text-neutral-700"],[1,"border-b-2","border-main","pb-3","pl-3","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","text-right","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","text-center","font-bold","text-main"],[1,"border-b-2","border-main","pb-3","pl-2","pr-3","text-right","font-bold","text-main"],[1,"border-b","py-3","pl-3"],[1,"border-b","py-3","pl-2"],[1,"border-b","py-3","pl-2","text-right"],[1,"border-b","py-3","pl-2","text-center"],[1,"border-b","py-3","pl-2","pr-3","text-right"],["colspan","7"],[1,"w-full"],[1,"border-b","p-3"],[1,"whitespace-nowrap","text-slate-400"],[1,"border-b","p-3","text-right"],[1,"whitespace-nowrap","font-bold","text-main"],[1,"p-3"],[1,"p-3","text-right"],[1,"bg-main","p-3"],[1,"whitespace-nowrap","font-bold","text-white"],[1,"bg-main","p-3","text-right"],[1,"px-14","text-sm","text-neutral-700"],[1,"text-main","font-bold"],["class","px-14 py-10 text-sm text-neutral-700",4,"ngIf"],[3,"formData"],[1,"italic"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-card")(1,"div",0)(2,"button",1),e.NdJ("click",function(){return i.downloadPDF()}),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e._UZ(5,"mat-divider"),e.TgZ(6,"div")(7,"div",2)(8,"div",3)(9,"table",4)(10,"tbody")(11,"tr")(12,"td",5)(13,"div"),e._UZ(14,"img",6),e.qZA()()(),e.TgZ(15,"tr")(16,"td",7)(17,"div",8)(18,"table",9)(19,"tbody")(20,"tr")(21,"td",10),e._UZ(22,"div"),e.qZA(),e.TgZ(23,"td",10),e._UZ(24,"div"),e.qZA(),e.TgZ(25,"td",10)(26,"div")(27,"p",11),e._uU(28),e.qZA()()(),e.TgZ(29,"td",12),e.YNc(30,No,5,1,"div",13),e.TgZ(31,"div")(32,"p",14),e._uU(33,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"),e.qZA(),e.TgZ(34,"p",15),e._uU(35),e.qZA()()(),e.YNc(36,Io,2,1,"td",16),e.qZA()()()()()()()()(),e.TgZ(37,"div",17)(38,"table",4)(39,"tbody")(40,"tr")(41,"td",10),e._UZ(42,"div"),e.qZA(),e.TgZ(43,"td",18)(44,"div",19)(45,"p",20),e._uU(46,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u0643"),e.qZA(),e.TgZ(47,"p",20),e._uU(48),e.qZA(),e.TgZ(49,"p"),e._uU(50),e.qZA(),e.TgZ(51,"p"),e._uU(52),e.qZA(),e.TgZ(53,"p"),e._uU(54),e.qZA()()(),e.TgZ(55,"td",21)(56,"div",19)(57,"p",20),e._uU(58,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644"),e.qZA(),e.TgZ(59,"p",20),e._uU(60),e.qZA(),e.TgZ(61,"p"),e._uU(62),e.qZA(),e.TgZ(63,"p"),e._uU(64),e.qZA(),e.TgZ(65,"p"),e._uU(66),e.qZA()()()()()()(),e.TgZ(67,"div",22)(68,"table",4)(69,"thead")(70,"tr")(71,"td",23),e._uU(72,"#"),e.qZA(),e.TgZ(73,"td",24),e._uU(74,"\u0627\u0644\u0635\u0646\u0641"),e.qZA(),e.TgZ(75,"td",25),e._uU(76,"\u0627\u0644\u0642\u064a\u0645\u0629"),e.qZA(),e.TgZ(77,"td",26),e._uU(78,"\u0627\u0644\u0643\u0645\u064a\u0629."),e.qZA(),e.TgZ(79,"td",25),e._uU(80,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),e.qZA(),e.TgZ(81,"td",26),e._uU(82,"\u0646\u0633\u0628\u0629 \u0627\u0644\u0636\u0631\u064a\u0628\u0629"),e.qZA(),e.TgZ(83,"td",26),e._uU(84,"\u0627\u0644\u0636\u0631\u064a\u0628\u0629"),e.qZA(),e.TgZ(85,"td",27),e._uU(86,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a \u0645\u0639 \u0627\u0644\u0636\u0631\u064a\u0628\u0629"),e.qZA()()(),e.TgZ(87,"tbody")(88,"tr")(89,"td",28),e._uU(90,"1."),e.qZA(),e.TgZ(91,"td",29),e._uU(92,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0625\u064a\u062c\u0627\u0631"),e.qZA(),e.TgZ(93,"td",30),e._uU(94),e.qZA(),e.TgZ(95,"td",31),e._uU(96,"1"),e.qZA(),e.TgZ(97,"td",31),e._uU(98),e.qZA(),e.TgZ(99,"td",31),e._uU(100,"%15"),e.qZA(),e.TgZ(101,"td",30),e._uU(102),e.qZA(),e.TgZ(103,"td",32),e._uU(104),e.qZA()(),e.TgZ(105,"tr")(106,"td",33)(107,"table",4)(108,"tbody")(109,"tr"),e._UZ(110,"td",34),e.TgZ(111,"td")(112,"table",4)(113,"tbody")(114,"tr")(115,"td",35)(116,"div",36),e._uU(117,"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0628\u062f\u0648\u0646 \u0636\u0631\u064a\u0628\u0629:"),e.qZA()(),e.TgZ(118,"td",37)(119,"div",38),e._uU(120),e.qZA()()(),e.TgZ(121,"tr")(122,"td",39)(123,"div",36),e._uU(124,"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0636\u0631\u064a\u0628\u0629:"),e.qZA()(),e.TgZ(125,"td",40)(126,"div",38),e._uU(127),e.qZA()()(),e.TgZ(128,"tr")(129,"td",41)(130,"div",42),e._uU(131,"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0645\u0639 \u0627\u0644\u0636\u0631\u064a\u0628\u0629:"),e.qZA()(),e.TgZ(132,"td",43)(133,"div",42),e._uU(134),e.qZA()()()()()()()()()()()()()(),e.TgZ(135,"div",44)(136,"p",45),e._uU(137,"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062a\u062d\u0648\u064a\u0644"),e.qZA(),e.TgZ(138,"p"),e._uU(139," \u0627\u0633\u0645 \u0627\u0644\u0628\u0646\u0643 : "),e.TgZ(140,"b"),e._uU(141),e.qZA()(),e.TgZ(142,"p"),e._uU(143," \u0631\u0642\u0645 \u0627\u0644\u062d\u0633\u0627\u0628: "),e.TgZ(144,"b"),e._uU(145),e.qZA()(),e.TgZ(146,"p"),e._uU(147," \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f : "),e.TgZ(148,"b"),e._uU(149),e.qZA()()(),e.YNc(150,Do,7,0,"div",46),e.qZA()()()),2&t){let o,s;e.xp6(3),e.Oqu(e.lcZ(4,25,"BTN.DownloadPDF")),e.xp6(11),e.Q6J("src",i.sanitize(i.ownerLogoBase64),e.LSH),e.xp6(14),e.hij("",i.invTypeText," "),e.xp6(2),e.Q6J("ngIf","S"==i.invType),e.xp6(5),e.Oqu(i.curDate),e.xp6(1),e.Q6J("ngIf","S"==i.invType),e.xp6(12),e.Oqu(null!==(o=i.ownerName)&&void 0!==o?o:"Supplier Company INC"),e.xp6(2),e.hij("\u0627\u0644\u0639\u0646\u0648\u0627\u0646: ",i.ownerAddress,""),e.xp6(2),e.hij("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a: ",i.ownerTaxNumber,""),e.xp6(2),e.hij(":\u0631\u0642\u0645 \u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a ",i.ownerCommRegister,""),e.xp6(6),e.Oqu(null!==(s=i.tenantName)&&void 0!==s?s:"Customer Company"),e.xp6(2),e.hij("\u0627\u0644\u0639\u0646\u0648\u0627\u0646: ",i.tenantAddress,""),e.xp6(2),e.hij("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a: ",i.tenantTaxNumber,""),e.xp6(2),e.hij(":\u0631\u0642\u0645 \u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a ",i.tenantCommRegister,""),e.xp6(28),e.hij("",i.invoiceValue," \u0631\u0633"),e.xp6(4),e.hij("",i.invoiceValue," \u0631\u0633"),e.xp6(4),e.hij("",i.taxValue," \u0631\u0633"),e.xp6(2),e.hij("",i.netValue," \u0631\u0633"),e.xp6(16),e.hij("",i.invoiceValue," \u0631\u0633"),e.xp6(7),e.hij("",i.taxValue," \u0631\u0633"),e.xp6(7),e.hij("",i.netValue," \u0631\u0633"),e.xp6(7),e.Oqu(i.ownerBankName),e.xp6(4),e.Oqu(i.ownerBankAccountNumber),e.xp6(4),e.Oqu(i.accountOwnerName),e.xp6(1),e.Q6J("ngIf","REQUEST"==i.invType)}},dependencies:[_.O5,T.xw,T.Wh,b.lW,V.a8,ee.d,We,y.X$],styles:['.text-head[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#111;text-align:center}.text-headdate[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#333;text-align:right}.net[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333;text-align:right}.text-rtl[_ngcontent-%COMP%]{text-align:right}.msg[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-weight:700;font-size:22px;width:100%;text-align:right}.bankdata[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-weight:700;font-size:18px;width:100%;text-align:right}.footermsg[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-weight:700;font-size:16px;width:100%;text-align:right}.text-headcustomer[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#111;text-align:right}.invoice-box[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:30px;border:1px solid #eee;box-shadow:0 0 10px #00000026;font-size:16px;line-height:24px;font-family:Helvetica Neue,Helvetica,Helvetica,Arial,sans-serif;color:#555}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;line-height:inherit;text-align:left}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px;vertical-align:top}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:right}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.top[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:20px}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.top[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.title[_ngcontent-%COMP%]{font-size:45px;line-height:45px;color:#333}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.information[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:40px}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.heading[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#eee;border-bottom:1px solid #ddd;font-weight:700;text-align:right}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:20px;border-bottom:1px solid #eee}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #eee}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.item.last[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:none}.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.total[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){border-top:2px solid #111;font-weight:700;font-size:20px}@media only screen and (max-width: 600px){.invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.top[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice-box[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.information[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:100%;display:block;text-align:center}}.invoice-box.rtl[_ngcontent-%COMP%]{direction:rtl;font-family:Tahoma,Helvetica Neue,Helvetica,Helvetica,Arial,sans-serif}.invoice-box.rtl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{text-align:right}.invoice-box.rtl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:left}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}[_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{--tw-content: ""}html[_ngcontent-%COMP%]{line-height:1.5;-webkit-text-size-adjust:100%;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal}body[_ngcontent-%COMP%]{margin:0;line-height:inherit}hr[_ngcontent-%COMP%]{height:0;color:inherit;border-top-width:1px}abbr[_ngcontent-%COMP%]:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-size:inherit;font-weight:inherit}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}b[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{font-weight:bolder}code[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], samp[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small[_ngcontent-%COMP%]{font-size:80%}sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%]{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub[_ngcontent-%COMP%]{bottom:-.25em}sup[_ngcontent-%COMP%]{top:-.5em}table[_ngcontent-%COMP%]{text-indent:0;border-color:inherit;border-collapse:collapse}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{text-transform:none}button[_ngcontent-%COMP%], [type=button][_ngcontent-%COMP%], [type=reset][_ngcontent-%COMP%], [type=submit][_ngcontent-%COMP%]{-webkit-appearance:button;background-color:transparent;background-image:none}[_ngcontent-%COMP%]:-moz-focusring{outline:auto}[_ngcontent-%COMP%]:-moz-ui-invalid{box-shadow:none}progress[_ngcontent-%COMP%]{vertical-align:baseline}[_ngcontent-%COMP%]::-webkit-inner-spin-button, [_ngcontent-%COMP%]::-webkit-outer-spin-button{height:auto}[type=search][_ngcontent-%COMP%]{-webkit-appearance:textfield;outline-offset:-2px}[_ngcontent-%COMP%]::-webkit-search-decoration{-webkit-appearance:none}[_ngcontent-%COMP%]::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary[_ngcontent-%COMP%]{display:list-item}blockquote[_ngcontent-%COMP%], dl[_ngcontent-%COMP%], dd[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], hr[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], p[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{margin:0}fieldset[_ngcontent-%COMP%]{margin:0;padding:0}legend[_ngcontent-%COMP%]{padding:0}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%], menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}dialog[_ngcontent-%COMP%]{padding:0}textarea[_ngcontent-%COMP%]{resize:vertical}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{opacity:1;color:#9ca3af}button[_ngcontent-%COMP%], [role=button][_ngcontent-%COMP%]{cursor:pointer}[_ngcontent-%COMP%]:disabled{cursor:default}img[_ngcontent-%COMP%], svg[_ngcontent-%COMP%], video[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], audio[_ngcontent-%COMP%], iframe[_ngcontent-%COMP%], embed[_ngcontent-%COMP%], object[_ngcontent-%COMP%]{display:block;vertical-align:middle}img[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{max-width:100%;height:auto}[hidden][_ngcontent-%COMP%]{display:none}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:before, [_ngcontent-%COMP%]:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }[_ngcontent-%COMP%]::-webkit-backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }[_ngcontent-%COMP%]::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.fixed[_ngcontent-%COMP%]{position:fixed}.bottom-0[_ngcontent-%COMP%]{bottom:0}.left-0[_ngcontent-%COMP%]{left:0}.table[_ngcontent-%COMP%]{display:table}.h-12[_ngcontent-%COMP%]{height:3rem}.w-1\\/2[_ngcontent-%COMP%]{width:50%}.w-full[_ngcontent-%COMP%]{width:100%}.border-collapse[_ngcontent-%COMP%]{border-collapse:collapse}.border-spacing-0[_ngcontent-%COMP%]{--tw-border-spacing-x: 0px;--tw-border-spacing-y: 0px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y)}.whitespace-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.border-b[_ngcontent-%COMP%]{border-bottom-width:1px}.border-b-2[_ngcontent-%COMP%]{border-bottom-width:2px}.border-r[_ngcontent-%COMP%]{border-right-width:1px}.border-main[_ngcontent-%COMP%]{border-color:#5c6ac4}.bg-main[_ngcontent-%COMP%]{background-color:#5c6ac4}.bg-slate-100[_ngcontent-%COMP%]{background-color:#f1f5f9}.p-3[_ngcontent-%COMP%]{padding:.75rem}.p-4[_ngcontent-%COMP%]{padding:1.25rem}.px-14[_ngcontent-%COMP%]{padding-left:3.5rem;padding-right:3.5rem}.px-2[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.py-10[_ngcontent-%COMP%]{padding-top:2.5rem;padding-bottom:2.5rem}.py-3[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}.py-4[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.py-6[_ngcontent-%COMP%]{padding-top:1.5rem;padding-bottom:1.5rem}.pb-3[_ngcontent-%COMP%]{padding-bottom:.75rem}.pl-2[_ngcontent-%COMP%]{padding-left:.5rem}.pl-3[_ngcontent-%COMP%]{padding-left:.75rem}.pl-4[_ngcontent-%COMP%]{padding-left:1rem}.pr-3[_ngcontent-%COMP%]{padding-right:.75rem}.pr-4[_ngcontent-%COMP%]{padding-right:1rem}.pr-6[_ngcontent-%COMP%]{padding-right:6rem}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.align-top[_ngcontent-%COMP%]{vertical-align:top}.text-sm[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.text-xs[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.font-bold40[_ngcontent-%COMP%]{font-weight:700;font-size:40px}.font-bold30[_ngcontent-%COMP%]{font-weight:700;font-size:30px}.italic[_ngcontent-%COMP%]{font-style:italic}.text-main[_ngcontent-%COMP%]{color:#5c6ac4}.text-neutral-600[_ngcontent-%COMP%]{color:#525252}.text-neutral-700[_ngcontent-%COMP%]{color:#404040}.text-slate-300[_ngcontent-%COMP%]{color:#cbd5e1}.text-slate-400[_ngcontent-%COMP%]{color:#94a3b8}.text-white[_ngcontent-%COMP%]{color:#fff}@page{margin:0}@media print{body[_ngcontent-%COMP%]{-webkit-print-color-adjust:exact}}']});const Mo=function(n){return["/contracts/businesstenant-add/",n]};function Eo(n,t){if(1&n&&(e.TgZ(0,"a",29),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()),2&n){const i=e.oxw().$implicit;e.s9C("matTooltip",e.lcZ(1,2,"BTN.VIEW")),e.Q6J("routerLink",e.VKq(4,Mo,i.id))}}function qo(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(i);const s=e.oxw().$implicit,c=e.oxw();return e.KtG(c.removeTenant(s.id,s.Userid))}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"BTN.REMOVE"))}const Ro=function(n){return["/contracts/statements-list/",n]};function Po(n,t){if(1&n&&(e.TgZ(0,"a",29),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"receipt"),e.qZA()()),2&n){const i=e.oxw().$implicit;e.s9C("matTooltip",e.lcZ(1,2,"BTN.Statements")),e.Q6J("routerLink",e.VKq(4,Ro,i.id))}}const ko=function(n){return["/contracts/contract-list/",n]};function Bo(n,t){if(1&n&&(e.TgZ(0,"a",29),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"auto_stories"),e.qZA()()),2&n){const i=e.oxw().$implicit;e.s9C("matTooltip",e.lcZ(1,2,"BTN.ContractForTenant")),e.Q6J("routerLink",e.VKq(4,ko,i.id))}}function Ho(n,t){if(1&n&&(e.TgZ(0,"div",23)(1,"div",24),e._uU(2),e.qZA(),e.TgZ(3,"div",24),e._uU(4),e.qZA(),e.TgZ(5,"div",24),e._uU(6),e.qZA(),e.TgZ(7,"div",24),e._uU(8),e.qZA(),e.TgZ(9,"div",24),e._uU(10),e.qZA(),e.TgZ(11,"div",24),e._uU(12),e.qZA(),e.TgZ(13,"div",24)(14,"mat-icon",25),e._uU(15),e.qZA()(),e.TgZ(16,"div",24)(17,"div",26),e.YNc(18,Eo,4,6,"a",27),e.YNc(19,qo,4,3,"button",28),e.YNc(20,Po,4,6,"a",27),e.YNc(21,Bo,4,6,"a",27),e.qZA()()()),2&n){const i=t.$implicit,o=e.oxw();e.xp6(2),e.Oqu(i.CUSName),e.xp6(2),e.Oqu(i.CUSMobile),e.xp6(2),e.hij(" ",i.build_Name," "),e.xp6(2),e.hij(" ",i.unit_Name," "),e.xp6(2),e.hij(" ",i.job_Name," "),e.xp6(2),e.hij(" ",i.workplace_Name," "),e.xp6(3),e.Oqu("T"==i.CUSActive?"check_box":"check_box_outline_blank"),e.xp6(3),e.Q6J("ngIf",o.can("change_tenant")||o.can("view_onetenant")||0==o.account.periorty&&"T"!==o.account.userDataConfirmed),e.xp6(1),e.Q6J("ngIf",o.can("delete_tenant")),e.xp6(1),e.Q6J("ngIf",o.can("view_tenantstatements")),e.xp6(1),e.Q6J("ngIf",o.can("view_contractfortenant"))}}function Jo(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"mat-card",33)(3,"pagination-controls",34),e.NdJ("pageChange",function(s){e.CHM(i);const c=e.oxw();return e.KtG(c.onPageChanged(s))}),e.qZA()()()()}}function Wo(n,t){1&n&&(e.TgZ(0,"div",35),e._UZ(1,"mat-spinner",36),e.qZA())}const Ko=function(n,t){return{itemsPerPage:n,currentPage:t}};class Ve{constructor(t,i,o,s,c,C,x,U,M,F,W){this.transferService=t,this.appSettings=i,this.dialog=o,this.usersService=s,this.router=c,this.global=C,this.localStore=x,this.settingService=U,this.snackBar=M,this.translateService=F,this.userService=W,this.curTenant=new _e,this.curCOMId=O.N.comid,this.account=new ae.n,this.count=8,this.defaultCusImage=(new N.P).noImage,this.CusImageToUpload=null,this.userPerm=[],this.editTenantCodeStatus=(new w.$).getEditTenantCodeStatus(),this.editCode=!0,this.settings=this.appSettings.settings}handelCUSImgInput(t){this.CusImageToUpload=t.item(0);var i=new FileReader;i.onload=o=>{this.defaultCusImage=o.target.result},i.readAsDataURL(this.CusImageToUpload)}ngOnInit(){if(this.securityForApp=(new w.$).getSecurityType(),this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.getParamValue(this.curCOMId,this.account.periorty,this.editTenantCodeStatus),this.prepareMsgLanguage(),this.getTenants()}else this.router.navigate(["/sign-in"])}getParamValue(t,i,o){this.settingService.getValueForCode(t,i,o).subscribe(s=>{o==this.editTenantCodeStatus&&(this.editTenantCodeValue=s[0].APAValue)},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}getTenants(){this.users=null,this.curUserData.is_superuser?this.usersService.getCustomerPerSelfType(this.curCOMId,this.account.periorty,"C").subscribe(t=>this.users=t):0==this.curUserData.periorty?this.usersService.getCustomerPerUserPerSelfType(this.curCOMId,this.account.periorty,this.curUserData.id,"C").subscribe(t=>this.users=t):("N"==this.securityForApp&&(this.curBranchID=this.curUserData.branch_KeyField??0,this.usersService.getCustomersPerBranchPerSelfType(this.curCOMId,this.account.periorty,this.curBranchID,"C").subscribe(t=>this.users=t)),"D"==this.securityForApp&&this.usersService.getCustomersPerEmployeePerSelfType(this.curCOMId,this.account.periorty,this.curUserData.id,"C").subscribe(t=>this.users=t))}addTenant(t){this.usersService.addOneCustomer(t).subscribe(i=>this.getTenants())}updateTenant(t){this.usersService.editCustomer(t,this.CusImageToUpload,this.CusImageToUpload,this.curUserData.is_employee).subscribe(i=>this.getTenants())}deleteTenant(t){this.dialog.open(ne.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(o=>{o&&this.usersService.deleteCustomer(t.id).subscribe(s=>this.getTenants())})}removeTenant(t,i){this.dialog.open(ne.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(s=>{s&&this.usersService.deleteCustomer(t).subscribe(c=>{this.userService.deleteOneUser(i).subscribe(C=>{}),this.getTenants()})})}onPageChanged(t){this.page=t,this.getTenants(),window.scrollTo(0,0)}gotoTenantDisplay(t){console.log("===**gotoTenantDisplay**=== "+t),this.router.navigate(["/contracts/tenant-add/"+t])}gotoNewTenantFullData(){this.transferService.setMessage({editTenantCode:this.editTenantCodeValue}),this.router.navigate(["/contracts/businesstenant-add/"])}gotoNewTenant(){this.dialog.open(ge,{data:{periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(i=>{console.log("=====result.event:: "+i.event),"Cancel"==i.event||"Post"==i.event&&this.userService.registerTenant_with_lastName(i.data).subscribe(o=>{console.log("TenantID:: "+o.id),this.getTenants(),this.snackBar.open(this.registeredMsg,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.can("view_onetenant")&&this.gotoTenantDisplay(o.id)},o=>{console.log("error",o),this.snackBar.open(this.notRegisteredMsg,"\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})})}openTenantDialog(t){this.dialog.open(ge,{data:t}).afterClosed().subscribe(o=>{o?(console.log("=====if user True:: =============="),console.log(o),this.curTenant=new _e,console.log(this.curTenant),this.fromUserToCustomer(o),console.log(this.curTenant),o.id?this.updateTenant(this.curTenant):this.addTenant(this.curTenant)):console.log("=====if user False:: ==============")})}fromUserToCustomer(t){this.curTenant.id=t.id,this.curTenant.RowDelete=t.settings.isDeleted?1:0,this.curTenant.CUSCode=t.code,this.curTenant.CUSPic=t.image,this.curTenant.CUSGender=t.profile.gender,console.log("====Date===="),console.log(t.profile.birthday),this.curTenant.CUSBirthDate=t.profile.birthday,this.curTenant.CUSMobile=t.mobile,this.curTenant.CUSEmail=t.contacts.email,this.curTenant.CUSActive=t.settings.isActive?"T":"F",this.curTenant.CUSAddress=t.contacts.address,this.curTenant.Country_CTTKeyField=t.contacts.country,this.curTenant.CUSusername=t.username,this.curTenant.CUSFirstName=t.firstname,this.curTenant.CUSLastName=t.lastname}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(t=>{this.deletedTitleMsg=t}),this.translateService.get("MESSAGE.REGISTERD").subscribe(t=>{this.registeredMsg=t}),this.translateService.get("MESSAGE.NOTREGISTERD").subscribe(t=>{this.notRegisteredMsg=t})}}function Vo(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.ADD")))}function Yo(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function Go(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Code is required"),e.qZA())}function Qo(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Code isn't long enough, minimum of 4 characters"),e.qZA())}function jo(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Password is required"),e.qZA())}function $o(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Password isn't long enough, minimum of 6 characters"),e.qZA())}function zo(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"mat-form-field",117)(1,"mat-label")(2,"mat-icon"),e._uU(3,"vpn_key"),e.qZA(),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",118),e.TgZ(7,"mat-icon",119),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.passwordHide=!s.passwordHide)}),e._uU(8),e.qZA(),e.YNc(9,jo,2,0,"mat-error",1),e.YNc(10,$o,2,0,"mat-error",1),e.qZA()}if(2&n){const i=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,5,"HTML.PASSWORD"),""),e.xp6(2),e.Q6J("type",i.passwordHide?"password":"text"),e.xp6(2),e.Oqu(i.passwordHide?"visibility":"visibility_off"),e.xp6(1),e.Q6J("ngIf",null==i.form.controls.password.errors?null:i.form.controls.password.errors.required),e.xp6(1),e.Q6J("ngIf",i.form.controls.password.hasError("minlength"))}}function Xo(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"First name is required"),e.qZA())}function ea(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Last name is required"),e.qZA())}function ta(n,t){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Mobile is required"),e.qZA())}function ia(n,t){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Oqu(i.fileType)}}function na(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.BRAArbName," ")}}function oa(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.BUIName," ")}}function aa(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.UNTUnitNumber," ")}}function ra(n,t){1&n&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"HTML.ElectricityCounterNumber")," "))}function sa(n,t){1&n&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"HTML.WaterCounterNumber")," "))}function la(n,t){1&n&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"HTML.GasCounterNumber")," "))}function ca(n,t){if(1&n&&(e.TgZ(0,"ng-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName,"")}}function ua(n,t){if(1&n&&(e.TgZ(0,"ng-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName,"")}}function da(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function ma(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function pa(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function ha(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function ga(n,t){if(1&n&&(e.TgZ(0,"div")(1,"a",120)(2,"mat-icon"),e._uU(3,"download"),e.qZA()()()),2&n){const i=e.oxw();e.xp6(1),e.s9C("href",i.natIDfileToUpload,e.LSH)}}function _a(n,t){if(1&n&&(e.ynx(0),e._UZ(1,"img",123),e.BQk()),2&n){const i=e.oxw(2);e.xp6(1),e.Q6J("src",i.fileUrl,e.LSH)}}function fa(n,t){if(1&n&&e._UZ(0,"iframe",124),2&n){const i=e.oxw(2);e.Q6J("src",i.sanitizedUrl,e.uOi)}}function Ca(n,t){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,_a,2,1,"ng-container",121),e.YNc(2,fa,1,1,"ng-template",null,122,e.W1O),e.qZA()),2&n){const i=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.isImage)("ngIfElse",i)}}function Ta(n,t){if(1&n&&(e.TgZ(0,"ng-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName,"")}}function ba(n,t){if(1&n&&(e.TgZ(0,"div")(1,"a",125)(2,"mat-icon"),e._uU(3,"download"),e.qZA()()()),2&n){const i=e.oxw();e.xp6(1),e.s9C("href",i.registerFileToUpload,e.LSH)}}function va(n,t){if(1&n&&(e.ynx(0),e._UZ(1,"img",123),e.BQk()),2&n){const i=e.oxw(2);e.xp6(1),e.Q6J("src",i.registerFileUrl,e.LSH)}}function Za(n,t){if(1&n&&e._UZ(0,"iframe",124),2&n){const i=e.oxw(2);e.Q6J("src",i.sanitizedFileUrl,e.uOi)}}function Aa(n,t){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,va,2,1,"ng-container",121),e.YNc(2,Za,1,1,"ng-template",null,126,e.W1O),e.qZA()),2&n){const i=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.isRegisterImage)("ngIfElse",i)}}function xa(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function ya(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function Ua(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function wa(n,t){if(1&n&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&n){const i=t.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CTTSubjectName," ")}}function Sa(n,t){1&n&&(e.TgZ(0,"mat-tab",127),e.ALo(1,"translate"),e.TgZ(2,"div",6),e._UZ(3,"mat-label"),e.TgZ(4,"div",5)(5,"mat-checkbox",128),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"mat-checkbox",129),e._uU(9),e.ALo(10,"translate"),e.qZA()()()()),2&n&&(e.s9C("label",e.lcZ(1,3,"HTML.TAB_SETTINGS")),e.xp6(6),e.Oqu(e.lcZ(7,5,"HTML.ACTIVE")),e.xp6(3),e.Oqu(e.lcZ(10,7,"HTML.BLOCKED")))}function Oa(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.SAVE")))}function Na(n,t){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function Ia(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",130),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.saveUpdate(s.CUS.id))}),e.YNc(1,Oa,3,3,"span",1),e.YNc(2,Na,3,3,"span",1),e.qZA()}if(2&n){const i=e.oxw();e.Q6J("mat-dialog-close",i.form.value)("disabled",!i.form.valid),e.xp6(1),e.Q6J("ngIf",!i.CUS.id),e.xp6(1),e.Q6J("ngIf",i.CUS.id)}}function Da(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",131),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.customerRelated(s.CUS.id))}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const i=e.oxw();e.Q6J("disabled",!i.form.valid||!i.CUS.id),e.xp6(2),e.Oqu(e.lcZ(3,2,"BTN.Accompany"))}}function Fa(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",131),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.customerWorkRelated(s.CUS.id))}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const i=e.oxw();e.Q6J("disabled",!i.form.valid||!i.CUS.id),e.xp6(2),e.Oqu(e.lcZ(3,2,"BTN.WorkRelated"))}}function La(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",131),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.customerWorkRelatedAgency(s.CUS.id))}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const i=e.oxw();e.Q6J("disabled",!i.form.valid||!i.CUS.id),e.xp6(2),e.Oqu(e.lcZ(3,2,"BTN.Agency"))}}function Ma(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",131),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.changePassword(s.CUS))}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const i=e.oxw();e.Q6J("disabled",!i.form.valid||!i.CUS.id),e.xp6(2),e.Oqu(e.lcZ(3,2,"BTN.PasswordChange"))}}function Ea(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",131),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.confirmData(s.CUS.id))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&n){const i=e.oxw();e.Q6J("disabled",!i.form.valid||!i.CUS.id),e.xp6(1),e.Oqu(e.lcZ(2,2,"BTN.SUBMIT"))}}Ve.\u0275fac=function(t){return new(t||Ve)(e.Y36(ue.y),e.Y36(re.d),e.Y36(Z.uw),e.Y36(L.v),e.Y36(k.F0),e.Y36(j.U),e.Y36(p.C),e.Y36(de.g),e.Y36(I.ux),e.Y36(y.sK),e.Y36(Ee.K))},Ve.\u0275cmp=e.Xpm({type:Ve,selectors:[["app-customers-list-companies"]],features:[e._Bn([L.v])],decls:44,vars:37,consts:[[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click",4,"ngIf"],["value","search"],[1,"user-search"],[1,"user-search-input"],["matInput","","name","search","autocomplete","off",3,"placeholder","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["value","add",3,"click"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"text-muted"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip",4,"ngIf"],["mat-mini-fab","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(t,i){1&t&&(e.YNc(0,Lo,22,7,"div",0),e._UZ(1,"mat-divider"),e.TgZ(2,"mat-card")(3,"div",1)(4,"h2"),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e._UZ(7,"mat-divider"),e.TgZ(8,"div",2)(9,"div",3)(10,"div",4)(11,"h2"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",4)(15,"h2"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",4)(19,"h2"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",4)(23,"h2"),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",4)(27,"h2"),e._uU(28),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",4)(31,"h2"),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",4)(35,"h2"),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e._UZ(38,"div",4),e.qZA(),e.YNc(39,Ho,22,11,"div",5),e.ALo(40,"paginate"),e.ALo(41,"TenantSearchPipe"),e.qZA()(),e.YNc(42,Jo,4,0,"div",6),e.YNc(43,Wo,2,0,"div",7)),2&t&&(e.Q6J("ngIf",i.account.periorty>0),e.xp6(5),e.hij("",e.lcZ(6,12,"HTML.TENANTS_LIST")," "),e.xp6(7),e.hij(" ",e.lcZ(13,14,"FIELD.NAME")," "),e.xp6(4),e.hij(" ",e.lcZ(17,16,"HTML.MOBILE")," "),e.xp6(4),e.hij(" ",e.lcZ(21,18,"HTML.BUILDING")," "),e.xp6(4),e.hij(" ",e.lcZ(25,20,"HTML.UNIT")," "),e.xp6(4),e.hij(" ",e.lcZ(29,22,"HTML.Job")," "),e.xp6(4),e.hij(" ",e.lcZ(33,24,"HTML.WorkPlace")," "),e.xp6(4),e.hij(" ",e.lcZ(37,26,"HTML.ACTIVATED")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(40,28,e.xi3(41,31,i.users,i.searchText),e.WLB(34,Ko,i.count,i.page))),e.xp6(3),e.Q6J("ngIf",i.users),e.xp6(1),e.Q6J("ngIf",!i.users))},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.On,m.F,X.LS,_.sg,_.O5,k.rH,T.xw,T.Wh,T.yH,b.Tq,b.nh,me.A9,me.Yi,V.a8,Q.Hw,A.Nt,v.KE,ee.d,we.Ou,pe.gM,X._s,Se.DA,y.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});class Le{constructor(t,i,o,s,c,C,x,U,M,F,W,te,oe,be,ce,Ye,ft){this.transferService=t,this.appSettings=i,this.activatedRoute=o,this.codesService=s,this.unitsService=c,this.fb=C,this.localStore=x,this._CustomerService=U,this.router=M,this.dialog=F,this.global=W,this.atlasService=te,this.settingService=oe,this.translateService=be,this.contractService=ce,this.sanitizer=Ye,this.snackBar=ft,this.curCOMId=O.N.comid,this.account=new ae.n,this.country_const=(new w.I).Countries,this.governorate_const=(new w.I).Governorates,this.city_const=(new w.I).City,this.region_const=(new w.I).Regions,this.notificationType_const=(new w.I).NotificationTypes,this.job_const=(new w.I).Jobs,this.workplace_const=(new w.I).WorkPlaces,this.workField_const=(new w.I).WorkType,this.passwordHide=!0,this.tenant=new _e,this.editCode=!0,this.selectedOption="C",this.userPerm=[],this.brandfileToUpload=null,this.natIDfileToUpload=null,this.registerFileToUpload=null,this.DocImageToUpload=null,this.defaultDocImage=(new N.P).noImage,this.defaultCusImage=(new N.P).noImage,this.CusImageToUpload=null,this.defaultIDImage=(new N.P).noImage,this.IDImageToUpload=null,this.fileType=null,this.idFileType=null,this.registerFileType=null,this.fileUrl=null,this.registerFileUrl=null,this.isImage=!1,this.isRegisterImage=!1,this.AllBranches=[],this.notificationsObject=new Tt.j,this.allowedChar="1234567890",this.lengthOfCode=6,this.Jobs=[],this.WorkPlaces=[],this.WorkFields=[],this.Countries=[],this.Governorates=[],this.Governorates_EstOwner=[],this.Cities_EstOwner=[],this.Cities=[],this.Areas_EstOwner=[],this.Areas=[],this.AllBuildings=[],this.AllUnits=[],this.settings=this.appSettings.settings}onBusinessOptionChange(t){this.selectedOption=t.value,console.log("------this.selectedOption:: "+this.selectedOption)}handleFileInputBrand(t){t&&t.length&&(this.brandfileToUpload=t.item(0)),document.getElementById("customButtonBrand").textContent=t.length>0?t[0].name:this.chooseFilePDFBrand}handleFileInputNatID(t){t&&t.length&&(this.natIDfileToUpload=t.item(0)),document.getElementById("customButtonNatId").textContent=t.length>0?t[0].name:this.chooseFilePDFNatID}callFileInputBrand(){document.getElementById("brandFileInput").click()}callFileInputNatId(){document.getElementById("natIDFileInput").click()}callFileInput(){document.getElementById("fileInput").click()}callOnRegisterFileSelect(){document.getElementById("registerFileInput").click()}callOnHowiaFileSelect(){document.getElementById("howiaFileInput").click()}callIDFileInput(){document.getElementById("idFileInput").click()}ngOnInit(){if(this.isImage=!1,this.isRegisterImage=!1,this.transferService.getMessage.subscribe(t=>{this.editCode="YES"==t.editTenantCode.toUpperCase(),console.log("---2222 this.editCode:: "+this.editCode)}),this.userSUb=this.global.user.subscribe(t=>{this.account=t}),this.localStore.getItem("token")&&this.localStore.getItem("account")){this.curUserData=JSON.parse(this.localStore.getItem("account")),this.curUserPermissions=JSON.parse(this.localStore.getItem("permissions"));for(let t=0;t<this.curUserPermissions.length;t++)this.userPerm[t]=this.curUserPermissions[t].codename;this.prepareMsgLanguage(),this.getMaxCodeForCustomers(this.curCOMId,this.account.periorty),this.getCountries(this.curCOMId,this.account.periorty),this.getJobs(this.curCOMId,this.account.periorty),this.getWorkPlaces(this.curCOMId,this.account.periorty),this.getWorkFields(this.curCOMId,this.account.periorty),this.getNotificationRows(this.curCOMId,this.account.periorty,1),this.sub=this.activatedRoute.params.subscribe(t=>{t.id?(this.id=+t.id,this.getTenantById(this.id)):this.CUS=new _e;var i=JSON.parse(this.localStore.getItem("account"));this.isEmployee="T"==i.is_employee,this.isAdmin=i.is_superuser,this.isOwner="T"==i.is_owner,console.log("---1111 this.editCode:: "+this.editCode),this.form=this.fb.group({id:null,code:{value:null,disabled:!this.editCode},username:{value:null,disabled:this.id},password:null,firstname:[null,m.kI.required],lastname:[null,m.kI.required],image:null,CUSBrandPdf:null,CUSIdPdf:null,mobile:null,selftype:"C",CUSEInvoiceType:"G",profile:this.fb.group({birthday:[null,m.kI.required],gender:"M",current_branch:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curbuilding:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee},curunit:{value:null,disabled:!i.is_superuser&&"T"!=i.is_employee}}),work:this.fb.group({company:[null,m.kI.required],position:null,nationalIDType:"N",nationalID:[null,m.kI.required],nationalIDStartDate:null,nationalIDEndDate:null,nationalIDPic:null,WorkPlace_CTTKeyField:null,Job_CTTKeyField:null,CUSAddress_EstOwner:null,CUSShortAddress_EstOwner:null,CUSStreetName_EstOwner:null,CUSBuildingNumber_EstOwner:null,CUSBuildingSubNumber_EstOwner:null,CUSZibCode_EstOwner:null,Country_CTTKeyField_EstOwner:null,Governorate_CTTKeyField_EstOwner:null,City_CTTKeyField_EstOwner:null,Area_CTTKeyField_EstOwner:null}),business:this.fb.group({CUSEstablishmentName:null,CUSUnifiedNumber:null,CUSCoRegisterOwnerName:null,CUSCoRegisterManagerName:null,CUSCoRegisterPdf:null,CUSBrandName:null,workField_CTTKeyField:null,CUSEstablishAddressPdf:null,CUSEstablishAddressPic:null,CUSNots:null,CUSTaxNumber:null,CUSCommercialRegister:null,CUSFamousName:null}),contacts:this.fb.group({email:["",m.kI.compose([m.kI.required,R.Le])],homephone:null,workphone:null,address:null,CUSStreetName:null,CUSBuildingNumber:null,CUSZibCode:null,CUSShortAddress:null,CUSBuildingSubNumber:null,country:null,governorate:null,city:null,area:null}),social:this.fb.group({facebook:null,twitter:null,google:null}),settings:this.fb.group({isActive:null,isDeleted:null}),docs:this.fb.group({docOnePic:null,docPic:null})}),this.curUserData.is_superuser?this.getAllBranches(this.curCOMId,this.account.periorty):"T"==this.curUserData.is_employee&&this.getEmpBranches(this.curCOMId,this.account.periorty,this.curUserData.id,this.curUserData.branch_KeyField??0)})}else this.router.navigate(["/sign-in"])}can(t){return!(!this.curUserData.is_superuser&&!this.userPerm.includes(t))}onFileChange(t){this.DocImageToUpload=t.item(0);var i=new FileReader;i.onload=o=>{this.defaultDocImage=o.target.result},i.readAsDataURL(this.DocImageToUpload)}onFileRemove(t){console.log("====On Remove:: "+t)}getFileType(t){const i=t.type;return"application/pdf"===i?"PDF":i.startsWith("image/")?"IMAGE":"NOT"}onEnter(t){t.preventDefault()}handelCUSImgInput(t){if(t&&t.length){switch(this.getFileType(t.item(0))){case"IMAGE":this.fileType=this.imageFileSelected;break;case"PDF":this.fileType=this.pdfFileSelected;break;case"NOT":this.fileType=this.otherFileSelected}if(this.fileType==this.imageFileSelected){console.log("--------Here when image-------------"),this.CusImageToUpload=t.item(0);var i=new FileReader;i.onload=C=>{this.defaultCusImage=C.target.result},i.readAsDataURL(this.CusImageToUpload),document.getElementById("customButton").textContent=t.length>0?t[0].name:this.chooseFile}}}onRegisterFileSelected(t,i){if(t&&t.length){switch(this.getFileType(t.item(0))){case"IMAGE":this.isRegisterImage=!0,this.registerFileType=this.imageFileSelected;break;case"PDF":this.isRegisterImage=!1,this.registerFileType=this.pdfFileSelected;break;case"NOT":this.isRegisterImage=!1,this.registerFileType=this.otherFileSelected}const c=new FileReader;c.onload=U=>{this.registerFileUrl=c.result,this.sanitizedFileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(U.target.result)},c.readAsDataURL(t.item(0)),this.registerFileToUpload=t.item(0),document.getElementById("registerCustomButton").textContent=t.length>0?t[0].name:this.chooseRegisterFilePDF}}onFileSelected(t,i){if(t&&t.length){switch(this.getFileType(t.item(0))){case"IMAGE":this.isImage=!0,this.idFileType=this.imageFileSelected;break;case"PDF":this.isImage=!1,this.idFileType=this.pdfFileSelected;break;case"NOT":this.isImage=!1,this.idFileType=this.otherFileSelected}const c=new FileReader;c.onload=C=>{this.fileUrl=c.result,this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(C.target.result)},c.readAsDataURL(t.item(0)),this.natIDfileToUpload=t.item(0)}}handelIDImgInput(t){this.IDImageToUpload=t.item(0);var i=new FileReader;i.onload=c=>{this.defaultIDImage=c.target.result,console.log("=====after====="+this.defaultIDImage)},i.readAsDataURL(this.IDImageToUpload),document.getElementById("idCustomButton").textContent=t.length>0?t[0].name:this.chooseFile}mapFormvalue_to_CustomerClass(t){this.form.enable(),this.cur_branch=this.form.value.profile.current_branch,this.cur_building=this.form.value.profile.curbuilding,this.cur_unit=this.form.value.profile.curunit,this.form.disable();const i=new _.uU("en-GB").transform(this.form.value.profile.birthday,"dd/MM/yyyy"),o=new _.uU("en-GB").transform(this.form.value.work.nationalIDStartDate,"dd/MM/yyyy"),s=new _.uU("en-GB").transform(this.form.value.work.nationalIDEndDate,"dd/MM/yyyy");this.tenActive=this.form.value.settings.isActive?"T":"F",this.tenDeleted=this.form.value.settings.isDeleted?1:0,null!=this.form.value.profile.birthday&&(this.CUS.CUSBirthDate=i),null!=this.form.value.work.nationalIDStartDate&&(this.CUS.CUSNationalIDStartDate=o),null!=this.form.value.work.nationalIDEndDate&&(this.CUS.CUSNationalIDEndDate=s),this.CUS.CUSCode=+this.form.value.code,this.CUS.CUSFirstName=this.form.value.firstname,this.CUS.CUSLastName=this.form.value.lastname,this.CUS.CUSusername=this.form.value.username,this.CUS.CUSpassword=this.form.value.password,"POST"==t&&(this.CUS.is_create_CustomUser_table="T"),this.CUS.CUSGender=this.form.value.profile.gender,this.CUS.current_branch=this.cur_branch,this.CUS.current_building=this.cur_building,this.CUS.current_unit=this.cur_unit,this.CUS.CUSSelfType=this.form.value.selftype,this.CUS.CUSEInvoiceType=this.form.value.CUSEInvoiceType,this.CUS.CUSPic=this.form.value.image,this.CUS.CUSIDPic=this.form.value.work.nationalIDPic,this.CUS.CUSGuarantor=this.form.value.work.company,this.CUS.CUSJobName=this.form.value.work.position??"",this.CUS.CUSNationalIDType=this.form.value.work.nationalIDType,this.CUS.CUSNationalID=this.form.value.work.nationalID,this.CUS.WorkPlace_CTTKeyField=this.form.value.work.WorkPlace_CTTKeyField,this.CUS.Job_CTTKeyField=this.form.value.work.Job_CTTKeyField,this.CUS.CUSAddress_EstOwner=this.form.value.work.CUSAddress_EstOwner??"",this.CUS.CUSShortAddress_EstOwner=this.form.value.work.CUSShortAddress_EstOwner??"",this.CUS.CUSStreetName_EstOwner=this.form.value.work.CUSStreetName_EstOwner??"",this.CUS.CUSBuildingNumber_EstOwner=this.form.value.work.CUSBuildingNumber_EstOwner??"",this.CUS.CUSBuildingSubNumber_EstOwner=this.form.value.work.CUSBuildingSubNumber_EstOwner??"",this.CUS.CUSZibCode_EstOwner=this.form.value.work.CUSZibCode_EstOwner??"",this.CUS.Country_CTTKeyField_EstOwner=this.form.value.work.Country_CTTKeyField_EstOwner,this.CUS.Governorate_CTTKeyField_EstOwner=this.form.value.work.Governorate_CTTKeyField_EstOwner,this.CUS.City_CTTKeyField_EstOwner=this.form.value.work.City_CTTKeyField_EstOwner,this.CUS.Area_CTTKeyField_EstOwner=this.form.value.work.Area_CTTKeyField_EstOwner,this.CUS.CUSEstablishmentName=this.form.value.business.CUSEstablishmentName,this.CUS.CUSUnifiedNumber=this.form.value.business.CUSUnifiedNumber,this.CUS.CUSCoRegisterOwnerName=this.form.value.business.CUSCoRegisterOwnerName,this.CUS.CUSCoRegisterManagerName=this.form.value.business.CUSCoRegisterManagerName,this.CUS.CUSCoRegisterPdf=this.form.value.business.CUSCoRegisterPdf,this.CUS.CUSBrandName=this.form.value.business.CUSBrandName,this.CUS.workField_CTTKeyField=this.form.value.business.workField_CTTKeyField,this.CUS.CUSNots=this.form.value.business.CUSNots,this.CUS.CUSTaxNumber=this.form.value.business.CUSTaxNumber??"",this.CUS.CUSCommercialRegister=this.form.value.business.CUSCommercialRegister??"",this.CUS.CUSFamousName=this.form.value.business.CUSFamousName??"",this.CUS.CUSMobile=this.form.value.mobile,this.CUS.CUSEmail=this.form.value.contacts.email,this.CUS.CUSHomePhone=this.form.value.contacts.homephone,this.CUS.CUSWorkPhone=this.form.value.contacts.workphone,this.CUS.CUSAddress=this.form.value.contacts.address??"",this.CUS.CUSStreetName=this.form.value.contacts.CUSStreetName??"",this.CUS.CUSBuildingNumber=this.form.value.contacts.CUSBuildingNumber??"",this.CUS.CUSZibCode=this.form.value.contacts.CUSZibCode??"",this.CUS.CUSShortAddress=this.form.value.contacts.CUSShortAddress??"",this.CUS.CUSBuildingSubNumber=this.form.value.contacts.CUSBuildingSubNumber??"",this.CUS.Country_CTTKeyField=this.form.value.contacts.country,this.CUS.Governorate_CTTKeyField=this.form.value.contacts.governorate,this.CUS.City_CTTKeyField=this.form.value.contacts.city,this.CUS.Area_CTTKeyField=this.form.value.contacts.area,this.CUS.CUSFacebook=this.form.value.social.facebook??"",this.CUS.CUSTwitter=this.form.value.social.twitter??"",this.CUS.CUSGoogle=this.form.value.social.google??"",this.CUS.CUSActive=this.tenActive,this.CUS.RowDelete=this.tenDeleted}getTenantById(t){const i=[];this._CustomerService.getOneCustomer(t).subscribe(o=>{this._CustomerService.getOneCustomerDocs(this.curCOMId,this.account.periorty,t).subscribe(s=>{for(var c of s)i.push({link:c.CUDPic,preview:c.CUDPic})}),this.fillForm(o,i),this.CUS=o,o.Country_CTTKeyField&&this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,o.Country_CTTKeyField),o.Country_CTTKeyField_EstOwner&&this.getGovernoratePerCountry_EstOwner(this.curCOMId,this.account.periorty,o.Country_CTTKeyField_EstOwner),o.Governorate_CTTKeyField&&this.getCityPerGoverno(this.curCOMId,this.account.periorty,o.Governorate_CTTKeyField),o.Governorate_CTTKeyField_EstOwner&&this.getCityPerGoverno_EstOwner(this.curCOMId,this.account.periorty,o.Governorate_CTTKeyField_EstOwner),o.City_CTTKeyField&&this.getAreaPerCity(this.curCOMId,this.account.periorty,o.City_CTTKeyField),o.City_CTTKeyField_EstOwner&&this.getAreaPerCity_EstOwner(this.curCOMId,this.account.periorty,o.City_CTTKeyField_EstOwner)})}getFileTypeFromPath(t){console.log("--------start of getFileTypeFromPath----------"),console.log("-----filePath1111:: "+t);const i=t.split(".").pop()?.toLowerCase();switch(console.log("-----filePath2222:: "+t),console.log("--------extension:: "+i),i.substring(0,3)){case"jpg":case"jpe":case"png":case"gif":return"Image";case"pdf":return"PDF";case"doc":return"Word Document";case"xls":return"Excel Document";default:return"Unknown File Type"}}fillForm(t,i){var o,s;console.log("----inside Fill Form---111111--"),this.is_active="T"==t.CUSActive,t.current_building&&this.getAllUnits(this.curCOMId,this.account.periorty,t.current_building),this.defaultCusImage=null!=t.CUSPic?t.CUSPic:(new N.P).noImage,this.defaultIDImage=null!=t.CUSIDPic?t.CUSIDPic:(new N.P).noImage,this.is_delete=1==t.RowDelete,console.log("----inside Fill Form---222222--"),this.brandfileToUpload=t.CUSBrandPdf,this.natIDfileToUpload=t.CUSIdPdf,this.registerFileToUpload=t.CUSCoRegisterPdf,this.natIDfileToUpload&&("Image"==(o=this.getFileTypeFromPath(this.natIDfileToUpload.toString()))?(console.log("Selected file is an image."),this.isImage=!0,this.fileUrl=this.natIDfileToUpload.toString(),console.log("-----this.fileUrl:: "+this.fileUrl)):"PDF"==o?(console.log("Selected file is a PDF."),this.isImage=!1,this.sanitizedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.natIDfileToUpload.name),console.log("------this.sanitizedUrl.:: "+this.sanitizedUrl)):console.log("Selected file is of another type:",o)),this.registerFileToUpload&&("Image"==(s=this.getFileTypeFromPath(this.registerFileToUpload.toString()))?(console.log("Selected file is an image."),this.isRegisterImage=!0,this.registerFileUrl=this.registerFileToUpload.toString(),console.log("-----this.registerFileUrl:: "+this.registerFileUrl)):"PDF"==s?(console.log("Selected file is a PDF."),this.isRegisterImage=!1,this.sanitizedFileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.registerFileToUpload.name),console.log("------this.sanitizedFileUrl.:: "+this.sanitizedFileUrl)):console.log("Selected file is of another type:",s)),console.log("----inside Fill Form---333333--"),this.form.patchValue({id:t.id,code:t.CUSCode,username:t.CUSusername,password:t.CUSpassword,firstname:t.CUSFirstName,lastname:t.CUSLastName,image:t.CUSPic,CUSBrandPdf:t.CUSBrandPdf,CUSIdPdf:t.CUSIdPdf,selftype:t.CUSSelfType,CUSEInvoiceType:t.CUSEInvoiceType,mobile:t.CUSMobile,profile:{birthday:t.CUSBirthDate,gender:t.CUSGender,current_branch:t.current_branch,curbuilding:t.current_building,curunit:t.current_unit},work:{company:t.CUSGuarantor,position:t.CUSJobName,nationalIDType:t.CUSNationalIDType,nationalID:t.CUSNationalID,nationalIDStartDate:t.CUSNationalIDStartDate,nationalIDEndDate:t.CUSNationalIDEndDate,nationalIDPic:t.CUSIDPic,WorkPlace_CTTKeyField:t.WorkPlace_CTTKeyField,Job_CTTKeyField:t.Job_CTTKeyField,CUSAddress_EstOwner:t.CUSAddress_EstOwner,CUSShortAddress_EstOwner:t.CUSShortAddress_EstOwner,CUSStreetName_EstOwner:t.CUSStreetName_EstOwner,CUSBuildingNumber_EstOwner:t.CUSBuildingNumber_EstOwner,CUSBuildingSubNumber_EstOwner:t.CUSBuildingSubNumber_EstOwner,CUSZibCode_EstOwner:t.CUSZibCode_EstOwner,Country_CTTKeyField_EstOwner:t.Country_CTTKeyField_EstOwner,Governorate_CTTKeyField_EstOwner:t.Governorate_CTTKeyField_EstOwner,City_CTTKeyField_EstOwner:t.City_CTTKeyField_EstOwner,Area_CTTKeyField_EstOwner:t.Area_CTTKeyField_EstOwner},business:{CUSEstablishmentName:t.CUSEstablishmentName,CUSUnifiedNumber:t.CUSUnifiedNumber,CUSCoRegisterOwnerName:t.CUSCoRegisterOwnerName,CUSCoRegisterManagerName:t.CUSCoRegisterManagerName,CUSBrandName:t.CUSBrandName,workField_CTTKeyField:t.workField_CTTKeyField,CUSEstablishAddressPdf:t.CUSEstablishAddressPdf,CUSEstablishAddressPic:t.CUSEstablishAddressPic,CUSNots:t.CUSNots,CUSTaxNumber:t.CUSTaxNumber,CUSCommercialRegister:t.CUSCommercialRegister,CUSFamousName:t.CUSFamousName},contacts:{email:t.CUSEmail,homephone:t.CUSHomePhone,workphone:t.CUSWorkPhone,address:t.CUSAddress,country:t.Country_CTTKeyField,governorate:t.Governorate_CTTKeyField,city:t.City_CTTKeyField,area:t.Area_CTTKeyField,CUSStreetName:t.CUSStreetName,CUSBuildingNumber:t.CUSBuildingNumber,CUSZibCode:t.CUSZibCode,CUSShortAddress:t.CUSShortAddress,CUSBuildingSubNumber:t.CUSBuildingSubNumber},social:{facebook:t.CUSFacebook,twitter:t.CUSTwitter,google:t.CUSGoogle},settings:{isActive:this.is_active,isDeleted:this.is_delete},docs:{docPic:i}}),console.log("----inside Fill Form---4444444--"),t.current_unit&&this.getUnitFullData(t.current_unit),console.log("----inside Fill Form---55555555--")}getAllBranches(t,i){this.atlasService.getAllBranch(t,i).subscribe(o=>{this.AllBranches=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getEmpBranches(t,i,o,s){console.log("----is Emp"),this.atlasService.getBranchPerEmp(t,i,o).subscribe(c=>{this.AllBranches=c,this.AllBranches.length>0||(console.log("----Length <= 0"),console.log("curBra:: "+s),this.atlasService.getOneBranch(s).subscribe(C=>{this.AllBranches=C},C=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0641\u0631\u0639 \u0627\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))},c=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0641\u0631\u0648\u0639 \u0644\u0644\u0645\u0648\u0638\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getNotificationRows(t,i,o){this.codesService.getSubForParentAndArrange(t,i,this.notificationType_const,o).subscribe(s=>{1==o&&(this.cttNotificationType_TenantData=s[0].id),2==o&&(this.cttNotificationType_EndContract=s[0].id)},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0646\u0648\u0639 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}mapvaluesToNotificationClass(){this.notificationsObject.notificationType_CTTKeyField=this.cttNotificationType_TenantData,this.notificationsObject.UNOActive="T",this.notificationsObject.UNONotificationFromTenant="T",this.notificationsObject.branch_KeyField=this.cur_branch,this.notificationsObject.UNOTitle="\u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0623\u062c\u0631",this.notificationsObject.build_KeyField=this.cur_building,this.notificationsObject.unit_KeyField=this.cur_unit,this.notificationsObject.customer_KeyField=this.form.value.id,this.notificationsObject.UNOText="\u0628\u0631\u062c\u0627\u0621 \u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0623\u062c\u0631 "+this.form.value.firstname+" "+this.form.value.lastname}readCusCode(t){let o=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({contacts:{email:"E"+o+"@jeddahlake.com"},username:o,password:o})}pad(t,i){let o=t+"";for(;o.length<i;)o="0"+o;return o}createRandomString(t,i){let o="";for(let s=0;s<t;s++)o+=i.charAt(Math.floor(Math.random()*i.length));return o}generateUserName(t,i){return this.pad(t,4)+i}confirmData(t){this._CustomerService.editCustomerConfirm({CUSConfirmed:"T",id:t}).subscribe(o=>{this.snackBar.open("\u062a\u0645 \u0625\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/businesstenant-list"])},o=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0639\u062a\u0645\u0627\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}customerRelated(t){console.log("========Sayed2982024=====customerRelated()==============="),this.dialog.open(Ie,{data:{custId:t,periorty:this.account.periorty},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(o=>{})}customerWorkRelated(t){console.log("========Sayed2982024=====customerWorkRelated()==============="),this.dialog.open(xe,{data:{custId:t,periorty:this.account.periorty,personType:"P"},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(o=>{})}customerWorkRelatedAgency(t){console.log("========Sayed2982024=====customerWorkRelated()==============="),this.dialog.open(xe,{data:{custId:t,periorty:this.account.periorty,personType:"W"},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(o=>{})}changePassword(t){this.dialog.open(ht.p,{data:{dataRow:t,curUserData:this.curUserData,userPerm:this.userPerm,pk:t.Userid},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(o=>{})}saveUpdate(t){console.log("=============saveUpdate()==============="),t?(this.mapFormvalue_to_CustomerClass("PATCH"),console.log("=============Update data()==============="),this._CustomerService.editCustomerBusinessWithPDF(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.curUserData.is_employee,this.brandfileToUpload,this.natIDfileToUpload,this.registerFileToUpload).subscribe(i=>{console.log("res=> "+i),"F"==this.curUserData.is_employee&&(this.mapvaluesToNotificationClass(),this.unitsService.addNotificationForUnits(this.notificationsObject).subscribe(o=>{},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u062a\u0646\u0628\u064a\u0647","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})),null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(this.CUS.id,this.DocImageToUpload).subscribe(o=>{console.log("====yes from update====",o)}),this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/businesstenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})):(this.mapFormvalue_to_CustomerClass("POST"),console.log(this.CUS),this._CustomerService.addCustomerBusinessWithPDF(this.CUS,this.CusImageToUpload,this.IDImageToUpload,this.brandfileToUpload,this.natIDfileToUpload,this.registerFileToUpload).subscribe(i=>{null!=this.DocImageToUpload&&this._CustomerService.addCustomerDocs(i.id,this.DocImageToUpload).subscribe(o=>{console.log("====yes from insert====",o)}),this.contractService.addCustomUserFromTenant(i,this.CusImageToUpload).subscribe(o=>{this.contractService.updateCustomerWithUserID(i.id,o.id).subscribe(s=>{},s=>{console.log("ERROR::--\x3e ",s)})}),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["contracts/businesstenant-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0639\u0645\u064a\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}))}close(){}compareFunction(t,i){return t.username==i.username&&t.code==i.code}getJobs(t,i){this.codesService.getSubForParent(t,i,this.job_const).subscribe(o=>{this.Jobs=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u0638\u0627\u0626\u0641","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getWorkPlaces(t,i){this.codesService.getSubForParent(t,i,this.workplace_const).subscribe(o=>{this.WorkPlaces=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0645\u0627\u0643\u0646 \u0627\u0644\u0639\u0645\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getWorkFields(t,i){this.codesService.getSubForParent(t,i,this.workField_const).subscribe(o=>{this.WorkFields=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0645\u0627\u0643\u0646 \u0627\u0644\u0639\u0645\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getMaxCodeForCustomers(t,i){this.contractService.getMaxCustomerCode(t,i).subscribe(o=>{if(this.maxCustomerCode=o.max,!this.id){let s=this.createRandomString(this.lengthOfCode,this.allowedChar);this.form.patchValue({code:this.maxCustomerCode,username:s,password:s,contacts:{email:"E"+s+"@jeddahlake.com"}})}})}getCountries(t,i){this.codesService.getSubForParent(t,i,this.country_const).subscribe(o=>{this.Countries=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u062f\u0648\u0644","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate(t){this.getGovernoratePerCountry(this.curCOMId,this.account.periorty,t.value)}getGovernoratePerCountry(t,i,o){this.codesService.getSubForParentAndRelated(t,i,this.governorate_const,o).subscribe(s=>{this.Governorates=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getGovernorate_EstOwner(t){this.getGovernoratePerCountry_EstOwner(this.curCOMId,this.account.periorty,t.value)}getGovernoratePerCountry_EstOwner(t,i,o){this.codesService.getSubForParentAndRelated(t,i,this.governorate_const,o).subscribe(s=>{this.Governorates_EstOwner=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062d\u0627\u0641\u0638\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity_EstOwner(t){this.getCityPerGoverno_EstOwner(this.curCOMId,this.account.periorty,t.value)}getCityPerGoverno_EstOwner(t,i,o){this.codesService.getSubForParentAndRelated(t,i,this.city_const,o).subscribe(s=>{this.Cities_EstOwner=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getCity(t){this.getCityPerGoverno(this.curCOMId,this.account.periorty,t.value)}getCityPerGoverno(t,i,o){this.codesService.getSubForParentAndRelated(t,i,this.city_const,o).subscribe(s=>{this.Cities=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria_EstOwner(t){this.getAreaPerCity_EstOwner(this.curCOMId,this.account.periorty,t.value)}getAreaPerCity_EstOwner(t,i,o){this.codesService.getSubForParentAndRelated(t,i,this.region_const,o).subscribe(s=>{this.Areas_EstOwner=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAria(t){this.getAreaPerCity(this.curCOMId,this.account.periorty,t.value)}getAreaPerCity(t,i,o){this.codesService.getSubForParentAndRelated(t,i,this.region_const,o).subscribe(s=>{this.Areas=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u062f\u0646","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getAllBuildings(t,i){this.unitsService.getAllBuilding(t,i).subscribe(o=>{this.AllBuildings=o},o=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getBuildings(t){this.getBuildingPerBranch(this.curCOMId,this.account.periorty,t.value)}getBuildingPerBranch(t,i,o){this.unitsService.getBuildingsPerBranch(t,i,o).subscribe(s=>{this.AllBuildings=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a \u0644\u0644\u0641\u0631\u0639","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitsPerBuild(t){this.getAllUnits(this.curCOMId,this.account.periorty,t.value)}getAllUnits(t,i,o){this.unitsService.getAllUnitsPerBuilding(t,i,o,"E").subscribe(s=>{this.AllUnits=s},s=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0648\u062d\u062f\u0627\u062a","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getUnitData(t){this.getUnitFullData(t.value)}getUnitFullData(t){this.unitsService.getOneUnit(t).subscribe(i=>{this.electricUnit="null"==i.UNTElectricityNumber?"":i.UNTElectricityNumber,this.waterUnit="null"==i.UNTWaterNumber?"":i.UNTWaterNumber,this.gasUnit="null"==i.UNTGasNumber?"":i.UNTGasNumber},i=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u062d\u062f\u0629","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(t=>{this.errorRetrieveMsg=t}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(t=>{this.askToDeletedMsg=t}),this.translateService.get("MESSAGE.DELETED").subscribe(t=>{this.deletedMsg=t}),this.translateService.get("HTML.ChooseImageFile").subscribe(t=>{this.chooseFile=t}),this.translateService.get("HTML.ChoosePDFFile").subscribe(t=>{this.chooseFilePDF=t}),this.translateService.get("HTML.ChoosePDFFile_Brand").subscribe(t=>{this.chooseFilePDFBrand=t}),this.translateService.get("HTML.ChoosePDFFile_NatId").subscribe(t=>{this.chooseFilePDFNatID=t}),this.translateService.get("HTML.ChooseRegisterImageFile").subscribe(t=>{this.chooseRegisterFilePDF=t}),this.translateService.get("MESSAGE.ImageSelected").subscribe(t=>{this.imageFileSelected=t}),this.translateService.get("MESSAGE.PDFSelected").subscribe(t=>{this.pdfFileSelected=t}),this.translateService.get("MESSAGE.OtherFileSelected").subscribe(t=>{this.otherFileSelected=t})}}Le.\u0275fac=function(t){return new(t||Le)(e.Y36(ue.y),e.Y36(re.d),e.Y36(k.gz),e.Y36(Xe.d),e.Y36(G.X),e.Y36(m.QS),e.Y36(p.C),e.Y36(L.v),e.Y36(k.F0),e.Y36(Z.uw),e.Y36(j.U),e.Y36(D.Z),e.Y36(de.g),e.Y36(y.sK),e.Y36(g.W),e.Y36(Re.H7),e.Y36(I.ux))},Le.\u0275cmp=e.Xpm({type:Le,selectors:[["app-customers-details-companies"]],features:[e._Bn([g.W])],decls:466,vars:296,consts:[["mat-dialog-title",""],[4,"ngIf"],[1,"user-form",3,"formGroup","keydown.enter"],[1,"vertical-tabs","tab-content-wrapped",3,"backgroundColor","color"],[3,"label"],["fxLayout","column",1,"form-field-outer"],["fxLayout","column","fxLayoutGap","10px grid"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["appearance","outline",1,"w-20"],["matInput","","formControlName","code","required",""],["appearance","outline",1,"w-30"],["matInput","","formControlName","username","required",""],["class","w-45",4,"ngIf"],["appearance","outline",1,"w-50"],["matInput","","formControlName","firstname","required",""],["appearance","outline",1,"w-45"],["matInput","","formControlName","lastname","required",""],["matInput","","formControlName","mobile","required",""],["fxFlex","100","fxFlex.gt-sm","80.0",1,"px-1"],["formControlName","CUSEInvoiceType"],["value","G","labelPosition","after"],["value","P","labelPosition","after"],["value","B","labelPosition","after"],["fxLayout","row"],[1,"p-2"],[2,"width","150px","height","200px",3,"src"],["formControlName","image","name","image","id","fileInput","type","file","accept","image/*",1,"file-input",3,"change"],["id","customButton",1,"custom-button",3,"click"],["formGroupName","profile",3,"label"],["formControlName","gender"],["value","M","labelPosition","after"],["value","F","labelPosition","after"],[1,"w-50"],["matInput","","formControlName","birthday","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["birthday",""],["fxFlex","100","fxFlex.gt-sm","50.0",1,"px-1"],["appearance","outline",1,"w-100"],["formControlName","current_branch","id","curbranchContOpSel","required","",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","curbuilding","id","buildOpSel",3,"placeholder","selectionChange"],["formControlName","curunit","id","unitOpSel",3,"placeholder","selectionChange"],["formGroupName","work",3,"label"],["fxFlex","100","fxFlex.gt-sm","49.8",1,"px-1"],["appearance","outline","formControlName","WorkPlace_CTTKeyField","id","workplOpSel",1,"w-100",3,"placeholder"],["appearance","outline","formControlName","Job_CTTKeyField","id","jobsOpSel",1,"w-100",3,"placeholder"],["formControlName","nationalIDType"],["value","N","labelPosition","after"],["value","K","labelPosition","after"],["value","S","labelPosition","after"],["value","O","labelPosition","after"],["fxFlex","100","fxFlex.gt-sm","60.0",1,"px-1"],["matInput","","formControlName","company","required",""],["fxFlex","100","fxFlex.gt-sm","40.0",1,"px-1"],["matInput","","formControlName","nationalID","required",""],["appearance","outline",1,"w-80"],["matInput","","formControlName","CUSAddress_EstOwner"],["appearance","outline",1,"w-19"],["matInput","","formControlName","CUSShortAddress_EstOwner"],["appearance","outline",1,"w-25"],["formControlName","Country_CTTKeyField_EstOwner","id","own_countOpSel",3,"placeholder","selectionChange"],["formControlName","Governorate_CTTKeyField_EstOwner","id","own_governoOpSel",3,"placeholder","selectionChange"],["appearance","outline",1,"w-24"],["formControlName","City_CTTKeyField_EstOwner","id","own_cityOpSel",3,"placeholder","selectionChange"],["formControlName","Area_CTTKeyField_EstOwner","id","own_areaOpSel",3,"placeholder"],["appearance","outline",1,"w-40"],["matInput","","formControlName","CUSStreetName_EstOwner"],["matInput","","formControlName","CUSBuildingNumber_EstOwner"],["matInput","","formControlName","CUSZibCode_EstOwner"],["matInput","","formControlName","CUSBuildingSubNumber_EstOwner"],["type","file","accept","image/*,.pdf","id","howiaFileInput",1,"file-input",3,"change"],["id","idCustomButton",1,"custom-button",3,"click"],["formGroupName","business",3,"label"],["fxLayout","column","fxLayoutGap","10px grid",1,"form-field-outer"],["matInput","","formControlName","CUSEstablishmentName"],["fxFlex","100","fxFlex.gt-sm","25.0",1,"px-1"],["matInput","","formControlName","CUSTaxNumber"],["matInput","","formControlName","CUSCommercialRegister"],["matInput","","formControlName","CUSCoRegisterOwnerName"],["matInput","","formControlName","CUSCoRegisterManagerName"],["fxFlex","100","fxFlex.gt-sm","20.0",1,"px-1"],["matInput","","formControlName","CUSUnifiedNumber"],["appearance","outline","formControlName","workField_CTTKeyField","id","workfieldplOpSel",1,"w-100",3,"placeholder"],["fxFlex","100","fxFlex.gt-sm","30.0",1,"px-1"],["matInput","","formControlName","CUSBrandName"],["matInput","","formControlName","CUSFamousName"],["type","file","accept","image/*,.pdf","id","registerFileInput",1,"file-input",3,"change"],["id","registerCustomButton",1,"custom-button",3,"click"],["formGroupName","contacts",3,"label"],["matInput","","formControlName","homephone"],["matInput","","formControlName","workphone"],["matInput","","formControlName","email","required","",3,"placeholder"],["matInput","","formControlName","address"],["matInput","","formControlName","CUSShortAddress"],["formControlName","country","id","countrOpSel",3,"placeholder","selectionChange"],["formControlName","governorate","id","governoOpSel",3,"placeholder","selectionChange"],["formControlName","city","id","cityOpSel",3,"placeholder","selectionChange"],["formControlName","area","id","areaOpSel",3,"placeholder"],["matInput","","formControlName","CUSStreetName"],["matInput","","formControlName","CUSBuildingNumber"],["matInput","","formControlName","CUSZibCode"],["matInput","","formControlName","CUSBuildingSubNumber"],["formGroupName","social",3,"label"],["matInput","","formControlName","facebook"],["matInput","","formControlName","twitter"],["matInput","","formControlName","google"],["formGroupName","settings",3,"label",4,"ngIf"],["formGroupName","docs",3,"label"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-2"],["hidden","","formControlName","docOnePic","name","docOnePic","id","uploadonedoc","type","file","accept","image/*",1,"user-img",3,"change"],["fileInput",""],["type","button","mat-raised-button","",3,"click"],["formControlName","docPic","fileAccept","image/*"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"w-45"],["matInput","","formControlName","password","required","",3,"type"],["matSuffix","",3,"click"],["id","iddownloadiconalone","target","_blank",3,"href"],[4,"ngIf","ngIfElse"],["pdfPreview",""],[2,"max-width","100%","height","250px",3,"src"],["frameborder","0",2,"width","100%","height","250px",3,"src"],["id","registerdownloadicon","target","_blank",3,"href"],["pdfRegisterPreview",""],["formGroupName","settings",3,"label"],["formControlName","isActive"],["formControlName","isDeleted"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"h1",0),e.YNc(1,Vo,3,3,"span",1),e.YNc(2,Yo,3,3,"span",1),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"form",2),e.NdJ("keydown.enter",function(c){return i.onEnter(c)}),e.TgZ(6,"mat-tab-group",3)(7,"mat-tab",4),e.ALo(8,"translate"),e.TgZ(9,"div",5)(10,"div",6),e._UZ(11,"mat-label"),e.TgZ(12,"div",7)(13,"mat-form-field",8)(14,"mat-label")(15,"mat-icon"),e._uU(16,"person"),e.qZA(),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",9),e.YNc(20,Go,2,0,"mat-error",1),e.YNc(21,Qo,2,0,"mat-error",1),e.qZA(),e.TgZ(22,"mat-form-field",10)(23,"mat-label")(24,"mat-icon"),e._uU(25,"person"),e.qZA(),e._uU(26),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"input",11),e.qZA(),e.YNc(29,zo,11,7,"mat-form-field",12),e.qZA()(),e.TgZ(30,"div",7)(31,"mat-form-field",13)(32,"mat-label")(33,"mat-icon"),e._uU(34,"person"),e.qZA(),e._uU(35),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"input",14),e.YNc(38,Xo,2,0,"mat-error",1),e.qZA(),e.TgZ(39,"mat-form-field",15)(40,"mat-label")(41,"mat-icon"),e._uU(42,"person"),e.qZA(),e._uU(43),e.ALo(44,"translate"),e.qZA(),e._UZ(45,"input",16),e.YNc(46,ea,2,0,"mat-error",1),e.qZA()(),e.TgZ(47,"div",7)(48,"mat-form-field",13)(49,"mat-label"),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"mat-hint"),e._uU(53,"966505602221"),e.qZA(),e._UZ(54,"input",17),e.YNc(55,ta,2,0,"mat-error",1),e.qZA()(),e.TgZ(56,"div",7)(57,"div",18)(58,"mat-label"),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"mat-radio-group",19)(62,"mat-radio-button",20),e._uU(63),e.ALo(64,"translate"),e.qZA(),e.TgZ(65,"mat-radio-button",21),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"mat-radio-button",22),e._uU(69),e.ALo(70,"translate"),e.qZA()()()(),e.TgZ(71,"div",23)(72,"div",24),e._UZ(73,"img",25),e.TgZ(74,"input",26),e.NdJ("change",function(c){return i.handelCUSImgInput(c.target.files)}),e.qZA(),e.YNc(75,ia,2,1,"div",1),e.TgZ(76,"button",27),e.NdJ("click",function(){return i.callFileInput()}),e._uU(77),e.ALo(78,"translate"),e.qZA()()()()(),e.TgZ(79,"mat-tab",28),e.ALo(80,"translate"),e.TgZ(81,"div",5)(82,"div",7)(83,"mat-radio-group",29)(84,"mat-radio-button",30),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.TgZ(87,"mat-radio-button",31),e._uU(88),e.ALo(89,"translate"),e.qZA()(),e.TgZ(90,"mat-form-field",32)(91,"mat-label"),e._uU(92),e.ALo(93,"translate"),e.qZA(),e._UZ(94,"input",33)(95,"mat-datepicker-toggle",34)(96,"mat-datepicker",null,35),e.qZA()(),e.TgZ(98,"div",7)(99,"div",36)(100,"mat-form-field",37)(101,"mat-label"),e._uU(102),e.ALo(103,"translate"),e.qZA(),e.TgZ(104,"mat-select",38),e.NdJ("selectionChange",function(c){return i.getBuildings(c)}),e.ALo(105,"translate"),e.TgZ(106,"mat-option",39),e._uU(107,"-"),e.qZA(),e.YNc(108,na,2,2,"mat-option",40),e.qZA()()()(),e.TgZ(109,"div",7)(110,"mat-form-field",13)(111,"mat-label"),e._uU(112),e.ALo(113,"translate"),e.qZA(),e.TgZ(114,"mat-select",41),e.NdJ("selectionChange",function(c){return i.getUnitsPerBuild(c)}),e.ALo(115,"translate"),e.TgZ(116,"mat-option",39),e._uU(117,"-"),e.qZA(),e.YNc(118,oa,2,2,"mat-option",40),e.qZA()(),e.TgZ(119,"mat-form-field",15)(120,"mat-label"),e._uU(121),e.ALo(122,"translate"),e.qZA(),e.TgZ(123,"mat-select",42),e.NdJ("selectionChange",function(c){return i.getUnitData(c)}),e.ALo(124,"translate"),e.TgZ(125,"mat-option",39),e._uU(126,"-"),e.qZA(),e.YNc(127,aa,2,2,"mat-option",40),e.qZA()()(),e.TgZ(128,"div",7),e.YNc(129,ra,3,3,"h4",1),e.TgZ(130,"h3"),e._uU(131),e.qZA(),e.YNc(132,sa,3,3,"h4",1),e.TgZ(133,"h3"),e._uU(134),e.qZA(),e.YNc(135,la,3,3,"h4",1),e.TgZ(136,"h3"),e._uU(137),e.qZA()()()(),e.TgZ(138,"mat-tab",43),e.ALo(139,"translate"),e.TgZ(140,"div",5)(141,"div",6),e._UZ(142,"mat-label"),e.TgZ(143,"div",7)(144,"div",44)(145,"label"),e._uU(146),e.ALo(147,"translate"),e.qZA(),e.TgZ(148,"ng-select",45),e.ALo(149,"translate"),e.YNc(150,ca,2,2,"ng-option",40),e.qZA()(),e.TgZ(151,"div",44)(152,"label"),e._uU(153),e.ALo(154,"translate"),e.qZA(),e.TgZ(155,"ng-select",46),e.ALo(156,"translate"),e.YNc(157,ua,2,2,"ng-option",40),e.qZA()()(),e._UZ(158,"mat-divider")(159,"mat-divider"),e.qZA(),e.TgZ(160,"mat-radio-group",47)(161,"mat-radio-button",48),e._uU(162),e.ALo(163,"translate"),e.qZA(),e.TgZ(164,"mat-radio-button",31),e._uU(165),e.ALo(166,"translate"),e.qZA(),e.TgZ(167,"mat-radio-button",49),e._uU(168),e.ALo(169,"translate"),e.qZA(),e.TgZ(170,"mat-radio-button",50),e._uU(171),e.ALo(172,"translate"),e.qZA(),e.TgZ(173,"mat-radio-button",51),e._uU(174),e.ALo(175,"translate"),e.qZA()(),e.TgZ(176,"div",7)(177,"div",52)(178,"mat-form-field",37)(179,"mat-label"),e._uU(180),e.ALo(181,"translate"),e.qZA(),e._UZ(182,"input",53),e.qZA()(),e.TgZ(183,"div",54)(184,"mat-form-field",37)(185,"mat-label"),e._uU(186),e.ALo(187,"translate"),e.qZA(),e._UZ(188,"input",55),e.qZA()()(),e.TgZ(189,"div",7)(190,"mat-form-field",56)(191,"mat-label"),e._uU(192),e.ALo(193,"translate"),e.qZA(),e._UZ(194,"input",57),e.qZA(),e.TgZ(195,"mat-form-field",58)(196,"mat-label"),e._uU(197),e.ALo(198,"translate"),e.qZA(),e._UZ(199,"input",59),e.qZA()(),e.TgZ(200,"div",7)(201,"mat-form-field",60)(202,"mat-label"),e._uU(203),e.ALo(204,"translate"),e.qZA(),e.TgZ(205,"mat-select",61),e.NdJ("selectionChange",function(c){return i.getGovernorate_EstOwner(c)}),e.ALo(206,"translate"),e.TgZ(207,"mat-option",39),e._uU(208,"-"),e.qZA(),e.YNc(209,da,2,2,"mat-option",40),e.qZA()(),e.TgZ(210,"mat-form-field",60)(211,"mat-label"),e._uU(212),e.ALo(213,"translate"),e.qZA(),e.TgZ(214,"mat-select",62),e.NdJ("selectionChange",function(c){return i.getCity_EstOwner(c)}),e.ALo(215,"translate"),e.TgZ(216,"mat-option",39),e._uU(217,"-"),e.qZA(),e.YNc(218,ma,2,2,"mat-option",40),e.qZA()(),e.TgZ(219,"mat-form-field",63)(220,"mat-label"),e._uU(221),e.ALo(222,"translate"),e.qZA(),e.TgZ(223,"mat-select",64),e.NdJ("selectionChange",function(c){return i.getAria_EstOwner(c)}),e.ALo(224,"translate"),e.TgZ(225,"mat-option",39),e._uU(226,"-"),e.qZA(),e.YNc(227,pa,2,2,"mat-option",40),e.qZA()(),e.TgZ(228,"mat-form-field",60)(229,"mat-label"),e._uU(230),e.ALo(231,"translate"),e.qZA(),e.TgZ(232,"mat-select",65),e.ALo(233,"translate"),e.TgZ(234,"mat-option",39),e._uU(235,"-"),e.qZA(),e.YNc(236,ha,2,2,"mat-option",40),e.qZA()()(),e.TgZ(237,"div",7)(238,"mat-form-field",66)(239,"mat-label"),e._uU(240),e.ALo(241,"translate"),e.qZA(),e._UZ(242,"input",67),e.qZA(),e.TgZ(243,"mat-form-field",8)(244,"mat-label"),e._uU(245),e.ALo(246,"translate"),e.qZA(),e._UZ(247,"input",68),e.qZA(),e.TgZ(248,"mat-form-field",58)(249,"mat-label"),e._uU(250),e.ALo(251,"translate"),e.qZA(),e._UZ(252,"input",69),e.qZA(),e.TgZ(253,"mat-form-field",8)(254,"mat-label"),e._uU(255),e.ALo(256,"translate"),e.qZA(),e._UZ(257,"input",70),e.qZA()()(),e.YNc(258,ga,4,1,"div",1),e.TgZ(259,"div",23)(260,"input",71),e.NdJ("change",function(c){return i.onFileSelected(c.target.files,c)}),e.qZA(),e.TgZ(261,"button",72),e.NdJ("click",function(){return i.callOnHowiaFileSelect()}),e._uU(262),e.ALo(263,"translate"),e.qZA(),e.YNc(264,Ca,4,2,"div",1),e.qZA()(),e.TgZ(265,"mat-tab",73),e.ALo(266,"translate"),e.TgZ(267,"div",74),e._UZ(268,"mat-label"),e.TgZ(269,"div",7)(270,"div",36)(271,"mat-form-field",37)(272,"mat-label"),e._uU(273),e.ALo(274,"translate"),e.qZA(),e._UZ(275,"input",75),e.qZA()(),e.TgZ(276,"div",76)(277,"mat-form-field",37)(278,"mat-label"),e._uU(279),e.ALo(280,"translate"),e.qZA(),e._UZ(281,"input",77),e.qZA()(),e.TgZ(282,"div",76)(283,"mat-form-field",37)(284,"mat-label"),e._uU(285),e.ALo(286,"translate"),e.qZA(),e._UZ(287,"input",78),e.qZA()()(),e.TgZ(288,"div",7)(289,"div",54)(290,"mat-form-field",37)(291,"mat-label"),e._uU(292),e.ALo(293,"translate"),e.qZA(),e._UZ(294,"input",79),e.qZA()(),e.TgZ(295,"div",54)(296,"mat-form-field",37)(297,"mat-label"),e._uU(298),e.ALo(299,"translate"),e.qZA(),e._UZ(300,"input",80),e.qZA()(),e.TgZ(301,"div",81)(302,"mat-form-field",37)(303,"mat-label"),e._uU(304),e.ALo(305,"translate"),e.qZA(),e._UZ(306,"input",82),e.qZA()()(),e.TgZ(307,"div",7)(308,"div",54)(309,"div",23)(310,"label"),e._uU(311),e.ALo(312,"translate"),e.qZA(),e.TgZ(313,"ng-select",83),e.ALo(314,"translate"),e.YNc(315,Ta,2,2,"ng-option",40),e.qZA()()(),e.TgZ(316,"div",84)(317,"mat-form-field",37)(318,"mat-label")(319,"mat-icon"),e._uU(320,"fingerprint"),e.qZA(),e._uU(321),e.ALo(322,"translate"),e.qZA(),e._UZ(323,"input",85),e.qZA()(),e.TgZ(324,"div",84)(325,"mat-form-field",37)(326,"mat-label"),e._uU(327),e.ALo(328,"translate"),e.qZA(),e._UZ(329,"input",86),e.qZA()()(),e.YNc(330,ba,4,1,"div",1),e.TgZ(331,"div",23)(332,"input",87),e.NdJ("change",function(c){return i.onRegisterFileSelected(c.target.files,c)}),e.qZA(),e.TgZ(333,"button",88),e.NdJ("click",function(){return i.callOnRegisterFileSelect()}),e._uU(334),e.ALo(335,"translate"),e.qZA(),e.YNc(336,Aa,4,2,"div",1),e.qZA()()(),e.TgZ(337,"mat-tab",89),e.ALo(338,"translate"),e.TgZ(339,"div",74),e._UZ(340,"mat-label"),e.TgZ(341,"div",7)(342,"mat-form-field",63)(343,"mat-label"),e._uU(344),e.ALo(345,"translate"),e.qZA(),e._UZ(346,"input",90),e.qZA(),e.TgZ(347,"mat-form-field",60)(348,"mat-label"),e._uU(349),e.ALo(350,"translate"),e.qZA(),e._UZ(351,"input",91),e.qZA(),e.TgZ(352,"mat-form-field",13)(353,"mat-label"),e._uU(354),e.ALo(355,"translate"),e.qZA(),e._UZ(356,"input",92),e.ALo(357,"translate"),e.qZA()(),e.TgZ(358,"div",7)(359,"mat-form-field",56)(360,"mat-label"),e._uU(361),e.ALo(362,"translate"),e.qZA(),e._UZ(363,"input",93),e.qZA(),e.TgZ(364,"mat-form-field",58)(365,"mat-label"),e._uU(366),e.ALo(367,"translate"),e.qZA(),e._UZ(368,"input",94),e.qZA()(),e.TgZ(369,"div",7)(370,"mat-form-field",60)(371,"mat-label"),e._uU(372),e.ALo(373,"translate"),e.qZA(),e.TgZ(374,"mat-select",95),e.NdJ("selectionChange",function(c){return i.getGovernorate(c)}),e.ALo(375,"translate"),e.TgZ(376,"mat-option",39),e._uU(377,"-"),e.qZA(),e.YNc(378,xa,2,2,"mat-option",40),e.qZA()(),e.TgZ(379,"mat-form-field",60)(380,"mat-label"),e._uU(381),e.ALo(382,"translate"),e.qZA(),e.TgZ(383,"mat-select",96),e.NdJ("selectionChange",function(c){return i.getCity(c)}),e.ALo(384,"translate"),e.TgZ(385,"mat-option",39),e._uU(386,"-"),e.qZA(),e.YNc(387,ya,2,2,"mat-option",40),e.qZA()(),e.TgZ(388,"mat-form-field",63)(389,"mat-label"),e._uU(390),e.ALo(391,"translate"),e.qZA(),e.TgZ(392,"mat-select",97),e.NdJ("selectionChange",function(c){return i.getAria(c)}),e.ALo(393,"translate"),e.TgZ(394,"mat-option",39),e._uU(395,"-"),e.qZA(),e.YNc(396,Ua,2,2,"mat-option",40),e.qZA()(),e.TgZ(397,"mat-form-field",60)(398,"mat-label"),e._uU(399),e.ALo(400,"translate"),e.qZA(),e.TgZ(401,"mat-select",98),e.ALo(402,"translate"),e.TgZ(403,"mat-option",39),e._uU(404,"-"),e.qZA(),e.YNc(405,wa,2,2,"mat-option",40),e.qZA()()(),e.TgZ(406,"div",7)(407,"mat-form-field",66)(408,"mat-label"),e._uU(409),e.ALo(410,"translate"),e.qZA(),e._UZ(411,"input",99),e.qZA(),e.TgZ(412,"mat-form-field",8)(413,"mat-label"),e._uU(414),e.ALo(415,"translate"),e.qZA(),e._UZ(416,"input",100),e.qZA(),e.TgZ(417,"mat-form-field",58)(418,"mat-label"),e._uU(419),e.ALo(420,"translate"),e.qZA(),e._UZ(421,"input",101),e.qZA(),e.TgZ(422,"mat-form-field",8)(423,"mat-label"),e._uU(424),e.ALo(425,"translate"),e.qZA(),e._UZ(426,"input",102),e.qZA()()()(),e.TgZ(427,"mat-tab",103),e.ALo(428,"translate"),e.TgZ(429,"div",6),e._UZ(430,"mat-label"),e.TgZ(431,"div",5)(432,"mat-form-field",37)(433,"mat-label"),e._uU(434,"Facebook"),e.qZA(),e._UZ(435,"input",104),e.qZA(),e.TgZ(436,"mat-form-field",37)(437,"mat-label"),e._uU(438,"Twitter"),e.qZA(),e._UZ(439,"input",105),e.qZA(),e.TgZ(440,"mat-form-field",37)(441,"mat-label"),e._uU(442,"Google"),e.qZA(),e._UZ(443,"input",106),e.qZA()()()(),e.YNc(444,Sa,11,9,"mat-tab",107),e.TgZ(445,"mat-tab",108),e.ALo(446,"translate"),e.TgZ(447,"div",109)(448,"div",24),e._UZ(449,"img",25),e.TgZ(450,"input",110,111),e.NdJ("change",function(c){return i.onFileChange(c.target.files)}),e.qZA(),e.TgZ(452,"button",112),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(451);return e.KtG(c.click())}),e._uU(453),e.ALo(454,"translate"),e.qZA()(),e._UZ(455,"mat-divider")(456,"input-file",113),e.qZA()()()(),e._UZ(457,"br"),e.TgZ(458,"div",114)(459,"div",7),e.YNc(460,Ia,3,4,"button",115),e.YNc(461,Da,4,4,"button",116),e.YNc(462,Fa,4,4,"button",116),e.YNc(463,La,4,4,"button",116),e.YNc(464,Ma,4,4,"button",116),e.YNc(465,Ea,3,4,"button",116),e.qZA()()}if(2&t){const o=e.MAs(97);e.xp6(1),e.Q6J("ngIf",!i.CUS.id),e.xp6(1),e.Q6J("ngIf",i.CUS.id),e.xp6(1),e.hij(" ",e.lcZ(4,130,"HTML.TENANT"),"\n"),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("backgroundColor","primary")("color","warn"),e.xp6(1),e.s9C("label",e.lcZ(8,132,"HTML.TAB_BASIC")),e.xp6(10),e.hij(" ",e.lcZ(18,134,"HTML.CODE"),""),e.xp6(3),e.Q6J("ngIf",null==i.form.controls.code.errors?null:i.form.controls.code.errors.required),e.xp6(1),e.Q6J("ngIf",i.form.controls.code.hasError("minlength")),e.xp6(5),e.hij(" ",e.lcZ(27,136,"HTML.USERNAME"),""),e.xp6(3),e.Q6J("ngIf",!i.CUS.id),e.xp6(6),e.hij(" ",e.lcZ(36,138,"HTML.FIRST_NAME"),""),e.xp6(3),e.Q6J("ngIf",null==i.form.controls.firstname.errors?null:i.form.controls.firstname.errors.required),e.xp6(5),e.hij(" ",e.lcZ(44,140,"HTML.LAST_NAME"),""),e.xp6(3),e.Q6J("ngIf",null==i.form.controls.lastname.errors?null:i.form.controls.lastname.errors.required),e.xp6(4),e.Oqu(e.lcZ(51,142,"HTML.MOBILE")),e.xp6(5),e.Q6J("ngIf",null==i.form.controls.mobile.errors?null:i.form.controls.mobile.errors.required),e.xp6(4),e.Oqu(e.lcZ(60,144,"HTML.EInvoiceType")),e.xp6(4),e.Oqu(e.lcZ(64,146,"HTML.EType_Without")),e.xp6(3),e.Oqu(e.lcZ(67,148,"HTML.EType_Personal")),e.xp6(3),e.Oqu(e.lcZ(70,150,"HTML.EType_Business")),e.xp6(4),e.Q6J("src",i.defaultCusImage,e.LSH),e.xp6(2),e.Q6J("ngIf",i.fileType),e.xp6(2),e.Oqu(e.lcZ(78,152,"HTML.ChooseImageFile")),e.xp6(2),e.s9C("label",e.lcZ(80,154,"HTML.TAB_PERSONAL")),e.xp6(6),e.Oqu(e.lcZ(86,156,"HTML.MALE")),e.xp6(3),e.Oqu(e.lcZ(89,158,"HTML.FEMALE")),e.xp6(4),e.Oqu(e.lcZ(93,160,"HTML.BIRTH_DATE")),e.xp6(2),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(7),e.hij(" ",e.lcZ(103,162,"HTML.BRANCH"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(105,164,"HTML.BRANCH")),e.xp6(4),e.Q6J("ngForOf",i.AllBranches),e.xp6(4),e.Oqu(e.lcZ(113,166,"HTML.BUILDING")),e.xp6(2),e.s9C("placeholder",e.lcZ(115,168,"HTML.BUILDING")),e.xp6(4),e.Q6J("ngForOf",i.AllBuildings),e.xp6(3),e.Oqu(e.lcZ(122,170,"HTML.UNIT")),e.xp6(2),e.s9C("placeholder",e.lcZ(124,172,"HTML.UNIT")),e.xp6(4),e.Q6J("ngForOf",i.AllUnits),e.xp6(2),e.Q6J("ngIf",i.electricUnit),e.xp6(2),e.Oqu(i.electricUnit),e.xp6(1),e.Q6J("ngIf",i.waterUnit),e.xp6(2),e.Oqu(i.waterUnit),e.xp6(1),e.Q6J("ngIf",i.gasUnit),e.xp6(2),e.Oqu(i.gasUnit),e.xp6(1),e.s9C("label",e.lcZ(139,174,"HTML.EstablishmentOwner")),e.xp6(8),e.hij(" ",e.lcZ(147,176,"HTML.WorkPlace"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(149,178,"HTML.WorkPlace")),e.xp6(2),e.Q6J("ngForOf",i.WorkPlaces),e.xp6(3),e.hij(" ",e.lcZ(154,180,"HTML.Job"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(156,182,"HTML.Job")),e.xp6(2),e.Q6J("ngForOf",i.Jobs),e.xp6(5),e.Oqu(e.lcZ(163,184,"OPTIONS.NATIONAL_ID")),e.xp6(3),e.Oqu(e.lcZ(166,186,"OPTIONS.FOREIGN_ID")),e.xp6(3),e.Oqu(e.lcZ(169,188,"OPTIONS.GULF_ID")),e.xp6(3),e.Oqu(e.lcZ(172,190,"OPTIONS.SPECIAL_EQAMA")),e.xp6(3),e.Oqu(e.lcZ(175,192,"OPTIONS.OTHER")),e.xp6(6),e.Oqu(e.lcZ(181,194,"HTML.EstablishmentOwnerName")),e.xp6(6),e.Oqu(e.lcZ(187,196,"HTML.IDNUMBER")),e.xp6(6),e.Oqu(e.lcZ(193,198,"HTML.ADDRESS")),e.xp6(5),e.Oqu(e.lcZ(198,200,"HTML.ShortAddress")),e.xp6(6),e.Oqu(e.lcZ(204,202,"HTML.COUNTRY")),e.xp6(2),e.s9C("placeholder",e.lcZ(206,204,"HTML.COUNTRY")),e.xp6(4),e.Q6J("ngForOf",i.Countries),e.xp6(3),e.Oqu(e.lcZ(213,206,"HTML.GOVERN")),e.xp6(2),e.s9C("placeholder",e.lcZ(215,208,"HTML.GOVERN")),e.xp6(4),e.Q6J("ngForOf",i.Governorates_EstOwner),e.xp6(3),e.Oqu(e.lcZ(222,210,"HTML.CITY")),e.xp6(2),e.s9C("placeholder",e.lcZ(224,212,"HTML.CITY")),e.xp6(4),e.Q6J("ngForOf",i.Cities_EstOwner),e.xp6(3),e.Oqu(e.lcZ(231,214,"HTML.REGION")),e.xp6(2),e.s9C("placeholder",e.lcZ(233,216,"HTML.REGION")),e.xp6(4),e.Q6J("ngForOf",i.Areas_EstOwner),e.xp6(4),e.Oqu(e.lcZ(241,218,"HTML.STREET_NAME")),e.xp6(5),e.Oqu(e.lcZ(246,220,"HTML.BUILDING_NUMBER")),e.xp6(5),e.Oqu(e.lcZ(251,222,"HTML.ZIP")),e.xp6(5),e.Oqu(e.lcZ(256,224,"HTML.BUILDING_SubNUMBER")),e.xp6(3),e.Q6J("ngIf",i.CUS.id&&i.natIDfileToUpload),e.xp6(4),e.hij(" ",e.lcZ(263,226,"HTML.ChooseHowiaImageFile"),""),e.xp6(2),e.Q6J("ngIf",i.fileUrl),e.xp6(1),e.s9C("label",e.lcZ(266,228,"HTML.BusinessTab")),e.xp6(8),e.Oqu(e.lcZ(274,230,"HTML.EstablishmentName")),e.xp6(6),e.Oqu(e.lcZ(280,232,"HTML.TaxNumber")),e.xp6(6),e.Oqu(e.lcZ(286,234,"HTML.CommercialRegister")),e.xp6(7),e.Oqu(e.lcZ(293,236,"HTML.CoRegisterOwnerName")),e.xp6(6),e.Oqu(e.lcZ(299,238,"HTML.CoRegisterManagerName")),e.xp6(6),e.Oqu(e.lcZ(305,240,"HTML.UnifiedNumber")),e.xp6(7),e.hij(" ",e.lcZ(312,242,"HTML.workField"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(314,244,"HTML.workField")),e.xp6(2),e.Q6J("ngForOf",i.WorkFields),e.xp6(6),e.hij(" ",e.lcZ(322,246,"HTML.TradeMark"),""),e.xp6(6),e.hij(" ",e.lcZ(328,248,"HTML.FamousName"),""),e.xp6(3),e.Q6J("ngIf",i.CUS.id&&i.registerFileToUpload),e.xp6(4),e.hij(" ",e.lcZ(335,250,"HTML.ChooseRegisterImageFile"),""),e.xp6(2),e.Q6J("ngIf",i.registerFileUrl),e.xp6(1),e.s9C("label",e.lcZ(338,252,"HTML.TAB_CONTACTS")),e.xp6(7),e.Oqu(e.lcZ(345,254,"HTML.HOME_PHONE")),e.xp6(5),e.Oqu(e.lcZ(350,256,"HTML.WORK_PHONE")),e.xp6(5),e.Oqu(e.lcZ(355,258,"HTML.EMAIL")),e.xp6(2),e.s9C("placeholder",e.lcZ(357,260,"HTML.EMAIL")),e.xp6(5),e.Oqu(e.lcZ(362,262,"HTML.ADDRESS")),e.xp6(5),e.Oqu(e.lcZ(367,264,"HTML.ShortAddress")),e.xp6(6),e.Oqu(e.lcZ(373,266,"HTML.COUNTRY")),e.xp6(2),e.s9C("placeholder",e.lcZ(375,268,"HTML.COUNTRY")),e.xp6(4),e.Q6J("ngForOf",i.Countries),e.xp6(3),e.Oqu(e.lcZ(382,270,"HTML.GOVERN")),e.xp6(2),e.s9C("placeholder",e.lcZ(384,272,"HTML.GOVERN")),e.xp6(4),e.Q6J("ngForOf",i.Governorates),e.xp6(3),e.Oqu(e.lcZ(391,274,"HTML.CITY")),e.xp6(2),e.s9C("placeholder",e.lcZ(393,276,"HTML.CITY")),e.xp6(4),e.Q6J("ngForOf",i.Cities),e.xp6(3),e.Oqu(e.lcZ(400,278,"HTML.REGION")),e.xp6(2),e.s9C("placeholder",e.lcZ(402,280,"HTML.REGION")),e.xp6(4),e.Q6J("ngForOf",i.Areas),e.xp6(4),e.Oqu(e.lcZ(410,282,"HTML.STREET_NAME")),e.xp6(5),e.Oqu(e.lcZ(415,284,"HTML.BUILDING_NUMBER")),e.xp6(5),e.Oqu(e.lcZ(420,286,"HTML.ZIP")),e.xp6(5),e.Oqu(e.lcZ(425,288,"HTML.BUILDING_SubNUMBER")),e.xp6(3),e.s9C("label",e.lcZ(428,290,"HTML.TAB_SOCIAL_LIFE")),e.xp6(17),e.Q6J("ngIf",i.account.periorty>0),e.xp6(1),e.s9C("label",e.lcZ(446,292,"HTML.TAB_DOCS")),e.xp6(4),e.Q6J("src",i.defaultDocImage,e.LSH),e.xp6(4),e.Oqu(e.lcZ(454,294,"HTML.AddPic")),e.xp6(7),e.Q6J("ngIf",i.can("change_tenant")||0==i.account.periorty),e.xp6(1),e.Q6J("ngIf",i.can("view_tenantrelative")||0==i.account.periorty),e.xp6(1),e.Q6J("ngIf",i.can("view_tenant_workrelated")||0==i.account.periorty),e.xp6(1),e.Q6J("ngIf",i.can("view_tenant_workrelated_agency")||0==i.account.periorty),e.xp6(1),e.Q6J("ngIf",i.can("change_tenant_password")||0==i.account.periorty),e.xp6(1),e.Q6J("ngIf",i.can("confirm_tenant"))}},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.Q7,Ae.VQ,Ae.U0,_.sg,_.O5,m.sg,m.u,m.x0,T.xw,T.SQ,T.Wh,T.yH,K.ey,b.lW,et.oG,Y.Mq,Y.hl,Y.nW,Z.ZT,Z.uh,Z.H8,Q.Hw,A.Nt,v.KE,v.hX,v.bx,v.TO,v.R9,ee.d,E.gD,Te.uX,Te.SP,tt.tW,ve.w9,ve.jq,y.X$],styles:[".user-form .form-field-outer{width:680px}.user-form .mat-mdc-radio-button{margin-right:12px}.container{background-color:var(--backgroundColorContainer);border-right:2px solid var(--backgroundColorContainerBorder)}.file-input{display:none}.custom-button{padding:10px 20px;background-color:#007bff;color:#fff;border:none;cursor:pointer;border-radius:5px;height:40px}.custom-button:hover{background-color:#0056b3}\n"],encapsulation:2});const wt=[{path:"",redirectTo:"tenant-list",pathMatch:"full"},{path:"tenant-list",component:h,data:{breadcrumb:"Tenants"}},{path:"tenant-add",component:De,data:{breadcrumb:"AddTenant"}},{path:"tenant-add/:id",component:De,data:{breadcrumb:"EditTenant"}},{path:"businesstenant-list",component:Ve,data:{breadcrumb:"TenantBusiness"}},{path:"businesstenant-add",component:Le,data:{breadcrumb:"AddTenantBusiness"}},{path:"businesstenant-add/:id",component:Le,data:{breadcrumb:"EditTenantBusiness"}},{path:"owner-list",component:Je,data:{breadcrumb:"Owners"}},{path:"owner-add",component:ye,data:{breadcrumb:"AddOwner"}},{path:"owner-add/:id",component:ye,data:{breadcrumb:"EditOwner"}},{path:"contract-list",component:Ne,data:{breadcrumb:"RentContracts"}},{path:"contract-list/:tenantid",component:Ne,data:{breadcrumb:"RentContractsForTenant"}},{path:"contract-add",component:Ze,data:{breadcrumb:"AddContract"}},{path:"contract-add/:id",component:Ze,data:{breadcrumb:"EditContract"}},{path:"contract-add/renew/:id",component:Ze,data:{breadcrumb:"RenewContract",parentID:"T"}},{path:"installment-list/:id",component:ke,data:{breadcrumb:"ContractInstallments"}},{path:"statements-list/:id",component:Be,data:{breadcrumb:"TenantStatements"}},{path:"tenant-leave",component:Fe,data:{breadcrumb:"AddTenantLeave"}},{path:"tenant-leave/:id",component:Fe,data:{breadcrumb:"EditTenantLeave"}},{path:"print-einvoice",component:Ke,data:{breadcrumb:"E-Invoice"}}];class Me{}Me.\u0275fac=function(t){return new(t||Me)},Me.\u0275mod=e.oAB({type:Me}),Me.\u0275inj=e.cJS({imports:[Ct.JF,m.u5,Ae.Fk,X.JX,ii.D,Ut.N,_.ez,k.Bz.forChild(wt),m.UX,ti.m,X.JX,mn.kz,tt.Y$,ve.A0]})},5343:(it,ie)=>{"use strict";ie.byteLength=function D(b){var A=e(b),E=A[1];return 3*(A[0]+E)/4-E},ie.toByteArray=function G(b){var A,z,v=e(b),E=v[0],y=v[1],J=new Z(function p(b,A,v){return 3*(A+v)/4-v}(0,E,y)),$=0,he=y>0?E-4:E;for(z=0;z<he;z+=4)A=_[b.charCodeAt(z)]<<18|_[b.charCodeAt(z+1)]<<12|_[b.charCodeAt(z+2)]<<6|_[b.charCodeAt(z+3)],J[$++]=A>>16&255,J[$++]=A>>8&255,J[$++]=255&A;return 2===y&&(A=_[b.charCodeAt(z)]<<2|_[b.charCodeAt(z+1)]>>4,J[$++]=255&A),1===y&&(A=_[b.charCodeAt(z)]<<10|_[b.charCodeAt(z+1)]<<4|_[b.charCodeAt(z+2)]>>2,J[$++]=A>>8&255,J[$++]=255&A),J},ie.fromByteArray=function K(b){for(var A,v=b.length,E=v%3,y=[],J=16383,$=0,he=v-E;$<he;$+=J)y.push(T(b,$,$+J>he?he:$+J));return 1===E?y.push(f[(A=b[v-1])>>2]+f[A<<4&63]+"=="):2===E&&y.push(f[(A=(b[v-2]<<8)+b[v-1])>>10]+f[A>>4&63]+f[A<<2&63]+"="),y.join("")};for(var f=[],_=[],Z=typeof Uint8Array<"u"?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=0,O=m.length;R<O;++R)f[R]=m[R],_[m.charCodeAt(R)]=R;function e(b){var A=b.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=b.indexOf("=");return-1===v&&(v=A),[v,v===A?0:4-v%4]}function I(b){return f[b>>18&63]+f[b>>12&63]+f[b>>6&63]+f[63&b]}function T(b,A,v){for(var y=[],J=A;J<v;J+=3)y.push(I((b[J]<<16&16711680)+(b[J+1]<<8&65280)+(255&b[J+2])));return y.join("")}_["-".charCodeAt(0)]=62,_["_".charCodeAt(0)]=63},3172:(it,ie,f)=>{"use strict";const Z=f(5343),m=f(8461),R="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;ie.lW=p,ie.h2=50;const O=2147483647;function D(l){if(l>O)throw new RangeError('The value "'+l+'" is invalid for option "size"');const a=new Uint8Array(l);return Object.setPrototypeOf(a,p.prototype),a}function p(l,a,r){if("number"==typeof l){if("string"==typeof a)throw new TypeError('The "string" argument must be of type string. Received type number');return K(l)}return G(l,a,r)}function G(l,a,r){if("string"==typeof l)return function b(l,a){if(("string"!=typeof a||""===a)&&(a="utf8"),!p.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const r=0|he(l,a);let u=D(r);const d=u.write(l,a);return d!==r&&(u=u.slice(0,d)),u}(l,a);if(ArrayBuffer.isView(l))return function v(l){if(se(l,Uint8Array)){const a=new Uint8Array(l);return E(a.buffer,a.byteOffset,a.byteLength)}return A(l)}(l);if(null==l)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(se(l,ArrayBuffer)||l&&se(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(se(l,SharedArrayBuffer)||l&&se(l.buffer,SharedArrayBuffer)))return E(l,a,r);if("number"==typeof l)throw new TypeError('The "value" argument must not be of type number. Received type number');const u=l.valueOf&&l.valueOf();if(null!=u&&u!==l)return p.from(u,a,r);const d=function y(l){if(p.isBuffer(l)){const a=0|J(l.length),r=D(a);return 0===r.length||l.copy(r,0,0,a),r}return void 0!==l.length?"number"!=typeof l.length||qe(l.length)?D(0):A(l):"Buffer"===l.type&&Array.isArray(l.data)?A(l.data):void 0}(l);if(d)return d;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof l[Symbol.toPrimitive])return p.from(l[Symbol.toPrimitive]("string"),a,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}function I(l){if("number"!=typeof l)throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function K(l){return I(l),D(l<0?0:0|J(l))}function A(l){const a=l.length<0?0:0|J(l.length),r=D(a);for(let u=0;u<a;u+=1)r[u]=255&l[u];return r}function E(l,a,r){if(a<0||l.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<a+(r||0))throw new RangeError('"length" is outside of buffer bounds');let u;return u=void 0===a&&void 0===r?new Uint8Array(l):void 0===r?new Uint8Array(l,a):new Uint8Array(l,a,r),Object.setPrototypeOf(u,p.prototype),u}function J(l){if(l>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return 0|l}function he(l,a){if(p.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||se(l,ArrayBuffer))return l.byteLength;if("string"!=typeof l)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);const r=l.length,u=arguments.length>2&&!0===arguments[2];if(!u&&0===r)return 0;let d=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return pe(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ze(l).length;default:if(d)return u?-1:pe(l).length;a=(""+a).toLowerCase(),d=!0}}function z(l,a,r){let u=!1;if((void 0===a||a<0)&&(a=0),a>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(a>>>=0))return"";for(l||(l="utf8");;)switch(l){case"hex":return _e(this,a,r);case"utf8":case"utf-8":return je(this,a,r);case"ascii":return ut(this,a,r);case"latin1":case"binary":return ge(this,a,r);case"base64":return lt(this,a,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,a,r);default:if(u)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),u=!0}}function Ce(l,a,r){const u=l[a];l[a]=l[r],l[r]=u}function Ge(l,a,r,u,d){if(0===l.length)return-1;if("string"==typeof r?(u=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),qe(r=+r)&&(r=d?0:l.length-1),r<0&&(r=l.length+r),r>=l.length){if(d)return-1;r=l.length-1}else if(r<0){if(!d)return-1;r=0}if("string"==typeof a&&(a=p.from(a,u)),p.isBuffer(a))return 0===a.length?-1:Qe(l,a,r,u,d);if("number"==typeof a)return a&=255,"function"==typeof Uint8Array.prototype.indexOf?d?Uint8Array.prototype.indexOf.call(l,a,r):Uint8Array.prototype.lastIndexOf.call(l,a,r):Qe(l,[a],r,u,d);throw new TypeError("val must be string, number or Buffer")}function Qe(l,a,r,u,d){let P,h=1,g=l.length,S=a.length;if(void 0!==u&&("ucs2"===(u=String(u).toLowerCase())||"ucs-2"===u||"utf16le"===u||"utf-16le"===u)){if(l.length<2||a.length<2)return-1;h=2,g/=2,S/=2,r/=2}function B(H,q){return 1===h?H[q]:H.readUInt16BE(q*h)}if(d){let H=-1;for(P=r;P<g;P++)if(B(l,P)===B(a,-1===H?0:P-H)){if(-1===H&&(H=P),P-H+1===S)return H*h}else-1!==H&&(P-=P-H),H=-1}else for(r+S>g&&(r=g-S),P=r;P>=0;P--){let H=!0;for(let q=0;q<S;q++)if(B(l,P+q)!==B(a,q)){H=!1;break}if(H)return P}return-1}function nt(l,a,r,u){r=Number(r)||0;const d=l.length-r;u?(u=Number(u))>d&&(u=d):u=d;const h=a.length;let g;for(u>h/2&&(u=h/2),g=0;g<u;++g){const S=parseInt(a.substr(2*g,2),16);if(qe(S))return g;l[r+g]=S}return g}function ot(l,a,r,u){return Oe(pe(a,l.length-r),l,r,u)}function at(l,a,r,u){return Oe(function Se(l){const a=[];for(let r=0;r<l.length;++r)a.push(255&l.charCodeAt(r));return a}(a),l,r,u)}function rt(l,a,r,u){return Oe(ze(a),l,r,u)}function st(l,a,r,u){return Oe(function dt(l,a){let r,u,d;const h=[];for(let g=0;g<l.length&&!((a-=2)<0);++g)r=l.charCodeAt(g),u=r>>8,d=r%256,h.push(d),h.push(u);return h}(a,l.length-r),l,r,u)}function lt(l,a,r){return Z.fromByteArray(0===a&&r===l.length?l:l.slice(a,r))}function je(l,a,r){r=Math.min(l.length,r);const u=[];let d=a;for(;d<r;){const h=l[d];let g=null,S=h>239?4:h>223?3:h>191?2:1;if(d+S<=r){let B,P,H,q;switch(S){case 1:h<128&&(g=h);break;case 2:B=l[d+1],128==(192&B)&&(q=(31&h)<<6|63&B,q>127&&(g=q));break;case 3:B=l[d+1],P=l[d+2],128==(192&B)&&128==(192&P)&&(q=(15&h)<<12|(63&B)<<6|63&P,q>2047&&(q<55296||q>57343)&&(g=q));break;case 4:B=l[d+1],P=l[d+2],H=l[d+3],128==(192&B)&&128==(192&P)&&128==(192&H)&&(q=(15&h)<<18|(63&B)<<12|(63&P)<<6|63&H,q>65535&&q<1114112&&(g=q))}}null===g?(g=65533,S=1):g>65535&&(g-=65536,u.push(g>>>10&1023|55296),g=56320|1023&g),u.push(g),d+=S}return function ct(l){const a=l.length;if(a<=$e)return String.fromCharCode.apply(String,l);let r="",u=0;for(;u<a;)r+=String.fromCharCode.apply(String,l.slice(u,u+=$e));return r}(u)}!(p.TYPED_ARRAY_SUPPORT=function e(){try{const l=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(l,a),42===l.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(l,a,r){return G(l,a,r)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(l,a,r){return function T(l,a,r){return I(l),l<=0?D(l):void 0!==a?"string"==typeof r?D(l).fill(a,r):D(l).fill(a):D(l)}(l,a,r)},p.allocUnsafe=function(l){return K(l)},p.allocUnsafeSlow=function(l){return K(l)},p.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==p.prototype},p.compare=function(a,r){if(se(a,Uint8Array)&&(a=p.from(a,a.offset,a.byteLength)),se(r,Uint8Array)&&(r=p.from(r,r.offset,r.byteLength)),!p.isBuffer(a)||!p.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===r)return 0;let u=a.length,d=r.length;for(let h=0,g=Math.min(u,d);h<g;++h)if(a[h]!==r[h]){u=a[h],d=r[h];break}return u<d?-1:d<u?1:0},p.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(a,r){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return p.alloc(0);let u;if(void 0===r)for(r=0,u=0;u<a.length;++u)r+=a[u].length;const d=p.allocUnsafe(r);let h=0;for(u=0;u<a.length;++u){let g=a[u];if(se(g,Uint8Array))h+g.length>d.length?(p.isBuffer(g)||(g=p.from(g)),g.copy(d,h)):Uint8Array.prototype.set.call(d,g,h);else{if(!p.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(d,h)}h+=g.length}return d},p.byteLength=he,p.prototype._isBuffer=!0,p.prototype.swap16=function(){const a=this.length;if(a%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<a;r+=2)Ce(this,r,r+1);return this},p.prototype.swap32=function(){const a=this.length;if(a%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<a;r+=4)Ce(this,r,r+3),Ce(this,r+1,r+2);return this},p.prototype.swap64=function(){const a=this.length;if(a%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<a;r+=8)Ce(this,r,r+7),Ce(this,r+1,r+6),Ce(this,r+2,r+5),Ce(this,r+3,r+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){const a=this.length;return 0===a?"":0===arguments.length?je(this,0,a):z.apply(this,arguments)},p.prototype.equals=function(a){if(!p.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===p.compare(this,a)},p.prototype.inspect=function(){let a="";const r=ie.h2;return a=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(a+=" ... "),"<Buffer "+a+">"},R&&(p.prototype[R]=p.prototype.inspect),p.prototype.compare=function(a,r,u,d,h){if(se(a,Uint8Array)&&(a=p.from(a,a.offset,a.byteLength)),!p.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===r&&(r=0),void 0===u&&(u=a?a.length:0),void 0===d&&(d=0),void 0===h&&(h=this.length),r<0||u>a.length||d<0||h>this.length)throw new RangeError("out of range index");if(d>=h&&r>=u)return 0;if(d>=h)return-1;if(r>=u)return 1;if(this===a)return 0;let g=(h>>>=0)-(d>>>=0),S=(u>>>=0)-(r>>>=0);const B=Math.min(g,S),P=this.slice(d,h),H=a.slice(r,u);for(let q=0;q<B;++q)if(P[q]!==H[q]){g=P[q],S=H[q];break}return g<S?-1:S<g?1:0},p.prototype.includes=function(a,r,u){return-1!==this.indexOf(a,r,u)},p.prototype.indexOf=function(a,r,u){return Ge(this,a,r,u,!0)},p.prototype.lastIndexOf=function(a,r,u){return Ge(this,a,r,u,!1)},p.prototype.write=function(a,r,u,d){if(void 0===r)d="utf8",u=this.length,r=0;else if(void 0===u&&"string"==typeof r)d=r,u=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(u)?(u>>>=0,void 0===d&&(d="utf8")):(d=u,u=void 0)}const h=this.length-r;if((void 0===u||u>h)&&(u=h),a.length>0&&(u<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let g=!1;for(;;)switch(d){case"hex":return nt(this,a,r,u);case"utf8":case"utf-8":return ot(this,a,r,u);case"ascii":case"latin1":case"binary":return at(this,a,r,u);case"base64":return rt(this,a,r,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return st(this,a,r,u);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const $e=4096;function ut(l,a,r){let u="";r=Math.min(l.length,r);for(let d=a;d<r;++d)u+=String.fromCharCode(127&l[d]);return u}function ge(l,a,r){let u="";r=Math.min(l.length,r);for(let d=a;d<r;++d)u+=String.fromCharCode(l[d]);return u}function _e(l,a,r){const u=l.length;(!a||a<0)&&(a=0),(!r||r<0||r>u)&&(r=u);let d="";for(let h=a;h<r;++h)d+=mt[l[h]];return d}function ae(l,a,r){const u=l.slice(a,r);let d="";for(let h=0;h<u.length-1;h+=2)d+=String.fromCharCode(u[h]+256*u[h+1]);return d}function L(l,a,r){if(l%1!=0||l<0)throw new RangeError("offset is not uint");if(l+a>r)throw new RangeError("Trying to access beyond buffer length")}function N(l,a,r,u,d,h){if(!p.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>d||a<h)throw new RangeError('"value" argument is out of bounds');if(r+u>l.length)throw new RangeError("Index out of range")}function ne(l,a,r,u,d){me(a,u,d,l,r,7);let h=Number(a&BigInt(4294967295));l[r++]=h,h>>=8,l[r++]=h,h>>=8,l[r++]=h,h>>=8,l[r++]=h;let g=Number(a>>BigInt(32)&BigInt(4294967295));return l[r++]=g,g>>=8,l[r++]=g,g>>=8,l[r++]=g,g>>=8,l[r++]=g,r}function w(l,a,r,u,d){me(a,u,d,l,r,7);let h=Number(a&BigInt(4294967295));l[r+7]=h,h>>=8,l[r+6]=h,h>>=8,l[r+5]=h,h>>=8,l[r+4]=h;let g=Number(a>>BigInt(32)&BigInt(4294967295));return l[r+3]=g,g>>=8,l[r+2]=g,g>>=8,l[r+1]=g,g>>=8,l[r]=g,r+8}function ue(l,a,r,u,d,h){if(r+u>l.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function re(l,a,r,u,d){return a=+a,r>>>=0,d||ue(l,0,r,4),m.write(l,a,r,u,23,4),r+4}function k(l,a,r,u,d){return a=+a,r>>>=0,d||ue(l,0,r,8),m.write(l,a,r,u,52,8),r+8}p.prototype.slice=function(a,r){const u=this.length;(a=~~a)<0?(a+=u)<0&&(a=0):a>u&&(a=u),(r=void 0===r?u:~~r)<0?(r+=u)<0&&(r=0):r>u&&(r=u),r<a&&(r=a);const d=this.subarray(a,r);return Object.setPrototypeOf(d,p.prototype),d},p.prototype.readUintLE=p.prototype.readUIntLE=function(a,r,u){a>>>=0,r>>>=0,u||L(a,r,this.length);let d=this[a],h=1,g=0;for(;++g<r&&(h*=256);)d+=this[a+g]*h;return d},p.prototype.readUintBE=p.prototype.readUIntBE=function(a,r,u){a>>>=0,r>>>=0,u||L(a,r,this.length);let d=this[a+--r],h=1;for(;r>0&&(h*=256);)d+=this[a+--r]*h;return d},p.prototype.readUint8=p.prototype.readUInt8=function(a,r){return a>>>=0,r||L(a,1,this.length),this[a]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(a,r){return a>>>=0,r||L(a,2,this.length),this[a]|this[a+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(a,r){return a>>>=0,r||L(a,2,this.length),this[a]<<8|this[a+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(a,r){return a>>>=0,r||L(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(a,r){return a>>>=0,r||L(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},p.prototype.readBigUInt64LE=fe(function(a){V(a>>>=0,"offset");const r=this[a],u=this[a+7];(void 0===r||void 0===u)&&Q(a,this.length-8);const d=r+256*this[++a]+65536*this[++a]+this[++a]*2**24,h=this[++a]+256*this[++a]+65536*this[++a]+u*2**24;return BigInt(d)+(BigInt(h)<<BigInt(32))}),p.prototype.readBigUInt64BE=fe(function(a){V(a>>>=0,"offset");const r=this[a],u=this[a+7];(void 0===r||void 0===u)&&Q(a,this.length-8);const d=r*2**24+65536*this[++a]+256*this[++a]+this[++a],h=this[++a]*2**24+65536*this[++a]+256*this[++a]+u;return(BigInt(d)<<BigInt(32))+BigInt(h)}),p.prototype.readIntLE=function(a,r,u){a>>>=0,r>>>=0,u||L(a,r,this.length);let d=this[a],h=1,g=0;for(;++g<r&&(h*=256);)d+=this[a+g]*h;return h*=128,d>=h&&(d-=Math.pow(2,8*r)),d},p.prototype.readIntBE=function(a,r,u){a>>>=0,r>>>=0,u||L(a,r,this.length);let d=r,h=1,g=this[a+--d];for(;d>0&&(h*=256);)g+=this[a+--d]*h;return h*=128,g>=h&&(g-=Math.pow(2,8*r)),g},p.prototype.readInt8=function(a,r){return a>>>=0,r||L(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},p.prototype.readInt16LE=function(a,r){a>>>=0,r||L(a,2,this.length);const u=this[a]|this[a+1]<<8;return 32768&u?4294901760|u:u},p.prototype.readInt16BE=function(a,r){a>>>=0,r||L(a,2,this.length);const u=this[a+1]|this[a]<<8;return 32768&u?4294901760|u:u},p.prototype.readInt32LE=function(a,r){return a>>>=0,r||L(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},p.prototype.readInt32BE=function(a,r){return a>>>=0,r||L(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},p.prototype.readBigInt64LE=fe(function(a){V(a>>>=0,"offset");const r=this[a],u=this[a+7];return(void 0===r||void 0===u)&&Q(a,this.length-8),(BigInt(this[a+4]+256*this[a+5]+65536*this[a+6]+(u<<24))<<BigInt(32))+BigInt(r+256*this[++a]+65536*this[++a]+this[++a]*2**24)}),p.prototype.readBigInt64BE=fe(function(a){V(a>>>=0,"offset");const r=this[a],u=this[a+7];(void 0===r||void 0===u)&&Q(a,this.length-8);const d=(r<<24)+65536*this[++a]+256*this[++a]+this[++a];return(BigInt(d)<<BigInt(32))+BigInt(this[++a]*2**24+65536*this[++a]+256*this[++a]+u)}),p.prototype.readFloatLE=function(a,r){return a>>>=0,r||L(a,4,this.length),m.read(this,a,!0,23,4)},p.prototype.readFloatBE=function(a,r){return a>>>=0,r||L(a,4,this.length),m.read(this,a,!1,23,4)},p.prototype.readDoubleLE=function(a,r){return a>>>=0,r||L(a,8,this.length),m.read(this,a,!0,52,8)},p.prototype.readDoubleBE=function(a,r){return a>>>=0,r||L(a,8,this.length),m.read(this,a,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(a,r,u,d){a=+a,r>>>=0,u>>>=0,d||N(this,a,r,u,Math.pow(2,8*u)-1,0);let h=1,g=0;for(this[r]=255&a;++g<u&&(h*=256);)this[r+g]=a/h&255;return r+u},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(a,r,u,d){a=+a,r>>>=0,u>>>=0,d||N(this,a,r,u,Math.pow(2,8*u)-1,0);let h=u-1,g=1;for(this[r+h]=255&a;--h>=0&&(g*=256);)this[r+h]=a/g&255;return r+u},p.prototype.writeUint8=p.prototype.writeUInt8=function(a,r,u){return a=+a,r>>>=0,u||N(this,a,r,1,255,0),this[r]=255&a,r+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(a,r,u){return a=+a,r>>>=0,u||N(this,a,r,2,65535,0),this[r]=255&a,this[r+1]=a>>>8,r+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(a,r,u){return a=+a,r>>>=0,u||N(this,a,r,2,65535,0),this[r]=a>>>8,this[r+1]=255&a,r+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(a,r,u){return a=+a,r>>>=0,u||N(this,a,r,4,4294967295,0),this[r+3]=a>>>24,this[r+2]=a>>>16,this[r+1]=a>>>8,this[r]=255&a,r+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(a,r,u){return a=+a,r>>>=0,u||N(this,a,r,4,4294967295,0),this[r]=a>>>24,this[r+1]=a>>>16,this[r+2]=a>>>8,this[r+3]=255&a,r+4},p.prototype.writeBigUInt64LE=fe(function(a,r=0){return ne(this,a,r,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=fe(function(a,r=0){return w(this,a,r,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(a,r,u,d){if(a=+a,r>>>=0,!d){const B=Math.pow(2,8*u-1);N(this,a,r,u,B-1,-B)}let h=0,g=1,S=0;for(this[r]=255&a;++h<u&&(g*=256);)a<0&&0===S&&0!==this[r+h-1]&&(S=1),this[r+h]=(a/g>>0)-S&255;return r+u},p.prototype.writeIntBE=function(a,r,u,d){if(a=+a,r>>>=0,!d){const B=Math.pow(2,8*u-1);N(this,a,r,u,B-1,-B)}let h=u-1,g=1,S=0;for(this[r+h]=255&a;--h>=0&&(g*=256);)a<0&&0===S&&0!==this[r+h+1]&&(S=1),this[r+h]=(a/g>>0)-S&255;return r+u},p.prototype.writeInt8=function(a,r,u){return a=+a,r>>>=0,u||N(this,a,r,1,127,-128),a<0&&(a=255+a+1),this[r]=255&a,r+1},p.prototype.writeInt16LE=function(a,r,u){return a=+a,r>>>=0,u||N(this,a,r,2,32767,-32768),this[r]=255&a,this[r+1]=a>>>8,r+2},p.prototype.writeInt16BE=function(a,r,u){return a=+a,r>>>=0,u||N(this,a,r,2,32767,-32768),this[r]=a>>>8,this[r+1]=255&a,r+2},p.prototype.writeInt32LE=function(a,r,u){return a=+a,r>>>=0,u||N(this,a,r,4,2147483647,-2147483648),this[r]=255&a,this[r+1]=a>>>8,this[r+2]=a>>>16,this[r+3]=a>>>24,r+4},p.prototype.writeInt32BE=function(a,r,u){return a=+a,r>>>=0,u||N(this,a,r,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[r]=a>>>24,this[r+1]=a>>>16,this[r+2]=a>>>8,this[r+3]=255&a,r+4},p.prototype.writeBigInt64LE=fe(function(a,r=0){return ne(this,a,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=fe(function(a,r=0){return w(this,a,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(a,r,u){return re(this,a,r,!0,u)},p.prototype.writeFloatBE=function(a,r,u){return re(this,a,r,!1,u)},p.prototype.writeDoubleLE=function(a,r,u){return k(this,a,r,!0,u)},p.prototype.writeDoubleBE=function(a,r,u){return k(this,a,r,!1,u)},p.prototype.copy=function(a,r,u,d){if(!p.isBuffer(a))throw new TypeError("argument should be a Buffer");if(u||(u=0),!d&&0!==d&&(d=this.length),r>=a.length&&(r=a.length),r||(r=0),d>0&&d<u&&(d=u),d===u||0===a.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-r<d-u&&(d=a.length-r+u);const h=d-u;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(r,u,d):Uint8Array.prototype.set.call(a,this.subarray(u,d),r),h},p.prototype.fill=function(a,r,u,d){if("string"==typeof a){if("string"==typeof r?(d=r,r=0,u=this.length):"string"==typeof u&&(d=u,u=this.length),void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!p.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(1===a.length){const g=a.charCodeAt(0);("utf8"===d&&g<128||"latin1"===d)&&(a=g)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(r<0||this.length<r||this.length<u)throw new RangeError("Out of range index");if(u<=r)return this;let h;if(r>>>=0,u=void 0===u?this.length:u>>>0,a||(a=0),"number"==typeof a)for(h=r;h<u;++h)this[h]=a;else{const g=p.isBuffer(a)?a:p.from(a,d),S=g.length;if(0===S)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(h=0;h<u-r;++h)this[h+r]=g[h%S]}return this};const j={};function de(l,a,r){j[l]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,delete this.name}get code(){return l}set code(d){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:d,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}function Ee(l){let a="",r=l.length;const u="-"===l[0]?1:0;for(;r>=u+4;r-=3)a=`_${l.slice(r-3,r)}${a}`;return`${l.slice(0,r)}${a}`}function me(l,a,r,u,d,h){if(l>r||l<a){const g="bigint"==typeof a?"n":"";let S;throw S=h>3?0===a||a===BigInt(0)?`>= 0${g} and < 2${g} ** ${8*(h+1)}${g}`:`>= -(2${g} ** ${8*(h+1)-1}${g}) and < 2 ** ${8*(h+1)-1}${g}`:`>= ${a}${g} and <= ${r}${g}`,new j.ERR_OUT_OF_RANGE("value",S,l)}!function X(l,a,r){V(a,"offset"),(void 0===l[a]||void 0===l[a+r])&&Q(a,l.length-(r+1))}(u,d,h)}function V(l,a){if("number"!=typeof l)throw new j.ERR_INVALID_ARG_TYPE(a,"number",l)}function Q(l,a,r){throw Math.floor(l)!==l?(V(l,r),new j.ERR_OUT_OF_RANGE(r||"offset","an integer",l)):a<0?new j.ERR_BUFFER_OUT_OF_BOUNDS:new j.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${a}`,l)}de("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),de("ERR_INVALID_ARG_TYPE",function(l,a){return`The "${l}" argument must be of type number. Received type ${typeof a}`},TypeError),de("ERR_OUT_OF_RANGE",function(l,a,r){let u=`The value of "${l}" is out of range.`,d=r;return Number.isInteger(r)&&Math.abs(r)>2**32?d=Ee(String(r)):"bigint"==typeof r&&(d=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(d=Ee(d)),d+="n"),u+=` It must be ${a}. Received ${d}`,u},RangeError);const ee=/[^+/0-9A-Za-z-_]/g;function pe(l,a){let r;a=a||1/0;const u=l.length;let d=null;const h=[];for(let g=0;g<u;++g){if(r=l.charCodeAt(g),r>55295&&r<57344){if(!d){if(r>56319){(a-=3)>-1&&h.push(239,191,189);continue}if(g+1===u){(a-=3)>-1&&h.push(239,191,189);continue}d=r;continue}if(r<56320){(a-=3)>-1&&h.push(239,191,189),d=r;continue}r=65536+(d-55296<<10|r-56320)}else d&&(a-=3)>-1&&h.push(239,191,189);if(d=null,r<128){if((a-=1)<0)break;h.push(r)}else if(r<2048){if((a-=2)<0)break;h.push(r>>6|192,63&r|128)}else if(r<65536){if((a-=3)<0)break;h.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((a-=4)<0)break;h.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return h}function ze(l){return Z.toByteArray(function we(l){if((l=(l=l.split("=")[0]).trim().replace(ee,"")).length<2)return"";for(;l.length%4!=0;)l+="=";return l}(l))}function Oe(l,a,r,u){let d;for(d=0;d<u&&!(d+r>=a.length||d>=l.length);++d)a[d+r]=l[d];return d}function se(l,a){return l instanceof a||null!=l&&null!=l.constructor&&null!=l.constructor.name&&l.constructor.name===a.name}function qe(l){return l!=l}const mt=function(){const l="0123456789abcdef",a=new Array(256);for(let r=0;r<16;++r){const u=16*r;for(let d=0;d<16;++d)a[u+d]=l[r]+l[d]}return a}();function fe(l){return typeof BigInt>"u"?pt:l}function pt(){throw new Error("BigInt not supported")}},8461:(it,ie)=>{ie.read=function(f,_,Z,m,R){var O,e,D=8*R-m-1,p=(1<<D)-1,G=p>>1,I=-7,T=Z?R-1:0,K=Z?-1:1,b=f[_+T];for(T+=K,O=b&(1<<-I)-1,b>>=-I,I+=D;I>0;O=256*O+f[_+T],T+=K,I-=8);for(e=O&(1<<-I)-1,O>>=-I,I+=m;I>0;e=256*e+f[_+T],T+=K,I-=8);if(0===O)O=1-G;else{if(O===p)return e?NaN:1/0*(b?-1:1);e+=Math.pow(2,m),O-=G}return(b?-1:1)*e*Math.pow(2,O-m)},ie.write=function(f,_,Z,m,R,O){var e,D,p,G=8*O-R-1,I=(1<<G)-1,T=I>>1,K=23===R?Math.pow(2,-24)-Math.pow(2,-77):0,b=m?0:O-1,A=m?1:-1,v=_<0||0===_&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(D=isNaN(_)?1:0,e=I):(e=Math.floor(Math.log(_)/Math.LN2),_*(p=Math.pow(2,-e))<1&&(e--,p*=2),(_+=e+T>=1?K/p:K*Math.pow(2,1-T))*p>=2&&(e++,p/=2),e+T>=I?(D=0,e=I):e+T>=1?(D=(_*p-1)*Math.pow(2,R),e+=T):(D=_*Math.pow(2,T-1)*Math.pow(2,R),e=0));R>=8;f[Z+b]=255&D,b+=A,D/=256,R-=8);for(e=e<<R|D,G+=R;G>0;f[Z+b]=255&e,b+=A,e/=256,G-=8);f[Z+b-A]|=128*v}}}]);