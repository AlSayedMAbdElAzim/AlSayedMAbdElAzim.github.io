"use strict";(self.webpackChunkemporium=self.webpackChunkemporium||[]).push([[589],{8959:(z,L,n)=>{n.d(L,{W:()=>_});var m=n(5521),b=n(2340),C=n(4650),I=n(529),e=n(7465);class _{constructor(t,c){this.http=t,this.globalServ=c,this.baseUrl=(new m.P).api_Ip,this.secondPartUrl=(new m.P).api_constant,this.curCOMId=b.N.comid}getAllOwners(t,c){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/owner/allOwners/?M="+t+"&C="+c,this.globalServ.getAuthHeaders())}getOwnersPerParent(t,c,o){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/owner/ownersPerSpec/?M="+t+"&C="+c+"&getrelated=T&owner="+o,this.globalServ.getAuthHeaders())}getAllContracts(t,c){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/contract/allRentContracts/?M="+t+"&C="+c,this.globalServ.getAuthHeaders())}getOneContract(t){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/contract/"+t,this.globalServ.getAuthHeaders())}getOneContractDocs(t,c,o){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/contractdocs/ContractDocsPerSpec?M="+t+"&C="+c+"&rcontract="+o,this.globalServ.getAuthHeaders())}deleteContract(t){return this.http.delete(this.baseUrl+this.secondPartUrl+"contracts/contract/"+t,this.globalServ.getAuthHeaders())}addContractDocs(t,c){var o=this.baseUrl+this.secondPartUrl+"contracts/contractdocs/";const s=new FormData;return null!==c&&s.append("RCDPic",c),null!==t&&s.append("contract_KeyField",t.toString()),this.http.post(o,s,this.globalServ.getAuthHeaders_for_files())}addContract(t){var c=this.baseUrl+this.secondPartUrl+"contracts/contract/";const o=new FormData;return t.Related_RCOKeyField&&o.append("Related_RCOKeyField",t.Related_RCOKeyField.toString()),t.RCOCode&&o.append("RCOCode",t.RCOCode.toString()),t.RCOSubCode&&o.append("RCOSubCode",t.RCOSubCode.toString()),t.RCODate&&o.append("RCODate",t.RCODate.toString()),t.RCOStartDate&&o.append("RCOStartDate",t.RCOStartDate.toString()),t.RCOEndDate&&o.append("RCOEndDate",t.RCOEndDate.toString()),o.append("RCOContractStatus",t.RCOContractStatus),t.branch_KeyField&&o.append("branch_KeyField",t.branch_KeyField.toString()),t.build_KeyField&&o.append("build_KeyField",t.build_KeyField.toString()),t.unit_KeyField&&o.append("unit_KeyField",t.unit_KeyField.toString()),t.owner_KeyField&&o.append("owner_KeyField",t.owner_KeyField.toString()),t.owner_representative_KeyField&&o.append("owner_representative_KeyField",t.owner_representative_KeyField.toString()),t.customer_KeyField&&o.append("customer_KeyField",t.customer_KeyField.toString()),t.customer_representative_KeyField&&o.append("customer_representative_KeyField",t.customer_representative_KeyField.toString()),t.RCOContractValue&&o.append("RCOContractValue",t.RCOContractValue.toString()),t.RCOPayEveryMonthesNo&&o.append("RCOPayEveryMonthesNo",t.RCOPayEveryMonthesNo.toString()),t.RCOMonthValue&&o.append("RCOMonthValue",t.RCOMonthValue.toString()),t.RCOInsuranceValue&&o.append("RCOInsuranceValue",t.RCOInsuranceValue.toString()),t.RCOSeekingValue&&o.append("RCOSeekingValue",t.RCOSeekingValue.toString()),t.RCOMonthlyExpense&&o.append("RCOMonthlyExpense",t.RCOMonthlyExpense.toString()),t.RCOOtherValue&&o.append("RCOOtherValue",t.RCOOtherValue.toString()),t.RCOMonthlyElectricValue&&o.append("RCOMonthlyElectricValue",t.RCOMonthlyElectricValue.toString()),t.RCOMonthlyWaterValue&&o.append("RCOMonthlyWaterValue",t.RCOMonthlyWaterValue.toString()),t.RCOMonthlyGasValue&&o.append("RCOMonthlyGasValue",t.RCOMonthlyGasValue.toString()),o.append("RCOExpenseDesc",t.RCOExpenseDesc),o.append("RCOElectricCounterReading",t.RCOElectricCounterReading),o.append("RCOWaterCounterReading",t.RCOWaterCounterReading),o.append("RCOGasCounterReading",t.RCOGasCounterReading),o.append("RCOActive",t.RCOActive.toString()),o.append("RowDelete",t.RowDelete.toString()),this.http.post(c,o,this.globalServ.getAuthHeaders_for_files())}editContract(t){var o=this.baseUrl+this.secondPartUrl+"contracts/contract/"+t.id+"/";const s=new FormData;return t.Related_RCOKeyField&&s.append("Related_RCOKeyField",t.Related_RCOKeyField.toString()),t.RCOCode&&s.append("RCOCode",t.RCOCode.toString()),t.RCOSubCode&&s.append("RCOSubCode",t.RCOSubCode.toString()),t.RCODate&&s.append("RCODate",t.RCODate.toString()),t.RCOStartDate&&s.append("RCOStartDate",t.RCOStartDate.toString()),t.RCOEndDate&&s.append("RCOEndDate",t.RCOEndDate.toString()),s.append("RCOContractStatus",t.RCOContractStatus),t.branch_KeyField&&s.append("branch_KeyField",t.branch_KeyField.toString()),t.build_KeyField&&s.append("build_KeyField",t.build_KeyField.toString()),t.unit_KeyField&&s.append("unit_KeyField",t.unit_KeyField.toString()),t.owner_KeyField&&s.append("owner_KeyField",t.owner_KeyField.toString()),t.owner_representative_KeyField&&s.append("owner_representative_KeyField",t.owner_representative_KeyField.toString()),t.customer_KeyField&&s.append("customer_KeyField",t.customer_KeyField.toString()),t.customer_representative_KeyField&&s.append("customer_representative_KeyField",t.customer_representative_KeyField.toString()),t.RCOContractValue&&s.append("RCOContractValue",t.RCOContractValue.toString()),t.RCOPayEveryMonthesNo&&s.append("RCOPayEveryMonthesNo",t.RCOPayEveryMonthesNo.toString()),t.RCOMonthValue&&s.append("RCOMonthValue",t.RCOMonthValue.toString()),t.RCOInsuranceValue&&s.append("RCOInsuranceValue",t.RCOInsuranceValue.toString()),t.RCOSeekingValue&&s.append("RCOSeekingValue",t.RCOSeekingValue.toString()),t.RCOMonthlyExpense&&s.append("RCOMonthlyExpense",t.RCOMonthlyExpense.toString()),t.RCOOtherValue&&s.append("RCOOtherValue",t.RCOOtherValue.toString()),t.RCOMonthlyElectricValue&&s.append("RCOMonthlyElectricValue",t.RCOMonthlyElectricValue.toString()),t.RCOMonthlyWaterValue&&s.append("RCOMonthlyWaterValue",t.RCOMonthlyWaterValue.toString()),t.RCOMonthlyGasValue&&s.append("RCOMonthlyGasValue",t.RCOMonthlyGasValue.toString()),s.append("RCOExpenseDesc",t.RCOExpenseDesc),s.append("RCOElectricCounterReading",t.RCOElectricCounterReading),s.append("RCOWaterCounterReading",t.RCOWaterCounterReading),s.append("RCOGasCounterReading",t.RCOGasCounterReading),s.append("RCOActive",t.RCOActive.toString()),s.append("RowDelete",t.RowDelete.toString()),this.http.put(o,s,this.globalServ.getAuthHeaders_for_files())}getInstallmentsPerContract(t,c,o){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/installment/InstallmentPerSpec/?M="+t+"&C="+c+"&contract="+o,this.globalServ.getAuthHeaders())}getInstallmentsPerCustomer_Payed(t,c,o,s){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/installment/InstallmentPerSpec/?M="+t+"&C="+c+"&payed="+s+"&customer="+o,this.globalServ.getAuthHeaders())}getInstallmentsPerCustomer_All(t,c,o){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/installment/InstallmentPerSpec/?M="+t+"&C="+c+"&customer="+o,this.globalServ.getAuthHeaders())}getOneInstallment(t){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/installment/"+t,this.globalServ.getAuthHeaders())}deleteInstallment(t){return this.http.delete(this.baseUrl+this.secondPartUrl+"contracts/installment/"+t,this.globalServ.getAuthHeaders())}addInstallments(t){return this.http.post(this.baseUrl+this.secondPartUrl+"contracts/installment/",t,this.globalServ.getAuthHeaders_for_files())}addOneInstallment(t){var c=this.baseUrl+this.secondPartUrl+"contracts/installment/";const o=new FormData;return t.contract_KeyField&&o.append("contract_KeyField",t.contract_KeyField.toString()),t.branch_KeyField&&o.append("branch_KeyField",t.branch_KeyField.toString()),t.owner_KeyField&&o.append("owner_KeyField",t.owner_KeyField.toString()),t.build_KeyField&&o.append("build_KeyField",t.build_KeyField.toString()),t.unit_KeyField&&o.append("unit_KeyField",t.unit_KeyField.toString()),t.customer_KeyField&&o.append("customer_KeyField",t.customer_KeyField.toString()),t.INSCode&&o.append("INSCode",t.INSCode.toString()),t.INSValue&&o.append("INSValue",t.INSValue.toString()),t.INSPayedValue&&o.append("INSPayedValue",t.INSPayedValue.toString()),o.append("INSContractTyps",t.INSContractTyps),o.append("INSStatus",t.INSStatus),o.append("INSPersonPayName",t.INSPersonPayName),o.append("INSNotes",t.INSNotes),o.append("RowDelete",t.RowDelete.toString()),o.append("RowConfirm",t.RowConfirm.toString()),o.append("RowStatus",t.RowStatus.toString()),this.http.post(c,o,this.globalServ.getAuthHeaders_for_files())}editInstallments(t){return this.http.patch(this.baseUrl+this.secondPartUrl+"contracts/installment/"+t.id+"/",t,this.globalServ.getAuthHeaders_for_files())}editOneInstallment(t){var o=this.baseUrl+this.secondPartUrl+"contracts/installment/"+t.id+"/";console.log("---editOneInstallment URL:: "+o);const s=new FormData;return t.INSDueDate&&s.append("INSDueDate",t.INSDueDate.toString()),t.INSPayDate&&s.append("INSPayDate",t.INSPayDate.toString()),t.contract_KeyField&&s.append("contract_KeyField",t.contract_KeyField.toString()),t.branch_KeyField&&s.append("branch_KeyField",t.branch_KeyField.toString()),t.owner_KeyField&&s.append("owner_KeyField",t.owner_KeyField.toString()),t.build_KeyField&&s.append("build_KeyField",t.build_KeyField.toString()),t.unit_KeyField&&s.append("unit_KeyField",t.unit_KeyField.toString()),t.customer_KeyField&&s.append("customer_KeyField",t.customer_KeyField.toString()),t.INSCode&&s.append("INSCode",t.INSCode.toString()),t.INSValue&&s.append("INSValue",t.INSValue.toString()),t.INSPayedValue&&s.append("INSPayedValue",t.INSPayedValue.toString()),s.append("INSContractTyps",t.INSContractTyps),s.append("INSStatus",t.INSStatus),s.append("INSPersonPayName",t.INSPersonPayName),s.append("INSNotes",t.INSNotes),s.append("RowDelete",t.RowDelete.toString()),s.append("RowConfirm",t.RowConfirm.toString()),s.append("RowStatus",t.RowStatus.toString()),this.http.put(o,s,this.globalServ.getAuthHeaders_for_files())}updateCustomerUnitFromContract(t,c,o){return this.http.patch(this.baseUrl+this.secondPartUrl+"contracts/customer/"+t+"/",{current_building:c,current_unit:o},this.globalServ.getAuthHeaders_for_files())}addStatement(t){return this.http.post(this.baseUrl+this.secondPartUrl+"contracts/statements/",t,this.globalServ.getAuthHeaders_for_files())}getStatementsIDPerSubjectID(t,c,o,s){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/statements/StatementsPerSpec?M="+t+"&C="+c+"&subject="+o+"&subjectid="+s,this.globalServ.getAuthHeaders())}deleteStatementForSubjectID(t,c,o,s){return this.getStatementsIDPerSubjectID(t,c,o,s).subscribe(D=>{this.stateID=D[0].id}),this.http.delete(this.baseUrl+this.secondPartUrl+"contracts/statements/"+this.stateID,this.globalServ.getAuthHeaders())}deleteStatement(t){return this.http.delete(this.baseUrl+this.secondPartUrl+"contracts/statements/"+t,this.globalServ.getAuthHeaders())}}_.\u0275fac=function(t){return new(t||_)(C.LFG(I.eN),C.LFG(e.U))},_.\u0275prov=C.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})},1589:(z,L,n)=>{n.r(L),n.d(L,{PaymentsModule:()=>Z,routes:()=>$});var m=n(6895),b=n(2340),C=n(5783),I=n(5521),e=n(4650),_=n(529),F=n(7465);class t{constructor(a,i){this.http=a,this.globalServ=i,this.baseUrl=(new I.P).api_Ip,this.secondPartUrl=(new I.P).api_constant,this.curCOMId=b.N.comid}getAllReceivableDocuments(a,i){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=R&M="+a+"&C="+i,this.globalServ.getAuthHeaders())}getAllPayableDocuments(a,i){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/PayDocsPerSpec/?type=P&M="+a+"&C="+i,this.globalServ.getAuthHeaders())}deleteDocument(a){return this.http.delete(this.baseUrl+this.secondPartUrl+"contracts/paydoc/"+a,this.globalServ.getAuthHeaders())}getOneDocs(a){return this.http.get(this.baseUrl+this.secondPartUrl+"contracts/paydoc/"+a,this.globalServ.getAuthHeaders())}addDoc(a){return this.http.post(this.baseUrl+this.secondPartUrl+"contracts/paydoc/",a,this.globalServ.getAuthHeaders_for_files())}editDoc(a){return this.http.patch(this.baseUrl+this.secondPartUrl+"contracts/paydoc/"+a.id+"/",a,this.globalServ.getAuthHeaders_for_files())}}t.\u0275fac=function(a){return new(a||t)(e.LFG(_.eN),e.LFG(F.U))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"});var c=n(2887),o=n(1182),s=n(5412),D=n(9132),M=n(5298),q=n(8959),S=n(3081),w=n(7009),O=n(4333),f=n(1576),P=n(4859),E=n(811),v=n(3546),H=n(7392),Y=n(4850),J=n(1572),B=n(266);const ee=function(l){return["/payments/receivable-add/",l]};function te(l,a){if(1&l){const i=e.EpF();e.TgZ(0,"div",17)(1,"div",18),e._uU(2),e.qZA(),e.TgZ(3,"div",18),e._uU(4),e.qZA(),e.TgZ(5,"div",18),e._uU(6),e.qZA(),e.TgZ(7,"div",18),e._uU(8),e.qZA(),e.TgZ(9,"div",18),e._uU(10),e.qZA(),e.TgZ(11,"div",18),e._uU(12),e.qZA(),e.TgZ(13,"div",18),e._uU(14),e.qZA(),e.TgZ(15,"div",18)(16,"div",19)(17,"a",20),e.ALo(18,"translate"),e.TgZ(19,"mat-icon"),e._uU(20,"edit"),e.qZA()(),e.TgZ(21,"button",21),e.NdJ("click",function(){const u=e.CHM(i).$implicit,h=e.oxw();return e.KtG(h.removeDocument(u.id))}),e.ALo(22,"translate"),e.TgZ(23,"mat-icon"),e._uU(24,"delete"),e.qZA()()()()()}if(2&l){const i=a.$implicit;e.xp6(2),e.Oqu(i.branch_KeyField),e.xp6(2),e.Oqu(i.build_Name),e.xp6(2),e.Oqu(i.unit_UnitNumber),e.xp6(2),e.hij(" ",i.customer_Name," "),e.xp6(2),e.hij(" ",i.PDODocDate," "),e.xp6(2),e.hij(" ",i.PDOValue," "),e.xp6(2),e.hij(" ",i.PDOPrintedCode," "),e.xp6(3),e.s9C("matTooltip",e.lcZ(18,10,"BTN.EDIT")),e.Q6J("routerLink",e.VKq(14,ee,i.id)),e.xp6(4),e.s9C("matTooltip",e.lcZ(22,12,"BTN.REMOVE"))}}function ae(l,a){if(1&l){const i=e.EpF();e.TgZ(0,"div",22)(1,"div",23)(2,"mat-card",24)(3,"pagination-controls",25),e.NdJ("pageChange",function(d){e.CHM(i);const u=e.oxw();return e.KtG(u.onPageChanged(d))}),e.qZA()()()()}}function ie(l,a){1&l&&(e.TgZ(0,"div",26),e._UZ(1,"mat-spinner",27),e.qZA())}const oe=function(l,a){return{itemsPerPage:l,currentPage:a}};class U{constructor(a,i,r,d,u,h,g,y,N){this.appSettings=a,this.dialog=i,this.paymentService=r,this.router=d,this.global=u,this.localStore=h,this.contractService=g,this.translateService=y,this.snackBar=N,this.curCOMId=b.N.comid,this.account=new C.n,this.count=4,this.settings=this.appSettings.settings}ngOnInit(){this.userSUb=this.global.user.subscribe(a=>{this.account=a}),this.localStore.getItem("token")&&this.localStore.getItem("account")?(this.global.me=JSON.parse(this.localStore.getItem("account")),this.prepareMsgLanguage(),this.getDocuments()):this.router.navigate(["/sign-in"])}getDocuments(){this.documentsAll=null,this.paymentService.getAllReceivableDocuments(this.curCOMId,this.account.periorty).subscribe(a=>this.documentsAll=a)}removeDocument(a){this.dialog.open(c.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(r=>{r&&(this.paymentService.getOneDocs(a).subscribe(d=>{null!=d.installment_KeyField&&(this.oneDocValue=d.PDOValue,this.contractService.getOneInstallment(d.installment_KeyField).subscribe(u=>{this.curInstallmentValue=u.INSValue,this.curInstallmentPayedValue=u.INSPayedValue,null==this.curInstallmentValue&&(this.curInstallmentValue=0),null==this.curInstallmentPayedValue&&(this.curInstallmentPayedValue=0),this.manageInstallmetPayedValue(d.installment_KeyField,this.curInstallmentValue,this.curInstallmentPayedValue,this.oneDocValue)}))}),this.paymentService.deleteDocument(a).subscribe(d=>this.getDocuments()))})}manageInstallmetPayedValue(a,i,r,d){null==r&&(r=0),null==d&&(d=0),null==i&&(i=0);let u=+r-+d;u<=0&&(u=0),this.insStatus=0==u?"N":"T";let h={id:a,INSStatus:this.insStatus,INSPayedValue:u};console.log("===installData:: "+h),this.contractService.editInstallments(h).subscribe(g=>{console.log("==installment after Update:: "+g)},g=>{console.log(g)})}onPageChanged(a){this.page=a,this.getDocuments(),window.scrollTo(0,0)}gotoNewDocument(){this.router.navigate(["/payments/receivable-add/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(a=>{this.errorRetrieveMsg=a}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(a=>{this.askToDeletedMsg=a}),this.translateService.get("MESSAGE.DELETED").subscribe(a=>{this.deletedMsg=a}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(a=>{this.deletedTitleMsg=a})}}U.\u0275fac=function(a){return new(a||U)(e.Y36(o.d),e.Y36(s.uw),e.Y36(t),e.Y36(D.F0),e.Y36(F.U),e.Y36(M.C),e.Y36(q.W),e.Y36(S.sK),e.Y36(w.ux))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-receivable-doc-list"]],features:[e._Bn([t])],decls:58,vars:33,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(a,i){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3)(4,"mat-button-toggle",4),e.NdJ("click",function(){return i.gotoNewDocument()}),e.TgZ(5,"mat-icon"),e._uU(6,"note_add"),e.qZA()()()(),e.TgZ(7,"div",5)(8,"mat-button-toggle-group",6,7)(10,"mat-button-toggle",8)(11,"mat-icon"),e._uU(12,"view_list"),e.qZA()(),e.TgZ(13,"mat-button-toggle",9)(14,"mat-icon"),e._uU(15,"view_module"),e.qZA()()()()(),e._UZ(16,"mat-divider"),e.TgZ(17,"mat-card")(18,"div",10)(19,"h2"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e._UZ(22,"mat-divider"),e.TgZ(23,"div",11)(24,"div",12)(25,"div",13)(26,"h2"),e._uU(27),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",13)(30,"h2"),e._uU(31),e.ALo(32,"translate"),e.qZA()(),e.TgZ(33,"div",13)(34,"h2"),e._uU(35),e.ALo(36,"translate"),e.qZA()(),e.TgZ(37,"div",13)(38,"h2"),e._uU(39),e.ALo(40,"translate"),e.qZA()(),e.TgZ(41,"div",13)(42,"h2"),e._uU(43),e.ALo(44,"translate"),e.qZA()(),e.TgZ(45,"div",13)(46,"h2"),e._uU(47),e.ALo(48,"translate"),e.qZA()(),e.TgZ(49,"div",13)(50,"h2"),e._uU(51),e.ALo(52,"translate"),e.qZA()(),e._UZ(53,"div",13),e.qZA(),e.YNc(54,te,25,16,"div",14),e.ALo(55,"paginate"),e.qZA()(),e.YNc(56,ae,4,0,"div",15),e.YNc(57,ie,2,0,"div",16)),2&a&&(e.xp6(20),e.Oqu(e.lcZ(21,11,"HTML.ReceivableDoc_List")),e.xp6(7),e.hij(" ",e.lcZ(28,13,"HTML.BRANCH")," "),e.xp6(4),e.hij(" ",e.lcZ(32,15,"HTML.BUILDING")," "),e.xp6(4),e.hij(" ",e.lcZ(36,17,"HTML.UnitNumber")," "),e.xp6(4),e.hij(" ",e.lcZ(40,19,"HTML.TENANT")," "),e.xp6(4),e.hij(" ",e.lcZ(44,21,"HTML.DocDate")," "),e.xp6(4),e.hij(" ",e.lcZ(48,23,"HTML.DocValue")," "),e.xp6(4),e.hij(" ",e.lcZ(52,25,"HTML.DocPrintedNo")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(55,27,i.documentsAll,e.WLB(30,oe,i.count,i.page))),e.xp6(2),e.Q6J("ngIf",i.documentsAll),e.xp6(1),e.Q6J("ngIf",!i.documentsAll))},dependencies:[O.LS,m.sg,m.O5,D.rH,f.xw,f.Wh,f.yH,P.Tq,P.nh,E.A9,E.Yi,v.a8,H.Hw,Y.d,J.Ou,B.gM,O._s,S.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});class G{}var j=n(6381),W=n(5726),p=n(4006),k=n(3238),x=n(9602),Q=n(4144),T=n(9549),X=n(4385);function se(l,a){1&l&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&l&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.ADD")))}function le(l,a){1&l&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&l&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function ne(l,a){if(1&l&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&l){const i=a.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CUSName," ")}}class R{constructor(a,i,r,d,u,h,g,y,N,V,fe){this.activatedRoute=a,this.localStore=i,this._companyService=r,this.global=d,this.router=u,this.snackBar=h,this.docsService=g,this.tenantsService=y,this.contractService=N,this.translateService=V,this.fb=fe,this.curCOMId=b.N.comid,this.account=new C.n,this.curDocValue=0,this.curDocPayedValue=0,this.AllNotPayedInstallments=[],this.AllTenants=[]}ngOnInit(){this.userSUb=this.global.user.subscribe(a=>{this.account=a}),this.localStore.getItem("token")&&this.localStore.getItem("account")?(this.global.me=JSON.parse(this.localStore.getItem("account")),this.getTenants(),this.sub=this.activatedRoute.params.subscribe(a=>{a.id?(this.id=+a.id,this.getDocById(this.id)):this.payDocForDisplay=new G,this.docData_Form=this.fb.group({id:null,PDOCode:null,PDOValue:{value:null,disabled:this.id},PDODocDate:null,PDODocType:"R",PDODocClassType:"A",PDOPrintedCode:null,PDODocSecondPerson:null,PDONotes:null,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,installment_KeyField:null,customer_KeyField:null})})):this.router.navigate(["/sign-in"])}getDocById(a){this.docsService.getOneDocs(a).subscribe(i=>{this.fillForm(i),this.payDocForDisplay=i})}fillForm(a){null!=a.PDODocDate&&(this.s_docDate=a.PDODocDate),this.docData_Form.patchValue({id:a.id,contract_KeyField:a.contract_KeyField,branch_KeyField:a.branch_KeyField,owner_KeyField:a.owner_KeyField,build_KeyField:a.build_KeyField,unit_KeyField:a.unit_KeyField,installment_KeyField:a.installment_KeyField,customer_KeyField:a.customer_KeyField,PDOCode:a.PDOCode,PDOValue:a.PDOValue,PDODocType:a.PDODocType,PDODocDate:a.PDODocDate,PDODocClassType:a.PDODocClassType,PDOPrintedCode:a.PDOPrintedCode,PDODocSecondPerson:a.PDODocSecondPerson,PDONotes:a.PDONotes})}readCustumer(a){this.tenantsService.getOneCustomer(a.value).subscribe(i=>{console.log("==tenantName:: "+i.CUSName),this.docData_Form.patchValue({PDODocSecondPerson:i.CUSName})}),this.getCustomerInstallmentsNotPayed(this.curCOMId,this.account.periorty,a.value)}getCustomerInstallmentsNotPayed(a,i,r){this.contractService.getInstallmentsPerCustomer_Payed(a,i,r,"F").subscribe(d=>{this.AllNotPayedInstallments=d,this.curOwnerId=d[0].owner_KeyField,this.curContract=d[0].contract_KeyField,this.curBranch=d[0].branch_KeyField,this.curBuild=d[0].build_KeyField,this.curUnit=d[0].unit_KeyField,this.curInstallment=d[0].id,this.curDocValue=d[0].INSValue,this.curDocPayedValue=d[0].INSPayedValue,null==this.curDocValue&&(this.curDocValue=0),null==this.curDocPayedValue&&(this.curDocPayedValue=0),this.docData_Form.patchValue({contract_KeyField:this.curContract,branch_KeyField:this.curBranch,build_KeyField:this.curBuild,unit_KeyField:this.curUnit,owner_KeyField:this.curOwnerId,installment_KeyField:this.curInstallment,PDOValue:this.curDocValue-this.curDocPayedValue})},d=>{this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0627\u0644\u0623\u0642\u0633\u0627\u0637","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}getTenants(){this.AllTenants=null,this.tenantsService.getCustomers(this.curCOMId,this.account.periorty).subscribe(a=>this.AllTenants=a)}mappingFormValue_ToPayDocClass(){const a=new m.uU("en-GB").transform(this.docData_Form.value.PDODocDate,"dd/MM/yyyy");this.payDocForDisplay.id=this.docData_Form.value.id,this.payDocForDisplay.contract_KeyField=this.docData_Form.value.contract_KeyField,this.payDocForDisplay.branch_KeyField=this.docData_Form.value.branch_KeyField,this.payDocForDisplay.owner_KeyField=this.docData_Form.value.owner_KeyField,this.payDocForDisplay.build_KeyField=this.docData_Form.value.build_KeyField,this.payDocForDisplay.unit_KeyField=this.docData_Form.value.unit_KeyField,this.payDocForDisplay.installment_KeyField=this.docData_Form.value.installment_KeyField,this.payDocForDisplay.customer_KeyField=this.docData_Form.value.customer_KeyField,null!=this.docData_Form.value.PDODocDate&&(this.payDocForDisplay.PDODocDate=a),this.payDocForDisplay.PDOCode=this.docData_Form.value.PDOCode,this.payDocForDisplay.PDOValue=this.docData_Form.value.PDOValue,this.payDocForDisplay.PDODocType=this.docData_Form.value.PDODocType,this.payDocForDisplay.PDODocClassType=this.docData_Form.value.PDODocClassType,this.payDocForDisplay.PDOPrintedCode=this.docData_Form.value.PDOPrintedCode,this.payDocForDisplay.PDODocSecondPerson=this.docData_Form.value.PDODocSecondPerson,this.payDocForDisplay.PDONotes=this.docData_Form.value.PDONotes}manageInstallmetPayedValue(a,i,r,d,u){null==r&&(r=0),null==d&&(d=0),null==i&&(i=0);let h=+r+ +d;this.insStatus=h<i?"T":"P";let g={id:a,INSStatus:this.insStatus,INSPayedValue:h,INSPayDate:u,INSPersonPayName:this.payDocForDisplay.PDODocSecondPerson};console.log("===installData:: "+g),this.contractService.editInstallments(g).subscribe(y=>{console.log("==installment after Update:: "+y)},y=>{console.log(y)})}saveEditDocData(a){const i=new m.uU("en-GB").transform(this.docData_Form.value.PDODocDate,"dd/MM/yyyy");this.mappingFormValue_ToPayDocClass(),a?this.docsService.editDoc(this.payDocForDisplay).subscribe(r=>{this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["payments/receivable-list"])},r=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):this.docsService.addDoc(this.payDocForDisplay).subscribe(r=>{console.log("----Will Call manageInstallmetPayedValue"),this.manageInstallmetPayedValue(this.curInstallment,this.curDocValue,this.curDocPayedValue,this.payDocForDisplay.PDOValue,i),this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["payments/receivable-list"])},r=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(a=>{this.errorRetrieveMsg=a}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(a=>{this.askToDeletedMsg=a}),this.translateService.get("MESSAGE.DELETED").subscribe(a=>{this.deletedMsg=a})}}R.\u0275fac=function(a){return new(a||R)(e.Y36(D.gz),e.Y36(M.C),e.Y36(j.J),e.Y36(F.U),e.Y36(D.F0),e.Y36(w.ux),e.Y36(t),e.Y36(W.v),e.Y36(q.W),e.Y36(S.sK),e.Y36(p.qu))},R.\u0275cmp=e.Xpm({type:R,selectors:[["app-receivable-doc-dialog"]],decls:68,vars:38,consts:[[1,"p-2"],[4,"ngIf"],[1,"pt-3"],["autocomplete","off","fxLayout","row wrap",3,"formGroup","ngSubmit"],["fxFlex","100","fxFlex.gt-sm","40",1,"px-2"],["width","400","height","300","id","campanyLogo",3,"src"],["fxFlex","100","fxFlex.gt-sm","60",1,"px-2"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","25",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","PDOCode"],["fxFlex","100","fxFlex.gt-sm","75",1,"px-1"],["formControlName","customer_KeyField","id","oneCustomOpSel","required","",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","PDODocDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["pdoDocDate",""],["fxFlex","100","fxFlex.gt-sm","50",1,"px-1"],["matInput","","formControlName","PDOValue","required",""],["matInput","","formControlName","PDOPrintedCode"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","PDODocSecondPerson","required",""],["fxFlex","100",1,"px-1"],["matInput","","formControlName","PDONotes","rows","3"],["fxFlex","100",1,"mt-2","text-center","w-100"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(a,i){if(1&a&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"h1"),e.YNc(5,se,3,3,"span",1),e.YNc(6,le,3,3,"span",1),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"mat-card-content",2)(10,"form",3),e.NdJ("ngSubmit",function(){return i.saveEditDocData(i.payDocForDisplay.id)}),e.TgZ(11,"div",4),e._UZ(12,"img",5),e.qZA(),e.TgZ(13,"div",6)(14,"div",7)(15,"div",8)(16,"mat-form-field",9)(17,"mat-label"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"input",10),e.qZA()(),e.TgZ(21,"div",11)(22,"mat-form-field",9)(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"mat-select",12),e.NdJ("selectionChange",function(d){return i.readCustumer(d)}),e.ALo(27,"translate"),e.TgZ(28,"mat-option",13),e._uU(29,"-"),e.qZA(),e.YNc(30,ne,2,2,"mat-option",14),e.qZA()()(),e.TgZ(31,"div",8)(32,"mat-form-field",9)(33,"mat-label"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e._UZ(36,"input",15)(37,"mat-datepicker-toggle",16)(38,"mat-datepicker",null,17),e.qZA()(),e.TgZ(40,"div",18)(41,"mat-form-field",9)(42,"mat-label"),e._uU(43),e.ALo(44,"translate"),e.qZA(),e._UZ(45,"input",19),e.qZA()(),e.TgZ(46,"div",8)(47,"mat-form-field",9)(48,"mat-label"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e._UZ(51,"input",20),e.qZA()(),e.TgZ(52,"div",21)(53,"mat-form-field",9)(54,"mat-label"),e._uU(55),e.ALo(56,"translate"),e.qZA(),e._UZ(57,"input",22),e.qZA()(),e.TgZ(58,"div",23)(59,"mat-form-field",9)(60,"mat-label"),e._uU(61),e.ALo(62,"translate"),e.qZA(),e._UZ(63,"textarea",24),e.qZA()(),e.TgZ(64,"div",25)(65,"button",26),e._uU(66),e.ALo(67,"translate"),e.qZA()()()()()()()()),2&a){const r=e.MAs(39);e.xp6(5),e.Q6J("ngIf",!i.payDocForDisplay.id),e.xp6(1),e.Q6J("ngIf",i.payDocForDisplay.id),e.xp6(1),e.hij(" ",e.lcZ(8,18,"HTML.ReceivableDoc"),""),e.xp6(3),e.Q6J("formGroup",i.docData_Form),e.xp6(2),e.Q6J("src","assets/images/paymentDocs/receivable.png",e.LSH),e.xp6(6),e.Oqu(e.lcZ(19,20,"HTML.CODE")),e.xp6(6),e.hij(" ",e.lcZ(25,22,"HTML.TENANT"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(27,24,"HTML.TENANT")),e.xp6(4),e.Q6J("ngForOf",i.AllTenants),e.xp6(4),e.Oqu(e.lcZ(35,26,"HTML.DocDate")),e.xp6(2),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(6),e.Oqu(e.lcZ(44,28,"HTML.DocValue")),e.xp6(6),e.Oqu(e.lcZ(50,30,"HTML.DocPrintedNo")),e.xp6(6),e.Oqu(e.lcZ(56,32,"HTML.DocSecondPart_ReceivableDoc")),e.xp6(6),e.Oqu(e.lcZ(62,34,"HTML.Notes")),e.xp6(4),e.Q6J("disabled",!i.docData_Form.valid),e.xp6(1),e.Oqu(e.lcZ(67,36,"BTN.SAVE"))}},dependencies:[p._Y,p.Fj,p.JJ,p.JL,p.Q7,m.sg,m.O5,p.sg,p.u,f.xw,f.yH,k.ey,P.lW,v.a8,v.dn,v.dk,v.n5,x.Mq,x.hl,x.nW,Q.Nt,T.KE,T.hX,T.R9,X.gD,S.X$]});var re=n(589),de=n(9045);const ce=function(l){return["/payments/payable-add/",l]};function ue(l,a){if(1&l){const i=e.EpF();e.TgZ(0,"div",17)(1,"div",18),e._uU(2),e.qZA(),e.TgZ(3,"div",18),e._uU(4),e.qZA(),e.TgZ(5,"div",18),e._uU(6),e.qZA(),e.TgZ(7,"div",18),e._uU(8),e.qZA(),e.TgZ(9,"div",18)(10,"div",19)(11,"a",20),e.ALo(12,"translate"),e.TgZ(13,"mat-icon"),e._uU(14,"edit"),e.qZA()(),e.TgZ(15,"button",21),e.NdJ("click",function(){const u=e.CHM(i).$implicit,h=e.oxw();return e.KtG(h.removeDocument(u.id))}),e.ALo(16,"translate"),e.TgZ(17,"mat-icon"),e._uU(18,"delete"),e.qZA()()()()()}if(2&l){const i=a.$implicit;e.xp6(2),e.hij(" ",i.customer_Name," "),e.xp6(2),e.hij(" ",i.PDODocDate," "),e.xp6(2),e.hij(" ",i.PDOValue," "),e.xp6(2),e.hij(" ",i.PDOPrintedCode," "),e.xp6(3),e.s9C("matTooltip",e.lcZ(12,7,"BTN.EDIT")),e.Q6J("routerLink",e.VKq(11,ce,i.id)),e.xp6(4),e.s9C("matTooltip",e.lcZ(16,9,"BTN.REMOVE"))}}function pe(l,a){if(1&l){const i=e.EpF();e.TgZ(0,"div",22)(1,"div",23)(2,"mat-card",24)(3,"pagination-controls",25),e.NdJ("pageChange",function(d){e.CHM(i);const u=e.oxw();return e.KtG(u.onPageChanged(d))}),e.qZA()()()()}}function he(l,a){1&l&&(e.TgZ(0,"div",26),e._UZ(1,"mat-spinner",27),e.qZA())}const me=function(l,a){return{itemsPerPage:l,currentPage:a}};class K{constructor(a,i,r,d,u,h,g,y){this.appSettings=a,this.dialog=i,this.paymentService=r,this.router=d,this.global=u,this.localStore=h,this.translateService=g,this.snackBar=y,this.curCOMId=b.N.comid,this.account=new C.n,this.count=4,this.settings=this.appSettings.settings}ngOnInit(){this.userSUb=this.global.user.subscribe(a=>{this.account=a}),this.localStore.getItem("token")&&this.localStore.getItem("account")?(this.global.me=JSON.parse(this.localStore.getItem("account")),this.prepareMsgLanguage(),this.getDocuments()):this.router.navigate(["/sign-in"])}getDocuments(){this.documentsAll=null,this.paymentService.getAllPayableDocuments(this.curCOMId,this.account.periorty).subscribe(a=>this.documentsAll=a)}removeDocument(a){this.dialog.open(c.$,{maxWidth:"400px",data:{title:this.deletedTitleMsg,message:this.askToDeletedMsg}}).afterClosed().subscribe(r=>{r&&this.paymentService.deleteDocument(a).subscribe(d=>this.getDocuments())})}onPageChanged(a){this.page=a,this.getDocuments(),window.scrollTo(0,0)}gotoNewDocument(){this.router.navigate(["/payments/payable-add/"])}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(a=>{this.errorRetrieveMsg=a}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(a=>{this.askToDeletedMsg=a}),this.translateService.get("MESSAGE.DELETED").subscribe(a=>{this.deletedMsg=a}),this.translateService.get("MESSAGE.ConfirmAction").subscribe(a=>{this.deletedTitleMsg=a})}}function ge(l,a){1&l&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&l&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.ADD")))}function De(l,a){1&l&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&l&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BTN.EDIT")))}function ye(l,a){if(1&l&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&l){const i=a.$implicit;e.Q6J("value",i.id),e.xp6(1),e.hij(" ",i.CUSName," ")}}K.\u0275fac=function(a){return new(a||K)(e.Y36(o.d),e.Y36(s.uw),e.Y36(t),e.Y36(D.F0),e.Y36(F.U),e.Y36(M.C),e.Y36(S.sK),e.Y36(w.ux))},K.\u0275cmp=e.Xpm({type:K,selectors:[["app-payable-doc-list"]],features:[e._Bn([t])],decls:46,vars:24,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"p-2"],["fxLayout","row"],["appearance","legacy"],["controls","matButtonToggleGroup"],["value","add",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center"],["appearance","legacy","value","list"],["viewType","matButtonToggleGroup"],["value","list"],["value","grid"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-3"],[1,"mat-mdc-table","admin-table"],[1,"mat-mdc-header-row"],[1,"mat-mdc-header-cell"],["class","mat-mdc-row",4,"ngFor","ngForOf"],["fxLayout","row wrap",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","user-spinner",4,"ngIf"],[1,"mat-mdc-row"],[1,"mat-mdc-cell"],[1,"p-2","actions"],["mat-mini-fab","","color","primary",3,"routerLink","matTooltip"],["mat-mini-fab","","color","warn",3,"matTooltip","click"],["fxLayout","row wrap"],["fxFlex","100",1,"p-2"],[1,"text-center"],["autoHide","true","maxSize","5",1,"product-pagination",3,"pageChange"],["fxLayout","column","fxLayoutAlign","center center",1,"user-spinner"],["color","primary"]],template:function(a,i){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2,3)(4,"mat-button-toggle",4),e.NdJ("click",function(){return i.gotoNewDocument()}),e.TgZ(5,"mat-icon"),e._uU(6,"note_add"),e.qZA()()()(),e.TgZ(7,"div",5)(8,"mat-button-toggle-group",6,7)(10,"mat-button-toggle",8)(11,"mat-icon"),e._uU(12,"view_list"),e.qZA()(),e.TgZ(13,"mat-button-toggle",9)(14,"mat-icon"),e._uU(15,"view_module"),e.qZA()()()()(),e._UZ(16,"mat-divider"),e.TgZ(17,"mat-card")(18,"div",10)(19,"h2"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e._UZ(22,"mat-divider"),e.TgZ(23,"div",11)(24,"div",12)(25,"div",13)(26,"h2"),e._uU(27),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",13)(30,"h2"),e._uU(31),e.ALo(32,"translate"),e.qZA()(),e.TgZ(33,"div",13)(34,"h2"),e._uU(35),e.ALo(36,"translate"),e.qZA()(),e.TgZ(37,"div",13)(38,"h2"),e._uU(39),e.ALo(40,"translate"),e.qZA()(),e._UZ(41,"div",13),e.qZA(),e.YNc(42,ue,19,13,"div",14),e.ALo(43,"paginate"),e.qZA()(),e.YNc(44,pe,4,0,"div",15),e.YNc(45,he,2,0,"div",16)),2&a&&(e.xp6(20),e.Oqu(e.lcZ(21,8,"HTML.PayableDoc_List")),e.xp6(7),e.hij(" ",e.lcZ(28,10,"HTML.TENANT")," "),e.xp6(4),e.hij(" ",e.lcZ(32,12,"HTML.DocDate")," "),e.xp6(4),e.hij(" ",e.lcZ(36,14,"HTML.DocValue")," "),e.xp6(4),e.hij(" ",e.lcZ(40,16,"HTML.DocPrintedNo")," "),e.xp6(3),e.Q6J("ngForOf",e.xi3(43,18,i.documentsAll,e.WLB(21,me,i.count,i.page))),e.xp6(2),e.Q6J("ngIf",i.documentsAll),e.xp6(1),e.Q6J("ngIf",!i.documentsAll))},dependencies:[O.LS,m.sg,m.O5,D.rH,f.xw,f.Wh,f.yH,P.Tq,P.nh,E.A9,E.Yi,v.a8,H.Hw,Y.d,J.Ou,B.gM,O._s,S.X$],styles:[".user-name{padding:0 12px;font-weight:400}.user-content{padding:10px}.user-content .user-img{position:relative}.user-content .user-img img{border-radius:50%;width:80px;height:80px}.user-content .user-img img.blocked{opacity:.5}.user-content .user-img .mat-icon{position:absolute;top:-8px;left:-8px;font-size:96px;height:96px;width:96px}.user-content .mat-mdc-slide-toggle{margin-top:15px}.user-content .user-details span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-content .user-details .mat-icon{padding:2px 10px}.user-content .user-details.blocked{opacity:.5}.user-search{width:0;overflow:hidden;transition:.3s}.user-search .mat-mdc-form-field{width:100%!important;text-align:center!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-infix{min-height:36px;padding:8px 0!important}.user-search .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.user-search .mat-mdc-input-element{text-align:center}.user-search.show{width:100%;overflow:visible}.user-spinner{position:absolute;inset:0}.mat-mdc-card{overflow:hidden}\n"],encapsulation:2});class A{constructor(a,i,r,d,u,h,g,y,N,V){this.activatedRoute=a,this.localStore=i,this._companyService=r,this.global=d,this.router=u,this.snackBar=h,this.docsService=g,this.tenantsService=y,this.translateService=N,this.fb=V,this.curCOMId=b.N.comid,this.account=new C.n,this.AllTenants=[]}ngOnInit(){this.userSUb=this.global.user.subscribe(a=>{this.account=a}),this.localStore.getItem("token")&&this.localStore.getItem("account")?(this.global.me=JSON.parse(this.localStore.getItem("account")),this.getTenants(),this.sub=this.activatedRoute.params.subscribe(a=>{a.id?(this.id=+a.id,this.getDocById(this.id)):this.payDocForDisplay=new G,this.docData_Form=this.fb.group({id:null,PDOCode:null,PDOValue:{value:null,disabled:this.id},PDODocDate:null,PDODocType:"P",PDODocClassType:"H",PDOPrintedCode:null,PDODocSecondPerson:null,PDONotes:null,contract_KeyField:null,branch_KeyField:null,owner_KeyField:null,build_KeyField:null,unit_KeyField:null,installment_KeyField:null,customer_KeyField:null})})):this.router.navigate(["/sign-in"])}getDocById(a){this.docsService.getOneDocs(a).subscribe(i=>{this.fillForm(i),this.payDocForDisplay=i})}fillForm(a){null!=a.PDODocDate&&(this.s_docDate=a.PDODocDate),this.docData_Form.patchValue({id:a.id,contract_KeyField:a.contract_KeyField,branch_KeyField:a.branch_KeyField,owner_KeyField:a.owner_KeyField,build_KeyField:a.build_KeyField,unit_KeyField:a.unit_KeyField,installment_KeyField:a.installment_KeyField,customer_KeyField:a.customer_KeyField,PDOCode:a.PDOCode,PDOValue:a.PDOValue,PDODocType:a.PDODocType,PDODocDate:a.PDODocDate,PDODocClassType:a.PDODocClassType,PDOPrintedCode:a.PDOPrintedCode,PDODocSecondPerson:a.PDODocSecondPerson,PDONotes:a.PDONotes})}readCustumer(a){this.tenantsService.getOneCustomer(a.value).subscribe(i=>{this.docData_Form.patchValue({PDODocSecondPerson:i.CUSName})})}getTenants(){this.AllTenants=null,this.tenantsService.getCustomers(this.curCOMId,this.account.periorty).subscribe(a=>this.AllTenants=a)}mappingFormValue_ToPayDocClass(){const a=new m.uU("en-GB").transform(this.docData_Form.value.PDODocDate,"dd/MM/yyyy");this.payDocForDisplay.id=this.docData_Form.value.id,this.payDocForDisplay.contract_KeyField=this.docData_Form.value.contract_KeyField,this.payDocForDisplay.branch_KeyField=this.docData_Form.value.branch_KeyField,this.payDocForDisplay.owner_KeyField=this.docData_Form.value.owner_KeyField,this.payDocForDisplay.build_KeyField=this.docData_Form.value.build_KeyField,this.payDocForDisplay.unit_KeyField=this.docData_Form.value.unit_KeyField,this.payDocForDisplay.installment_KeyField=this.docData_Form.value.installment_KeyField,this.payDocForDisplay.customer_KeyField=this.docData_Form.value.customer_KeyField,null!=this.docData_Form.value.PDODocDate&&(this.payDocForDisplay.PDODocDate=a),this.payDocForDisplay.PDOCode=this.docData_Form.value.PDOCode,this.payDocForDisplay.PDOValue=this.docData_Form.value.PDOValue,this.payDocForDisplay.PDODocType=this.docData_Form.value.PDODocType,this.payDocForDisplay.PDODocClassType=this.docData_Form.value.PDODocClassType,this.payDocForDisplay.PDOPrintedCode=this.docData_Form.value.PDOPrintedCode,this.payDocForDisplay.PDODocSecondPerson=this.docData_Form.value.PDODocSecondPerson,this.payDocForDisplay.PDONotes=this.docData_Form.value.PDONotes}saveEditDocData(a){this.mappingFormValue_ToPayDocClass(),a?this.docsService.editDoc(this.payDocForDisplay).subscribe(i=>{this.snackBar.open("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["payments/payable-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})}):this.docsService.addDoc(this.payDocForDisplay).subscribe(i=>{this.snackBar.open("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}),this.router.navigate(["payments/payable-list"])},i=>{this.snackBar.open(" \u062e\u0637\u0623 \u0641\u064a \u0627\u0636\u0627\u0641\u0647 \u0645\u0633\u062a\u0646\u062f","\xd7",{panelClass:"error",verticalPosition:"top",duration:3e3})})}prepareMsgLanguage(){this.translateService.get("MESSAGE.RETRIEVE_ERROR").subscribe(a=>{this.errorRetrieveMsg=a}),this.translateService.get("MESSAGE.SURE_DELETE").subscribe(a=>{this.askToDeletedMsg=a}),this.translateService.get("MESSAGE.DELETED").subscribe(a=>{this.deletedMsg=a})}}A.\u0275fac=function(a){return new(a||A)(e.Y36(D.gz),e.Y36(M.C),e.Y36(j.J),e.Y36(F.U),e.Y36(D.F0),e.Y36(w.ux),e.Y36(t),e.Y36(W.v),e.Y36(S.sK),e.Y36(p.qu))},A.\u0275cmp=e.Xpm({type:A,selectors:[["app-payable-doc-dialog"]],decls:68,vars:38,consts:[[1,"p-2"],[4,"ngIf"],[1,"pt-3"],["autocomplete","off","fxLayout","row wrap",3,"formGroup","ngSubmit"],["fxFlex","100","fxFlex.gt-sm","40",1,"px-2"],["width","400","height","300","id","campanyLogo",3,"src"],["fxFlex","100","fxFlex.gt-sm","60",1,"px-2"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","25",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","PDOCode"],["fxFlex","100","fxFlex.gt-sm","75",1,"px-1"],["formControlName","customer_KeyField","id","oneCustomOpSel",3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","PDODocDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["pdoDocDate",""],["fxFlex","100","fxFlex.gt-sm","50",1,"px-1"],["matInput","","formControlName","PDOValue","required",""],["matInput","","formControlName","PDOPrintedCode"],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","PDODocSecondPerson","required",""],["fxFlex","100",1,"px-1"],["matInput","","formControlName","PDONotes","rows","3"],["fxFlex","100",1,"mt-2","text-center","w-100"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(a,i){if(1&a&&(e.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"h1"),e.YNc(5,ge,3,3,"span",1),e.YNc(6,De,3,3,"span",1),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"mat-card-content",2)(10,"form",3),e.NdJ("ngSubmit",function(){return i.saveEditDocData(i.payDocForDisplay.id)}),e.TgZ(11,"div",4),e._UZ(12,"img",5),e.qZA(),e.TgZ(13,"div",6)(14,"div",7)(15,"div",8)(16,"mat-form-field",9)(17,"mat-label"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"input",10),e.qZA()(),e.TgZ(21,"div",11)(22,"mat-form-field",9)(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"mat-select",12),e.NdJ("selectionChange",function(d){return i.readCustumer(d)}),e.ALo(27,"translate"),e.TgZ(28,"mat-option",13),e._uU(29,"-"),e.qZA(),e.YNc(30,ye,2,2,"mat-option",14),e.qZA()()(),e.TgZ(31,"div",8)(32,"mat-form-field",9)(33,"mat-label"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e._UZ(36,"input",15)(37,"mat-datepicker-toggle",16)(38,"mat-datepicker",null,17),e.qZA()(),e.TgZ(40,"div",18)(41,"mat-form-field",9)(42,"mat-label"),e._uU(43),e.ALo(44,"translate"),e.qZA(),e._UZ(45,"input",19),e.qZA()(),e.TgZ(46,"div",8)(47,"mat-form-field",9)(48,"mat-label"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e._UZ(51,"input",20),e.qZA()(),e.TgZ(52,"div",21)(53,"mat-form-field",9)(54,"mat-label"),e._uU(55),e.ALo(56,"translate"),e.qZA(),e._UZ(57,"input",22),e.qZA()(),e.TgZ(58,"div",23)(59,"mat-form-field",9)(60,"mat-label"),e._uU(61),e.ALo(62,"translate"),e.qZA(),e._UZ(63,"textarea",24),e.qZA()(),e.TgZ(64,"div",25)(65,"button",26),e._uU(66),e.ALo(67,"translate"),e.qZA()()()()()()()()),2&a){const r=e.MAs(39);e.xp6(5),e.Q6J("ngIf",!i.payDocForDisplay.id),e.xp6(1),e.Q6J("ngIf",i.payDocForDisplay.id),e.xp6(1),e.hij(" ",e.lcZ(8,18,"HTML.PayableDoc"),""),e.xp6(3),e.Q6J("formGroup",i.docData_Form),e.xp6(2),e.Q6J("src","assets/images/paymentDocs/payable.png",e.LSH),e.xp6(6),e.Oqu(e.lcZ(19,20,"HTML.CODE")),e.xp6(6),e.hij(" ",e.lcZ(25,22,"HTML.TENANT"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(27,24,"HTML.TENANT")),e.xp6(4),e.Q6J("ngForOf",i.AllTenants),e.xp6(4),e.Oqu(e.lcZ(35,26,"HTML.DocDate")),e.xp6(2),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(6),e.Oqu(e.lcZ(44,28,"HTML.DocValue")),e.xp6(6),e.Oqu(e.lcZ(50,30,"HTML.DocPrintedNo")),e.xp6(6),e.Oqu(e.lcZ(56,32,"HTML.DocSecondPart_PayableDoc")),e.xp6(6),e.Oqu(e.lcZ(62,34,"HTML.Notes")),e.xp6(4),e.Q6J("disabled",!i.docData_Form.valid),e.xp6(1),e.Oqu(e.lcZ(67,36,"BTN.SAVE"))}},dependencies:[p._Y,p.Fj,p.JJ,p.JL,p.Q7,m.sg,m.O5,p.sg,p.u,f.xw,f.yH,k.ey,P.lW,v.a8,v.dn,v.dk,v.n5,x.Mq,x.hl,x.nW,Q.Nt,T.KE,T.hX,T.R9,X.gD,S.X$]});const $=[{path:"",redirectTo:"receivable-list",pathMatch:"full"},{path:"receivable-list",component:U,data:{breadcrumb:"Receipt Vouchers"}},{path:"receivable-add/:id",component:R,data:{breadcrumb:"Edit Receipt Voucher"}},{path:"receivable-add",component:R,data:{breadcrumb:"Add Receipt Voucher"}},{path:"payable-list",component:K,data:{breadcrumb:"Payment Vouchers"}},{path:"payable-add/:id",component:A,data:{breadcrumb:"Edit Payment Voucher"}},{path:"payable-add",component:A,data:{breadcrumb:"Add Payment Voucher"}}];class Z{}Z.\u0275fac=function(a){return new(a||Z)},Z.\u0275mod=e.oAB({type:Z}),Z.\u0275inj=e.cJS({imports:[_.JF,p.u5,O.JX,de.D,m.ez,D.Bz.forChild($),p.UX,re.m,O.JX]})}}]);